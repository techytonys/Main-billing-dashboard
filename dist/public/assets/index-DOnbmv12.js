var aC=(s,t)=>()=>(t||s((t={exports:{}}).exports,t),t.exports);var d$=aC((er,tr)=>{function iC(s,t){for(var n=0;n<t.length;n++){const a=t[n];if(typeof a!="string"&&!Array.isArray(a)){for(const o in a)if(o!=="default"&&!(o in s)){const l=Object.getOwnPropertyDescriptor(a,o);l&&Object.defineProperty(s,o,l.get?l:{enumerable:!0,get:()=>a[o]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();var vi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ed(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var xf={exports:{}},gc={},gf={exports:{}},xt={};var Iv;function oC(){if(Iv)return xt;Iv=1;var s=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),d=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),v=Symbol.iterator;function y(F){return F===null||typeof F!="object"?null:(F=v&&F[v]||F["@@iterator"],typeof F=="function"?F:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,g={};function k(F,te,B){this.props=F,this.context=te,this.refs=g,this.updater=B||N}k.prototype.isReactComponent={},k.prototype.setState=function(F,te){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,te,"setState")},k.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function A(){}A.prototype=k.prototype;function E(F,te,B){this.props=F,this.context=te,this.refs=g,this.updater=B||N}var S=E.prototype=new A;S.constructor=E,C(S,k.prototype),S.isPureReactComponent=!0;var R=Array.isArray,H=Object.prototype.hasOwnProperty,re={current:null},K={key:!0,ref:!0,__self:!0,__source:!0};function ee(F,te,B){var U,M={},q=null,oe=null;if(te!=null)for(U in te.ref!==void 0&&(oe=te.ref),te.key!==void 0&&(q=""+te.key),te)H.call(te,U)&&!K.hasOwnProperty(U)&&(M[U]=te[U]);var he=arguments.length-2;if(he===1)M.children=B;else if(1<he){for(var Se=Array(he),be=0;be<he;be++)Se[be]=arguments[be+2];M.children=Se}if(F&&F.defaultProps)for(U in he=F.defaultProps,he)M[U]===void 0&&(M[U]=he[U]);return{$$typeof:s,type:F,key:q,ref:oe,props:M,_owner:re.current}}function me(F,te){return{$$typeof:s,type:F.type,key:te,ref:F.ref,props:F.props,_owner:F._owner}}function pe(F){return typeof F=="object"&&F!==null&&F.$$typeof===s}function L(F){var te={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(B){return te[B]})}var X=/\/+/g;function z(F,te){return typeof F=="object"&&F!==null&&F.key!=null?L(""+F.key):te.toString(36)}function V(F,te,B,U,M){var q=typeof F;(q==="undefined"||q==="boolean")&&(F=null);var oe=!1;if(F===null)oe=!0;else switch(q){case"string":case"number":oe=!0;break;case"object":switch(F.$$typeof){case s:case t:oe=!0}}if(oe)return oe=F,M=M(oe),F=U===""?"."+z(oe,0):U,R(M)?(B="",F!=null&&(B=F.replace(X,"$&/")+"/"),V(M,te,B,"",function(be){return be})):M!=null&&(pe(M)&&(M=me(M,B+(!M.key||oe&&oe.key===M.key?"":(""+M.key).replace(X,"$&/")+"/")+F)),te.push(M)),1;if(oe=0,U=U===""?".":U+":",R(F))for(var he=0;he<F.length;he++){q=F[he];var Se=U+z(q,he);oe+=V(q,te,B,Se,M)}else if(Se=y(F),typeof Se=="function")for(F=Se.call(F),he=0;!(q=F.next()).done;)q=q.value,Se=U+z(q,he++),oe+=V(q,te,B,Se,M);else if(q==="object")throw te=String(F),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.");return oe}function se(F,te,B){if(F==null)return F;var U=[],M=0;return V(F,U,"","",function(q){return te.call(B,q,M++)}),U}function I(F){if(F._status===-1){var te=F._result;te=te(),te.then(function(B){(F._status===0||F._status===-1)&&(F._status=1,F._result=B)},function(B){(F._status===0||F._status===-1)&&(F._status=2,F._result=B)}),F._status===-1&&(F._status=0,F._result=te)}if(F._status===1)return F._result.default;throw F._result}var O={current:null},T={transition:null},Y={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:T,ReactCurrentOwner:re};function Q(){throw Error("act(...) is not supported in production builds of React.")}return xt.Children={map:se,forEach:function(F,te,B){se(F,function(){te.apply(this,arguments)},B)},count:function(F){var te=0;return se(F,function(){te++}),te},toArray:function(F){return se(F,function(te){return te})||[]},only:function(F){if(!pe(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},xt.Component=k,xt.Fragment=n,xt.Profiler=o,xt.PureComponent=E,xt.StrictMode=a,xt.Suspense=h,xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,xt.act=Q,xt.cloneElement=function(F,te,B){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var U=C({},F.props),M=F.key,q=F.ref,oe=F._owner;if(te!=null){if(te.ref!==void 0&&(q=te.ref,oe=re.current),te.key!==void 0&&(M=""+te.key),F.type&&F.type.defaultProps)var he=F.type.defaultProps;for(Se in te)H.call(te,Se)&&!K.hasOwnProperty(Se)&&(U[Se]=te[Se]===void 0&&he!==void 0?he[Se]:te[Se])}var Se=arguments.length-2;if(Se===1)U.children=B;else if(1<Se){he=Array(Se);for(var be=0;be<Se;be++)he[be]=arguments[be+2];U.children=he}return{$$typeof:s,type:F.type,key:M,ref:q,props:U,_owner:oe}},xt.createContext=function(F){return F={$$typeof:d,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:l,_context:F},F.Consumer=F},xt.createElement=ee,xt.createFactory=function(F){var te=ee.bind(null,F);return te.type=F,te},xt.createRef=function(){return{current:null}},xt.forwardRef=function(F){return{$$typeof:u,render:F}},xt.isValidElement=pe,xt.lazy=function(F){return{$$typeof:b,_payload:{_status:-1,_result:F},_init:I}},xt.memo=function(F,te){return{$$typeof:f,type:F,compare:te===void 0?null:te}},xt.startTransition=function(F){var te=T.transition;T.transition={};try{F()}finally{T.transition=te}},xt.unstable_act=Q,xt.useCallback=function(F,te){return O.current.useCallback(F,te)},xt.useContext=function(F){return O.current.useContext(F)},xt.useDebugValue=function(){},xt.useDeferredValue=function(F){return O.current.useDeferredValue(F)},xt.useEffect=function(F,te){return O.current.useEffect(F,te)},xt.useId=function(){return O.current.useId()},xt.useImperativeHandle=function(F,te,B){return O.current.useImperativeHandle(F,te,B)},xt.useInsertionEffect=function(F,te){return O.current.useInsertionEffect(F,te)},xt.useLayoutEffect=function(F,te){return O.current.useLayoutEffect(F,te)},xt.useMemo=function(F,te){return O.current.useMemo(F,te)},xt.useReducer=function(F,te,B){return O.current.useReducer(F,te,B)},xt.useRef=function(F){return O.current.useRef(F)},xt.useState=function(F){return O.current.useState(F)},xt.useSyncExternalStore=function(F,te,B){return O.current.useSyncExternalStore(F,te,B)},xt.useTransition=function(){return O.current.useTransition()},xt.version="18.3.1",xt}var Ov;function um(){return Ov||(Ov=1,gf.exports=oC()),gf.exports}var _v;function lC(){if(_v)return gc;_v=1;var s=um(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(u,h,f){var b,v={},y=null,N=null;f!==void 0&&(y=""+f),h.key!==void 0&&(y=""+h.key),h.ref!==void 0&&(N=h.ref);for(b in h)a.call(h,b)&&!l.hasOwnProperty(b)&&(v[b]=h[b]);if(u&&u.defaultProps)for(b in h=u.defaultProps,h)v[b]===void 0&&(v[b]=h[b]);return{$$typeof:t,type:u,key:y,ref:N,props:v,_owner:o.current}}return gc.Fragment=n,gc.jsx=d,gc.jsxs=d,gc}var Lv;function cC(){return Lv||(Lv=1,xf.exports=lC()),xf.exports}var e=cC(),nu={},vf={exports:{}},Ln={},yf={exports:{}},bf={};var Mv;function dC(){return Mv||(Mv=1,(function(s){function t(T,Y){var Q=T.length;T.push(Y);e:for(;0<Q;){var F=Q-1>>>1,te=T[F];if(0<o(te,Y))T[F]=Y,T[Q]=te,Q=F;else break e}}function n(T){return T.length===0?null:T[0]}function a(T){if(T.length===0)return null;var Y=T[0],Q=T.pop();if(Q!==Y){T[0]=Q;e:for(var F=0,te=T.length,B=te>>>1;F<B;){var U=2*(F+1)-1,M=T[U],q=U+1,oe=T[q];if(0>o(M,Q))q<te&&0>o(oe,M)?(T[F]=oe,T[q]=Q,F=q):(T[F]=M,T[U]=Q,F=U);else if(q<te&&0>o(oe,Q))T[F]=oe,T[q]=Q,F=q;else break e}}return Y}function o(T,Y){var Q=T.sortIndex-Y.sortIndex;return Q!==0?Q:T.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var d=Date,u=d.now();s.unstable_now=function(){return d.now()-u}}var h=[],f=[],b=1,v=null,y=3,N=!1,C=!1,g=!1,k=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(T){for(var Y=n(f);Y!==null;){if(Y.callback===null)a(f);else if(Y.startTime<=T)a(f),Y.sortIndex=Y.expirationTime,t(h,Y);else break;Y=n(f)}}function R(T){if(g=!1,S(T),!C)if(n(h)!==null)C=!0,I(H);else{var Y=n(f);Y!==null&&O(R,Y.startTime-T)}}function H(T,Y){C=!1,g&&(g=!1,A(ee),ee=-1),N=!0;var Q=y;try{for(S(Y),v=n(h);v!==null&&(!(v.expirationTime>Y)||T&&!L());){var F=v.callback;if(typeof F=="function"){v.callback=null,y=v.priorityLevel;var te=F(v.expirationTime<=Y);Y=s.unstable_now(),typeof te=="function"?v.callback=te:v===n(h)&&a(h),S(Y)}else a(h);v=n(h)}if(v!==null)var B=!0;else{var U=n(f);U!==null&&O(R,U.startTime-Y),B=!1}return B}finally{v=null,y=Q,N=!1}}var re=!1,K=null,ee=-1,me=5,pe=-1;function L(){return!(s.unstable_now()-pe<me)}function X(){if(K!==null){var T=s.unstable_now();pe=T;var Y=!0;try{Y=K(!0,T)}finally{Y?z():(re=!1,K=null)}}else re=!1}var z;if(typeof E=="function")z=function(){E(X)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,se=V.port2;V.port1.onmessage=X,z=function(){se.postMessage(null)}}else z=function(){k(X,0)};function I(T){K=T,re||(re=!0,z())}function O(T,Y){ee=k(function(){T(s.unstable_now())},Y)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(T){T.callback=null},s.unstable_continueExecution=function(){C||N||(C=!0,I(H))},s.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):me=0<T?Math.floor(1e3/T):5},s.unstable_getCurrentPriorityLevel=function(){return y},s.unstable_getFirstCallbackNode=function(){return n(h)},s.unstable_next=function(T){switch(y){case 1:case 2:case 3:var Y=3;break;default:Y=y}var Q=y;y=Y;try{return T()}finally{y=Q}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(T,Y){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var Q=y;y=T;try{return Y()}finally{y=Q}},s.unstable_scheduleCallback=function(T,Y,Q){var F=s.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?F+Q:F):Q=F,T){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=Q+te,T={id:b++,callback:Y,priorityLevel:T,startTime:Q,expirationTime:te,sortIndex:-1},Q>F?(T.sortIndex=Q,t(f,T),n(h)===null&&T===n(f)&&(g?(A(ee),ee=-1):g=!0,O(R,Q-F))):(T.sortIndex=te,t(h,T),C||N||(C=!0,I(H))),T},s.unstable_shouldYield=L,s.unstable_wrapCallback=function(T){var Y=y;return function(){var Q=y;y=Y;try{return T.apply(this,arguments)}finally{y=Q}}}})(bf)),bf}var Dv;function uC(){return Dv||(Dv=1,yf.exports=dC()),yf.exports}var $v;function mC(){if($v)return Ln;$v=1;var s=um(),t=uC();function n(r){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+r,c=1;c<arguments.length;c++)i+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(r,i){d(r,i),d(r+"Capture",i)}function d(r,i){for(o[r]=i,r=0;r<i.length;r++)a.add(i[r])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,b={},v={};function y(r){return h.call(v,r)?!0:h.call(b,r)?!1:f.test(r)?v[r]=!0:(b[r]=!0,!1)}function N(r,i,c,m){if(c!==null&&c.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return m?!1:c!==null?!c.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function C(r,i,c,m){if(i===null||typeof i>"u"||N(r,i,c,m))return!0;if(m)return!1;if(c!==null)switch(c.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function g(r,i,c,m,x,w,P){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=m,this.attributeNamespace=x,this.mustUseProperty=c,this.propertyName=r,this.type=i,this.sanitizeURL=w,this.removeEmptyString=P}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){k[r]=new g(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var i=r[0];k[i]=new g(i,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){k[r]=new g(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){k[r]=new g(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){k[r]=new g(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){k[r]=new g(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){k[r]=new g(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){k[r]=new g(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){k[r]=new g(r,5,!1,r.toLowerCase(),null,!1,!1)});var A=/[\-:]([a-z])/g;function E(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var i=r.replace(A,E);k[i]=new g(i,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var i=r.replace(A,E);k[i]=new g(i,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var i=r.replace(A,E);k[i]=new g(i,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){k[r]=new g(r,1,!1,r.toLowerCase(),null,!1,!1)}),k.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){k[r]=new g(r,1,!1,r.toLowerCase(),null,!0,!0)});function S(r,i,c,m){var x=k.hasOwnProperty(i)?k[i]:null;(x!==null?x.type!==0:m||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(C(i,c,x,m)&&(c=null),m||x===null?y(i)&&(c===null?r.removeAttribute(i):r.setAttribute(i,""+c)):x.mustUseProperty?r[x.propertyName]=c===null?x.type===3?!1:"":c:(i=x.attributeName,m=x.attributeNamespace,c===null?r.removeAttribute(i):(x=x.type,c=x===3||x===4&&c===!0?"":""+c,m?r.setAttributeNS(m,i,c):r.setAttribute(i,c))))}var R=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,H=Symbol.for("react.element"),re=Symbol.for("react.portal"),K=Symbol.for("react.fragment"),ee=Symbol.for("react.strict_mode"),me=Symbol.for("react.profiler"),pe=Symbol.for("react.provider"),L=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),se=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),O=Symbol.for("react.offscreen"),T=Symbol.iterator;function Y(r){return r===null||typeof r!="object"?null:(r=T&&r[T]||r["@@iterator"],typeof r=="function"?r:null)}var Q=Object.assign,F;function te(r){if(F===void 0)try{throw Error()}catch(c){var i=c.stack.trim().match(/\n( *(at )?)/);F=i&&i[1]||""}return`
`+F+r}var B=!1;function U(r,i){if(!r||B)return"";B=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(fe){var m=fe}Reflect.construct(r,[],i)}else{try{i.call()}catch(fe){m=fe}r.call(i.prototype)}else{try{throw Error()}catch(fe){m=fe}r()}}catch(fe){if(fe&&m&&typeof fe.stack=="string"){for(var x=fe.stack.split(`
`),w=m.stack.split(`
`),P=x.length-1,W=w.length-1;1<=P&&0<=W&&x[P]!==w[W];)W--;for(;1<=P&&0<=W;P--,W--)if(x[P]!==w[W]){if(P!==1||W!==1)do if(P--,W--,0>W||x[P]!==w[W]){var Z=`
`+x[P].replace(" at new "," at ");return r.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",r.displayName)),Z}while(1<=P&&0<=W);break}}}finally{B=!1,Error.prepareStackTrace=c}return(r=r?r.displayName||r.name:"")?te(r):""}function M(r){switch(r.tag){case 5:return te(r.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 2:case 15:return r=U(r.type,!1),r;case 11:return r=U(r.type.render,!1),r;case 1:return r=U(r.type,!0),r;default:return""}}function q(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case K:return"Fragment";case re:return"Portal";case me:return"Profiler";case ee:return"StrictMode";case z:return"Suspense";case V:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case L:return(r.displayName||"Context")+".Consumer";case pe:return(r._context.displayName||"Context")+".Provider";case X:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case se:return i=r.displayName||null,i!==null?i:q(r.type)||"Memo";case I:i=r._payload,r=r._init;try{return q(r(i))}catch{}}return null}function oe(r){var i=r.type;switch(r.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=i.render,r=r.displayName||r.name||"",i.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(i);case 8:return i===ee?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function he(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Se(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function be(r){var i=Se(r)?"checked":"value",c=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),m=""+r[i];if(!r.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var x=c.get,w=c.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return x.call(this)},set:function(P){m=""+P,w.call(this,P)}}),Object.defineProperty(r,i,{enumerable:c.enumerable}),{getValue:function(){return m},setValue:function(P){m=""+P},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function Pe(r){r._valueTracker||(r._valueTracker=be(r))}function Me(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var c=i.getValue(),m="";return r&&(m=Se(r)?r.checked?"true":"false":r.value),r=m,r!==c?(i.setValue(r),!0):!1}function Fe(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Je(r,i){var c=i.checked;return Q({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??r._wrapperState.initialChecked})}function lt(r,i){var c=i.defaultValue==null?"":i.defaultValue,m=i.checked!=null?i.checked:i.defaultChecked;c=he(i.value!=null?i.value:c),r._wrapperState={initialChecked:m,initialValue:c,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Bt(r,i){i=i.checked,i!=null&&S(r,"checked",i,!1)}function Xt(r,i){Bt(r,i);var c=he(i.value),m=i.type;if(c!=null)m==="number"?(c===0&&r.value===""||r.value!=c)&&(r.value=""+c):r.value!==""+c&&(r.value=""+c);else if(m==="submit"||m==="reset"){r.removeAttribute("value");return}i.hasOwnProperty("value")?ws(r,i.type,c):i.hasOwnProperty("defaultValue")&&ws(r,i.type,he(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(r.defaultChecked=!!i.defaultChecked)}function us(r,i,c){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var m=i.type;if(!(m!=="submit"&&m!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+r._wrapperState.initialValue,c||i===r.value||(r.value=i),r.defaultValue=i}c=r.name,c!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,c!==""&&(r.name=c)}function ws(r,i,c){(i!=="number"||Fe(r.ownerDocument)!==r)&&(c==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+c&&(r.defaultValue=""+c))}var os=Array.isArray;function ms(r,i,c,m){if(r=r.options,i){i={};for(var x=0;x<c.length;x++)i["$"+c[x]]=!0;for(c=0;c<r.length;c++)x=i.hasOwnProperty("$"+r[c].value),r[c].selected!==x&&(r[c].selected=x),x&&m&&(r[c].defaultSelected=!0)}else{for(c=""+he(c),i=null,x=0;x<r.length;x++){if(r[x].value===c){r[x].selected=!0,m&&(r[x].defaultSelected=!0);return}i!==null||r[x].disabled||(i=r[x])}i!==null&&(i.selected=!0)}}function Et(r,i){if(i.dangerouslySetInnerHTML!=null)throw Error(n(91));return Q({},i,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function _t(r,i){var c=i.value;if(c==null){if(c=i.children,i=i.defaultValue,c!=null){if(i!=null)throw Error(n(92));if(os(c)){if(1<c.length)throw Error(n(93));c=c[0]}i=c}i==null&&(i=""),c=i}r._wrapperState={initialValue:he(c)}}function wt(r,i){var c=he(i.value),m=he(i.defaultValue);c!=null&&(c=""+c,c!==r.value&&(r.value=c),i.defaultValue==null&&r.defaultValue!==c&&(r.defaultValue=c)),m!=null&&(r.defaultValue=""+m)}function de(r){var i=r.textContent;i===r._wrapperState.initialValue&&i!==""&&i!==null&&(r.value=i)}function Oe(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function st(r,i){return r==null||r==="http://www.w3.org/1999/xhtml"?Oe(i):r==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var St,Zt=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,c,m,x){MSApp.execUnsafeLocalFunction(function(){return r(i,c,m,x)})}:r})(function(r,i){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=i;else{for(St=St||document.createElement("div"),St.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=St.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;i.firstChild;)r.appendChild(i.firstChild)}});function qt(r,i){if(i){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=i;return}}r.textContent=i}var D={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xe=["Webkit","ms","Moz","O"];Object.keys(D).forEach(function(r){xe.forEach(function(i){i=i+r.charAt(0).toUpperCase()+r.substring(1),D[i]=D[r]})});function Ke(r,i,c){return i==null||typeof i=="boolean"||i===""?"":c||typeof i!="number"||i===0||D.hasOwnProperty(r)&&D[r]?(""+i).trim():i+"px"}function jt(r,i){r=r.style;for(var c in i)if(i.hasOwnProperty(c)){var m=c.indexOf("--")===0,x=Ke(c,i[c],m);c==="float"&&(c="cssFloat"),m?r.setProperty(c,x):r[c]=x}}var nt=Q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function At(r,i){if(i){if(nt[r]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(n(137,r));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(n(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(n(61))}if(i.style!=null&&typeof i.style!="object")throw Error(n(62))}}function Us(r,i){if(r.indexOf("-")===-1)return typeof i.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qs=null;function Is(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ys=null,Os=null,Bs=null;function Hs(r){if(r=sc(r)){if(typeof Ys!="function")throw Error(n(280));var i=r.stateNode;i&&(i=vd(i),Ys(r.stateNode,r.type,i))}}function En(r){Os?Bs?Bs.push(r):Bs=[r]:Os=r}function ie(){if(Os){var r=Os,i=Bs;if(Bs=Os=null,Hs(r),i)for(r=0;r<i.length;r++)Hs(i[r])}}function We(r,i){return r(i)}function Pt(){}var Es=!1;function ar(r,i,c){if(Es)return r(i,c);Es=!0;try{return We(r,i,c)}finally{Es=!1,(Os!==null||Bs!==null)&&(Pt(),ie())}}function _s(r,i){var c=r.stateNode;if(c===null)return null;var m=vd(c);if(m===null)return null;c=m[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(r=r.type,m=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!m;break e;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(n(231,i,typeof c));return c}var Gr=!1;if(u)try{var ir={};Object.defineProperty(ir,"passive",{get:function(){Gr=!0}}),window.addEventListener("test",ir,ir),window.removeEventListener("test",ir,ir)}catch{Gr=!1}function Mi(r,i,c,m,x,w,P,W,Z){var fe=Array.prototype.slice.call(arguments,3);try{i.apply(c,fe)}catch(Ee){this.onError(Ee)}}var js=!1,Ks=null,ss=!1,Qr=null,pa={onError:function(r){js=!0,Ks=r}};function Ha(r,i,c,m,x,w,P,W,Z){js=!1,Ks=null,Mi.apply(pa,arguments)}function mn(r,i,c,m,x,w,P,W,Z){if(Ha.apply(this,arguments),js){if(js){var fe=Ks;js=!1,Ks=null}else throw Error(n(198));ss||(ss=!0,Qr=fe)}}function Tn(r){var i=r,c=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(c=i.return),r=i.return;while(r)}return i.tag===3?c:null}function xs(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function xa(r){if(Tn(r)!==r)throw Error(n(188))}function Ka(r){var i=r.alternate;if(!i){if(i=Tn(r),i===null)throw Error(n(188));return i!==r?null:r}for(var c=r,m=i;;){var x=c.return;if(x===null)break;var w=x.alternate;if(w===null){if(m=x.return,m!==null){c=m;continue}break}if(x.child===w.child){for(w=x.child;w;){if(w===c)return xa(x),r;if(w===m)return xa(x),i;w=w.sibling}throw Error(n(188))}if(c.return!==m.return)c=x,m=w;else{for(var P=!1,W=x.child;W;){if(W===c){P=!0,c=x,m=w;break}if(W===m){P=!0,m=x,c=w;break}W=W.sibling}if(!P){for(W=w.child;W;){if(W===c){P=!0,c=w,m=x;break}if(W===m){P=!0,m=w,c=x;break}W=W.sibling}if(!P)throw Error(n(189))}}if(c.alternate!==m)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?r:i}function Wa(r){return r=Ka(r),r!==null?Ve(r):null}function Ve(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var i=Ve(r);if(i!==null)return i;r=r.sibling}return null}var J=t.unstable_scheduleCallback,we=t.unstable_cancelCallback,ze=t.unstable_shouldYield,Ut=t.unstable_requestPaint,ut=t.unstable_now,Jt=t.unstable_getCurrentPriorityLevel,gs=t.unstable_ImmediatePriority,Ls=t.unstable_UserBlockingPriority,rn=t.unstable_NormalPriority,or=t.unstable_LowPriority,Ft=t.unstable_IdlePriority,Hn=null,Xs=null;function Fl(r){if(Xs&&typeof Xs.onCommitFiberRoot=="function")try{Xs.onCommitFiberRoot(Hn,r,void 0,(r.current.flags&128)===128)}catch{}}var hn=Math.clz32?Math.clz32:Va,zl=Math.log,Ul=Math.LN2;function Va(r){return r>>>=0,r===0?32:31-(zl(r)/Ul|0)|0}var Yr=64,lr=4194304;function Xr(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function ga(r,i){var c=r.pendingLanes;if(c===0)return 0;var m=0,x=r.suspendedLanes,w=r.pingedLanes,P=c&268435455;if(P!==0){var W=P&~x;W!==0?m=Xr(W):(w&=P,w!==0&&(m=Xr(w)))}else P=c&~x,P!==0?m=Xr(P):w!==0&&(m=Xr(w));if(m===0)return 0;if(i!==0&&i!==m&&(i&x)===0&&(x=m&-m,w=i&-i,x>=w||x===16&&(w&4194240)!==0))return i;if((m&4)!==0&&(m|=c&16),i=r.entangledLanes,i!==0)for(r=r.entanglements,i&=m;0<i;)c=31-hn(i),x=1<<c,m|=r[c],i&=~x;return m}function Bl(r,i){switch(r){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hl(r,i){for(var c=r.suspendedLanes,m=r.pingedLanes,x=r.expirationTimes,w=r.pendingLanes;0<w;){var P=31-hn(w),W=1<<P,Z=x[P];Z===-1?((W&c)===0||(W&m)!==0)&&(x[P]=Bl(W,i)):Z<=i&&(r.expiredLanes|=W),w&=~W}}function Di(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Po(){var r=Yr;return Yr<<=1,(Yr&4194240)===0&&(Yr=64),r}function va(r){for(var i=[],c=0;31>c;c++)i.push(r);return i}function ya(r,i,c){r.pendingLanes|=i,i!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,i=31-hn(i),r[i]=c}function Kl(r,i){var c=r.pendingLanes&~i;r.pendingLanes=i,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=i,r.mutableReadLanes&=i,r.entangledLanes&=i,i=r.entanglements;var m=r.eventTimes;for(r=r.expirationTimes;0<c;){var x=31-hn(c),w=1<<x;i[x]=0,m[x]=-1,r[x]=-1,c&=~w}}function Cr(r,i){var c=r.entangledLanes|=i;for(r=r.entanglements;c;){var m=31-hn(c),x=1<<m;x&i|r[m]&i&&(r[m]|=i),c&=~x}}var ht=0;function cr(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var dr,$i,Kn,Ro,Io,qi=!1,Ga=[],Wn=null,ls=null,Vn=null,Zr=new Map,ur=new Map,An=[],Qa="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Oo(r,i){switch(r){case"focusin":case"focusout":Wn=null;break;case"dragenter":case"dragleave":ls=null;break;case"mouseover":case"mouseout":Vn=null;break;case"pointerover":case"pointerout":Zr.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":ur.delete(i.pointerId)}}function Jr(r,i,c,m,x,w){return r===null||r.nativeEvent!==w?(r={blockedOn:i,domEventName:c,eventSystemFlags:m,nativeEvent:w,targetContainers:[x]},i!==null&&(i=sc(i),i!==null&&$i(i)),r):(r.eventSystemFlags|=m,i=r.targetContainers,x!==null&&i.indexOf(x)===-1&&i.push(x),r)}function Fi(r,i,c,m,x){switch(i){case"focusin":return Wn=Jr(Wn,r,i,c,m,x),!0;case"dragenter":return ls=Jr(ls,r,i,c,m,x),!0;case"mouseover":return Vn=Jr(Vn,r,i,c,m,x),!0;case"pointerover":var w=x.pointerId;return Zr.set(w,Jr(Zr.get(w)||null,r,i,c,m,x)),!0;case"gotpointercapture":return w=x.pointerId,ur.set(w,Jr(ur.get(w)||null,r,i,c,m,x)),!0}return!1}function zi(r){var i=Hi(r.target);if(i!==null){var c=Tn(i);if(c!==null){if(i=c.tag,i===13){if(i=xs(c),i!==null){r.blockedOn=i,Io(r.priority,function(){Kn(c)});return}}else if(i===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function fn(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var c=Nt(r.domEventName,r.eventSystemFlags,i[0],r.nativeEvent);if(c===null){c=r.nativeEvent;var m=new c.constructor(c.type,c);Qs=m,c.target.dispatchEvent(m),Qs=null}else return i=sc(c),i!==null&&$i(i),r.blockedOn=c,!1;i.shift()}return!0}function Ui(r,i,c){fn(r)&&c.delete(i)}function Bi(){qi=!1,Wn!==null&&fn(Wn)&&(Wn=null),ls!==null&&fn(ls)&&(ls=null),Vn!==null&&fn(Vn)&&(Vn=null),Zr.forEach(Ui),ur.forEach(Ui)}function ba(r,i){r.blockedOn===i&&(r.blockedOn=null,qi||(qi=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Bi)))}function wa(r){function i(x){return ba(x,r)}if(0<Ga.length){ba(Ga[0],r);for(var c=1;c<Ga.length;c++){var m=Ga[c];m.blockedOn===r&&(m.blockedOn=null)}}for(Wn!==null&&ba(Wn,r),ls!==null&&ba(ls,r),Vn!==null&&ba(Vn,r),Zr.forEach(i),ur.forEach(i),c=0;c<An.length;c++)m=An[c],m.blockedOn===r&&(m.blockedOn=null);for(;0<An.length&&(c=An[0],c.blockedOn===null);)zi(c),c.blockedOn===null&&An.shift()}var j=R.ReactCurrentBatchConfig,_=!0;function G(r,i,c,m){var x=ht,w=j.transition;j.transition=null;try{ht=1,ct(r,i,c,m)}finally{ht=x,j.transition=w}}function ge(r,i,c,m){var x=ht,w=j.transition;j.transition=null;try{ht=4,ct(r,i,c,m)}finally{ht=x,j.transition=w}}function ct(r,i,c,m){if(_){var x=Nt(r,i,c,m);if(x===null)ah(r,i,m,Ye,c),Oo(r,m);else if(Fi(x,r,i,c,m))m.stopPropagation();else if(Oo(r,m),i&4&&-1<Qa.indexOf(r)){for(;x!==null;){var w=sc(x);if(w!==null&&dr(w),w=Nt(r,i,c,m),w===null&&ah(r,i,m,Ye,c),w===x)break;x=w}x!==null&&m.stopPropagation()}else ah(r,i,m,null,c)}}var Ye=null;function Nt(r,i,c,m){if(Ye=null,r=Is(m),r=Hi(r),r!==null)if(i=Tn(r),i===null)r=null;else if(c=i.tag,c===13){if(r=xs(i),r!==null)return r;r=null}else if(c===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null);return Ye=r,null}function kt(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jt()){case gs:return 1;case Ls:return 4;case rn:case or:return 16;case Ft:return 536870912;default:return 16}default:return 16}}var Ht=null,Tt=null,Ns=null;function Zs(){if(Ns)return Ns;var r,i=Tt,c=i.length,m,x="value"in Ht?Ht.value:Ht.textContent,w=x.length;for(r=0;r<c&&i[r]===x[r];r++);var P=c-r;for(m=1;m<=P&&i[c-m]===x[w-m];m++);return Ns=x.slice(r,1<m?1-m:void 0)}function cs(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function ks(){return!0}function Ts(){return!1}function vs(r){function i(c,m,x,w,P){this._reactName=c,this._targetInst=x,this.type=m,this.nativeEvent=w,this.target=P,this.currentTarget=null;for(var W in r)r.hasOwnProperty(W)&&(c=r[W],this[W]=c?c(w):w[W]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?ks:Ts,this.isPropagationStopped=Ts,this}return Q(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=ks)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=ks)},persist:function(){},isPersistent:ks}),i}var an={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sr=vs(an),Ya=Q({},an,{view:0,detail:0}),_o=vs(Ya),Xa,Wm,Wl,dd=Q({},Ya,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gm,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Wl&&(Wl&&r.type==="mousemove"?(Xa=r.screenX-Wl.screenX,Wm=r.screenY-Wl.screenY):Wm=Xa=0,Wl=r),Xa)},movementY:function(r){return"movementY"in r?r.movementY:Wm}}),wg=vs(dd),O5=Q({},dd,{dataTransfer:0}),_5=vs(O5),L5=Q({},Ya,{relatedTarget:0}),Vm=vs(L5),M5=Q({},an,{animationName:0,elapsedTime:0,pseudoElement:0}),D5=vs(M5),$5=Q({},an,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),q5=vs($5),F5=Q({},an,{data:0}),jg=vs(F5),z5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},U5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},B5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function H5(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=B5[r])?!!i[r]:!1}function Gm(){return H5}var K5=Q({},Ya,{key:function(r){if(r.key){var i=z5[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=cs(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?U5[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gm,charCode:function(r){return r.type==="keypress"?cs(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?cs(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),W5=vs(K5),V5=Q({},dd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ng=vs(V5),G5=Q({},Ya,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gm}),Q5=vs(G5),Y5=Q({},an,{propertyName:0,elapsedTime:0,pseudoElement:0}),X5=vs(Y5),Z5=Q({},dd,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),J5=vs(Z5),e4=[9,13,27,32],Qm=u&&"CompositionEvent"in window,Vl=null;u&&"documentMode"in document&&(Vl=document.documentMode);var t4=u&&"TextEvent"in window&&!Vl,kg=u&&(!Qm||Vl&&8<Vl&&11>=Vl),Cg=" ",Sg=!1;function Eg(r,i){switch(r){case"keyup":return e4.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tg(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Lo=!1;function s4(r,i){switch(r){case"compositionend":return Tg(i);case"keypress":return i.which!==32?null:(Sg=!0,Cg);case"textInput":return r=i.data,r===Cg&&Sg?null:r;default:return null}}function n4(r,i){if(Lo)return r==="compositionend"||!Qm&&Eg(r,i)?(r=Zs(),Ns=Tt=Ht=null,Lo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return kg&&i.locale!=="ko"?null:i.data;default:return null}}var r4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ag(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!r4[r.type]:i==="textarea"}function Pg(r,i,c,m){En(m),i=pd(i,"onChange"),0<i.length&&(c=new Sr("onChange","change",null,c,m),r.push({event:c,listeners:i}))}var Gl=null,Ql=null;function a4(r){Gg(r,0)}function ud(r){var i=Fo(r);if(Me(i))return r}function i4(r,i){if(r==="change")return i}var Rg=!1;if(u){var Ym;if(u){var Xm="oninput"in document;if(!Xm){var Ig=document.createElement("div");Ig.setAttribute("oninput","return;"),Xm=typeof Ig.oninput=="function"}Ym=Xm}else Ym=!1;Rg=Ym&&(!document.documentMode||9<document.documentMode)}function Og(){Gl&&(Gl.detachEvent("onpropertychange",_g),Ql=Gl=null)}function _g(r){if(r.propertyName==="value"&&ud(Ql)){var i=[];Pg(i,Ql,r,Is(r)),ar(a4,i)}}function o4(r,i,c){r==="focusin"?(Og(),Gl=i,Ql=c,Gl.attachEvent("onpropertychange",_g)):r==="focusout"&&Og()}function l4(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return ud(Ql)}function c4(r,i){if(r==="click")return ud(i)}function d4(r,i){if(r==="input"||r==="change")return ud(i)}function u4(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Er=typeof Object.is=="function"?Object.is:u4;function Yl(r,i){if(Er(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var c=Object.keys(r),m=Object.keys(i);if(c.length!==m.length)return!1;for(m=0;m<c.length;m++){var x=c[m];if(!h.call(i,x)||!Er(r[x],i[x]))return!1}return!0}function Lg(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Mg(r,i){var c=Lg(r);r=0;for(var m;c;){if(c.nodeType===3){if(m=r+c.textContent.length,r<=i&&m>=i)return{node:c,offset:i-r};r=m}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Lg(c)}}function Dg(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?Dg(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function $g(){for(var r=window,i=Fe();i instanceof r.HTMLIFrameElement;){try{var c=typeof i.contentWindow.location.href=="string"}catch{c=!1}if(c)r=i.contentWindow;else break;i=Fe(r.document)}return i}function Zm(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}function m4(r){var i=$g(),c=r.focusedElem,m=r.selectionRange;if(i!==c&&c&&c.ownerDocument&&Dg(c.ownerDocument.documentElement,c)){if(m!==null&&Zm(c)){if(i=m.start,r=m.end,r===void 0&&(r=i),"selectionStart"in c)c.selectionStart=i,c.selectionEnd=Math.min(r,c.value.length);else if(r=(i=c.ownerDocument||document)&&i.defaultView||window,r.getSelection){r=r.getSelection();var x=c.textContent.length,w=Math.min(m.start,x);m=m.end===void 0?w:Math.min(m.end,x),!r.extend&&w>m&&(x=m,m=w,w=x),x=Mg(c,w);var P=Mg(c,m);x&&P&&(r.rangeCount!==1||r.anchorNode!==x.node||r.anchorOffset!==x.offset||r.focusNode!==P.node||r.focusOffset!==P.offset)&&(i=i.createRange(),i.setStart(x.node,x.offset),r.removeAllRanges(),w>m?(r.addRange(i),r.extend(P.node,P.offset)):(i.setEnd(P.node,P.offset),r.addRange(i)))}}for(i=[],r=c;r=r.parentNode;)r.nodeType===1&&i.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<i.length;c++)r=i[c],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var h4=u&&"documentMode"in document&&11>=document.documentMode,Mo=null,Jm=null,Xl=null,eh=!1;function qg(r,i,c){var m=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;eh||Mo==null||Mo!==Fe(m)||(m=Mo,"selectionStart"in m&&Zm(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Xl&&Yl(Xl,m)||(Xl=m,m=pd(Jm,"onSelect"),0<m.length&&(i=new Sr("onSelect","select",null,i,c),r.push({event:i,listeners:m}),i.target=Mo)))}function md(r,i){var c={};return c[r.toLowerCase()]=i.toLowerCase(),c["Webkit"+r]="webkit"+i,c["Moz"+r]="moz"+i,c}var Do={animationend:md("Animation","AnimationEnd"),animationiteration:md("Animation","AnimationIteration"),animationstart:md("Animation","AnimationStart"),transitionend:md("Transition","TransitionEnd")},th={},Fg={};u&&(Fg=document.createElement("div").style,"AnimationEvent"in window||(delete Do.animationend.animation,delete Do.animationiteration.animation,delete Do.animationstart.animation),"TransitionEvent"in window||delete Do.transitionend.transition);function hd(r){if(th[r])return th[r];if(!Do[r])return r;var i=Do[r],c;for(c in i)if(i.hasOwnProperty(c)&&c in Fg)return th[r]=i[c];return r}var zg=hd("animationend"),Ug=hd("animationiteration"),Bg=hd("animationstart"),Hg=hd("transitionend"),Kg=new Map,Wg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Za(r,i){Kg.set(r,i),l(i,[r])}for(var sh=0;sh<Wg.length;sh++){var nh=Wg[sh],f4=nh.toLowerCase(),p4=nh[0].toUpperCase()+nh.slice(1);Za(f4,"on"+p4)}Za(zg,"onAnimationEnd"),Za(Ug,"onAnimationIteration"),Za(Bg,"onAnimationStart"),Za("dblclick","onDoubleClick"),Za("focusin","onFocus"),Za("focusout","onBlur"),Za(Hg,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),x4=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zl));function Vg(r,i,c){var m=r.type||"unknown-event";r.currentTarget=c,mn(m,i,void 0,r),r.currentTarget=null}function Gg(r,i){i=(i&4)!==0;for(var c=0;c<r.length;c++){var m=r[c],x=m.event;m=m.listeners;e:{var w=void 0;if(i)for(var P=m.length-1;0<=P;P--){var W=m[P],Z=W.instance,fe=W.currentTarget;if(W=W.listener,Z!==w&&x.isPropagationStopped())break e;Vg(x,W,fe),w=Z}else for(P=0;P<m.length;P++){if(W=m[P],Z=W.instance,fe=W.currentTarget,W=W.listener,Z!==w&&x.isPropagationStopped())break e;Vg(x,W,fe),w=Z}}}if(ss)throw r=Qr,ss=!1,Qr=null,r}function ns(r,i){var c=i[uh];c===void 0&&(c=i[uh]=new Set);var m=r+"__bubble";c.has(m)||(Qg(i,r,2,!1),c.add(m))}function rh(r,i,c){var m=0;i&&(m|=4),Qg(c,r,m,i)}var fd="_reactListening"+Math.random().toString(36).slice(2);function Jl(r){if(!r[fd]){r[fd]=!0,a.forEach(function(c){c!=="selectionchange"&&(x4.has(c)||rh(c,!1,r),rh(c,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[fd]||(i[fd]=!0,rh("selectionchange",!1,i))}}function Qg(r,i,c,m){switch(kt(i)){case 1:var x=G;break;case 4:x=ge;break;default:x=ct}c=x.bind(null,i,c,r),x=void 0,!Gr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(x=!0),m?x!==void 0?r.addEventListener(i,c,{capture:!0,passive:x}):r.addEventListener(i,c,!0):x!==void 0?r.addEventListener(i,c,{passive:x}):r.addEventListener(i,c,!1)}function ah(r,i,c,m,x){var w=m;if((i&1)===0&&(i&2)===0&&m!==null)e:for(;;){if(m===null)return;var P=m.tag;if(P===3||P===4){var W=m.stateNode.containerInfo;if(W===x||W.nodeType===8&&W.parentNode===x)break;if(P===4)for(P=m.return;P!==null;){var Z=P.tag;if((Z===3||Z===4)&&(Z=P.stateNode.containerInfo,Z===x||Z.nodeType===8&&Z.parentNode===x))return;P=P.return}for(;W!==null;){if(P=Hi(W),P===null)return;if(Z=P.tag,Z===5||Z===6){m=w=P;continue e}W=W.parentNode}}m=m.return}ar(function(){var fe=w,Ee=Is(c),Ae=[];e:{var Ne=Kg.get(r);if(Ne!==void 0){var $e=Sr,Be=r;switch(r){case"keypress":if(cs(c)===0)break e;case"keydown":case"keyup":$e=W5;break;case"focusin":Be="focus",$e=Vm;break;case"focusout":Be="blur",$e=Vm;break;case"beforeblur":case"afterblur":$e=Vm;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$e=wg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$e=_5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$e=Q5;break;case zg:case Ug:case Bg:$e=D5;break;case Hg:$e=X5;break;case"scroll":$e=_o;break;case"wheel":$e=J5;break;case"copy":case"cut":case"paste":$e=q5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$e=Ng}var Ge=(i&4)!==0,Cs=!Ge&&r==="scroll",ae=Ge?Ne!==null?Ne+"Capture":null:Ne;Ge=[];for(var ne=fe,le;ne!==null;){le=ne;var Re=le.stateNode;if(le.tag===5&&Re!==null&&(le=Re,ae!==null&&(Re=_s(ne,ae),Re!=null&&Ge.push(ec(ne,Re,le)))),Cs)break;ne=ne.return}0<Ge.length&&(Ne=new $e(Ne,Be,null,c,Ee),Ae.push({event:Ne,listeners:Ge}))}}if((i&7)===0){e:{if(Ne=r==="mouseover"||r==="pointerover",$e=r==="mouseout"||r==="pointerout",Ne&&c!==Qs&&(Be=c.relatedTarget||c.fromElement)&&(Hi(Be)||Be[ja]))break e;if(($e||Ne)&&(Ne=Ee.window===Ee?Ee:(Ne=Ee.ownerDocument)?Ne.defaultView||Ne.parentWindow:window,$e?(Be=c.relatedTarget||c.toElement,$e=fe,Be=Be?Hi(Be):null,Be!==null&&(Cs=Tn(Be),Be!==Cs||Be.tag!==5&&Be.tag!==6)&&(Be=null)):($e=null,Be=fe),$e!==Be)){if(Ge=wg,Re="onMouseLeave",ae="onMouseEnter",ne="mouse",(r==="pointerout"||r==="pointerover")&&(Ge=Ng,Re="onPointerLeave",ae="onPointerEnter",ne="pointer"),Cs=$e==null?Ne:Fo($e),le=Be==null?Ne:Fo(Be),Ne=new Ge(Re,ne+"leave",$e,c,Ee),Ne.target=Cs,Ne.relatedTarget=le,Re=null,Hi(Ee)===fe&&(Ge=new Ge(ae,ne+"enter",Be,c,Ee),Ge.target=le,Ge.relatedTarget=Cs,Re=Ge),Cs=Re,$e&&Be)t:{for(Ge=$e,ae=Be,ne=0,le=Ge;le;le=$o(le))ne++;for(le=0,Re=ae;Re;Re=$o(Re))le++;for(;0<ne-le;)Ge=$o(Ge),ne--;for(;0<le-ne;)ae=$o(ae),le--;for(;ne--;){if(Ge===ae||ae!==null&&Ge===ae.alternate)break t;Ge=$o(Ge),ae=$o(ae)}Ge=null}else Ge=null;$e!==null&&Yg(Ae,Ne,$e,Ge,!1),Be!==null&&Cs!==null&&Yg(Ae,Cs,Be,Ge,!0)}}e:{if(Ne=fe?Fo(fe):window,$e=Ne.nodeName&&Ne.nodeName.toLowerCase(),$e==="select"||$e==="input"&&Ne.type==="file")var et=i4;else if(Ag(Ne))if(Rg)et=d4;else{et=l4;var rt=o4}else($e=Ne.nodeName)&&$e.toLowerCase()==="input"&&(Ne.type==="checkbox"||Ne.type==="radio")&&(et=c4);if(et&&(et=et(r,fe))){Pg(Ae,et,c,Ee);break e}rt&&rt(r,Ne,fe),r==="focusout"&&(rt=Ne._wrapperState)&&rt.controlled&&Ne.type==="number"&&ws(Ne,"number",Ne.value)}switch(rt=fe?Fo(fe):window,r){case"focusin":(Ag(rt)||rt.contentEditable==="true")&&(Mo=rt,Jm=fe,Xl=null);break;case"focusout":Xl=Jm=Mo=null;break;case"mousedown":eh=!0;break;case"contextmenu":case"mouseup":case"dragend":eh=!1,qg(Ae,c,Ee);break;case"selectionchange":if(h4)break;case"keydown":case"keyup":qg(Ae,c,Ee)}var at;if(Qm)e:{switch(r){case"compositionstart":var dt="onCompositionStart";break e;case"compositionend":dt="onCompositionEnd";break e;case"compositionupdate":dt="onCompositionUpdate";break e}dt=void 0}else Lo?Eg(r,c)&&(dt="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(dt="onCompositionStart");dt&&(kg&&c.locale!=="ko"&&(Lo||dt!=="onCompositionStart"?dt==="onCompositionEnd"&&Lo&&(at=Zs()):(Ht=Ee,Tt="value"in Ht?Ht.value:Ht.textContent,Lo=!0)),rt=pd(fe,dt),0<rt.length&&(dt=new jg(dt,r,null,c,Ee),Ae.push({event:dt,listeners:rt}),at?dt.data=at:(at=Tg(c),at!==null&&(dt.data=at)))),(at=t4?s4(r,c):n4(r,c))&&(fe=pd(fe,"onBeforeInput"),0<fe.length&&(Ee=new jg("onBeforeInput","beforeinput",null,c,Ee),Ae.push({event:Ee,listeners:fe}),Ee.data=at))}Gg(Ae,i)})}function ec(r,i,c){return{instance:r,listener:i,currentTarget:c}}function pd(r,i){for(var c=i+"Capture",m=[];r!==null;){var x=r,w=x.stateNode;x.tag===5&&w!==null&&(x=w,w=_s(r,c),w!=null&&m.unshift(ec(r,w,x)),w=_s(r,i),w!=null&&m.push(ec(r,w,x))),r=r.return}return m}function $o(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Yg(r,i,c,m,x){for(var w=i._reactName,P=[];c!==null&&c!==m;){var W=c,Z=W.alternate,fe=W.stateNode;if(Z!==null&&Z===m)break;W.tag===5&&fe!==null&&(W=fe,x?(Z=_s(c,w),Z!=null&&P.unshift(ec(c,Z,W))):x||(Z=_s(c,w),Z!=null&&P.push(ec(c,Z,W)))),c=c.return}P.length!==0&&r.push({event:i,listeners:P})}var g4=/\r\n?/g,v4=/\u0000|\uFFFD/g;function Xg(r){return(typeof r=="string"?r:""+r).replace(g4,`
`).replace(v4,"")}function xd(r,i,c){if(i=Xg(i),Xg(r)!==i&&c)throw Error(n(425))}function gd(){}var ih=null,oh=null;function lh(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var ch=typeof setTimeout=="function"?setTimeout:void 0,y4=typeof clearTimeout=="function"?clearTimeout:void 0,Zg=typeof Promise=="function"?Promise:void 0,b4=typeof queueMicrotask=="function"?queueMicrotask:typeof Zg<"u"?function(r){return Zg.resolve(null).then(r).catch(w4)}:ch;function w4(r){setTimeout(function(){throw r})}function dh(r,i){var c=i,m=0;do{var x=c.nextSibling;if(r.removeChild(c),x&&x.nodeType===8)if(c=x.data,c==="/$"){if(m===0){r.removeChild(x),wa(i);return}m--}else c!=="$"&&c!=="$?"&&c!=="$!"||m++;c=x}while(c);wa(i)}function Ja(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return r}function Jg(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"){if(i===0)return r;i--}else c==="/$"&&i++}r=r.previousSibling}return null}var qo=Math.random().toString(36).slice(2),ea="__reactFiber$"+qo,tc="__reactProps$"+qo,ja="__reactContainer$"+qo,uh="__reactEvents$"+qo,j4="__reactListeners$"+qo,N4="__reactHandles$"+qo;function Hi(r){var i=r[ea];if(i)return i;for(var c=r.parentNode;c;){if(i=c[ja]||c[ea]){if(c=i.alternate,i.child!==null||c!==null&&c.child!==null)for(r=Jg(r);r!==null;){if(c=r[ea])return c;r=Jg(r)}return i}r=c,c=r.parentNode}return null}function sc(r){return r=r[ea]||r[ja],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Fo(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(n(33))}function vd(r){return r[tc]||null}var mh=[],zo=-1;function ei(r){return{current:r}}function rs(r){0>zo||(r.current=mh[zo],mh[zo]=null,zo--)}function es(r,i){zo++,mh[zo]=r.current,r.current=i}var ti={},on=ei(ti),Pn=ei(!1),Ki=ti;function Uo(r,i){var c=r.type.contextTypes;if(!c)return ti;var m=r.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===i)return m.__reactInternalMemoizedMaskedChildContext;var x={},w;for(w in c)x[w]=i[w];return m&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=x),x}function Rn(r){return r=r.childContextTypes,r!=null}function yd(){rs(Pn),rs(on)}function e0(r,i,c){if(on.current!==ti)throw Error(n(168));es(on,i),es(Pn,c)}function t0(r,i,c){var m=r.stateNode;if(i=i.childContextTypes,typeof m.getChildContext!="function")return c;m=m.getChildContext();for(var x in m)if(!(x in i))throw Error(n(108,oe(r)||"Unknown",x));return Q({},c,m)}function bd(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||ti,Ki=on.current,es(on,r),es(Pn,Pn.current),!0}function s0(r,i,c){var m=r.stateNode;if(!m)throw Error(n(169));c?(r=t0(r,i,Ki),m.__reactInternalMemoizedMergedChildContext=r,rs(Pn),rs(on),es(on,r)):rs(Pn),es(Pn,c)}var Na=null,wd=!1,hh=!1;function n0(r){Na===null?Na=[r]:Na.push(r)}function k4(r){wd=!0,n0(r)}function si(){if(!hh&&Na!==null){hh=!0;var r=0,i=ht;try{var c=Na;for(ht=1;r<c.length;r++){var m=c[r];do m=m(!0);while(m!==null)}Na=null,wd=!1}catch(x){throw Na!==null&&(Na=Na.slice(r+1)),J(gs,si),x}finally{ht=i,hh=!1}}return null}var Bo=[],Ho=0,jd=null,Nd=0,mr=[],hr=0,Wi=null,ka=1,Ca="";function Vi(r,i){Bo[Ho++]=Nd,Bo[Ho++]=jd,jd=r,Nd=i}function r0(r,i,c){mr[hr++]=ka,mr[hr++]=Ca,mr[hr++]=Wi,Wi=r;var m=ka;r=Ca;var x=32-hn(m)-1;m&=~(1<<x),c+=1;var w=32-hn(i)+x;if(30<w){var P=x-x%5;w=(m&(1<<P)-1).toString(32),m>>=P,x-=P,ka=1<<32-hn(i)+x|c<<x|m,Ca=w+r}else ka=1<<w|c<<x|m,Ca=r}function fh(r){r.return!==null&&(Vi(r,1),r0(r,1,0))}function ph(r){for(;r===jd;)jd=Bo[--Ho],Bo[Ho]=null,Nd=Bo[--Ho],Bo[Ho]=null;for(;r===Wi;)Wi=mr[--hr],mr[hr]=null,Ca=mr[--hr],mr[hr]=null,ka=mr[--hr],mr[hr]=null}var Gn=null,Qn=null,ds=!1,Tr=null;function a0(r,i){var c=gr(5,null,null,0);c.elementType="DELETED",c.stateNode=i,c.return=r,i=r.deletions,i===null?(r.deletions=[c],r.flags|=16):i.push(c)}function i0(r,i){switch(r.tag){case 5:var c=r.type;return i=i.nodeType!==1||c.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(r.stateNode=i,Gn=r,Qn=Ja(i.firstChild),!0):!1;case 6:return i=r.pendingProps===""||i.nodeType!==3?null:i,i!==null?(r.stateNode=i,Gn=r,Qn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(c=Wi!==null?{id:ka,overflow:Ca}:null,r.memoizedState={dehydrated:i,treeContext:c,retryLane:1073741824},c=gr(18,null,null,0),c.stateNode=i,c.return=r,r.child=c,Gn=r,Qn=null,!0):!1;default:return!1}}function xh(r){return(r.mode&1)!==0&&(r.flags&128)===0}function gh(r){if(ds){var i=Qn;if(i){var c=i;if(!i0(r,i)){if(xh(r))throw Error(n(418));i=Ja(c.nextSibling);var m=Gn;i&&i0(r,i)?a0(m,c):(r.flags=r.flags&-4097|2,ds=!1,Gn=r)}}else{if(xh(r))throw Error(n(418));r.flags=r.flags&-4097|2,ds=!1,Gn=r}}}function o0(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Gn=r}function kd(r){if(r!==Gn)return!1;if(!ds)return o0(r),ds=!0,!1;var i;if((i=r.tag!==3)&&!(i=r.tag!==5)&&(i=r.type,i=i!=="head"&&i!=="body"&&!lh(r.type,r.memoizedProps)),i&&(i=Qn)){if(xh(r))throw l0(),Error(n(418));for(;i;)a0(r,i),i=Ja(i.nextSibling)}if(o0(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8){var c=r.data;if(c==="/$"){if(i===0){Qn=Ja(r.nextSibling);break e}i--}else c!=="$"&&c!=="$!"&&c!=="$?"||i++}r=r.nextSibling}Qn=null}}else Qn=Gn?Ja(r.stateNode.nextSibling):null;return!0}function l0(){for(var r=Qn;r;)r=Ja(r.nextSibling)}function Ko(){Qn=Gn=null,ds=!1}function vh(r){Tr===null?Tr=[r]:Tr.push(r)}var C4=R.ReactCurrentBatchConfig;function nc(r,i,c){if(r=c.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(n(309));var m=c.stateNode}if(!m)throw Error(n(147,r));var x=m,w=""+r;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===w?i.ref:(i=function(P){var W=x.refs;P===null?delete W[w]:W[w]=P},i._stringRef=w,i)}if(typeof r!="string")throw Error(n(284));if(!c._owner)throw Error(n(290,r))}return r}function Cd(r,i){throw r=Object.prototype.toString.call(i),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r))}function c0(r){var i=r._init;return i(r._payload)}function d0(r){function i(ae,ne){if(r){var le=ae.deletions;le===null?(ae.deletions=[ne],ae.flags|=16):le.push(ne)}}function c(ae,ne){if(!r)return null;for(;ne!==null;)i(ae,ne),ne=ne.sibling;return null}function m(ae,ne){for(ae=new Map;ne!==null;)ne.key!==null?ae.set(ne.key,ne):ae.set(ne.index,ne),ne=ne.sibling;return ae}function x(ae,ne){return ae=di(ae,ne),ae.index=0,ae.sibling=null,ae}function w(ae,ne,le){return ae.index=le,r?(le=ae.alternate,le!==null?(le=le.index,le<ne?(ae.flags|=2,ne):le):(ae.flags|=2,ne)):(ae.flags|=1048576,ne)}function P(ae){return r&&ae.alternate===null&&(ae.flags|=2),ae}function W(ae,ne,le,Re){return ne===null||ne.tag!==6?(ne=df(le,ae.mode,Re),ne.return=ae,ne):(ne=x(ne,le),ne.return=ae,ne)}function Z(ae,ne,le,Re){var et=le.type;return et===K?Ee(ae,ne,le.props.children,Re,le.key):ne!==null&&(ne.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===I&&c0(et)===ne.type)?(Re=x(ne,le.props),Re.ref=nc(ae,ne,le),Re.return=ae,Re):(Re=Qd(le.type,le.key,le.props,null,ae.mode,Re),Re.ref=nc(ae,ne,le),Re.return=ae,Re)}function fe(ae,ne,le,Re){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==le.containerInfo||ne.stateNode.implementation!==le.implementation?(ne=uf(le,ae.mode,Re),ne.return=ae,ne):(ne=x(ne,le.children||[]),ne.return=ae,ne)}function Ee(ae,ne,le,Re,et){return ne===null||ne.tag!==7?(ne=to(le,ae.mode,Re,et),ne.return=ae,ne):(ne=x(ne,le),ne.return=ae,ne)}function Ae(ae,ne,le){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return ne=df(""+ne,ae.mode,le),ne.return=ae,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case H:return le=Qd(ne.type,ne.key,ne.props,null,ae.mode,le),le.ref=nc(ae,null,ne),le.return=ae,le;case re:return ne=uf(ne,ae.mode,le),ne.return=ae,ne;case I:var Re=ne._init;return Ae(ae,Re(ne._payload),le)}if(os(ne)||Y(ne))return ne=to(ne,ae.mode,le,null),ne.return=ae,ne;Cd(ae,ne)}return null}function Ne(ae,ne,le,Re){var et=ne!==null?ne.key:null;if(typeof le=="string"&&le!==""||typeof le=="number")return et!==null?null:W(ae,ne,""+le,Re);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case H:return le.key===et?Z(ae,ne,le,Re):null;case re:return le.key===et?fe(ae,ne,le,Re):null;case I:return et=le._init,Ne(ae,ne,et(le._payload),Re)}if(os(le)||Y(le))return et!==null?null:Ee(ae,ne,le,Re,null);Cd(ae,le)}return null}function $e(ae,ne,le,Re,et){if(typeof Re=="string"&&Re!==""||typeof Re=="number")return ae=ae.get(le)||null,W(ne,ae,""+Re,et);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case H:return ae=ae.get(Re.key===null?le:Re.key)||null,Z(ne,ae,Re,et);case re:return ae=ae.get(Re.key===null?le:Re.key)||null,fe(ne,ae,Re,et);case I:var rt=Re._init;return $e(ae,ne,le,rt(Re._payload),et)}if(os(Re)||Y(Re))return ae=ae.get(le)||null,Ee(ne,ae,Re,et,null);Cd(ne,Re)}return null}function Be(ae,ne,le,Re){for(var et=null,rt=null,at=ne,dt=ne=0,Gs=null;at!==null&&dt<le.length;dt++){at.index>dt?(Gs=at,at=null):Gs=at.sibling;var Lt=Ne(ae,at,le[dt],Re);if(Lt===null){at===null&&(at=Gs);break}r&&at&&Lt.alternate===null&&i(ae,at),ne=w(Lt,ne,dt),rt===null?et=Lt:rt.sibling=Lt,rt=Lt,at=Gs}if(dt===le.length)return c(ae,at),ds&&Vi(ae,dt),et;if(at===null){for(;dt<le.length;dt++)at=Ae(ae,le[dt],Re),at!==null&&(ne=w(at,ne,dt),rt===null?et=at:rt.sibling=at,rt=at);return ds&&Vi(ae,dt),et}for(at=m(ae,at);dt<le.length;dt++)Gs=$e(at,ae,dt,le[dt],Re),Gs!==null&&(r&&Gs.alternate!==null&&at.delete(Gs.key===null?dt:Gs.key),ne=w(Gs,ne,dt),rt===null?et=Gs:rt.sibling=Gs,rt=Gs);return r&&at.forEach(function(ui){return i(ae,ui)}),ds&&Vi(ae,dt),et}function Ge(ae,ne,le,Re){var et=Y(le);if(typeof et!="function")throw Error(n(150));if(le=et.call(le),le==null)throw Error(n(151));for(var rt=et=null,at=ne,dt=ne=0,Gs=null,Lt=le.next();at!==null&&!Lt.done;dt++,Lt=le.next()){at.index>dt?(Gs=at,at=null):Gs=at.sibling;var ui=Ne(ae,at,Lt.value,Re);if(ui===null){at===null&&(at=Gs);break}r&&at&&ui.alternate===null&&i(ae,at),ne=w(ui,ne,dt),rt===null?et=ui:rt.sibling=ui,rt=ui,at=Gs}if(Lt.done)return c(ae,at),ds&&Vi(ae,dt),et;if(at===null){for(;!Lt.done;dt++,Lt=le.next())Lt=Ae(ae,Lt.value,Re),Lt!==null&&(ne=w(Lt,ne,dt),rt===null?et=Lt:rt.sibling=Lt,rt=Lt);return ds&&Vi(ae,dt),et}for(at=m(ae,at);!Lt.done;dt++,Lt=le.next())Lt=$e(at,ae,dt,Lt.value,Re),Lt!==null&&(r&&Lt.alternate!==null&&at.delete(Lt.key===null?dt:Lt.key),ne=w(Lt,ne,dt),rt===null?et=Lt:rt.sibling=Lt,rt=Lt);return r&&at.forEach(function(rC){return i(ae,rC)}),ds&&Vi(ae,dt),et}function Cs(ae,ne,le,Re){if(typeof le=="object"&&le!==null&&le.type===K&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case H:e:{for(var et=le.key,rt=ne;rt!==null;){if(rt.key===et){if(et=le.type,et===K){if(rt.tag===7){c(ae,rt.sibling),ne=x(rt,le.props.children),ne.return=ae,ae=ne;break e}}else if(rt.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===I&&c0(et)===rt.type){c(ae,rt.sibling),ne=x(rt,le.props),ne.ref=nc(ae,rt,le),ne.return=ae,ae=ne;break e}c(ae,rt);break}else i(ae,rt);rt=rt.sibling}le.type===K?(ne=to(le.props.children,ae.mode,Re,le.key),ne.return=ae,ae=ne):(Re=Qd(le.type,le.key,le.props,null,ae.mode,Re),Re.ref=nc(ae,ne,le),Re.return=ae,ae=Re)}return P(ae);case re:e:{for(rt=le.key;ne!==null;){if(ne.key===rt)if(ne.tag===4&&ne.stateNode.containerInfo===le.containerInfo&&ne.stateNode.implementation===le.implementation){c(ae,ne.sibling),ne=x(ne,le.children||[]),ne.return=ae,ae=ne;break e}else{c(ae,ne);break}else i(ae,ne);ne=ne.sibling}ne=uf(le,ae.mode,Re),ne.return=ae,ae=ne}return P(ae);case I:return rt=le._init,Cs(ae,ne,rt(le._payload),Re)}if(os(le))return Be(ae,ne,le,Re);if(Y(le))return Ge(ae,ne,le,Re);Cd(ae,le)}return typeof le=="string"&&le!==""||typeof le=="number"?(le=""+le,ne!==null&&ne.tag===6?(c(ae,ne.sibling),ne=x(ne,le),ne.return=ae,ae=ne):(c(ae,ne),ne=df(le,ae.mode,Re),ne.return=ae,ae=ne),P(ae)):c(ae,ne)}return Cs}var Wo=d0(!0),u0=d0(!1),Sd=ei(null),Ed=null,Vo=null,yh=null;function bh(){yh=Vo=Ed=null}function wh(r){var i=Sd.current;rs(Sd),r._currentValue=i}function jh(r,i,c){for(;r!==null;){var m=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,m!==null&&(m.childLanes|=i)):m!==null&&(m.childLanes&i)!==i&&(m.childLanes|=i),r===c)break;r=r.return}}function Go(r,i){Ed=r,yh=Vo=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&i)!==0&&(In=!0),r.firstContext=null)}function fr(r){var i=r._currentValue;if(yh!==r)if(r={context:r,memoizedValue:i,next:null},Vo===null){if(Ed===null)throw Error(n(308));Vo=r,Ed.dependencies={lanes:0,firstContext:r}}else Vo=Vo.next=r;return i}var Gi=null;function Nh(r){Gi===null?Gi=[r]:Gi.push(r)}function m0(r,i,c,m){var x=i.interleaved;return x===null?(c.next=c,Nh(i)):(c.next=x.next,x.next=c),i.interleaved=c,Sa(r,m)}function Sa(r,i){r.lanes|=i;var c=r.alternate;for(c!==null&&(c.lanes|=i),c=r,r=r.return;r!==null;)r.childLanes|=i,c=r.alternate,c!==null&&(c.childLanes|=i),c=r,r=r.return;return c.tag===3?c.stateNode:null}var ni=!1;function kh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function h0(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Ea(r,i){return{eventTime:r,lane:i,tag:0,payload:null,callback:null,next:null}}function ri(r,i,c){var m=r.updateQueue;if(m===null)return null;if(m=m.shared,(Rt&2)!==0){var x=m.pending;return x===null?i.next=i:(i.next=x.next,x.next=i),m.pending=i,Sa(r,c)}return x=m.interleaved,x===null?(i.next=i,Nh(m)):(i.next=x.next,x.next=i),m.interleaved=i,Sa(r,c)}function Td(r,i,c){if(i=i.updateQueue,i!==null&&(i=i.shared,(c&4194240)!==0)){var m=i.lanes;m&=r.pendingLanes,c|=m,i.lanes=c,Cr(r,c)}}function f0(r,i){var c=r.updateQueue,m=r.alternate;if(m!==null&&(m=m.updateQueue,c===m)){var x=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var P={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};w===null?x=w=P:w=w.next=P,c=c.next}while(c!==null);w===null?x=w=i:w=w.next=i}else x=w=i;c={baseState:m.baseState,firstBaseUpdate:x,lastBaseUpdate:w,shared:m.shared,effects:m.effects},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=i:r.next=i,c.lastBaseUpdate=i}function Ad(r,i,c,m){var x=r.updateQueue;ni=!1;var w=x.firstBaseUpdate,P=x.lastBaseUpdate,W=x.shared.pending;if(W!==null){x.shared.pending=null;var Z=W,fe=Z.next;Z.next=null,P===null?w=fe:P.next=fe,P=Z;var Ee=r.alternate;Ee!==null&&(Ee=Ee.updateQueue,W=Ee.lastBaseUpdate,W!==P&&(W===null?Ee.firstBaseUpdate=fe:W.next=fe,Ee.lastBaseUpdate=Z))}if(w!==null){var Ae=x.baseState;P=0,Ee=fe=Z=null,W=w;do{var Ne=W.lane,$e=W.eventTime;if((m&Ne)===Ne){Ee!==null&&(Ee=Ee.next={eventTime:$e,lane:0,tag:W.tag,payload:W.payload,callback:W.callback,next:null});e:{var Be=r,Ge=W;switch(Ne=i,$e=c,Ge.tag){case 1:if(Be=Ge.payload,typeof Be=="function"){Ae=Be.call($e,Ae,Ne);break e}Ae=Be;break e;case 3:Be.flags=Be.flags&-65537|128;case 0:if(Be=Ge.payload,Ne=typeof Be=="function"?Be.call($e,Ae,Ne):Be,Ne==null)break e;Ae=Q({},Ae,Ne);break e;case 2:ni=!0}}W.callback!==null&&W.lane!==0&&(r.flags|=64,Ne=x.effects,Ne===null?x.effects=[W]:Ne.push(W))}else $e={eventTime:$e,lane:Ne,tag:W.tag,payload:W.payload,callback:W.callback,next:null},Ee===null?(fe=Ee=$e,Z=Ae):Ee=Ee.next=$e,P|=Ne;if(W=W.next,W===null){if(W=x.shared.pending,W===null)break;Ne=W,W=Ne.next,Ne.next=null,x.lastBaseUpdate=Ne,x.shared.pending=null}}while(!0);if(Ee===null&&(Z=Ae),x.baseState=Z,x.firstBaseUpdate=fe,x.lastBaseUpdate=Ee,i=x.shared.interleaved,i!==null){x=i;do P|=x.lane,x=x.next;while(x!==i)}else w===null&&(x.shared.lanes=0);Xi|=P,r.lanes=P,r.memoizedState=Ae}}function p0(r,i,c){if(r=i.effects,i.effects=null,r!==null)for(i=0;i<r.length;i++){var m=r[i],x=m.callback;if(x!==null){if(m.callback=null,m=c,typeof x!="function")throw Error(n(191,x));x.call(m)}}}var rc={},ta=ei(rc),ac=ei(rc),ic=ei(rc);function Qi(r){if(r===rc)throw Error(n(174));return r}function Ch(r,i){switch(es(ic,i),es(ac,r),es(ta,rc),r=i.nodeType,r){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:st(null,"");break;default:r=r===8?i.parentNode:i,i=r.namespaceURI||null,r=r.tagName,i=st(i,r)}rs(ta),es(ta,i)}function Qo(){rs(ta),rs(ac),rs(ic)}function x0(r){Qi(ic.current);var i=Qi(ta.current),c=st(i,r.type);i!==c&&(es(ac,r),es(ta,c))}function Sh(r){ac.current===r&&(rs(ta),rs(ac))}var hs=ei(0);function Pd(r){for(var i=r;i!==null;){if(i.tag===13){var c=i.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Eh=[];function Th(){for(var r=0;r<Eh.length;r++)Eh[r]._workInProgressVersionPrimary=null;Eh.length=0}var Rd=R.ReactCurrentDispatcher,Ah=R.ReactCurrentBatchConfig,Yi=0,fs=null,Ms=null,Ws=null,Id=!1,oc=!1,lc=0,S4=0;function ln(){throw Error(n(321))}function Ph(r,i){if(i===null)return!1;for(var c=0;c<i.length&&c<r.length;c++)if(!Er(r[c],i[c]))return!1;return!0}function Rh(r,i,c,m,x,w){if(Yi=w,fs=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Rd.current=r===null||r.memoizedState===null?P4:R4,r=c(m,x),oc){w=0;do{if(oc=!1,lc=0,25<=w)throw Error(n(301));w+=1,Ws=Ms=null,i.updateQueue=null,Rd.current=I4,r=c(m,x)}while(oc)}if(Rd.current=Ld,i=Ms!==null&&Ms.next!==null,Yi=0,Ws=Ms=fs=null,Id=!1,i)throw Error(n(300));return r}function Ih(){var r=lc!==0;return lc=0,r}function sa(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ws===null?fs.memoizedState=Ws=r:Ws=Ws.next=r,Ws}function pr(){if(Ms===null){var r=fs.alternate;r=r!==null?r.memoizedState:null}else r=Ms.next;var i=Ws===null?fs.memoizedState:Ws.next;if(i!==null)Ws=i,Ms=r;else{if(r===null)throw Error(n(310));Ms=r,r={memoizedState:Ms.memoizedState,baseState:Ms.baseState,baseQueue:Ms.baseQueue,queue:Ms.queue,next:null},Ws===null?fs.memoizedState=Ws=r:Ws=Ws.next=r}return Ws}function cc(r,i){return typeof i=="function"?i(r):i}function Oh(r){var i=pr(),c=i.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=r;var m=Ms,x=m.baseQueue,w=c.pending;if(w!==null){if(x!==null){var P=x.next;x.next=w.next,w.next=P}m.baseQueue=x=w,c.pending=null}if(x!==null){w=x.next,m=m.baseState;var W=P=null,Z=null,fe=w;do{var Ee=fe.lane;if((Yi&Ee)===Ee)Z!==null&&(Z=Z.next={lane:0,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null}),m=fe.hasEagerState?fe.eagerState:r(m,fe.action);else{var Ae={lane:Ee,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null};Z===null?(W=Z=Ae,P=m):Z=Z.next=Ae,fs.lanes|=Ee,Xi|=Ee}fe=fe.next}while(fe!==null&&fe!==w);Z===null?P=m:Z.next=W,Er(m,i.memoizedState)||(In=!0),i.memoizedState=m,i.baseState=P,i.baseQueue=Z,c.lastRenderedState=m}if(r=c.interleaved,r!==null){x=r;do w=x.lane,fs.lanes|=w,Xi|=w,x=x.next;while(x!==r)}else x===null&&(c.lanes=0);return[i.memoizedState,c.dispatch]}function _h(r){var i=pr(),c=i.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=r;var m=c.dispatch,x=c.pending,w=i.memoizedState;if(x!==null){c.pending=null;var P=x=x.next;do w=r(w,P.action),P=P.next;while(P!==x);Er(w,i.memoizedState)||(In=!0),i.memoizedState=w,i.baseQueue===null&&(i.baseState=w),c.lastRenderedState=w}return[w,m]}function g0(){}function v0(r,i){var c=fs,m=pr(),x=i(),w=!Er(m.memoizedState,x);if(w&&(m.memoizedState=x,In=!0),m=m.queue,Lh(w0.bind(null,c,m,r),[r]),m.getSnapshot!==i||w||Ws!==null&&Ws.memoizedState.tag&1){if(c.flags|=2048,dc(9,b0.bind(null,c,m,x,i),void 0,null),Vs===null)throw Error(n(349));(Yi&30)!==0||y0(c,i,x)}return x}function y0(r,i,c){r.flags|=16384,r={getSnapshot:i,value:c},i=fs.updateQueue,i===null?(i={lastEffect:null,stores:null},fs.updateQueue=i,i.stores=[r]):(c=i.stores,c===null?i.stores=[r]:c.push(r))}function b0(r,i,c,m){i.value=c,i.getSnapshot=m,j0(i)&&N0(r)}function w0(r,i,c){return c(function(){j0(i)&&N0(r)})}function j0(r){var i=r.getSnapshot;r=r.value;try{var c=i();return!Er(r,c)}catch{return!0}}function N0(r){var i=Sa(r,1);i!==null&&Ir(i,r,1,-1)}function k0(r){var i=sa();return typeof r=="function"&&(r=r()),i.memoizedState=i.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cc,lastRenderedState:r},i.queue=r,r=r.dispatch=A4.bind(null,fs,r),[i.memoizedState,r]}function dc(r,i,c,m){return r={tag:r,create:i,destroy:c,deps:m,next:null},i=fs.updateQueue,i===null?(i={lastEffect:null,stores:null},fs.updateQueue=i,i.lastEffect=r.next=r):(c=i.lastEffect,c===null?i.lastEffect=r.next=r:(m=c.next,c.next=r,r.next=m,i.lastEffect=r)),r}function C0(){return pr().memoizedState}function Od(r,i,c,m){var x=sa();fs.flags|=r,x.memoizedState=dc(1|i,c,void 0,m===void 0?null:m)}function _d(r,i,c,m){var x=pr();m=m===void 0?null:m;var w=void 0;if(Ms!==null){var P=Ms.memoizedState;if(w=P.destroy,m!==null&&Ph(m,P.deps)){x.memoizedState=dc(i,c,w,m);return}}fs.flags|=r,x.memoizedState=dc(1|i,c,w,m)}function S0(r,i){return Od(8390656,8,r,i)}function Lh(r,i){return _d(2048,8,r,i)}function E0(r,i){return _d(4,2,r,i)}function T0(r,i){return _d(4,4,r,i)}function A0(r,i){if(typeof i=="function")return r=r(),i(r),function(){i(null)};if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function P0(r,i,c){return c=c!=null?c.concat([r]):null,_d(4,4,A0.bind(null,i,r),c)}function Mh(){}function R0(r,i){var c=pr();i=i===void 0?null:i;var m=c.memoizedState;return m!==null&&i!==null&&Ph(i,m[1])?m[0]:(c.memoizedState=[r,i],r)}function I0(r,i){var c=pr();i=i===void 0?null:i;var m=c.memoizedState;return m!==null&&i!==null&&Ph(i,m[1])?m[0]:(r=r(),c.memoizedState=[r,i],r)}function O0(r,i,c){return(Yi&21)===0?(r.baseState&&(r.baseState=!1,In=!0),r.memoizedState=c):(Er(c,i)||(c=Po(),fs.lanes|=c,Xi|=c,r.baseState=!0),i)}function E4(r,i){var c=ht;ht=c!==0&&4>c?c:4,r(!0);var m=Ah.transition;Ah.transition={};try{r(!1),i()}finally{ht=c,Ah.transition=m}}function _0(){return pr().memoizedState}function T4(r,i,c){var m=li(r);if(c={lane:m,action:c,hasEagerState:!1,eagerState:null,next:null},L0(r))M0(i,c);else if(c=m0(r,i,c,m),c!==null){var x=xn();Ir(c,r,m,x),D0(c,i,m)}}function A4(r,i,c){var m=li(r),x={lane:m,action:c,hasEagerState:!1,eagerState:null,next:null};if(L0(r))M0(i,x);else{var w=r.alternate;if(r.lanes===0&&(w===null||w.lanes===0)&&(w=i.lastRenderedReducer,w!==null))try{var P=i.lastRenderedState,W=w(P,c);if(x.hasEagerState=!0,x.eagerState=W,Er(W,P)){var Z=i.interleaved;Z===null?(x.next=x,Nh(i)):(x.next=Z.next,Z.next=x),i.interleaved=x;return}}catch{}c=m0(r,i,x,m),c!==null&&(x=xn(),Ir(c,r,m,x),D0(c,i,m))}}function L0(r){var i=r.alternate;return r===fs||i!==null&&i===fs}function M0(r,i){oc=Id=!0;var c=r.pending;c===null?i.next=i:(i.next=c.next,c.next=i),r.pending=i}function D0(r,i,c){if((c&4194240)!==0){var m=i.lanes;m&=r.pendingLanes,c|=m,i.lanes=c,Cr(r,c)}}var Ld={readContext:fr,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useInsertionEffect:ln,useLayoutEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useMutableSource:ln,useSyncExternalStore:ln,useId:ln,unstable_isNewReconciler:!1},P4={readContext:fr,useCallback:function(r,i){return sa().memoizedState=[r,i===void 0?null:i],r},useContext:fr,useEffect:S0,useImperativeHandle:function(r,i,c){return c=c!=null?c.concat([r]):null,Od(4194308,4,A0.bind(null,i,r),c)},useLayoutEffect:function(r,i){return Od(4194308,4,r,i)},useInsertionEffect:function(r,i){return Od(4,2,r,i)},useMemo:function(r,i){var c=sa();return i=i===void 0?null:i,r=r(),c.memoizedState=[r,i],r},useReducer:function(r,i,c){var m=sa();return i=c!==void 0?c(i):i,m.memoizedState=m.baseState=i,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:i},m.queue=r,r=r.dispatch=T4.bind(null,fs,r),[m.memoizedState,r]},useRef:function(r){var i=sa();return r={current:r},i.memoizedState=r},useState:k0,useDebugValue:Mh,useDeferredValue:function(r){return sa().memoizedState=r},useTransition:function(){var r=k0(!1),i=r[0];return r=E4.bind(null,r[1]),sa().memoizedState=r,[i,r]},useMutableSource:function(){},useSyncExternalStore:function(r,i,c){var m=fs,x=sa();if(ds){if(c===void 0)throw Error(n(407));c=c()}else{if(c=i(),Vs===null)throw Error(n(349));(Yi&30)!==0||y0(m,i,c)}x.memoizedState=c;var w={value:c,getSnapshot:i};return x.queue=w,S0(w0.bind(null,m,w,r),[r]),m.flags|=2048,dc(9,b0.bind(null,m,w,c,i),void 0,null),c},useId:function(){var r=sa(),i=Vs.identifierPrefix;if(ds){var c=Ca,m=ka;c=(m&~(1<<32-hn(m)-1)).toString(32)+c,i=":"+i+"R"+c,c=lc++,0<c&&(i+="H"+c.toString(32)),i+=":"}else c=S4++,i=":"+i+"r"+c.toString(32)+":";return r.memoizedState=i},unstable_isNewReconciler:!1},R4={readContext:fr,useCallback:R0,useContext:fr,useEffect:Lh,useImperativeHandle:P0,useInsertionEffect:E0,useLayoutEffect:T0,useMemo:I0,useReducer:Oh,useRef:C0,useState:function(){return Oh(cc)},useDebugValue:Mh,useDeferredValue:function(r){var i=pr();return O0(i,Ms.memoizedState,r)},useTransition:function(){var r=Oh(cc)[0],i=pr().memoizedState;return[r,i]},useMutableSource:g0,useSyncExternalStore:v0,useId:_0,unstable_isNewReconciler:!1},I4={readContext:fr,useCallback:R0,useContext:fr,useEffect:Lh,useImperativeHandle:P0,useInsertionEffect:E0,useLayoutEffect:T0,useMemo:I0,useReducer:_h,useRef:C0,useState:function(){return _h(cc)},useDebugValue:Mh,useDeferredValue:function(r){var i=pr();return Ms===null?i.memoizedState=r:O0(i,Ms.memoizedState,r)},useTransition:function(){var r=_h(cc)[0],i=pr().memoizedState;return[r,i]},useMutableSource:g0,useSyncExternalStore:v0,useId:_0,unstable_isNewReconciler:!1};function Ar(r,i){if(r&&r.defaultProps){i=Q({},i),r=r.defaultProps;for(var c in r)i[c]===void 0&&(i[c]=r[c]);return i}return i}function Dh(r,i,c,m){i=r.memoizedState,c=c(m,i),c=c==null?i:Q({},i,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var Md={isMounted:function(r){return(r=r._reactInternals)?Tn(r)===r:!1},enqueueSetState:function(r,i,c){r=r._reactInternals;var m=xn(),x=li(r),w=Ea(m,x);w.payload=i,c!=null&&(w.callback=c),i=ri(r,w,x),i!==null&&(Ir(i,r,x,m),Td(i,r,x))},enqueueReplaceState:function(r,i,c){r=r._reactInternals;var m=xn(),x=li(r),w=Ea(m,x);w.tag=1,w.payload=i,c!=null&&(w.callback=c),i=ri(r,w,x),i!==null&&(Ir(i,r,x,m),Td(i,r,x))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var c=xn(),m=li(r),x=Ea(c,m);x.tag=2,i!=null&&(x.callback=i),i=ri(r,x,m),i!==null&&(Ir(i,r,m,c),Td(i,r,m))}};function $0(r,i,c,m,x,w,P){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(m,w,P):i.prototype&&i.prototype.isPureReactComponent?!Yl(c,m)||!Yl(x,w):!0}function q0(r,i,c){var m=!1,x=ti,w=i.contextType;return typeof w=="object"&&w!==null?w=fr(w):(x=Rn(i)?Ki:on.current,m=i.contextTypes,w=(m=m!=null)?Uo(r,x):ti),i=new i(c,w),r.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Md,r.stateNode=i,i._reactInternals=r,m&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=x,r.__reactInternalMemoizedMaskedChildContext=w),i}function F0(r,i,c,m){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(c,m),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(c,m),i.state!==r&&Md.enqueueReplaceState(i,i.state,null)}function $h(r,i,c,m){var x=r.stateNode;x.props=c,x.state=r.memoizedState,x.refs={},kh(r);var w=i.contextType;typeof w=="object"&&w!==null?x.context=fr(w):(w=Rn(i)?Ki:on.current,x.context=Uo(r,w)),x.state=r.memoizedState,w=i.getDerivedStateFromProps,typeof w=="function"&&(Dh(r,i,w,c),x.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(i=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),i!==x.state&&Md.enqueueReplaceState(x,x.state,null),Ad(r,c,x,m),x.state=r.memoizedState),typeof x.componentDidMount=="function"&&(r.flags|=4194308)}function Yo(r,i){try{var c="",m=i;do c+=M(m),m=m.return;while(m);var x=c}catch(w){x=`
Error generating stack: `+w.message+`
`+w.stack}return{value:r,source:i,stack:x,digest:null}}function qh(r,i,c){return{value:r,source:null,stack:c??null,digest:i??null}}function Fh(r,i){try{console.error(i.value)}catch(c){setTimeout(function(){throw c})}}var O4=typeof WeakMap=="function"?WeakMap:Map;function z0(r,i,c){c=Ea(-1,c),c.tag=3,c.payload={element:null};var m=i.value;return c.callback=function(){Bd||(Bd=!0,tf=m),Fh(r,i)},c}function U0(r,i,c){c=Ea(-1,c),c.tag=3;var m=r.type.getDerivedStateFromError;if(typeof m=="function"){var x=i.value;c.payload=function(){return m(x)},c.callback=function(){Fh(r,i)}}var w=r.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(c.callback=function(){Fh(r,i),typeof m!="function"&&(ii===null?ii=new Set([this]):ii.add(this));var P=i.stack;this.componentDidCatch(i.value,{componentStack:P!==null?P:""})}),c}function B0(r,i,c){var m=r.pingCache;if(m===null){m=r.pingCache=new O4;var x=new Set;m.set(i,x)}else x=m.get(i),x===void 0&&(x=new Set,m.set(i,x));x.has(c)||(x.add(c),r=V4.bind(null,r,i,c),i.then(r,r))}function H0(r){do{var i;if((i=r.tag===13)&&(i=r.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return r;r=r.return}while(r!==null);return null}function K0(r,i,c,m,x){return(r.mode&1)===0?(r===i?r.flags|=65536:(r.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(i=Ea(-1,1),i.tag=2,ri(c,i,1))),c.lanes|=1),r):(r.flags|=65536,r.lanes=x,r)}var _4=R.ReactCurrentOwner,In=!1;function pn(r,i,c,m){i.child=r===null?u0(i,null,c,m):Wo(i,r.child,c,m)}function W0(r,i,c,m,x){c=c.render;var w=i.ref;return Go(i,x),m=Rh(r,i,c,m,w,x),c=Ih(),r!==null&&!In?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~x,Ta(r,i,x)):(ds&&c&&fh(i),i.flags|=1,pn(r,i,m,x),i.child)}function V0(r,i,c,m,x){if(r===null){var w=c.type;return typeof w=="function"&&!cf(w)&&w.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(i.tag=15,i.type=w,G0(r,i,w,m,x)):(r=Qd(c.type,null,m,i,i.mode,x),r.ref=i.ref,r.return=i,i.child=r)}if(w=r.child,(r.lanes&x)===0){var P=w.memoizedProps;if(c=c.compare,c=c!==null?c:Yl,c(P,m)&&r.ref===i.ref)return Ta(r,i,x)}return i.flags|=1,r=di(w,m),r.ref=i.ref,r.return=i,i.child=r}function G0(r,i,c,m,x){if(r!==null){var w=r.memoizedProps;if(Yl(w,m)&&r.ref===i.ref)if(In=!1,i.pendingProps=m=w,(r.lanes&x)!==0)(r.flags&131072)!==0&&(In=!0);else return i.lanes=r.lanes,Ta(r,i,x)}return zh(r,i,c,m,x)}function Q0(r,i,c){var m=i.pendingProps,x=m.children,w=r!==null?r.memoizedState:null;if(m.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},es(Zo,Yn),Yn|=c;else{if((c&1073741824)===0)return r=w!==null?w.baseLanes|c:c,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:r,cachePool:null,transitions:null},i.updateQueue=null,es(Zo,Yn),Yn|=r,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=w!==null?w.baseLanes:c,es(Zo,Yn),Yn|=m}else w!==null?(m=w.baseLanes|c,i.memoizedState=null):m=c,es(Zo,Yn),Yn|=m;return pn(r,i,x,c),i.child}function Y0(r,i){var c=i.ref;(r===null&&c!==null||r!==null&&r.ref!==c)&&(i.flags|=512,i.flags|=2097152)}function zh(r,i,c,m,x){var w=Rn(c)?Ki:on.current;return w=Uo(i,w),Go(i,x),c=Rh(r,i,c,m,w,x),m=Ih(),r!==null&&!In?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~x,Ta(r,i,x)):(ds&&m&&fh(i),i.flags|=1,pn(r,i,c,x),i.child)}function X0(r,i,c,m,x){if(Rn(c)){var w=!0;bd(i)}else w=!1;if(Go(i,x),i.stateNode===null)$d(r,i),q0(i,c,m),$h(i,c,m,x),m=!0;else if(r===null){var P=i.stateNode,W=i.memoizedProps;P.props=W;var Z=P.context,fe=c.contextType;typeof fe=="object"&&fe!==null?fe=fr(fe):(fe=Rn(c)?Ki:on.current,fe=Uo(i,fe));var Ee=c.getDerivedStateFromProps,Ae=typeof Ee=="function"||typeof P.getSnapshotBeforeUpdate=="function";Ae||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(W!==m||Z!==fe)&&F0(i,P,m,fe),ni=!1;var Ne=i.memoizedState;P.state=Ne,Ad(i,m,P,x),Z=i.memoizedState,W!==m||Ne!==Z||Pn.current||ni?(typeof Ee=="function"&&(Dh(i,c,Ee,m),Z=i.memoizedState),(W=ni||$0(i,c,W,m,Ne,Z,fe))?(Ae||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(i.flags|=4194308)):(typeof P.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=m,i.memoizedState=Z),P.props=m,P.state=Z,P.context=fe,m=W):(typeof P.componentDidMount=="function"&&(i.flags|=4194308),m=!1)}else{P=i.stateNode,h0(r,i),W=i.memoizedProps,fe=i.type===i.elementType?W:Ar(i.type,W),P.props=fe,Ae=i.pendingProps,Ne=P.context,Z=c.contextType,typeof Z=="object"&&Z!==null?Z=fr(Z):(Z=Rn(c)?Ki:on.current,Z=Uo(i,Z));var $e=c.getDerivedStateFromProps;(Ee=typeof $e=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(W!==Ae||Ne!==Z)&&F0(i,P,m,Z),ni=!1,Ne=i.memoizedState,P.state=Ne,Ad(i,m,P,x);var Be=i.memoizedState;W!==Ae||Ne!==Be||Pn.current||ni?(typeof $e=="function"&&(Dh(i,c,$e,m),Be=i.memoizedState),(fe=ni||$0(i,c,fe,m,Ne,Be,Z)||!1)?(Ee||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(m,Be,Z),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(m,Be,Z)),typeof P.componentDidUpdate=="function"&&(i.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof P.componentDidUpdate!="function"||W===r.memoizedProps&&Ne===r.memoizedState||(i.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||W===r.memoizedProps&&Ne===r.memoizedState||(i.flags|=1024),i.memoizedProps=m,i.memoizedState=Be),P.props=m,P.state=Be,P.context=Z,m=fe):(typeof P.componentDidUpdate!="function"||W===r.memoizedProps&&Ne===r.memoizedState||(i.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||W===r.memoizedProps&&Ne===r.memoizedState||(i.flags|=1024),m=!1)}return Uh(r,i,c,m,w,x)}function Uh(r,i,c,m,x,w){Y0(r,i);var P=(i.flags&128)!==0;if(!m&&!P)return x&&s0(i,c,!1),Ta(r,i,w);m=i.stateNode,_4.current=i;var W=P&&typeof c.getDerivedStateFromError!="function"?null:m.render();return i.flags|=1,r!==null&&P?(i.child=Wo(i,r.child,null,w),i.child=Wo(i,null,W,w)):pn(r,i,W,w),i.memoizedState=m.state,x&&s0(i,c,!0),i.child}function Z0(r){var i=r.stateNode;i.pendingContext?e0(r,i.pendingContext,i.pendingContext!==i.context):i.context&&e0(r,i.context,!1),Ch(r,i.containerInfo)}function J0(r,i,c,m,x){return Ko(),vh(x),i.flags|=256,pn(r,i,c,m),i.child}var Bh={dehydrated:null,treeContext:null,retryLane:0};function Hh(r){return{baseLanes:r,cachePool:null,transitions:null}}function ev(r,i,c){var m=i.pendingProps,x=hs.current,w=!1,P=(i.flags&128)!==0,W;if((W=P)||(W=r!==null&&r.memoizedState===null?!1:(x&2)!==0),W?(w=!0,i.flags&=-129):(r===null||r.memoizedState!==null)&&(x|=1),es(hs,x&1),r===null)return gh(i),r=i.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((i.mode&1)===0?i.lanes=1:r.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(P=m.children,r=m.fallback,w?(m=i.mode,w=i.child,P={mode:"hidden",children:P},(m&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=P):w=Yd(P,m,0,null),r=to(r,m,c,null),w.return=i,r.return=i,w.sibling=r,i.child=w,i.child.memoizedState=Hh(c),i.memoizedState=Bh,r):Kh(i,P));if(x=r.memoizedState,x!==null&&(W=x.dehydrated,W!==null))return L4(r,i,P,m,W,x,c);if(w){w=m.fallback,P=i.mode,x=r.child,W=x.sibling;var Z={mode:"hidden",children:m.children};return(P&1)===0&&i.child!==x?(m=i.child,m.childLanes=0,m.pendingProps=Z,i.deletions=null):(m=di(x,Z),m.subtreeFlags=x.subtreeFlags&14680064),W!==null?w=di(W,w):(w=to(w,P,c,null),w.flags|=2),w.return=i,m.return=i,m.sibling=w,i.child=m,m=w,w=i.child,P=r.child.memoizedState,P=P===null?Hh(c):{baseLanes:P.baseLanes|c,cachePool:null,transitions:P.transitions},w.memoizedState=P,w.childLanes=r.childLanes&~c,i.memoizedState=Bh,m}return w=r.child,r=w.sibling,m=di(w,{mode:"visible",children:m.children}),(i.mode&1)===0&&(m.lanes=c),m.return=i,m.sibling=null,r!==null&&(c=i.deletions,c===null?(i.deletions=[r],i.flags|=16):c.push(r)),i.child=m,i.memoizedState=null,m}function Kh(r,i){return i=Yd({mode:"visible",children:i},r.mode,0,null),i.return=r,r.child=i}function Dd(r,i,c,m){return m!==null&&vh(m),Wo(i,r.child,null,c),r=Kh(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function L4(r,i,c,m,x,w,P){if(c)return i.flags&256?(i.flags&=-257,m=qh(Error(n(422))),Dd(r,i,P,m)):i.memoizedState!==null?(i.child=r.child,i.flags|=128,null):(w=m.fallback,x=i.mode,m=Yd({mode:"visible",children:m.children},x,0,null),w=to(w,x,P,null),w.flags|=2,m.return=i,w.return=i,m.sibling=w,i.child=m,(i.mode&1)!==0&&Wo(i,r.child,null,P),i.child.memoizedState=Hh(P),i.memoizedState=Bh,w);if((i.mode&1)===0)return Dd(r,i,P,null);if(x.data==="$!"){if(m=x.nextSibling&&x.nextSibling.dataset,m)var W=m.dgst;return m=W,w=Error(n(419)),m=qh(w,m,void 0),Dd(r,i,P,m)}if(W=(P&r.childLanes)!==0,In||W){if(m=Vs,m!==null){switch(P&-P){case 4:x=2;break;case 16:x=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:x=32;break;case 536870912:x=268435456;break;default:x=0}x=(x&(m.suspendedLanes|P))!==0?0:x,x!==0&&x!==w.retryLane&&(w.retryLane=x,Sa(r,x),Ir(m,r,x,-1))}return lf(),m=qh(Error(n(421))),Dd(r,i,P,m)}return x.data==="$?"?(i.flags|=128,i.child=r.child,i=G4.bind(null,r),x._reactRetry=i,null):(r=w.treeContext,Qn=Ja(x.nextSibling),Gn=i,ds=!0,Tr=null,r!==null&&(mr[hr++]=ka,mr[hr++]=Ca,mr[hr++]=Wi,ka=r.id,Ca=r.overflow,Wi=i),i=Kh(i,m.children),i.flags|=4096,i)}function tv(r,i,c){r.lanes|=i;var m=r.alternate;m!==null&&(m.lanes|=i),jh(r.return,i,c)}function Wh(r,i,c,m,x){var w=r.memoizedState;w===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:m,tail:c,tailMode:x}:(w.isBackwards=i,w.rendering=null,w.renderingStartTime=0,w.last=m,w.tail=c,w.tailMode=x)}function sv(r,i,c){var m=i.pendingProps,x=m.revealOrder,w=m.tail;if(pn(r,i,m.children,c),m=hs.current,(m&2)!==0)m=m&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&tv(r,c,i);else if(r.tag===19)tv(r,c,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}m&=1}if(es(hs,m),(i.mode&1)===0)i.memoizedState=null;else switch(x){case"forwards":for(c=i.child,x=null;c!==null;)r=c.alternate,r!==null&&Pd(r)===null&&(x=c),c=c.sibling;c=x,c===null?(x=i.child,i.child=null):(x=c.sibling,c.sibling=null),Wh(i,!1,x,c,w);break;case"backwards":for(c=null,x=i.child,i.child=null;x!==null;){if(r=x.alternate,r!==null&&Pd(r)===null){i.child=x;break}r=x.sibling,x.sibling=c,c=x,x=r}Wh(i,!0,c,null,w);break;case"together":Wh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function $d(r,i){(i.mode&1)===0&&r!==null&&(r.alternate=null,i.alternate=null,i.flags|=2)}function Ta(r,i,c){if(r!==null&&(i.dependencies=r.dependencies),Xi|=i.lanes,(c&i.childLanes)===0)return null;if(r!==null&&i.child!==r.child)throw Error(n(153));if(i.child!==null){for(r=i.child,c=di(r,r.pendingProps),i.child=c,c.return=i;r.sibling!==null;)r=r.sibling,c=c.sibling=di(r,r.pendingProps),c.return=i;c.sibling=null}return i.child}function M4(r,i,c){switch(i.tag){case 3:Z0(i),Ko();break;case 5:x0(i);break;case 1:Rn(i.type)&&bd(i);break;case 4:Ch(i,i.stateNode.containerInfo);break;case 10:var m=i.type._context,x=i.memoizedProps.value;es(Sd,m._currentValue),m._currentValue=x;break;case 13:if(m=i.memoizedState,m!==null)return m.dehydrated!==null?(es(hs,hs.current&1),i.flags|=128,null):(c&i.child.childLanes)!==0?ev(r,i,c):(es(hs,hs.current&1),r=Ta(r,i,c),r!==null?r.sibling:null);es(hs,hs.current&1);break;case 19:if(m=(c&i.childLanes)!==0,(r.flags&128)!==0){if(m)return sv(r,i,c);i.flags|=128}if(x=i.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),es(hs,hs.current),m)break;return null;case 22:case 23:return i.lanes=0,Q0(r,i,c)}return Ta(r,i,c)}var nv,Vh,rv,av;nv=function(r,i){for(var c=i.child;c!==null;){if(c.tag===5||c.tag===6)r.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===i)break;for(;c.sibling===null;){if(c.return===null||c.return===i)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Vh=function(){},rv=function(r,i,c,m){var x=r.memoizedProps;if(x!==m){r=i.stateNode,Qi(ta.current);var w=null;switch(c){case"input":x=Je(r,x),m=Je(r,m),w=[];break;case"select":x=Q({},x,{value:void 0}),m=Q({},m,{value:void 0}),w=[];break;case"textarea":x=Et(r,x),m=Et(r,m),w=[];break;default:typeof x.onClick!="function"&&typeof m.onClick=="function"&&(r.onclick=gd)}At(c,m);var P;c=null;for(fe in x)if(!m.hasOwnProperty(fe)&&x.hasOwnProperty(fe)&&x[fe]!=null)if(fe==="style"){var W=x[fe];for(P in W)W.hasOwnProperty(P)&&(c||(c={}),c[P]="")}else fe!=="dangerouslySetInnerHTML"&&fe!=="children"&&fe!=="suppressContentEditableWarning"&&fe!=="suppressHydrationWarning"&&fe!=="autoFocus"&&(o.hasOwnProperty(fe)?w||(w=[]):(w=w||[]).push(fe,null));for(fe in m){var Z=m[fe];if(W=x?.[fe],m.hasOwnProperty(fe)&&Z!==W&&(Z!=null||W!=null))if(fe==="style")if(W){for(P in W)!W.hasOwnProperty(P)||Z&&Z.hasOwnProperty(P)||(c||(c={}),c[P]="");for(P in Z)Z.hasOwnProperty(P)&&W[P]!==Z[P]&&(c||(c={}),c[P]=Z[P])}else c||(w||(w=[]),w.push(fe,c)),c=Z;else fe==="dangerouslySetInnerHTML"?(Z=Z?Z.__html:void 0,W=W?W.__html:void 0,Z!=null&&W!==Z&&(w=w||[]).push(fe,Z)):fe==="children"?typeof Z!="string"&&typeof Z!="number"||(w=w||[]).push(fe,""+Z):fe!=="suppressContentEditableWarning"&&fe!=="suppressHydrationWarning"&&(o.hasOwnProperty(fe)?(Z!=null&&fe==="onScroll"&&ns("scroll",r),w||W===Z||(w=[])):(w=w||[]).push(fe,Z))}c&&(w=w||[]).push("style",c);var fe=w;(i.updateQueue=fe)&&(i.flags|=4)}},av=function(r,i,c,m){c!==m&&(i.flags|=4)};function uc(r,i){if(!ds)switch(r.tailMode){case"hidden":i=r.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:m.sibling=null}}function cn(r){var i=r.alternate!==null&&r.alternate.child===r.child,c=0,m=0;if(i)for(var x=r.child;x!==null;)c|=x.lanes|x.childLanes,m|=x.subtreeFlags&14680064,m|=x.flags&14680064,x.return=r,x=x.sibling;else for(x=r.child;x!==null;)c|=x.lanes|x.childLanes,m|=x.subtreeFlags,m|=x.flags,x.return=r,x=x.sibling;return r.subtreeFlags|=m,r.childLanes=c,i}function D4(r,i,c){var m=i.pendingProps;switch(ph(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cn(i),null;case 1:return Rn(i.type)&&yd(),cn(i),null;case 3:return m=i.stateNode,Qo(),rs(Pn),rs(on),Th(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(r===null||r.child===null)&&(kd(i)?i.flags|=4:r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Tr!==null&&(rf(Tr),Tr=null))),Vh(r,i),cn(i),null;case 5:Sh(i);var x=Qi(ic.current);if(c=i.type,r!==null&&i.stateNode!=null)rv(r,i,c,m,x),r.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!m){if(i.stateNode===null)throw Error(n(166));return cn(i),null}if(r=Qi(ta.current),kd(i)){m=i.stateNode,c=i.type;var w=i.memoizedProps;switch(m[ea]=i,m[tc]=w,r=(i.mode&1)!==0,c){case"dialog":ns("cancel",m),ns("close",m);break;case"iframe":case"object":case"embed":ns("load",m);break;case"video":case"audio":for(x=0;x<Zl.length;x++)ns(Zl[x],m);break;case"source":ns("error",m);break;case"img":case"image":case"link":ns("error",m),ns("load",m);break;case"details":ns("toggle",m);break;case"input":lt(m,w),ns("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!w.multiple},ns("invalid",m);break;case"textarea":_t(m,w),ns("invalid",m)}At(c,w),x=null;for(var P in w)if(w.hasOwnProperty(P)){var W=w[P];P==="children"?typeof W=="string"?m.textContent!==W&&(w.suppressHydrationWarning!==!0&&xd(m.textContent,W,r),x=["children",W]):typeof W=="number"&&m.textContent!==""+W&&(w.suppressHydrationWarning!==!0&&xd(m.textContent,W,r),x=["children",""+W]):o.hasOwnProperty(P)&&W!=null&&P==="onScroll"&&ns("scroll",m)}switch(c){case"input":Pe(m),us(m,w,!0);break;case"textarea":Pe(m),de(m);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(m.onclick=gd)}m=x,i.updateQueue=m,m!==null&&(i.flags|=4)}else{P=x.nodeType===9?x:x.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Oe(c)),r==="http://www.w3.org/1999/xhtml"?c==="script"?(r=P.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof m.is=="string"?r=P.createElement(c,{is:m.is}):(r=P.createElement(c),c==="select"&&(P=r,m.multiple?P.multiple=!0:m.size&&(P.size=m.size))):r=P.createElementNS(r,c),r[ea]=i,r[tc]=m,nv(r,i,!1,!1),i.stateNode=r;e:{switch(P=Us(c,m),c){case"dialog":ns("cancel",r),ns("close",r),x=m;break;case"iframe":case"object":case"embed":ns("load",r),x=m;break;case"video":case"audio":for(x=0;x<Zl.length;x++)ns(Zl[x],r);x=m;break;case"source":ns("error",r),x=m;break;case"img":case"image":case"link":ns("error",r),ns("load",r),x=m;break;case"details":ns("toggle",r),x=m;break;case"input":lt(r,m),x=Je(r,m),ns("invalid",r);break;case"option":x=m;break;case"select":r._wrapperState={wasMultiple:!!m.multiple},x=Q({},m,{value:void 0}),ns("invalid",r);break;case"textarea":_t(r,m),x=Et(r,m),ns("invalid",r);break;default:x=m}At(c,x),W=x;for(w in W)if(W.hasOwnProperty(w)){var Z=W[w];w==="style"?jt(r,Z):w==="dangerouslySetInnerHTML"?(Z=Z?Z.__html:void 0,Z!=null&&Zt(r,Z)):w==="children"?typeof Z=="string"?(c!=="textarea"||Z!=="")&&qt(r,Z):typeof Z=="number"&&qt(r,""+Z):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(o.hasOwnProperty(w)?Z!=null&&w==="onScroll"&&ns("scroll",r):Z!=null&&S(r,w,Z,P))}switch(c){case"input":Pe(r),us(r,m,!1);break;case"textarea":Pe(r),de(r);break;case"option":m.value!=null&&r.setAttribute("value",""+he(m.value));break;case"select":r.multiple=!!m.multiple,w=m.value,w!=null?ms(r,!!m.multiple,w,!1):m.defaultValue!=null&&ms(r,!!m.multiple,m.defaultValue,!0);break;default:typeof x.onClick=="function"&&(r.onclick=gd)}switch(c){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return cn(i),null;case 6:if(r&&i.stateNode!=null)av(r,i,r.memoizedProps,m);else{if(typeof m!="string"&&i.stateNode===null)throw Error(n(166));if(c=Qi(ic.current),Qi(ta.current),kd(i)){if(m=i.stateNode,c=i.memoizedProps,m[ea]=i,(w=m.nodeValue!==c)&&(r=Gn,r!==null))switch(r.tag){case 3:xd(m.nodeValue,c,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&xd(m.nodeValue,c,(r.mode&1)!==0)}w&&(i.flags|=4)}else m=(c.nodeType===9?c:c.ownerDocument).createTextNode(m),m[ea]=i,i.stateNode=m}return cn(i),null;case 13:if(rs(hs),m=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(ds&&Qn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)l0(),Ko(),i.flags|=98560,w=!1;else if(w=kd(i),m!==null&&m.dehydrated!==null){if(r===null){if(!w)throw Error(n(318));if(w=i.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(n(317));w[ea]=i}else Ko(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;cn(i),w=!1}else Tr!==null&&(rf(Tr),Tr=null),w=!0;if(!w)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=c,i):(m=m!==null,m!==(r!==null&&r.memoizedState!==null)&&m&&(i.child.flags|=8192,(i.mode&1)!==0&&(r===null||(hs.current&1)!==0?Ds===0&&(Ds=3):lf())),i.updateQueue!==null&&(i.flags|=4),cn(i),null);case 4:return Qo(),Vh(r,i),r===null&&Jl(i.stateNode.containerInfo),cn(i),null;case 10:return wh(i.type._context),cn(i),null;case 17:return Rn(i.type)&&yd(),cn(i),null;case 19:if(rs(hs),w=i.memoizedState,w===null)return cn(i),null;if(m=(i.flags&128)!==0,P=w.rendering,P===null)if(m)uc(w,!1);else{if(Ds!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(P=Pd(r),P!==null){for(i.flags|=128,uc(w,!1),m=P.updateQueue,m!==null&&(i.updateQueue=m,i.flags|=4),i.subtreeFlags=0,m=c,c=i.child;c!==null;)w=c,r=m,w.flags&=14680066,P=w.alternate,P===null?(w.childLanes=0,w.lanes=r,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=P.childLanes,w.lanes=P.lanes,w.child=P.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=P.memoizedProps,w.memoizedState=P.memoizedState,w.updateQueue=P.updateQueue,w.type=P.type,r=P.dependencies,w.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),c=c.sibling;return es(hs,hs.current&1|2),i.child}r=r.sibling}w.tail!==null&&ut()>Jo&&(i.flags|=128,m=!0,uc(w,!1),i.lanes=4194304)}else{if(!m)if(r=Pd(P),r!==null){if(i.flags|=128,m=!0,c=r.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),uc(w,!0),w.tail===null&&w.tailMode==="hidden"&&!P.alternate&&!ds)return cn(i),null}else 2*ut()-w.renderingStartTime>Jo&&c!==1073741824&&(i.flags|=128,m=!0,uc(w,!1),i.lanes=4194304);w.isBackwards?(P.sibling=i.child,i.child=P):(c=w.last,c!==null?c.sibling=P:i.child=P,w.last=P)}return w.tail!==null?(i=w.tail,w.rendering=i,w.tail=i.sibling,w.renderingStartTime=ut(),i.sibling=null,c=hs.current,es(hs,m?c&1|2:c&1),i):(cn(i),null);case 22:case 23:return of(),m=i.memoizedState!==null,r!==null&&r.memoizedState!==null!==m&&(i.flags|=8192),m&&(i.mode&1)!==0?(Yn&1073741824)!==0&&(cn(i),i.subtreeFlags&6&&(i.flags|=8192)):cn(i),null;case 24:return null;case 25:return null}throw Error(n(156,i.tag))}function $4(r,i){switch(ph(i),i.tag){case 1:return Rn(i.type)&&yd(),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Qo(),rs(Pn),rs(on),Th(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 5:return Sh(i),null;case 13:if(rs(hs),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(n(340));Ko()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return rs(hs),null;case 4:return Qo(),null;case 10:return wh(i.type._context),null;case 22:case 23:return of(),null;case 24:return null;default:return null}}var qd=!1,dn=!1,q4=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function Xo(r,i){var c=r.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(m){ys(r,i,m)}else c.current=null}function Gh(r,i,c){try{c()}catch(m){ys(r,i,m)}}var iv=!1;function F4(r,i){if(ih=_,r=$g(),Zm(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else e:{c=(c=r.ownerDocument)&&c.defaultView||window;var m=c.getSelection&&c.getSelection();if(m&&m.rangeCount!==0){c=m.anchorNode;var x=m.anchorOffset,w=m.focusNode;m=m.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break e}var P=0,W=-1,Z=-1,fe=0,Ee=0,Ae=r,Ne=null;t:for(;;){for(var $e;Ae!==c||x!==0&&Ae.nodeType!==3||(W=P+x),Ae!==w||m!==0&&Ae.nodeType!==3||(Z=P+m),Ae.nodeType===3&&(P+=Ae.nodeValue.length),($e=Ae.firstChild)!==null;)Ne=Ae,Ae=$e;for(;;){if(Ae===r)break t;if(Ne===c&&++fe===x&&(W=P),Ne===w&&++Ee===m&&(Z=P),($e=Ae.nextSibling)!==null)break;Ae=Ne,Ne=Ae.parentNode}Ae=$e}c=W===-1||Z===-1?null:{start:W,end:Z}}else c=null}c=c||{start:0,end:0}}else c=null;for(oh={focusedElem:r,selectionRange:c},_=!1,Ue=i;Ue!==null;)if(i=Ue,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,Ue=r;else for(;Ue!==null;){i=Ue;try{var Be=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(Be!==null){var Ge=Be.memoizedProps,Cs=Be.memoizedState,ae=i.stateNode,ne=ae.getSnapshotBeforeUpdate(i.elementType===i.type?Ge:Ar(i.type,Ge),Cs);ae.__reactInternalSnapshotBeforeUpdate=ne}break;case 3:var le=i.stateNode.containerInfo;le.nodeType===1?le.textContent="":le.nodeType===9&&le.documentElement&&le.removeChild(le.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Re){ys(i,i.return,Re)}if(r=i.sibling,r!==null){r.return=i.return,Ue=r;break}Ue=i.return}return Be=iv,iv=!1,Be}function mc(r,i,c){var m=i.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var x=m=m.next;do{if((x.tag&r)===r){var w=x.destroy;x.destroy=void 0,w!==void 0&&Gh(i,c,w)}x=x.next}while(x!==m)}}function Fd(r,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var c=i=i.next;do{if((c.tag&r)===r){var m=c.create;c.destroy=m()}c=c.next}while(c!==i)}}function Qh(r){var i=r.ref;if(i!==null){var c=r.stateNode;r.tag,r=c,typeof i=="function"?i(r):i.current=r}}function ov(r){var i=r.alternate;i!==null&&(r.alternate=null,ov(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&(delete i[ea],delete i[tc],delete i[uh],delete i[j4],delete i[N4])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function lv(r){return r.tag===5||r.tag===3||r.tag===4}function cv(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||lv(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Yh(r,i,c){var m=r.tag;if(m===5||m===6)r=r.stateNode,i?c.nodeType===8?c.parentNode.insertBefore(r,i):c.insertBefore(r,i):(c.nodeType===8?(i=c.parentNode,i.insertBefore(r,c)):(i=c,i.appendChild(r)),c=c._reactRootContainer,c!=null||i.onclick!==null||(i.onclick=gd));else if(m!==4&&(r=r.child,r!==null))for(Yh(r,i,c),r=r.sibling;r!==null;)Yh(r,i,c),r=r.sibling}function Xh(r,i,c){var m=r.tag;if(m===5||m===6)r=r.stateNode,i?c.insertBefore(r,i):c.appendChild(r);else if(m!==4&&(r=r.child,r!==null))for(Xh(r,i,c),r=r.sibling;r!==null;)Xh(r,i,c),r=r.sibling}var Js=null,Pr=!1;function ai(r,i,c){for(c=c.child;c!==null;)dv(r,i,c),c=c.sibling}function dv(r,i,c){if(Xs&&typeof Xs.onCommitFiberUnmount=="function")try{Xs.onCommitFiberUnmount(Hn,c)}catch{}switch(c.tag){case 5:dn||Xo(c,i);case 6:var m=Js,x=Pr;Js=null,ai(r,i,c),Js=m,Pr=x,Js!==null&&(Pr?(r=Js,c=c.stateNode,r.nodeType===8?r.parentNode.removeChild(c):r.removeChild(c)):Js.removeChild(c.stateNode));break;case 18:Js!==null&&(Pr?(r=Js,c=c.stateNode,r.nodeType===8?dh(r.parentNode,c):r.nodeType===1&&dh(r,c),wa(r)):dh(Js,c.stateNode));break;case 4:m=Js,x=Pr,Js=c.stateNode.containerInfo,Pr=!0,ai(r,i,c),Js=m,Pr=x;break;case 0:case 11:case 14:case 15:if(!dn&&(m=c.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){x=m=m.next;do{var w=x,P=w.destroy;w=w.tag,P!==void 0&&((w&2)!==0||(w&4)!==0)&&Gh(c,i,P),x=x.next}while(x!==m)}ai(r,i,c);break;case 1:if(!dn&&(Xo(c,i),m=c.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=c.memoizedProps,m.state=c.memoizedState,m.componentWillUnmount()}catch(W){ys(c,i,W)}ai(r,i,c);break;case 21:ai(r,i,c);break;case 22:c.mode&1?(dn=(m=dn)||c.memoizedState!==null,ai(r,i,c),dn=m):ai(r,i,c);break;default:ai(r,i,c)}}function uv(r){var i=r.updateQueue;if(i!==null){r.updateQueue=null;var c=r.stateNode;c===null&&(c=r.stateNode=new q4),i.forEach(function(m){var x=Q4.bind(null,r,m);c.has(m)||(c.add(m),m.then(x,x))})}}function Rr(r,i){var c=i.deletions;if(c!==null)for(var m=0;m<c.length;m++){var x=c[m];try{var w=r,P=i,W=P;e:for(;W!==null;){switch(W.tag){case 5:Js=W.stateNode,Pr=!1;break e;case 3:Js=W.stateNode.containerInfo,Pr=!0;break e;case 4:Js=W.stateNode.containerInfo,Pr=!0;break e}W=W.return}if(Js===null)throw Error(n(160));dv(w,P,x),Js=null,Pr=!1;var Z=x.alternate;Z!==null&&(Z.return=null),x.return=null}catch(fe){ys(x,i,fe)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)mv(i,r),i=i.sibling}function mv(r,i){var c=r.alternate,m=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Rr(i,r),na(r),m&4){try{mc(3,r,r.return),Fd(3,r)}catch(Ge){ys(r,r.return,Ge)}try{mc(5,r,r.return)}catch(Ge){ys(r,r.return,Ge)}}break;case 1:Rr(i,r),na(r),m&512&&c!==null&&Xo(c,c.return);break;case 5:if(Rr(i,r),na(r),m&512&&c!==null&&Xo(c,c.return),r.flags&32){var x=r.stateNode;try{qt(x,"")}catch(Ge){ys(r,r.return,Ge)}}if(m&4&&(x=r.stateNode,x!=null)){var w=r.memoizedProps,P=c!==null?c.memoizedProps:w,W=r.type,Z=r.updateQueue;if(r.updateQueue=null,Z!==null)try{W==="input"&&w.type==="radio"&&w.name!=null&&Bt(x,w),Us(W,P);var fe=Us(W,w);for(P=0;P<Z.length;P+=2){var Ee=Z[P],Ae=Z[P+1];Ee==="style"?jt(x,Ae):Ee==="dangerouslySetInnerHTML"?Zt(x,Ae):Ee==="children"?qt(x,Ae):S(x,Ee,Ae,fe)}switch(W){case"input":Xt(x,w);break;case"textarea":wt(x,w);break;case"select":var Ne=x._wrapperState.wasMultiple;x._wrapperState.wasMultiple=!!w.multiple;var $e=w.value;$e!=null?ms(x,!!w.multiple,$e,!1):Ne!==!!w.multiple&&(w.defaultValue!=null?ms(x,!!w.multiple,w.defaultValue,!0):ms(x,!!w.multiple,w.multiple?[]:"",!1))}x[tc]=w}catch(Ge){ys(r,r.return,Ge)}}break;case 6:if(Rr(i,r),na(r),m&4){if(r.stateNode===null)throw Error(n(162));x=r.stateNode,w=r.memoizedProps;try{x.nodeValue=w}catch(Ge){ys(r,r.return,Ge)}}break;case 3:if(Rr(i,r),na(r),m&4&&c!==null&&c.memoizedState.isDehydrated)try{wa(i.containerInfo)}catch(Ge){ys(r,r.return,Ge)}break;case 4:Rr(i,r),na(r);break;case 13:Rr(i,r),na(r),x=r.child,x.flags&8192&&(w=x.memoizedState!==null,x.stateNode.isHidden=w,!w||x.alternate!==null&&x.alternate.memoizedState!==null||(ef=ut())),m&4&&uv(r);break;case 22:if(Ee=c!==null&&c.memoizedState!==null,r.mode&1?(dn=(fe=dn)||Ee,Rr(i,r),dn=fe):Rr(i,r),na(r),m&8192){if(fe=r.memoizedState!==null,(r.stateNode.isHidden=fe)&&!Ee&&(r.mode&1)!==0)for(Ue=r,Ee=r.child;Ee!==null;){for(Ae=Ue=Ee;Ue!==null;){switch(Ne=Ue,$e=Ne.child,Ne.tag){case 0:case 11:case 14:case 15:mc(4,Ne,Ne.return);break;case 1:Xo(Ne,Ne.return);var Be=Ne.stateNode;if(typeof Be.componentWillUnmount=="function"){m=Ne,c=Ne.return;try{i=m,Be.props=i.memoizedProps,Be.state=i.memoizedState,Be.componentWillUnmount()}catch(Ge){ys(m,c,Ge)}}break;case 5:Xo(Ne,Ne.return);break;case 22:if(Ne.memoizedState!==null){pv(Ae);continue}}$e!==null?($e.return=Ne,Ue=$e):pv(Ae)}Ee=Ee.sibling}e:for(Ee=null,Ae=r;;){if(Ae.tag===5){if(Ee===null){Ee=Ae;try{x=Ae.stateNode,fe?(w=x.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(W=Ae.stateNode,Z=Ae.memoizedProps.style,P=Z!=null&&Z.hasOwnProperty("display")?Z.display:null,W.style.display=Ke("display",P))}catch(Ge){ys(r,r.return,Ge)}}}else if(Ae.tag===6){if(Ee===null)try{Ae.stateNode.nodeValue=fe?"":Ae.memoizedProps}catch(Ge){ys(r,r.return,Ge)}}else if((Ae.tag!==22&&Ae.tag!==23||Ae.memoizedState===null||Ae===r)&&Ae.child!==null){Ae.child.return=Ae,Ae=Ae.child;continue}if(Ae===r)break e;for(;Ae.sibling===null;){if(Ae.return===null||Ae.return===r)break e;Ee===Ae&&(Ee=null),Ae=Ae.return}Ee===Ae&&(Ee=null),Ae.sibling.return=Ae.return,Ae=Ae.sibling}}break;case 19:Rr(i,r),na(r),m&4&&uv(r);break;case 21:break;default:Rr(i,r),na(r)}}function na(r){var i=r.flags;if(i&2){try{e:{for(var c=r.return;c!==null;){if(lv(c)){var m=c;break e}c=c.return}throw Error(n(160))}switch(m.tag){case 5:var x=m.stateNode;m.flags&32&&(qt(x,""),m.flags&=-33);var w=cv(r);Xh(r,w,x);break;case 3:case 4:var P=m.stateNode.containerInfo,W=cv(r);Yh(r,W,P);break;default:throw Error(n(161))}}catch(Z){ys(r,r.return,Z)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function z4(r,i,c){Ue=r,hv(r)}function hv(r,i,c){for(var m=(r.mode&1)!==0;Ue!==null;){var x=Ue,w=x.child;if(x.tag===22&&m){var P=x.memoizedState!==null||qd;if(!P){var W=x.alternate,Z=W!==null&&W.memoizedState!==null||dn;W=qd;var fe=dn;if(qd=P,(dn=Z)&&!fe)for(Ue=x;Ue!==null;)P=Ue,Z=P.child,P.tag===22&&P.memoizedState!==null?xv(x):Z!==null?(Z.return=P,Ue=Z):xv(x);for(;w!==null;)Ue=w,hv(w),w=w.sibling;Ue=x,qd=W,dn=fe}fv(r)}else(x.subtreeFlags&8772)!==0&&w!==null?(w.return=x,Ue=w):fv(r)}}function fv(r){for(;Ue!==null;){var i=Ue;if((i.flags&8772)!==0){var c=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:dn||Fd(5,i);break;case 1:var m=i.stateNode;if(i.flags&4&&!dn)if(c===null)m.componentDidMount();else{var x=i.elementType===i.type?c.memoizedProps:Ar(i.type,c.memoizedProps);m.componentDidUpdate(x,c.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var w=i.updateQueue;w!==null&&p0(i,w,m);break;case 3:var P=i.updateQueue;if(P!==null){if(c=null,i.child!==null)switch(i.child.tag){case 5:c=i.child.stateNode;break;case 1:c=i.child.stateNode}p0(i,P,c)}break;case 5:var W=i.stateNode;if(c===null&&i.flags&4){c=W;var Z=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":Z.autoFocus&&c.focus();break;case"img":Z.src&&(c.src=Z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var fe=i.alternate;if(fe!==null){var Ee=fe.memoizedState;if(Ee!==null){var Ae=Ee.dehydrated;Ae!==null&&wa(Ae)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}dn||i.flags&512&&Qh(i)}catch(Ne){ys(i,i.return,Ne)}}if(i===r){Ue=null;break}if(c=i.sibling,c!==null){c.return=i.return,Ue=c;break}Ue=i.return}}function pv(r){for(;Ue!==null;){var i=Ue;if(i===r){Ue=null;break}var c=i.sibling;if(c!==null){c.return=i.return,Ue=c;break}Ue=i.return}}function xv(r){for(;Ue!==null;){var i=Ue;try{switch(i.tag){case 0:case 11:case 15:var c=i.return;try{Fd(4,i)}catch(Z){ys(i,c,Z)}break;case 1:var m=i.stateNode;if(typeof m.componentDidMount=="function"){var x=i.return;try{m.componentDidMount()}catch(Z){ys(i,x,Z)}}var w=i.return;try{Qh(i)}catch(Z){ys(i,w,Z)}break;case 5:var P=i.return;try{Qh(i)}catch(Z){ys(i,P,Z)}}}catch(Z){ys(i,i.return,Z)}if(i===r){Ue=null;break}var W=i.sibling;if(W!==null){W.return=i.return,Ue=W;break}Ue=i.return}}var U4=Math.ceil,zd=R.ReactCurrentDispatcher,Zh=R.ReactCurrentOwner,xr=R.ReactCurrentBatchConfig,Rt=0,Vs=null,As=null,en=0,Yn=0,Zo=ei(0),Ds=0,hc=null,Xi=0,Ud=0,Jh=0,fc=null,On=null,ef=0,Jo=1/0,Aa=null,Bd=!1,tf=null,ii=null,Hd=!1,oi=null,Kd=0,pc=0,sf=null,Wd=-1,Vd=0;function xn(){return(Rt&6)!==0?ut():Wd!==-1?Wd:Wd=ut()}function li(r){return(r.mode&1)===0?1:(Rt&2)!==0&&en!==0?en&-en:C4.transition!==null?(Vd===0&&(Vd=Po()),Vd):(r=ht,r!==0||(r=window.event,r=r===void 0?16:kt(r.type)),r)}function Ir(r,i,c,m){if(50<pc)throw pc=0,sf=null,Error(n(185));ya(r,c,m),((Rt&2)===0||r!==Vs)&&(r===Vs&&((Rt&2)===0&&(Ud|=c),Ds===4&&ci(r,en)),_n(r,m),c===1&&Rt===0&&(i.mode&1)===0&&(Jo=ut()+500,wd&&si()))}function _n(r,i){var c=r.callbackNode;Hl(r,i);var m=ga(r,r===Vs?en:0);if(m===0)c!==null&&we(c),r.callbackNode=null,r.callbackPriority=0;else if(i=m&-m,r.callbackPriority!==i){if(c!=null&&we(c),i===1)r.tag===0?k4(vv.bind(null,r)):n0(vv.bind(null,r)),b4(function(){(Rt&6)===0&&si()}),c=null;else{switch(cr(m)){case 1:c=gs;break;case 4:c=Ls;break;case 16:c=rn;break;case 536870912:c=Ft;break;default:c=rn}c=Sv(c,gv.bind(null,r))}r.callbackPriority=i,r.callbackNode=c}}function gv(r,i){if(Wd=-1,Vd=0,(Rt&6)!==0)throw Error(n(327));var c=r.callbackNode;if(el()&&r.callbackNode!==c)return null;var m=ga(r,r===Vs?en:0);if(m===0)return null;if((m&30)!==0||(m&r.expiredLanes)!==0||i)i=Gd(r,m);else{i=m;var x=Rt;Rt|=2;var w=bv();(Vs!==r||en!==i)&&(Aa=null,Jo=ut()+500,Ji(r,i));do try{K4();break}catch(W){yv(r,W)}while(!0);bh(),zd.current=w,Rt=x,As!==null?i=0:(Vs=null,en=0,i=Ds)}if(i!==0){if(i===2&&(x=Di(r),x!==0&&(m=x,i=nf(r,x))),i===1)throw c=hc,Ji(r,0),ci(r,m),_n(r,ut()),c;if(i===6)ci(r,m);else{if(x=r.current.alternate,(m&30)===0&&!B4(x)&&(i=Gd(r,m),i===2&&(w=Di(r),w!==0&&(m=w,i=nf(r,w))),i===1))throw c=hc,Ji(r,0),ci(r,m),_n(r,ut()),c;switch(r.finishedWork=x,r.finishedLanes=m,i){case 0:case 1:throw Error(n(345));case 2:eo(r,On,Aa);break;case 3:if(ci(r,m),(m&130023424)===m&&(i=ef+500-ut(),10<i)){if(ga(r,0)!==0)break;if(x=r.suspendedLanes,(x&m)!==m){xn(),r.pingedLanes|=r.suspendedLanes&x;break}r.timeoutHandle=ch(eo.bind(null,r,On,Aa),i);break}eo(r,On,Aa);break;case 4:if(ci(r,m),(m&4194240)===m)break;for(i=r.eventTimes,x=-1;0<m;){var P=31-hn(m);w=1<<P,P=i[P],P>x&&(x=P),m&=~w}if(m=x,m=ut()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*U4(m/1960))-m,10<m){r.timeoutHandle=ch(eo.bind(null,r,On,Aa),m);break}eo(r,On,Aa);break;case 5:eo(r,On,Aa);break;default:throw Error(n(329))}}}return _n(r,ut()),r.callbackNode===c?gv.bind(null,r):null}function nf(r,i){var c=fc;return r.current.memoizedState.isDehydrated&&(Ji(r,i).flags|=256),r=Gd(r,i),r!==2&&(i=On,On=c,i!==null&&rf(i)),r}function rf(r){On===null?On=r:On.push.apply(On,r)}function B4(r){for(var i=r;;){if(i.flags&16384){var c=i.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var m=0;m<c.length;m++){var x=c[m],w=x.getSnapshot;x=x.value;try{if(!Er(w(),x))return!1}catch{return!1}}}if(c=i.child,i.subtreeFlags&16384&&c!==null)c.return=i,i=c;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ci(r,i){for(i&=~Jh,i&=~Ud,r.suspendedLanes|=i,r.pingedLanes&=~i,r=r.expirationTimes;0<i;){var c=31-hn(i),m=1<<c;r[c]=-1,i&=~m}}function vv(r){if((Rt&6)!==0)throw Error(n(327));el();var i=ga(r,0);if((i&1)===0)return _n(r,ut()),null;var c=Gd(r,i);if(r.tag!==0&&c===2){var m=Di(r);m!==0&&(i=m,c=nf(r,m))}if(c===1)throw c=hc,Ji(r,0),ci(r,i),_n(r,ut()),c;if(c===6)throw Error(n(345));return r.finishedWork=r.current.alternate,r.finishedLanes=i,eo(r,On,Aa),_n(r,ut()),null}function af(r,i){var c=Rt;Rt|=1;try{return r(i)}finally{Rt=c,Rt===0&&(Jo=ut()+500,wd&&si())}}function Zi(r){oi!==null&&oi.tag===0&&(Rt&6)===0&&el();var i=Rt;Rt|=1;var c=xr.transition,m=ht;try{if(xr.transition=null,ht=1,r)return r()}finally{ht=m,xr.transition=c,Rt=i,(Rt&6)===0&&si()}}function of(){Yn=Zo.current,rs(Zo)}function Ji(r,i){r.finishedWork=null,r.finishedLanes=0;var c=r.timeoutHandle;if(c!==-1&&(r.timeoutHandle=-1,y4(c)),As!==null)for(c=As.return;c!==null;){var m=c;switch(ph(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&yd();break;case 3:Qo(),rs(Pn),rs(on),Th();break;case 5:Sh(m);break;case 4:Qo();break;case 13:rs(hs);break;case 19:rs(hs);break;case 10:wh(m.type._context);break;case 22:case 23:of()}c=c.return}if(Vs=r,As=r=di(r.current,null),en=Yn=i,Ds=0,hc=null,Jh=Ud=Xi=0,On=fc=null,Gi!==null){for(i=0;i<Gi.length;i++)if(c=Gi[i],m=c.interleaved,m!==null){c.interleaved=null;var x=m.next,w=c.pending;if(w!==null){var P=w.next;w.next=x,m.next=P}c.pending=m}Gi=null}return r}function yv(r,i){do{var c=As;try{if(bh(),Rd.current=Ld,Id){for(var m=fs.memoizedState;m!==null;){var x=m.queue;x!==null&&(x.pending=null),m=m.next}Id=!1}if(Yi=0,Ws=Ms=fs=null,oc=!1,lc=0,Zh.current=null,c===null||c.return===null){Ds=1,hc=i,As=null;break}e:{var w=r,P=c.return,W=c,Z=i;if(i=en,W.flags|=32768,Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var fe=Z,Ee=W,Ae=Ee.tag;if((Ee.mode&1)===0&&(Ae===0||Ae===11||Ae===15)){var Ne=Ee.alternate;Ne?(Ee.updateQueue=Ne.updateQueue,Ee.memoizedState=Ne.memoizedState,Ee.lanes=Ne.lanes):(Ee.updateQueue=null,Ee.memoizedState=null)}var $e=H0(P);if($e!==null){$e.flags&=-257,K0($e,P,W,w,i),$e.mode&1&&B0(w,fe,i),i=$e,Z=fe;var Be=i.updateQueue;if(Be===null){var Ge=new Set;Ge.add(Z),i.updateQueue=Ge}else Be.add(Z);break e}else{if((i&1)===0){B0(w,fe,i),lf();break e}Z=Error(n(426))}}else if(ds&&W.mode&1){var Cs=H0(P);if(Cs!==null){(Cs.flags&65536)===0&&(Cs.flags|=256),K0(Cs,P,W,w,i),vh(Yo(Z,W));break e}}w=Z=Yo(Z,W),Ds!==4&&(Ds=2),fc===null?fc=[w]:fc.push(w),w=P;do{switch(w.tag){case 3:w.flags|=65536,i&=-i,w.lanes|=i;var ae=z0(w,Z,i);f0(w,ae);break e;case 1:W=Z;var ne=w.type,le=w.stateNode;if((w.flags&128)===0&&(typeof ne.getDerivedStateFromError=="function"||le!==null&&typeof le.componentDidCatch=="function"&&(ii===null||!ii.has(le)))){w.flags|=65536,i&=-i,w.lanes|=i;var Re=U0(w,W,i);f0(w,Re);break e}}w=w.return}while(w!==null)}jv(c)}catch(et){i=et,As===c&&c!==null&&(As=c=c.return);continue}break}while(!0)}function bv(){var r=zd.current;return zd.current=Ld,r===null?Ld:r}function lf(){(Ds===0||Ds===3||Ds===2)&&(Ds=4),Vs===null||(Xi&268435455)===0&&(Ud&268435455)===0||ci(Vs,en)}function Gd(r,i){var c=Rt;Rt|=2;var m=bv();(Vs!==r||en!==i)&&(Aa=null,Ji(r,i));do try{H4();break}catch(x){yv(r,x)}while(!0);if(bh(),Rt=c,zd.current=m,As!==null)throw Error(n(261));return Vs=null,en=0,Ds}function H4(){for(;As!==null;)wv(As)}function K4(){for(;As!==null&&!ze();)wv(As)}function wv(r){var i=Cv(r.alternate,r,Yn);r.memoizedProps=r.pendingProps,i===null?jv(r):As=i,Zh.current=null}function jv(r){var i=r;do{var c=i.alternate;if(r=i.return,(i.flags&32768)===0){if(c=D4(c,i,Yn),c!==null){As=c;return}}else{if(c=$4(c,i),c!==null){c.flags&=32767,As=c;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Ds=6,As=null;return}}if(i=i.sibling,i!==null){As=i;return}As=i=r}while(i!==null);Ds===0&&(Ds=5)}function eo(r,i,c){var m=ht,x=xr.transition;try{xr.transition=null,ht=1,W4(r,i,c,m)}finally{xr.transition=x,ht=m}return null}function W4(r,i,c,m){do el();while(oi!==null);if((Rt&6)!==0)throw Error(n(327));c=r.finishedWork;var x=r.finishedLanes;if(c===null)return null;if(r.finishedWork=null,r.finishedLanes=0,c===r.current)throw Error(n(177));r.callbackNode=null,r.callbackPriority=0;var w=c.lanes|c.childLanes;if(Kl(r,w),r===Vs&&(As=Vs=null,en=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Hd||(Hd=!0,Sv(rn,function(){return el(),null})),w=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||w){w=xr.transition,xr.transition=null;var P=ht;ht=1;var W=Rt;Rt|=4,Zh.current=null,F4(r,c),mv(c,r),m4(oh),_=!!ih,oh=ih=null,r.current=c,z4(c),Ut(),Rt=W,ht=P,xr.transition=w}else r.current=c;if(Hd&&(Hd=!1,oi=r,Kd=x),w=r.pendingLanes,w===0&&(ii=null),Fl(c.stateNode),_n(r,ut()),i!==null)for(m=r.onRecoverableError,c=0;c<i.length;c++)x=i[c],m(x.value,{componentStack:x.stack,digest:x.digest});if(Bd)throw Bd=!1,r=tf,tf=null,r;return(Kd&1)!==0&&r.tag!==0&&el(),w=r.pendingLanes,(w&1)!==0?r===sf?pc++:(pc=0,sf=r):pc=0,si(),null}function el(){if(oi!==null){var r=cr(Kd),i=xr.transition,c=ht;try{if(xr.transition=null,ht=16>r?16:r,oi===null)var m=!1;else{if(r=oi,oi=null,Kd=0,(Rt&6)!==0)throw Error(n(331));var x=Rt;for(Rt|=4,Ue=r.current;Ue!==null;){var w=Ue,P=w.child;if((Ue.flags&16)!==0){var W=w.deletions;if(W!==null){for(var Z=0;Z<W.length;Z++){var fe=W[Z];for(Ue=fe;Ue!==null;){var Ee=Ue;switch(Ee.tag){case 0:case 11:case 15:mc(8,Ee,w)}var Ae=Ee.child;if(Ae!==null)Ae.return=Ee,Ue=Ae;else for(;Ue!==null;){Ee=Ue;var Ne=Ee.sibling,$e=Ee.return;if(ov(Ee),Ee===fe){Ue=null;break}if(Ne!==null){Ne.return=$e,Ue=Ne;break}Ue=$e}}}var Be=w.alternate;if(Be!==null){var Ge=Be.child;if(Ge!==null){Be.child=null;do{var Cs=Ge.sibling;Ge.sibling=null,Ge=Cs}while(Ge!==null)}}Ue=w}}if((w.subtreeFlags&2064)!==0&&P!==null)P.return=w,Ue=P;else e:for(;Ue!==null;){if(w=Ue,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:mc(9,w,w.return)}var ae=w.sibling;if(ae!==null){ae.return=w.return,Ue=ae;break e}Ue=w.return}}var ne=r.current;for(Ue=ne;Ue!==null;){P=Ue;var le=P.child;if((P.subtreeFlags&2064)!==0&&le!==null)le.return=P,Ue=le;else e:for(P=ne;Ue!==null;){if(W=Ue,(W.flags&2048)!==0)try{switch(W.tag){case 0:case 11:case 15:Fd(9,W)}}catch(et){ys(W,W.return,et)}if(W===P){Ue=null;break e}var Re=W.sibling;if(Re!==null){Re.return=W.return,Ue=Re;break e}Ue=W.return}}if(Rt=x,si(),Xs&&typeof Xs.onPostCommitFiberRoot=="function")try{Xs.onPostCommitFiberRoot(Hn,r)}catch{}m=!0}return m}finally{ht=c,xr.transition=i}}return!1}function Nv(r,i,c){i=Yo(c,i),i=z0(r,i,1),r=ri(r,i,1),i=xn(),r!==null&&(ya(r,1,i),_n(r,i))}function ys(r,i,c){if(r.tag===3)Nv(r,r,c);else for(;i!==null;){if(i.tag===3){Nv(i,r,c);break}else if(i.tag===1){var m=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(ii===null||!ii.has(m))){r=Yo(c,r),r=U0(i,r,1),i=ri(i,r,1),r=xn(),i!==null&&(ya(i,1,r),_n(i,r));break}}i=i.return}}function V4(r,i,c){var m=r.pingCache;m!==null&&m.delete(i),i=xn(),r.pingedLanes|=r.suspendedLanes&c,Vs===r&&(en&c)===c&&(Ds===4||Ds===3&&(en&130023424)===en&&500>ut()-ef?Ji(r,0):Jh|=c),_n(r,i)}function kv(r,i){i===0&&((r.mode&1)===0?i=1:(i=lr,lr<<=1,(lr&130023424)===0&&(lr=4194304)));var c=xn();r=Sa(r,i),r!==null&&(ya(r,i,c),_n(r,c))}function G4(r){var i=r.memoizedState,c=0;i!==null&&(c=i.retryLane),kv(r,c)}function Q4(r,i){var c=0;switch(r.tag){case 13:var m=r.stateNode,x=r.memoizedState;x!==null&&(c=x.retryLane);break;case 19:m=r.stateNode;break;default:throw Error(n(314))}m!==null&&m.delete(i),kv(r,c)}var Cv;Cv=function(r,i,c){if(r!==null)if(r.memoizedProps!==i.pendingProps||Pn.current)In=!0;else{if((r.lanes&c)===0&&(i.flags&128)===0)return In=!1,M4(r,i,c);In=(r.flags&131072)!==0}else In=!1,ds&&(i.flags&1048576)!==0&&r0(i,Nd,i.index);switch(i.lanes=0,i.tag){case 2:var m=i.type;$d(r,i),r=i.pendingProps;var x=Uo(i,on.current);Go(i,c),x=Rh(null,i,m,r,x,c);var w=Ih();return i.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Rn(m)?(w=!0,bd(i)):w=!1,i.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,kh(i),x.updater=Md,i.stateNode=x,x._reactInternals=i,$h(i,m,r,c),i=Uh(null,i,m,!0,w,c)):(i.tag=0,ds&&w&&fh(i),pn(null,i,x,c),i=i.child),i;case 16:m=i.elementType;e:{switch($d(r,i),r=i.pendingProps,x=m._init,m=x(m._payload),i.type=m,x=i.tag=X4(m),r=Ar(m,r),x){case 0:i=zh(null,i,m,r,c);break e;case 1:i=X0(null,i,m,r,c);break e;case 11:i=W0(null,i,m,r,c);break e;case 14:i=V0(null,i,m,Ar(m.type,r),c);break e}throw Error(n(306,m,""))}return i;case 0:return m=i.type,x=i.pendingProps,x=i.elementType===m?x:Ar(m,x),zh(r,i,m,x,c);case 1:return m=i.type,x=i.pendingProps,x=i.elementType===m?x:Ar(m,x),X0(r,i,m,x,c);case 3:e:{if(Z0(i),r===null)throw Error(n(387));m=i.pendingProps,w=i.memoizedState,x=w.element,h0(r,i),Ad(i,m,null,c);var P=i.memoizedState;if(m=P.element,w.isDehydrated)if(w={element:m,isDehydrated:!1,cache:P.cache,pendingSuspenseBoundaries:P.pendingSuspenseBoundaries,transitions:P.transitions},i.updateQueue.baseState=w,i.memoizedState=w,i.flags&256){x=Yo(Error(n(423)),i),i=J0(r,i,m,c,x);break e}else if(m!==x){x=Yo(Error(n(424)),i),i=J0(r,i,m,c,x);break e}else for(Qn=Ja(i.stateNode.containerInfo.firstChild),Gn=i,ds=!0,Tr=null,c=u0(i,null,m,c),i.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Ko(),m===x){i=Ta(r,i,c);break e}pn(r,i,m,c)}i=i.child}return i;case 5:return x0(i),r===null&&gh(i),m=i.type,x=i.pendingProps,w=r!==null?r.memoizedProps:null,P=x.children,lh(m,x)?P=null:w!==null&&lh(m,w)&&(i.flags|=32),Y0(r,i),pn(r,i,P,c),i.child;case 6:return r===null&&gh(i),null;case 13:return ev(r,i,c);case 4:return Ch(i,i.stateNode.containerInfo),m=i.pendingProps,r===null?i.child=Wo(i,null,m,c):pn(r,i,m,c),i.child;case 11:return m=i.type,x=i.pendingProps,x=i.elementType===m?x:Ar(m,x),W0(r,i,m,x,c);case 7:return pn(r,i,i.pendingProps,c),i.child;case 8:return pn(r,i,i.pendingProps.children,c),i.child;case 12:return pn(r,i,i.pendingProps.children,c),i.child;case 10:e:{if(m=i.type._context,x=i.pendingProps,w=i.memoizedProps,P=x.value,es(Sd,m._currentValue),m._currentValue=P,w!==null)if(Er(w.value,P)){if(w.children===x.children&&!Pn.current){i=Ta(r,i,c);break e}}else for(w=i.child,w!==null&&(w.return=i);w!==null;){var W=w.dependencies;if(W!==null){P=w.child;for(var Z=W.firstContext;Z!==null;){if(Z.context===m){if(w.tag===1){Z=Ea(-1,c&-c),Z.tag=2;var fe=w.updateQueue;if(fe!==null){fe=fe.shared;var Ee=fe.pending;Ee===null?Z.next=Z:(Z.next=Ee.next,Ee.next=Z),fe.pending=Z}}w.lanes|=c,Z=w.alternate,Z!==null&&(Z.lanes|=c),jh(w.return,c,i),W.lanes|=c;break}Z=Z.next}}else if(w.tag===10)P=w.type===i.type?null:w.child;else if(w.tag===18){if(P=w.return,P===null)throw Error(n(341));P.lanes|=c,W=P.alternate,W!==null&&(W.lanes|=c),jh(P,c,i),P=w.sibling}else P=w.child;if(P!==null)P.return=w;else for(P=w;P!==null;){if(P===i){P=null;break}if(w=P.sibling,w!==null){w.return=P.return,P=w;break}P=P.return}w=P}pn(r,i,x.children,c),i=i.child}return i;case 9:return x=i.type,m=i.pendingProps.children,Go(i,c),x=fr(x),m=m(x),i.flags|=1,pn(r,i,m,c),i.child;case 14:return m=i.type,x=Ar(m,i.pendingProps),x=Ar(m.type,x),V0(r,i,m,x,c);case 15:return G0(r,i,i.type,i.pendingProps,c);case 17:return m=i.type,x=i.pendingProps,x=i.elementType===m?x:Ar(m,x),$d(r,i),i.tag=1,Rn(m)?(r=!0,bd(i)):r=!1,Go(i,c),q0(i,m,x),$h(i,m,x,c),Uh(null,i,m,!0,r,c);case 19:return sv(r,i,c);case 22:return Q0(r,i,c)}throw Error(n(156,i.tag))};function Sv(r,i){return J(r,i)}function Y4(r,i,c,m){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gr(r,i,c,m){return new Y4(r,i,c,m)}function cf(r){return r=r.prototype,!(!r||!r.isReactComponent)}function X4(r){if(typeof r=="function")return cf(r)?1:0;if(r!=null){if(r=r.$$typeof,r===X)return 11;if(r===se)return 14}return 2}function di(r,i){var c=r.alternate;return c===null?(c=gr(r.tag,i,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=i,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&14680064,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,i=r.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c}function Qd(r,i,c,m,x,w){var P=2;if(m=r,typeof r=="function")cf(r)&&(P=1);else if(typeof r=="string")P=5;else e:switch(r){case K:return to(c.children,x,w,i);case ee:P=8,x|=8;break;case me:return r=gr(12,c,i,x|2),r.elementType=me,r.lanes=w,r;case z:return r=gr(13,c,i,x),r.elementType=z,r.lanes=w,r;case V:return r=gr(19,c,i,x),r.elementType=V,r.lanes=w,r;case O:return Yd(c,x,w,i);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case pe:P=10;break e;case L:P=9;break e;case X:P=11;break e;case se:P=14;break e;case I:P=16,m=null;break e}throw Error(n(130,r==null?r:typeof r,""))}return i=gr(P,c,i,x),i.elementType=r,i.type=m,i.lanes=w,i}function to(r,i,c,m){return r=gr(7,r,m,i),r.lanes=c,r}function Yd(r,i,c,m){return r=gr(22,r,m,i),r.elementType=O,r.lanes=c,r.stateNode={isHidden:!1},r}function df(r,i,c){return r=gr(6,r,null,i),r.lanes=c,r}function uf(r,i,c){return i=gr(4,r.children!==null?r.children:[],r.key,i),i.lanes=c,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}function Z4(r,i,c,m,x){this.tag=i,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=va(0),this.expirationTimes=va(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=va(0),this.identifierPrefix=m,this.onRecoverableError=x,this.mutableSourceEagerHydrationData=null}function mf(r,i,c,m,x,w,P,W,Z){return r=new Z4(r,i,c,W,Z),i===1?(i=1,w===!0&&(i|=8)):i=0,w=gr(3,null,null,i),r.current=w,w.stateNode=r,w.memoizedState={element:m,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(w),r}function J4(r,i,c){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:re,key:m==null?null:""+m,children:r,containerInfo:i,implementation:c}}function Ev(r){if(!r)return ti;r=r._reactInternals;e:{if(Tn(r)!==r||r.tag!==1)throw Error(n(170));var i=r;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Rn(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(n(171))}if(r.tag===1){var c=r.type;if(Rn(c))return t0(r,c,i)}return i}function Tv(r,i,c,m,x,w,P,W,Z){return r=mf(c,m,!0,r,x,w,P,W,Z),r.context=Ev(null),c=r.current,m=xn(),x=li(c),w=Ea(m,x),w.callback=i??null,ri(c,w,x),r.current.lanes=x,ya(r,x,m),_n(r,m),r}function Xd(r,i,c,m){var x=i.current,w=xn(),P=li(x);return c=Ev(c),i.context===null?i.context=c:i.pendingContext=c,i=Ea(w,P),i.payload={element:r},m=m===void 0?null:m,m!==null&&(i.callback=m),r=ri(x,i,P),r!==null&&(Ir(r,x,P,w),Td(r,x,P)),P}function Zd(r){return r=r.current,r.child?(r.child.tag===5,r.child.stateNode):null}function Av(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<i?c:i}}function hf(r,i){Av(r,i),(r=r.alternate)&&Av(r,i)}function eC(){return null}var Pv=typeof reportError=="function"?reportError:function(r){console.error(r)};function ff(r){this._internalRoot=r}Jd.prototype.render=ff.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(n(409));Xd(r,i,null,null)},Jd.prototype.unmount=ff.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;Zi(function(){Xd(null,r,null,null)}),i[ja]=null}};function Jd(r){this._internalRoot=r}Jd.prototype.unstable_scheduleHydration=function(r){if(r){var i=Ro();r={blockedOn:null,target:r,priority:i};for(var c=0;c<An.length&&i!==0&&i<An[c].priority;c++);An.splice(c,0,r),c===0&&zi(r)}};function pf(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function eu(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Rv(){}function tC(r,i,c,m,x){if(x){if(typeof m=="function"){var w=m;m=function(){var fe=Zd(P);w.call(fe)}}var P=Tv(i,m,r,0,null,!1,!1,"",Rv);return r._reactRootContainer=P,r[ja]=P.current,Jl(r.nodeType===8?r.parentNode:r),Zi(),P}for(;x=r.lastChild;)r.removeChild(x);if(typeof m=="function"){var W=m;m=function(){var fe=Zd(Z);W.call(fe)}}var Z=mf(r,0,!1,null,null,!1,!1,"",Rv);return r._reactRootContainer=Z,r[ja]=Z.current,Jl(r.nodeType===8?r.parentNode:r),Zi(function(){Xd(i,Z,c,m)}),Z}function tu(r,i,c,m,x){var w=c._reactRootContainer;if(w){var P=w;if(typeof x=="function"){var W=x;x=function(){var Z=Zd(P);W.call(Z)}}Xd(i,P,r,x)}else P=tC(c,i,r,x,m);return Zd(P)}dr=function(r){switch(r.tag){case 3:var i=r.stateNode;if(i.current.memoizedState.isDehydrated){var c=Xr(i.pendingLanes);c!==0&&(Cr(i,c|1),_n(i,ut()),(Rt&6)===0&&(Jo=ut()+500,si()))}break;case 13:Zi(function(){var m=Sa(r,1);if(m!==null){var x=xn();Ir(m,r,1,x)}}),hf(r,1)}},$i=function(r){if(r.tag===13){var i=Sa(r,134217728);if(i!==null){var c=xn();Ir(i,r,134217728,c)}hf(r,134217728)}},Kn=function(r){if(r.tag===13){var i=li(r),c=Sa(r,i);if(c!==null){var m=xn();Ir(c,r,i,m)}hf(r,i)}},Ro=function(){return ht},Io=function(r,i){var c=ht;try{return ht=r,i()}finally{ht=c}},Ys=function(r,i,c){switch(i){case"input":if(Xt(r,c),i=c.name,c.type==="radio"&&i!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<c.length;i++){var m=c[i];if(m!==r&&m.form===r.form){var x=vd(m);if(!x)throw Error(n(90));Me(m),Xt(m,x)}}}break;case"textarea":wt(r,c);break;case"select":i=c.value,i!=null&&ms(r,!!c.multiple,i,!1)}},We=af,Pt=Zi;var sC={usingClientEntryPoint:!1,Events:[sc,Fo,vd,En,ie,af]},xc={findFiberByHostInstance:Hi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nC={bundleType:xc.bundleType,version:xc.version,rendererPackageName:xc.rendererPackageName,rendererConfig:xc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Wa(r),r===null?null:r.stateNode},findFiberByHostInstance:xc.findFiberByHostInstance||eC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var su=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!su.isDisabled&&su.supportsFiber)try{Hn=su.inject(nC),Xs=su}catch{}}return Ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sC,Ln.createPortal=function(r,i){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pf(i))throw Error(n(200));return J4(r,i,null,c)},Ln.createRoot=function(r,i){if(!pf(r))throw Error(n(299));var c=!1,m="",x=Pv;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(m=i.identifierPrefix),i.onRecoverableError!==void 0&&(x=i.onRecoverableError)),i=mf(r,1,!1,null,null,c,!1,m,x),r[ja]=i.current,Jl(r.nodeType===8?r.parentNode:r),new ff(i)},Ln.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=Wa(i),r=r===null?null:r.stateNode,r},Ln.flushSync=function(r){return Zi(r)},Ln.hydrate=function(r,i,c){if(!eu(i))throw Error(n(200));return tu(null,r,i,!0,c)},Ln.hydrateRoot=function(r,i,c){if(!pf(r))throw Error(n(405));var m=c!=null&&c.hydratedSources||null,x=!1,w="",P=Pv;if(c!=null&&(c.unstable_strictMode===!0&&(x=!0),c.identifierPrefix!==void 0&&(w=c.identifierPrefix),c.onRecoverableError!==void 0&&(P=c.onRecoverableError)),i=Tv(i,null,r,1,c??null,x,!1,w,P),r[ja]=i.current,Jl(r),m)for(r=0;r<m.length;r++)c=m[r],x=c._getVersion,x=x(c._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[c,x]:i.mutableSourceEagerHydrationData.push(c,x);return new Jd(i)},Ln.render=function(r,i,c){if(!eu(i))throw Error(n(200));return tu(null,r,i,!1,c)},Ln.unmountComponentAtNode=function(r){if(!eu(r))throw Error(n(40));return r._reactRootContainer?(Zi(function(){tu(null,null,r,!1,function(){r._reactRootContainer=null,r[ja]=null})}),!0):!1},Ln.unstable_batchedUpdates=af,Ln.unstable_renderSubtreeIntoContainer=function(r,i,c,m){if(!eu(c))throw Error(n(200));if(r==null||r._reactInternals===void 0)throw Error(n(38));return tu(r,i,c,!1,m)},Ln.version="18.3.1-next-f1338f8080-20240426",Ln}var qv;function q1(){if(qv)return vf.exports;qv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),vf.exports=mC(),vf.exports}var Fv;function hC(){if(Fv)return nu;Fv=1;var s=q1();return nu.createRoot=s.createRoot,nu.hydrateRoot=s.hydrateRoot,nu}var fC=hC(),p=um();const ot=ed(p),cx=iC({__proto__:null,default:ot},[p]);function pC(s,t){if(s instanceof RegExp)return{keys:!1,pattern:s};var n,a,o,l,d=[],u="",h=s.split("/");for(h[0]||h.shift();o=h.shift();)n=o[0],n==="*"?(d.push(n),u+=o[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(a=o.indexOf("?",1),l=o.indexOf(".",1),d.push(o.substring(1,~a?a:~l?l:o.length)),u+=~a&&!~l?"(?:/([^/]+?))?":"/([^/]+?)",~l&&(u+=(~a?"?":"")+"\\"+o.substring(l))):u+="/"+o;return{keys:d,pattern:new RegExp("^"+u+(t?"(?=$|/)":"/?$"),"i")}}var wf={exports:{}},jf={};var zv;function xC(){if(zv)return jf;zv=1;var s=um();function t(v,y){return v===y&&(v!==0||1/v===1/y)||v!==v&&y!==y}var n=typeof Object.is=="function"?Object.is:t,a=s.useState,o=s.useEffect,l=s.useLayoutEffect,d=s.useDebugValue;function u(v,y){var N=y(),C=a({inst:{value:N,getSnapshot:y}}),g=C[0].inst,k=C[1];return l(function(){g.value=N,g.getSnapshot=y,h(g)&&k({inst:g})},[v,N,y]),o(function(){return h(g)&&k({inst:g}),v(function(){h(g)&&k({inst:g})})},[v]),d(N),N}function h(v){var y=v.getSnapshot;v=v.value;try{var N=y();return!n(v,N)}catch{return!0}}function f(v,y){return y()}var b=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return jf.useSyncExternalStore=s.useSyncExternalStore!==void 0?s.useSyncExternalStore:b,jf}var Uv;function gC(){return Uv||(Uv=1,wf.exports=xC()),wf.exports}var F1=gC();const vC=cx.useInsertionEffect,yC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",bC=yC?p.useLayoutEffect:p.useEffect,wC=vC||bC,z1=s=>{const t=p.useRef([s,(...n)=>t[0](...n)]).current;return wC(()=>{t[0]=s}),t[1]},jC="popstate",dx="pushState",ux="replaceState",NC="hashchange",Bv=[jC,dx,ux,NC],kC=s=>{for(const t of Bv)addEventListener(t,s);return()=>{for(const t of Bv)removeEventListener(t,s)}},U1=(s,t)=>F1.useSyncExternalStore(kC,s,t),CC=()=>location.search,SC=({ssrSearch:s=""}={})=>U1(CC,()=>s),Hv=()=>location.pathname,EC=({ssrPath:s}={})=>U1(Hv,s?()=>s:Hv),TC=(s,{replace:t=!1,state:n=null}={})=>history[t?ux:dx](n,"",s),AC=(s={})=>[EC(s),TC],Kv=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[Kv]>"u"){for(const s of[dx,ux]){const t=history[s];history[s]=function(){const n=t.apply(this,arguments),a=new Event(s);return a.arguments=arguments,dispatchEvent(a),n}}Object.defineProperty(window,Kv,{value:!0})}const PC=(s,t)=>t.toLowerCase().indexOf(s.toLowerCase())?"~"+t:t.slice(s.length)||"/",B1=(s="")=>s==="/"?"":s,RC=(s,t)=>s[0]==="~"?s.slice(1):B1(t)+s,IC=(s="",t)=>PC(up(B1(s)),up(t)),OC=s=>s[0]==="?"?s.slice(1):s,up=s=>{try{return decodeURI(s)}catch{return s}},_C=s=>up(OC(s)),H1={hook:AC,searchHook:SC,parser:pC,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:s=>s},K1=p.createContext(H1),yo=()=>p.useContext(K1),W1={},V1=p.createContext(W1),mm=()=>p.useContext(V1),hm=s=>{const[t,n]=s.hook(s);return[IC(s.base,t),z1((a,o)=>n(RC(a,s.base),o))]},G1=()=>hm(yo()),LC=()=>{const s=yo();return _C(s.searchHook(s))},mx=(s,t,n,a)=>{const{pattern:o,keys:l}=t instanceof RegExp?{keys:!1,pattern:t}:s(t||"*",a),d=o.exec(n)||[],[u,...h]=d;return u!==void 0?[!0,(()=>{const f=l!==!1?Object.fromEntries(l.map((v,y)=>[v,h[y]])):d.groups;let b={...h};return f&&Object.assign(b,f),b})(),...a?[u]:[]]:[!1,null]},MC=s=>mx(yo().parser,s,G1()[0]),DC=({children:s,...t})=>{const n=yo(),a=t.hook?H1:n;let o=a;const[l,d]=t.ssrPath?.split("?")??[];d&&(t.ssrSearch=d,t.ssrPath=l),t.hrefs=t.hrefs??t.hook?.hrefs;let u=p.useRef({}),h=u.current,f=h;for(let b in a){const v=b==="base"?a[b]+(t[b]||""):t[b]||a[b];h===f&&v!==f[b]&&(u.current=f={...f}),f[b]=v,v!==a[b]&&(o=f)}return p.createElement(K1.Provider,{value:o,children:s})},Wv=({children:s,component:t},n)=>t?p.createElement(t,{params:n}):typeof s=="function"?s(n):s,$C=s=>{let t=p.useRef(W1),n=t.current;for(const a in s)s[a]!==n[a]&&(n=s);return Object.keys(s).length===0&&(n=s),t.current=n},zt=({path:s,nest:t,match:n,...a})=>{const o=yo(),[l]=hm(o),[d,u,h]=n??mx(o.parser,s,l,t),f=$C({...mm(),...u});if(!d)return null;const b=h?p.createElement(DC,{base:h},Wv(a,f)):Wv(a,f);return p.createElement(V1.Provider,{value:f,children:b})},Mn=p.forwardRef((s,t)=>{const n=yo(),[a,o]=hm(n),{to:l="",href:d=l,onClick:u,asChild:h,children:f,className:b,replace:v,state:y,...N}=s,C=z1(k=>{k.ctrlKey||k.metaKey||k.altKey||k.shiftKey||k.button!==0||(u?.(k),k.defaultPrevented||(k.preventDefault(),o(d,s)))}),g=n.hrefs(d[0]==="~"?d.slice(1):n.base+d,n);return h&&p.isValidElement(f)?p.cloneElement(f,{onClick:C,href:g}):p.createElement("a",{...N,onClick:C,href:g,className:b?.call?b(a===d):b,children:f,ref:t})}),Q1=s=>Array.isArray(s)?s.flatMap(t=>Q1(t&&t.type===p.Fragment?t.props.children:t)):[s],Y1=({children:s,location:t})=>{const n=yo(),[a]=hm(n);for(const o of Q1(s)){let l=0;if(p.isValidElement(o)&&(l=mx(n.parser,o.props.path,t||a,o.props.nest))[0])return p.cloneElement(o,{match:l})}return null};var Pl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(s){return this.listeners.add(s),this.onSubscribe(),()=>{this.listeners.delete(s),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},oo=typeof window>"u"||"Deno"in globalThis;function vr(){}function qC(s,t){return typeof s=="function"?s(t):s}function mp(s){return typeof s=="number"&&s>=0&&s!==1/0}function X1(s,t){return Math.max(s+(t||0)-Date.now(),0)}function ul(s,t){return typeof s=="function"?s(t):s}function Dr(s,t){return typeof s=="function"?s(t):s}function Vv(s,t){const{type:n="all",exact:a,fetchStatus:o,predicate:l,queryKey:d,stale:u}=s;if(d){if(a){if(t.queryHash!==hx(d,t.options))return!1}else if(!Fc(t.queryKey,d))return!1}if(n!=="all"){const h=t.isActive();if(n==="active"&&!h||n==="inactive"&&h)return!1}return!(typeof u=="boolean"&&t.isStale()!==u||o&&o!==t.state.fetchStatus||l&&!l(t))}function Gv(s,t){const{exact:n,status:a,predicate:o,mutationKey:l}=s;if(l){if(!t.options.mutationKey)return!1;if(n){if(lo(t.options.mutationKey)!==lo(l))return!1}else if(!Fc(t.options.mutationKey,l))return!1}return!(a&&t.state.status!==a||o&&!o(t))}function hx(s,t){return(t?.queryKeyHashFn||lo)(s)}function lo(s){return JSON.stringify(s,(t,n)=>hp(n)?Object.keys(n).sort().reduce((a,o)=>(a[o]=n[o],a),{}):n)}function Fc(s,t){return s===t?!0:typeof s!=typeof t?!1:s&&t&&typeof s=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!Fc(s[n],t[n])):!1}function Z1(s,t){if(s===t)return s;const n=Qv(s)&&Qv(t);if(n||hp(s)&&hp(t)){const a=n?s:Object.keys(s),o=a.length,l=n?t:Object.keys(t),d=l.length,u=n?[]:{};let h=0;for(let f=0;f<d;f++){const b=n?f:l[f];(!n&&a.includes(b)||n)&&s[b]===void 0&&t[b]===void 0?(u[b]=void 0,h++):(u[b]=Z1(s[b],t[b]),u[b]===s[b]&&s[b]!==void 0&&h++)}return o===d&&h===o?s:u}return t}function zu(s,t){if(!t||Object.keys(s).length!==Object.keys(t).length)return!1;for(const n in s)if(s[n]!==t[n])return!1;return!0}function Qv(s){return Array.isArray(s)&&s.length===Object.keys(s).length}function hp(s){if(!Yv(s))return!1;const t=s.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!Yv(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(s)!==Object.prototype)}function Yv(s){return Object.prototype.toString.call(s)==="[object Object]"}function FC(s){return new Promise(t=>{setTimeout(t,s)})}function fp(s,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(s,t):n.structuralSharing!==!1?Z1(s,t):t}function zC(s,t,n=0){const a=[...s,t];return n&&a.length>n?a.slice(1):a}function UC(s,t,n=0){const a=[t,...s];return n&&a.length>n?a.slice(0,-1):a}var fx=Symbol();function J1(s,t){return!s.queryFn&&t?.initialPromise?()=>t.initialPromise:!s.queryFn||s.queryFn===fx?()=>Promise.reject(new Error(`Missing queryFn: '${s.queryHash}'`)):s.queryFn}var BC=class extends Pl{#e;#t;#n;constructor(){super(),this.#n=s=>{if(!oo&&window.addEventListener){const t=()=>s();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(s){this.#n=s,this.#t?.(),this.#t=s(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(s){this.#e!==s&&(this.#e=s,this.onFocus())}onFocus(){const s=this.isFocused();this.listeners.forEach(t=>{t(s)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},px=new BC,HC=class extends Pl{#e=!0;#t;#n;constructor(){super(),this.#n=s=>{if(!oo&&window.addEventListener){const t=()=>s(!0),n=()=>s(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(s){this.#n=s,this.#t?.(),this.#t=s(this.setOnline.bind(this))}setOnline(s){this.#e!==s&&(this.#e=s,this.listeners.forEach(n=>{n(s)}))}isOnline(){return this.#e}},Uu=new HC;function pp(){let s,t;const n=new Promise((o,l)=>{s=o,t=l});n.status="pending",n.catch(()=>{});function a(o){Object.assign(n,o),delete n.resolve,delete n.reject}return n.resolve=o=>{a({status:"fulfilled",value:o}),s(o)},n.reject=o=>{a({status:"rejected",reason:o}),t(o)},n}function KC(s){return Math.min(1e3*2**s,3e4)}function ew(s){return(s??"online")==="online"?Uu.isOnline():!0}var tw=class extends Error{constructor(s){super("CancelledError"),this.revert=s?.revert,this.silent=s?.silent}};function Nf(s){return s instanceof tw}function sw(s){let t=!1,n=0,a=!1,o;const l=pp(),d=g=>{a||(y(new tw(g)),s.abort?.())},u=()=>{t=!0},h=()=>{t=!1},f=()=>px.isFocused()&&(s.networkMode==="always"||Uu.isOnline())&&s.canRun(),b=()=>ew(s.networkMode)&&s.canRun(),v=g=>{a||(a=!0,s.onSuccess?.(g),o?.(),l.resolve(g))},y=g=>{a||(a=!0,s.onError?.(g),o?.(),l.reject(g))},N=()=>new Promise(g=>{o=k=>{(a||f())&&g(k)},s.onPause?.()}).then(()=>{o=void 0,a||s.onContinue?.()}),C=()=>{if(a)return;let g;const k=n===0?s.initialPromise:void 0;try{g=k??s.fn()}catch(A){g=Promise.reject(A)}Promise.resolve(g).then(v).catch(A=>{if(a)return;const E=s.retry??(oo?0:3),S=s.retryDelay??KC,R=typeof S=="function"?S(n,A):S,H=E===!0||typeof E=="number"&&n<E||typeof E=="function"&&E(n,A);if(t||!H){y(A);return}n++,s.onFail?.(n,A),FC(R).then(()=>f()?void 0:N()).then(()=>{t?y(A):C()})})};return{promise:l,cancel:d,continue:()=>(o?.(),l),cancelRetry:u,continueRetry:h,canStart:b,start:()=>(b()?C():N().then(C),l)}}function WC(){let s=[],t=0,n=u=>{u()},a=u=>{u()},o=u=>setTimeout(u,0);const l=u=>{t?s.push(u):o(()=>{n(u)})},d=()=>{const u=s;s=[],u.length&&o(()=>{a(()=>{u.forEach(h=>{n(h)})})})};return{batch:u=>{let h;t++;try{h=u()}finally{t--,t||d()}return h},batchCalls:u=>(...h)=>{l(()=>{u(...h)})},schedule:l,setNotifyFunction:u=>{n=u},setBatchNotifyFunction:u=>{a=u},setScheduler:u=>{o=u}}}var qs=WC(),nw=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),mp(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(s){this.gcTime=Math.max(this.gcTime||0,s??(oo?1/0:300*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},VC=class extends nw{#e;#t;#n;#s;#i;#a;constructor(s){super(),this.#a=!1,this.#i=s.defaultOptions,this.setOptions(s.options),this.observers=[],this.#n=s.cache,this.queryKey=s.queryKey,this.queryHash=s.queryHash,this.#e=GC(this.options),this.state=s.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(s){this.options={...this.#i,...s},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(s,t){const n=fp(this.state.data,s,this.options);return this.#r({data:n,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),n}setState(s,t){this.#r({type:"setState",state:s,setStateOptions:t})}cancel(s){const t=this.#s?.promise;return this.#s?.cancel(s),t?t.then(vr).catch(vr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(s=>Dr(s.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===fx||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(s=>s.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(s=0){return this.state.isInvalidated||this.state.data===void 0||!X1(this.state.dataUpdatedAt,s)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(s){this.observers.includes(s)||(this.observers.push(s),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:s}))}removeObserver(s){this.observers.includes(s)&&(this.observers=this.observers.filter(t=>t!==s),this.observers.length||(this.#s&&(this.#a?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:s}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#r({type:"invalidate"})}fetch(s,t){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(s&&this.setOptions(s),!this.options.queryFn){const u=this.observers.find(h=>h.options.queryFn);u&&this.setOptions(u.options)}const n=new AbortController,a=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(this.#a=!0,n.signal)})},o=()=>{const u=J1(this.options,t),h={queryKey:this.queryKey,meta:this.meta};return a(h),this.#a=!1,this.options.persister?this.options.persister(u,h,this):u(h)},l={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};a(l),this.options.behavior?.onFetch(l,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#r({type:"fetch",meta:l.fetchOptions?.meta});const d=u=>{Nf(u)&&u.silent||this.#r({type:"error",error:u}),Nf(u)||(this.#n.config.onError?.(u,this),this.#n.config.onSettled?.(this.state.data,u,this)),this.scheduleGc()};return this.#s=sw({initialPromise:t?.initialPromise,fn:l.fetchFn,abort:n.abort.bind(n),onSuccess:u=>{if(u===void 0){d(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(u)}catch(h){d(h);return}this.#n.config.onSuccess?.(u,this),this.#n.config.onSettled?.(u,this.state.error,this),this.scheduleGc()},onError:d,onFail:(u,h)=>{this.#r({type:"failed",failureCount:u,error:h})},onPause:()=>{this.#r({type:"pause"})},onContinue:()=>{this.#r({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}),this.#s.start()}#r(s){const t=n=>{switch(s.type){case"failed":return{...n,fetchFailureCount:s.failureCount,fetchFailureReason:s.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...rw(n.data,this.options),fetchMeta:s.meta??null};case"success":return{...n,data:s.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:s.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!s.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=s.error;return Nf(a)&&a.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...n,error:a,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...s.state}}};this.state=t(this.state),qs.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:s})})}};function rw(s,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ew(t.networkMode)?"fetching":"paused",...s===void 0&&{error:null,status:"pending"}}}function GC(s){const t=typeof s.initialData=="function"?s.initialData():s.initialData,n=t!==void 0,a=n?typeof s.initialDataUpdatedAt=="function"?s.initialDataUpdatedAt():s.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var QC=class extends Pl{constructor(s={}){super(),this.config=s,this.#e=new Map}#e;build(s,t,n){const a=t.queryKey,o=t.queryHash??hx(a,t);let l=this.get(o);return l||(l=new VC({cache:this,queryKey:a,queryHash:o,options:s.defaultQueryOptions(t),state:n,defaultOptions:s.getQueryDefaults(a)}),this.add(l)),l}add(s){this.#e.has(s.queryHash)||(this.#e.set(s.queryHash,s),this.notify({type:"added",query:s}))}remove(s){const t=this.#e.get(s.queryHash);t&&(s.destroy(),t===s&&this.#e.delete(s.queryHash),this.notify({type:"removed",query:s}))}clear(){qs.batch(()=>{this.getAll().forEach(s=>{this.remove(s)})})}get(s){return this.#e.get(s)}getAll(){return[...this.#e.values()]}find(s){const t={exact:!0,...s};return this.getAll().find(n=>Vv(t,n))}findAll(s={}){const t=this.getAll();return Object.keys(s).length>0?t.filter(n=>Vv(s,n)):t}notify(s){qs.batch(()=>{this.listeners.forEach(t=>{t(s)})})}onFocus(){qs.batch(()=>{this.getAll().forEach(s=>{s.onFocus()})})}onOnline(){qs.batch(()=>{this.getAll().forEach(s=>{s.onOnline()})})}},YC=class extends nw{#e;#t;#n;constructor(s){super(),this.mutationId=s.mutationId,this.#t=s.mutationCache,this.#e=[],this.state=s.state||aw(),this.setOptions(s.options),this.scheduleGc()}setOptions(s){this.options=s,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(s){this.#e.includes(s)||(this.#e.push(s),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:s}))}removeObserver(s){this.#e=this.#e.filter(t=>t!==s),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:s})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(s){this.#n=sw({fn:()=>this.options.mutationFn?this.options.mutationFn(s):Promise.reject(new Error("No mutationFn found")),onFail:(a,o)=>{this.#s({type:"failed",failureCount:a,error:o})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const t=this.state.status==="pending",n=!this.#n.canStart();try{if(!t){this.#s({type:"pending",variables:s,isPaused:n}),await this.#t.config.onMutate?.(s,this);const o=await this.options.onMutate?.(s);o!==this.state.context&&this.#s({type:"pending",context:o,variables:s,isPaused:n})}const a=await this.#n.start();return await this.#t.config.onSuccess?.(a,s,this.state.context,this),await this.options.onSuccess?.(a,s,this.state.context),await this.#t.config.onSettled?.(a,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(a,null,s,this.state.context),this.#s({type:"success",data:a}),a}catch(a){try{throw await this.#t.config.onError?.(a,s,this.state.context,this),await this.options.onError?.(a,s,this.state.context),await this.#t.config.onSettled?.(void 0,a,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,a,s,this.state.context),a}finally{this.#s({type:"error",error:a})}}finally{this.#t.runNext(this)}}#s(s){const t=n=>{switch(s.type){case"failed":return{...n,failureCount:s.failureCount,failureReason:s.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:s.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:s.isPaused,status:"pending",variables:s.variables,submittedAt:Date.now()};case"success":return{...n,data:s.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:s.error,failureCount:n.failureCount+1,failureReason:s.error,isPaused:!1,status:"error"}}};this.state=t(this.state),qs.batch(()=>{this.#e.forEach(n=>{n.onMutationUpdate(s)}),this.#t.notify({mutation:this,type:"updated",action:s})})}};function aw(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var XC=class extends Pl{constructor(s={}){super(),this.config=s,this.#e=new Map,this.#t=Date.now()}#e;#t;build(s,t,n){const a=new YC({mutationCache:this,mutationId:++this.#t,options:s.defaultMutationOptions(t),state:n});return this.add(a),a}add(s){const t=ru(s),n=this.#e.get(t)??[];n.push(s),this.#e.set(t,n),this.notify({type:"added",mutation:s})}remove(s){const t=ru(s);if(this.#e.has(t)){const n=this.#e.get(t)?.filter(a=>a!==s);n&&(n.length===0?this.#e.delete(t):this.#e.set(t,n))}this.notify({type:"removed",mutation:s})}canRun(s){const t=this.#e.get(ru(s))?.find(n=>n.state.status==="pending");return!t||t===s}runNext(s){return this.#e.get(ru(s))?.find(n=>n!==s&&n.state.isPaused)?.continue()??Promise.resolve()}clear(){qs.batch(()=>{this.getAll().forEach(s=>{this.remove(s)})})}getAll(){return[...this.#e.values()].flat()}find(s){const t={exact:!0,...s};return this.getAll().find(n=>Gv(t,n))}findAll(s={}){return this.getAll().filter(t=>Gv(s,t))}notify(s){qs.batch(()=>{this.listeners.forEach(t=>{t(s)})})}resumePausedMutations(){const s=this.getAll().filter(t=>t.state.isPaused);return qs.batch(()=>Promise.all(s.map(t=>t.continue().catch(vr))))}};function ru(s){return s.options.scope?.id??String(s.mutationId)}function Xv(s){return{onFetch:(t,n)=>{const a=t.options,o=t.fetchOptions?.meta?.fetchMore?.direction,l=t.state.data?.pages||[],d=t.state.data?.pageParams||[];let u={pages:[],pageParams:[]},h=0;const f=async()=>{let b=!1;const v=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(t.signal.aborted?b=!0:t.signal.addEventListener("abort",()=>{b=!0}),t.signal)})},y=J1(t.options,t.fetchOptions),N=async(C,g,k)=>{if(b)return Promise.reject();if(g==null&&C.pages.length)return Promise.resolve(C);const A={queryKey:t.queryKey,pageParam:g,direction:k?"backward":"forward",meta:t.options.meta};v(A);const E=await y(A),{maxPages:S}=t.options,R=k?UC:zC;return{pages:R(C.pages,E,S),pageParams:R(C.pageParams,g,S)}};if(o&&l.length){const C=o==="backward",g=C?ZC:Zv,k={pages:l,pageParams:d},A=g(a,k);u=await N(k,A,C)}else{const C=s??l.length;do{const g=h===0?d[0]??a.initialPageParam:Zv(a,u);if(h>0&&g==null)break;u=await N(u,g),h++}while(h<C)}return u};t.options.persister?t.fetchFn=()=>t.options.persister?.(f,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n):t.fetchFn=f}}}function Zv(s,{pages:t,pageParams:n}){const a=t.length-1;return t.length>0?s.getNextPageParam(t[a],t,n[a],n):void 0}function ZC(s,{pages:t,pageParams:n}){return t.length>0?s.getPreviousPageParam?.(t[0],t,n[0],n):void 0}var JC=class{#e;#t;#n;#s;#i;#a;#r;#o;constructor(s={}){this.#e=s.queryCache||new QC,this.#t=s.mutationCache||new XC,this.#n=s.defaultOptions||{},this.#s=new Map,this.#i=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#r=px.subscribe(async s=>{s&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#o=Uu.subscribe(async s=>{s&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#r?.(),this.#r=void 0,this.#o?.(),this.#o=void 0)}isFetching(s){return this.#e.findAll({...s,fetchStatus:"fetching"}).length}isMutating(s){return this.#t.findAll({...s,status:"pending"}).length}getQueryData(s){const t=this.defaultQueryOptions({queryKey:s});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(s){const t=this.getQueryData(s.queryKey);if(t===void 0)return this.fetchQuery(s);{const n=this.defaultQueryOptions(s),a=this.#e.build(this,n);return s.revalidateIfStale&&a.isStaleByTime(ul(n.staleTime,a))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(s){return this.#e.findAll(s).map(({queryKey:t,state:n})=>{const a=n.data;return[t,a]})}setQueryData(s,t,n){const a=this.defaultQueryOptions({queryKey:s}),l=this.#e.get(a.queryHash)?.state.data,d=qC(t,l);if(d!==void 0)return this.#e.build(this,a).setData(d,{...n,manual:!0})}setQueriesData(s,t,n){return qs.batch(()=>this.#e.findAll(s).map(({queryKey:a})=>[a,this.setQueryData(a,t,n)]))}getQueryState(s){const t=this.defaultQueryOptions({queryKey:s});return this.#e.get(t.queryHash)?.state}removeQueries(s){const t=this.#e;qs.batch(()=>{t.findAll(s).forEach(n=>{t.remove(n)})})}resetQueries(s,t){const n=this.#e,a={type:"active",...s};return qs.batch(()=>(n.findAll(s).forEach(o=>{o.reset()}),this.refetchQueries(a,t)))}cancelQueries(s={},t={}){const n={revert:!0,...t},a=qs.batch(()=>this.#e.findAll(s).map(o=>o.cancel(n)));return Promise.all(a).then(vr).catch(vr)}invalidateQueries(s={},t={}){return qs.batch(()=>{if(this.#e.findAll(s).forEach(a=>{a.invalidate()}),s.refetchType==="none")return Promise.resolve();const n={...s,type:s.refetchType??s.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(s={},t){const n={...t,cancelRefetch:t?.cancelRefetch??!0},a=qs.batch(()=>this.#e.findAll(s).filter(o=>!o.isDisabled()).map(o=>{let l=o.fetch(void 0,n);return n.throwOnError||(l=l.catch(vr)),o.state.fetchStatus==="paused"?Promise.resolve():l}));return Promise.all(a).then(vr)}fetchQuery(s){const t=this.defaultQueryOptions(s);t.retry===void 0&&(t.retry=!1);const n=this.#e.build(this,t);return n.isStaleByTime(ul(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(s){return this.fetchQuery(s).then(vr).catch(vr)}fetchInfiniteQuery(s){return s.behavior=Xv(s.pages),this.fetchQuery(s)}prefetchInfiniteQuery(s){return this.fetchInfiniteQuery(s).then(vr).catch(vr)}ensureInfiniteQueryData(s){return s.behavior=Xv(s.pages),this.ensureQueryData(s)}resumePausedMutations(){return Uu.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(s){this.#n=s}setQueryDefaults(s,t){this.#s.set(lo(s),{queryKey:s,defaultOptions:t})}getQueryDefaults(s){const t=[...this.#s.values()];let n={};return t.forEach(a=>{Fc(s,a.queryKey)&&(n={...n,...a.defaultOptions})}),n}setMutationDefaults(s,t){this.#i.set(lo(s),{mutationKey:s,defaultOptions:t})}getMutationDefaults(s){const t=[...this.#i.values()];let n={};return t.forEach(a=>{Fc(s,a.mutationKey)&&(n={...n,...a.defaultOptions})}),n}defaultQueryOptions(s){if(s._defaulted)return s;const t={...this.#n.queries,...this.getQueryDefaults(s.queryKey),...s,_defaulted:!0};return t.queryHash||(t.queryHash=hx(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===fx&&(t.enabled=!1),t}defaultMutationOptions(s){return s?._defaulted?s:{...this.#n.mutations,...s?.mutationKey&&this.getMutationDefaults(s.mutationKey),...s,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},eS=class extends Pl{constructor(s,t){super(),this.options=t,this.#e=s,this.#o=null,this.#r=pp(),this.options.experimental_prefetchInRender||this.#r.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#n=void 0;#s=void 0;#i;#a;#r;#o;#p;#m;#h;#c;#d;#l;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Jv(this.#t,this.options)?this.#u():this.updateResult(),this.#y())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return xp(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return xp(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#w(),this.#t.removeObserver(this)}setOptions(s,t){const n=this.options,a=this.#t;if(this.options=this.#e.defaultQueryOptions(s),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Dr(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#j(),this.#t.setOptions(this.options),n._defaulted&&!zu(this.options,n)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const o=this.hasListeners();o&&ey(this.#t,a,this.options,n)&&this.#u(),this.updateResult(t),o&&(this.#t!==a||Dr(this.options.enabled,this.#t)!==Dr(n.enabled,this.#t)||ul(this.options.staleTime,this.#t)!==ul(n.staleTime,this.#t))&&this.#x();const l=this.#g();o&&(this.#t!==a||Dr(this.options.enabled,this.#t)!==Dr(n.enabled,this.#t)||l!==this.#l)&&this.#v(l)}getOptimisticResult(s){const t=this.#e.getQueryCache().build(this.#e,s),n=this.createResult(t,s);return sS(this,n)&&(this.#s=n,this.#a=this.options,this.#i=this.#t.state),n}getCurrentResult(){return this.#s}trackResult(s,t){const n={};return Object.keys(s).forEach(a=>{Object.defineProperty(n,a,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(a),t?.(a),s[a])})}),n}trackProp(s){this.#f.add(s)}getCurrentQuery(){return this.#t}refetch({...s}={}){return this.fetch({...s})}fetchOptimistic(s){const t=this.#e.defaultQueryOptions(s),n=this.#e.getQueryCache().build(this.#e,t);return n.fetch().then(()=>this.createResult(n,t))}fetch(s){return this.#u({...s,cancelRefetch:s.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#s))}#u(s){this.#j();let t=this.#t.fetch(this.options,s);return s?.throwOnError||(t=t.catch(vr)),t}#x(){this.#b();const s=ul(this.options.staleTime,this.#t);if(oo||this.#s.isStale||!mp(s))return;const n=X1(this.#s.dataUpdatedAt,s)+1;this.#c=setTimeout(()=>{this.#s.isStale||this.updateResult()},n)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(s){this.#w(),this.#l=s,!(oo||Dr(this.options.enabled,this.#t)===!1||!mp(this.#l)||this.#l===0)&&(this.#d=setInterval(()=>{(this.options.refetchIntervalInBackground||px.isFocused())&&this.#u()},this.#l))}#y(){this.#x(),this.#v(this.#g())}#b(){this.#c&&(clearTimeout(this.#c),this.#c=void 0)}#w(){this.#d&&(clearInterval(this.#d),this.#d=void 0)}createResult(s,t){const n=this.#t,a=this.options,o=this.#s,l=this.#i,d=this.#a,h=s!==n?s.state:this.#n,{state:f}=s;let b={...f},v=!1,y;if(t._optimisticResults){const K=this.hasListeners(),ee=!K&&Jv(s,t),me=K&&ey(s,n,t,a);(ee||me)&&(b={...b,...rw(f.data,s.options)}),t._optimisticResults==="isRestoring"&&(b.fetchStatus="idle")}let{error:N,errorUpdatedAt:C,status:g}=b;if(t.select&&b.data!==void 0)if(o&&b.data===l?.data&&t.select===this.#p)y=this.#m;else try{this.#p=t.select,y=t.select(b.data),y=fp(o?.data,y,t),this.#m=y,this.#o=null}catch(K){this.#o=K}else y=b.data;if(t.placeholderData!==void 0&&y===void 0&&g==="pending"){let K;if(o?.isPlaceholderData&&t.placeholderData===d?.placeholderData)K=o.data;else if(K=typeof t.placeholderData=="function"?t.placeholderData(this.#h?.state.data,this.#h):t.placeholderData,t.select&&K!==void 0)try{K=t.select(K),this.#o=null}catch(ee){this.#o=ee}K!==void 0&&(g="success",y=fp(o?.data,K,t),v=!0)}this.#o&&(N=this.#o,y=this.#m,C=Date.now(),g="error");const k=b.fetchStatus==="fetching",A=g==="pending",E=g==="error",S=A&&k,R=y!==void 0,re={status:g,fetchStatus:b.fetchStatus,isPending:A,isSuccess:g==="success",isError:E,isInitialLoading:S,isLoading:S,data:y,dataUpdatedAt:b.dataUpdatedAt,error:N,errorUpdatedAt:C,failureCount:b.fetchFailureCount,failureReason:b.fetchFailureReason,errorUpdateCount:b.errorUpdateCount,isFetched:b.dataUpdateCount>0||b.errorUpdateCount>0,isFetchedAfterMount:b.dataUpdateCount>h.dataUpdateCount||b.errorUpdateCount>h.errorUpdateCount,isFetching:k,isRefetching:k&&!A,isLoadingError:E&&!R,isPaused:b.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:E&&R,isStale:xx(s,t),refetch:this.refetch,promise:this.#r};if(this.options.experimental_prefetchInRender){const K=pe=>{re.status==="error"?pe.reject(re.error):re.data!==void 0&&pe.resolve(re.data)},ee=()=>{const pe=this.#r=re.promise=pp();K(pe)},me=this.#r;switch(me.status){case"pending":s.queryHash===n.queryHash&&K(me);break;case"fulfilled":(re.status==="error"||re.data!==me.value)&&ee();break;case"rejected":(re.status!=="error"||re.error!==me.reason)&&ee();break}}return re}updateResult(s){const t=this.#s,n=this.createResult(this.#t,this.options);if(this.#i=this.#t.state,this.#a=this.options,this.#i.data!==void 0&&(this.#h=this.#t),zu(n,t))return;this.#s=n;const a={},o=()=>{if(!t)return!0;const{notifyOnChangeProps:l}=this.options,d=typeof l=="function"?l():l;if(d==="all"||!d&&!this.#f.size)return!0;const u=new Set(d??this.#f);return this.options.throwOnError&&u.add("error"),Object.keys(this.#s).some(h=>{const f=h;return this.#s[f]!==t[f]&&u.has(f)})};s?.listeners!==!1&&o()&&(a.listeners=!0),this.#N({...a,...s})}#j(){const s=this.#e.getQueryCache().build(this.#e,this.options);if(s===this.#t)return;const t=this.#t;this.#t=s,this.#n=s.state,this.hasListeners()&&(t?.removeObserver(this),s.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#y()}#N(s){qs.batch(()=>{s.listeners&&this.listeners.forEach(t=>{t(this.#s)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function tS(s,t){return Dr(t.enabled,s)!==!1&&s.state.data===void 0&&!(s.state.status==="error"&&t.retryOnMount===!1)}function Jv(s,t){return tS(s,t)||s.state.data!==void 0&&xp(s,t,t.refetchOnMount)}function xp(s,t,n){if(Dr(t.enabled,s)!==!1){const a=typeof n=="function"?n(s):n;return a==="always"||a!==!1&&xx(s,t)}return!1}function ey(s,t,n,a){return(s!==t||Dr(a.enabled,s)===!1)&&(!n.suspense||s.state.status!=="error")&&xx(s,n)}function xx(s,t){return Dr(t.enabled,s)!==!1&&s.isStaleByTime(ul(t.staleTime,s))}function sS(s,t){return!zu(s.getCurrentResult(),t)}var nS=class extends Pl{#e;#t=void 0;#n;#s;constructor(t,n){super(),this.#e=t,this.setOptions(n),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const n=this.options;this.options=this.#e.defaultMutationOptions(t),zu(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),n?.mutationKey&&this.options.mutationKey&&lo(n.mutationKey)!==lo(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(t){this.#i(),this.#a(t)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#i(),this.#a()}mutate(t,n){return this.#s=n,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(t)}#i(){const t=this.#n?.state??aw();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#a(t){qs.batch(()=>{if(this.#s&&this.hasListeners()){const n=this.#t.variables,a=this.#t.context;t?.type==="success"?(this.#s.onSuccess?.(t.data,n,a),this.#s.onSettled?.(t.data,null,n,a)):t?.type==="error"&&(this.#s.onError?.(t.error,n,a),this.#s.onSettled?.(void 0,t.error,n,a))}this.listeners.forEach(n=>{n(this.#t)})})}},iw=p.createContext(void 0),gx=s=>{const t=p.useContext(iw);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},rS=({client:s,children:t})=>(p.useEffect(()=>(s.mount(),()=>{s.unmount()}),[s]),e.jsx(iw.Provider,{value:s,children:t})),ow=p.createContext(!1),aS=()=>p.useContext(ow);ow.Provider;function iS(){let s=!1;return{clearReset:()=>{s=!1},reset:()=>{s=!0},isReset:()=>s}}var oS=p.createContext(iS()),lS=()=>p.useContext(oS);function lw(s,t){return typeof s=="function"?s(...t):!!s}function gp(){}var cS=(s,t)=>{(s.suspense||s.throwOnError||s.experimental_prefetchInRender)&&(t.isReset()||(s.retryOnMount=!1))},dS=s=>{p.useEffect(()=>{s.clearReset()},[s])},uS=({result:s,errorResetBoundary:t,throwOnError:n,query:a})=>s.isError&&!t.isReset()&&!s.isFetching&&a&&lw(n,[s.error,a]),mS=s=>{s.suspense&&(s.staleTime===void 0&&(s.staleTime=1e3),typeof s.gcTime=="number"&&(s.gcTime=Math.max(s.gcTime,1e3)))},hS=(s,t)=>s.isLoading&&s.isFetching&&!t,fS=(s,t)=>s?.suspense&&t.isPending,ty=(s,t,n)=>t.fetchOptimistic(s).catch(()=>{n.clearReset()});function pS(s,t,n){const a=gx(),o=aS(),l=lS(),d=a.defaultQueryOptions(s);a.getDefaultOptions().queries?._experimental_beforeQuery?.(d),d._optimisticResults=o?"isRestoring":"optimistic",mS(d),cS(d,l),dS(l);const u=!a.getQueryCache().get(d.queryHash),[h]=p.useState(()=>new t(a,d)),f=h.getOptimisticResult(d);if(p.useSyncExternalStore(p.useCallback(b=>{const v=o?gp:h.subscribe(qs.batchCalls(b));return h.updateResult(),v},[h,o]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),p.useEffect(()=>{h.setOptions(d,{listeners:!1})},[d,h]),fS(d,f))throw ty(d,h,l);if(uS({result:f,errorResetBoundary:l,throwOnError:d.throwOnError,query:a.getQueryCache().get(d.queryHash)}))throw f.error;return a.getDefaultOptions().queries?._experimental_afterQuery?.(d,f),d.experimental_prefetchInRender&&!oo&&hS(f,o)&&(u?ty(d,h,l):a.getQueryCache().get(d.queryHash)?.promise)?.catch(gp).finally(()=>{h.updateResult()}),d.notifyOnChangeProps?f:h.trackResult(f)}function Le(s,t){return pS(s,eS)}function Te(s,t){const n=gx(),[a]=p.useState(()=>new nS(n,s));p.useEffect(()=>{a.setOptions(s)},[a,s]);const o=p.useSyncExternalStore(p.useCallback(d=>a.subscribe(qs.batchCalls(d)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),l=p.useCallback((d,u)=>{a.mutate(d,u).catch(gp)},[a]);if(o.error&&lw(a.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:l,mutateAsync:o.mutate}}async function cw(s){if(!s.ok){const t=await s.text()||s.statusText;throw new Error(`${s.status}: ${t}`)}}async function ke(s,t,n){const a=await fetch(t,{method:s,headers:n?{"Content-Type":"application/json"}:{},body:n?JSON.stringify(n):void 0,credentials:"include"});return await cw(a),a}const xS=({on401:s})=>async({queryKey:t})=>{const n=await fetch(t.join("/"),{credentials:"include"});return await cw(n),await n.json()},ve=new JC({defaultOptions:{queries:{queryFn:xS({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),gS=1,vS=1e6;let kf=0;function yS(){return kf=(kf+1)%Number.MAX_SAFE_INTEGER,kf.toString()}const Cf=new Map,sy=s=>{if(Cf.has(s))return;const t=setTimeout(()=>{Cf.delete(s),Oc({type:"REMOVE_TOAST",toastId:s})},vS);Cf.set(s,t)},bS=(s,t)=>{switch(t.type){case"ADD_TOAST":return{...s,toasts:[t.toast,...s.toasts].slice(0,gS)};case"UPDATE_TOAST":return{...s,toasts:s.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?sy(n):s.toasts.forEach(a=>{sy(a.id)}),{...s,toasts:s.toasts.map(a=>a.id===n||n===void 0?{...a,open:!1}:a)}}case"REMOVE_TOAST":return t.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(n=>n.id!==t.toastId)}}},Au=[];let Pu={toasts:[]};function Oc(s){Pu=bS(Pu,s),Au.forEach(t=>{t(Pu)})}function wS({...s}){const t=yS(),n=o=>Oc({type:"UPDATE_TOAST",toast:{...o,id:t}}),a=()=>Oc({type:"DISMISS_TOAST",toastId:t});return Oc({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:o=>{o||a()}}}),{id:t,dismiss:a,update:n}}function pt(){const[s,t]=p.useState(Pu);return p.useEffect(()=>(Au.push(t),()=>{const n=Au.indexOf(t);n>-1&&Au.splice(n,1)}),[s]),{...s,toast:wS,dismiss:n=>Oc({type:"DISMISS_TOAST",toastId:n})}}var Rl=q1();const jS=ed(Rl);function it(s,t,{checkForDefaultPrevented:n=!0}={}){return function(o){if(s?.(o),n===!1||!o.defaultPrevented)return t?.(o)}}function ny(s,t){if(typeof s=="function")return s(t);s!=null&&(s.current=t)}function vx(...s){return t=>{let n=!1;const a=s.map(o=>{const l=ny(o,t);return!n&&typeof l=="function"&&(n=!0),l});if(n)return()=>{for(let o=0;o<a.length;o++){const l=a[o];typeof l=="function"?l():ny(s[o],null)}}}}function Yt(...s){return p.useCallback(vx(...s),s)}function NS(s,t){const n=p.createContext(t),a=l=>{const{children:d,...u}=l,h=p.useMemo(()=>u,Object.values(u));return e.jsx(n.Provider,{value:h,children:d})};a.displayName=s+"Provider";function o(l){const d=p.useContext(n);if(d)return d;if(t!==void 0)return t;throw new Error(`\`${l}\` must be used within \`${s}\``)}return[a,o]}function za(s,t=[]){let n=[];function a(l,d){const u=p.createContext(d),h=n.length;n=[...n,d];const f=v=>{const{scope:y,children:N,...C}=v,g=y?.[s]?.[h]||u,k=p.useMemo(()=>C,Object.values(C));return e.jsx(g.Provider,{value:k,children:N})};f.displayName=l+"Provider";function b(v,y){const N=y?.[s]?.[h]||u,C=p.useContext(N);if(C)return C;if(d!==void 0)return d;throw new Error(`\`${v}\` must be used within \`${l}\``)}return[f,b]}const o=()=>{const l=n.map(d=>p.createContext(d));return function(u){const h=u?.[s]||l;return p.useMemo(()=>({[`__scope${s}`]:{...u,[s]:h}}),[u,h])}};return o.scopeName=s,[a,kS(o,...t)]}function kS(...s){const t=s[0];if(s.length===1)return t;const n=()=>{const a=s.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(l){const d=a.reduce((u,{useScope:h,scopeName:f})=>{const v=h(l)[`__scope${f}`];return{...u,...v}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:d}),[d])}};return n.scopeName=t.scopeName,n}function wl(s){const t=CS(s),n=p.forwardRef((a,o)=>{const{children:l,...d}=a,u=p.Children.toArray(l),h=u.find(ES);if(h){const f=h.props.children,b=u.map(v=>v===h?p.Children.count(f)>1?p.Children.only(null):p.isValidElement(f)?f.props.children:null:v);return e.jsx(t,{...d,ref:o,children:p.isValidElement(f)?p.cloneElement(f,void 0,b):null})}return e.jsx(t,{...d,ref:o,children:l})});return n.displayName=`${s}.Slot`,n}var yx=wl("Slot");function CS(s){const t=p.forwardRef((n,a)=>{const{children:o,...l}=n;if(p.isValidElement(o)){const d=AS(o),u=TS(l,o.props);return o.type!==p.Fragment&&(u.ref=a?vx(a,d):d),p.cloneElement(o,u)}return p.Children.count(o)>1?p.Children.only(null):null});return t.displayName=`${s}.SlotClone`,t}var dw=Symbol("radix.slottable");function SS(s){const t=({children:n})=>e.jsx(e.Fragment,{children:n});return t.displayName=`${s}.Slottable`,t.__radixId=dw,t}function ES(s){return p.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===dw}function TS(s,t){const n={...t};for(const a in t){const o=s[a],l=t[a];/^on[A-Z]/.test(a)?o&&l?n[a]=(...u)=>{l(...u),o(...u)}:o&&(n[a]=o):a==="style"?n[a]={...o,...l}:a==="className"&&(n[a]=[o,l].filter(Boolean).join(" "))}return{...s,...n}}function AS(s){let t=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?s.ref:(t=Object.getOwnPropertyDescriptor(s,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?s.props.ref:s.props.ref||s.ref)}function bx(s){const t=s+"CollectionProvider",[n,a]=za(t),[o,l]=n(t,{collectionRef:{current:null},itemMap:new Map}),d=g=>{const{scope:k,children:A}=g,E=ot.useRef(null),S=ot.useRef(new Map).current;return e.jsx(o,{scope:k,itemMap:S,collectionRef:E,children:A})};d.displayName=t;const u=s+"CollectionSlot",h=wl(u),f=ot.forwardRef((g,k)=>{const{scope:A,children:E}=g,S=l(u,A),R=Yt(k,S.collectionRef);return e.jsx(h,{ref:R,children:E})});f.displayName=u;const b=s+"CollectionItemSlot",v="data-radix-collection-item",y=wl(b),N=ot.forwardRef((g,k)=>{const{scope:A,children:E,...S}=g,R=ot.useRef(null),H=Yt(k,R),re=l(b,A);return ot.useEffect(()=>(re.itemMap.set(R,{ref:R,...S}),()=>{re.itemMap.delete(R)})),e.jsx(y,{[v]:"",ref:H,children:E})});N.displayName=b;function C(g){const k=l(s+"CollectionConsumer",g);return ot.useCallback(()=>{const E=k.collectionRef.current;if(!E)return[];const S=Array.from(E.querySelectorAll(`[${v}]`));return Array.from(k.itemMap.values()).sort((re,K)=>S.indexOf(re.ref.current)-S.indexOf(K.ref.current))},[k.collectionRef,k.itemMap])}return[{Provider:d,Slot:f,ItemSlot:N},C,a]}var PS=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],mt=PS.reduce((s,t)=>{const n=wl(`Primitive.${t}`),a=p.forwardRef((o,l)=>{const{asChild:d,...u}=o,h=d?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(h,{...u,ref:l})});return a.displayName=`Primitive.${t}`,{...s,[t]:a}},{});function uw(s,t){s&&Rl.flushSync(()=>s.dispatchEvent(t))}function kn(s){const t=p.useRef(s);return p.useEffect(()=>{t.current=s}),p.useMemo(()=>(...n)=>t.current?.(...n),[])}function RS(s,t=globalThis?.document){const n=kn(s);p.useEffect(()=>{const a=o=>{o.key==="Escape"&&n(o)};return t.addEventListener("keydown",a,{capture:!0}),()=>t.removeEventListener("keydown",a,{capture:!0})},[n,t])}var IS="DismissableLayer",vp="dismissableLayer.update",OS="dismissableLayer.pointerDownOutside",_S="dismissableLayer.focusOutside",ry,mw=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),td=p.forwardRef((s,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:l,onInteractOutside:d,onDismiss:u,...h}=s,f=p.useContext(mw),[b,v]=p.useState(null),y=b?.ownerDocument??globalThis?.document,[,N]=p.useState({}),C=Yt(t,K=>v(K)),g=Array.from(f.layers),[k]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),A=g.indexOf(k),E=b?g.indexOf(b):-1,S=f.layersWithOutsidePointerEventsDisabled.size>0,R=E>=A,H=MS(K=>{const ee=K.target,me=[...f.branches].some(pe=>pe.contains(ee));!R||me||(o?.(K),d?.(K),K.defaultPrevented||u?.())},y),re=DS(K=>{const ee=K.target;[...f.branches].some(pe=>pe.contains(ee))||(l?.(K),d?.(K),K.defaultPrevented||u?.())},y);return RS(K=>{E===f.layers.size-1&&(a?.(K),!K.defaultPrevented&&u&&(K.preventDefault(),u()))},y),p.useEffect(()=>{if(b)return n&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(ry=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(b)),f.layers.add(b),ay(),()=>{n&&f.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=ry)}},[b,y,n,f]),p.useEffect(()=>()=>{b&&(f.layers.delete(b),f.layersWithOutsidePointerEventsDisabled.delete(b),ay())},[b,f]),p.useEffect(()=>{const K=()=>N({});return document.addEventListener(vp,K),()=>document.removeEventListener(vp,K)},[]),e.jsx(mt.div,{...h,ref:C,style:{pointerEvents:S?R?"auto":"none":void 0,...s.style},onFocusCapture:it(s.onFocusCapture,re.onFocusCapture),onBlurCapture:it(s.onBlurCapture,re.onBlurCapture),onPointerDownCapture:it(s.onPointerDownCapture,H.onPointerDownCapture)})});td.displayName=IS;var LS="DismissableLayerBranch",hw=p.forwardRef((s,t)=>{const n=p.useContext(mw),a=p.useRef(null),o=Yt(t,a);return p.useEffect(()=>{const l=a.current;if(l)return n.branches.add(l),()=>{n.branches.delete(l)}},[n.branches]),e.jsx(mt.div,{...s,ref:o})});hw.displayName=LS;function MS(s,t=globalThis?.document){const n=kn(s),a=p.useRef(!1),o=p.useRef(()=>{});return p.useEffect(()=>{const l=u=>{if(u.target&&!a.current){let h=function(){fw(OS,n,f,{discrete:!0})};const f={originalEvent:u};u.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=h,t.addEventListener("click",o.current,{once:!0})):h()}else t.removeEventListener("click",o.current);a.current=!1},d=window.setTimeout(()=>{t.addEventListener("pointerdown",l)},0);return()=>{window.clearTimeout(d),t.removeEventListener("pointerdown",l),t.removeEventListener("click",o.current)}},[t,n]),{onPointerDownCapture:()=>a.current=!0}}function DS(s,t=globalThis?.document){const n=kn(s),a=p.useRef(!1);return p.useEffect(()=>{const o=l=>{l.target&&!a.current&&fw(_S,n,{originalEvent:l},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,n]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function ay(){const s=new CustomEvent(vp);document.dispatchEvent(s)}function fw(s,t,n,{discrete:a}){const o=n.originalEvent.target,l=new CustomEvent(s,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(s,t,{once:!0}),a?uw(o,l):o.dispatchEvent(l)}var $S=td,qS=hw,zs=globalThis?.document?p.useLayoutEffect:()=>{},FS="Portal",fm=p.forwardRef((s,t)=>{const{container:n,...a}=s,[o,l]=p.useState(!1);zs(()=>l(!0),[]);const d=n||o&&globalThis?.document?.body;return d?jS.createPortal(e.jsx(mt.div,{...a,ref:t}),d):null});fm.displayName=FS;function zS(s,t){return p.useReducer((n,a)=>t[n][a]??n,s)}var bo=s=>{const{present:t,children:n}=s,a=US(t),o=typeof n=="function"?n({present:a.isPresent}):p.Children.only(n),l=Yt(a.ref,BS(o));return typeof n=="function"||a.isPresent?p.cloneElement(o,{ref:l}):null};bo.displayName="Presence";function US(s){const[t,n]=p.useState(),a=p.useRef({}),o=p.useRef(s),l=p.useRef("none"),d=s?"mounted":"unmounted",[u,h]=zS(d,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const f=au(a.current);l.current=u==="mounted"?f:"none"},[u]),zs(()=>{const f=a.current,b=o.current;if(b!==s){const y=l.current,N=au(f);s?h("MOUNT"):N==="none"||f?.display==="none"?h("UNMOUNT"):h(b&&y!==N?"ANIMATION_OUT":"UNMOUNT"),o.current=s}},[s,h]),zs(()=>{if(t){let f;const b=t.ownerDocument.defaultView??window,v=N=>{const g=au(a.current).includes(N.animationName);if(N.target===t&&g&&(h("ANIMATION_END"),!o.current)){const k=t.style.animationFillMode;t.style.animationFillMode="forwards",f=b.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=k)})}},y=N=>{N.target===t&&(l.current=au(a.current))};return t.addEventListener("animationstart",y),t.addEventListener("animationcancel",v),t.addEventListener("animationend",v),()=>{b.clearTimeout(f),t.removeEventListener("animationstart",y),t.removeEventListener("animationcancel",v),t.removeEventListener("animationend",v)}}else h("ANIMATION_END")},[t,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:p.useCallback(f=>{f&&(a.current=getComputedStyle(f)),n(f)},[])}}function au(s){return s?.animationName||"none"}function BS(s){let t=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?s.ref:(t=Object.getOwnPropertyDescriptor(s,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?s.props.ref:s.props.ref||s.ref)}function Ni({prop:s,defaultProp:t,onChange:n=()=>{}}){const[a,o]=HS({defaultProp:t,onChange:n}),l=s!==void 0,d=l?s:a,u=kn(n),h=p.useCallback(f=>{if(l){const v=typeof f=="function"?f(s):f;v!==s&&u(v)}else o(f)},[l,s,o,u]);return[d,h]}function HS({defaultProp:s,onChange:t}){const n=p.useState(s),[a]=n,o=p.useRef(a),l=kn(t);return p.useEffect(()=>{o.current!==a&&(l(a),o.current=a)},[a,o,l]),n}var KS="VisuallyHidden",sd=p.forwardRef((s,t)=>e.jsx(mt.span,{...s,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...s.style}}));sd.displayName=KS;var WS=sd,wx="ToastProvider",[jx,VS,GS]=bx("Toast"),[pw]=za("Toast",[GS]),[QS,pm]=pw(wx),xw=s=>{const{__scopeToast:t,label:n="Notification",duration:a=5e3,swipeDirection:o="right",swipeThreshold:l=50,children:d}=s,[u,h]=p.useState(null),[f,b]=p.useState(0),v=p.useRef(!1),y=p.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${wx}\`. Expected non-empty \`string\`.`),e.jsx(jx.Provider,{scope:t,children:e.jsx(QS,{scope:t,label:n,duration:a,swipeDirection:o,swipeThreshold:l,toastCount:f,viewport:u,onViewportChange:h,onToastAdd:p.useCallback(()=>b(N=>N+1),[]),onToastRemove:p.useCallback(()=>b(N=>N-1),[]),isFocusedToastEscapeKeyDownRef:v,isClosePausedRef:y,children:d})})};xw.displayName=wx;var gw="ToastViewport",YS=["F8"],yp="toast.viewportPause",bp="toast.viewportResume",vw=p.forwardRef((s,t)=>{const{__scopeToast:n,hotkey:a=YS,label:o="Notifications ({hotkey})",...l}=s,d=pm(gw,n),u=VS(n),h=p.useRef(null),f=p.useRef(null),b=p.useRef(null),v=p.useRef(null),y=Yt(t,v,d.onViewportChange),N=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),C=d.toastCount>0;p.useEffect(()=>{const k=A=>{a.length!==0&&a.every(S=>A[S]||A.code===S)&&v.current?.focus()};return document.addEventListener("keydown",k),()=>document.removeEventListener("keydown",k)},[a]),p.useEffect(()=>{const k=h.current,A=v.current;if(C&&k&&A){const E=()=>{if(!d.isClosePausedRef.current){const re=new CustomEvent(yp);A.dispatchEvent(re),d.isClosePausedRef.current=!0}},S=()=>{if(d.isClosePausedRef.current){const re=new CustomEvent(bp);A.dispatchEvent(re),d.isClosePausedRef.current=!1}},R=re=>{!k.contains(re.relatedTarget)&&S()},H=()=>{k.contains(document.activeElement)||S()};return k.addEventListener("focusin",E),k.addEventListener("focusout",R),k.addEventListener("pointermove",E),k.addEventListener("pointerleave",H),window.addEventListener("blur",E),window.addEventListener("focus",S),()=>{k.removeEventListener("focusin",E),k.removeEventListener("focusout",R),k.removeEventListener("pointermove",E),k.removeEventListener("pointerleave",H),window.removeEventListener("blur",E),window.removeEventListener("focus",S)}}},[C,d.isClosePausedRef]);const g=p.useCallback(({tabbingDirection:k})=>{const E=u().map(S=>{const R=S.ref.current,H=[R,...c3(R)];return k==="forwards"?H:H.reverse()});return(k==="forwards"?E.reverse():E).flat()},[u]);return p.useEffect(()=>{const k=v.current;if(k){const A=E=>{const S=E.altKey||E.ctrlKey||E.metaKey;if(E.key==="Tab"&&!S){const H=document.activeElement,re=E.shiftKey;if(E.target===k&&re){f.current?.focus();return}const me=g({tabbingDirection:re?"backwards":"forwards"}),pe=me.findIndex(L=>L===H);Sf(me.slice(pe+1))?E.preventDefault():re?f.current?.focus():b.current?.focus()}};return k.addEventListener("keydown",A),()=>k.removeEventListener("keydown",A)}},[u,g]),e.jsxs(qS,{ref:h,role:"region","aria-label":o.replace("{hotkey}",N),tabIndex:-1,style:{pointerEvents:C?void 0:"none"},children:[C&&e.jsx(wp,{ref:f,onFocusFromOutsideViewport:()=>{const k=g({tabbingDirection:"forwards"});Sf(k)}}),e.jsx(jx.Slot,{scope:n,children:e.jsx(mt.ol,{tabIndex:-1,...l,ref:y})}),C&&e.jsx(wp,{ref:b,onFocusFromOutsideViewport:()=>{const k=g({tabbingDirection:"backwards"});Sf(k)}})]})});vw.displayName=gw;var yw="ToastFocusProxy",wp=p.forwardRef((s,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:a,...o}=s,l=pm(yw,n);return e.jsx(sd,{"aria-hidden":!0,tabIndex:0,...o,ref:t,style:{position:"fixed"},onFocus:d=>{const u=d.relatedTarget;!l.viewport?.contains(u)&&a()}})});wp.displayName=yw;var xm="Toast",XS="toast.swipeStart",ZS="toast.swipeMove",JS="toast.swipeCancel",e3="toast.swipeEnd",bw=p.forwardRef((s,t)=>{const{forceMount:n,open:a,defaultOpen:o,onOpenChange:l,...d}=s,[u=!0,h]=Ni({prop:a,defaultProp:o,onChange:l});return e.jsx(bo,{present:n||u,children:e.jsx(n3,{open:u,...d,ref:t,onClose:()=>h(!1),onPause:kn(s.onPause),onResume:kn(s.onResume),onSwipeStart:it(s.onSwipeStart,f=>{f.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:it(s.onSwipeMove,f=>{const{x:b,y:v}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","move"),f.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${b}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${v}px`)}),onSwipeCancel:it(s.onSwipeCancel,f=>{f.currentTarget.setAttribute("data-swipe","cancel"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:it(s.onSwipeEnd,f=>{const{x:b,y:v}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","end"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${b}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${v}px`),h(!1)})})})});bw.displayName=xm;var[t3,s3]=pw(xm,{onClose(){}}),n3=p.forwardRef((s,t)=>{const{__scopeToast:n,type:a="foreground",duration:o,open:l,onClose:d,onEscapeKeyDown:u,onPause:h,onResume:f,onSwipeStart:b,onSwipeMove:v,onSwipeCancel:y,onSwipeEnd:N,...C}=s,g=pm(xm,n),[k,A]=p.useState(null),E=Yt(t,V=>A(V)),S=p.useRef(null),R=p.useRef(null),H=o||g.duration,re=p.useRef(0),K=p.useRef(H),ee=p.useRef(0),{onToastAdd:me,onToastRemove:pe}=g,L=kn(()=>{k?.contains(document.activeElement)&&g.viewport?.focus(),d()}),X=p.useCallback(V=>{!V||V===1/0||(window.clearTimeout(ee.current),re.current=new Date().getTime(),ee.current=window.setTimeout(L,V))},[L]);p.useEffect(()=>{const V=g.viewport;if(V){const se=()=>{X(K.current),f?.()},I=()=>{const O=new Date().getTime()-re.current;K.current=K.current-O,window.clearTimeout(ee.current),h?.()};return V.addEventListener(yp,I),V.addEventListener(bp,se),()=>{V.removeEventListener(yp,I),V.removeEventListener(bp,se)}}},[g.viewport,H,h,f,X]),p.useEffect(()=>{l&&!g.isClosePausedRef.current&&X(H)},[l,H,g.isClosePausedRef,X]),p.useEffect(()=>(me(),()=>pe()),[me,pe]);const z=p.useMemo(()=>k?Ew(k):null,[k]);return g.viewport?e.jsxs(e.Fragment,{children:[z&&e.jsx(r3,{__scopeToast:n,role:"status","aria-live":a==="foreground"?"assertive":"polite","aria-atomic":!0,children:z}),e.jsx(t3,{scope:n,onClose:L,children:Rl.createPortal(e.jsx(jx.ItemSlot,{scope:n,children:e.jsx($S,{asChild:!0,onEscapeKeyDown:it(u,()=>{g.isFocusedToastEscapeKeyDownRef.current||L(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:e.jsx(mt.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":l?"open":"closed","data-swipe-direction":g.swipeDirection,...C,ref:E,style:{userSelect:"none",touchAction:"none",...s.style},onKeyDown:it(s.onKeyDown,V=>{V.key==="Escape"&&(u?.(V.nativeEvent),V.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,L()))}),onPointerDown:it(s.onPointerDown,V=>{V.button===0&&(S.current={x:V.clientX,y:V.clientY})}),onPointerMove:it(s.onPointerMove,V=>{if(!S.current)return;const se=V.clientX-S.current.x,I=V.clientY-S.current.y,O=!!R.current,T=["left","right"].includes(g.swipeDirection),Y=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,Q=T?Y(0,se):0,F=T?0:Y(0,I),te=V.pointerType==="touch"?10:2,B={x:Q,y:F},U={originalEvent:V,delta:B};O?(R.current=B,iu(ZS,v,U,{discrete:!1})):iy(B,g.swipeDirection,te)?(R.current=B,iu(XS,b,U,{discrete:!1}),V.target.setPointerCapture(V.pointerId)):(Math.abs(se)>te||Math.abs(I)>te)&&(S.current=null)}),onPointerUp:it(s.onPointerUp,V=>{const se=R.current,I=V.target;if(I.hasPointerCapture(V.pointerId)&&I.releasePointerCapture(V.pointerId),R.current=null,S.current=null,se){const O=V.currentTarget,T={originalEvent:V,delta:se};iy(se,g.swipeDirection,g.swipeThreshold)?iu(e3,N,T,{discrete:!0}):iu(JS,y,T,{discrete:!0}),O.addEventListener("click",Y=>Y.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),r3=s=>{const{__scopeToast:t,children:n,...a}=s,o=pm(xm,t),[l,d]=p.useState(!1),[u,h]=p.useState(!1);return o3(()=>d(!0)),p.useEffect(()=>{const f=window.setTimeout(()=>h(!0),1e3);return()=>window.clearTimeout(f)},[]),u?null:e.jsx(fm,{asChild:!0,children:e.jsx(sd,{...a,children:l&&e.jsxs(e.Fragment,{children:[o.label," ",n]})})})},a3="ToastTitle",ww=p.forwardRef((s,t)=>{const{__scopeToast:n,...a}=s;return e.jsx(mt.div,{...a,ref:t})});ww.displayName=a3;var i3="ToastDescription",jw=p.forwardRef((s,t)=>{const{__scopeToast:n,...a}=s;return e.jsx(mt.div,{...a,ref:t})});jw.displayName=i3;var Nw="ToastAction",kw=p.forwardRef((s,t)=>{const{altText:n,...a}=s;return n.trim()?e.jsx(Sw,{altText:n,asChild:!0,children:e.jsx(Nx,{...a,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Nw}\`. Expected non-empty \`string\`.`),null)});kw.displayName=Nw;var Cw="ToastClose",Nx=p.forwardRef((s,t)=>{const{__scopeToast:n,...a}=s,o=s3(Cw,n);return e.jsx(Sw,{asChild:!0,children:e.jsx(mt.button,{type:"button",...a,ref:t,onClick:it(s.onClick,o.onClose)})})});Nx.displayName=Cw;var Sw=p.forwardRef((s,t)=>{const{__scopeToast:n,altText:a,...o}=s;return e.jsx(mt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":a||void 0,...o,ref:t})});function Ew(s){const t=[];return Array.from(s.childNodes).forEach(a=>{if(a.nodeType===a.TEXT_NODE&&a.textContent&&t.push(a.textContent),l3(a)){const o=a.ariaHidden||a.hidden||a.style.display==="none",l=a.dataset.radixToastAnnounceExclude==="";if(!o)if(l){const d=a.dataset.radixToastAnnounceAlt;d&&t.push(d)}else t.push(...Ew(a))}}),t}function iu(s,t,n,{discrete:a}){const o=n.originalEvent.currentTarget,l=new CustomEvent(s,{bubbles:!0,cancelable:!0,detail:n});t&&o.addEventListener(s,t,{once:!0}),a?uw(o,l):o.dispatchEvent(l)}var iy=(s,t,n=0)=>{const a=Math.abs(s.x),o=Math.abs(s.y),l=a>o;return t==="left"||t==="right"?l&&a>n:!l&&o>n};function o3(s=()=>{}){const t=kn(s);zs(()=>{let n=0,a=0;return n=window.requestAnimationFrame(()=>a=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(a)}},[t])}function l3(s){return s.nodeType===s.ELEMENT_NODE}function c3(s){const t=[],n=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const o=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||o?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Sf(s){const t=document.activeElement;return s.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var d3=xw,Tw=vw,Aw=bw,Pw=ww,Rw=jw,Iw=kw,Ow=Nx;function _w(s){var t,n,a="";if(typeof s=="string"||typeof s=="number")a+=s;else if(typeof s=="object")if(Array.isArray(s)){var o=s.length;for(t=0;t<o;t++)s[t]&&(n=_w(s[t]))&&(a&&(a+=" "),a+=n)}else for(n in s)s[n]&&(a&&(a+=" "),a+=n);return a}function Lw(){for(var s,t,n=0,a="",o=arguments.length;n<o;n++)(s=arguments[n])&&(t=_w(s))&&(a&&(a+=" "),a+=t);return a}const oy=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,ly=Lw,Il=(s,t)=>n=>{var a;if(t?.variants==null)return ly(s,n?.class,n?.className);const{variants:o,defaultVariants:l}=t,d=Object.keys(o).map(f=>{const b=n?.[f],v=l?.[f];if(b===null)return null;const y=oy(b)||oy(v);return o[f][y]}),u=n&&Object.entries(n).reduce((f,b)=>{let[v,y]=b;return y===void 0||(f[v]=y),f},{}),h=t==null||(a=t.compoundVariants)===null||a===void 0?void 0:a.reduce((f,b)=>{let{class:v,className:y,...N}=b;return Object.entries(N).every(C=>{let[g,k]=C;return Array.isArray(k)?k.includes({...l,...u}[g]):{...l,...u}[g]===k})?[...f,v,y]:f},[]);return ly(s,d,h,n?.class,n?.className)};const u3=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Mw=(...s)=>s.filter((t,n,a)=>!!t&&a.indexOf(t)===n).join(" ");var m3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const h3=p.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:o="",children:l,iconNode:d,...u},h)=>p.createElement("svg",{ref:h,...m3,width:t,height:t,stroke:s,strokeWidth:a?Number(n)*24/Number(t):n,className:Mw("lucide",o),...u},[...d.map(([f,b])=>p.createElement(f,b)),...Array.isArray(l)?l:[l]]));const ue=(s,t)=>{const n=p.forwardRef(({className:a,...o},l)=>p.createElement(h3,{ref:l,iconNode:t,className:Mw(`lucide-${u3(s)}`,a),...o}));return n.displayName=`${s}`,n};const jl=ue("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);const f3=ue("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);const _a=ue("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const ml=ue("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const p3=ue("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);const kx=ue("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);const cy=ue("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);const _c=ue("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]);const Bu=ue("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);const ki=ue("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);const x3=ue("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);const zc=ue("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);const g3=ue("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);const hl=ue("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const Ru=ue("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);const Lc=ue("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);const Cx=ue("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const dy=ue("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const uy=ue("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const Kt=ue("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const ua=ue("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const Sx=ue("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const wo=ue("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const Mc=ue("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const yn=ue("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const Ss=ue("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const Ci=ue("CircleDot",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);const Dw=ue("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const v3=ue("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);const ao=ue("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const $w=ue("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const y3=ue("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);const Gt=ue("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const qw=ue("CodeXml",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]);const b3=ue("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);const w3=ue("Container",[["path",{d:"M22 7.7c0-.6-.4-1.2-.8-1.5l-6.3-3.9a1.72 1.72 0 0 0-1.7 0l-10.3 6c-.5.2-.9.8-.9 1.4v6.6c0 .5.4 1.2.8 1.5l6.3 3.9a1.72 1.72 0 0 0 1.7 0l10.3-6c.5-.3.9-1 .9-1.5Z",key:"1t2lqe"}],["path",{d:"M10 21.9V14L2.1 9.1",key:"o7czzq"}],["path",{d:"m10 14 11.9-6.9",key:"zm5e20"}],["path",{d:"M14 19.8v-8.1",key:"159ecu"}],["path",{d:"M18 17.5V9.4",key:"11uown"}]]);const Ps=ue("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);const jp=ue("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);const yi=ue("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);const Fw=ue("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);const Fn=ue("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);const co=ue("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const j3=ue("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);const tn=ue("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);const gm=ue("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);const jo=ue("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const my=ue("FileCode2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m5 12-3 3 3 3",key:"oke12k"}],["path",{d:"m9 18 3-3-3-3",key:"112psh"}]]);const hy=ue("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);const Vt=ue("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const zw=ue("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);const N3=ue("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const io=ue("FolderGit2",[["path",{d:"M9 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v5",key:"1w6njk"}],["circle",{cx:"13",cy:"12",r:"2",key:"1j92g6"}],["path",{d:"M18 19c-2.8 0-5-2.2-5-5v8",key:"pkpw2h"}],["circle",{cx:"20",cy:"19",r:"2",key:"1obnsp"}]]);const $n=ue("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);const Hu=ue("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);const Ku=ue("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);const k3=ue("GitFork",[["circle",{cx:"12",cy:"18",r:"3",key:"1mpf1b"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["path",{d:"M18 9v2c0 .6-.4 1-1 1H7c-.6 0-1-.4-1-1V9",key:"1uq4wg"}],["path",{d:"M12 12v3",key:"158kv8"}]]);const no=ue("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);const jn=ue("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);const C3=ue("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);const S3=ue("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);const fy=ue("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);const Uw=ue("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);const E3=ue("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);const T3=ue("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);const py=ue("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);const xy=ue("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);const No=ue("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const A3=ue("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);const Bw=ue("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const P3=ue("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);const uo=ue("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);const Hw=ue("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);const Wu=ue("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);const ro=ue("LifeBuoy",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.93 4.93 4.24 4.24",key:"1ymg45"}],["path",{d:"m14.83 9.17 4.24-4.24",key:"1cb5xl"}],["path",{d:"m14.83 14.83 4.24 4.24",key:"q42g0n"}],["path",{d:"m9.17 14.83-4.24 4.24",key:"bqpfvv"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]]);const R3=ue("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);const fl=ue("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);const Qe=ue("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const Np=ue("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const I3=ue("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);const Kw=ue("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const Fs=ue("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const cl=ue("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const O3=ue("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);const gy=ue("MemoryStick",[["path",{d:"M6 19v-3",key:"1nvgqn"}],["path",{d:"M10 19v-3",key:"iu8nkm"}],["path",{d:"M14 19v-3",key:"kcehxu"}],["path",{d:"M18 19v-3",key:"1vh91z"}],["path",{d:"M8 11V9",key:"63erz4"}],["path",{d:"M16 11V9",key:"fru6f3"}],["path",{d:"M12 11V9",key:"ha00sb"}],["path",{d:"M2 15h20",key:"16ne18"}],["path",{d:"M2 7a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v1.1a2 2 0 0 0 0 3.837V17a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-5.1a2 2 0 0 0 0-3.837Z",key:"lhddv3"}]]);const _3=ue("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const L3=ue("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);const vy=ue("MessageSquareMore",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M16 10h.01",key:"1m94wz"}]]);const Mt=ue("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const M3=ue("MessagesSquare",[["path",{d:"M14 9a2 2 0 0 1-2 2H6l-4 4V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2z",key:"p1xzt8"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v11l-4-4h-6a2 2 0 0 1-2-2v-1",key:"1cx29u"}]]);const D3=ue("Milestone",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M12 3v3",key:"1n5kay"}],["path",{d:"M4 6a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h13a2 2 0 0 0 1.152-.365l3.424-2.317a1 1 0 0 0 0-1.635l-3.424-2.318A2 2 0 0 0 17 6z",key:"1btarq"}]]);const yy=ue("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);const Ww=ue("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);const $3=ue("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);const by=ue("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);const Ex=ue("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);const q3=ue("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);const Uc=ue("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);const Vw=ue("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);const F3=ue("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]);const ia=ue("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);const Bc=ue("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);const z3=ue("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);const wy=ue("Plug",[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M9 8V2",key:"14iosj"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z",key:"osxo6l"}]]);const Qt=ue("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const ou=ue("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);const La=ue("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);const Ol=ue("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const Ma=ue("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);const vm=ue("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const Tx=ue("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);const jy=ue("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);const sn=ue("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const bs=ue("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);const Dn=ue("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);const Ny=ue("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);const Gw=ue("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const U3=ue("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);const ky=ue("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);const Hc=ue("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const B3=ue("ShieldOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]]);const wn=ue("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);const H3=ue("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);const Qw=ue("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);const Si=ue("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);const Ia=ue("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);const K3=ue("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);const Nl=ue("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);const kp=ue("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);const kl=ue("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);const Yw=ue("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);const Xw=ue("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);const Zw=ue("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);const ps=ue("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const W3=ue("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);const Jw=ue("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const qn=ue("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const V3=ue("Unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]]);const Cp=ue("Unplug",[["path",{d:"m19 5 3-3",key:"yk6iyv"}],["path",{d:"m2 22 3-3",key:"19mgm9"}],["path",{d:"M6.3 20.3a2.4 2.4 0 0 0 3.4 0L12 18l-6-6-2.3 2.3a2.4 2.4 0 0 0 0 3.4Z",key:"goz73y"}],["path",{d:"M7.5 13.5 10 11",key:"7xgeeb"}],["path",{d:"M10.5 16.5 13 14",key:"10btkg"}],["path",{d:"m12 6 6 6 2.3-2.3a2.4 2.4 0 0 0 0-3.4l-2.6-2.6a2.4 2.4 0 0 0-3.4 0Z",key:"1snsnr"}]]);const Vu=ue("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const ej=ue("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);const Cy=ue("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);const tj=ue("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const Ei=ue("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const Ax=ue("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);const G3=ue("Webhook",[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]]);const Sy=ue("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);const Q3=ue("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]);const sj=ue("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);const sr=ue("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const Jn=ue("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Px="-",Y3=s=>{const t=Z3(s),{conflictingClassGroups:n,conflictingClassGroupModifiers:a}=s;return{getClassGroupId:d=>{const u=d.split(Px);return u[0]===""&&u.length!==1&&u.shift(),nj(u,t)||X3(d)},getConflictingClassGroupIds:(d,u)=>{const h=n[d]||[];return u&&a[d]?[...h,...a[d]]:h}}},nj=(s,t)=>{if(s.length===0)return t.classGroupId;const n=s[0],a=t.nextPart.get(n),o=a?nj(s.slice(1),a):void 0;if(o)return o;if(t.validators.length===0)return;const l=s.join(Px);return t.validators.find(({validator:d})=>d(l))?.classGroupId},Ey=/^\[(.+)\]$/,X3=s=>{if(Ey.test(s)){const t=Ey.exec(s)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},Z3=s=>{const{theme:t,prefix:n}=s,a={nextPart:new Map,validators:[]};return eE(Object.entries(s.classGroups),n).forEach(([l,d])=>{Sp(d,a,l,t)}),a},Sp=(s,t,n,a)=>{s.forEach(o=>{if(typeof o=="string"){const l=o===""?t:Ty(t,o);l.classGroupId=n;return}if(typeof o=="function"){if(J3(o)){Sp(o(a),t,n,a);return}t.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([l,d])=>{Sp(d,Ty(t,l),n,a)})})},Ty=(s,t)=>{let n=s;return t.split(Px).forEach(a=>{n.nextPart.has(a)||n.nextPart.set(a,{nextPart:new Map,validators:[]}),n=n.nextPart.get(a)}),n},J3=s=>s.isThemeGetter,eE=(s,t)=>t?s.map(([n,a])=>{const o=a.map(l=>typeof l=="string"?t+l:typeof l=="object"?Object.fromEntries(Object.entries(l).map(([d,u])=>[t+d,u])):l);return[n,o]}):s,tE=s=>{if(s<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,a=new Map;const o=(l,d)=>{n.set(l,d),t++,t>s&&(t=0,a=n,n=new Map)};return{get(l){let d=n.get(l);if(d!==void 0)return d;if((d=a.get(l))!==void 0)return o(l,d),d},set(l,d){n.has(l)?n.set(l,d):o(l,d)}}},rj="!",sE=s=>{const{separator:t,experimentalParseClassName:n}=s,a=t.length===1,o=t[0],l=t.length,d=u=>{const h=[];let f=0,b=0,v;for(let k=0;k<u.length;k++){let A=u[k];if(f===0){if(A===o&&(a||u.slice(k,k+l)===t)){h.push(u.slice(b,k)),b=k+l;continue}if(A==="/"){v=k;continue}}A==="["?f++:A==="]"&&f--}const y=h.length===0?u:u.substring(b),N=y.startsWith(rj),C=N?y.substring(1):y,g=v&&v>b?v-b:void 0;return{modifiers:h,hasImportantModifier:N,baseClassName:C,maybePostfixModifierPosition:g}};return n?u=>n({className:u,parseClassName:d}):d},nE=s=>{if(s.length<=1)return s;const t=[];let n=[];return s.forEach(a=>{a[0]==="["?(t.push(...n.sort(),a),n=[]):n.push(a)}),t.push(...n.sort()),t},rE=s=>({cache:tE(s.cacheSize),parseClassName:sE(s),...Y3(s)}),aE=/\s+/,iE=(s,t)=>{const{parseClassName:n,getClassGroupId:a,getConflictingClassGroupIds:o}=t,l=[],d=s.trim().split(aE);let u="";for(let h=d.length-1;h>=0;h-=1){const f=d[h],{modifiers:b,hasImportantModifier:v,baseClassName:y,maybePostfixModifierPosition:N}=n(f);let C=!!N,g=a(C?y.substring(0,N):y);if(!g){if(!C){u=f+(u.length>0?" "+u:u);continue}if(g=a(y),!g){u=f+(u.length>0?" "+u:u);continue}C=!1}const k=nE(b).join(":"),A=v?k+rj:k,E=A+g;if(l.includes(E))continue;l.push(E);const S=o(g,C);for(let R=0;R<S.length;++R){const H=S[R];l.push(A+H)}u=f+(u.length>0?" "+u:u)}return u};function oE(){let s=0,t,n,a="";for(;s<arguments.length;)(t=arguments[s++])&&(n=aj(t))&&(a&&(a+=" "),a+=n);return a}const aj=s=>{if(typeof s=="string")return s;let t,n="";for(let a=0;a<s.length;a++)s[a]&&(t=aj(s[a]))&&(n&&(n+=" "),n+=t);return n};function lE(s,...t){let n,a,o,l=d;function d(h){const f=t.reduce((b,v)=>v(b),s());return n=rE(f),a=n.cache.get,o=n.cache.set,l=u,u(h)}function u(h){const f=a(h);if(f)return f;const b=iE(h,n);return o(h,b),b}return function(){return l(oE.apply(null,arguments))}}const as=s=>{const t=n=>n[s]||[];return t.isThemeGetter=!0,t},ij=/^\[(?:([a-z-]+):)?(.+)\]$/i,cE=/^\d+\/\d+$/,dE=new Set(["px","full","screen"]),uE=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,mE=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,hE=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,fE=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,pE=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Pa=s=>pl(s)||dE.has(s)||cE.test(s),mi=s=>_l(s,"length",NE),pl=s=>!!s&&!Number.isNaN(Number(s)),Ef=s=>_l(s,"number",pl),vc=s=>!!s&&Number.isInteger(Number(s)),xE=s=>s.endsWith("%")&&pl(s.slice(0,-1)),ft=s=>ij.test(s),hi=s=>uE.test(s),gE=new Set(["length","size","percentage"]),vE=s=>_l(s,gE,oj),yE=s=>_l(s,"position",oj),bE=new Set(["image","url"]),wE=s=>_l(s,bE,CE),jE=s=>_l(s,"",kE),yc=()=>!0,_l=(s,t,n)=>{const a=ij.exec(s);return a?a[1]?typeof t=="string"?a[1]===t:t.has(a[1]):n(a[2]):!1},NE=s=>mE.test(s)&&!hE.test(s),oj=()=>!1,kE=s=>fE.test(s),CE=s=>pE.test(s),SE=()=>{const s=as("colors"),t=as("spacing"),n=as("blur"),a=as("brightness"),o=as("borderColor"),l=as("borderRadius"),d=as("borderSpacing"),u=as("borderWidth"),h=as("contrast"),f=as("grayscale"),b=as("hueRotate"),v=as("invert"),y=as("gap"),N=as("gradientColorStops"),C=as("gradientColorStopPositions"),g=as("inset"),k=as("margin"),A=as("opacity"),E=as("padding"),S=as("saturate"),R=as("scale"),H=as("sepia"),re=as("skew"),K=as("space"),ee=as("translate"),me=()=>["auto","contain","none"],pe=()=>["auto","hidden","clip","visible","scroll"],L=()=>["auto",ft,t],X=()=>[ft,t],z=()=>["",Pa,mi],V=()=>["auto",pl,ft],se=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],I=()=>["solid","dashed","dotted","double","none"],O=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],T=()=>["start","end","center","between","around","evenly","stretch"],Y=()=>["","0",ft],Q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],F=()=>[pl,ft];return{cacheSize:500,separator:":",theme:{colors:[yc],spacing:[Pa,mi],blur:["none","",hi,ft],brightness:F(),borderColor:[s],borderRadius:["none","","full",hi,ft],borderSpacing:X(),borderWidth:z(),contrast:F(),grayscale:Y(),hueRotate:F(),invert:Y(),gap:X(),gradientColorStops:[s],gradientColorStopPositions:[xE,mi],inset:L(),margin:L(),opacity:F(),padding:X(),saturate:F(),scale:F(),sepia:Y(),skew:F(),space:X(),translate:X()},classGroups:{aspect:[{aspect:["auto","square","video",ft]}],container:["container"],columns:[{columns:[hi]}],"break-after":[{"break-after":Q()}],"break-before":[{"break-before":Q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...se(),ft]}],overflow:[{overflow:pe()}],"overflow-x":[{"overflow-x":pe()}],"overflow-y":[{"overflow-y":pe()}],overscroll:[{overscroll:me()}],"overscroll-x":[{"overscroll-x":me()}],"overscroll-y":[{"overscroll-y":me()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",vc,ft]}],basis:[{basis:L()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ft]}],grow:[{grow:Y()}],shrink:[{shrink:Y()}],order:[{order:["first","last","none",vc,ft]}],"grid-cols":[{"grid-cols":[yc]}],"col-start-end":[{col:["auto",{span:["full",vc,ft]},ft]}],"col-start":[{"col-start":V()}],"col-end":[{"col-end":V()}],"grid-rows":[{"grid-rows":[yc]}],"row-start-end":[{row:["auto",{span:[vc,ft]},ft]}],"row-start":[{"row-start":V()}],"row-end":[{"row-end":V()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ft]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ft]}],gap:[{gap:[y]}],"gap-x":[{"gap-x":[y]}],"gap-y":[{"gap-y":[y]}],"justify-content":[{justify:["normal",...T()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...T(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...T(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[E]}],px:[{px:[E]}],py:[{py:[E]}],ps:[{ps:[E]}],pe:[{pe:[E]}],pt:[{pt:[E]}],pr:[{pr:[E]}],pb:[{pb:[E]}],pl:[{pl:[E]}],m:[{m:[k]}],mx:[{mx:[k]}],my:[{my:[k]}],ms:[{ms:[k]}],me:[{me:[k]}],mt:[{mt:[k]}],mr:[{mr:[k]}],mb:[{mb:[k]}],ml:[{ml:[k]}],"space-x":[{"space-x":[K]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[K]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ft,t]}],"min-w":[{"min-w":[ft,t,"min","max","fit"]}],"max-w":[{"max-w":[ft,t,"none","full","min","max","fit","prose",{screen:[hi]},hi]}],h:[{h:[ft,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ft,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ft,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ft,t,"auto","min","max","fit"]}],"font-size":[{text:["base",hi,mi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ef]}],"font-family":[{font:[yc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ft]}],"line-clamp":[{"line-clamp":["none",pl,Ef]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Pa,ft]}],"list-image":[{"list-image":["none",ft]}],"list-style-type":[{list:["none","disc","decimal",ft]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[s]}],"placeholder-opacity":[{"placeholder-opacity":[A]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[s]}],"text-opacity":[{"text-opacity":[A]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...I(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Pa,mi]}],"underline-offset":[{"underline-offset":["auto",Pa,ft]}],"text-decoration-color":[{decoration:[s]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:X()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ft]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ft]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[A]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...se(),yE]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",vE]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},wE]}],"bg-color":[{bg:[s]}],"gradient-from-pos":[{from:[C]}],"gradient-via-pos":[{via:[C]}],"gradient-to-pos":[{to:[C]}],"gradient-from":[{from:[N]}],"gradient-via":[{via:[N]}],"gradient-to":[{to:[N]}],rounded:[{rounded:[l]}],"rounded-s":[{"rounded-s":[l]}],"rounded-e":[{"rounded-e":[l]}],"rounded-t":[{"rounded-t":[l]}],"rounded-r":[{"rounded-r":[l]}],"rounded-b":[{"rounded-b":[l]}],"rounded-l":[{"rounded-l":[l]}],"rounded-ss":[{"rounded-ss":[l]}],"rounded-se":[{"rounded-se":[l]}],"rounded-ee":[{"rounded-ee":[l]}],"rounded-es":[{"rounded-es":[l]}],"rounded-tl":[{"rounded-tl":[l]}],"rounded-tr":[{"rounded-tr":[l]}],"rounded-br":[{"rounded-br":[l]}],"rounded-bl":[{"rounded-bl":[l]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[A]}],"border-style":[{border:[...I(),"hidden"]}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[A]}],"divide-style":[{divide:I()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...I()]}],"outline-offset":[{"outline-offset":[Pa,ft]}],"outline-w":[{outline:[Pa,mi]}],"outline-color":[{outline:[s]}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[s]}],"ring-opacity":[{"ring-opacity":[A]}],"ring-offset-w":[{"ring-offset":[Pa,mi]}],"ring-offset-color":[{"ring-offset":[s]}],shadow:[{shadow:["","inner","none",hi,jE]}],"shadow-color":[{shadow:[yc]}],opacity:[{opacity:[A]}],"mix-blend":[{"mix-blend":[...O(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":O()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[a]}],contrast:[{contrast:[h]}],"drop-shadow":[{"drop-shadow":["","none",hi,ft]}],grayscale:[{grayscale:[f]}],"hue-rotate":[{"hue-rotate":[b]}],invert:[{invert:[v]}],saturate:[{saturate:[S]}],sepia:[{sepia:[H]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[a]}],"backdrop-contrast":[{"backdrop-contrast":[h]}],"backdrop-grayscale":[{"backdrop-grayscale":[f]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[b]}],"backdrop-invert":[{"backdrop-invert":[v]}],"backdrop-opacity":[{"backdrop-opacity":[A]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[H]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[d]}],"border-spacing-x":[{"border-spacing-x":[d]}],"border-spacing-y":[{"border-spacing-y":[d]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ft]}],duration:[{duration:F()}],ease:[{ease:["linear","in","out","in-out",ft]}],delay:[{delay:F()}],animate:[{animate:["none","spin","ping","pulse","bounce",ft]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[R]}],"scale-x":[{"scale-x":[R]}],"scale-y":[{"scale-y":[R]}],rotate:[{rotate:[vc,ft]}],"translate-x":[{"translate-x":[ee]}],"translate-y":[{"translate-y":[ee]}],"skew-x":[{"skew-x":[re]}],"skew-y":[{"skew-y":[re]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ft]}],accent:[{accent:["auto",s]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ft]}],"caret-color":[{caret:[s]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":X()}],"scroll-mx":[{"scroll-mx":X()}],"scroll-my":[{"scroll-my":X()}],"scroll-ms":[{"scroll-ms":X()}],"scroll-me":[{"scroll-me":X()}],"scroll-mt":[{"scroll-mt":X()}],"scroll-mr":[{"scroll-mr":X()}],"scroll-mb":[{"scroll-mb":X()}],"scroll-ml":[{"scroll-ml":X()}],"scroll-p":[{"scroll-p":X()}],"scroll-px":[{"scroll-px":X()}],"scroll-py":[{"scroll-py":X()}],"scroll-ps":[{"scroll-ps":X()}],"scroll-pe":[{"scroll-pe":X()}],"scroll-pt":[{"scroll-pt":X()}],"scroll-pr":[{"scroll-pr":X()}],"scroll-pb":[{"scroll-pb":X()}],"scroll-pl":[{"scroll-pl":X()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ft]}],fill:[{fill:[s,"none"]}],"stroke-w":[{stroke:[Pa,mi,Ef]}],stroke:[{stroke:[s,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},EE=lE(SE);function Ze(...s){return EE(Lw(s))}const TE=d3,lj=p.forwardRef(({className:s,...t},n)=>e.jsx(Tw,{ref:n,className:Ze("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...t}));lj.displayName=Tw.displayName;const AE=Il("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),cj=p.forwardRef(({className:s,variant:t,...n},a)=>e.jsx(Aw,{ref:a,className:Ze(AE({variant:t}),s),...n}));cj.displayName=Aw.displayName;const PE=p.forwardRef(({className:s,...t},n)=>e.jsx(Iw,{ref:n,className:Ze("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...t}));PE.displayName=Iw.displayName;const dj=p.forwardRef(({className:s,...t},n)=>e.jsx(Ow,{ref:n,className:Ze("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...t,children:e.jsx(sr,{className:"h-4 w-4"})}));dj.displayName=Ow.displayName;const uj=p.forwardRef(({className:s,...t},n)=>e.jsx(Pw,{ref:n,className:Ze("text-sm font-semibold",s),...t}));uj.displayName=Pw.displayName;const mj=p.forwardRef(({className:s,...t},n)=>e.jsx(Rw,{ref:n,className:Ze("text-sm opacity-90",s),...t}));mj.displayName=Rw.displayName;function RE(){const{toasts:s}=pt();return e.jsxs(TE,{children:[s.map(function({id:t,title:n,description:a,action:o,...l}){return e.jsxs(cj,{...l,children:[e.jsxs("div",{className:"grid gap-1",children:[n&&e.jsx(uj,{children:n}),a&&e.jsx(mj,{children:a})]}),o,e.jsx(dj,{})]},t)}),e.jsx(lj,{})]})}var IE=cx[" useId ".trim().toString()]||(()=>{}),OE=0;function Oa(s){const[t,n]=p.useState(IE());return zs(()=>{n(a=>a??String(OE++))},[s]),t?`radix-${t}`:""}const _E=["top","right","bottom","left"],Ti=Math.min,Xn=Math.max,Gu=Math.round,lu=Math.floor,oa=s=>({x:s,y:s}),LE={left:"right",right:"left",bottom:"top",top:"bottom"},ME={start:"end",end:"start"};function Ep(s,t,n){return Xn(s,Ti(t,n))}function Da(s,t){return typeof s=="function"?s(t):s}function $a(s){return s.split("-")[0]}function Ll(s){return s.split("-")[1]}function Rx(s){return s==="x"?"y":"x"}function Ix(s){return s==="y"?"height":"width"}function Ai(s){return["top","bottom"].includes($a(s))?"y":"x"}function Ox(s){return Rx(Ai(s))}function DE(s,t,n){n===void 0&&(n=!1);const a=Ll(s),o=Ox(s),l=Ix(o);let d=o==="x"?a===(n?"end":"start")?"right":"left":a==="start"?"bottom":"top";return t.reference[l]>t.floating[l]&&(d=Qu(d)),[d,Qu(d)]}function $E(s){const t=Qu(s);return[Tp(s),t,Tp(t)]}function Tp(s){return s.replace(/start|end/g,t=>ME[t])}function qE(s,t,n){const a=["left","right"],o=["right","left"],l=["top","bottom"],d=["bottom","top"];switch(s){case"top":case"bottom":return n?t?o:a:t?a:o;case"left":case"right":return t?l:d;default:return[]}}function FE(s,t,n,a){const o=Ll(s);let l=qE($a(s),n==="start",a);return o&&(l=l.map(d=>d+"-"+o),t&&(l=l.concat(l.map(Tp)))),l}function Qu(s){return s.replace(/left|right|bottom|top/g,t=>LE[t])}function zE(s){return{top:0,right:0,bottom:0,left:0,...s}}function hj(s){return typeof s!="number"?zE(s):{top:s,right:s,bottom:s,left:s}}function Yu(s){const{x:t,y:n,width:a,height:o}=s;return{width:a,height:o,top:n,left:t,right:t+a,bottom:n+o,x:t,y:n}}function Ay(s,t,n){let{reference:a,floating:o}=s;const l=Ai(t),d=Ox(t),u=Ix(d),h=$a(t),f=l==="y",b=a.x+a.width/2-o.width/2,v=a.y+a.height/2-o.height/2,y=a[u]/2-o[u]/2;let N;switch(h){case"top":N={x:b,y:a.y-o.height};break;case"bottom":N={x:b,y:a.y+a.height};break;case"right":N={x:a.x+a.width,y:v};break;case"left":N={x:a.x-o.width,y:v};break;default:N={x:a.x,y:a.y}}switch(Ll(t)){case"start":N[d]-=y*(n&&f?-1:1);break;case"end":N[d]+=y*(n&&f?-1:1);break}return N}const UE=async(s,t,n)=>{const{placement:a="bottom",strategy:o="absolute",middleware:l=[],platform:d}=n,u=l.filter(Boolean),h=await(d.isRTL==null?void 0:d.isRTL(t));let f=await d.getElementRects({reference:s,floating:t,strategy:o}),{x:b,y:v}=Ay(f,a,h),y=a,N={},C=0;for(let g=0;g<u.length;g++){const{name:k,fn:A}=u[g],{x:E,y:S,data:R,reset:H}=await A({x:b,y:v,initialPlacement:a,placement:y,strategy:o,middlewareData:N,rects:f,platform:d,elements:{reference:s,floating:t}});b=E??b,v=S??v,N={...N,[k]:{...N[k],...R}},H&&C<=50&&(C++,typeof H=="object"&&(H.placement&&(y=H.placement),H.rects&&(f=H.rects===!0?await d.getElementRects({reference:s,floating:t,strategy:o}):H.rects),{x:b,y:v}=Ay(f,y,h)),g=-1)}return{x:b,y:v,placement:y,strategy:o,middlewareData:N}};async function Kc(s,t){var n;t===void 0&&(t={});const{x:a,y:o,platform:l,rects:d,elements:u,strategy:h}=s,{boundary:f="clippingAncestors",rootBoundary:b="viewport",elementContext:v="floating",altBoundary:y=!1,padding:N=0}=Da(t,s),C=hj(N),k=u[y?v==="floating"?"reference":"floating":v],A=Yu(await l.getClippingRect({element:(n=await(l.isElement==null?void 0:l.isElement(k)))==null||n?k:k.contextElement||await(l.getDocumentElement==null?void 0:l.getDocumentElement(u.floating)),boundary:f,rootBoundary:b,strategy:h})),E=v==="floating"?{x:a,y:o,width:d.floating.width,height:d.floating.height}:d.reference,S=await(l.getOffsetParent==null?void 0:l.getOffsetParent(u.floating)),R=await(l.isElement==null?void 0:l.isElement(S))?await(l.getScale==null?void 0:l.getScale(S))||{x:1,y:1}:{x:1,y:1},H=Yu(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:E,offsetParent:S,strategy:h}):E);return{top:(A.top-H.top+C.top)/R.y,bottom:(H.bottom-A.bottom+C.bottom)/R.y,left:(A.left-H.left+C.left)/R.x,right:(H.right-A.right+C.right)/R.x}}const BE=s=>({name:"arrow",options:s,async fn(t){const{x:n,y:a,placement:o,rects:l,platform:d,elements:u,middlewareData:h}=t,{element:f,padding:b=0}=Da(s,t)||{};if(f==null)return{};const v=hj(b),y={x:n,y:a},N=Ox(o),C=Ix(N),g=await d.getDimensions(f),k=N==="y",A=k?"top":"left",E=k?"bottom":"right",S=k?"clientHeight":"clientWidth",R=l.reference[C]+l.reference[N]-y[N]-l.floating[C],H=y[N]-l.reference[N],re=await(d.getOffsetParent==null?void 0:d.getOffsetParent(f));let K=re?re[S]:0;(!K||!await(d.isElement==null?void 0:d.isElement(re)))&&(K=u.floating[S]||l.floating[C]);const ee=R/2-H/2,me=K/2-g[C]/2-1,pe=Ti(v[A],me),L=Ti(v[E],me),X=pe,z=K-g[C]-L,V=K/2-g[C]/2+ee,se=Ep(X,V,z),I=!h.arrow&&Ll(o)!=null&&V!==se&&l.reference[C]/2-(V<X?pe:L)-g[C]/2<0,O=I?V<X?V-X:V-z:0;return{[N]:y[N]+O,data:{[N]:se,centerOffset:V-se-O,...I&&{alignmentOffset:O}},reset:I}}}),HE=function(s){return s===void 0&&(s={}),{name:"flip",options:s,async fn(t){var n,a;const{placement:o,middlewareData:l,rects:d,initialPlacement:u,platform:h,elements:f}=t,{mainAxis:b=!0,crossAxis:v=!0,fallbackPlacements:y,fallbackStrategy:N="bestFit",fallbackAxisSideDirection:C="none",flipAlignment:g=!0,...k}=Da(s,t);if((n=l.arrow)!=null&&n.alignmentOffset)return{};const A=$a(o),E=Ai(u),S=$a(u)===u,R=await(h.isRTL==null?void 0:h.isRTL(f.floating)),H=y||(S||!g?[Qu(u)]:$E(u)),re=C!=="none";!y&&re&&H.push(...FE(u,g,C,R));const K=[u,...H],ee=await Kc(t,k),me=[];let pe=((a=l.flip)==null?void 0:a.overflows)||[];if(b&&me.push(ee[A]),v){const V=DE(o,d,R);me.push(ee[V[0]],ee[V[1]])}if(pe=[...pe,{placement:o,overflows:me}],!me.every(V=>V<=0)){var L,X;const V=(((L=l.flip)==null?void 0:L.index)||0)+1,se=K[V];if(se)return{data:{index:V,overflows:pe},reset:{placement:se}};let I=(X=pe.filter(O=>O.overflows[0]<=0).sort((O,T)=>O.overflows[1]-T.overflows[1])[0])==null?void 0:X.placement;if(!I)switch(N){case"bestFit":{var z;const O=(z=pe.filter(T=>{if(re){const Y=Ai(T.placement);return Y===E||Y==="y"}return!0}).map(T=>[T.placement,T.overflows.filter(Y=>Y>0).reduce((Y,Q)=>Y+Q,0)]).sort((T,Y)=>T[1]-Y[1])[0])==null?void 0:z[0];O&&(I=O);break}case"initialPlacement":I=u;break}if(o!==I)return{reset:{placement:I}}}return{}}}};function Py(s,t){return{top:s.top-t.height,right:s.right-t.width,bottom:s.bottom-t.height,left:s.left-t.width}}function Ry(s){return _E.some(t=>s[t]>=0)}const KE=function(s){return s===void 0&&(s={}),{name:"hide",options:s,async fn(t){const{rects:n}=t,{strategy:a="referenceHidden",...o}=Da(s,t);switch(a){case"referenceHidden":{const l=await Kc(t,{...o,elementContext:"reference"}),d=Py(l,n.reference);return{data:{referenceHiddenOffsets:d,referenceHidden:Ry(d)}}}case"escaped":{const l=await Kc(t,{...o,altBoundary:!0}),d=Py(l,n.floating);return{data:{escapedOffsets:d,escaped:Ry(d)}}}default:return{}}}}};async function WE(s,t){const{placement:n,platform:a,elements:o}=s,l=await(a.isRTL==null?void 0:a.isRTL(o.floating)),d=$a(n),u=Ll(n),h=Ai(n)==="y",f=["left","top"].includes(d)?-1:1,b=l&&h?-1:1,v=Da(t,s);let{mainAxis:y,crossAxis:N,alignmentAxis:C}=typeof v=="number"?{mainAxis:v,crossAxis:0,alignmentAxis:null}:{mainAxis:v.mainAxis||0,crossAxis:v.crossAxis||0,alignmentAxis:v.alignmentAxis};return u&&typeof C=="number"&&(N=u==="end"?C*-1:C),h?{x:N*b,y:y*f}:{x:y*f,y:N*b}}const VE=function(s){return s===void 0&&(s=0),{name:"offset",options:s,async fn(t){var n,a;const{x:o,y:l,placement:d,middlewareData:u}=t,h=await WE(t,s);return d===((n=u.offset)==null?void 0:n.placement)&&(a=u.arrow)!=null&&a.alignmentOffset?{}:{x:o+h.x,y:l+h.y,data:{...h,placement:d}}}}},GE=function(s){return s===void 0&&(s={}),{name:"shift",options:s,async fn(t){const{x:n,y:a,placement:o}=t,{mainAxis:l=!0,crossAxis:d=!1,limiter:u={fn:k=>{let{x:A,y:E}=k;return{x:A,y:E}}},...h}=Da(s,t),f={x:n,y:a},b=await Kc(t,h),v=Ai($a(o)),y=Rx(v);let N=f[y],C=f[v];if(l){const k=y==="y"?"top":"left",A=y==="y"?"bottom":"right",E=N+b[k],S=N-b[A];N=Ep(E,N,S)}if(d){const k=v==="y"?"top":"left",A=v==="y"?"bottom":"right",E=C+b[k],S=C-b[A];C=Ep(E,C,S)}const g=u.fn({...t,[y]:N,[v]:C});return{...g,data:{x:g.x-n,y:g.y-a,enabled:{[y]:l,[v]:d}}}}}},QE=function(s){return s===void 0&&(s={}),{options:s,fn(t){const{x:n,y:a,placement:o,rects:l,middlewareData:d}=t,{offset:u=0,mainAxis:h=!0,crossAxis:f=!0}=Da(s,t),b={x:n,y:a},v=Ai(o),y=Rx(v);let N=b[y],C=b[v];const g=Da(u,t),k=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(h){const S=y==="y"?"height":"width",R=l.reference[y]-l.floating[S]+k.mainAxis,H=l.reference[y]+l.reference[S]-k.mainAxis;N<R?N=R:N>H&&(N=H)}if(f){var A,E;const S=y==="y"?"width":"height",R=["top","left"].includes($a(o)),H=l.reference[v]-l.floating[S]+(R&&((A=d.offset)==null?void 0:A[v])||0)+(R?0:k.crossAxis),re=l.reference[v]+l.reference[S]+(R?0:((E=d.offset)==null?void 0:E[v])||0)-(R?k.crossAxis:0);C<H?C=H:C>re&&(C=re)}return{[y]:N,[v]:C}}}},YE=function(s){return s===void 0&&(s={}),{name:"size",options:s,async fn(t){var n,a;const{placement:o,rects:l,platform:d,elements:u}=t,{apply:h=()=>{},...f}=Da(s,t),b=await Kc(t,f),v=$a(o),y=Ll(o),N=Ai(o)==="y",{width:C,height:g}=l.floating;let k,A;v==="top"||v==="bottom"?(k=v,A=y===(await(d.isRTL==null?void 0:d.isRTL(u.floating))?"start":"end")?"left":"right"):(A=v,k=y==="end"?"top":"bottom");const E=g-b.top-b.bottom,S=C-b.left-b.right,R=Ti(g-b[k],E),H=Ti(C-b[A],S),re=!t.middlewareData.shift;let K=R,ee=H;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(ee=S),(a=t.middlewareData.shift)!=null&&a.enabled.y&&(K=E),re&&!y){const pe=Xn(b.left,0),L=Xn(b.right,0),X=Xn(b.top,0),z=Xn(b.bottom,0);N?ee=C-2*(pe!==0||L!==0?pe+L:Xn(b.left,b.right)):K=g-2*(X!==0||z!==0?X+z:Xn(b.top,b.bottom))}await h({...t,availableWidth:ee,availableHeight:K});const me=await d.getDimensions(u.floating);return C!==me.width||g!==me.height?{reset:{rects:!0}}:{}}}};function ym(){return typeof window<"u"}function Ml(s){return fj(s)?(s.nodeName||"").toLowerCase():"#document"}function nr(s){var t;return(s==null||(t=s.ownerDocument)==null?void 0:t.defaultView)||window}function ma(s){var t;return(t=(fj(s)?s.ownerDocument:s.document)||window.document)==null?void 0:t.documentElement}function fj(s){return ym()?s instanceof Node||s instanceof nr(s).Node:!1}function Ur(s){return ym()?s instanceof Element||s instanceof nr(s).Element:!1}function ca(s){return ym()?s instanceof HTMLElement||s instanceof nr(s).HTMLElement:!1}function Iy(s){return!ym()||typeof ShadowRoot>"u"?!1:s instanceof ShadowRoot||s instanceof nr(s).ShadowRoot}function nd(s){const{overflow:t,overflowX:n,overflowY:a,display:o}=Br(s);return/auto|scroll|overlay|hidden|clip/.test(t+a+n)&&!["inline","contents"].includes(o)}function XE(s){return["table","td","th"].includes(Ml(s))}function bm(s){return[":popover-open",":modal"].some(t=>{try{return s.matches(t)}catch{return!1}})}function _x(s){const t=Lx(),n=Ur(s)?Br(s):s;return["transform","translate","scale","rotate","perspective"].some(a=>n[a]?n[a]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(a=>(n.willChange||"").includes(a))||["paint","layout","strict","content"].some(a=>(n.contain||"").includes(a))}function ZE(s){let t=Pi(s);for(;ca(t)&&!Cl(t);){if(_x(t))return t;if(bm(t))return null;t=Pi(t)}return null}function Lx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Cl(s){return["html","body","#document"].includes(Ml(s))}function Br(s){return nr(s).getComputedStyle(s)}function wm(s){return Ur(s)?{scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}:{scrollLeft:s.scrollX,scrollTop:s.scrollY}}function Pi(s){if(Ml(s)==="html")return s;const t=s.assignedSlot||s.parentNode||Iy(s)&&s.host||ma(s);return Iy(t)?t.host:t}function pj(s){const t=Pi(s);return Cl(t)?s.ownerDocument?s.ownerDocument.body:s.body:ca(t)&&nd(t)?t:pj(t)}function Wc(s,t,n){var a;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=pj(s),l=o===((a=s.ownerDocument)==null?void 0:a.body),d=nr(o);if(l){const u=Ap(d);return t.concat(d,d.visualViewport||[],nd(o)?o:[],u&&n?Wc(u):[])}return t.concat(o,Wc(o,[],n))}function Ap(s){return s.parent&&Object.getPrototypeOf(s.parent)?s.frameElement:null}function xj(s){const t=Br(s);let n=parseFloat(t.width)||0,a=parseFloat(t.height)||0;const o=ca(s),l=o?s.offsetWidth:n,d=o?s.offsetHeight:a,u=Gu(n)!==l||Gu(a)!==d;return u&&(n=l,a=d),{width:n,height:a,$:u}}function Mx(s){return Ur(s)?s:s.contextElement}function xl(s){const t=Mx(s);if(!ca(t))return oa(1);const n=t.getBoundingClientRect(),{width:a,height:o,$:l}=xj(t);let d=(l?Gu(n.width):n.width)/a,u=(l?Gu(n.height):n.height)/o;return(!d||!Number.isFinite(d))&&(d=1),(!u||!Number.isFinite(u))&&(u=1),{x:d,y:u}}const JE=oa(0);function gj(s){const t=nr(s);return!Lx()||!t.visualViewport?JE:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function eT(s,t,n){return t===void 0&&(t=!1),!n||t&&n!==nr(s)?!1:t}function mo(s,t,n,a){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=s.getBoundingClientRect(),l=Mx(s);let d=oa(1);t&&(a?Ur(a)&&(d=xl(a)):d=xl(s));const u=eT(l,n,a)?gj(l):oa(0);let h=(o.left+u.x)/d.x,f=(o.top+u.y)/d.y,b=o.width/d.x,v=o.height/d.y;if(l){const y=nr(l),N=a&&Ur(a)?nr(a):a;let C=y,g=Ap(C);for(;g&&a&&N!==C;){const k=xl(g),A=g.getBoundingClientRect(),E=Br(g),S=A.left+(g.clientLeft+parseFloat(E.paddingLeft))*k.x,R=A.top+(g.clientTop+parseFloat(E.paddingTop))*k.y;h*=k.x,f*=k.y,b*=k.x,v*=k.y,h+=S,f+=R,C=nr(g),g=Ap(C)}}return Yu({width:b,height:v,x:h,y:f})}function Dx(s,t){const n=wm(s).scrollLeft;return t?t.left+n:mo(ma(s)).left+n}function vj(s,t,n){n===void 0&&(n=!1);const a=s.getBoundingClientRect(),o=a.left+t.scrollLeft-(n?0:Dx(s,a)),l=a.top+t.scrollTop;return{x:o,y:l}}function tT(s){let{elements:t,rect:n,offsetParent:a,strategy:o}=s;const l=o==="fixed",d=ma(a),u=t?bm(t.floating):!1;if(a===d||u&&l)return n;let h={scrollLeft:0,scrollTop:0},f=oa(1);const b=oa(0),v=ca(a);if((v||!v&&!l)&&((Ml(a)!=="body"||nd(d))&&(h=wm(a)),ca(a))){const N=mo(a);f=xl(a),b.x=N.x+a.clientLeft,b.y=N.y+a.clientTop}const y=d&&!v&&!l?vj(d,h,!0):oa(0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-h.scrollLeft*f.x+b.x+y.x,y:n.y*f.y-h.scrollTop*f.y+b.y+y.y}}function sT(s){return Array.from(s.getClientRects())}function nT(s){const t=ma(s),n=wm(s),a=s.ownerDocument.body,o=Xn(t.scrollWidth,t.clientWidth,a.scrollWidth,a.clientWidth),l=Xn(t.scrollHeight,t.clientHeight,a.scrollHeight,a.clientHeight);let d=-n.scrollLeft+Dx(s);const u=-n.scrollTop;return Br(a).direction==="rtl"&&(d+=Xn(t.clientWidth,a.clientWidth)-o),{width:o,height:l,x:d,y:u}}function rT(s,t){const n=nr(s),a=ma(s),o=n.visualViewport;let l=a.clientWidth,d=a.clientHeight,u=0,h=0;if(o){l=o.width,d=o.height;const f=Lx();(!f||f&&t==="fixed")&&(u=o.offsetLeft,h=o.offsetTop)}return{width:l,height:d,x:u,y:h}}function aT(s,t){const n=mo(s,!0,t==="fixed"),a=n.top+s.clientTop,o=n.left+s.clientLeft,l=ca(s)?xl(s):oa(1),d=s.clientWidth*l.x,u=s.clientHeight*l.y,h=o*l.x,f=a*l.y;return{width:d,height:u,x:h,y:f}}function Oy(s,t,n){let a;if(t==="viewport")a=rT(s,n);else if(t==="document")a=nT(ma(s));else if(Ur(t))a=aT(t,n);else{const o=gj(s);a={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return Yu(a)}function yj(s,t){const n=Pi(s);return n===t||!Ur(n)||Cl(n)?!1:Br(n).position==="fixed"||yj(n,t)}function iT(s,t){const n=t.get(s);if(n)return n;let a=Wc(s,[],!1).filter(u=>Ur(u)&&Ml(u)!=="body"),o=null;const l=Br(s).position==="fixed";let d=l?Pi(s):s;for(;Ur(d)&&!Cl(d);){const u=Br(d),h=_x(d);!h&&u.position==="fixed"&&(o=null),(l?!h&&!o:!h&&u.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||nd(d)&&!h&&yj(s,d))?a=a.filter(b=>b!==d):o=u,d=Pi(d)}return t.set(s,a),a}function oT(s){let{element:t,boundary:n,rootBoundary:a,strategy:o}=s;const d=[...n==="clippingAncestors"?bm(t)?[]:iT(t,this._c):[].concat(n),a],u=d[0],h=d.reduce((f,b)=>{const v=Oy(t,b,o);return f.top=Xn(v.top,f.top),f.right=Ti(v.right,f.right),f.bottom=Ti(v.bottom,f.bottom),f.left=Xn(v.left,f.left),f},Oy(t,u,o));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function lT(s){const{width:t,height:n}=xj(s);return{width:t,height:n}}function cT(s,t,n){const a=ca(t),o=ma(t),l=n==="fixed",d=mo(s,!0,l,t);let u={scrollLeft:0,scrollTop:0};const h=oa(0);if(a||!a&&!l)if((Ml(t)!=="body"||nd(o))&&(u=wm(t)),a){const y=mo(t,!0,l,t);h.x=y.x+t.clientLeft,h.y=y.y+t.clientTop}else o&&(h.x=Dx(o));const f=o&&!a&&!l?vj(o,u):oa(0),b=d.left+u.scrollLeft-h.x-f.x,v=d.top+u.scrollTop-h.y-f.y;return{x:b,y:v,width:d.width,height:d.height}}function Tf(s){return Br(s).position==="static"}function _y(s,t){if(!ca(s)||Br(s).position==="fixed")return null;if(t)return t(s);let n=s.offsetParent;return ma(s)===n&&(n=n.ownerDocument.body),n}function bj(s,t){const n=nr(s);if(bm(s))return n;if(!ca(s)){let o=Pi(s);for(;o&&!Cl(o);){if(Ur(o)&&!Tf(o))return o;o=Pi(o)}return n}let a=_y(s,t);for(;a&&XE(a)&&Tf(a);)a=_y(a,t);return a&&Cl(a)&&Tf(a)&&!_x(a)?n:a||ZE(s)||n}const dT=async function(s){const t=this.getOffsetParent||bj,n=this.getDimensions,a=await n(s.floating);return{reference:cT(s.reference,await t(s.floating),s.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}};function uT(s){return Br(s).direction==="rtl"}const mT={convertOffsetParentRelativeRectToViewportRelativeRect:tT,getDocumentElement:ma,getClippingRect:oT,getOffsetParent:bj,getElementRects:dT,getClientRects:sT,getDimensions:lT,getScale:xl,isElement:Ur,isRTL:uT};function wj(s,t){return s.x===t.x&&s.y===t.y&&s.width===t.width&&s.height===t.height}function hT(s,t){let n=null,a;const o=ma(s);function l(){var u;clearTimeout(a),(u=n)==null||u.disconnect(),n=null}function d(u,h){u===void 0&&(u=!1),h===void 0&&(h=1),l();const f=s.getBoundingClientRect(),{left:b,top:v,width:y,height:N}=f;if(u||t(),!y||!N)return;const C=lu(v),g=lu(o.clientWidth-(b+y)),k=lu(o.clientHeight-(v+N)),A=lu(b),S={rootMargin:-C+"px "+-g+"px "+-k+"px "+-A+"px",threshold:Xn(0,Ti(1,h))||1};let R=!0;function H(re){const K=re[0].intersectionRatio;if(K!==h){if(!R)return d();K?d(!1,K):a=setTimeout(()=>{d(!1,1e-7)},1e3)}K===1&&!wj(f,s.getBoundingClientRect())&&d(),R=!1}try{n=new IntersectionObserver(H,{...S,root:o.ownerDocument})}catch{n=new IntersectionObserver(H,S)}n.observe(s)}return d(!0),l}function fT(s,t,n,a){a===void 0&&(a={});const{ancestorScroll:o=!0,ancestorResize:l=!0,elementResize:d=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:h=!1}=a,f=Mx(s),b=o||l?[...f?Wc(f):[],...Wc(t)]:[];b.forEach(A=>{o&&A.addEventListener("scroll",n,{passive:!0}),l&&A.addEventListener("resize",n)});const v=f&&u?hT(f,n):null;let y=-1,N=null;d&&(N=new ResizeObserver(A=>{let[E]=A;E&&E.target===f&&N&&(N.unobserve(t),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var S;(S=N)==null||S.observe(t)})),n()}),f&&!h&&N.observe(f),N.observe(t));let C,g=h?mo(s):null;h&&k();function k(){const A=mo(s);g&&!wj(g,A)&&n(),g=A,C=requestAnimationFrame(k)}return n(),()=>{var A;b.forEach(E=>{o&&E.removeEventListener("scroll",n),l&&E.removeEventListener("resize",n)}),v?.(),(A=N)==null||A.disconnect(),N=null,h&&cancelAnimationFrame(C)}}const pT=VE,xT=GE,gT=HE,vT=YE,yT=KE,Ly=BE,bT=QE,wT=(s,t,n)=>{const a=new Map,o={platform:mT,...n},l={...o.platform,_c:a};return UE(s,t,{...o,platform:l})};var Iu=typeof document<"u"?p.useLayoutEffect:p.useEffect;function Xu(s,t){if(s===t)return!0;if(typeof s!=typeof t)return!1;if(typeof s=="function"&&s.toString()===t.toString())return!0;let n,a,o;if(s&&t&&typeof s=="object"){if(Array.isArray(s)){if(n=s.length,n!==t.length)return!1;for(a=n;a--!==0;)if(!Xu(s[a],t[a]))return!1;return!0}if(o=Object.keys(s),n=o.length,n!==Object.keys(t).length)return!1;for(a=n;a--!==0;)if(!{}.hasOwnProperty.call(t,o[a]))return!1;for(a=n;a--!==0;){const l=o[a];if(!(l==="_owner"&&s.$$typeof)&&!Xu(s[l],t[l]))return!1}return!0}return s!==s&&t!==t}function jj(s){return typeof window>"u"?1:(s.ownerDocument.defaultView||window).devicePixelRatio||1}function My(s,t){const n=jj(s);return Math.round(t*n)/n}function Af(s){const t=p.useRef(s);return Iu(()=>{t.current=s}),t}function jT(s){s===void 0&&(s={});const{placement:t="bottom",strategy:n="absolute",middleware:a=[],platform:o,elements:{reference:l,floating:d}={},transform:u=!0,whileElementsMounted:h,open:f}=s,[b,v]=p.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[y,N]=p.useState(a);Xu(y,a)||N(a);const[C,g]=p.useState(null),[k,A]=p.useState(null),E=p.useCallback(T=>{T!==re.current&&(re.current=T,g(T))},[]),S=p.useCallback(T=>{T!==K.current&&(K.current=T,A(T))},[]),R=l||C,H=d||k,re=p.useRef(null),K=p.useRef(null),ee=p.useRef(b),me=h!=null,pe=Af(h),L=Af(o),X=Af(f),z=p.useCallback(()=>{if(!re.current||!K.current)return;const T={placement:t,strategy:n,middleware:y};L.current&&(T.platform=L.current),wT(re.current,K.current,T).then(Y=>{const Q={...Y,isPositioned:X.current!==!1};V.current&&!Xu(ee.current,Q)&&(ee.current=Q,Rl.flushSync(()=>{v(Q)}))})},[y,t,n,L,X]);Iu(()=>{f===!1&&ee.current.isPositioned&&(ee.current.isPositioned=!1,v(T=>({...T,isPositioned:!1})))},[f]);const V=p.useRef(!1);Iu(()=>(V.current=!0,()=>{V.current=!1}),[]),Iu(()=>{if(R&&(re.current=R),H&&(K.current=H),R&&H){if(pe.current)return pe.current(R,H,z);z()}},[R,H,z,pe,me]);const se=p.useMemo(()=>({reference:re,floating:K,setReference:E,setFloating:S}),[E,S]),I=p.useMemo(()=>({reference:R,floating:H}),[R,H]),O=p.useMemo(()=>{const T={position:n,left:0,top:0};if(!I.floating)return T;const Y=My(I.floating,b.x),Q=My(I.floating,b.y);return u?{...T,transform:"translate("+Y+"px, "+Q+"px)",...jj(I.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Y,top:Q}},[n,u,I.floating,b.x,b.y]);return p.useMemo(()=>({...b,update:z,refs:se,elements:I,floatingStyles:O}),[b,z,se,I,O])}const NT=s=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:s,fn(n){const{element:a,padding:o}=typeof s=="function"?s(n):s;return a&&t(a)?a.current!=null?Ly({element:a.current,padding:o}).fn(n):{}:a?Ly({element:a,padding:o}).fn(n):{}}}},kT=(s,t)=>({...pT(s),options:[s,t]}),CT=(s,t)=>({...xT(s),options:[s,t]}),ST=(s,t)=>({...bT(s),options:[s,t]}),ET=(s,t)=>({...gT(s),options:[s,t]}),TT=(s,t)=>({...vT(s),options:[s,t]}),AT=(s,t)=>({...yT(s),options:[s,t]}),PT=(s,t)=>({...NT(s),options:[s,t]});var RT="Arrow",Nj=p.forwardRef((s,t)=>{const{children:n,width:a=10,height:o=5,...l}=s;return e.jsx(mt.svg,{...l,ref:t,width:a,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:s.asChild?n:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});Nj.displayName=RT;var IT=Nj;function kj(s){const[t,n]=p.useState(void 0);return zs(()=>{if(s){n({width:s.offsetWidth,height:s.offsetHeight});const a=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const l=o[0];let d,u;if("borderBoxSize"in l){const h=l.borderBoxSize,f=Array.isArray(h)?h[0]:h;d=f.inlineSize,u=f.blockSize}else d=s.offsetWidth,u=s.offsetHeight;n({width:d,height:u})});return a.observe(s,{box:"border-box"}),()=>a.unobserve(s)}else n(void 0)},[s]),t}var $x="Popper",[Cj,jm]=za($x),[OT,Sj]=Cj($x),Ej=s=>{const{__scopePopper:t,children:n}=s,[a,o]=p.useState(null);return e.jsx(OT,{scope:t,anchor:a,onAnchorChange:o,children:n})};Ej.displayName=$x;var Tj="PopperAnchor",Aj=p.forwardRef((s,t)=>{const{__scopePopper:n,virtualRef:a,...o}=s,l=Sj(Tj,n),d=p.useRef(null),u=Yt(t,d);return p.useEffect(()=>{l.onAnchorChange(a?.current||d.current)}),a?null:e.jsx(mt.div,{...o,ref:u})});Aj.displayName=Tj;var qx="PopperContent",[_T,LT]=Cj(qx),Pj=p.forwardRef((s,t)=>{const{__scopePopper:n,side:a="bottom",sideOffset:o=0,align:l="center",alignOffset:d=0,arrowPadding:u=0,avoidCollisions:h=!0,collisionBoundary:f=[],collisionPadding:b=0,sticky:v="partial",hideWhenDetached:y=!1,updatePositionStrategy:N="optimized",onPlaced:C,...g}=s,k=Sj(qx,n),[A,E]=p.useState(null),S=Yt(t,oe=>E(oe)),[R,H]=p.useState(null),re=kj(R),K=re?.width??0,ee=re?.height??0,me=a+(l!=="center"?"-"+l:""),pe=typeof b=="number"?b:{top:0,right:0,bottom:0,left:0,...b},L=Array.isArray(f)?f:[f],X=L.length>0,z={padding:pe,boundary:L.filter(DT),altBoundary:X},{refs:V,floatingStyles:se,placement:I,isPositioned:O,middlewareData:T}=jT({strategy:"fixed",placement:me,whileElementsMounted:(...oe)=>fT(...oe,{animationFrame:N==="always"}),elements:{reference:k.anchor},middleware:[kT({mainAxis:o+ee,alignmentAxis:d}),h&&CT({mainAxis:!0,crossAxis:!1,limiter:v==="partial"?ST():void 0,...z}),h&&ET({...z}),TT({...z,apply:({elements:oe,rects:he,availableWidth:Se,availableHeight:be})=>{const{width:Pe,height:Me}=he.reference,Fe=oe.floating.style;Fe.setProperty("--radix-popper-available-width",`${Se}px`),Fe.setProperty("--radix-popper-available-height",`${be}px`),Fe.setProperty("--radix-popper-anchor-width",`${Pe}px`),Fe.setProperty("--radix-popper-anchor-height",`${Me}px`)}}),R&&PT({element:R,padding:u}),$T({arrowWidth:K,arrowHeight:ee}),y&&AT({strategy:"referenceHidden",...z})]}),[Y,Q]=Oj(I),F=kn(C);zs(()=>{O&&F?.()},[O,F]);const te=T.arrow?.x,B=T.arrow?.y,U=T.arrow?.centerOffset!==0,[M,q]=p.useState();return zs(()=>{A&&q(window.getComputedStyle(A).zIndex)},[A]),e.jsx("div",{ref:V.setFloating,"data-radix-popper-content-wrapper":"",style:{...se,transform:O?se.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:M,"--radix-popper-transform-origin":[T.transformOrigin?.x,T.transformOrigin?.y].join(" "),...T.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:s.dir,children:e.jsx(_T,{scope:n,placedSide:Y,onArrowChange:H,arrowX:te,arrowY:B,shouldHideArrow:U,children:e.jsx(mt.div,{"data-side":Y,"data-align":Q,...g,ref:S,style:{...g.style,animation:O?void 0:"none"}})})})});Pj.displayName=qx;var Rj="PopperArrow",MT={top:"bottom",right:"left",bottom:"top",left:"right"},Ij=p.forwardRef(function(t,n){const{__scopePopper:a,...o}=t,l=LT(Rj,a),d=MT[l.placedSide];return e.jsx("span",{ref:l.onArrowChange,style:{position:"absolute",left:l.arrowX,top:l.arrowY,[d]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[l.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[l.placedSide],visibility:l.shouldHideArrow?"hidden":void 0},children:e.jsx(IT,{...o,ref:n,style:{...o.style,display:"block"}})})});Ij.displayName=Rj;function DT(s){return s!==null}var $T=s=>({name:"transformOrigin",options:s,fn(t){const{placement:n,rects:a,middlewareData:o}=t,d=o.arrow?.centerOffset!==0,u=d?0:s.arrowWidth,h=d?0:s.arrowHeight,[f,b]=Oj(n),v={start:"0%",center:"50%",end:"100%"}[b],y=(o.arrow?.x??0)+u/2,N=(o.arrow?.y??0)+h/2;let C="",g="";return f==="bottom"?(C=d?v:`${y}px`,g=`${-h}px`):f==="top"?(C=d?v:`${y}px`,g=`${a.floating.height+h}px`):f==="right"?(C=`${-h}px`,g=d?v:`${N}px`):f==="left"&&(C=`${a.floating.width+h}px`,g=d?v:`${N}px`),{data:{x:C,y:g}}}});function Oj(s){const[t,n="center"]=s.split("-");return[t,n]}var _j=Ej,Lj=Aj,Mj=Pj,Dj=Ij,[Nm]=za("Tooltip",[jm]),km=jm(),$j="TooltipProvider",qT=700,Pp="tooltip.open",[FT,Fx]=Nm($j),qj=s=>{const{__scopeTooltip:t,delayDuration:n=qT,skipDelayDuration:a=300,disableHoverableContent:o=!1,children:l}=s,d=p.useRef(!0),u=p.useRef(!1),h=p.useRef(0);return p.useEffect(()=>{const f=h.current;return()=>window.clearTimeout(f)},[]),e.jsx(FT,{scope:t,isOpenDelayedRef:d,delayDuration:n,onOpen:p.useCallback(()=>{window.clearTimeout(h.current),d.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>d.current=!0,a)},[a]),isPointerInTransitRef:u,onPointerInTransitChange:p.useCallback(f=>{u.current=f},[]),disableHoverableContent:o,children:l})};qj.displayName=$j;var Cm="Tooltip",[zT,Sm]=Nm(Cm),Fj=s=>{const{__scopeTooltip:t,children:n,open:a,defaultOpen:o=!1,onOpenChange:l,disableHoverableContent:d,delayDuration:u}=s,h=Fx(Cm,s.__scopeTooltip),f=km(t),[b,v]=p.useState(null),y=Oa(),N=p.useRef(0),C=d??h.disableHoverableContent,g=u??h.delayDuration,k=p.useRef(!1),[A=!1,E]=Ni({prop:a,defaultProp:o,onChange:K=>{K?(h.onOpen(),document.dispatchEvent(new CustomEvent(Pp))):h.onClose(),l?.(K)}}),S=p.useMemo(()=>A?k.current?"delayed-open":"instant-open":"closed",[A]),R=p.useCallback(()=>{window.clearTimeout(N.current),N.current=0,k.current=!1,E(!0)},[E]),H=p.useCallback(()=>{window.clearTimeout(N.current),N.current=0,E(!1)},[E]),re=p.useCallback(()=>{window.clearTimeout(N.current),N.current=window.setTimeout(()=>{k.current=!0,E(!0),N.current=0},g)},[g,E]);return p.useEffect(()=>()=>{N.current&&(window.clearTimeout(N.current),N.current=0)},[]),e.jsx(_j,{...f,children:e.jsx(zT,{scope:t,contentId:y,open:A,stateAttribute:S,trigger:b,onTriggerChange:v,onTriggerEnter:p.useCallback(()=>{h.isOpenDelayedRef.current?re():R()},[h.isOpenDelayedRef,re,R]),onTriggerLeave:p.useCallback(()=>{C?H():(window.clearTimeout(N.current),N.current=0)},[H,C]),onOpen:R,onClose:H,disableHoverableContent:C,children:n})})};Fj.displayName=Cm;var Rp="TooltipTrigger",zj=p.forwardRef((s,t)=>{const{__scopeTooltip:n,...a}=s,o=Sm(Rp,n),l=Fx(Rp,n),d=km(n),u=p.useRef(null),h=Yt(t,u,o.onTriggerChange),f=p.useRef(!1),b=p.useRef(!1),v=p.useCallback(()=>f.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",v),[v]),e.jsx(Lj,{asChild:!0,...d,children:e.jsx(mt.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...a,ref:h,onPointerMove:it(s.onPointerMove,y=>{y.pointerType!=="touch"&&!b.current&&!l.isPointerInTransitRef.current&&(o.onTriggerEnter(),b.current=!0)}),onPointerLeave:it(s.onPointerLeave,()=>{o.onTriggerLeave(),b.current=!1}),onPointerDown:it(s.onPointerDown,()=>{o.open&&o.onClose(),f.current=!0,document.addEventListener("pointerup",v,{once:!0})}),onFocus:it(s.onFocus,()=>{f.current||o.onOpen()}),onBlur:it(s.onBlur,o.onClose),onClick:it(s.onClick,o.onClose)})})});zj.displayName=Rp;var UT="TooltipPortal",[h$,BT]=Nm(UT,{forceMount:void 0}),Sl="TooltipContent",Uj=p.forwardRef((s,t)=>{const n=BT(Sl,s.__scopeTooltip),{forceMount:a=n.forceMount,side:o="top",...l}=s,d=Sm(Sl,s.__scopeTooltip);return e.jsx(bo,{present:a||d.open,children:d.disableHoverableContent?e.jsx(Bj,{side:o,...l,ref:t}):e.jsx(HT,{side:o,...l,ref:t})})}),HT=p.forwardRef((s,t)=>{const n=Sm(Sl,s.__scopeTooltip),a=Fx(Sl,s.__scopeTooltip),o=p.useRef(null),l=Yt(t,o),[d,u]=p.useState(null),{trigger:h,onClose:f}=n,b=o.current,{onPointerInTransitChange:v}=a,y=p.useCallback(()=>{u(null),v(!1)},[v]),N=p.useCallback((C,g)=>{const k=C.currentTarget,A={x:C.clientX,y:C.clientY},E=QT(A,k.getBoundingClientRect()),S=YT(A,E),R=XT(g.getBoundingClientRect()),H=JT([...S,...R]);u(H),v(!0)},[v]);return p.useEffect(()=>()=>y(),[y]),p.useEffect(()=>{if(h&&b){const C=k=>N(k,b),g=k=>N(k,h);return h.addEventListener("pointerleave",C),b.addEventListener("pointerleave",g),()=>{h.removeEventListener("pointerleave",C),b.removeEventListener("pointerleave",g)}}},[h,b,N,y]),p.useEffect(()=>{if(d){const C=g=>{const k=g.target,A={x:g.clientX,y:g.clientY},E=h?.contains(k)||b?.contains(k),S=!ZT(A,d);E?y():S&&(y(),f())};return document.addEventListener("pointermove",C),()=>document.removeEventListener("pointermove",C)}},[h,b,d,f,y]),e.jsx(Bj,{...s,ref:l})}),[KT,WT]=Nm(Cm,{isInside:!1}),VT=SS("TooltipContent"),Bj=p.forwardRef((s,t)=>{const{__scopeTooltip:n,children:a,"aria-label":o,onEscapeKeyDown:l,onPointerDownOutside:d,...u}=s,h=Sm(Sl,n),f=km(n),{onClose:b}=h;return p.useEffect(()=>(document.addEventListener(Pp,b),()=>document.removeEventListener(Pp,b)),[b]),p.useEffect(()=>{if(h.trigger){const v=y=>{y.target?.contains(h.trigger)&&b()};return window.addEventListener("scroll",v,{capture:!0}),()=>window.removeEventListener("scroll",v,{capture:!0})}},[h.trigger,b]),e.jsx(td,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:v=>v.preventDefault(),onDismiss:b,children:e.jsxs(Mj,{"data-state":h.stateAttribute,...f,...u,ref:t,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(VT,{children:a}),e.jsx(KT,{scope:n,isInside:!0,children:e.jsx(WS,{id:h.contentId,role:"tooltip",children:o||a})})]})})});Uj.displayName=Sl;var Hj="TooltipArrow",GT=p.forwardRef((s,t)=>{const{__scopeTooltip:n,...a}=s,o=km(n);return WT(Hj,n).isInside?null:e.jsx(Dj,{...o,...a,ref:t})});GT.displayName=Hj;function QT(s,t){const n=Math.abs(t.top-s.y),a=Math.abs(t.bottom-s.y),o=Math.abs(t.right-s.x),l=Math.abs(t.left-s.x);switch(Math.min(n,a,o,l)){case l:return"left";case o:return"right";case n:return"top";case a:return"bottom";default:throw new Error("unreachable")}}function YT(s,t,n=5){const a=[];switch(t){case"top":a.push({x:s.x-n,y:s.y+n},{x:s.x+n,y:s.y+n});break;case"bottom":a.push({x:s.x-n,y:s.y-n},{x:s.x+n,y:s.y-n});break;case"left":a.push({x:s.x+n,y:s.y-n},{x:s.x+n,y:s.y+n});break;case"right":a.push({x:s.x-n,y:s.y-n},{x:s.x-n,y:s.y+n});break}return a}function XT(s){const{top:t,right:n,bottom:a,left:o}=s;return[{x:o,y:t},{x:n,y:t},{x:n,y:a},{x:o,y:a}]}function ZT(s,t){const{x:n,y:a}=s;let o=!1;for(let l=0,d=t.length-1;l<t.length;d=l++){const u=t[l].x,h=t[l].y,f=t[d].x,b=t[d].y;h>a!=b>a&&n<(f-u)*(a-h)/(b-h)+u&&(o=!o)}return o}function JT(s){const t=s.slice();return t.sort((n,a)=>n.x<a.x?-1:n.x>a.x?1:n.y<a.y?-1:n.y>a.y?1:0),eA(t)}function eA(s){if(s.length<=1)return s.slice();const t=[];for(let a=0;a<s.length;a++){const o=s[a];for(;t.length>=2;){const l=t[t.length-1],d=t[t.length-2];if((l.x-d.x)*(o.y-d.y)>=(l.y-d.y)*(o.x-d.x))t.pop();else break}t.push(o)}t.pop();const n=[];for(let a=s.length-1;a>=0;a--){const o=s[a];for(;n.length>=2;){const l=n[n.length-1],d=n[n.length-2];if((l.x-d.x)*(o.y-d.y)>=(l.y-d.y)*(o.x-d.x))n.pop();else break}n.push(o)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var tA=qj,sA=Fj,nA=zj,Kj=Uj;const Wj=tA,rA=sA,aA=nA,Vj=p.forwardRef(({className:s,sideOffset:t=4,...n},a)=>e.jsx(Kj,{ref:a,sideOffset:t,className:Ze("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",s),...n}));Vj.displayName=Kj.displayName;const Pf=768;function iA(){const[s,t]=p.useState(void 0);return p.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Pf-1}px)`),a=()=>{t(window.innerWidth<Pf)};return n.addEventListener("change",a),t(window.innerWidth<Pf),()=>n.removeEventListener("change",a)},[]),!!s}const oA=Il("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),$=p.forwardRef(({className:s,variant:t,size:n,asChild:a=!1,...o},l)=>{const d=a?yx:"button";return e.jsx(d,{className:Ze(oA({variant:t,size:n,className:s})),ref:l,...o})});$.displayName="Button";const De=p.forwardRef(({className:s,type:t,...n},a)=>e.jsx("input",{type:t,className:Ze("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a,...n}));De.displayName="Input";var lA="Separator",Dy="horizontal",cA=["horizontal","vertical"],Gj=p.forwardRef((s,t)=>{const{decorative:n,orientation:a=Dy,...o}=s,l=dA(a)?a:Dy,u=n?{role:"none"}:{"aria-orientation":l==="vertical"?l:void 0,role:"separator"};return e.jsx(mt.div,{"data-orientation":l,...u,...o,ref:t})});Gj.displayName=lA;function dA(s){return cA.includes(s)}var Qj=Gj;const Zu=p.forwardRef(({className:s,orientation:t="horizontal",decorative:n=!0,...a},o)=>e.jsx(Qj,{ref:o,decorative:n,orientation:t,className:Ze("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s),...a}));Zu.displayName=Qj.displayName;var Rf="focusScope.autoFocusOnMount",If="focusScope.autoFocusOnUnmount",$y={bubbles:!1,cancelable:!0},uA="FocusScope",zx=p.forwardRef((s,t)=>{const{loop:n=!1,trapped:a=!1,onMountAutoFocus:o,onUnmountAutoFocus:l,...d}=s,[u,h]=p.useState(null),f=kn(o),b=kn(l),v=p.useRef(null),y=Yt(t,g=>h(g)),N=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(a){let g=function(S){if(N.paused||!u)return;const R=S.target;u.contains(R)?v.current=R:pi(v.current,{select:!0})},k=function(S){if(N.paused||!u)return;const R=S.relatedTarget;R!==null&&(u.contains(R)||pi(v.current,{select:!0}))},A=function(S){if(document.activeElement===document.body)for(const H of S)H.removedNodes.length>0&&pi(u)};document.addEventListener("focusin",g),document.addEventListener("focusout",k);const E=new MutationObserver(A);return u&&E.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",k),E.disconnect()}}},[a,u,N.paused]),p.useEffect(()=>{if(u){Fy.add(N);const g=document.activeElement;if(!u.contains(g)){const A=new CustomEvent(Rf,$y);u.addEventListener(Rf,f),u.dispatchEvent(A),A.defaultPrevented||(mA(gA(Yj(u)),{select:!0}),document.activeElement===g&&pi(u))}return()=>{u.removeEventListener(Rf,f),setTimeout(()=>{const A=new CustomEvent(If,$y);u.addEventListener(If,b),u.dispatchEvent(A),A.defaultPrevented||pi(g??document.body,{select:!0}),u.removeEventListener(If,b),Fy.remove(N)},0)}}},[u,f,b,N]);const C=p.useCallback(g=>{if(!n&&!a||N.paused)return;const k=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,A=document.activeElement;if(k&&A){const E=g.currentTarget,[S,R]=hA(E);S&&R?!g.shiftKey&&A===R?(g.preventDefault(),n&&pi(S,{select:!0})):g.shiftKey&&A===S&&(g.preventDefault(),n&&pi(R,{select:!0})):A===E&&g.preventDefault()}},[n,a,N.paused]);return e.jsx(mt.div,{tabIndex:-1,...d,ref:y,onKeyDown:C})});zx.displayName=uA;function mA(s,{select:t=!1}={}){const n=document.activeElement;for(const a of s)if(pi(a,{select:t}),document.activeElement!==n)return}function hA(s){const t=Yj(s),n=qy(t,s),a=qy(t.reverse(),s);return[n,a]}function Yj(s){const t=[],n=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const o=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||o?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function qy(s,t){for(const n of s)if(!fA(n,{upTo:t}))return n}function fA(s,{upTo:t}){if(getComputedStyle(s).visibility==="hidden")return!0;for(;s;){if(t!==void 0&&s===t)return!1;if(getComputedStyle(s).display==="none")return!0;s=s.parentElement}return!1}function pA(s){return s instanceof HTMLInputElement&&"select"in s}function pi(s,{select:t=!1}={}){if(s&&s.focus){const n=document.activeElement;s.focus({preventScroll:!0}),s!==n&&pA(s)&&t&&s.select()}}var Fy=xA();function xA(){let s=[];return{add(t){const n=s[0];t!==n&&n?.pause(),s=zy(s,t),s.unshift(t)},remove(t){s=zy(s,t),s[0]?.resume()}}}function zy(s,t){const n=[...s],a=n.indexOf(t);return a!==-1&&n.splice(a,1),n}function gA(s){return s.filter(t=>t.tagName!=="A")}var Of=0;function Xj(){p.useEffect(()=>{const s=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",s[0]??Uy()),document.body.insertAdjacentElement("beforeend",s[1]??Uy()),Of++,()=>{Of===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Of--}},[])}function Uy(){const s=document.createElement("span");return s.setAttribute("data-radix-focus-guard",""),s.tabIndex=0,s.style.outline="none",s.style.opacity="0",s.style.position="fixed",s.style.pointerEvents="none",s}var aa=function(){return aa=Object.assign||function(t){for(var n,a=1,o=arguments.length;a<o;a++){n=arguments[a];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(t[l]=n[l])}return t},aa.apply(this,arguments)};function Zj(s,t){var n={};for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&t.indexOf(a)<0&&(n[a]=s[a]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(s);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(s,a[o])&&(n[a[o]]=s[a[o]]);return n}function vA(s,t,n){if(n||arguments.length===2)for(var a=0,o=t.length,l;a<o;a++)(l||!(a in t))&&(l||(l=Array.prototype.slice.call(t,0,a)),l[a]=t[a]);return s.concat(l||Array.prototype.slice.call(t))}var Ou="right-scroll-bar-position",_u="width-before-scroll-bar",yA="with-scroll-bars-hidden",bA="--removed-body-scroll-bar-size";function _f(s,t){return typeof s=="function"?s(t):s&&(s.current=t),s}function wA(s,t){var n=p.useState(function(){return{value:s,callback:t,facade:{get current(){return n.value},set current(a){var o=n.value;o!==a&&(n.value=a,n.callback(a,o))}}}})[0];return n.callback=t,n.facade}var jA=typeof window<"u"?p.useLayoutEffect:p.useEffect,By=new WeakMap;function NA(s,t){var n=wA(null,function(a){return s.forEach(function(o){return _f(o,a)})});return jA(function(){var a=By.get(n);if(a){var o=new Set(a),l=new Set(s),d=n.current;o.forEach(function(u){l.has(u)||_f(u,null)}),l.forEach(function(u){o.has(u)||_f(u,d)})}By.set(n,s)},[s]),n}function kA(s){return s}function CA(s,t){t===void 0&&(t=kA);var n=[],a=!1,o={read:function(){if(a)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:s},useMedium:function(l){var d=t(l,a);return n.push(d),function(){n=n.filter(function(u){return u!==d})}},assignSyncMedium:function(l){for(a=!0;n.length;){var d=n;n=[],d.forEach(l)}n={push:function(u){return l(u)},filter:function(){return n}}},assignMedium:function(l){a=!0;var d=[];if(n.length){var u=n;n=[],u.forEach(l),d=n}var h=function(){var b=d;d=[],b.forEach(l)},f=function(){return Promise.resolve().then(h)};f(),n={push:function(b){d.push(b),f()},filter:function(b){return d=d.filter(b),n}}}};return o}function SA(s){s===void 0&&(s={});var t=CA(null);return t.options=aa({async:!0,ssr:!1},s),t}var Jj=function(s){var t=s.sideCar,n=Zj(s,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var a=t.read();if(!a)throw new Error("Sidecar medium not found");return p.createElement(a,aa({},n))};Jj.isSideCarExport=!0;function EA(s,t){return s.useMedium(t),Jj}var eN=SA(),Lf=function(){},Em=p.forwardRef(function(s,t){var n=p.useRef(null),a=p.useState({onScrollCapture:Lf,onWheelCapture:Lf,onTouchMoveCapture:Lf}),o=a[0],l=a[1],d=s.forwardProps,u=s.children,h=s.className,f=s.removeScrollBar,b=s.enabled,v=s.shards,y=s.sideCar,N=s.noIsolation,C=s.inert,g=s.allowPinchZoom,k=s.as,A=k===void 0?"div":k,E=s.gapMode,S=Zj(s,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),R=y,H=NA([n,t]),re=aa(aa({},S),o);return p.createElement(p.Fragment,null,b&&p.createElement(R,{sideCar:eN,removeScrollBar:f,shards:v,noIsolation:N,inert:C,setCallbacks:l,allowPinchZoom:!!g,lockRef:n,gapMode:E}),d?p.cloneElement(p.Children.only(u),aa(aa({},re),{ref:H})):p.createElement(A,aa({},re,{className:h,ref:H}),u))});Em.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Em.classNames={fullWidth:_u,zeroRight:Ou};var TA=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function AA(){if(!document)return null;var s=document.createElement("style");s.type="text/css";var t=TA();return t&&s.setAttribute("nonce",t),s}function PA(s,t){s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}function RA(s){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(s)}var IA=function(){var s=0,t=null;return{add:function(n){s==0&&(t=AA())&&(PA(t,n),RA(t)),s++},remove:function(){s--,!s&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},OA=function(){var s=IA();return function(t,n){p.useEffect(function(){return s.add(t),function(){s.remove()}},[t&&n])}},tN=function(){var s=OA(),t=function(n){var a=n.styles,o=n.dynamic;return s(a,o),null};return t},_A={left:0,top:0,right:0,gap:0},Mf=function(s){return parseInt(s||"",10)||0},LA=function(s){var t=window.getComputedStyle(document.body),n=t[s==="padding"?"paddingLeft":"marginLeft"],a=t[s==="padding"?"paddingTop":"marginTop"],o=t[s==="padding"?"paddingRight":"marginRight"];return[Mf(n),Mf(a),Mf(o)]},MA=function(s){if(s===void 0&&(s="margin"),typeof window>"u")return _A;var t=LA(s),n=document.documentElement.clientWidth,a=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,a-n+t[2]-t[0])}},DA=tN(),gl="data-scroll-locked",$A=function(s,t,n,a){var o=s.left,l=s.top,d=s.right,u=s.gap;return n===void 0&&(n="margin"),`
  .`.concat(yA,` {
   overflow: hidden `).concat(a,`;
   padding-right: `).concat(u,"px ").concat(a,`;
  }
  body[`).concat(gl,`] {
    overflow: hidden `).concat(a,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(a,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(l,`px;
    padding-right: `).concat(d,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(a,`;
    `),n==="padding"&&"padding-right: ".concat(u,"px ").concat(a,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ou,` {
    right: `).concat(u,"px ").concat(a,`;
  }
  
  .`).concat(_u,` {
    margin-right: `).concat(u,"px ").concat(a,`;
  }
  
  .`).concat(Ou," .").concat(Ou,` {
    right: 0 `).concat(a,`;
  }
  
  .`).concat(_u," .").concat(_u,` {
    margin-right: 0 `).concat(a,`;
  }
  
  body[`).concat(gl,`] {
    `).concat(bA,": ").concat(u,`px;
  }
`)},Hy=function(){var s=parseInt(document.body.getAttribute(gl)||"0",10);return isFinite(s)?s:0},qA=function(){p.useEffect(function(){return document.body.setAttribute(gl,(Hy()+1).toString()),function(){var s=Hy()-1;s<=0?document.body.removeAttribute(gl):document.body.setAttribute(gl,s.toString())}},[])},FA=function(s){var t=s.noRelative,n=s.noImportant,a=s.gapMode,o=a===void 0?"margin":a;qA();var l=p.useMemo(function(){return MA(o)},[o]);return p.createElement(DA,{styles:$A(l,!t,o,n?"":"!important")})},Ip=!1;if(typeof window<"u")try{var cu=Object.defineProperty({},"passive",{get:function(){return Ip=!0,!0}});window.addEventListener("test",cu,cu),window.removeEventListener("test",cu,cu)}catch{Ip=!1}var tl=Ip?{passive:!1}:!1,zA=function(s){return s.tagName==="TEXTAREA"},sN=function(s,t){if(!(s instanceof Element))return!1;var n=window.getComputedStyle(s);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!zA(s)&&n[t]==="visible")},UA=function(s){return sN(s,"overflowY")},BA=function(s){return sN(s,"overflowX")},Ky=function(s,t){var n=t.ownerDocument,a=t;do{typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&(a=a.host);var o=nN(s,a);if(o){var l=rN(s,a),d=l[1],u=l[2];if(d>u)return!0}a=a.parentNode}while(a&&a!==n.body);return!1},HA=function(s){var t=s.scrollTop,n=s.scrollHeight,a=s.clientHeight;return[t,n,a]},KA=function(s){var t=s.scrollLeft,n=s.scrollWidth,a=s.clientWidth;return[t,n,a]},nN=function(s,t){return s==="v"?UA(t):BA(t)},rN=function(s,t){return s==="v"?HA(t):KA(t)},WA=function(s,t){return s==="h"&&t==="rtl"?-1:1},VA=function(s,t,n,a,o){var l=WA(s,window.getComputedStyle(t).direction),d=l*a,u=n.target,h=t.contains(u),f=!1,b=d>0,v=0,y=0;do{var N=rN(s,u),C=N[0],g=N[1],k=N[2],A=g-k-l*C;(C||A)&&nN(s,u)&&(v+=A,y+=C),u instanceof ShadowRoot?u=u.host:u=u.parentNode}while(!h&&u!==document.body||h&&(t.contains(u)||t===u));return(b&&Math.abs(v)<1||!b&&Math.abs(y)<1)&&(f=!0),f},du=function(s){return"changedTouches"in s?[s.changedTouches[0].clientX,s.changedTouches[0].clientY]:[0,0]},Wy=function(s){return[s.deltaX,s.deltaY]},Vy=function(s){return s&&"current"in s?s.current:s},GA=function(s,t){return s[0]===t[0]&&s[1]===t[1]},QA=function(s){return`
  .block-interactivity-`.concat(s,` {pointer-events: none;}
  .allow-interactivity-`).concat(s,` {pointer-events: all;}
`)},YA=0,sl=[];function XA(s){var t=p.useRef([]),n=p.useRef([0,0]),a=p.useRef(),o=p.useState(YA++)[0],l=p.useState(tN)[0],d=p.useRef(s);p.useEffect(function(){d.current=s},[s]),p.useEffect(function(){if(s.inert){document.body.classList.add("block-interactivity-".concat(o));var g=vA([s.lockRef.current],(s.shards||[]).map(Vy),!0).filter(Boolean);return g.forEach(function(k){return k.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),g.forEach(function(k){return k.classList.remove("allow-interactivity-".concat(o))})}}},[s.inert,s.lockRef.current,s.shards]);var u=p.useCallback(function(g,k){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!d.current.allowPinchZoom;var A=du(g),E=n.current,S="deltaX"in g?g.deltaX:E[0]-A[0],R="deltaY"in g?g.deltaY:E[1]-A[1],H,re=g.target,K=Math.abs(S)>Math.abs(R)?"h":"v";if("touches"in g&&K==="h"&&re.type==="range")return!1;var ee=Ky(K,re);if(!ee)return!0;if(ee?H=K:(H=K==="v"?"h":"v",ee=Ky(K,re)),!ee)return!1;if(!a.current&&"changedTouches"in g&&(S||R)&&(a.current=H),!H)return!0;var me=a.current||H;return VA(me,k,g,me==="h"?S:R)},[]),h=p.useCallback(function(g){var k=g;if(!(!sl.length||sl[sl.length-1]!==l)){var A="deltaY"in k?Wy(k):du(k),E=t.current.filter(function(H){return H.name===k.type&&(H.target===k.target||k.target===H.shadowParent)&&GA(H.delta,A)})[0];if(E&&E.should){k.cancelable&&k.preventDefault();return}if(!E){var S=(d.current.shards||[]).map(Vy).filter(Boolean).filter(function(H){return H.contains(k.target)}),R=S.length>0?u(k,S[0]):!d.current.noIsolation;R&&k.cancelable&&k.preventDefault()}}},[]),f=p.useCallback(function(g,k,A,E){var S={name:g,delta:k,target:A,should:E,shadowParent:ZA(A)};t.current.push(S),setTimeout(function(){t.current=t.current.filter(function(R){return R!==S})},1)},[]),b=p.useCallback(function(g){n.current=du(g),a.current=void 0},[]),v=p.useCallback(function(g){f(g.type,Wy(g),g.target,u(g,s.lockRef.current))},[]),y=p.useCallback(function(g){f(g.type,du(g),g.target,u(g,s.lockRef.current))},[]);p.useEffect(function(){return sl.push(l),s.setCallbacks({onScrollCapture:v,onWheelCapture:v,onTouchMoveCapture:y}),document.addEventListener("wheel",h,tl),document.addEventListener("touchmove",h,tl),document.addEventListener("touchstart",b,tl),function(){sl=sl.filter(function(g){return g!==l}),document.removeEventListener("wheel",h,tl),document.removeEventListener("touchmove",h,tl),document.removeEventListener("touchstart",b,tl)}},[]);var N=s.removeScrollBar,C=s.inert;return p.createElement(p.Fragment,null,C?p.createElement(l,{styles:QA(o)}):null,N?p.createElement(FA,{gapMode:s.gapMode}):null)}function ZA(s){for(var t=null;s!==null;)s instanceof ShadowRoot&&(t=s.host,s=s.host),s=s.parentNode;return t}const JA=EA(eN,XA);var Ux=p.forwardRef(function(s,t){return p.createElement(Em,aa({},s,{ref:t,sideCar:JA}))});Ux.classNames=Em.classNames;var eP=function(s){if(typeof document>"u")return null;var t=Array.isArray(s)?s[0]:s;return t.ownerDocument.body},nl=new WeakMap,uu=new WeakMap,mu={},Df=0,aN=function(s){return s&&(s.host||aN(s.parentNode))},tP=function(s,t){return t.map(function(n){if(s.contains(n))return n;var a=aN(n);return a&&s.contains(a)?a:(console.error("aria-hidden",n,"in not contained inside",s,". Doing nothing"),null)}).filter(function(n){return!!n})},sP=function(s,t,n,a){var o=tP(t,Array.isArray(s)?s:[s]);mu[n]||(mu[n]=new WeakMap);var l=mu[n],d=[],u=new Set,h=new Set(o),f=function(v){!v||u.has(v)||(u.add(v),f(v.parentNode))};o.forEach(f);var b=function(v){!v||h.has(v)||Array.prototype.forEach.call(v.children,function(y){if(u.has(y))b(y);else try{var N=y.getAttribute(a),C=N!==null&&N!=="false",g=(nl.get(y)||0)+1,k=(l.get(y)||0)+1;nl.set(y,g),l.set(y,k),d.push(y),g===1&&C&&uu.set(y,!0),k===1&&y.setAttribute(n,"true"),C||y.setAttribute(a,"true")}catch(A){console.error("aria-hidden: cannot operate on ",y,A)}})};return b(t),u.clear(),Df++,function(){d.forEach(function(v){var y=nl.get(v)-1,N=l.get(v)-1;nl.set(v,y),l.set(v,N),y||(uu.has(v)||v.removeAttribute(a),uu.delete(v)),N||v.removeAttribute(n)}),Df--,Df||(nl=new WeakMap,nl=new WeakMap,uu=new WeakMap,mu={})}},iN=function(s,t,n){n===void 0&&(n="data-aria-hidden");var a=Array.from(Array.isArray(s)?s:[s]),o=eP(s);return o?(a.push.apply(a,Array.from(o.querySelectorAll("[aria-live]"))),sP(a,o,n,"aria-hidden")):function(){return null}},Bx="Dialog",[oN]=za(Bx),[nP,Kr]=oN(Bx),lN=s=>{const{__scopeDialog:t,children:n,open:a,defaultOpen:o,onOpenChange:l,modal:d=!0}=s,u=p.useRef(null),h=p.useRef(null),[f=!1,b]=Ni({prop:a,defaultProp:o,onChange:l});return e.jsx(nP,{scope:t,triggerRef:u,contentRef:h,contentId:Oa(),titleId:Oa(),descriptionId:Oa(),open:f,onOpenChange:b,onOpenToggle:p.useCallback(()=>b(v=>!v),[b]),modal:d,children:n})};lN.displayName=Bx;var cN="DialogTrigger",rP=p.forwardRef((s,t)=>{const{__scopeDialog:n,...a}=s,o=Kr(cN,n),l=Yt(t,o.triggerRef);return e.jsx(mt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Wx(o.open),...a,ref:l,onClick:it(s.onClick,o.onOpenToggle)})});rP.displayName=cN;var Hx="DialogPortal",[aP,dN]=oN(Hx,{forceMount:void 0}),uN=s=>{const{__scopeDialog:t,forceMount:n,children:a,container:o}=s,l=Kr(Hx,t);return e.jsx(aP,{scope:t,forceMount:n,children:p.Children.map(a,d=>e.jsx(bo,{present:n||l.open,children:e.jsx(fm,{asChild:!0,container:o,children:d})}))})};uN.displayName=Hx;var Ju="DialogOverlay",mN=p.forwardRef((s,t)=>{const n=dN(Ju,s.__scopeDialog),{forceMount:a=n.forceMount,...o}=s,l=Kr(Ju,s.__scopeDialog);return l.modal?e.jsx(bo,{present:a||l.open,children:e.jsx(oP,{...o,ref:t})}):null});mN.displayName=Ju;var iP=wl("DialogOverlay.RemoveScroll"),oP=p.forwardRef((s,t)=>{const{__scopeDialog:n,...a}=s,o=Kr(Ju,n);return e.jsx(Ux,{as:iP,allowPinchZoom:!0,shards:[o.contentRef],children:e.jsx(mt.div,{"data-state":Wx(o.open),...a,ref:t,style:{pointerEvents:"auto",...a.style}})})}),ho="DialogContent",hN=p.forwardRef((s,t)=>{const n=dN(ho,s.__scopeDialog),{forceMount:a=n.forceMount,...o}=s,l=Kr(ho,s.__scopeDialog);return e.jsx(bo,{present:a||l.open,children:l.modal?e.jsx(lP,{...o,ref:t}):e.jsx(cP,{...o,ref:t})})});hN.displayName=ho;var lP=p.forwardRef((s,t)=>{const n=Kr(ho,s.__scopeDialog),a=p.useRef(null),o=Yt(t,n.contentRef,a);return p.useEffect(()=>{const l=a.current;if(l)return iN(l)},[]),e.jsx(fN,{...s,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:it(s.onCloseAutoFocus,l=>{l.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:it(s.onPointerDownOutside,l=>{const d=l.detail.originalEvent,u=d.button===0&&d.ctrlKey===!0;(d.button===2||u)&&l.preventDefault()}),onFocusOutside:it(s.onFocusOutside,l=>l.preventDefault())})}),cP=p.forwardRef((s,t)=>{const n=Kr(ho,s.__scopeDialog),a=p.useRef(!1),o=p.useRef(!1);return e.jsx(fN,{...s,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{s.onCloseAutoFocus?.(l),l.defaultPrevented||(a.current||n.triggerRef.current?.focus(),l.preventDefault()),a.current=!1,o.current=!1},onInteractOutside:l=>{s.onInteractOutside?.(l),l.defaultPrevented||(a.current=!0,l.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const d=l.target;n.triggerRef.current?.contains(d)&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&o.current&&l.preventDefault()}})}),fN=p.forwardRef((s,t)=>{const{__scopeDialog:n,trapFocus:a,onOpenAutoFocus:o,onCloseAutoFocus:l,...d}=s,u=Kr(ho,n),h=p.useRef(null),f=Yt(t,h);return Xj(),e.jsxs(e.Fragment,{children:[e.jsx(zx,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:o,onUnmountAutoFocus:l,children:e.jsx(td,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":Wx(u.open),...d,ref:f,onDismiss:()=>u.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(dP,{titleId:u.titleId}),e.jsx(mP,{contentRef:h,descriptionId:u.descriptionId})]})]})}),Kx="DialogTitle",pN=p.forwardRef((s,t)=>{const{__scopeDialog:n,...a}=s,o=Kr(Kx,n);return e.jsx(mt.h2,{id:o.titleId,...a,ref:t})});pN.displayName=Kx;var xN="DialogDescription",gN=p.forwardRef((s,t)=>{const{__scopeDialog:n,...a}=s,o=Kr(xN,n);return e.jsx(mt.p,{id:o.descriptionId,...a,ref:t})});gN.displayName=xN;var vN="DialogClose",yN=p.forwardRef((s,t)=>{const{__scopeDialog:n,...a}=s,o=Kr(vN,n);return e.jsx(mt.button,{type:"button",...a,ref:t,onClick:it(s.onClick,()=>o.onOpenChange(!1))})});yN.displayName=vN;function Wx(s){return s?"open":"closed"}var bN="DialogTitleWarning",[f$,wN]=NS(bN,{contentName:ho,titleName:Kx,docsSlug:"dialog"}),dP=({titleId:s})=>{const t=wN(bN),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return p.useEffect(()=>{s&&(document.getElementById(s)||console.error(n))},[n,s]),null},uP="DialogDescriptionWarning",mP=({contentRef:s,descriptionId:t})=>{const a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${wN(uP).contentName}}.`;return p.useEffect(()=>{const o=s.current?.getAttribute("aria-describedby");t&&o&&(document.getElementById(t)||console.warn(a))},[a,s,t]),null},jN=lN,NN=uN,Tm=mN,Am=hN,Pm=pN,Rm=gN,kN=yN;const hP=jN,fP=NN,CN=p.forwardRef(({className:s,...t},n)=>e.jsx(Tm,{className:Ze("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:n}));CN.displayName=Tm.displayName;const pP=Il("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),SN=p.forwardRef(({side:s="right",className:t,children:n,...a},o)=>e.jsxs(fP,{children:[e.jsx(CN,{}),e.jsxs(Am,{ref:o,className:Ze(pP({side:s}),t),...a,children:[n,e.jsxs(kN,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(sr,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));SN.displayName=Am.displayName;const EN=({className:s,...t})=>e.jsx("div",{className:Ze("flex flex-col space-y-2 text-center sm:text-left",s),...t});EN.displayName="SheetHeader";const TN=p.forwardRef(({className:s,...t},n)=>e.jsx(Pm,{ref:n,className:Ze("text-lg font-semibold text-foreground",s),...t}));TN.displayName=Pm.displayName;const AN=p.forwardRef(({className:s,...t},n)=>e.jsx(Rm,{ref:n,className:Ze("text-sm text-muted-foreground",s),...t}));AN.displayName=Rm.displayName;function Ce({className:s,...t}){return e.jsx("div",{className:Ze("animate-pulse rounded-md bg-muted",s),...t})}const xP="sidebar_state",gP=3600*24*7,vP="16rem",yP="18rem",bP="3rem",wP="b",PN=p.createContext(null);function Vx(){const s=p.useContext(PN);if(!s)throw new Error("useSidebar must be used within a SidebarProvider.");return s}function jP({defaultOpen:s=!0,open:t,onOpenChange:n,className:a,style:o,children:l,...d}){const u=iA(),[h,f]=p.useState(!1),[b,v]=p.useState(s),y=t??b,N=p.useCallback(A=>{const E=typeof A=="function"?A(y):A;n?n(E):v(E),document.cookie=`${xP}=${E}; path=/; max-age=${gP}`},[n,y]),C=p.useCallback(()=>u?f(A=>!A):N(A=>!A),[u,N,f]);p.useEffect(()=>{const A=E=>{E.key===wP&&(E.metaKey||E.ctrlKey)&&(E.preventDefault(),C())};return window.addEventListener("keydown",A),()=>window.removeEventListener("keydown",A)},[C]);const g=y?"expanded":"collapsed",k=p.useMemo(()=>({state:g,open:y,setOpen:N,isMobile:u,openMobile:h,setOpenMobile:f,toggleSidebar:C}),[g,y,N,u,h,f,C]);return e.jsx(PN.Provider,{value:k,children:e.jsx(Wj,{delayDuration:0,children:e.jsx("div",{"data-slot":"sidebar-wrapper",style:{"--sidebar-width":vP,"--sidebar-width-icon":bP,...o},className:Ze("group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",a),...d,children:l})})})}function NP({side:s="left",variant:t="sidebar",collapsible:n="offcanvas",className:a,children:o,...l}){const{isMobile:d,state:u,openMobile:h,setOpenMobile:f}=Vx();return n==="none"?e.jsx("div",{"data-slot":"sidebar",className:Ze("bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col",a),...l,children:o}):d?e.jsx(hP,{open:h,onOpenChange:f,...l,children:e.jsxs(SN,{"data-sidebar":"sidebar","data-slot":"sidebar","data-mobile":"true",className:"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden",style:{"--sidebar-width":yP},side:s,children:[e.jsxs(EN,{className:"sr-only",children:[e.jsx(TN,{children:"Sidebar"}),e.jsx(AN,{children:"Displays the mobile sidebar."})]}),e.jsx("div",{className:"flex h-full w-full flex-col",children:o})]})}):e.jsxs("div",{className:"group peer text-sidebar-foreground hidden md:block","data-state":u,"data-collapsible":u==="collapsed"?n:"","data-variant":t,"data-side":s,"data-slot":"sidebar",children:[e.jsx("div",{"data-slot":"sidebar-gap",className:Ze("relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",t==="floating"||t==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]":"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]")}),e.jsx("div",{"data-slot":"sidebar-container",className:Ze("fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex",s==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",t==="floating"||t==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]":"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l",a),...l,children:e.jsx("div",{"data-sidebar":"sidebar","data-slot":"sidebar-inner",className:"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm",children:o})})]})}function kP({className:s,onClick:t,...n}){const{toggleSidebar:a}=Vx();return e.jsxs($,{"data-sidebar":"trigger","data-slot":"sidebar-trigger",variant:"ghost",size:"icon",className:Ze("h-7 w-7",s),onClick:o=>{t?.(o),a()},...n,children:[e.jsx(q3,{}),e.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})}function CP({className:s,...t}){return e.jsx("div",{"data-slot":"sidebar-header","data-sidebar":"header",className:Ze("flex flex-col gap-2 p-2",s),...t})}function SP({className:s,...t}){return e.jsx("div",{"data-slot":"sidebar-footer","data-sidebar":"footer",className:Ze("flex flex-col gap-2 p-2",s),...t})}function EP({className:s,...t}){return e.jsx("div",{"data-slot":"sidebar-content","data-sidebar":"content",className:Ze("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",s),...t})}function Gy({className:s,...t}){return e.jsx("div",{"data-slot":"sidebar-group","data-sidebar":"group",className:Ze("relative flex w-full min-w-0 flex-col p-2",s),...t})}function Qy({className:s,asChild:t=!1,...n}){const a=t?yx:"div";return e.jsx(a,{"data-slot":"sidebar-group-label","data-sidebar":"group-label",className:Ze("text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",s),...n})}function Yy({className:s,...t}){return e.jsx("div",{"data-slot":"sidebar-group-content","data-sidebar":"group-content",className:Ze("w-full text-sm",s),...t})}function Xy({className:s,...t}){return e.jsx("ul",{"data-slot":"sidebar-menu","data-sidebar":"menu",className:Ze("flex w-full min-w-0 flex-col gap-1",s),...t})}function Zy({className:s,...t}){return e.jsx("li",{"data-slot":"sidebar-menu-item","data-sidebar":"menu-item",className:Ze("group/menu-item relative",s),...t})}const TP=Il("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}});function Jy({asChild:s=!1,isActive:t=!1,variant:n="default",size:a="default",tooltip:o,className:l,...d}){const u=s?yx:"button",{isMobile:h,state:f}=Vx(),b=e.jsx(u,{"data-slot":"sidebar-menu-button","data-sidebar":"menu-button","data-size":a,"data-active":t,className:Ze(TP({variant:n,size:a}),l),...d});return o?(typeof o=="string"&&(o={children:o}),e.jsxs(rA,{children:[e.jsx(aA,{asChild:!0,children:b}),e.jsx(Vj,{side:"right",align:"center",hidden:f!=="collapsed"||h,...o})]})):b}const AP="/images/logo.png",PP=[{title:"Overview",url:"/admin",icon:Wu},{title:"Customers",url:"/admin/customers",icon:Ei},{title:"Projects",url:"/admin/projects",icon:$n},{title:"Invoices",url:"/admin/invoices",icon:Vt},{title:"Billing Rates",url:"/admin/billing-rates",icon:Fn},{title:"Quote Builder",url:"/admin/quote-builder",icon:Ru},{title:"Conversations",url:"/admin/conversations",icon:M3},{title:"Support Tickets",url:"/admin/support",icon:ro},{title:"Q&A",url:"/admin/qa",icon:Mt},{title:"API Keys",url:"/admin/api-keys",icon:uo},{title:"Code Backups",url:"/admin/code-backups",icon:io},{title:"Lead Generator",url:"/admin/lead-generator",icon:kp},{title:"Servers",url:"/admin/servers",icon:Dn},{title:"Knowledge Base",url:"/admin/knowledge-base",icon:ki},{title:"Licenses",url:"/admin/licenses",icon:wn}],RP=[{title:"Settings",url:"/admin/settings",icon:Gw}];function IP(){const[s]=G1();return e.jsxs(NP,{children:[e.jsx(CP,{className:"p-4",children:e.jsx(Mn,{href:"/admin",children:e.jsxs("div",{className:"flex items-center gap-2.5 cursor-pointer","data-testid":"link-logo",children:[e.jsx("img",{src:AP,alt:"AI Powered Sites",className:"w-8 h-8 rounded-md object-cover"}),e.jsx("div",{children:e.jsx("span",{className:"text-sm font-semibold tracking-tight leading-tight",children:"AI Powered Sites"})})]})})}),e.jsxs(EP,{children:[e.jsxs(Gy,{children:[e.jsx(Qy,{children:"Dashboard"}),e.jsx(Yy,{children:e.jsx(Xy,{children:PP.map(t=>{const n=s===t.url||t.url!=="/admin"&&s.startsWith(t.url);return e.jsx(Zy,{children:e.jsx(Jy,{asChild:!0,isActive:n,children:e.jsxs(Mn,{href:t.url,"data-testid":`link-nav-${t.title.toLowerCase().replace(/\s+/g,"-")}`,children:[e.jsx(t.icon,{className:"w-4 h-4"}),e.jsx("span",{children:t.title})]})})},t.title)})})})]}),e.jsxs(Gy,{children:[e.jsx(Qy,{children:"System"}),e.jsx(Yy,{children:e.jsx(Xy,{children:RP.map(t=>{const n=s===t.url;return e.jsx(Zy,{children:e.jsx(Jy,{asChild:!0,isActive:n,children:e.jsxs(Mn,{href:t.url,"data-testid":`link-nav-${t.title.toLowerCase()}`,children:[e.jsx(t.icon,{className:"w-4 h-4"}),e.jsx("span",{children:t.title})]})})},t.title)})})})]})]}),e.jsx(SP,{className:"p-4",children:e.jsx("div",{className:"text-xs text-muted-foreground",children:"AI Powered Sites"})})]})}const RN=p.createContext({theme:"light",toggleTheme:()=>{}});function OP({children:s}){const[t,n]=p.useState(()=>typeof window<"u"&&localStorage.getItem("theme")||"light");p.useEffect(()=>{const o=document.documentElement;t==="dark"?o.classList.add("dark"):o.classList.remove("dark"),localStorage.setItem("theme",t)},[t]);const a=()=>{n(o=>o==="light"?"dark":"light")};return e.jsx(RN.Provider,{value:{theme:t,toggleTheme:a},children:s})}function _P(){return p.useContext(RN)}function IN(){const{theme:s,toggleTheme:t}=_P();return e.jsx($,{size:"icon",variant:"ghost",onClick:t,"data-testid":"button-theme-toggle",children:s==="light"?e.jsx($3,{className:"w-4 h-4"}):e.jsx(K3,{className:"w-4 h-4"})})}function LP(s,t=[]){let n=[];function a(l,d){const u=p.createContext(d);u.displayName=l+"Context";const h=n.length;n=[...n,d];const f=v=>{const{scope:y,children:N,...C}=v,g=y?.[s]?.[h]||u,k=p.useMemo(()=>C,Object.values(C));return e.jsx(g.Provider,{value:k,children:N})};f.displayName=l+"Provider";function b(v,y){const N=y?.[s]?.[h]||u,C=p.useContext(N);if(C)return C;if(d!==void 0)return d;throw new Error(`\`${v}\` must be used within \`${l}\``)}return[f,b]}const o=()=>{const l=n.map(d=>p.createContext(d));return function(u){const h=u?.[s]||l;return p.useMemo(()=>({[`__scope${s}`]:{...u,[s]:h}}),[u,h])}};return o.scopeName=s,[a,MP(o,...t)]}function MP(...s){const t=s[0];if(s.length===1)return t;const n=()=>{const a=s.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(l){const d=a.reduce((u,{useScope:h,scopeName:f})=>{const v=h(l)[`__scope${f}`];return{...u,...v}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:d}),[d])}};return n.scopeName=t.scopeName,n}var DP=Symbol.for("react.lazy"),em=cx[" use ".trim().toString()];function $P(s){return typeof s=="object"&&s!==null&&"then"in s}function ON(s){return s!=null&&typeof s=="object"&&"$$typeof"in s&&s.$$typeof===DP&&"_payload"in s&&$P(s._payload)}function qP(s){const t=FP(s),n=p.forwardRef((a,o)=>{let{children:l,...d}=a;ON(l)&&typeof em=="function"&&(l=em(l._payload));const u=p.Children.toArray(l),h=u.find(UP);if(h){const f=h.props.children,b=u.map(v=>v===h?p.Children.count(f)>1?p.Children.only(null):p.isValidElement(f)?f.props.children:null:v);return e.jsx(t,{...d,ref:o,children:p.isValidElement(f)?p.cloneElement(f,void 0,b):null})}return e.jsx(t,{...d,ref:o,children:l})});return n.displayName=`${s}.Slot`,n}function FP(s){const t=p.forwardRef((n,a)=>{let{children:o,...l}=n;if(ON(o)&&typeof em=="function"&&(o=em(o._payload)),p.isValidElement(o)){const d=HP(o),u=BP(l,o.props);return o.type!==p.Fragment&&(u.ref=a?vx(a,d):d),p.cloneElement(o,u)}return p.Children.count(o)>1?p.Children.only(null):null});return t.displayName=`${s}.SlotClone`,t}var zP=Symbol("radix.slottable");function UP(s){return p.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===zP}function BP(s,t){const n={...t};for(const a in t){const o=s[a],l=t[a];/^on[A-Z]/.test(a)?o&&l?n[a]=(...u)=>{const h=l(...u);return o(...u),h}:o&&(n[a]=o):a==="style"?n[a]={...o,...l}:a==="className"&&(n[a]=[o,l].filter(Boolean).join(" "))}return{...s,...n}}function HP(s){let t=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?s.ref:(t=Object.getOwnPropertyDescriptor(s,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?s.props.ref:s.props.ref||s.ref)}var KP=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Gx=KP.reduce((s,t)=>{const n=qP(`Primitive.${t}`),a=p.forwardRef((o,l)=>{const{asChild:d,...u}=o,h=d?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(h,{...u,ref:l})});return a.displayName=`Primitive.${t}`,{...s,[t]:a}},{});function WP(){return F1.useSyncExternalStore(VP,()=>!0,()=>!1)}function VP(){return()=>{}}var Qx="Avatar",[GP]=LP(Qx),[QP,_N]=GP(Qx),LN=p.forwardRef((s,t)=>{const{__scopeAvatar:n,...a}=s,[o,l]=p.useState("idle");return e.jsx(QP,{scope:n,imageLoadingStatus:o,onImageLoadingStatusChange:l,children:e.jsx(Gx.span,{...a,ref:t})})});LN.displayName=Qx;var MN="AvatarImage",DN=p.forwardRef((s,t)=>{const{__scopeAvatar:n,src:a,onLoadingStatusChange:o=()=>{},...l}=s,d=_N(MN,n),u=YP(a,l),h=kn(f=>{o(f),d.onImageLoadingStatusChange(f)});return zs(()=>{u!=="idle"&&h(u)},[u,h]),u==="loaded"?e.jsx(Gx.img,{...l,ref:t,src:a}):null});DN.displayName=MN;var $N="AvatarFallback",qN=p.forwardRef((s,t)=>{const{__scopeAvatar:n,delayMs:a,...o}=s,l=_N($N,n),[d,u]=p.useState(a===void 0);return p.useEffect(()=>{if(a!==void 0){const h=window.setTimeout(()=>u(!0),a);return()=>window.clearTimeout(h)}},[a]),d&&l.imageLoadingStatus!=="loaded"?e.jsx(Gx.span,{...o,ref:t}):null});qN.displayName=$N;function eb(s,t){return s?t?(s.src!==t&&(s.src=t),s.complete&&s.naturalWidth>0?"loaded":"loading"):"error":"idle"}function YP(s,{referrerPolicy:t,crossOrigin:n}){const a=WP(),o=p.useRef(null),l=a?(o.current||(o.current=new window.Image),o.current):null,[d,u]=p.useState(()=>eb(l,s));return zs(()=>{u(eb(l,s))},[l,s]),zs(()=>{const h=v=>()=>{u(v)};if(!l)return;const f=h("loaded"),b=h("error");return l.addEventListener("load",f),l.addEventListener("error",b),t&&(l.referrerPolicy=t),typeof n=="string"&&(l.crossOrigin=n),()=>{l.removeEventListener("load",f),l.removeEventListener("error",b)}},[l,n,t]),d}var FN=LN,zN=DN,UN=qN;const BN=p.forwardRef(({className:s,...t},n)=>e.jsx(FN,{ref:n,className:Ze(`
      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10
      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,s),...t}));BN.displayName=FN.displayName;const HN=p.forwardRef(({className:s,...t},n)=>e.jsx(zN,{ref:n,className:Ze("aspect-square h-full w-full",s),...t}));HN.displayName=zN.displayName;const KN=p.forwardRef(({className:s,...t},n)=>e.jsx(UN,{ref:n,className:Ze("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...t}));KN.displayName=UN.displayName;async function XP(){const s=await fetch("/api/auth/user",{credentials:"include"});if(s.status===401)return null;if(!s.ok)throw new Error(`${s.status}: ${s.statusText}`);return s.json()}async function ZP(){window.location.href="/api/logout"}function WN(){const s=gx(),{data:t,isLoading:n}=Le({queryKey:["/api/auth/user"],queryFn:XP,retry:!1,staleTime:1e3*60*5}),a=Te({mutationFn:ZP,onSuccess:()=>{s.setQueryData(["/api/auth/user"],null)}});return{user:t,isLoading:n,isAuthenticated:!!t,logout:a.mutate,isLoggingOut:a.isPending}}const ce=p.forwardRef(({className:s,...t},n)=>e.jsx("div",{ref:n,className:Ze("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",s),...t}));ce.displayName="Card";const VN=p.forwardRef(({className:s,...t},n)=>e.jsx("div",{ref:n,className:Ze("flex flex-col space-y-1.5 p-6",s),...t}));VN.displayName="CardHeader";const GN=p.forwardRef(({className:s,...t},n)=>e.jsx("div",{ref:n,className:Ze("text-2xl font-semibold leading-none tracking-tight",s),...t}));GN.displayName="CardTitle";const JP=p.forwardRef(({className:s,...t},n)=>e.jsx("div",{ref:n,className:Ze("text-sm text-muted-foreground",s),...t}));JP.displayName="CardDescription";const yr=p.forwardRef(({className:s,...t},n)=>e.jsx("div",{ref:n,className:Ze("p-6 pt-0",s),...t}));yr.displayName="CardContent";const e6=p.forwardRef(({className:s,...t},n)=>e.jsx("div",{ref:n,className:Ze("flex items-center p-6 pt-0",s),...t}));e6.displayName="CardFooter";function QN(){return e.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:e.jsx(ce,{className:"w-full max-w-md mx-4",children:e.jsxs(yr,{className:"pt-6",children:[e.jsxs("div",{className:"flex mb-4 gap-2",children:[e.jsx(Mc,{className:"h-8 w-8 text-red-500"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),e.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}const t6=Il("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function je({className:s,variant:t,...n}){return e.jsx("div",{className:Ze(t6({variant:t}),s),...n})}function hu({title:s,value:t,subtitle:n,icon:a,trend:o,testId:l}){return e.jsx(ce,{className:"p-5","data-testid":l,children:e.jsxs("div",{className:"flex items-start justify-between gap-3 flex-wrap",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:s}),e.jsx("p",{className:"text-2xl font-semibold mt-1 tracking-tight","data-testid":l?`${l}-value`:void 0,children:t}),n&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:n}),o&&e.jsxs("p",{className:`text-xs mt-1 font-medium ${o.positive?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"}`,children:[o.positive?"+":"",o.value]})]}),e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-md bg-primary/10 shrink-0",children:e.jsx(a,{className:"w-5 h-5 text-primary"})})]})})}function qe(s,t="USD"){return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(s/100)}function $s(s){return s?new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(new Date(s)):""}function Zn(s){switch(s.toLowerCase()){case"active":case"paid":case"finalized":case"resolved":case"closed":return"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400";case"pending":case"draft":case"in_progress":return"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400";case"open":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400";case"overdue":case"failed":case"canceled":case"cancelled":case"urgent":return"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400";case"high":return"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400";case"medium":return"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400";case"low":return"bg-gray-100 text-gray-600 dark:bg-gray-800/30 dark:text-gray-400";case"voided":return"bg-gray-100 text-gray-600 dark:bg-gray-800/30 dark:text-gray-400";default:return"bg-gray-100 text-gray-600 dark:bg-gray-800/30 dark:text-gray-400"}}function zn(s){p.useEffect(()=>{document.title=`${s} | Billing Hub`},[s])}function s6(){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(Ce,{className:"h-8 w-48 mb-1"}),e.jsx(Ce,{className:"h-4 w-72"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:Array.from({length:4}).map((s,t)=>e.jsxs(ce,{className:"p-5",children:[e.jsx(Ce,{className:"h-4 w-24 mb-3"}),e.jsx(Ce,{className:"h-8 w-32 mb-2"}),e.jsx(Ce,{className:"h-3 w-20"})]},t))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs(ce,{className:"p-5",children:[e.jsx(Ce,{className:"h-6 w-36 mb-4"}),e.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((s,t)=>e.jsx(Ce,{className:"h-12 w-full"},t))})]}),e.jsxs(ce,{className:"p-5",children:[e.jsx(Ce,{className:"h-6 w-36 mb-4"}),e.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((s,t)=>e.jsx(Ce,{className:"h-12 w-full"},t))})]})]})]})}function n6(){const{data:s,isLoading:t}=Le({queryKey:["/api/dashboard/stats"]}),{data:n,isLoading:a}=Le({queryKey:["/api/invoices?limit=5"]}),{data:o,isLoading:l}=Le({queryKey:["/api/projects"]}),{data:d}=Le({queryKey:["/api/customers"]}),{data:u}=Le({queryKey:["/api/work-entries"]}),{data:h}=Le({queryKey:["/api/billing-rates"]}),{data:f}=Le({queryKey:["/api/agent-costs/summary"]}),b=t||a||l;if(zn("Overview"),b)return e.jsx(s6,{});const v=new Map(d?.map(g=>[g.id,g])??[]),y=new Map(h?.map(g=>[g.id,g])??[]),N=o?.filter(g=>g.status==="active")??[],C=u?.slice(0,8)??[];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight","data-testid":"text-page-title",children:"Overview"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Your billing dashboard at a glance"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(hu,{title:"Total Revenue",value:qe(s?.totalRevenue??0),icon:Fn,subtitle:"From paid invoices",testId:"stat-revenue"}),e.jsx(hu,{title:"Active Projects",value:String(s?.activeProjects??0),icon:$n,subtitle:"Currently in progress",testId:"stat-projects"}),e.jsx(hu,{title:"Pending Invoices",value:String(s?.pendingInvoices??0),icon:Vt,subtitle:"Awaiting payment",testId:"stat-invoices"}),e.jsx(hu,{title:s?.overdueInvoices?"Overdue":"Unbilled Work",value:s?.overdueInvoices?String(s.overdueInvoices):qe(s?.unbilledWork??0),icon:s?.overdueInvoices?qn:Gt,subtitle:s?.overdueInvoices?"Past due date":"Ready to invoice",testId:"stat-overdue"})]}),(s?.overdueInvoices??0)>0&&e.jsx(ce,{className:"p-4 border-red-200 dark:border-red-900/50 bg-red-50 dark:bg-red-950/20","data-testid":"alert-overdue",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(qn,{className:"w-5 h-5 text-red-600 dark:text-red-400 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-red-700 dark:text-red-400",children:[s.overdueInvoices," overdue invoice",s.overdueInvoices>1?"s":""," need",s.overdueInvoices===1?"s":""," attention"]}),e.jsx("p",{className:"text-xs text-red-600/80 dark:text-red-400/80 mt-0.5",children:"These invoices are past their due date. Follow up with your clients to collect payment."})]})]})}),e.jsx(ce,{className:"p-4 border-primary/20 bg-primary/5 dark:bg-primary/10","data-testid":"card-agent-cost-reminder",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(zc,{className:"w-5 h-5 text-primary shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium",children:"Did an AI agent do work recently? Don't forget to log the cost!"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:f&&f.unbilledCount>0?`You have ${f.unbilledCount} unbilled entr${f.unbilledCount===1?"y":"ies"} worth ${qe(f.unbilledChargeCents)} ready to invoice.`:"Track what the agents built so you can bill your clients accurately."})]}),e.jsx(Mn,{href:"/billing-rates",children:e.jsxs($,{variant:"outline","data-testid":"button-go-to-agent-costs",children:["Log Costs",e.jsx(ml,{className:"w-4 h-4 ml-2"})]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs(ce,{className:"p-5",children:[e.jsx("h2",{className:"text-base font-semibold mb-4","data-testid":"text-recent-invoices-title",children:"Recent Invoices"}),e.jsx("div",{className:"space-y-3",children:n&&n.length>0?n.slice(0,5).map(g=>{const k=v.get(g.customerId);return e.jsxs("div",{className:"flex items-center justify-between gap-3 py-2 border-b last:border-b-0","data-testid":`row-invoice-${g.id}`,children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:g.invoiceNumber}),e.jsx("p",{className:"text-xs text-muted-foreground",children:k?.company||k?.name||""})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsx("span",{className:"text-sm font-medium",children:qe(g.totalAmountCents,g.currency??"USD")}),e.jsx(je,{variant:"secondary",className:`text-xs ${Zn(g.status)}`,children:g.status})]})]},g.id)}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No invoices yet"})})]}),e.jsxs(ce,{className:"p-5",children:[e.jsx("h2",{className:"text-base font-semibold mb-4","data-testid":"text-active-projects-title",children:"Active Projects"}),e.jsx("div",{className:"space-y-3",children:N.length>0?N.slice(0,5).map(g=>{const k=v.get(g.customerId),A=u?.filter(S=>S.projectId===g.id&&!S.invoiceId).length??0,E=u?.filter(S=>S.projectId===g.id&&!S.invoiceId).reduce((S,R)=>S+Number(R.quantity)*(y.get(R.rateId)?.rateCents??0),0)??0;return e.jsxs("div",{className:"flex items-center justify-between gap-3 py-2 border-b last:border-b-0","data-testid":`row-project-${g.id}`,children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:g.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:k?.company||k?.name||""})]}),e.jsx("div",{className:"text-right shrink-0",children:A>0?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm font-medium",children:qe(E)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[A," unbilled"]})]}):e.jsx("p",{className:"text-xs text-muted-foreground",children:"All billed"})})]},g.id)}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No active projects"})})]})]}),e.jsxs(ce,{className:"p-5",children:[e.jsx("h2",{className:"text-base font-semibold mb-4","data-testid":"text-recent-work-title",children:"Recent Work Entries"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-2 pr-4 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Work Type"}),e.jsx("th",{className:"text-left py-2 pr-4 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Project"}),e.jsx("th",{className:"text-left py-2 pr-4 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"text-right py-2 pr-4 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Qty"}),e.jsx("th",{className:"text-right py-2 pr-4 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"text-left py-2 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{children:C.length>0?C.map(g=>{const k=y.get(g.rateId),A=o?.find(S=>S.id===g.projectId),E=Number(g.quantity)*(k?.rateCents??0);return e.jsxs("tr",{className:"border-b last:border-b-0","data-testid":`row-work-${g.id}`,children:[e.jsx("td",{className:"py-3 pr-4 font-medium",children:k?.name??""}),e.jsx("td",{className:"py-3 pr-4 text-muted-foreground",children:A?.name??""}),e.jsx("td",{className:"py-3 pr-4 text-muted-foreground max-w-[200px] truncate",children:g.description||""}),e.jsx("td",{className:"py-3 pr-4 text-right",children:Number(g.quantity)}),e.jsx("td",{className:"py-3 pr-4 text-right font-medium",children:qe(E)}),e.jsx("td",{className:"py-3",children:e.jsx(je,{variant:"secondary",className:`text-xs ${g.invoiceId?Zn("paid"):Zn("pending")}`,children:g.invoiceId?"Billed":"Unbilled"})})]},g.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"py-8 text-center text-muted-foreground",children:"No work entries yet"})})})]})})]})]})}var r6="Label",YN=p.forwardRef((s,t)=>e.jsx(mt.label,{...s,ref:t,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(s.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));YN.displayName=r6;var XN=YN;const a6=Il("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),_e=p.forwardRef(({className:s,...t},n)=>e.jsx(XN,{ref:n,className:Ze(a6(),s),...t}));_e.displayName=XN.displayName;const Rs=p.forwardRef(({className:s,...t},n)=>e.jsx("textarea",{className:Ze("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:n,...t}));Rs.displayName="Textarea";const Ct=jN,i6=NN,ZN=p.forwardRef(({className:s,...t},n)=>e.jsx(Tm,{ref:n,className:Ze("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t}));ZN.displayName=Tm.displayName;const vt=p.forwardRef(({className:s,children:t,...n},a)=>e.jsxs(i6,{children:[e.jsx(ZN,{}),e.jsxs(Am,{ref:a,className:Ze("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...n,children:[t,e.jsxs(kN,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(sr,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));vt.displayName=Am.displayName;const yt=({className:s,...t})=>e.jsx("div",{className:Ze("flex flex-col space-y-1.5 text-center sm:text-left",s),...t});yt.displayName="DialogHeader";const so=({className:s,...t})=>e.jsx("div",{className:Ze("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});so.displayName="DialogFooter";const bt=p.forwardRef(({className:s,...t},n)=>e.jsx(Pm,{ref:n,className:Ze("text-lg font-semibold leading-none tracking-tight",s),...t}));bt.displayName=Pm.displayName;const Vc=p.forwardRef(({className:s,...t},n)=>e.jsx(Rm,{ref:n,className:Ze("text-sm text-muted-foreground",s),...t}));Vc.displayName=Rm.displayName;function o6(){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsx(Ce,{className:"h-8 w-32 mb-1"}),e.jsx(Ce,{className:"h-4 w-56"})]}),e.jsx(Ce,{className:"h-9 w-36"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from({length:3}).map((s,t)=>e.jsxs(ce,{className:"p-5",children:[e.jsx(Ce,{className:"h-6 w-40 mb-3"}),e.jsx(Ce,{className:"h-4 w-32 mb-2"}),e.jsx(Ce,{className:"h-4 w-48"})]},t))})]})}function l6(){zn("Customers");const{toast:s}=pt(),[t,n]=p.useState(""),[a,o]=p.useState(!1),[l,d]=p.useState(null),[u,h]=p.useState({name:"",email:"",company:"",phone:"",notes:""}),{data:f,isLoading:b}=Le({queryKey:["/api/customers"]}),v=Te({mutationFn:async R=>(await ke("POST","/api/customers",R)).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/customers"]}),ve.invalidateQueries({queryKey:["/api/dashboard/stats"]}),o(!1),g(),s({title:"Customer created",description:"New customer has been added."})},onError:R=>{s({title:"Error",description:R.message,variant:"destructive"})}}),y=Te({mutationFn:async({id:R,data:H})=>(await ke("PATCH",`/api/customers/${R}`,H)).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/customers"]}),o(!1),d(null),g(),s({title:"Customer updated",description:"Customer details have been saved."})},onError:R=>{s({title:"Error",description:R.message,variant:"destructive"})}}),N=Te({mutationFn:async R=>{await ke("DELETE",`/api/customers/${R}`)},onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/customers"]}),ve.invalidateQueries({queryKey:["/api/dashboard/stats"]}),s({title:"Customer deleted",description:"Customer has been removed."})},onError:R=>{s({title:"Error",description:R.message,variant:"destructive"})}}),C=Te({mutationFn:async R=>(await ke("POST",`/api/customers/${R}/send-portal-link`)).json(),onSuccess:()=>{s({title:"Email sent",description:"Portal access link has been emailed to the customer."})},onError:R=>{s({title:"Error",description:R.message,variant:"destructive"})}}),g=()=>h({name:"",email:"",company:"",phone:"",notes:""}),k=()=>{g(),d(null),o(!0)},A=R=>{d(R),h({name:R.name,email:R.email,company:R.company??"",phone:R.phone??"",notes:R.notes??""}),o(!0)},E=R=>{R.preventDefault(),l?y.mutate({id:l.id,data:u}):v.mutate(u)};if(b)return e.jsx(o6,{});const S=f?.filter(R=>R.name.toLowerCase().includes(t.toLowerCase())||R.email.toLowerCase().includes(t.toLowerCase())||(R.company??"").toLowerCase().includes(t.toLowerCase()))??[];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight","data-testid":"text-page-title",children:"Customers"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage your clients and their projects"})]}),e.jsxs($,{onClick:k,"data-testid":"button-add-customer",children:[e.jsx(Qt,{className:"w-4 h-4 mr-2"}),"Add Customer"]})]}),e.jsxs("div",{className:"relative max-w-sm",children:[e.jsx(sn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(De,{placeholder:"Search customers...",value:t,onChange:R=>n(R.target.value),className:"pl-9","data-testid":"input-search-customers"})]}),S.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:S.map(R=>e.jsxs(ce,{className:"p-5","data-testid":`card-customer-${R.id}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"font-semibold truncate","data-testid":`text-customer-name-${R.id}`,children:R.name}),R.company&&e.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-muted-foreground mt-0.5",children:[e.jsx(hl,{className:"w-3.5 h-3.5 shrink-0"}),e.jsx("span",{className:"truncate",children:R.company})]})]}),e.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[e.jsx($,{size:"icon",variant:"ghost",onClick:()=>A(R),"data-testid":`button-edit-customer-${R.id}`,children:e.jsx(ia,{className:"w-4 h-4"})}),e.jsx($,{size:"icon",variant:"ghost",onClick:()=>N.mutate(R.id),"data-testid":`button-delete-customer-${R.id}`,children:e.jsx(ps,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-1.5 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Fs,{className:"w-3.5 h-3.5 shrink-0"}),e.jsx("span",{className:"truncate",children:R.email})]}),R.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Bc,{className:"w-3.5 h-3.5 shrink-0"}),e.jsx("span",{children:R.phone})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t flex items-center justify-between gap-2 flex-wrap",children:[e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Added ",$s(R.createdAt)]}),R.portalToken&&e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs($,{size:"sm",variant:"outline",onClick:()=>{const H=`${window.location.origin}/portal/${R.portalToken}`;navigator.clipboard.writeText(H),s({title:"Link copied",description:"Client portal link copied to clipboard."})},"data-testid":`button-copy-portal-${R.id}`,children:[e.jsx(Ps,{className:"w-3 h-3 mr-1"}),"Copy Link"]}),e.jsxs($,{size:"sm",variant:"outline",onClick:()=>C.mutate(R.id),disabled:C.isPending,"data-testid":`button-send-portal-${R.id}`,children:[e.jsx(bs,{className:"w-3 h-3 mr-1"}),C.isPending?"Sending...":"Email Link"]})]})]})]},R.id))}):e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(Ei,{className:"w-10 h-10 text-muted-foreground mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t?"No customers match your search":"No customers yet. Add your first client to get started."})]}),e.jsx(Ct,{open:a,onOpenChange:o,children:e.jsxs(vt,{children:[e.jsx(yt,{children:e.jsx(bt,{children:l?"Edit Customer":"Add Customer"})}),e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_e,{htmlFor:"name",children:"Name *"}),e.jsx(De,{id:"name",value:u.name,onChange:R=>h(H=>({...H,name:R.target.value})),required:!0,"data-testid":"input-customer-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_e,{htmlFor:"email",children:"Email *"}),e.jsx(De,{id:"email",type:"email",value:u.email,onChange:R=>h(H=>({...H,email:R.target.value})),required:!0,"data-testid":"input-customer-email"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_e,{htmlFor:"company",children:"Company"}),e.jsx(De,{id:"company",value:u.company,onChange:R=>h(H=>({...H,company:R.target.value})),"data-testid":"input-customer-company"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_e,{htmlFor:"phone",children:"Phone"}),e.jsx(De,{id:"phone",value:u.phone,onChange:R=>h(H=>({...H,phone:R.target.value})),"data-testid":"input-customer-phone"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_e,{htmlFor:"notes",children:"Notes"}),e.jsx(Rs,{id:"notes",value:u.notes,onChange:R=>h(H=>({...H,notes:R.target.value})),"data-testid":"input-customer-notes"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx($,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx($,{type:"submit",disabled:v.isPending||y.isPending,"data-testid":"button-save-customer",children:v.isPending||y.isPending?"Saving...":l?"Save Changes":"Add Customer"})]})]})]})})]})}function tb(s,[t,n]){return Math.min(n,Math.max(t,s))}var c6=p.createContext(void 0);function Yx(s){const t=p.useContext(c6);return s||t||"ltr"}function JN(s){const t=p.useRef({value:s,previous:s});return p.useMemo(()=>(t.current.value!==s&&(t.current.previous=t.current.value,t.current.value=s),t.current.previous),[s])}var d6=[" ","Enter","ArrowUp","ArrowDown"],u6=[" ","Enter"],rd="Select",[Im,Om,m6]=bx(rd),[Dl]=za(rd,[m6,jm]),_m=jm(),[h6,Ii]=Dl(rd),[f6,p6]=Dl(rd),e2=s=>{const{__scopeSelect:t,children:n,open:a,defaultOpen:o,onOpenChange:l,value:d,defaultValue:u,onValueChange:h,dir:f,name:b,autoComplete:v,disabled:y,required:N,form:C}=s,g=_m(t),[k,A]=p.useState(null),[E,S]=p.useState(null),[R,H]=p.useState(!1),re=Yx(f),[K=!1,ee]=Ni({prop:a,defaultProp:o,onChange:l}),[me,pe]=Ni({prop:d,defaultProp:u,onChange:h}),L=p.useRef(null),X=k?C||!!k.closest("form"):!0,[z,V]=p.useState(new Set),se=Array.from(z).map(I=>I.props.value).join(";");return e.jsx(_j,{...g,children:e.jsxs(h6,{required:N,scope:t,trigger:k,onTriggerChange:A,valueNode:E,onValueNodeChange:S,valueNodeHasChildren:R,onValueNodeHasChildrenChange:H,contentId:Oa(),value:me,onValueChange:pe,open:K,onOpenChange:ee,dir:re,triggerPointerDownPosRef:L,disabled:y,children:[e.jsx(Im.Provider,{scope:t,children:e.jsx(f6,{scope:s.__scopeSelect,onNativeOptionAdd:p.useCallback(I=>{V(O=>new Set(O).add(I))},[]),onNativeOptionRemove:p.useCallback(I=>{V(O=>{const T=new Set(O);return T.delete(I),T})},[]),children:n})}),X?e.jsxs(C2,{"aria-hidden":!0,required:N,tabIndex:-1,name:b,autoComplete:v,value:me,onChange:I=>pe(I.target.value),disabled:y,form:C,children:[me===void 0?e.jsx("option",{value:""}):null,Array.from(z)]},se):null]})})};e2.displayName=rd;var t2="SelectTrigger",s2=p.forwardRef((s,t)=>{const{__scopeSelect:n,disabled:a=!1,...o}=s,l=_m(n),d=Ii(t2,n),u=d.disabled||a,h=Yt(t,d.onTriggerChange),f=Om(n),b=p.useRef("touch"),[v,y,N]=S2(g=>{const k=f().filter(S=>!S.disabled),A=k.find(S=>S.value===d.value),E=E2(k,g,A);E!==void 0&&d.onValueChange(E.value)}),C=g=>{u||(d.onOpenChange(!0),N()),g&&(d.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return e.jsx(Lj,{asChild:!0,...l,children:e.jsx(mt.button,{type:"button",role:"combobox","aria-controls":d.contentId,"aria-expanded":d.open,"aria-required":d.required,"aria-autocomplete":"none",dir:d.dir,"data-state":d.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":k2(d.value)?"":void 0,...o,ref:h,onClick:it(o.onClick,g=>{g.currentTarget.focus(),b.current!=="mouse"&&C(g)}),onPointerDown:it(o.onPointerDown,g=>{b.current=g.pointerType;const k=g.target;k.hasPointerCapture(g.pointerId)&&k.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(C(g),g.preventDefault())}),onKeyDown:it(o.onKeyDown,g=>{const k=v.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&y(g.key),!(k&&g.key===" ")&&d6.includes(g.key)&&(C(),g.preventDefault())})})})});s2.displayName=t2;var n2="SelectValue",r2=p.forwardRef((s,t)=>{const{__scopeSelect:n,className:a,style:o,children:l,placeholder:d="",...u}=s,h=Ii(n2,n),{onValueNodeHasChildrenChange:f}=h,b=l!==void 0,v=Yt(t,h.onValueNodeChange);return zs(()=>{f(b)},[f,b]),e.jsx(mt.span,{...u,ref:v,style:{pointerEvents:"none"},children:k2(h.value)?e.jsx(e.Fragment,{children:d}):l})});r2.displayName=n2;var x6="SelectIcon",a2=p.forwardRef((s,t)=>{const{__scopeSelect:n,children:a,...o}=s;return e.jsx(mt.span,{"aria-hidden":!0,...o,ref:t,children:a||""})});a2.displayName=x6;var g6="SelectPortal",i2=s=>e.jsx(fm,{asChild:!0,...s});i2.displayName=g6;var fo="SelectContent",o2=p.forwardRef((s,t)=>{const n=Ii(fo,s.__scopeSelect),[a,o]=p.useState();if(zs(()=>{o(new DocumentFragment)},[]),!n.open){const l=a;return l?Rl.createPortal(e.jsx(l2,{scope:s.__scopeSelect,children:e.jsx(Im.Slot,{scope:s.__scopeSelect,children:e.jsx("div",{children:s.children})})}),l):null}return e.jsx(c2,{...s,ref:t})});o2.displayName=fo;var _r=10,[l2,Oi]=Dl(fo),v6="SelectContentImpl",y6=wl("SelectContent.RemoveScroll"),c2=p.forwardRef((s,t)=>{const{__scopeSelect:n,position:a="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:l,onPointerDownOutside:d,side:u,sideOffset:h,align:f,alignOffset:b,arrowPadding:v,collisionBoundary:y,collisionPadding:N,sticky:C,hideWhenDetached:g,avoidCollisions:k,...A}=s,E=Ii(fo,n),[S,R]=p.useState(null),[H,re]=p.useState(null),K=Yt(t,oe=>R(oe)),[ee,me]=p.useState(null),[pe,L]=p.useState(null),X=Om(n),[z,V]=p.useState(!1),se=p.useRef(!1);p.useEffect(()=>{if(S)return iN(S)},[S]),Xj();const I=p.useCallback(oe=>{const[he,...Se]=X().map(Me=>Me.ref.current),[be]=Se.slice(-1),Pe=document.activeElement;for(const Me of oe)if(Me===Pe||(Me?.scrollIntoView({block:"nearest"}),Me===he&&H&&(H.scrollTop=0),Me===be&&H&&(H.scrollTop=H.scrollHeight),Me?.focus(),document.activeElement!==Pe))return},[X,H]),O=p.useCallback(()=>I([ee,S]),[I,ee,S]);p.useEffect(()=>{z&&O()},[z,O]);const{onOpenChange:T,triggerPointerDownPosRef:Y}=E;p.useEffect(()=>{if(S){let oe={x:0,y:0};const he=be=>{oe={x:Math.abs(Math.round(be.pageX)-(Y.current?.x??0)),y:Math.abs(Math.round(be.pageY)-(Y.current?.y??0))}},Se=be=>{oe.x<=10&&oe.y<=10?be.preventDefault():S.contains(be.target)||T(!1),document.removeEventListener("pointermove",he),Y.current=null};return Y.current!==null&&(document.addEventListener("pointermove",he),document.addEventListener("pointerup",Se,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",he),document.removeEventListener("pointerup",Se,{capture:!0})}}},[S,T,Y]),p.useEffect(()=>{const oe=()=>T(!1);return window.addEventListener("blur",oe),window.addEventListener("resize",oe),()=>{window.removeEventListener("blur",oe),window.removeEventListener("resize",oe)}},[T]);const[Q,F]=S2(oe=>{const he=X().filter(Pe=>!Pe.disabled),Se=he.find(Pe=>Pe.ref.current===document.activeElement),be=E2(he,oe,Se);be&&setTimeout(()=>be.ref.current.focus())}),te=p.useCallback((oe,he,Se)=>{const be=!se.current&&!Se;(E.value!==void 0&&E.value===he||be)&&(me(oe),be&&(se.current=!0))},[E.value]),B=p.useCallback(()=>S?.focus(),[S]),U=p.useCallback((oe,he,Se)=>{const be=!se.current&&!Se;(E.value!==void 0&&E.value===he||be)&&L(oe)},[E.value]),M=a==="popper"?Op:d2,q=M===Op?{side:u,sideOffset:h,align:f,alignOffset:b,arrowPadding:v,collisionBoundary:y,collisionPadding:N,sticky:C,hideWhenDetached:g,avoidCollisions:k}:{};return e.jsx(l2,{scope:n,content:S,viewport:H,onViewportChange:re,itemRefCallback:te,selectedItem:ee,onItemLeave:B,itemTextRefCallback:U,focusSelectedItem:O,selectedItemText:pe,position:a,isPositioned:z,searchRef:Q,children:e.jsx(Ux,{as:y6,allowPinchZoom:!0,children:e.jsx(zx,{asChild:!0,trapped:E.open,onMountAutoFocus:oe=>{oe.preventDefault()},onUnmountAutoFocus:it(o,oe=>{E.trigger?.focus({preventScroll:!0}),oe.preventDefault()}),children:e.jsx(td,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:oe=>oe.preventDefault(),onDismiss:()=>E.onOpenChange(!1),children:e.jsx(M,{role:"listbox",id:E.contentId,"data-state":E.open?"open":"closed",dir:E.dir,onContextMenu:oe=>oe.preventDefault(),...A,...q,onPlaced:()=>V(!0),ref:K,style:{display:"flex",flexDirection:"column",outline:"none",...A.style},onKeyDown:it(A.onKeyDown,oe=>{const he=oe.ctrlKey||oe.altKey||oe.metaKey;if(oe.key==="Tab"&&oe.preventDefault(),!he&&oe.key.length===1&&F(oe.key),["ArrowUp","ArrowDown","Home","End"].includes(oe.key)){let be=X().filter(Pe=>!Pe.disabled).map(Pe=>Pe.ref.current);if(["ArrowUp","End"].includes(oe.key)&&(be=be.slice().reverse()),["ArrowUp","ArrowDown"].includes(oe.key)){const Pe=oe.target,Me=be.indexOf(Pe);be=be.slice(Me+1)}setTimeout(()=>I(be)),oe.preventDefault()}})})})})})})});c2.displayName=v6;var b6="SelectItemAlignedPosition",d2=p.forwardRef((s,t)=>{const{__scopeSelect:n,onPlaced:a,...o}=s,l=Ii(fo,n),d=Oi(fo,n),[u,h]=p.useState(null),[f,b]=p.useState(null),v=Yt(t,K=>b(K)),y=Om(n),N=p.useRef(!1),C=p.useRef(!0),{viewport:g,selectedItem:k,selectedItemText:A,focusSelectedItem:E}=d,S=p.useCallback(()=>{if(l.trigger&&l.valueNode&&u&&f&&g&&k&&A){const K=l.trigger.getBoundingClientRect(),ee=f.getBoundingClientRect(),me=l.valueNode.getBoundingClientRect(),pe=A.getBoundingClientRect();if(l.dir!=="rtl"){const Pe=pe.left-ee.left,Me=me.left-Pe,Fe=K.left-Me,Je=K.width+Fe,lt=Math.max(Je,ee.width),Bt=window.innerWidth-_r,Xt=tb(Me,[_r,Math.max(_r,Bt-lt)]);u.style.minWidth=Je+"px",u.style.left=Xt+"px"}else{const Pe=ee.right-pe.right,Me=window.innerWidth-me.right-Pe,Fe=window.innerWidth-K.right-Me,Je=K.width+Fe,lt=Math.max(Je,ee.width),Bt=window.innerWidth-_r,Xt=tb(Me,[_r,Math.max(_r,Bt-lt)]);u.style.minWidth=Je+"px",u.style.right=Xt+"px"}const L=y(),X=window.innerHeight-_r*2,z=g.scrollHeight,V=window.getComputedStyle(f),se=parseInt(V.borderTopWidth,10),I=parseInt(V.paddingTop,10),O=parseInt(V.borderBottomWidth,10),T=parseInt(V.paddingBottom,10),Y=se+I+z+T+O,Q=Math.min(k.offsetHeight*5,Y),F=window.getComputedStyle(g),te=parseInt(F.paddingTop,10),B=parseInt(F.paddingBottom,10),U=K.top+K.height/2-_r,M=X-U,q=k.offsetHeight/2,oe=k.offsetTop+q,he=se+I+oe,Se=Y-he;if(he<=U){const Pe=L.length>0&&k===L[L.length-1].ref.current;u.style.bottom="0px";const Me=f.clientHeight-g.offsetTop-g.offsetHeight,Fe=Math.max(M,q+(Pe?B:0)+Me+O),Je=he+Fe;u.style.height=Je+"px"}else{const Pe=L.length>0&&k===L[0].ref.current;u.style.top="0px";const Fe=Math.max(U,se+g.offsetTop+(Pe?te:0)+q)+Se;u.style.height=Fe+"px",g.scrollTop=he-U+g.offsetTop}u.style.margin=`${_r}px 0`,u.style.minHeight=Q+"px",u.style.maxHeight=X+"px",a?.(),requestAnimationFrame(()=>N.current=!0)}},[y,l.trigger,l.valueNode,u,f,g,k,A,l.dir,a]);zs(()=>S(),[S]);const[R,H]=p.useState();zs(()=>{f&&H(window.getComputedStyle(f).zIndex)},[f]);const re=p.useCallback(K=>{K&&C.current===!0&&(S(),E?.(),C.current=!1)},[S,E]);return e.jsx(j6,{scope:n,contentWrapper:u,shouldExpandOnScrollRef:N,onScrollButtonChange:re,children:e.jsx("div",{ref:h,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:R},children:e.jsx(mt.div,{...o,ref:v,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});d2.displayName=b6;var w6="SelectPopperPosition",Op=p.forwardRef((s,t)=>{const{__scopeSelect:n,align:a="start",collisionPadding:o=_r,...l}=s,d=_m(n);return e.jsx(Mj,{...d,...l,ref:t,align:a,collisionPadding:o,style:{boxSizing:"border-box",...l.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Op.displayName=w6;var[j6,Xx]=Dl(fo,{}),_p="SelectViewport",u2=p.forwardRef((s,t)=>{const{__scopeSelect:n,nonce:a,...o}=s,l=Oi(_p,n),d=Xx(_p,n),u=Yt(t,l.onViewportChange),h=p.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),e.jsx(Im.Slot,{scope:n,children:e.jsx(mt.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:u,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:it(o.onScroll,f=>{const b=f.currentTarget,{contentWrapper:v,shouldExpandOnScrollRef:y}=d;if(y?.current&&v){const N=Math.abs(h.current-b.scrollTop);if(N>0){const C=window.innerHeight-_r*2,g=parseFloat(v.style.minHeight),k=parseFloat(v.style.height),A=Math.max(g,k);if(A<C){const E=A+N,S=Math.min(C,E),R=E-S;v.style.height=S+"px",v.style.bottom==="0px"&&(b.scrollTop=R>0?R:0,v.style.justifyContent="flex-end")}}}h.current=b.scrollTop})})})]})});u2.displayName=_p;var m2="SelectGroup",[N6,k6]=Dl(m2),C6=p.forwardRef((s,t)=>{const{__scopeSelect:n,...a}=s,o=Oa();return e.jsx(N6,{scope:n,id:o,children:e.jsx(mt.div,{role:"group","aria-labelledby":o,...a,ref:t})})});C6.displayName=m2;var h2="SelectLabel",f2=p.forwardRef((s,t)=>{const{__scopeSelect:n,...a}=s,o=k6(h2,n);return e.jsx(mt.div,{id:o.id,...a,ref:t})});f2.displayName=h2;var tm="SelectItem",[S6,p2]=Dl(tm),x2=p.forwardRef((s,t)=>{const{__scopeSelect:n,value:a,disabled:o=!1,textValue:l,...d}=s,u=Ii(tm,n),h=Oi(tm,n),f=u.value===a,[b,v]=p.useState(l??""),[y,N]=p.useState(!1),C=Yt(t,E=>h.itemRefCallback?.(E,a,o)),g=Oa(),k=p.useRef("touch"),A=()=>{o||(u.onValueChange(a),u.onOpenChange(!1))};if(a==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(S6,{scope:n,value:a,disabled:o,textId:g,isSelected:f,onItemTextChange:p.useCallback(E=>{v(S=>S||(E?.textContent??"").trim())},[]),children:e.jsx(Im.ItemSlot,{scope:n,value:a,disabled:o,textValue:b,children:e.jsx(mt.div,{role:"option","aria-labelledby":g,"data-highlighted":y?"":void 0,"aria-selected":f&&y,"data-state":f?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...d,ref:C,onFocus:it(d.onFocus,()=>N(!0)),onBlur:it(d.onBlur,()=>N(!1)),onClick:it(d.onClick,()=>{k.current!=="mouse"&&A()}),onPointerUp:it(d.onPointerUp,()=>{k.current==="mouse"&&A()}),onPointerDown:it(d.onPointerDown,E=>{k.current=E.pointerType}),onPointerMove:it(d.onPointerMove,E=>{k.current=E.pointerType,o?h.onItemLeave?.():k.current==="mouse"&&E.currentTarget.focus({preventScroll:!0})}),onPointerLeave:it(d.onPointerLeave,E=>{E.currentTarget===document.activeElement&&h.onItemLeave?.()}),onKeyDown:it(d.onKeyDown,E=>{h.searchRef?.current!==""&&E.key===" "||(u6.includes(E.key)&&A(),E.key===" "&&E.preventDefault())})})})})});x2.displayName=tm;var Ac="SelectItemText",g2=p.forwardRef((s,t)=>{const{__scopeSelect:n,className:a,style:o,...l}=s,d=Ii(Ac,n),u=Oi(Ac,n),h=p2(Ac,n),f=p6(Ac,n),[b,v]=p.useState(null),y=Yt(t,A=>v(A),h.onItemTextChange,A=>u.itemTextRefCallback?.(A,h.value,h.disabled)),N=b?.textContent,C=p.useMemo(()=>e.jsx("option",{value:h.value,disabled:h.disabled,children:N},h.value),[h.disabled,h.value,N]),{onNativeOptionAdd:g,onNativeOptionRemove:k}=f;return zs(()=>(g(C),()=>k(C)),[g,k,C]),e.jsxs(e.Fragment,{children:[e.jsx(mt.span,{id:h.textId,...l,ref:y}),h.isSelected&&d.valueNode&&!d.valueNodeHasChildren?Rl.createPortal(l.children,d.valueNode):null]})});g2.displayName=Ac;var v2="SelectItemIndicator",y2=p.forwardRef((s,t)=>{const{__scopeSelect:n,...a}=s;return p2(v2,n).isSelected?e.jsx(mt.span,{"aria-hidden":!0,...a,ref:t}):null});y2.displayName=v2;var Lp="SelectScrollUpButton",b2=p.forwardRef((s,t)=>{const n=Oi(Lp,s.__scopeSelect),a=Xx(Lp,s.__scopeSelect),[o,l]=p.useState(!1),d=Yt(t,a.onScrollButtonChange);return zs(()=>{if(n.viewport&&n.isPositioned){let u=function(){const f=h.scrollTop>0;l(f)};const h=n.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[n.viewport,n.isPositioned]),o?e.jsx(j2,{...s,ref:d,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=n;u&&h&&(u.scrollTop=u.scrollTop-h.offsetHeight)}}):null});b2.displayName=Lp;var Mp="SelectScrollDownButton",w2=p.forwardRef((s,t)=>{const n=Oi(Mp,s.__scopeSelect),a=Xx(Mp,s.__scopeSelect),[o,l]=p.useState(!1),d=Yt(t,a.onScrollButtonChange);return zs(()=>{if(n.viewport&&n.isPositioned){let u=function(){const f=h.scrollHeight-h.clientHeight,b=Math.ceil(h.scrollTop)<f;l(b)};const h=n.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[n.viewport,n.isPositioned]),o?e.jsx(j2,{...s,ref:d,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=n;u&&h&&(u.scrollTop=u.scrollTop+h.offsetHeight)}}):null});w2.displayName=Mp;var j2=p.forwardRef((s,t)=>{const{__scopeSelect:n,onAutoScroll:a,...o}=s,l=Oi("SelectScrollButton",n),d=p.useRef(null),u=Om(n),h=p.useCallback(()=>{d.current!==null&&(window.clearInterval(d.current),d.current=null)},[]);return p.useEffect(()=>()=>h(),[h]),zs(()=>{u().find(b=>b.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[u]),e.jsx(mt.div,{"aria-hidden":!0,...o,ref:t,style:{flexShrink:0,...o.style},onPointerDown:it(o.onPointerDown,()=>{d.current===null&&(d.current=window.setInterval(a,50))}),onPointerMove:it(o.onPointerMove,()=>{l.onItemLeave?.(),d.current===null&&(d.current=window.setInterval(a,50))}),onPointerLeave:it(o.onPointerLeave,()=>{h()})})}),E6="SelectSeparator",N2=p.forwardRef((s,t)=>{const{__scopeSelect:n,...a}=s;return e.jsx(mt.div,{"aria-hidden":!0,...a,ref:t})});N2.displayName=E6;var Dp="SelectArrow",T6=p.forwardRef((s,t)=>{const{__scopeSelect:n,...a}=s,o=_m(n),l=Ii(Dp,n),d=Oi(Dp,n);return l.open&&d.position==="popper"?e.jsx(Dj,{...o,...a,ref:t}):null});T6.displayName=Dp;function k2(s){return s===""||s===void 0}var C2=p.forwardRef((s,t)=>{const{value:n,...a}=s,o=p.useRef(null),l=Yt(t,o),d=JN(n);return p.useEffect(()=>{const u=o.current,h=window.HTMLSelectElement.prototype,b=Object.getOwnPropertyDescriptor(h,"value").set;if(d!==n&&b){const v=new Event("change",{bubbles:!0});b.call(u,n),u.dispatchEvent(v)}},[d,n]),e.jsx(sd,{asChild:!0,children:e.jsx("select",{...a,ref:l,defaultValue:n})})});C2.displayName="BubbleSelect";function S2(s){const t=kn(s),n=p.useRef(""),a=p.useRef(0),o=p.useCallback(d=>{const u=n.current+d;t(u),(function h(f){n.current=f,window.clearTimeout(a.current),f!==""&&(a.current=window.setTimeout(()=>h(""),1e3))})(u)},[t]),l=p.useCallback(()=>{n.current="",window.clearTimeout(a.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(a.current),[]),[n,o,l]}function E2(s,t,n){const o=t.length>1&&Array.from(t).every(f=>f===t[0])?t[0]:t,l=n?s.indexOf(n):-1;let d=A6(s,Math.max(l,0));o.length===1&&(d=d.filter(f=>f!==n));const h=d.find(f=>f.textValue.toLowerCase().startsWith(o.toLowerCase()));return h!==n?h:void 0}function A6(s,t){return s.map((n,a)=>s[(t+a)%s.length])}var P6=e2,T2=s2,R6=r2,I6=a2,O6=i2,A2=o2,_6=u2,P2=f2,R2=x2,L6=g2,M6=y2,I2=b2,O2=w2,_2=N2;const Dt=P6,$t=R6,It=p.forwardRef(({className:s,children:t,...n},a)=>e.jsxs(T2,{ref:a,className:Ze("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...n,children:[t,e.jsx(I6,{asChild:!0,children:e.jsx(ua,{className:"h-4 w-4 opacity-50"})})]}));It.displayName=T2.displayName;const L2=p.forwardRef(({className:s,...t},n)=>e.jsx(I2,{ref:n,className:Ze("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(wo,{className:"h-4 w-4"})}));L2.displayName=I2.displayName;const M2=p.forwardRef(({className:s,...t},n)=>e.jsx(O2,{ref:n,className:Ze("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(ua,{className:"h-4 w-4"})}));M2.displayName=O2.displayName;const Ot=p.forwardRef(({className:s,children:t,position:n="popper",...a},o)=>e.jsx(O6,{children:e.jsxs(A2,{ref:o,className:Ze("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:n,...a,children:[e.jsx(L2,{}),e.jsx(_6,{className:Ze("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),e.jsx(M2,{})]})}));Ot.displayName=A2.displayName;const D6=p.forwardRef(({className:s,...t},n)=>e.jsx(P2,{ref:n,className:Ze("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...t}));D6.displayName=P2.displayName;const Ie=p.forwardRef(({className:s,children:t,...n},a)=>e.jsxs(R2,{ref:a,className:Ze("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...n,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(M6,{children:e.jsx(Kt,{className:"h-4 w-4"})})}),e.jsx(L6,{children:t})]}));Ie.displayName=R2.displayName;const $6=p.forwardRef(({className:s,...t},n)=>e.jsx(_2,{ref:n,className:Ze("-mx-1 my-1 h-px bg-muted",s),...t}));$6.displayName=_2.displayName;function D2(s={}){const[t,n]=p.useState(!1),[a,o]=p.useState(null),[l,d]=p.useState(0),u=p.useCallback(async v=>{const y=await fetch("/api/uploads/request-url",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:v.name,size:v.size,contentType:v.type||"application/octet-stream"})});if(!y.ok){const N=await y.json().catch(()=>({}));throw new Error(N.error||"Failed to get upload URL")}return y.json()},[]),h=p.useCallback(async(v,y)=>{if(!(await fetch(y,{method:"PUT",body:v,headers:{"Content-Type":v.type||"application/octet-stream"}})).ok)throw new Error("Failed to upload file to storage")},[]),f=p.useCallback(async v=>{n(!0),o(null),d(0);try{d(10);const y=await u(v);return d(30),await h(v,y.uploadURL),d(100),s.onSuccess?.(y),y}catch(y){const N=y instanceof Error?y:new Error("Upload failed");return o(N),s.onError?.(N),null}finally{n(!1)}},[u,h,s]),b=p.useCallback(async v=>{const y=await fetch("/api/uploads/request-url",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:v.name,size:v.size,contentType:v.type||"application/octet-stream"})});if(!y.ok)throw new Error("Failed to get upload URL");return{method:"PUT",url:(await y.json()).uploadURL,headers:{"Content-Type":v.type||"application/octet-stream"}}},[]);return{uploadFile:f,getUploadParameters:b,isUploading:t,error:a,progress:l}}function q6({projectId:s}){const{toast:t}=pt(),[n,a]=p.useState([]),[o,l]=p.useState(!1),{data:d,isLoading:u}=Le({queryKey:["/api/projects",s,"screenshots"],queryFn:async()=>{const E=await fetch(`/api/projects/${s}/screenshots`);if(!E.ok)throw new Error("Failed to fetch screenshots");return E.json()}}),{uploadFile:h}=D2({}),f=Te({mutationFn:async E=>{await ke("DELETE",`/api/screenshots/${E}`)},onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/projects",s,"screenshots"]}),t({title:"Screenshot deleted"})}}),b=Te({mutationFn:async({id:E,fileName:S})=>(await ke("PATCH",`/api/screenshots/${E}`,{fileName:S})).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/projects",s,"screenshots"]}),t({title:"Name updated"})}}),v=Te({mutationFn:async E=>(await ke("PATCH",`/api/screenshots/${E}/request-approval`)).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/projects",s,"screenshots"]}),t({title:"Approval requested",description:"Client can now approve or request revisions."})}}),y=E=>{const S=E.target.files;if(!S||S.length===0)return;const R=[];for(let H=0;H<S.length;H++){const re=S[H],K=re.name.replace(/\.[^/.]+$/,"");R.push({file:re,name:K,preview:URL.createObjectURL(re)})}a(R),E.target.value=""},N=async()=>{l(!0);try{for(const E of n){const S=await h(E.file);S&&await ke("POST",`/api/projects/${s}/screenshots`,{objectPath:S.objectPath,fileName:E.name||S.metadata.name,fileSize:S.metadata.size,contentType:S.metadata.contentType})}ve.invalidateQueries({queryKey:["/api/projects",s,"screenshots"]}),t({title:"Screenshots uploaded",description:`${n.length} screenshot${n.length>1?"s":""} saved.`})}catch(E){t({title:"Upload failed",description:E.message,variant:"destructive"})}finally{n.forEach(E=>URL.revokeObjectURL(E.preview)),a([]),l(!1)}},[C,g]=p.useState(null),[k,A]=p.useState("");return e.jsxs("div",{className:"p-3 rounded-md bg-muted/40","data-testid":`screenshots-section-${s}`,children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(dy,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Screenshots"}),d&&d.length>0&&e.jsx(je,{variant:"secondary",className:"text-xs",children:d.length})]}),e.jsxs("div",{children:[e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:y,className:"hidden",id:`screenshot-upload-${s}`,"data-testid":`input-screenshot-upload-${s}`}),e.jsxs($,{variant:"outline",size:"sm",onClick:()=>document.getElementById(`screenshot-upload-${s}`)?.click(),"data-testid":`button-upload-screenshot-${s}`,children:[e.jsx(Qt,{className:"w-3.5 h-3.5 mr-1.5"}),"Upload"]})]})]}),u?e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ce,{className:"h-16 w-16 rounded-md"}),e.jsx(Ce,{className:"h-16 w-16 rounded-md"})]}):d&&d.length>0?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-2",children:d.map(E=>e.jsxs("div",{className:"group relative rounded-md overflow-visible border bg-background","data-testid":`screenshot-item-${E.id}`,children:[e.jsxs("a",{href:E.objectPath,target:"_blank",rel:"noopener noreferrer",className:"block relative",children:[e.jsx("img",{src:E.objectPath,alt:E.fileName,className:"w-full h-20 object-cover rounded-t-md",loading:"lazy"}),E.approvalStatus&&e.jsxs("div",{className:"absolute top-1 right-1",children:[E.approvalStatus==="approved"&&e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-emerald-500 border border-white",title:"Approved"}),E.approvalStatus==="pending"&&e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-blue-500 border border-white",title:"Awaiting approval"}),E.approvalStatus==="revisions"&&e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-amber-500 border border-white",title:"Revisions requested"})]})]}),e.jsxs("div",{className:"p-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between gap-1",children:[C===E.id?e.jsxs("div",{className:"flex items-center gap-1 flex-1 min-w-0",children:[e.jsx(De,{value:k,onChange:S=>A(S.target.value),className:"h-6 text-[11px] px-1.5 flex-1 min-w-0",autoFocus:!0,onKeyDown:S=>{S.key==="Enter"?(b.mutate({id:E.id,fileName:k}),g(null)):S.key==="Escape"&&g(null)},"data-testid":`input-rename-screenshot-${E.id}`}),e.jsx($,{size:"icon",variant:"ghost",className:"h-5 w-5 shrink-0",onClick:()=>{b.mutate({id:E.id,fileName:k}),g(null)},"data-testid":`button-confirm-rename-${E.id}`,children:e.jsx(Kt,{className:"w-3 h-3"})})]}):e.jsx("span",{className:"text-[11px] text-muted-foreground truncate flex-1 cursor-pointer",title:`${E.fileName} (click to rename)`,onClick:()=>{g(E.id),A(E.fileName)},"data-testid":`text-screenshot-name-${E.id}`,children:E.fileName}),e.jsx($,{size:"icon",variant:"ghost",className:"h-5 w-5 shrink-0",onClick:()=>f.mutate(E.id),"data-testid":`button-delete-screenshot-${E.id}`,children:e.jsx(ps,{className:"w-3 h-3"})})]}),E.approvalStatus==="revisions"&&E.revisionNotes&&e.jsxs("p",{className:"text-[10px] text-amber-600 dark:text-amber-400 mt-1 line-clamp-2",title:E.revisionNotes,children:["Revisions: ",E.revisionNotes]}),!E.approvalStatus&&e.jsxs($,{variant:"outline",size:"sm",className:"w-full mt-1.5 h-6 text-[10px]",onClick:()=>v.mutate(E.id),disabled:v.isPending,"data-testid":`button-request-approval-${E.id}`,children:[e.jsx(Yw,{className:"w-3 h-3 mr-1"}),"Request Approval"]}),E.approvalStatus==="approved"&&e.jsx(je,{variant:"secondary",className:"text-[10px] mt-1.5 w-full justify-center bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 border-emerald-500/20",children:"Approved"}),E.approvalStatus==="pending"&&e.jsx(je,{variant:"secondary",className:"text-[10px] mt-1.5 w-full justify-center",children:"Awaiting Approval"}),E.approvalStatus==="revisions"&&e.jsxs($,{variant:"outline",size:"sm",className:"w-full mt-1.5 h-6 text-[10px]",onClick:()=>v.mutate(E.id),disabled:v.isPending,"data-testid":`button-resubmit-approval-${E.id}`,children:[e.jsx(bs,{className:"w-3 h-3 mr-1"}),"Resubmit for Approval"]})]})]},E.id))}):e.jsx("p",{className:"text-xs text-muted-foreground",children:"No screenshots uploaded yet"}),e.jsx(Ct,{open:n.length>0,onOpenChange:()=>{n.forEach(E=>URL.revokeObjectURL(E.preview)),a([])},children:e.jsxs(vt,{className:"max-w-lg",children:[e.jsx(yt,{children:e.jsx(bt,{children:"Name Your Screenshots"})}),e.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:n.map((E,S)=>e.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-md border","data-testid":`pending-upload-${S}`,children:[e.jsx("img",{src:E.preview,alt:"",className:"w-14 h-14 rounded-md object-cover shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[e.jsx(De,{value:E.name,onChange:R=>{const H=[...n];H[S]={...H[S],name:R.target.value},a(H)},placeholder:"Screenshot name",className:"text-sm","data-testid":`input-screenshot-name-${S}`}),e.jsx("p",{className:"text-[10px] text-muted-foreground truncate",children:E.file.name})]})]},S))}),e.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[e.jsx($,{variant:"ghost",size:"sm",onClick:()=>{n.forEach(E=>URL.revokeObjectURL(E.preview)),a([])},disabled:o,"data-testid":"button-cancel-upload",children:"Cancel"}),e.jsx($,{size:"sm",onClick:N,disabled:o||n.some(E=>!E.name.trim()),"data-testid":"button-confirm-upload",children:o?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"w-4 h-4 mr-1.5 animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(dy,{className:"w-4 h-4 mr-1.5"}),"Upload ",n.length>1?`${n.length} Screenshots`:"Screenshot"]})})]})]})})]})}function F6({projectId:s}){const{data:t,isLoading:n}=Le({queryKey:["/api/projects",s,"client-files"],queryFn:async()=>{const a=await fetch(`/api/projects/${s}/client-files`);if(!a.ok)throw new Error("Failed to fetch client files");return a.json()}});return n?e.jsxs("div",{className:"p-3 rounded-md bg-muted/40",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Vu,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Client Files"})]}),e.jsx(Ce,{className:"h-8 w-full"})]}):!t||t.length===0?null:e.jsxs("div",{className:"p-3 rounded-md bg-muted/40","data-testid":`client-files-section-${s}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Vu,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Client Files"}),e.jsx(je,{variant:"secondary",className:"text-xs",children:t.length})]}),e.jsx("div",{className:"space-y-1.5",children:t.map(a=>e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-md border bg-background","data-testid":`client-file-${a.id}`,children:[e.jsx(zw,{className:"w-4 h-4 text-muted-foreground shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-medium truncate","data-testid":`text-client-file-name-${a.id}`,children:a.fileName}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:[a.contentType," ",a.fileSize?` ${(a.fileSize/1024).toFixed(1)} KB`:""]})]}),e.jsx("a",{href:a.objectPath,target:"_blank",rel:"noopener noreferrer",children:e.jsx($,{size:"icon",variant:"ghost","data-testid":`button-download-client-file-${a.id}`,children:e.jsx(co,{className:"w-3.5 h-3.5"})})})]},a.id))})]})}function z6(){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsx(Ce,{className:"h-8 w-32 mb-1"}),e.jsx(Ce,{className:"h-4 w-56"})]}),e.jsx(Ce,{className:"h-9 w-36"})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:Array.from({length:2}).map((s,t)=>e.jsxs(ce,{className:"p-5",children:[e.jsx(Ce,{className:"h-6 w-48 mb-3"}),e.jsx(Ce,{className:"h-4 w-full mb-2"}),e.jsx(Ce,{className:"h-4 w-36"})]},t))})]})}const U6={netlify:{label:"Netlify",color:"teal",accent:"from-teal-500/5 to-cyan-500/5 border-teal-500/20",description:"Static sites & JAMstack",icon:"N"},vercel:{label:"Vercel",color:"blue",accent:"from-blue-500/5 to-indigo-500/5 border-blue-500/20",description:"Static & serverless apps",icon:"V"},railway:{label:"Railway",color:"purple",accent:"from-purple-500/5 to-pink-500/5 border-purple-500/20",description:"Docker & full-stack apps",icon:"R"}};function sb({project:s,platform:t,isConnected:n,platformId:a,platformUrl:o}){const{toast:l}=pt(),d=U6[t],[u,h]=p.useState(s.githubRepoUrl||""),[f,b]=p.useState(!1),v=t==="netlify"?{bg:"bg-teal-500/10",text:"text-teal-600",darkText:"dark:text-teal-400",heading:"text-teal-700 dark:text-teal-300",border:"border-teal-500/30",link:"text-teal-600 dark:text-teal-400"}:t==="vercel"?{bg:"bg-blue-500/10",text:"text-blue-600",darkText:"dark:text-blue-400",heading:"text-blue-700 dark:text-blue-300",border:"border-blue-500/30",link:"text-blue-600 dark:text-blue-400"}:{bg:"bg-purple-500/10",text:"text-purple-600",darkText:"dark:text-purple-400",heading:"text-purple-700 dark:text-purple-300",border:"border-purple-500/30",link:"text-purple-600 dark:text-purple-400"},{data:y,refetch:N}=Le({queryKey:["/api/projects",s.id,`${t}/info`],enabled:n&&!!a,retry:!1}),C=Te({mutationFn:async()=>(await ke("POST",`/api/projects/${s.id}/${t}/create`)).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/projects"]}),l({title:`${d.label} project created`,description:"Now link a GitHub repo for auto-deploy."})},onError:E=>l({title:"Error",description:E.message,variant:"destructive"})}),g=Te({mutationFn:async()=>(await ke("POST",`/api/projects/${s.id}/${t}/link-github`,{repoUrl:u,branch:"main"})).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/projects"]}),N(),b(!1),l({title:"GitHub linked",description:`Repo connected to ${d.label}.`})},onError:E=>l({title:"Error",description:E.message,variant:"destructive"})}),k=Te({mutationFn:async()=>(await ke("POST",`/api/projects/${s.id}/${t}/deploy`)).json(),onSuccess:()=>{N(),l({title:"Deploy triggered",description:`Building on ${d.label}...`})},onError:E=>l({title:"Error",description:E.message,variant:"destructive"})}),A=Te({mutationFn:async()=>(await ke("DELETE",`/api/projects/${s.id}/${t}`)).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/projects"]}),l({title:"Disconnected",description:`${d.label} removed from this project.`})},onError:E=>l({title:"Error",description:E.message,variant:"destructive"})});return n?e.jsxs("div",{className:`p-3 rounded-lg bg-gradient-to-r ${d.accent}`,"data-testid":`deploy-platform-${t}-${s.id}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`w-5 h-5 rounded text-[10px] font-bold flex items-center justify-center ${v.bg} ${v.text}`,children:d.icon}),e.jsx("span",{className:`text-xs font-medium uppercase tracking-wider ${v.heading}`,children:d.label}),e.jsx(je,{variant:"outline",className:`text-[10px] px-1.5 py-0 ${v.border} ${v.text} ${v.darkText}`,children:"Active"})]}),e.jsx($,{size:"icon",variant:"ghost",className:"h-6 w-6 text-muted-foreground hover:text-destructive",onClick:()=>{confirm(`Disconnect ${d.label}? This will remove the project from ${d.label}.`)&&A.mutate()},"data-testid":`button-unlink-${t}-${s.id}`,children:e.jsx(V3,{className:"w-3 h-3"})})]}),o&&e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(jn,{className:"w-3 h-3 text-muted-foreground"}),e.jsx("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:`text-xs underline underline-offset-2 truncate ${v.link}`,"data-testid":`link-deploy-url-${t}-${s.id}`,children:o})]}),s.githubRepoUrl?e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ku,{className:"w-3 h-3 text-muted-foreground"}),e.jsx("span",{className:"text-[11px] text-muted-foreground truncate",children:s.githubRepoUrl}),e.jsx(je,{variant:"secondary",className:"text-[10px] px-1.5 py-0",children:"auto"})]}):f?e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(De,{value:u,onChange:E=>h(E.target.value),placeholder:"https://github.com/user/repo",className:"flex-1 text-xs h-7","data-testid":`input-github-repo-${t}-${s.id}`}),e.jsx($,{size:"sm",variant:"default",className:"h-7 text-xs",onClick:()=>g.mutate(),disabled:g.isPending||!u,"data-testid":`button-link-github-${t}-${s.id}`,children:g.isPending?e.jsx(Qe,{className:"w-3 h-3 animate-spin"}):"Link"}),e.jsx($,{size:"sm",variant:"ghost",className:"h-7 text-xs",onClick:()=>b(!1),children:"Cancel"})]}):e.jsxs($,{variant:"outline",size:"sm",onClick:()=>b(!0),className:"mb-2 h-7 text-xs","data-testid":`button-show-link-github-${t}-${s.id}`,children:[e.jsx(Ku,{className:"w-3.5 h-3.5 mr-1"}),"Link GitHub Repo"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs($,{size:"sm",variant:"outline",className:"h-7 text-xs",onClick:()=>k.mutate(),disabled:k.isPending,"data-testid":`button-deploy-${t}-${s.id}`,children:[k.isPending?e.jsx(Qe,{className:"w-3 h-3 mr-1 animate-spin"}):e.jsx(Ol,{className:"w-3 h-3 mr-1"}),"Deploy Now"]}),y?.deploys?.[0]&&e.jsxs("span",{className:"text-[10px] text-muted-foreground",children:["Last: ",new Date(y.deploys[0].created_at).toLocaleDateString(),"  ",y.deploys[0].state]})]})]}):e.jsxs($,{variant:"outline",size:"sm",className:"justify-start h-auto py-2.5 px-3",onClick:()=>C.mutate(),disabled:C.isPending,"data-testid":`button-create-${t}-${s.id}`,children:[C.isPending?e.jsx(Qe,{className:"w-5 h-5 mr-2.5 animate-spin"}):e.jsx("span",{className:`w-6 h-6 rounded text-[11px] font-bold flex items-center justify-center mr-2.5 ${v.bg} ${v.text}`,children:d.icon}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-sm font-medium",children:d.label}),e.jsx("div",{className:"text-[10px] text-muted-foreground",children:d.description})]})]})}function B6({project:s}){const{data:t}=Le({queryKey:["/api/deploy/status"]}),n=Object.entries(t||{}).filter(([d,u])=>u.configured).map(([d])=>d);if(n.length===0)return e.jsxs("div",{className:"p-3 rounded-md bg-muted/40","data-testid":`deploy-section-${s.id}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ma,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Deploy"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Add a deploy platform token in Settings to enable deployment (Netlify, Vercel, or Railway)."})]});const a=d=>({isConnected:d==="netlify"?!!s.netlifySiteId:d==="vercel"?!!s.vercelProjectId:!!s.railwayProjectId,platformId:d==="netlify"?s.netlifySiteId:d==="vercel"?s.vercelProjectId:s.railwayProjectId,platformUrl:d==="netlify"?s.netlifySiteUrl:d==="vercel"?s.vercelProjectUrl:s.railwayProjectUrl}),o=n.filter(d=>a(d).isConnected),l=n.filter(d=>!a(d).isConnected);return e.jsxs("div",{className:"p-3 rounded-md bg-muted/40","data-testid":`deploy-section-${s.id}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Ma,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Deploy"}),o.length>0&&e.jsxs(je,{variant:"secondary",className:"text-[10px] px-1.5 py-0",children:[o.length," active"]})]}),e.jsxs("div",{className:"space-y-2",children:[o.map(d=>{const u=a(d);return e.jsx(sb,{project:s,platform:d,...u},d)}),l.length>0&&e.jsxs(e.Fragment,{children:[o.length>0&&e.jsx("p",{className:"text-[10px] text-muted-foreground pt-1",children:"Add another platform:"}),e.jsx("div",{className:"grid gap-1.5",children:l.map(d=>{const u=a(d);return e.jsx(sb,{project:s,platform:d,...u},d)})})]})]})]})}function H6(){zn("Projects");const{toast:s}=pt(),[t,n]=p.useState(""),[a,o]=p.useState(!1),[l,d]=p.useState(!1),[u,h]=p.useState(!1),[f,b]=p.useState(null),[v,y]=p.useState({customerId:"",name:"",description:""}),[N,C]=p.useState({rateId:"",quantity:"1",description:"",recordedAt:""}),[g,k]=p.useState(!1),[A,E]=p.useState(null),[S,R]=p.useState({rateId:"",quantity:"1",description:"",recordedAt:""}),[H,re]=p.useState("30"),[K,ee]=p.useState(null),[me,pe]=p.useState(""),[L,X]=p.useState(null),[z,V]=p.useState(!1),[se,I]=p.useState(null),[O,T]=p.useState({title:"",description:"",type:"update",status:"completed"}),[Y,Q]=p.useState(new Set),F=de=>{Q(Oe=>{const st=new Set(Oe);return st.has(de)?st.delete(de):st.add(de),st})},{data:te,isLoading:B}=Le({queryKey:["/api/projects"]}),{data:U}=Le({queryKey:["/api/customers"]}),{data:M}=Le({queryKey:["/api/billing-rates"]}),{data:q}=Le({queryKey:["/api/work-entries"]}),oe=Te({mutationFn:async de=>(await ke("POST","/api/projects",de)).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/projects"]}),ve.invalidateQueries({queryKey:["/api/dashboard/stats"]}),o(!1),y({customerId:"",name:"",description:""}),s({title:"Project created",description:"New project has been added."})},onError:de=>{s({title:"Error",description:de.message,variant:"destructive"})}}),he=Te({mutationFn:async de=>(await ke("POST","/api/work-entries",de)).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/work-entries"]}),ve.invalidateQueries({queryKey:["/api/dashboard/stats"]}),d(!1),C({rateId:"",quantity:"1",description:""}),s({title:"Work logged",description:"Work entry has been recorded."})},onError:de=>{s({title:"Error",description:de.message,variant:"destructive"})}}),Se=Te({mutationFn:async({id:de,data:Oe})=>(await ke("PATCH",`/api/work-entries/${de}`,Oe)).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/work-entries"]}),ve.invalidateQueries({queryKey:["/api/dashboard/stats"]}),k(!1),E(null),s({title:"Entry updated",description:"Work entry has been updated."})},onError:de=>{s({title:"Error",description:de.message,variant:"destructive"})}}),be=Te({mutationFn:async de=>{await ke("DELETE",`/api/work-entries/${de}`)},onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/work-entries"]}),ve.invalidateQueries({queryKey:["/api/dashboard/stats"]}),s({title:"Entry deleted",description:"Work entry has been removed."})}}),Pe=Te({mutationFn:async de=>{await ke("DELETE",`/api/projects/${de}`)},onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/projects"]}),ve.invalidateQueries({queryKey:["/api/work-entries"]}),ve.invalidateQueries({queryKey:["/api/invoices"]}),ve.invalidateQueries({queryKey:["/api/dashboard/stats"]}),s({title:"Project deleted",description:"Project and all related data have been removed."})},onError:de=>{s({title:"Error",description:de.message,variant:"destructive"})}}),Me=Te({mutationFn:async de=>(await ke("POST","/api/invoices/generate",{...de,taxRate:0})).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/invoices"]}),ve.invalidateQueries({queryKey:["/api/work-entries"]}),ve.invalidateQueries({queryKey:["/api/dashboard/stats"]}),h(!1),s({title:"Invoice generated",description:"Invoice has been created from unbilled work."})},onError:de=>{s({title:"Error",description:de.message,variant:"destructive"})}}),Fe=Te({mutationFn:async({id:de,field:Oe,url:st})=>(await ke("PATCH",`/api/projects/${de}`,{[Oe]:st||null})).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/projects"]}),ee(null),s({title:"Link saved",description:"The link has been updated."})},onError:de=>{s({title:"Error",description:de.message,variant:"destructive"})}}),Je=(de,Oe)=>{navigator.clipboard.writeText(Oe),X(de),setTimeout(()=>X(null),2e3),s({title:"Copied",description:"Link copied to clipboard."})},lt=Te({mutationFn:async({projectId:de,data:Oe})=>(await ke("POST",`/api/projects/${de}/updates`,Oe)).json(),onSuccess:()=>{se&&ve.invalidateQueries({queryKey:["/api/projects",se,"updates"]}),V(!1),T({title:"",description:"",type:"update",status:"completed"}),s({title:"Update posted",description:"Progress update has been published."})},onError:de=>{s({title:"Error",description:de.message,variant:"destructive"})}});Te({mutationFn:async de=>{await ke("DELETE",`/api/project-updates/${de}`)},onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/projects"]}),s({title:"Update deleted"})},onError:de=>{s({title:"Error",description:de.message,variant:"destructive"})}});const Bt=de=>{b(de),C({rateId:"",quantity:"1",description:"",recordedAt:new Date().toISOString().split("T")[0]}),d(!0)},Xt=de=>{E(de),R({rateId:de.rateId,quantity:String(Number(de.quantity)),description:de.description||"",recordedAt:de.recordedAt?new Date(de.recordedAt).toISOString().split("T")[0]:new Date().toISOString().split("T")[0]}),k(!0)},us=de=>{b(de),re("30"),h(!0)},ws=de=>{if(de.preventDefault(),!f)return;const Oe=te?.find(st=>st.id===f);Oe&&he.mutate({projectId:f,customerId:Oe.customerId,rateId:N.rateId,quantity:N.quantity,description:N.description,recordedAt:N.recordedAt?new Date(N.recordedAt+"T12:00:00").toISOString():void 0})},os=de=>{de.preventDefault(),A&&Se.mutate({id:A.id,data:{rateId:S.rateId,quantity:S.quantity,description:S.description,recordedAt:S.recordedAt?new Date(S.recordedAt+"T12:00:00").toISOString():void 0}})};if(B)return e.jsx(z6,{});const ms=new Map(U?.map(de=>[de.id,de])??[]),Et=new Map(M?.map(de=>[de.id,de])??[]),_t=te?.filter(de=>de.name.toLowerCase().includes(t.toLowerCase())||(ms.get(de.customerId)?.name??"").toLowerCase().includes(t.toLowerCase()))??[],wt=de=>{const Oe=q?.filter(D=>D.projectId===de)??[],st=Oe.filter(D=>!D.invoiceId),St=Oe.filter(D=>D.invoiceId),Zt=st.reduce((D,xe)=>{const Ke=Et.get(xe.rateId);return D+Number(xe.quantity)*(Ke?.rateCents??0)},0),qt=St.reduce((D,xe)=>{const Ke=Et.get(xe.rateId);return D+Number(xe.quantity)*(Ke?.rateCents??0)},0);return{totalEntries:Oe.length,unbilledCount:st.length,unbilledAmount:Zt,billedAmount:qt,totalAmount:Zt+qt}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight","data-testid":"text-page-title",children:"Projects"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Track work and generate invoices for each project"})]}),e.jsxs($,{onClick:()=>{y({customerId:"",name:"",description:""}),o(!0)},"data-testid":"button-add-project",children:[e.jsx(Qt,{className:"w-4 h-4 mr-2"}),"New Project"]})]}),e.jsxs("div",{className:"relative max-w-sm",children:[e.jsx(sn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(De,{placeholder:"Search projects...",value:t,onChange:de=>n(de.target.value),className:"pl-9","data-testid":"input-search-projects"})]}),_t.length>0?e.jsx("div",{className:"space-y-5",children:(()=>{const de=new Map;return _t.forEach(Oe=>{const st=Oe.customerId;de.has(st)||de.set(st,[]),de.get(st).push(Oe)}),Array.from(de.entries()).map(([Oe,st])=>{const St=ms.get(Oe),Zt=Y.has(Oe),qt=st.reduce((xe,Ke)=>xe+wt(Ke.id).unbilledAmount,0),D=st.reduce((xe,Ke)=>xe+wt(Ke.id).billedAmount,0);return e.jsxs("div",{"data-testid":`customer-group-${Oe}`,children:[e.jsxs("button",{onClick:()=>F(Oe),className:"w-full flex items-center justify-between gap-3 px-4 py-3 rounded-lg bg-muted/50 hover-elevate transition-colors mb-2","data-testid":`button-toggle-customer-${Oe}`,children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx(ua,{className:`w-4 h-4 text-muted-foreground shrink-0 transition-transform ${Zt?"-rotate-90":""}`}),e.jsx(hl,{className:"w-4 h-4 text-muted-foreground shrink-0"}),e.jsx("span",{className:"font-semibold truncate","data-testid":`text-customer-group-name-${Oe}`,children:St?.company||St?.name||"Unknown Customer"}),e.jsxs(je,{variant:"secondary",className:"text-xs shrink-0",children:[st.length," ",st.length===1?"project":"projects"]})]}),e.jsxs("div",{className:"flex items-center gap-4 shrink-0 text-sm",children:[qt>0&&e.jsxs("span",{className:"text-amber-500 font-medium","data-testid":`text-customer-unbilled-${Oe}`,children:["$",(qt/100).toLocaleString()," unbilled"]}),D>0&&e.jsxs("span",{className:"text-muted-foreground","data-testid":`text-customer-billed-${Oe}`,children:["$",(D/100).toLocaleString()," billed"]})]})]}),!Zt&&e.jsx("div",{className:"space-y-4 pl-4 border-l-2 border-muted ml-4",children:st.map(xe=>{const Ke=wt(xe.id),jt=q?.filter(nt=>nt.projectId===xe.id&&!nt.invoiceId)??[];return e.jsxs(ce,{className:"p-5","data-testid":`card-project-${xe.id}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 flex-wrap mb-4",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h3",{className:"font-semibold","data-testid":`text-project-name-${xe.id}`,children:xe.name}),e.jsx(je,{variant:"secondary",className:`text-xs ${Zn(xe.status)}`,children:xe.status})]}),xe.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:xe.description})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsxs($,{variant:"outline",size:"sm",onClick:()=>Bt(xe.id),"data-testid":`button-log-work-${xe.id}`,children:[e.jsx(Gt,{className:"w-4 h-4 mr-1.5"}),"Log Work"]}),e.jsxs($,{variant:"outline",size:"sm",onClick:()=>{I(xe.id),T({title:"",description:"",type:"update",status:"completed"}),V(!0)},"data-testid":`button-post-update-${xe.id}`,children:[e.jsx(jl,{className:"w-4 h-4 mr-1.5"}),"Post Update"]}),Ke.unbilledCount>0&&e.jsxs($,{size:"sm",onClick:()=>us(xe.id),"data-testid":`button-generate-invoice-${xe.id}`,children:[e.jsx(La,{className:"w-4 h-4 mr-1.5"}),"Generate Invoice"]}),e.jsx($,{variant:"ghost",size:"icon",className:"text-muted-foreground hover:text-destructive",onClick:()=>{confirm("Delete this project? This will also remove all related work entries and invoices.")&&Pe.mutate(xe.id)},disabled:Pe.isPending,"data-testid":`button-delete-project-${xe.id}`,children:e.jsx(ps,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"mb-4 grid grid-cols-1 sm:grid-cols-3 gap-3",children:[(()=>{const nt=`${xe.id}-previewUrl`;return e.jsxs("div",{className:"p-3 rounded-md bg-muted/40","data-testid":`previewUrl-section-${xe.id}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(tn,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Preview Link"})]}),K===nt?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{value:me,onChange:At=>pe(At.target.value),placeholder:"https://preview.example.com/site",className:"flex-1 text-sm","data-testid":`input-previewUrl-${xe.id}`}),e.jsx($,{size:"icon",variant:"ghost",onClick:()=>Fe.mutate({id:xe.id,field:"previewUrl",url:me}),disabled:Fe.isPending,"data-testid":`button-save-previewUrl-${xe.id}`,children:e.jsx(Kt,{className:"w-4 h-4"})}),e.jsx($,{size:"icon",variant:"ghost",onClick:()=>ee(null),"data-testid":`button-cancel-previewUrl-${xe.id}`,children:e.jsx(sr,{className:"w-4 h-4"})})]}):xe.previewUrl?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("a",{href:xe.previewUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sm truncate flex-1 underline decoration-muted-foreground/30 underline-offset-2","data-testid":`link-previewUrl-${xe.id}`,children:xe.previewUrl}),e.jsx($,{size:"icon",variant:"ghost",onClick:()=>Je(nt,xe.previewUrl),"data-testid":`button-copy-previewUrl-${xe.id}`,children:L===nt?e.jsx(Kt,{className:"w-4 h-4 text-green-500"}):e.jsx(Ps,{className:"w-4 h-4"})}),e.jsx($,{size:"icon",variant:"ghost",onClick:()=>window.open(xe.previewUrl,"_blank"),"data-testid":`button-open-previewUrl-${xe.id}`,children:e.jsx(tn,{className:"w-4 h-4"})}),e.jsx($,{size:"icon",variant:"ghost",onClick:()=>{ee(nt),pe(xe.previewUrl||"")},"data-testid":`button-edit-previewUrl-${xe.id}`,children:e.jsx(ia,{className:"w-4 h-4"})})]}):e.jsxs($,{variant:"outline",size:"sm",onClick:()=>{ee(nt),pe("")},"data-testid":`button-add-previewUrl-${xe.id}`,children:[e.jsx(Qt,{className:"w-4 h-4 mr-1.5"}),"Add Preview Link"]})]})})(),(()=>{const nt=`${window.location.origin}/progress/${xe.id}`,At=`${xe.id}-progressUrl`;return e.jsxs("div",{className:"p-3 rounded-md bg-muted/40","data-testid":`progressUrl-section-${xe.id}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(jl,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Progress Link"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm truncate flex-1 text-muted-foreground","data-testid":`link-progressUrl-${xe.id}`,children:["/progress/",xe.id.slice(0,8),"..."]}),e.jsx($,{size:"icon",variant:"ghost",onClick:()=>Je(At,nt),"data-testid":`button-copy-progressUrl-${xe.id}`,children:L===At?e.jsx(Kt,{className:"w-4 h-4 text-green-500"}):e.jsx(Ps,{className:"w-4 h-4"})}),e.jsx($,{size:"icon",variant:"ghost",onClick:()=>window.open(nt,"_blank"),"data-testid":`button-open-progressUrl-${xe.id}`,children:e.jsx(tn,{className:"w-4 h-4"})})]})]})})(),(()=>{if(!St?.portalToken)return null;const nt=`${window.location.origin}/portal/${St.portalToken}`,At=`${xe.id}-portalUrl`;return e.jsxs("div",{className:"p-3 rounded-md bg-muted/40","data-testid":`portalUrl-section-${xe.id}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ei,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Client Portal"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm truncate flex-1 text-muted-foreground","data-testid":`link-portalUrl-${xe.id}`,children:["/portal/",St.portalToken.slice(0,8),"..."]}),e.jsx($,{size:"icon",variant:"ghost",onClick:()=>Je(At,nt),"data-testid":`button-copy-portalUrl-${xe.id}`,children:L===At?e.jsx(Kt,{className:"w-4 h-4 text-green-500"}):e.jsx(Ps,{className:"w-4 h-4"})}),e.jsx($,{size:"icon",variant:"ghost",onClick:()=>window.open(nt,"_blank"),"data-testid":`button-open-portalUrl-${xe.id}`,children:e.jsx(tn,{className:"w-4 h-4"})})]})]})})()]}),e.jsx("div",{className:"mb-4",children:e.jsx(B6,{project:xe})}),e.jsx("div",{className:"mb-4",children:e.jsx(q6,{projectId:xe.id})}),e.jsx("div",{className:"mb-4",children:e.jsx(F6,{projectId:xe.id})}),Ke.totalEntries>0&&e.jsxs("div",{className:"mb-4 grid grid-cols-2 sm:grid-cols-4 gap-3","data-testid":`metrics-project-${xe.id}`,children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-md bg-muted/40",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-md bg-primary/10 shrink-0",children:e.jsx(Jw,{className:"w-4 h-4 text-primary"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs text-muted-foreground leading-none mb-1",children:"Total Value"}),e.jsx("p",{className:"text-sm font-semibold leading-none truncate","data-testid":`text-total-value-${xe.id}`,children:qe(Ke.totalAmount)})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-md bg-muted/40",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-md bg-green-500/10 shrink-0",children:e.jsx(Fn,{className:"w-4 h-4 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs text-muted-foreground leading-none mb-1",children:"Invoiced"}),e.jsx("p",{className:"text-sm font-semibold leading-none truncate","data-testid":`text-billed-value-${xe.id}`,children:qe(Ke.billedAmount)})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-md bg-muted/40",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-md bg-amber-500/10 shrink-0",children:e.jsx(Gt,{className:"w-4 h-4 text-amber-600 dark:text-amber-400"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs text-muted-foreground leading-none mb-1",children:"Unbilled"}),e.jsx("p",{className:"text-sm font-semibold leading-none truncate","data-testid":`text-unbilled-value-${xe.id}`,children:qe(Ke.unbilledAmount)})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-md bg-muted/40",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-md bg-blue-500/10 shrink-0",children:e.jsx(Hw,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs text-muted-foreground leading-none mb-1",children:"Deliverables"}),e.jsx("p",{className:"text-sm font-semibold leading-none truncate","data-testid":`text-total-entries-${xe.id}`,children:Ke.totalEntries})]})]})]}),jt.length>0&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-2 pr-4 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Work"}),e.jsx("th",{className:"text-left py-2 pr-4 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"text-right py-2 pr-4 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Qty"}),e.jsx("th",{className:"text-right py-2 pr-4 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Rate"}),e.jsx("th",{className:"text-right py-2 pr-4 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"text-right py-2 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"py-2 w-8"})]})}),e.jsx("tbody",{children:jt.map(nt=>{const At=Et.get(nt.rateId),Us=Number(nt.quantity)*(At?.rateCents??0);return e.jsxs("tr",{className:"border-b last:border-b-0","data-testid":`row-work-${nt.id}`,children:[e.jsx("td",{className:"py-2 pr-4 font-medium",children:At?.name??"Unknown"}),e.jsx("td",{className:"py-2 pr-4 text-muted-foreground max-w-[200px] truncate",children:nt.description||""}),e.jsx("td",{className:"py-2 pr-4 text-right",children:Number(nt.quantity)}),e.jsxs("td",{className:"py-2 pr-4 text-right text-muted-foreground",children:[qe(At?.rateCents??0),"/",At?.unitLabel]}),e.jsx("td",{className:"py-2 pr-4 text-right font-medium",children:qe(Us)}),e.jsx("td",{className:"py-2 pr-4 text-right text-muted-foreground text-xs",children:$s(nt.recordedAt)}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center gap-0.5",children:[e.jsx($,{size:"icon",variant:"ghost",onClick:()=>Xt(nt),"data-testid":`button-edit-work-${nt.id}`,children:e.jsx(ia,{className:"w-3.5 h-3.5"})}),e.jsx($,{size:"icon",variant:"ghost",onClick:()=>be.mutate(nt.id),"data-testid":`button-delete-work-${nt.id}`,children:e.jsx(ps,{className:"w-3.5 h-3.5"})})]})})]},nt.id)})})]})}),jt.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No unbilled work entries yet"})]},xe.id)})})]},Oe)})})()}):e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx($n,{className:"w-10 h-10 text-muted-foreground mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t?"No projects match your search":"No projects yet. Create a project to start tracking work."})]}),e.jsx(Ct,{open:a,onOpenChange:o,children:e.jsxs(vt,{children:[e.jsx(yt,{children:e.jsx(bt,{children:"New Project"})}),e.jsxs("form",{onSubmit:de=>{de.preventDefault(),oe.mutate(v)},className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_e,{children:"Customer *"}),e.jsxs(Dt,{value:v.customerId,onValueChange:de=>y(Oe=>({...Oe,customerId:de})),children:[e.jsx(It,{"data-testid":"select-project-customer",children:e.jsx($t,{placeholder:"Select a customer"})}),e.jsx(Ot,{children:U?.map(de=>e.jsx(Ie,{value:de.id,children:de.company?`${de.company} (${de.name})`:de.name},de.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_e,{htmlFor:"project-name",children:"Project Name *"}),e.jsx(De,{id:"project-name",value:v.name,onChange:de=>y(Oe=>({...Oe,name:de.target.value})),required:!0,"data-testid":"input-project-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_e,{htmlFor:"project-desc",children:"Description"}),e.jsx(Rs,{id:"project-desc",value:v.description,onChange:de=>y(Oe=>({...Oe,description:de.target.value})),"data-testid":"input-project-description"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx($,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx($,{type:"submit",disabled:oe.isPending||!v.customerId,"data-testid":"button-save-project",children:oe.isPending?"Creating...":"Create Project"})]})]})]})}),e.jsx(Ct,{open:l,onOpenChange:d,children:e.jsxs(vt,{children:[e.jsx(yt,{children:e.jsx(bt,{children:"Log Work"})}),e.jsxs("form",{onSubmit:ws,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_e,{children:"What did you do? *"}),e.jsxs(Dt,{value:N.rateId,onValueChange:de=>C(Oe=>({...Oe,rateId:de})),children:[e.jsx(It,{"data-testid":"select-work-type",children:e.jsx($t,{placeholder:"Select work type"})}),e.jsx(Ot,{children:M?.filter(de=>de.isActive).map(de=>e.jsxs(Ie,{value:de.id,children:[de.name," (",qe(de.rateCents),"/",de.unitLabel,")"]},de.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_e,{htmlFor:"work-qty",children:"Quantity *"}),e.jsx(De,{id:"work-qty",type:"number",min:"0.1",step:"0.1",value:N.quantity,onChange:de=>C(Oe=>({...Oe,quantity:de.target.value})),required:!0,"data-testid":"input-work-quantity"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_e,{htmlFor:"work-date",children:"Date"}),e.jsx(De,{id:"work-date",type:"date",value:N.recordedAt,onChange:de=>C(Oe=>({...Oe,recordedAt:de.target.value})),"data-testid":"input-work-date"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_e,{htmlFor:"work-desc",children:"Description"}),e.jsx(Rs,{id:"work-desc",placeholder:"Brief note about what was done",value:N.description,onChange:de=>C(Oe=>({...Oe,description:de.target.value})),"data-testid":"input-work-description"})]}),N.rateId&&e.jsx("div",{className:"p-3 rounded-md bg-muted/50 text-sm",children:e.jsxs("div",{className:"flex justify-between gap-3",children:[e.jsx("span",{className:"text-muted-foreground",children:"Estimated charge:"}),e.jsx("span",{className:"font-semibold","data-testid":"text-work-estimate",children:qe(Number(N.quantity)*(Et.get(N.rateId)?.rateCents??0))})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx($,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx($,{type:"submit",disabled:he.isPending||!N.rateId,"data-testid":"button-save-work",children:he.isPending?"Logging...":"Log Work"})]})]})]})}),e.jsx(Ct,{open:u,onOpenChange:h,children:e.jsxs(vt,{children:[e.jsx(yt,{children:e.jsx(bt,{children:"Generate Invoice"})}),f&&(()=>{const de=wt(f),Oe=de.unbilledAmount,st=de.unbilledCount,St=new Date;return St.setDate(St.getDate()+Number(H)),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2 p-3 rounded-md bg-muted/50 text-sm",children:[e.jsxs("div",{className:"flex justify-between gap-3",children:[e.jsx("span",{className:"text-muted-foreground",children:"Work entries:"}),e.jsx("span",{children:st})]}),e.jsxs("div",{className:"flex justify-between gap-3 pt-2 border-t font-semibold",children:[e.jsx("span",{children:"Total:"}),e.jsx("span",{children:qe(Oe)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_e,{children:"Payment Terms"}),e.jsxs(Dt,{value:H,onValueChange:re,children:[e.jsx(It,{"data-testid":"select-payment-terms",children:e.jsx($t,{})}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"7",children:"Net 7 (Due in 7 days)"}),e.jsx(Ie,{value:"14",children:"Net 14 (Due in 14 days)"}),e.jsx(Ie,{value:"15",children:"Net 15 (Due in 15 days)"}),e.jsx(Ie,{value:"30",children:"Net 30 (Due in 30 days)"}),e.jsx(Ie,{value:"45",children:"Net 45 (Due in 45 days)"}),e.jsx(Ie,{value:"60",children:"Net 60 (Due in 60 days)"}),e.jsx(Ie,{value:"90",children:"Net 90 (Due in 90 days)"})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground","data-testid":"text-due-date-preview",children:["Due date: ",St.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx($,{type:"button",variant:"outline",onClick:()=>h(!1),children:"Cancel"}),e.jsx($,{onClick:()=>Me.mutate({projectId:f,dueDays:Number(H)}),disabled:Me.isPending,"data-testid":"button-confirm-generate-invoice",children:Me.isPending?"Generating...":"Generate Invoice"})]})]})})()]})}),e.jsx(Ct,{open:z,onOpenChange:V,children:e.jsxs(vt,{children:[e.jsx(yt,{children:e.jsx(bt,{children:"Post Progress Update"})}),e.jsxs("form",{onSubmit:de=>{de.preventDefault(),se&&lt.mutate({projectId:se,data:O})},className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_e,{htmlFor:"update-title",children:"Title *"}),e.jsx(De,{id:"update-title",value:O.title,onChange:de=>T(Oe=>({...Oe,title:de.target.value})),placeholder:"e.g. Homepage design completed",required:!0,"data-testid":"input-update-title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_e,{htmlFor:"update-desc",children:"Description"}),e.jsx(Rs,{id:"update-desc",value:O.description,onChange:de=>T(Oe=>({...Oe,description:de.target.value})),placeholder:"Add details about this update...","data-testid":"input-update-description"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_e,{children:"Type"}),e.jsxs(Dt,{value:O.type,onValueChange:de=>T(Oe=>({...Oe,type:de})),children:[e.jsx(It,{"data-testid":"select-update-type",children:e.jsx($t,{})}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"update",children:"Update"}),e.jsx(Ie,{value:"milestone",children:"Milestone"}),e.jsx(Ie,{value:"deliverable",children:"Deliverable"}),e.jsx(Ie,{value:"launch",children:"Launch"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_e,{children:"Status"}),e.jsxs(Dt,{value:O.status,onValueChange:de=>T(Oe=>({...Oe,status:de})),children:[e.jsx(It,{"data-testid":"select-update-status",children:e.jsx($t,{})}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"completed",children:"Completed"}),e.jsx(Ie,{value:"in_progress",children:"In Progress"}),e.jsx(Ie,{value:"upcoming",children:"Upcoming"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx($,{type:"button",variant:"outline",onClick:()=>V(!1),children:"Cancel"}),e.jsx($,{type:"submit",disabled:lt.isPending,"data-testid":"button-save-update",children:lt.isPending?"Posting...":"Post Update"})]})]})]})}),e.jsx(Ct,{open:g,onOpenChange:k,children:e.jsxs(vt,{children:[e.jsx(yt,{children:e.jsx(bt,{children:"Edit Work Entry"})}),e.jsxs("form",{onSubmit:os,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_e,{children:"Work Type *"}),e.jsxs(Dt,{value:S.rateId,onValueChange:de=>R(Oe=>({...Oe,rateId:de})),children:[e.jsx(It,{"data-testid":"select-edit-work-type",children:e.jsx($t,{placeholder:"Select work type"})}),e.jsx(Ot,{children:M?.filter(de=>de.isActive).map(de=>e.jsxs(Ie,{value:de.id,children:[de.name," (",qe(de.rateCents),"/",de.unitLabel,")"]},de.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_e,{htmlFor:"edit-work-qty",children:"Quantity *"}),e.jsx(De,{id:"edit-work-qty",type:"number",min:"0.1",step:"0.1",value:S.quantity,onChange:de=>R(Oe=>({...Oe,quantity:de.target.value})),required:!0,"data-testid":"input-edit-work-quantity"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_e,{htmlFor:"edit-work-date",children:"Date"}),e.jsx(De,{id:"edit-work-date",type:"date",value:S.recordedAt,onChange:de=>R(Oe=>({...Oe,recordedAt:de.target.value})),"data-testid":"input-edit-work-date"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_e,{htmlFor:"edit-work-desc",children:"Description"}),e.jsx(Rs,{id:"edit-work-desc",placeholder:"Brief note about what was done",value:S.description,onChange:de=>R(Oe=>({...Oe,description:de.target.value})),"data-testid":"input-edit-work-description"})]}),S.rateId&&e.jsx("div",{className:"p-3 rounded-md bg-muted/50 text-sm",children:e.jsxs("div",{className:"flex justify-between gap-3",children:[e.jsx("span",{className:"text-muted-foreground",children:"Estimated charge:"}),e.jsx("span",{className:"font-semibold","data-testid":"text-edit-work-estimate",children:qe(Number(S.quantity)*(Et.get(S.rateId)?.rateCents??0))})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx($,{type:"button",variant:"outline",onClick:()=>k(!1),children:"Cancel"}),e.jsx($,{type:"submit",disabled:Se.isPending||!S.rateId,"data-testid":"button-save-edit-work",children:Se.isPending?"Saving...":"Save Changes"})]})]})]})})]})}function K6(){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(Ce,{className:"h-8 w-32 mb-1"}),e.jsx(Ce,{className:"h-4 w-56"})]}),e.jsxs(ce,{className:"overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsx(Ce,{className:"h-9 w-64"})}),e.jsx("div",{className:"divide-y",children:Array.from({length:6}).map((s,t)=>e.jsxs("div",{className:"flex items-center gap-4 p-4",children:[e.jsx(Ce,{className:"h-10 w-10 rounded-md"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(Ce,{className:"h-4 w-32"}),e.jsx(Ce,{className:"h-3 w-24"})]}),e.jsx(Ce,{className:"h-5 w-16"}),e.jsx(Ce,{className:"h-4 w-20"})]},t))})]})]})}function W6(){zn("Invoices");const{toast:s}=pt(),[t,n]=p.useState(""),[a,o]=p.useState("all"),[l,d]=p.useState(!1),[u,h]=p.useState(null),{data:f,isLoading:b}=Le({queryKey:["/api/invoices"]}),{data:v}=Le({queryKey:["/api/overdue-invoices"]}),{data:y}=Le({queryKey:["/api/customers"]}),[N,C]=p.useState(null),[g,k]=p.useState(!1),[A,E]=p.useState(null),[S,R]=p.useState("3"),[H,re]=p.useState("monthly"),{data:K}=Le({queryKey:["/api/payment-plans"]}),ee=Te({mutationFn:async T=>(C(T),(await ke("POST",`/api/invoices/${T}/send`)).json()),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/invoices"]}),s({title:"Invoice sent",description:"The invoice has been emailed to the client."}),C(null)},onError:T=>{s({title:"Send failed",description:T.message||"Could not send invoice email.",variant:"destructive"}),C(null)}}),me=Te({mutationFn:async({id:T,status:Y})=>(await ke("PATCH",`/api/invoices/${T}/status`,{status:Y})).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/invoices"]}),ve.invalidateQueries({queryKey:["/api/overdue-invoices"]}),ve.invalidateQueries({queryKey:["/api/dashboard/stats"]}),s({title:"Invoice updated",description:"Invoice status has been changed."})}}),pe=Te({mutationFn:async({invoiceId:T,numberOfInstallments:Y,frequency:Q})=>(await ke("POST",`/api/invoices/${T}/payment-plan`,{numberOfInstallments:Y,frequency:Q})).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/payment-plans"]}),s({title:"Payment plan created",description:"The payment plan has been set up and is waiting for the client to accept."}),k(!1)},onError:T=>{s({title:"Failed to create plan",description:T.message||"Could not create payment plan.",variant:"destructive"})}}),L=Te({mutationFn:async T=>(await ke("DELETE",`/api/payment-plans/${T}`)).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/payment-plans"]}),s({title:"Plan cancelled",description:"The payment plan has been cancelled."})},onError:T=>{s({title:"Failed to cancel",description:T.message||"Could not cancel plan.",variant:"destructive"})}}),X=Te({mutationFn:async T=>(await ke("DELETE",`/api/invoices/${T}`)).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/invoices"]}),ve.invalidateQueries({queryKey:["/api/dashboard/stats"]}),s({title:"Invoice deleted",description:"The draft invoice has been removed."})},onError:T=>{s({title:"Delete failed",description:T.message||"Could not delete invoice.",variant:"destructive"})}}),z=(T,Y)=>{const Q=document.createElement("a");Q.href=`/api/invoices/${T}/pdf`,Q.download=`${Y}.pdf`,Q.click()},V=async T=>{try{const Q=await(await ke("GET",`/api/invoices/${T}`)).json();h(Q),d(!0)}catch(Y){s({title:"Error",description:Y.message||"Could not load invoice details.",variant:"destructive"})}};if(b)return e.jsx(K6,{});const se=new Map(y?.map(T=>[T.id,T])??[]),I=f?.filter(T=>{if(a!=="all"&&T.status!==a)return!1;if(!t)return!0;const Y=t.toLowerCase();return T.invoiceNumber.toLowerCase().includes(Y)||T.status.toLowerCase().includes(Y)||(se.get(T.customerId)?.name??"").toLowerCase().includes(Y)||(se.get(T.customerId)?.company??"").toLowerCase().includes(Y)})??[],O=f?.reduce((T,Y)=>(T[Y.status]=(T[Y.status]||0)+1,T),{})??{};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight","data-testid":"text-page-title",children:"Invoices"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage and track all billing invoices"})]}),v&&v.length>0&&e.jsx(ce,{className:"p-4 border-red-200 dark:border-red-900/50 bg-red-50 dark:bg-red-950/20","data-testid":"alert-overdue-invoices",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(qn,{className:"w-5 h-5 text-red-600 dark:text-red-400 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-red-700 dark:text-red-400",children:[v.length," overdue invoice",v.length>1?"s":""]}),e.jsxs("p",{className:"text-xs text-red-600/80 dark:text-red-400/80 mt-0.5",children:[v.map(T=>T.invoiceNumber).join(", "),"  follow up with clients to collect payment."]})]})]})}),e.jsx("div",{className:"flex items-center gap-2 flex-wrap","data-testid":"status-filter-bar",children:[{value:"all",label:"All",icon:Vt},{value:"draft",label:"Draft",icon:Gt},{value:"pending",label:"Pending",icon:bs},{value:"paid",label:"Paid",icon:yn},{value:"overdue",label:"Overdue",icon:qn}].map(({value:T,label:Y,icon:Q})=>e.jsxs($,{variant:a===T?"default":"outline",size:"sm",onClick:()=>o(T),className:"gap-1.5","data-testid":`filter-status-${T}`,children:[e.jsx(Q,{className:"w-3.5 h-3.5"}),Y,T!=="all"&&O[T]?e.jsx(je,{variant:"secondary",className:"ml-1 text-[10px]",children:O[T]}):T==="all"&&f?e.jsx(je,{variant:"secondary",className:"ml-1 text-[10px]",children:f.length}):null]},T))}),e.jsxs(ce,{className:"overflow-hidden",children:[e.jsx("div",{className:"flex items-center gap-3 flex-wrap p-4 border-b",children:e.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[e.jsx(sn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(De,{placeholder:"Search invoices...",value:t,onChange:T=>n(T.target.value),className:"pl-9","data-testid":"input-search-invoices"})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-muted/30",children:[e.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Invoice"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Due Date"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"text-right py-3 px-4 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"py-3 px-4"})]})}),e.jsx("tbody",{children:I.length>0?I.map(T=>{const Y=se.get(T.customerId);return e.jsxs("tr",{className:"border-b last:border-b-0","data-testid":`row-invoice-${T.id}`,children:[e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-9 h-9 rounded-md bg-muted shrink-0",children:e.jsx(Vt,{className:"w-4 h-4 text-muted-foreground"})}),e.jsx("span",{className:"font-medium",children:T.invoiceNumber})]})}),e.jsx("td",{className:"py-3 px-4 text-muted-foreground",children:Y?.company||Y?.name||""}),e.jsx("td",{className:"py-3 px-4 text-muted-foreground",children:$s(T.issuedAt)}),e.jsx("td",{className:"py-3 px-4 text-muted-foreground",children:$s(T.dueDate)}),e.jsx("td",{className:"py-3 px-4",children:e.jsx(je,{variant:"secondary",className:`text-xs ${Zn(T.status)}`,children:T.status})}),e.jsx("td",{className:"py-3 px-4 text-right font-medium",children:qe(T.totalAmountCents,T.currency??"USD")}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[e.jsx($,{size:"icon",variant:"ghost",onClick:()=>V(T.id),"data-testid":`button-view-invoice-${T.id}`,children:e.jsx(jo,{className:"w-4 h-4"})}),e.jsx($,{size:"icon",variant:"ghost",onClick:()=>z(T.id,T.invoiceNumber),"data-testid":`button-download-pdf-${T.id}`,children:e.jsx(co,{className:"w-4 h-4"})}),T.status!=="paid"&&e.jsx($,{size:"icon",variant:"ghost",onClick:()=>ee.mutate(T.id),disabled:N===T.id,"data-testid":`button-send-invoice-${T.id}`,children:N===T.id?e.jsx(Qe,{className:"w-4 h-4 animate-spin"}):e.jsx(bs,{className:"w-4 h-4"})}),(T.status==="pending"||T.status==="overdue")&&e.jsx($,{size:"icon",variant:"ghost",onClick:()=>me.mutate({id:T.id,status:"paid"}),"data-testid":`button-mark-paid-${T.id}`,children:e.jsx(yn,{className:"w-4 h-4"})}),e.jsx($,{size:"icon",variant:"ghost",onClick:()=>{confirm("Delete this invoice? This cannot be undone.")&&X.mutate(T.id)},"data-testid":`button-delete-invoice-${T.id}`,children:e.jsx(ps,{className:"w-4 h-4 text-destructive"})})]})})]},T.id)}):e.jsx("tr",{children:e.jsxs("td",{colSpan:9,className:"py-12 text-center",children:[e.jsx(Vt,{className:"w-10 h-10 text-muted-foreground mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t?"No invoices match your search":"No invoices found"})]})})})]})})]}),e.jsx(Ct,{open:l,onOpenChange:d,children:e.jsxs(vt,{className:"max-w-2xl max-h-[85vh] overflow-y-auto",children:[e.jsx(yt,{children:e.jsxs(bt,{className:"flex items-center gap-3","data-testid":"text-invoice-detail-title",children:[e.jsx(Vt,{className:"w-5 h-5 text-primary"}),"Invoice ",u?.invoiceNumber]})}),u&&e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"p-3 rounded-md bg-muted/40","data-testid":"detail-customer",children:[e.jsx("p",{className:"text-[11px] text-muted-foreground uppercase tracking-wider mb-1",children:"Customer"}),e.jsx("p",{className:"text-sm font-medium truncate",children:u.customerName||se.get(u.customerId)?.company||se.get(u.customerId)?.name||""})]}),u.projectName&&e.jsxs("div",{className:"p-3 rounded-md bg-muted/40","data-testid":"detail-project",children:[e.jsx("p",{className:"text-[11px] text-muted-foreground uppercase tracking-wider mb-1",children:"Project"}),e.jsxs("p",{className:"text-sm font-medium truncate flex items-center gap-1.5",children:[e.jsx($n,{className:"w-3.5 h-3.5 text-muted-foreground shrink-0"}),u.projectName]})]}),e.jsxs("div",{className:"p-3 rounded-md bg-muted/40","data-testid":"detail-issued",children:[e.jsx("p",{className:"text-[11px] text-muted-foreground uppercase tracking-wider mb-1",children:"Issued"}),e.jsx("p",{className:"text-sm font-medium",children:$s(u.issuedAt)})]}),e.jsxs("div",{className:"p-3 rounded-md bg-muted/40","data-testid":"detail-due",children:[e.jsx("p",{className:"text-[11px] text-muted-foreground uppercase tracking-wider mb-1",children:"Due"}),e.jsx("p",{className:"text-sm font-medium",children:$s(u.dueDate)})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-3 px-1",children:[e.jsx(je,{variant:"secondary",className:`text-xs ${Zn(u.status)}`,"data-testid":"detail-status",children:u.status}),e.jsx("span",{className:"text-lg font-bold","data-testid":"detail-total",children:qe(u.totalAmountCents)})]}),u.lineItems&&u.lineItems.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider mb-2 px-1",children:"Line Items"}),e.jsx("div",{className:"border rounded-md overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-muted/30 border-b",children:[e.jsx("th",{className:"text-left py-2 px-3 text-xs font-medium text-muted-foreground",children:"Item"}),e.jsx("th",{className:"text-right py-2 px-3 text-xs font-medium text-muted-foreground",children:"Qty"}),e.jsx("th",{className:"text-right py-2 px-3 text-xs font-medium text-muted-foreground",children:"Rate"}),e.jsx("th",{className:"text-right py-2 px-3 text-xs font-medium text-muted-foreground",children:"Total"})]})}),e.jsx("tbody",{children:u.lineItems.map(T=>e.jsxs("tr",{className:"border-b last:border-b-0","data-testid":`detail-line-item-${T.id}`,children:[e.jsx("td",{className:"py-2 px-3",children:T.description}),e.jsx("td",{className:"py-2 px-3 text-right",children:Number(T.quantity)}),e.jsx("td",{className:"py-2 px-3 text-right text-muted-foreground",children:qe(T.unitPrice)}),e.jsx("td",{className:"py-2 px-3 text-right font-medium",children:qe(T.totalCents)})]},T.id))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-muted/20",children:[e.jsx("td",{colSpan:3,className:"py-2 px-3 text-right font-semibold text-xs uppercase tracking-wider",children:"Total"}),e.jsx("td",{className:"py-2 px-3 text-right font-bold",children:qe(u.totalAmountCents)})]})})]})})]}),u.workEntries&&u.workEntries.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider mb-2 px-1",children:"Work Breakdown"}),e.jsx("div",{className:"border rounded-md overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-muted/30 border-b",children:[e.jsx("th",{className:"text-left py-2 px-3 text-xs font-medium text-muted-foreground",children:"Type"}),e.jsx("th",{className:"text-left py-2 px-3 text-xs font-medium text-muted-foreground",children:"Description"}),e.jsx("th",{className:"text-right py-2 px-3 text-xs font-medium text-muted-foreground",children:"Qty"}),e.jsx("th",{className:"text-right py-2 px-3 text-xs font-medium text-muted-foreground",children:"Date"})]})}),e.jsx("tbody",{children:u.workEntries.map(T=>e.jsxs("tr",{className:"border-b last:border-b-0","data-testid":`detail-work-entry-${T.id}`,children:[e.jsxs("td",{className:"py-2 px-3",children:[e.jsx("span",{className:"font-medium",children:T.rateName||""}),T.unitLabel&&e.jsxs("span",{className:"text-muted-foreground text-xs ml-1",children:["(",qe(T.rateCents),"/",T.unitLabel,")"]})]}),e.jsx("td",{className:"py-2 px-3 text-muted-foreground max-w-[180px] truncate",children:T.description||""}),e.jsx("td",{className:"py-2 px-3 text-right",children:Number(T.quantity)}),e.jsx("td",{className:"py-2 px-3 text-right text-muted-foreground text-xs",children:T.recordedAt?$s(T.recordedAt):""})]},T.id))})]})})]}),(()=>{const T=K?.find(Y=>Y.invoiceId===u.id&&(Y.status==="pending"||Y.status==="active"));return T?e.jsx("div",{className:"p-3 rounded-md border bg-muted/30","data-testid":"card-existing-plan",children:e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Lc,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Payment Plan"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[T.numberOfInstallments," ",T.frequency," payments of ",qe(T.installmentAmountCents)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(je,{variant:"secondary",className:`text-xs ${Zn(T.status)}`,children:T.status==="pending"?"Awaiting Client":`${T.installmentsPaid}/${T.numberOfInstallments} paid`}),e.jsx($,{size:"icon",variant:"ghost",onClick:()=>{confirm("Cancel this payment plan?")&&L.mutate(T.id)},"data-testid":"button-cancel-plan",children:e.jsx(sr,{className:"w-4 h-4 text-muted-foreground"})})]})]})}):null})(),e.jsxs("div",{className:"flex gap-2 pt-2 flex-wrap",children:[e.jsxs($,{variant:"outline",className:"flex-1",onClick:()=>z(u.id,u.invoiceNumber),"data-testid":"button-download-pdf-dialog",children:[e.jsx(co,{className:"w-4 h-4 mr-2"}),"Download PDF"]}),u.status!=="paid"&&e.jsxs($,{className:"flex-1",onClick:()=>{ee.mutate(u.id),d(!1)},disabled:N===u.id,"data-testid":"button-send-invoice-dialog",children:[N===u.id?e.jsx(Qe,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(bs,{className:"w-4 h-4 mr-2"}),"Email Invoice"]}),u.status!=="paid"&&!K?.find(T=>T.invoiceId===u.id&&(T.status==="pending"||T.status==="active"))&&e.jsxs($,{variant:"outline",className:"flex-1",onClick:()=>{E(u),R("3"),re("monthly"),k(!0)},"data-testid":"button-create-payment-plan",children:[e.jsx(Lc,{className:"w-4 h-4 mr-2"}),"Payment Plan"]})]})]})]})}),e.jsx(Ct,{open:g,onOpenChange:k,children:e.jsxs(vt,{className:"max-w-md",children:[e.jsx(yt,{children:e.jsx(bt,{children:"Create Payment Plan"})}),A&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-3 rounded-md bg-muted/30 border",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Invoice Total"}),e.jsx("p",{className:"text-lg font-semibold","data-testid":"text-plan-total",children:qe(A.totalAmountCents)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:A.invoiceNumber})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1.5 block",children:"Number of Installments"}),e.jsxs(Dt,{value:S,onValueChange:R,children:[e.jsx(It,{"data-testid":"select-installments",children:e.jsx($t,{})}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"2",children:"2 payments"}),e.jsx(Ie,{value:"3",children:"3 payments"}),e.jsx(Ie,{value:"4",children:"4 payments"}),e.jsx(Ie,{value:"6",children:"6 payments"}),e.jsx(Ie,{value:"12",children:"12 payments"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1.5 block",children:"Frequency"}),e.jsxs(Dt,{value:H,onValueChange:re,children:[e.jsx(It,{"data-testid":"select-frequency",children:e.jsx($t,{})}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"weekly",children:"Weekly"}),e.jsx(Ie,{value:"biweekly",children:"Every 2 Weeks"}),e.jsx(Ie,{value:"monthly",children:"Monthly"})]})]})]})]}),e.jsxs("div",{className:"p-3 rounded-md border bg-muted/10",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Each payment"}),e.jsx("span",{className:"font-semibold","data-testid":"text-installment-amount",children:qe(Math.ceil(A.totalAmountCents/Number(S)))})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[S," ",H," payments  Stripe handles collection automatically"]})]}),e.jsxs($,{className:"w-full",onClick:()=>{pe.mutate({invoiceId:A.id,numberOfInstallments:Number(S),frequency:H})},disabled:pe.isPending,"data-testid":"button-confirm-create-plan",children:[pe.isPending?e.jsx(Qe,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(Lc,{className:"w-4 h-4 mr-2"}),"Create Payment Plan"]})]})]})})]})}function V6(){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsx(Ce,{className:"h-8 w-32 mb-1"}),e.jsx(Ce,{className:"h-4 w-56"})]}),e.jsx(Ce,{className:"h-9 w-36"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from({length:6}).map((s,t)=>e.jsxs(ce,{className:"p-5",children:[e.jsx(Ce,{className:"h-6 w-40 mb-3"}),e.jsx(Ce,{className:"h-4 w-32 mb-2"}),e.jsx(Ce,{className:"h-4 w-24"})]},t))})]})}function G6(){const{toast:s}=pt(),[t,n]=p.useState(!1),[a,o]=p.useState(!1),[l,d]=p.useState(""),[u,h]=p.useState(""),[f,b]=p.useState(!1),[v,y]=p.useState({description:"",agentCost:"",markupPercent:"50",customerId:"",projectId:""}),{data:N}=Le({queryKey:["/api/agent-costs"]}),{data:C}=Le({queryKey:["/api/agent-costs/summary"]}),{data:g}=Le({queryKey:["/api/projects"]}),{data:k}=Le({queryKey:["/api/customers"]}),{data:A}=Le({queryKey:["/api/invoices"]}),E=Te({mutationFn:async O=>(await ke("POST","/api/agent-costs",O)).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/agent-costs"]}),ve.invalidateQueries({queryKey:["/api/agent-costs/summary"]}),y({description:"",agentCost:"",markupPercent:"50",customerId:"",projectId:""}),n(!1),s({title:"Cost logged",description:"Agent cost entry has been recorded."})},onError:O=>{s({title:"Error",description:O.message,variant:"destructive"})}}),S=Te({mutationFn:async O=>{await ke("DELETE",`/api/agent-costs/${O}`)},onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/agent-costs"]}),ve.invalidateQueries({queryKey:["/api/agent-costs/summary"]}),s({title:"Entry removed",description:"Agent cost entry has been deleted."})}}),R=Te({mutationFn:async O=>(await ke("POST","/api/invoices/generate-from-agent-costs",O)).json(),onSuccess:O=>{ve.invalidateQueries({queryKey:["/api/agent-costs"]}),ve.invalidateQueries({queryKey:["/api/agent-costs/summary"]}),ve.invalidateQueries({queryKey:["/api/invoices"]}),o(!1),d(""),h(""),s({title:"Invoice created",description:`Invoice ${O.invoiceNumber} for ${qe(O.totalAmountCents)} has been generated. Go to Invoices to send it.`})},onError:O=>{s({title:"Error",description:O.message,variant:"destructive"})}}),H=O=>{O.preventDefault();const T=Math.round(Number(v.agentCost)*100);if(T<=0){s({title:"Invalid cost",description:"Enter a valid agent cost amount.",variant:"destructive"});return}E.mutate({description:v.description,agentCostCents:T,markupPercent:Number(v.markupPercent),projectId:v.projectId||void 0,customerId:v.customerId||void 0})},re=Number(v.agentCost)||0,K=Number(v.markupPercent)||50,ee=re*(1+K/100),me=ee-re,pe=new Map(g?.map(O=>[O.id,O.name])||[]),L=new Map(A?.map(O=>[O.id,O])||[]),X=new Map(k?.map(O=>[O.id,O])||[]),z=N?.filter(O=>!O.invoiceId)||[];z.reduce((O,T)=>O+T.clientChargeCents,0);const V=k?.filter(O=>z.some(T=>T.customerId===O.id))||[],se=l?z.filter(O=>O.customerId===l&&(!u||O.projectId===u)):[],I=se.reduce((O,T)=>O+T.clientChargeCents,0);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(zc,{className:"w-5 h-5 text-primary"}),e.jsx("h2",{className:"text-xl font-semibold tracking-tight","data-testid":"text-agent-costs-title",children:"Agent Cost Tracker"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Log AI agent coding costs and auto-calculate client charges with markup"})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[z.length>0&&e.jsxs($,{variant:"outline",onClick:()=>o(!0),"data-testid":"button-generate-agent-invoice",children:[e.jsx(Vt,{className:"w-4 h-4 mr-2"}),"Generate Invoice (",z.length," unbilled)"]}),e.jsxs($,{onClick:()=>n(!t),"data-testid":"button-log-agent-cost",children:[e.jsx(Qt,{className:"w-4 h-4 mr-2"}),"Log Cost"]})]})]}),C&&C.totalEntries>0&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs(ce,{className:"p-4",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Your Cost"}),e.jsx("p",{className:"text-lg font-bold","data-testid":"text-total-agent-cost",children:qe(C.totalAgentCostCents)})]}),e.jsxs(ce,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(kx,{className:"w-3 h-3 text-green-500"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Client Charge"})]}),e.jsx("p",{className:"text-lg font-bold","data-testid":"text-total-client-charge",children:qe(C.totalClientChargeCents)})]}),e.jsxs(ce,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(Jw,{className:"w-3 h-3 text-green-500"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Profit"})]}),e.jsx("p",{className:"text-lg font-bold text-green-600 dark:text-green-400","data-testid":"text-total-profit",children:qe(C.totalProfitCents)})]})]}),C&&C.byProject&&C.byProject.length>0&&e.jsxs(ce,{className:"p-4",children:[e.jsxs("button",{onClick:()=>b(!f),className:"flex items-center justify-between gap-3 w-full text-left","data-testid":"button-toggle-breakdown",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($n,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-semibold",children:"Cost Breakdown by Project"}),e.jsxs(je,{variant:"secondary",className:"text-xs",children:[C.byProject.length," project",C.byProject.length!==1?"s":""]})]}),f?e.jsx(wo,{className:"w-4 h-4 text-muted-foreground"}):e.jsx(ua,{className:"w-4 h-4 text-muted-foreground"})]}),f&&e.jsxs("div",{className:"mt-4 space-y-0",children:[e.jsxs("div",{className:"grid grid-cols-5 gap-3 pb-2 border-b text-xs font-medium text-muted-foreground uppercase tracking-wider",children:[e.jsx("span",{className:"col-span-1",children:"Project"}),e.jsx("span",{className:"text-right",children:"Entries"}),e.jsx("span",{className:"text-right",children:"Your Cost"}),e.jsx("span",{className:"text-right",children:"Client Charge"}),e.jsx("span",{className:"text-right",children:"Profit"})]}),C.byProject.map(O=>{const T=O.projectId==="unassigned"?"Unassigned":pe.get(O.projectId)||"Unknown Project";return e.jsxs("div",{className:"grid grid-cols-5 gap-3 py-3 border-b last:border-b-0 text-sm items-center","data-testid":`row-breakdown-${O.projectId}`,children:[e.jsx("span",{className:"col-span-1 font-medium truncate",children:T}),e.jsx("span",{className:"text-right text-muted-foreground",children:O.count}),e.jsx("span",{className:"text-right",children:qe(O.agentCost)}),e.jsx("span",{className:"text-right",children:qe(O.clientCharge)}),e.jsx("span",{className:"text-right font-medium text-green-600 dark:text-green-400",children:qe(O.profit)})]},O.projectId)}),e.jsxs("div",{className:"grid grid-cols-5 gap-3 pt-3 text-sm font-semibold border-t",children:[e.jsx("span",{className:"col-span-1",children:"Totals"}),e.jsx("span",{className:"text-right",children:C.totalEntries}),e.jsx("span",{className:"text-right",children:qe(C.totalAgentCostCents)}),e.jsx("span",{className:"text-right",children:qe(C.totalClientChargeCents)}),e.jsx("span",{className:"text-right text-green-600 dark:text-green-400",children:qe(C.totalProfitCents)})]})]})]}),t&&e.jsx(ce,{className:"p-5",children:e.jsxs("form",{onSubmit:H,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_e,{htmlFor:"cost-desc",children:"Description *"}),e.jsx(De,{id:"cost-desc",placeholder:"e.g., Homepage design session, Bug fixes, New feature build",value:v.description,onChange:O=>y(T=>({...T,description:O.target.value})),required:!0,"data-testid":"input-agent-cost-description"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_e,{htmlFor:"cost-amount",children:"Agent Cost ($) *"}),e.jsx(De,{id:"cost-amount",type:"number",min:"0.01",step:"0.01",placeholder:"4.35",value:v.agentCost,onChange:O=>y(T=>({...T,agentCost:O.target.value})),required:!0,"data-testid":"input-agent-cost-amount"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_e,{htmlFor:"cost-markup",children:"Markup %"}),e.jsx(De,{id:"cost-markup",type:"number",min:"0",step:"1",value:v.markupPercent,onChange:O=>y(T=>({...T,markupPercent:O.target.value})),"data-testid":"input-agent-cost-markup"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_e,{children:"Customer"}),e.jsxs(Dt,{value:v.customerId||"none",onValueChange:O=>y(T=>({...T,customerId:O==="none"?"":O,projectId:""})),children:[e.jsx(It,{"data-testid":"select-agent-cost-customer",children:e.jsx($t,{placeholder:"Select customer"})}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"none",children:"No customer"}),k?.map(O=>e.jsx(Ie,{value:O.id,children:O.company||O.name},O.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_e,{children:"Project"}),e.jsxs(Dt,{value:v.projectId||"none",onValueChange:O=>{const T=O==="none"?"":O,Y=g?.find(Q=>Q.id===T);y(Q=>({...Q,projectId:T,customerId:Y?.customerId||Q.customerId}))},children:[e.jsx(It,{"data-testid":"select-agent-cost-project",children:e.jsx($t,{placeholder:"Select project"})}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"none",children:"No project"}),(v.customerId?g?.filter(O=>O.customerId===v.customerId):g)?.map(O=>e.jsx(Ie,{value:O.id,children:O.name},O.id))]})]})]})]}),re>0&&e.jsx(ce,{className:"p-4 bg-muted/50",children:e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Your cost:"})," ",e.jsxs("span",{className:"font-semibold",children:["$",re.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-muted-foreground",children:["+ ",K,"% markup ="]})," ",e.jsxs("span",{className:"font-bold text-green-600 dark:text-green-400",children:["$",ee.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Profit:"})," ",e.jsxs("span",{className:"font-semibold text-green-600 dark:text-green-400",children:["$",me.toFixed(2)]})]})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx($,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsx($,{type:"submit",disabled:E.isPending,"data-testid":"button-save-agent-cost",children:E.isPending?"Saving...":"Log Cost"})]})]})}),N&&N.length>0?e.jsx("div",{className:"space-y-2",children:N.map(O=>e.jsx(ce,{className:"p-4","data-testid":`card-agent-cost-${O.id}`,children:e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("p",{className:"font-medium text-sm truncate","data-testid":`text-agent-cost-desc-${O.id}`,children:O.description}),O.customerId&&X.get(O.customerId)&&e.jsx(je,{variant:"outline",className:"text-xs shrink-0",children:X.get(O.customerId)?.company||X.get(O.customerId)?.name}),O.projectId&&pe.get(O.projectId)&&e.jsx(je,{variant:"secondary",className:"text-xs shrink-0",children:pe.get(O.projectId)})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-muted-foreground flex-wrap",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Cx,{className:"w-3 h-3"}),O.sessionDate?new Date(O.sessionDate).toLocaleDateString():""]}),e.jsxs("span",{children:[O.markupPercent,"% markup"]}),(()=>{if(!O.invoiceId)return e.jsx(je,{variant:"outline",className:"text-xs bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400 border-amber-200 dark:border-amber-800","data-testid":`badge-status-${O.id}`,children:"Unbilled"});const T=L.get(O.invoiceId);if(!T)return e.jsx(je,{variant:"secondary",className:"text-xs","data-testid":`badge-status-${O.id}`,children:"Invoiced"});switch(T.status){case"draft":return e.jsxs(je,{variant:"outline",className:"text-xs bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400 border-blue-200 dark:border-blue-800","data-testid":`badge-status-${O.id}`,children:[e.jsx(bs,{className:"w-3 h-3 mr-1"}),"Needs Sending"]});case"pending":return e.jsxs(je,{variant:"outline",className:"text-xs bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400 border-orange-200 dark:border-orange-800","data-testid":`badge-status-${O.id}`,children:[e.jsx(Gt,{className:"w-3 h-3 mr-1"}),"Unpaid"]});case"overdue":return e.jsxs(je,{variant:"outline",className:"text-xs bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 border-red-200 dark:border-red-800","data-testid":`badge-status-${O.id}`,children:[e.jsx(qn,{className:"w-3 h-3 mr-1"}),"Overdue"]});case"paid":return e.jsxs(je,{variant:"outline",className:"text-xs bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400 border-emerald-200 dark:border-emerald-800","data-testid":`badge-status-${O.id}`,children:[e.jsx(yn,{className:"w-3 h-3 mr-1"}),"Paid"]});default:return e.jsx(je,{variant:"secondary",className:"text-xs","data-testid":`badge-status-${O.id}`,children:T.status})}})()]})]}),e.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Cost"}),e.jsx("p",{className:"text-sm font-medium",children:qe(O.agentCostCents)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Charge"}),e.jsx("p",{className:"text-sm font-bold text-green-600 dark:text-green-400","data-testid":`text-agent-charge-${O.id}`,children:qe(O.clientChargeCents)})]}),e.jsx($,{size:"icon",variant:"ghost",onClick:()=>S.mutate(O.id),"data-testid":`button-delete-agent-cost-${O.id}`,children:e.jsx(ps,{className:"w-4 h-4"})})]})]})},O.id))}):t?null:e.jsxs(ce,{className:"p-8 text-center",children:[e.jsx(zc,{className:"w-8 h-8 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:'No agent costs logged yet. Click "Log Cost" to start tracking your AI coding expenses.'})]}),e.jsx(Ct,{open:a,onOpenChange:o,children:e.jsxs(vt,{className:"max-w-md",children:[e.jsx(yt,{children:e.jsx(bt,{children:"Generate Invoice from Agent Costs"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create an invoice from unbilled AI development costs. The invoice will appear on the Invoices page where you can send it via email."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_e,{children:"Customer *"}),e.jsxs(Dt,{value:l,onValueChange:O=>{d(O),h("")},children:[e.jsx(It,{"data-testid":"select-invoice-customer",children:e.jsx($t,{placeholder:"Select customer"})}),e.jsx(Ot,{children:V.length>0?V.map(O=>e.jsx(Ie,{value:O.id,children:O.company||O.name},O.id)):k?.map(O=>e.jsx(Ie,{value:O.id,children:O.company||O.name},O.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_e,{children:"Project (optional)"}),e.jsxs(Dt,{value:u||"all",onValueChange:O=>h(O==="all"?"":O),children:[e.jsx(It,{"data-testid":"select-invoice-project",children:e.jsx($t,{placeholder:"All projects"})}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"all",children:"All projects"}),g?.filter(O=>l?O.customerId===l:!0).map(O=>e.jsx(Ie,{value:O.id,children:O.name},O.id))]})]})]}),l&&e.jsx(ce,{className:"p-4 bg-muted/50",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Unbilled entries"}),e.jsx("span",{className:"font-medium",children:se.length})]}),e.jsxs("div",{className:"flex items-center justify-between gap-3 text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Invoice total"}),e.jsx("span",{className:"font-bold text-lg",children:qe(I)})]}),se.length>0&&e.jsxs("div",{className:"border-t pt-2 mt-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Line items:"}),e.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:se.map(O=>e.jsxs("div",{className:"flex items-center justify-between gap-2 text-xs",children:[e.jsx("span",{className:"truncate",children:O.description}),e.jsx("span",{className:"font-medium shrink-0",children:qe(O.clientChargeCents)})]},O.id))})]})]})}),e.jsxs($,{className:"w-full",onClick:()=>{if(!l){s({title:"Select a customer",description:"Please select a customer for this invoice.",variant:"destructive"});return}R.mutate({customerId:l,projectId:u||void 0})},disabled:R.isPending||!l||se.length===0,"data-testid":"button-confirm-generate-invoice",children:[R.isPending?e.jsx(Qe,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(Vt,{className:"w-4 h-4 mr-2"}),"Generate Invoice"]})]})]})})]})}function Q6(){zn("Billing Rates");const{toast:s}=pt(),[t,n]=p.useState(!1),[a,o]=p.useState(null),[l,d]=p.useState({code:"",name:"",description:"",unitLabel:"",rateCents:""}),{data:u,isLoading:h}=Le({queryKey:["/api/billing-rates"]}),f=Te({mutationFn:async k=>(await ke("POST","/api/billing-rates",k)).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/billing-rates"]}),n(!1),y(),s({title:"Rate created",description:"New billing rate has been added."})},onError:k=>{s({title:"Error",description:k.message,variant:"destructive"})}}),b=Te({mutationFn:async({id:k,data:A})=>(await ke("PATCH",`/api/billing-rates/${k}`,A)).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/billing-rates"]}),n(!1),o(null),y(),s({title:"Rate updated",description:"Billing rate has been saved."})},onError:k=>{s({title:"Error",description:k.message,variant:"destructive"})}}),v=Te({mutationFn:async k=>{await ke("DELETE",`/api/billing-rates/${k}`)},onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/billing-rates"]}),s({title:"Rate deleted",description:"Billing rate has been removed."})},onError:k=>{s({title:"Error",description:k.message,variant:"destructive"})}}),y=()=>d({code:"",name:"",description:"",unitLabel:"",rateCents:""}),N=()=>{y(),o(null),n(!0)},C=k=>{o(k),d({code:k.code,name:k.name,description:k.description??"",unitLabel:k.unitLabel,rateCents:String(k.rateCents/100)}),n(!0)},g=k=>{k.preventDefault();const A={code:l.code,name:l.name,description:l.description||void 0,unitLabel:l.unitLabel,rateCents:Math.round(Number(l.rateCents)*100)};a?b.mutate({id:a.id,data:A}):f.mutate(A)};return h?e.jsx(V6,{}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight","data-testid":"text-page-title",children:"Billing Rates"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Configure your per-unit pricing for different types of work"})]}),e.jsxs($,{onClick:N,"data-testid":"button-add-rate",children:[e.jsx(Qt,{className:"w-4 h-4 mr-2"}),"Add Rate"]})]}),u&&u.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.map(k=>e.jsxs(ce,{className:"p-5","data-testid":`card-rate-${k.id}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-md bg-primary/10 shrink-0",children:e.jsx(Fn,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[e.jsx($,{size:"icon",variant:"ghost",onClick:()=>C(k),"data-testid":`button-edit-rate-${k.id}`,children:e.jsx(ia,{className:"w-4 h-4"})}),e.jsx($,{size:"icon",variant:"ghost",onClick:()=>v.mutate(k.id),"data-testid":`button-delete-rate-${k.id}`,children:e.jsx(ps,{className:"w-4 h-4"})})]})]}),e.jsx("h3",{className:"font-semibold mb-1","data-testid":`text-rate-name-${k.id}`,children:k.name}),k.description&&e.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:k.description}),e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap mt-auto pt-3 border-t",children:[e.jsxs(je,{variant:"secondary",className:"text-xs",children:[e.jsx(Nl,{className:"w-3 h-3 mr-1"}),k.code]}),e.jsxs("span",{className:"text-sm font-semibold","data-testid":`text-rate-price-${k.id}`,children:[qe(k.rateCents)," / ",k.unitLabel]})]})]},k.id))}):e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(Fn,{className:"w-10 h-10 text-muted-foreground mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No billing rates configured. Add your first rate to get started."})]})]}),e.jsx("div",{className:"border-t pt-8",children:e.jsx(G6,{})}),e.jsx(Ct,{open:t,onOpenChange:n,children:e.jsxs(vt,{children:[e.jsx(yt,{children:e.jsx(bt,{children:a?"Edit Rate":"Add Billing Rate"})}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_e,{htmlFor:"rate-name",children:"Name *"}),e.jsx(De,{id:"rate-name",placeholder:"e.g., Page Design",value:l.name,onChange:k=>d(A=>({...A,name:k.target.value})),required:!0,"data-testid":"input-rate-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_e,{htmlFor:"rate-code",children:"Code *"}),e.jsx(De,{id:"rate-code",placeholder:"e.g., page_design",value:l.code,onChange:k=>d(A=>({...A,code:k.target.value})),required:!0,"data-testid":"input-rate-code"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_e,{htmlFor:"rate-price",children:"Price ($) *"}),e.jsx(De,{id:"rate-price",type:"number",min:"0",step:"0.01",placeholder:"200.00",value:l.rateCents,onChange:k=>d(A=>({...A,rateCents:k.target.value})),required:!0,"data-testid":"input-rate-price"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_e,{htmlFor:"rate-unit",children:"Per Unit *"}),e.jsx(De,{id:"rate-unit",placeholder:"e.g., page, asset, session",value:l.unitLabel,onChange:k=>d(A=>({...A,unitLabel:k.target.value})),required:!0,"data-testid":"input-rate-unit"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_e,{htmlFor:"rate-desc",children:"Description"}),e.jsx(Rs,{id:"rate-desc",placeholder:"What this rate covers",value:l.description,onChange:k=>d(A=>({...A,description:k.target.value})),"data-testid":"input-rate-description"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx($,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsx($,{type:"submit",disabled:f.isPending||b.isPending,"data-testid":"button-save-rate",children:f.isPending||b.isPending?"Saving...":a?"Save Changes":"Add Rate"})]})]})]})})]})}var $2={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},nb=ot.createContext&&ot.createContext($2),Y6=["attr","size","title"];function X6(s,t){if(s==null)return{};var n=Z6(s,t),a,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);for(o=0;o<l.length;o++)a=l[o],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(s,a)&&(n[a]=s[a])}return n}function Z6(s,t){if(s==null)return{};var n={};for(var a in s)if(Object.prototype.hasOwnProperty.call(s,a)){if(t.indexOf(a)>=0)continue;n[a]=s[a]}return n}function sm(){return sm=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(s[a]=n[a])}return s},sm.apply(this,arguments)}function rb(s,t){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);t&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(s,o).enumerable})),n.push.apply(n,a)}return n}function nm(s){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rb(Object(n),!0).forEach(function(a){J6(s,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):rb(Object(n)).forEach(function(a){Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(n,a))})}return s}function J6(s,t,n){return t=eR(t),t in s?Object.defineProperty(s,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[t]=n,s}function eR(s){var t=tR(s,"string");return typeof t=="symbol"?t:t+""}function tR(s,t){if(typeof s!="object"||!s)return s;var n=s[Symbol.toPrimitive];if(n!==void 0){var a=n.call(s,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(s)}function q2(s){return s&&s.map((t,n)=>ot.createElement(t.tag,nm({key:n},t.attr),q2(t.child)))}function Zx(s){return t=>ot.createElement(sR,sm({attr:nm({},s.attr)},t),q2(s.child))}function sR(s){var t=n=>{var{attr:a,size:o,title:l}=s,d=X6(s,Y6),u=o||n.size||"1em",h;return n.className&&(h=n.className),s.className&&(h=(h?h+" ":"")+s.className),ot.createElement("svg",sm({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,a,d,{className:h,style:nm(nm({color:s.color||n.color},n.style),s.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),l&&ot.createElement("title",null,l),s.children)};return nb!==void 0?ot.createElement(nb.Consumer,null,n=>t(n)):t($2)}function nR(s){return Zx({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16.015 14.378c0-.32-.135-.496-.344-.622-.21-.12-.464-.135-.81-.135h-1.543v2.82h.675v-1.027h.72c.24 0 .39.024.478.125.12.13.104.38.104.55v.35h.66v-.555c-.002-.25-.017-.376-.108-.516-.06-.08-.18-.18-.33-.234l.02-.008c.18-.072.48-.297.48-.747zm-.87.407l-.028-.002c-.09.053-.195.058-.33.058h-.81v-.63h.824c.12 0 .24 0 .33.05.098.048.156.147.15.255 0 .12-.045.215-.134.27zM20.297 15.837H19v.6h1.304c.676 0 1.05-.278 1.05-.884 0-.28-.066-.448-.187-.582-.153-.133-.392-.193-.73-.207l-.376-.015c-.104 0-.18 0-.255-.03-.09-.03-.15-.105-.15-.21 0-.09.017-.166.09-.21.083-.046.177-.066.272-.06h1.23v-.602h-1.35c-.704 0-.958.437-.958.84 0 .9.776.855 1.407.87.104 0 .18.015.225.06.046.03.082.106.082.18 0 .077-.035.15-.08.18-.06.053-.15.07-.277.07zM0 0v10.096L.81 8.22h1.75l.225.464V8.22h2.043l.45 1.02.437-1.013h6.502c.295 0 .56.057.756.236v-.23h1.787v.23c.307-.17.686-.23 1.12-.23h2.606l.24.466v-.466h1.918l.254.465v-.466h1.858v3.948H20.87l-.36-.6v.585h-2.353l-.256-.63h-.583l-.27.614h-1.213c-.48 0-.84-.104-1.08-.24v.24h-2.89v-.884c0-.12-.03-.12-.105-.135h-.105v1.036H6.067v-.48l-.21.48H4.69l-.202-.48v.465H2.235l-.256-.624H1.4l-.256.624H0V24h23.786v-7.108c-.27.135-.613.18-.973.18H21.09v-.255c-.21.165-.57.255-.914.255H14.71v-.9c0-.12-.018-.12-.12-.12h-.075v1.022h-1.8v-1.066c-.298.136-.643.15-.928.136h-.214v.915h-2.18l-.54-.617-.57.6H4.742v-3.93h3.61l.518.602.554-.6h2.412c.28 0 .74.03.942.225v-.24h2.177c.202 0 .644.045.903.225v-.24h3.265v.24c.163-.164.508-.24.803-.24h1.89v.24c.194-.15.464-.24.84-.24h1.176V0H0zM21.156 14.955c.004.005.006.012.01.016.01.01.024.01.032.02l-.042-.035zM23.828 13.082h.065v.555h-.065zM23.865 15.03v-.005c-.03-.025-.046-.048-.075-.07-.15-.153-.39-.215-.764-.225l-.36-.012c-.12 0-.194-.007-.27-.03-.09-.03-.15-.105-.15-.21 0-.09.03-.16.09-.204.076-.045.15-.05.27-.05h1.223v-.588h-1.283c-.69 0-.96.437-.96.84 0 .9.78.855 1.41.87.104 0 .18.015.224.06.046.03.076.106.076.18 0 .07-.034.138-.09.18-.045.056-.136.07-.27.07h-1.288v.605h1.287c.42 0 .734-.118.9-.36h.03c.09-.134.135-.3.135-.523 0-.24-.045-.39-.135-.526zM18.597 14.208v-.583h-2.235V16.458h2.235v-.585h-1.57v-.57h1.533v-.584h-1.532v-.51M13.51 8.787h.685V11.6h-.684zM13.126 9.543l-.007.006c0-.314-.13-.5-.34-.624-.217-.125-.47-.135-.81-.135H10.43v2.82h.674v-1.034h.72c.24 0 .39.03.487.12.122.136.107.378.107.548v.354h.677v-.553c0-.25-.016-.375-.11-.516-.09-.107-.202-.19-.33-.237.172-.07.472-.3.472-.75zm-.855.396h-.015c-.09.054-.195.056-.33.056H11.1v-.623h.825c.12 0 .24.004.33.05.09.04.15.128.15.25s-.047.22-.134.266zM15.92 9.373h.632v-.6h-.644c-.464 0-.804.105-1.02.33-.286.3-.362.69-.362 1.11 0 .512.123.833.36 1.074.232.238.645.31.97.31h.78l.255-.627h1.39l.262.627h1.36v-2.11l1.272 2.11h.95l.002.002V8.786h-.684v1.963l-1.18-1.96h-1.02V11.4L18.11 8.744h-1.004l-.943 2.22h-.3c-.177 0-.362-.03-.468-.134-.125-.15-.186-.36-.186-.662 0-.285.08-.51.194-.63.133-.135.272-.165.516-.165zm1.668-.108l.464 1.118v.002h-.93l.466-1.12zM2.38 10.97l.254.628H4V9.393l.972 2.205h.584l.973-2.202.015 2.202h.69v-2.81H6.118l-.807 1.904-.876-1.905H3.343v2.663L2.205 8.787h-.997L.01 11.597h.72l.26-.626h1.39zm-.688-1.705l.46 1.118-.003.002h-.915l.457-1.12zM11.856 13.62H9.714l-.85.923-.825-.922H5.346v2.82H8l.855-.932.824.93h1.302v-.94h.838c.6 0 1.17-.164 1.17-.945l-.006-.003c0-.78-.598-.93-1.128-.93zM7.67 15.853l-.014-.002H6.02v-.557h1.47v-.574H6.02v-.51H7.7l.733.82-.764.824zm2.642.33l-1.03-1.147 1.03-1.108v2.253zm1.553-1.258h-.885v-.717h.885c.24 0 .42.098.42.344 0 .243-.15.372-.42.372zM9.967 9.373v-.586H7.73V11.6h2.237v-.58H8.4v-.564h1.527V9.88H8.4v-.507"},child:[]}]})(s)}function rR(s){return Zx({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M11.343 18.031c.058.049.12.098.181.146-1.177.783-2.59 1.238-4.107 1.238C3.32 19.416 0 16.096 0 12c0-4.095 3.32-7.416 7.416-7.416 1.518 0 2.931.456 4.105 1.238-.06.051-.12.098-.165.15C9.6 7.489 8.595 9.688 8.595 12c0 2.311 1.001 4.51 2.748 6.031zm5.241-13.447c-1.52 0-2.931.456-4.105 1.238.06.051.12.098.165.15C14.4 7.489 15.405 9.688 15.405 12c0 2.31-1.001 4.507-2.748 6.031-.058.049-.12.098-.181.146 1.177.783 2.588 1.238 4.107 1.238C20.68 19.416 24 16.096 24 12c0-4.094-3.32-7.416-7.416-7.416zM12 6.174c-.096.075-.189.15-.28.231C10.156 7.764 9.169 9.765 9.169 12c0 2.236.987 4.236 2.551 5.595.09.08.185.158.28.232.096-.074.189-.152.28-.232 1.563-1.359 2.551-3.359 2.551-5.595 0-2.235-.987-4.236-2.551-5.595-.09-.08-.184-.156-.28-.231z"},child:[]}]})(s)}function aR(s){return Zx({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M9.112 8.262L5.97 15.758H3.92L2.374 9.775c-.094-.368-.175-.503-.461-.658C1.447 8.864.677 8.627 0 8.479l.046-.217h3.3a.904.904 0 01.894.764l.817 4.338 2.018-5.102zm8.033 5.049c.008-1.979-2.736-2.088-2.717-2.972.006-.269.262-.555.822-.628a3.66 3.66 0 011.913.336l.34-1.59a5.207 5.207 0 00-1.814-.333c-1.917 0-3.266 1.02-3.278 2.479-.012 1.079.963 1.68 1.698 2.04.756.367 1.01.603 1.006.931-.005.504-.602.725-1.16.734-.975.015-1.54-.263-1.992-.473l-.351 1.642c.453.208 1.289.39 2.156.398 2.037 0 3.37-1.006 3.377-2.564m5.061 2.447H24l-1.565-7.496h-1.656a.883.883 0 00-.826.55l-2.909 6.946h2.036l.405-1.12h2.488zm-2.163-2.656l1.02-2.815.588 2.815zm-8.16-4.84l-1.603 7.496H8.34l1.605-7.496z"},child:[]}]})(s)}function iR(s){switch(s?.toLowerCase()){case"visa":return e.jsx(aR,{className:"w-8 h-5 text-blue-600 dark:text-blue-400"});case"mastercard":return e.jsx(rR,{className:"w-8 h-5 text-orange-500"});case"amex":return e.jsx(nR,{className:"w-8 h-5 text-blue-500"});default:return e.jsx(yi,{className:"w-6 h-5 text-muted-foreground"})}}function oR(){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(Ce,{className:"h-8 w-48 mb-1"}),e.jsx(Ce,{className:"h-4 w-64"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Array.from({length:3}).map((s,t)=>e.jsx(ce,{className:"p-5",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Ce,{className:"h-12 w-16 rounded-md"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(Ce,{className:"h-5 w-36"}),e.jsx(Ce,{className:"h-4 w-24"})]})]})},t))})]})}function lR(){zn("Payment Methods");const{data:s,isLoading:t}=Le({queryKey:["/api/payment-methods"]});return t?e.jsx(oR,{}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight","data-testid":"text-page-title",children:"Payment Methods"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage your saved payment methods"})]}),s&&s.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map(n=>e.jsx(ce,{className:"p-5","data-testid":`card-payment-${n.id}`,children:e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-14 h-10 rounded-md bg-muted shrink-0",children:iR(n.brand)}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("p",{className:"font-medium capitalize",children:[n.brand||n.type," ending in ",n.last4]}),n.isDefault&&e.jsxs(je,{variant:"secondary",className:"text-xs bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400",children:[e.jsx(Ss,{className:"w-3 h-3 mr-1"}),"Default"]})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Expires ",n.expiryMonth?.toString().padStart(2,"0"),"/",n.expiryYear]})]})]}),e.jsx($,{size:"icon",variant:"ghost","data-testid":`button-more-${n.id}`,children:e.jsx(j3,{className:"w-4 h-4"})})]})},n.id))}):e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(Ax,{className:"w-10 h-10 text-muted-foreground mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No payment methods saved"})]})]})}var Jx="Switch",[cR]=za(Jx),[dR,uR]=cR(Jx),F2=p.forwardRef((s,t)=>{const{__scopeSwitch:n,name:a,checked:o,defaultChecked:l,required:d,disabled:u,value:h="on",onCheckedChange:f,form:b,...v}=s,[y,N]=p.useState(null),C=Yt(t,S=>N(S)),g=p.useRef(!1),k=y?b||!!y.closest("form"):!0,[A=!1,E]=Ni({prop:o,defaultProp:l,onChange:f});return e.jsxs(dR,{scope:n,checked:A,disabled:u,children:[e.jsx(mt.button,{type:"button",role:"switch","aria-checked":A,"aria-required":d,"data-state":B2(A),"data-disabled":u?"":void 0,disabled:u,value:h,...v,ref:C,onClick:it(s.onClick,S=>{E(R=>!R),k&&(g.current=S.isPropagationStopped(),g.current||S.stopPropagation())})}),k&&e.jsx(mR,{control:y,bubbles:!g.current,name:a,value:h,checked:A,required:d,disabled:u,form:b,style:{transform:"translateX(-100%)"}})]})});F2.displayName=Jx;var z2="SwitchThumb",U2=p.forwardRef((s,t)=>{const{__scopeSwitch:n,...a}=s,o=uR(z2,n);return e.jsx(mt.span,{"data-state":B2(o.checked),"data-disabled":o.disabled?"":void 0,...a,ref:t})});U2.displayName=z2;var mR=s=>{const{control:t,checked:n,bubbles:a=!0,...o}=s,l=p.useRef(null),d=JN(n),u=kj(t);return p.useEffect(()=>{const h=l.current,f=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(f,"checked").set;if(d!==n&&v){const y=new Event("click",{bubbles:a});v.call(h,n),h.dispatchEvent(y)}},[d,n,a]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...o,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function B2(s){return s?"checked":"unchecked"}var H2=F2,hR=U2;const Dc=p.forwardRef(({className:s,...t},n)=>e.jsx(H2,{className:Ze("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...t,ref:n,children:e.jsx(hR,{className:Ze("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Dc.displayName=H2.displayName;function fR(){zn("Settings"),pt();const{data:s}=Le({queryKey:["/api/deploy/status"]});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight","data-testid":"text-page-title",children:"Settings"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Configuration and how-to guide"})]}),e.jsxs(ce,{className:"p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-md bg-primary/10 shrink-0",children:e.jsx(ki,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold",children:"How to Use This Dashboard"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Step-by-step guide to billing your clients"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary text-primary-foreground text-sm font-semibold shrink-0",children:"1"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Fn,{className:"w-4 h-4 text-muted-foreground shrink-0"}),e.jsx("h3",{className:"font-semibold text-sm",children:"Set Up Your Billing Rates"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Go to ",e.jsx("strong",{children:"Billing Rates"})," in the sidebar. This is where you set your prices. For example: Page Design = $200 per page, Image Creation = $25 per image. You can add, edit, or delete rates anytime. These rates are already pre-filled with common web design services."]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary text-primary-foreground text-sm font-semibold shrink-0",children:"2"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Ei,{className:"w-4 h-4 text-muted-foreground shrink-0"}),e.jsx("h3",{className:"font-semibold text-sm",children:"Add Your Clients"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Go to ",e.jsx("strong",{children:"Customers"})," in the sidebar. Click ",e.jsx("strong",{children:"Add Customer"}),". Fill in their name, email, company name, and phone. That's it. You can edit or delete them later if needed."]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary text-primary-foreground text-sm font-semibold shrink-0",children:"3"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx($n,{className:"w-4 h-4 text-muted-foreground shrink-0"}),e.jsx("h3",{className:"font-semibold text-sm",children:"Create a Project"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Go to ",e.jsx("strong",{children:"Projects"})," in the sidebar. Click ",e.jsx("strong",{children:"New Project"}),'. Pick the customer from the dropdown, give the project a name (like "Restaurant Website Redesign"), and add a description if you want. Click ',e.jsx("strong",{children:"Create Project"}),"."]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary text-primary-foreground text-sm font-semibold shrink-0",children:"4"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Gt,{className:"w-4 h-4 text-muted-foreground shrink-0"}),e.jsx("h3",{className:"font-semibold text-sm",children:"Log Your Work"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground leading-relaxed",children:["This is the main thing you do day to day. When you finish doing something for a client, go to ",e.jsx("strong",{children:"Projects"}),", find their project, and click ",e.jsx("strong",{children:"Log Work"}),"."]}),e.jsxs("div",{className:"mt-2 p-3 rounded-md bg-muted/50 text-sm space-y-2",children:[e.jsx("p",{className:"font-medium",children:"Example:"}),e.jsx("p",{className:"text-muted-foreground",children:"You just designed 2 pages for Sarah's restaurant website."}),e.jsxs("ol",{className:"list-decimal list-inside text-muted-foreground space-y-1",children:[e.jsxs("li",{children:["Go to ",e.jsx("strong",{children:"Projects"})]}),e.jsx("li",{children:'Find "Restaurant Website Redesign"'}),e.jsxs("li",{children:["Click ",e.jsx("strong",{children:"Log Work"})]}),e.jsxs("li",{children:["Select ",e.jsx("strong",{children:'"Page Design ($200.00/page)"'})]}),e.jsxs("li",{children:["Set quantity to ",e.jsx("strong",{children:"2"})]}),e.jsx("li",{children:'Add a note like "Homepage and menu page"'}),e.jsxs("li",{children:["Click ",e.jsx("strong",{children:"Log Work"})]})]}),e.jsxs("p",{className:"text-muted-foreground",children:["The system calculates: 2 pages x $200 = ",e.jsx("strong",{children:"$400"}),". Done."]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"You can log as many entries as you want. They all pile up under the project until you create an invoice."})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary text-primary-foreground text-sm font-semibold shrink-0",children:"5"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(La,{className:"w-4 h-4 text-muted-foreground shrink-0"}),e.jsx("h3",{className:"font-semibold text-sm",children:"Generate an Invoice"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground leading-relaxed",children:["When you're ready to bill the client, go to ",e.jsx("strong",{children:"Projects"}),", find their project, and click ",e.jsx("strong",{children:"Generate Invoice"}),". The system adds up all the unbilled work, applies your tax rate, and creates an invoice automatically."]}),e.jsxs("div",{className:"mt-2 p-3 rounded-md bg-muted/50 text-sm space-y-2",children:[e.jsx("p",{className:"font-medium",children:"Example invoice breakdown:"}),e.jsxs("ul",{className:"text-muted-foreground space-y-1",children:[e.jsx("li",{children:"2x Page Design @ $200 = $400"}),e.jsx("li",{children:"5x Image Assets @ $25 = $125"}),e.jsx("li",{children:"1x Consultation @ $100 = $100"}),e.jsx("li",{className:"pt-1 border-t font-medium text-foreground",children:"Subtotal: $625"}),e.jsx("li",{children:"Tax (10%): $62.50"}),e.jsx("li",{className:"font-semibold text-foreground",children:"Total: $687.50"})]})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["You can view all your invoices on the ",e.jsx("strong",{children:"Invoices"})," page, and mark them as paid when the client pays you."]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary text-primary-foreground text-sm font-semibold shrink-0",children:"6"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(tn,{className:"w-4 h-4 text-muted-foreground shrink-0"}),e.jsx("h3",{className:"font-semibold text-sm",children:"Share the Client Portal"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground leading-relaxed",children:["Each customer gets their own private portal link. Go to ",e.jsx("strong",{children:"Customers"}),", find the client, and click ",e.jsx("strong",{children:"Portal Link"})," to copy it. Send this link to your client so they can view their invoices, project status, and payment history anytime."]}),e.jsxs("div",{className:"mt-2 p-3 rounded-md bg-muted/50 text-sm space-y-2",children:[e.jsx("p",{className:"font-medium",children:"What the client sees:"}),e.jsxs("ul",{className:"text-muted-foreground space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Their total amount due and payment history"}),e.jsx("li",{children:"All their projects and current status"}),e.jsx("li",{children:"Every invoice with full line-item detail"}),e.jsx("li",{children:"Overdue alerts if any invoices are past due"})]})]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary text-primary-foreground text-sm font-semibold shrink-0",children:"7"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(bs,{className:"w-4 h-4 text-muted-foreground shrink-0"}),e.jsx("h3",{className:"font-semibold text-sm",children:"Email Invoices to Clients"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground leading-relaxed",children:["You can email invoices directly to your clients. Go to ",e.jsx("strong",{children:"Invoices"}),", find the invoice, and click the ",e.jsx("strong",{children:"send icon"})," (paper airplane). The client receives a professional email with the full invoice breakdown and a link to their portal."]}),e.jsxs("div",{className:"mt-2 p-3 rounded-md bg-muted/50 text-sm space-y-2",children:[e.jsx("p",{className:"font-medium",children:"You can also send from the detail view:"}),e.jsxs("ol",{className:"list-decimal list-inside text-muted-foreground space-y-1",children:[e.jsxs("li",{children:["Click the ",e.jsx("strong",{children:"eye icon"})," on any invoice to view details"]}),e.jsxs("li",{children:["Click ",e.jsx("strong",{children:'"Email Invoice to Client"'})]}),e.jsx("li",{children:"The invoice is emailed, and draft invoices are automatically marked as pending"})]})]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary text-primary-foreground text-sm font-semibold shrink-0",children:"8"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(qn,{className:"w-4 h-4 text-muted-foreground shrink-0"}),e.jsx("h3",{className:"font-semibold text-sm",children:"Track Overdue Invoices"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground leading-relaxed",children:["The system automatically tracks overdue invoices. When an invoice passes its due date (30 days after you create it), it turns ",e.jsx("strong",{children:"red"}),' and shows as "overdue" everywhere: on the ',e.jsx("strong",{children:"Overview"}),", the ",e.jsx("strong",{children:"Invoices"})," page, and in the client's portal. You'll see a red alert banner reminding you to follow up with the client."]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs(ce,{className:"p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-md bg-primary/10 shrink-0",children:e.jsx(Bu,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold",children:"Notifications"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Configure billing alerts"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Invoice notifications"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Get notified when invoices are generated"})]}),e.jsx(Dc,{"data-testid":"switch-invoice-notif"})]}),e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Payment alerts"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Get notified on successful payments"})]}),e.jsx(Dc,{"data-testid":"switch-payment-notif"})]}),e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Unbilled work reminders"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Remind you about unbilled work entries"})]}),e.jsx(Dc,{"data-testid":"switch-unbilled-notif"})]})]})]}),e.jsxs(ce,{className:"p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-md bg-primary/10 shrink-0",children:e.jsx(jn,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold",children:"Regional Settings"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Currency and locale preferences"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_e,{htmlFor:"currency",children:"Default Currency"}),e.jsx(De,{id:"currency",value:"USD",disabled:!0,"data-testid":"input-currency"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_e,{htmlFor:"timezone",children:"Timezone"}),e.jsx(De,{id:"timezone",value:"America/New_York",disabled:!0,"data-testid":"input-timezone"})]})]})]})]}),e.jsxs(ce,{className:"p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-md bg-primary/10 shrink-0",children:e.jsx(Fs,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold",children:"Email-to-Ticket Setup"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically create support tickets from incoming emails"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-3 rounded-md bg-muted/50 text-sm space-y-2",children:[e.jsxs("p",{className:"text-muted-foreground",children:["When someone sends an email to ",e.jsx("strong",{children:"hello@aipoweredsites.com"}),", a support ticket is automatically created in the system. To enable this:"]}),e.jsxs("ol",{className:"list-decimal list-inside text-muted-foreground space-y-1 pl-2",children:[e.jsxs("li",{children:["Go to your ",e.jsx("strong",{children:"Resend Dashboard"})," and navigate to ",e.jsx("strong",{children:"Webhooks"})]}),e.jsx("li",{children:"Add a new webhook endpoint with this URL:"})]}),e.jsxs("div",{className:"p-2 rounded bg-muted font-mono text-xs break-all","data-testid":"text-webhook-url",children:[window.location.origin,"/api/webhooks/resend/inbound"]}),e.jsxs("ol",{className:"list-decimal list-inside text-muted-foreground space-y-1 pl-2",start:3,children:[e.jsxs("li",{children:["Select the ",e.jsx("strong",{children:"email.received"})," event type"]}),e.jsx("li",{children:"Save the webhook and you're done"})]})]}),e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsx(G3,{className:"w-4 h-4 text-muted-foreground mt-0.5 shrink-0"}),e.jsx("p",{className:"text-muted-foreground",children:"Quote form submissions from the landing page also automatically create support tickets."})]})]})]}),e.jsxs(ce,{className:"p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-md bg-teal-500/10 shrink-0",children:e.jsx(Ma,{className:"w-5 h-5 text-teal-600 dark:text-teal-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"font-semibold",children:"Deploy Platforms"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Connect one or more platforms to deploy client sites"})]})]}),e.jsxs("div",{className:"p-3 rounded-md bg-muted/30 text-sm text-muted-foreground mb-5",children:[e.jsx("strong",{children:"How it works:"})," Build client sites on Replit  push to GitHub  platform auto-deploys  client sees the live preview link. Choose the right platform for each project type."]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"p-4 rounded-lg border border-teal-500/20 bg-teal-500/5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"w-7 h-7 rounded bg-teal-500/10 text-teal-600 dark:text-teal-400 font-bold text-sm flex items-center justify-center",children:"N"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-sm",children:"Netlify"}),e.jsx("p",{className:"text-[11px] text-muted-foreground",children:"Static sites & JAMstack  Free tier: unlimited sites, 100GB bandwidth"})]}),s?.netlify?.configured&&e.jsxs(je,{variant:"outline",className:"border-green-500/30 text-green-600 dark:text-green-400 text-[10px]",children:[e.jsx(Kt,{className:"w-3 h-3 mr-1"})," Connected"]})]}),e.jsxs("div",{className:"space-y-2 text-xs text-muted-foreground",children:[e.jsxs("p",{children:["1. Sign up at ",e.jsx("a",{href:"https://app.netlify.com/signup",target:"_blank",rel:"noopener noreferrer",className:"underline underline-offset-2",children:"netlify.com"})]}),e.jsxs("p",{children:["2. Go to ",e.jsx("strong",{children:"User Settings  Applications  Personal access tokens"}),"  create token"]}),e.jsxs("p",{children:["3. Add secret: ",e.jsx("code",{className:"px-1 py-0.5 rounded bg-muted text-[11px] font-mono",children:"NETLIFY_API_TOKEN"})]}),e.jsxs("p",{children:["4. Connect GitHub in Netlify: ",e.jsx("strong",{children:"User Settings  Applications"})]})]})]}),e.jsxs("div",{className:"p-4 rounded-lg border border-blue-500/20 bg-blue-500/5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"w-7 h-7 rounded bg-blue-500/10 text-blue-600 dark:text-blue-400 font-bold text-sm flex items-center justify-center",children:"V"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-sm",children:"Vercel"}),e.jsx("p",{className:"text-[11px] text-muted-foreground",children:"Static & serverless apps  Free tier: unlimited deploys, 100GB bandwidth"})]}),s?.vercel?.configured&&e.jsxs(je,{variant:"outline",className:"border-green-500/30 text-green-600 dark:text-green-400 text-[10px]",children:[e.jsx(Kt,{className:"w-3 h-3 mr-1"})," Connected"]})]}),e.jsxs("div",{className:"space-y-2 text-xs text-muted-foreground",children:[e.jsxs("p",{children:["1. Sign up at ",e.jsx("a",{href:"https://vercel.com/signup",target:"_blank",rel:"noopener noreferrer",className:"underline underline-offset-2",children:"vercel.com"})]}),e.jsxs("p",{children:["2. Go to ",e.jsx("strong",{children:"Settings  Tokens"}),"  create token (full account scope)"]}),e.jsxs("p",{children:["3. Add secret: ",e.jsx("code",{className:"px-1 py-0.5 rounded bg-muted text-[11px] font-mono",children:"VERCEL_API_TOKEN"})]}),e.jsxs("p",{children:["4. Connect GitHub in Vercel: ",e.jsx("strong",{children:"Settings  Git  Connect GitHub"})]})]})]}),e.jsxs("div",{className:"p-4 rounded-lg border border-purple-500/20 bg-purple-500/5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"w-7 h-7 rounded bg-purple-500/10 text-purple-600 dark:text-purple-400 font-bold text-sm flex items-center justify-center",children:"R"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-sm",children:"Railway"}),e.jsx("p",{className:"text-[11px] text-muted-foreground",children:"Docker & full-stack apps  Free trial: $5 credit, then $5/mo + usage"})]}),s?.railway?.configured&&e.jsxs(je,{variant:"outline",className:"border-green-500/30 text-green-600 dark:text-green-400 text-[10px]",children:[e.jsx(Kt,{className:"w-3 h-3 mr-1"})," Connected"]})]}),e.jsxs("div",{className:"space-y-2 text-xs text-muted-foreground",children:[e.jsxs("p",{children:["1. Sign up at ",e.jsx("a",{href:"https://railway.app",target:"_blank",rel:"noopener noreferrer",className:"underline underline-offset-2",children:"railway.app"})]}),e.jsxs("p",{children:["2. Go to ",e.jsx("strong",{children:"Account Settings  Tokens"}),"  create API token"]}),e.jsxs("p",{children:["3. Add secret: ",e.jsx("code",{className:"px-1 py-0.5 rounded bg-muted text-[11px] font-mono",children:"RAILWAY_API_TOKEN"})]}),e.jsxs("p",{children:["4. Connect GitHub in Railway: ",e.jsx("strong",{children:"Account Settings  Source"})]})]})]}),e.jsxs("div",{className:"p-3 rounded-md bg-amber-500/5 border border-amber-500/20 text-xs text-muted-foreground",children:[e.jsx("strong",{className:"text-amber-600 dark:text-amber-400",children:"Which to choose?"})," Use ",e.jsx("strong",{children:"Netlify"})," for simple HTML/CSS/React sites. Use ",e.jsx("strong",{children:"Vercel"})," for Next.js or serverless apps. Use ",e.jsx("strong",{children:"Railway"})," for Docker containers and full-stack apps with databases. You can connect all three and choose per project."]})]})]})]})}function Lu(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Lu=function(t){return typeof t}:Lu=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lu(s)}var K2="clover",pR=function(t){return t===3?"v3":t},W2="https://js.stripe.com",xR="".concat(W2,"/").concat(K2,"/stripe.js"),gR=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,vR=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,yR=function(t){return gR.test(t)||vR.test(t)},bR=function(){for(var t=document.querySelectorAll('script[src^="'.concat(W2,'"]')),n=0;n<t.length;n++){var a=t[n];if(yR(a.src))return a}return null},ab=function(t){var n="",a=document.createElement("script");a.src="".concat(xR).concat(n);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(a),a},wR=function(t,n){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"8.7.0",startTime:n})},bc=null,fu=null,pu=null,jR=function(t){return function(n){t(new Error("Failed to load Stripe.js",{cause:n}))}},NR=function(t,n){return function(){window.Stripe?t(window.Stripe):n(new Error("Stripe.js not available"))}},kR=function(t){return bc!==null?bc:(bc=new Promise(function(n,a){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe){n(window.Stripe);return}try{var o=bR();if(!(o&&t)){if(!o)o=ab(t);else if(o&&pu!==null&&fu!==null){var l;o.removeEventListener("load",pu),o.removeEventListener("error",fu),(l=o.parentNode)===null||l===void 0||l.removeChild(o),o=ab(t)}}pu=NR(n,a),fu=jR(a),o.addEventListener("load",pu),o.addEventListener("error",fu)}catch(d){a(d);return}}),bc.catch(function(n){return bc=null,Promise.reject(n)}))},CR=function(t,n,a){if(t===null)return null;var o=n[0];if(typeof o!="string")throw new Error("Expected publishable key to be of type string, got type ".concat(Lu(o)," instead."));var l=o.match(/^pk_test/),d=pR(t.version),u=K2;l&&d!==u&&console.warn("Stripe.js@".concat(d," was loaded on the page, but @stripe/stripe-js@").concat("8.7.0"," expected Stripe.js@").concat(u,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var h=t.apply(void 0,n);return wR(h,a),h},wc,V2=!1,G2=function(){return wc||(wc=kR(null).catch(function(t){return wc=null,Promise.reject(t)}),wc)};Promise.resolve().then(function(){return G2()}).catch(function(s){V2||console.warn(s)});var SR=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];V2=!0;var o=Date.now();return G2().then(function(l){return CR(l,n,o)})},$f={exports:{}},qf,ib;function ER(){if(ib)return qf;ib=1;var s="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return qf=s,qf}var Ff,ob;function TR(){if(ob)return Ff;ob=1;var s=ER();function t(){}function n(){}return n.resetWarningCache=t,Ff=function(){function a(d,u,h,f,b,v){if(v!==s){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}a.isRequired=a;function o(){return a}var l={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:o,element:a,elementType:a,instanceOf:o,node:a,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:n,resetWarningCache:t};return l.PropTypes=l,l},Ff}var lb;function AR(){return lb||(lb=1,$f.exports=TR()()),$f.exports}var PR=AR();const Wt=ed(PR);function cb(s,t){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);t&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(s,o).enumerable})),n.push.apply(n,a)}return n}function db(s){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cb(Object(n),!0).forEach(function(a){Q2(s,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):cb(Object(n)).forEach(function(a){Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(n,a))})}return s}function Mu(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Mu=function(t){return typeof t}:Mu=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mu(s)}function Q2(s,t,n){return t in s?Object.defineProperty(s,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[t]=n,s}function RR(s,t){if(s==null)return{};var n={},a=Object.keys(s),o,l;for(l=0;l<a.length;l++)o=a[l],!(t.indexOf(o)>=0)&&(n[o]=s[o]);return n}function IR(s,t){if(s==null)return{};var n=RR(s,t),a,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);for(o=0;o<l.length;o++)a=l[o],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(s,a)&&(n[a]=s[a])}return n}function Y2(s,t){return OR(s)||_R(s,t)||LR(s,t)||MR()}function OR(s){if(Array.isArray(s))return s}function _R(s,t){var n=s&&(typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"]);if(n!=null){var a=[],o=!0,l=!1,d,u;try{for(n=n.call(s);!(o=(d=n.next()).done)&&(a.push(d.value),!(t&&a.length===t));o=!0);}catch(h){l=!0,u=h}finally{try{!o&&n.return!=null&&n.return()}finally{if(l)throw u}}return a}}function LR(s,t){if(s){if(typeof s=="string")return ub(s,t);var n=Object.prototype.toString.call(s).slice(8,-1);if(n==="Object"&&s.constructor&&(n=s.constructor.name),n==="Map"||n==="Set")return Array.from(s);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ub(s,t)}}function ub(s,t){(t==null||t>s.length)&&(t=s.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=s[n];return a}function MR(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var gn=function(t,n,a){var o=!!a,l=ot.useRef(a);ot.useEffect(function(){l.current=a},[a]),ot.useEffect(function(){if(!o||!t)return function(){};var d=function(){l.current&&l.current.apply(l,arguments)};return t.on(n,d),function(){t.off(n,d)}},[o,n,t,l])},$p=function(t){var n=ot.useRef(t);return ot.useEffect(function(){n.current=t},[t]),n.current},El=function(t){return t!==null&&Mu(t)==="object"},DR=function(t){return El(t)&&typeof t.then=="function"},$R=function(t){return El(t)&&typeof t.elements=="function"&&typeof t.createToken=="function"&&typeof t.createPaymentMethod=="function"&&typeof t.confirmCardPayment=="function"},mb="[object Object]",qR=function s(t,n){if(!El(t)||!El(n))return t===n;var a=Array.isArray(t),o=Array.isArray(n);if(a!==o)return!1;var l=Object.prototype.toString.call(t)===mb,d=Object.prototype.toString.call(n)===mb;if(l!==d)return!1;if(!l&&!a)return t===n;var u=Object.keys(t),h=Object.keys(n);if(u.length!==h.length)return!1;for(var f={},b=0;b<u.length;b+=1)f[u[b]]=!0;for(var v=0;v<h.length;v+=1)f[h[v]]=!0;var y=Object.keys(f);if(y.length!==u.length)return!1;var N=t,C=n,g=function(A){return s(N[A],C[A])};return y.every(g)},X2=function(t,n,a){return El(t)?Object.keys(t).reduce(function(o,l){var d=!El(n)||!qR(t[l],n[l]);return a.includes(l)?(d&&console.warn("Unsupported prop change: options.".concat(l," is not a mutable property.")),o):d?db(db({},o||{}),{},Q2({},l,t[l])):o},null):null},Z2="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",hb=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Z2;if(t===null||$R(t))return t;throw new Error(n)},FR=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Z2;if(DR(t))return{tag:"async",stripePromise:Promise.resolve(t).then(function(o){return hb(o,n)})};var a=hb(t,n);return a===null?{tag:"empty"}:{tag:"sync",stripe:a}},zR=function(t){!t||!t._registerWrapper||!t.registerAppInfo||(t._registerWrapper({name:"react-stripe-js",version:"5.6.0"}),t.registerAppInfo({name:"react-stripe-js",version:"5.6.0",url:"https://stripe.com/docs/stripe-js/react"}))},Lm=ot.createContext(null);Lm.displayName="ElementsContext";var J2=function(t,n){if(!t)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(n," in an <Elements> provider."));return t},ek=function(t){var n=t.stripe,a=t.options,o=t.children,l=ot.useMemo(function(){return FR(n)},[n]),d=ot.useState(function(){return{stripe:l.tag==="sync"?l.stripe:null,elements:l.tag==="sync"?l.stripe.elements(a):null}}),u=Y2(d,2),h=u[0],f=u[1];ot.useEffect(function(){var y=!0,N=function(g){f(function(k){return k.stripe?k:{stripe:g,elements:g.elements(a)}})};return l.tag==="async"&&!h.stripe?l.stripePromise.then(function(C){C&&y&&N(C)}):l.tag==="sync"&&!h.stripe&&N(l.stripe),function(){y=!1}},[l,h,a]);var b=$p(n);ot.useEffect(function(){b!==null&&b!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[b,n]);var v=$p(a);return ot.useEffect(function(){if(h.elements){var y=X2(a,v,["clientSecret","fonts"]);y&&h.elements.update(y)}},[a,v,h.elements]),ot.useEffect(function(){zR(h.stripe)},[h.stripe]),ot.createElement(Lm.Provider,{value:h},o)};ek.propTypes={stripe:Wt.any,options:Wt.object};var UR=function(t){var n=ot.useContext(Lm);return J2(n,t)},BR=function(){var t=UR("calls useElements()"),n=t.elements;return n};Wt.func.isRequired;var tk=ot.createContext(null);tk.displayName="CheckoutContext";Wt.any,Wt.shape({clientSecret:Wt.oneOfType([Wt.string,Wt.instanceOf(Promise)]).isRequired,elementsOptions:Wt.object}).isRequired;var qp=function(t){var n=ot.useContext(tk),a=ot.useContext(Lm);if(n){if(a)throw new Error("You cannot wrap the part of your app that ".concat(t," in both <CheckoutProvider> and <Elements> providers."));return n}else return J2(a,t)},HR=["mode"],KR=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},Un=function(t,n){var a="".concat(KR(t),"Element"),o=function(h){var f=h.id,b=h.className,v=h.options,y=v===void 0?{}:v,N=h.onBlur,C=h.onFocus,g=h.onReady,k=h.onChange,A=h.onEscape,E=h.onClick,S=h.onLoadError,R=h.onLoaderStart,H=h.onNetworksChange,re=h.onConfirm,K=h.onCancel,ee=h.onShippingAddressChange,me=h.onShippingRateChange,pe=h.onSavedPaymentMethodRemove,L=h.onSavedPaymentMethodUpdate,X=qp("mounts <".concat(a,">")),z="elements"in X?X.elements:null,V="checkoutState"in X?X.checkoutState:null,se=V?.type==="success"||V?.type==="loading"?V.sdk:null,I=ot.useState(null),O=Y2(I,2),T=O[0],Y=O[1],Q=ot.useRef(null),F=ot.useRef(null);gn(T,"blur",N),gn(T,"focus",C),gn(T,"escape",A),gn(T,"click",E),gn(T,"loaderror",S),gn(T,"loaderstart",R),gn(T,"networkschange",H),gn(T,"confirm",re),gn(T,"cancel",K),gn(T,"shippingaddresschange",ee),gn(T,"shippingratechange",me),gn(T,"savedpaymentmethodremove",pe),gn(T,"savedpaymentmethodupdate",L),gn(T,"change",k);var te;g&&(t==="expressCheckout"?te=g:te=function(){g(T)}),gn(T,"ready",te),ot.useLayoutEffect(function(){if(Q.current===null&&F.current!==null&&(z||se)){var U=null;if(se)switch(t){case"paymentForm":U=se.createPaymentFormElement(y);break;case"payment":U=se.createPaymentElement(y);break;case"address":if("mode"in y){var M=y.mode,q=IR(y,HR);if(M==="shipping")U=se.createShippingAddressElement(q);else if(M==="billing")U=se.createBillingAddressElement(q);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":U=se.createExpressCheckoutElement(y);break;case"currencySelector":U=se.createCurrencySelectorElement();break;case"taxId":U=se.createTaxIdElement(y);break;default:throw new Error("Invalid Element type ".concat(a,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else z&&(U=z.create(t,y));Q.current=U,Y(U),U&&U.mount(F.current)}},[z,se,y]);var B=$p(y);return ot.useEffect(function(){if(Q.current){var U=X2(y,B,["paymentRequest"]);U&&"update"in Q.current&&Q.current.update(U)}},[y,B]),ot.useLayoutEffect(function(){return function(){if(Q.current&&typeof Q.current.destroy=="function")try{Q.current.destroy(),Q.current=null}catch{}}},[]),ot.createElement("div",{id:f,className:b,ref:F})},l=function(h){qp("mounts <".concat(a,">"));var f=h.id,b=h.className;return ot.createElement("div",{id:f,className:b})},d=n?l:o;return d.propTypes={id:Wt.string,className:Wt.string,onChange:Wt.func,onBlur:Wt.func,onFocus:Wt.func,onReady:Wt.func,onEscape:Wt.func,onClick:Wt.func,onLoadError:Wt.func,onLoaderStart:Wt.func,onNetworksChange:Wt.func,onConfirm:Wt.func,onCancel:Wt.func,onShippingAddressChange:Wt.func,onShippingRateChange:Wt.func,onSavedPaymentMethodRemove:Wt.func,onSavedPaymentMethodUpdate:Wt.func,options:Wt.object},d.displayName=a,d.__elementType=t,d},Bn=typeof window>"u",WR=ot.createContext(null);WR.displayName="EmbeddedCheckoutProviderContext";var VR=function(){var t=qp("calls useStripe()"),n=t.stripe;return n};Un("auBankAccount",Bn);var fb=Un("card",Bn);Un("cardNumber",Bn);Un("cardExpiry",Bn);Un("cardCvc",Bn);Un("iban",Bn);Un("payment",Bn);Un("expressCheckout",Bn);Un("paymentRequestButton",Bn);Un("linkAuthentication",Bn);Un("address",Bn);Un("shippingAddress",Bn);Un("paymentMethodMessaging",Bn);Un("taxId",Bn);const GR="/images/logo.png";let zf=null;function QR(){return zf||(zf=fetch("/api/stripe/publishable-key").then(s=>s.json()).then(s=>SR(s.publishableKey)).catch(()=>null)),zf}function YR({brand:s}){const t=s.charAt(0).toUpperCase()+s.slice(1);return e.jsx("div",{className:"flex items-center justify-center w-10 h-7 rounded-md border bg-background text-xs font-bold uppercase tracking-wide",children:s==="visa"?"VISA":s==="mastercard"?"MC":s==="amex"?"AMEX":t.substring(0,4)})}function XR({token:s,onSuccess:t,onCancel:n}){const a=VR(),o=BR(),[l,d]=p.useState(!1),[u,h]=p.useState(null),{toast:f}=pt(),b=async k=>{if(k.preventDefault(),!(!a||!o)){d(!0),h(null);try{const A=await ke("POST",`/api/portal/${s}/setup-intent`),{clientSecret:E}=await A.json(),S=o.getElement(fb);if(!S)throw new Error("Card element not found");const R=await a.confirmCardSetup(E,{payment_method:{card:S}});R.error?h(R.error.message||"Failed to save card"):(f({title:"Card saved",description:"Your payment method has been added."}),t())}catch(A){h(A.message||"Something went wrong")}finally{d(!1)}}},v=document.documentElement.classList.contains("dark"),y=v?"#fafafa":"#171717",N=v?"#a3a3a3":"#666666",C="#ef4444",g=v?"#1a1a1a":"#ffffff";return e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsx("div",{className:"p-4 border rounded-lg",style:{backgroundColor:g},children:e.jsx(fb,{options:{style:{base:{fontSize:"15px",color:y,iconColor:y,"::placeholder":{color:N},fontFamily:"Poppins, sans-serif",fontSmoothing:"antialiased",":-webkit-autofill":{color:y}},invalid:{color:C,iconColor:C}}}})}),u&&e.jsx("p",{className:"text-xs text-destructive",children:u}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs($,{type:"submit",disabled:l||!a,"data-testid":"button-save-card",children:[l?e.jsx(Qe,{className:"w-4 h-4 mr-1.5 animate-spin"}):e.jsx(yi,{className:"w-4 h-4 mr-1.5"}),"Save Card"]}),e.jsx($,{variant:"ghost",type:"button",onClick:n,"data-testid":"button-cancel-add-card",children:"Cancel"})]})]})}function ZR({token:s}){const[t,n]=p.useState(!1),[a,o]=p.useState(null),{toast:l}=pt();p.useEffect(()=>{o(QR())},[]);const{data:d,isLoading:u,refetch:h}=Le({queryKey:["/api/portal",s,"payment-methods"],queryFn:async()=>{const y=await fetch(`/api/portal/${s}/payment-methods`);if(!y.ok)throw new Error("Failed to load payment methods");return y.json()},enabled:!!s}),f=Te({mutationFn:async y=>(await ke("DELETE",`/api/portal/${s}/payment-methods/${y}`)).json(),onSuccess:()=>{h(),l({title:"Card removed",description:"Payment method has been deleted."})},onError:y=>{l({title:"Error",description:y.message||"Could not remove card.",variant:"destructive"})}}),b=Te({mutationFn:async y=>(await ke("POST",`/api/portal/${s}/default-payment-method`,{paymentMethodId:y})).json(),onSuccess:()=>{h(),l({title:"Default updated",description:"Your default payment method has been changed."})},onError:y=>{l({title:"Error",description:y.message||"Could not set default.",variant:"destructive"})}}),v=d?.paymentMethods||[];return e.jsxs("div",{"data-testid":"card-payment-methods",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap mb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Payment Methods"}),!t&&v.length>0&&e.jsxs($,{variant:"ghost",size:"sm",onClick:()=>n(!0),"data-testid":"button-add-card",children:[e.jsx(Qt,{className:"w-4 h-4 mr-1"}),"Add Card"]})]}),u?e.jsxs("div",{className:"space-y-3",children:[e.jsx(Ce,{className:"h-16 w-full rounded-md"}),e.jsx(Ce,{className:"h-16 w-full rounded-md"})]}):e.jsxs(e.Fragment,{children:[v.length===0&&!t&&e.jsxs(ce,{className:"p-8 text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-muted mb-3",children:e.jsx(yi,{className:"w-5 h-5 text-muted-foreground"})}),e.jsx("p",{className:"text-sm font-medium mb-1",children:"No saved payment methods"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"Add a card for faster checkout"}),e.jsxs($,{variant:"outline",onClick:()=>n(!0),"data-testid":"button-add-first-card",children:[e.jsx(Qt,{className:"w-4 h-4 mr-1.5"}),"Add Your First Card"]})]}),v.length>0&&e.jsx("div",{className:"space-y-2",children:v.map(y=>e.jsx(ce,{className:"p-4","data-testid":`card-pm-${y.id}`,children:e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(YR,{brand:y.brand}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("span",{className:"text-sm font-medium","data-testid":`text-pm-last4-${y.id}`,children:["**** ",y.last4]}),y.isDefault&&e.jsxs(je,{variant:"secondary",className:"text-xs",children:[e.jsx(Ia,{className:"w-3 h-3 mr-0.5"}),"Default"]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Expires ",String(y.expMonth).padStart(2,"0"),"/",y.expYear]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[!y.isDefault&&e.jsxs($,{variant:"ghost",size:"sm",onClick:()=>b.mutate(y.id),disabled:b.isPending,"data-testid":`button-set-default-${y.id}`,children:[e.jsx(Ia,{className:"w-3.5 h-3.5 mr-1"}),"Set Default"]}),e.jsx($,{variant:"ghost",size:"icon",onClick:()=>{confirm("Remove this card?")&&f.mutate(y.id)},disabled:f.isPending,"data-testid":`button-remove-pm-${y.id}`,children:e.jsx(ps,{className:"w-4 h-4 text-muted-foreground"})})]})]})},y.id))}),t&&a&&e.jsxs(ce,{className:"p-5 mt-3",children:[e.jsx("p",{className:"text-sm font-medium mb-4",children:"Add a new card"}),e.jsx(ek,{stripe:a,children:e.jsx(XR,{token:s,onSuccess:()=>{n(!1),h()},onCancel:()=>n(!1)})})]})]})]})}function JR(){return e.jsxs("div",{className:"min-h-screen bg-muted/30",children:[e.jsx("div",{className:"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-12",children:[e.jsx(Ce,{className:"h-10 w-64 bg-white/10"}),e.jsx(Ce,{className:"h-5 w-48 mt-3 bg-white/10"})]})}),e.jsxs("div",{className:"max-w-6xl mx-auto px-6 -mt-8",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8",children:[1,2,3].map(s=>e.jsx(ce,{className:"p-6",children:e.jsx(Ce,{className:"h-10 w-24"})},s))}),e.jsx("div",{className:"space-y-4",children:[1,2,3].map(s=>e.jsxs(ce,{className:"p-6",children:[e.jsx(Ce,{className:"h-6 w-40 mb-3"}),e.jsx(Ce,{className:"h-4 w-32"})]},s))})]})]})}function pb(s){switch(s){case"paid":return e.jsx(yn,{className:"w-4 h-4"});case"overdue":return e.jsx(qn,{className:"w-4 h-4"});default:return e.jsx(Gt,{className:"w-4 h-4"})}}function eI({token:s,projectId:t}){const{toast:n}=pt(),[a,o]=p.useState(!1),{uploadFile:l}=D2({}),{data:d,isLoading:u}=Le({queryKey:["/api/portal",s,"projects",t,"files"],queryFn:async()=>{const y=await fetch(`/api/portal/${s}/projects/${t}/files`);if(!y.ok)throw new Error("Failed to fetch files");return y.json()},enabled:!!s&&!!t}),h=Te({mutationFn:async y=>{if(!(await fetch(`/api/portal/${s}/files/${y}`,{method:"DELETE"})).ok)throw new Error("Failed to delete")},onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/portal",s,"projects",t,"files"]}),n({title:"File removed"})}}),f=async y=>{const N=y.target.files;if(!(!N||N.length===0)){o(!0);try{for(let C=0;C<N.length;C++){const g=N[C],k=await l(g);k&&await fetch(`/api/portal/${s}/projects/${t}/files`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({objectPath:k.objectPath,fileName:g.name,fileSize:k.metadata.size,contentType:k.metadata.contentType})})}ve.invalidateQueries({queryKey:["/api/portal",s,"projects",t,"files"]}),n({title:"Files uploaded",description:`${N.length} file${N.length>1?"s":""} uploaded successfully.`})}catch(C){n({title:"Upload failed",description:C.message,variant:"destructive"})}finally{o(!1),y.target.value=""}}},b=y=>y?.startsWith("image/")?e.jsx(No,{className:"w-4 h-4 text-blue-500"}):e.jsx(zw,{className:"w-4 h-4 text-muted-foreground"}),v=y=>y?y<1024?`${y} B`:y<1024*1024?`${(y/1024).toFixed(1)} KB`:`${(y/(1024*1024)).toFixed(1)} MB`:"";return e.jsxs("div",{className:"mt-4 pt-4 border-t","data-testid":`portal-client-files-${t}`,children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-3",children:[e.jsxs("p",{className:"text-xs font-medium text-muted-foreground flex items-center gap-1.5",children:[e.jsx(Vu,{className:"w-3.5 h-3.5"}),"Your Files ",d&&d.length>0?`(${d.length})`:""]}),e.jsxs("div",{children:[e.jsx("input",{type:"file",multiple:!0,onChange:f,className:"hidden",id:`client-file-upload-${t}`,"data-testid":`input-client-file-upload-${t}`}),e.jsxs($,{variant:"outline",size:"sm",onClick:()=>document.getElementById(`client-file-upload-${t}`)?.click(),disabled:a,"data-testid":`button-upload-client-file-${t}`,children:[a?e.jsx(Qe,{className:"w-3.5 h-3.5 mr-1.5 animate-spin"}):e.jsx(Vu,{className:"w-3.5 h-3.5 mr-1.5"}),a?"Uploading...":"Upload Files"]})]})]}),u&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{className:"h-10 w-full rounded-md"}),e.jsx(Ce,{className:"h-10 w-full rounded-md"})]}),d&&d.length>0&&e.jsx("div",{className:"space-y-1.5",children:d.map(y=>e.jsxs("div",{className:"flex items-center gap-3 p-2.5 rounded-md border bg-muted/30","data-testid":`client-file-${y.id}`,children:[b(y.contentType),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-medium truncate",children:y.fileName}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:v(y.fileSize)})]}),e.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[y.contentType?.startsWith("image/")&&e.jsx("a",{href:y.objectPath,target:"_blank",rel:"noreferrer",children:e.jsx($,{size:"icon",variant:"ghost","data-testid":`button-view-file-${y.id}`,children:e.jsx(jo,{className:"w-3.5 h-3.5"})})}),e.jsx("a",{href:y.objectPath,download:y.fileName,children:e.jsx($,{size:"icon",variant:"ghost","data-testid":`button-download-file-${y.id}`,children:e.jsx(co,{className:"w-3.5 h-3.5"})})}),e.jsx($,{size:"icon",variant:"ghost",onClick:()=>h.mutate(y.id),disabled:h.isPending,"data-testid":`button-delete-file-${y.id}`,children:e.jsx(ps,{className:"w-3.5 h-3.5"})})]})]},y.id))}),d&&d.length===0&&!u&&e.jsx("p",{className:"text-xs text-muted-foreground text-center py-3",children:"Upload logos, brand assets, or documents for this project."})]})}function tI({token:s,projectId:t}){const[n,a]=p.useState(null),[o,l]=p.useState(""),[d,u]=p.useState(null),{toast:h}=pt(),{data:f,isLoading:b}=Le({queryKey:["/api/portal",s,"projects",t,"screenshots"],queryFn:async()=>{const g=await fetch(`/api/portal/${s}/projects/${t}/screenshots`);if(!g.ok)throw new Error("Failed to fetch screenshots");return g.json()},enabled:!!s&&!!t}),v=Te({mutationFn:async g=>{const k=await fetch(`/api/portal/${s}/screenshots/${g}/approve`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!k.ok)throw new Error("Failed to approve");return k.json()},onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/portal",s,"projects",t,"screenshots"]}),h({title:"Approved",description:"Deliverable has been approved."}),a(null)}}),y=Te({mutationFn:async({screenshotId:g,notes:k})=>{const A=await fetch(`/api/portal/${s}/screenshots/${g}/revisions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({notes:k})});if(!A.ok)throw new Error("Failed to request revisions");return A.json()},onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/portal",s,"projects",t,"screenshots"]}),h({title:"Revisions Requested",description:"We'll review your feedback."}),l(""),u(null),a(null)}}),N=g=>g.approvalStatus?g.approvalStatus==="pending"?e.jsx(je,{variant:"secondary",className:"text-[10px]",children:"Needs Approval"}):g.approvalStatus==="approved"?e.jsx(je,{variant:"secondary",className:"text-[10px] bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 border-emerald-500/20",children:"Approved"}):g.approvalStatus==="revisions"?e.jsx(je,{variant:"secondary",className:"text-[10px] bg-amber-500/10 text-amber-600 dark:text-amber-400 border-amber-500/20",children:"Revisions Requested"}):null:null;if(b)return e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsx(Ce,{className:"h-4 w-24 mb-2"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ce,{className:"w-20 h-20 rounded-md"}),e.jsx(Ce,{className:"w-20 h-20 rounded-md"})]})]});if(!f||f.length===0)return null;const C=f.filter(g=>g.approvalStatus==="pending");return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-4 pt-4 border-t","data-testid":`portal-screenshots-${t}`,children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-3",children:[e.jsxs("p",{className:"text-xs font-medium text-muted-foreground flex items-center gap-1.5",children:[e.jsx(No,{className:"w-3.5 h-3.5"}),"Screenshots (",f.length,")"]}),C.length>0&&e.jsxs(je,{variant:"secondary",className:"text-[10px] bg-blue-500/10 text-blue-600 dark:text-blue-400 border-blue-500/20","data-testid":`badge-needs-approval-${t}`,children:[C.length," awaiting approval"]})]}),e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2",children:f.map(g=>e.jsxs("div",{className:"group relative rounded-md overflow-hidden border cursor-pointer",onClick:()=>a(g),"data-testid":`portal-screenshot-${g.id}`,children:[e.jsxs("div",{className:"aspect-square relative",children:[e.jsx("img",{src:g.objectPath,alt:g.fileName,className:"w-full h-full object-cover",loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors"}),g.approvalStatus==="pending"&&e.jsx("div",{className:"absolute top-1 right-1 w-2.5 h-2.5 rounded-full bg-blue-500 border border-white"}),g.approvalStatus==="approved"&&e.jsx("div",{className:"absolute top-1 right-1 w-2.5 h-2.5 rounded-full bg-emerald-500 border border-white"})]}),e.jsx("p",{className:"text-[10px] text-muted-foreground truncate px-1.5 py-1 border-t",title:g.fileName,"data-testid":`text-portal-screenshot-name-${g.id}`,children:g.fileName})]},g.id))})]}),n&&e.jsx(Ct,{open:!!n,onOpenChange:()=>{a(null),u(null),l("")},children:e.jsxs(vt,{className:"max-w-3xl p-2",children:[e.jsx(yt,{children:e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(bt,{className:"text-sm","data-testid":"text-lightbox-name",children:n.fileName}),N(n)]})}),e.jsx("img",{src:n.objectPath,alt:n.fileName,className:"w-full h-auto rounded-md"}),n.approvalStatus==="revisions"&&n.revisionNotes&&e.jsxs("div",{className:"bg-amber-500/10 border border-amber-500/20 rounded-md p-3 text-sm",children:[e.jsx("p",{className:"text-xs font-medium text-amber-600 dark:text-amber-400 mb-1",children:"Your revision notes:"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:n.revisionNotes})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 pt-2",children:[e.jsx("div",{className:"flex gap-2 flex-wrap",children:n.approvalStatus==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs($,{size:"sm",onClick:()=>v.mutate(n.id),disabled:v.isPending,className:"bg-emerald-600 text-white border-0","data-testid":`button-approve-${n.id}`,children:[v.isPending?e.jsx(Qe,{className:"w-3.5 h-3.5 mr-1.5 animate-spin"}):e.jsx(Yw,{className:"w-3.5 h-3.5 mr-1.5"}),"Approve"]}),e.jsxs($,{size:"sm",variant:"outline",onClick:()=>u(n.id),"data-testid":`button-request-revisions-${n.id}`,children:[e.jsx(vm,{className:"w-3.5 h-3.5 mr-1.5"}),"Request Revisions"]})]})}),e.jsx("a",{href:n.objectPath,download:!0,children:e.jsxs($,{size:"sm",variant:"outline","data-testid":"button-download-screenshot",children:[e.jsx(co,{className:"w-4 h-4 mr-1.5"}),"Download"]})})]}),d===n.id&&e.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[e.jsx(_e,{className:"text-xs",children:"What changes would you like?"}),e.jsx(Rs,{value:o,onChange:g=>l(g.target.value),placeholder:"Describe the changes you'd like...",className:"text-sm","data-testid":"input-revision-notes"}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx($,{size:"sm",variant:"ghost",onClick:()=>{u(null),l("")},children:"Cancel"}),e.jsxs($,{size:"sm",onClick:()=>y.mutate({screenshotId:n.id,notes:o}),disabled:!o.trim()||y.isPending,"data-testid":"button-submit-revisions",children:[y.isPending?e.jsx(Qe,{className:"w-3.5 h-3.5 mr-1.5 animate-spin"}):e.jsx(bs,{className:"w-3.5 h-3.5 mr-1.5"}),"Send Feedback"]})]})]})]})})]})}function sI({token:s}){const{data:t}=Le({queryKey:["/api/portal",s,"notifications"],queryFn:async()=>{const l=await fetch(`/api/portal/${s}/notifications`);if(!l.ok)throw new Error("Failed to fetch notifications");return l.json()},enabled:!!s,refetchInterval:3e4}),n=(t?.notifications||[]).slice(0,5),a=l=>{switch(l){case"project_update":return e.jsx($n,{className:"w-3.5 h-3.5 text-blue-500"});case"invoice_created":return e.jsx(La,{className:"w-3.5 h-3.5 text-emerald-500"});case"ticket_reply":return e.jsx(Mt,{className:"w-3.5 h-3.5 text-purple-500"});case"screenshot_uploaded":return e.jsx(No,{className:"w-3.5 h-3.5 text-amber-500"});case"payment_plan_created":return e.jsx(Lc,{className:"w-3.5 h-3.5 text-indigo-500"});default:return e.jsx(Bu,{className:"w-3.5 h-3.5 text-muted-foreground"})}},o=l=>{const d=Date.now()-new Date(l).getTime(),u=Math.floor(d/6e4);if(u<1)return"just now";if(u<60)return`${u}m ago`;const h=Math.floor(u/60);return h<24?`${h}h ago`:`${Math.floor(h/24)}d ago`};return n.length===0?null:e.jsxs("div",{"data-testid":"section-recent-activity",children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider mb-4",children:"Recent Activity"}),e.jsx(ce,{className:"divide-y",children:n.map(l=>e.jsxs("div",{className:"flex items-start gap-3 p-3.5","data-testid":`activity-item-${l.id}`,children:[e.jsx("div",{className:"mt-0.5 shrink-0",children:a(l.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:l.title}),e.jsx("p",{className:"text-[11px] text-muted-foreground mt-0.5",children:o(l.createdAt)})]}),!l.isRead&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500 mt-2 shrink-0"})]},l.id))})]})}function nI({token:s}){const{toast:t}=pt(),[n,a]=p.useState(!1),[o,l]=p.useState(!1),[d,u]=p.useState(!1),[h,f]=p.useState(!1);p.useEffect(()=>{"serviceWorker"in navigator&&"PushManager"in window&&(a(!0),navigator.serviceWorker.ready.then(y=>{y.pushManager.getSubscription().then(N=>{l(!!N)})}))},[]);const b=async()=>{u(!0);try{const y=await navigator.serviceWorker.register("/sw.js");await navigator.serviceWorker.ready;const N=await fetch("/api/push/vapid-key"),{publicKey:C}=await N.json();if(!C)throw new Error("Push not configured");const k=(await y.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:C})).toJSON();await ke("POST",`/api/portal/${s}/push/subscribe`,{endpoint:k.endpoint,keys:{p256dh:k.keys?.p256dh,auth:k.keys?.auth}}),l(!0),f(!1),t({title:"Notifications enabled",description:"You'll now receive push notifications for updates."})}catch(y){y?.name==="NotAllowedError"?t({title:"Notifications blocked",description:"Please enable notifications in your browser settings.",variant:"destructive"}):t({title:"Error",description:"Could not enable push notifications.",variant:"destructive"})}u(!1)},v=async()=>{u(!0);try{const N=await(await navigator.serviceWorker.ready).pushManager.getSubscription();N&&(await ke("POST",`/api/portal/${s}/push/unsubscribe`,{endpoint:N.endpoint}),await N.unsubscribe()),l(!1),f(!1),t({title:"Notifications disabled",description:"You won't receive push notifications anymore."})}catch{t({title:"Error",description:"Could not disable push notifications.",variant:"destructive"})}u(!1)};return n?e.jsxs(e.Fragment,{children:[e.jsx($,{size:"icon",variant:"ghost",onClick:()=>f(!0),disabled:d,className:`relative bg-white/[0.08] text-white/80 ${o?"text-emerald-400":""}`,title:o?"Manage push notifications":"Enable push notifications","data-testid":"button-push-toggle",children:d?e.jsx(Qe,{className:"w-5 h-5 animate-spin"}):o?e.jsx(_c,{className:"w-5 h-5"}):e.jsx(cy,{className:"w-5 h-5"})}),e.jsx(Ct,{open:h,onOpenChange:f,children:e.jsxs(vt,{className:"sm:max-w-md bg-[#1a1a2e] border-white/10 text-white",children:[e.jsx(yt,{children:e.jsxs(bt,{className:"text-white flex items-center gap-2",children:[o?e.jsx(_c,{className:"w-5 h-5 text-emerald-400"}):e.jsx(cy,{className:"w-5 h-5 text-white/60"}),"Push Notifications"]})}),e.jsx("div",{className:"rounded-md bg-gradient-to-r from-blue-600/20 to-purple-600/20 border border-blue-500/20 p-4 -mt-1",children:e.jsxs("p",{className:"text-sm font-medium text-white/90 text-center",children:["Allow ",e.jsx("span",{className:"text-blue-400 font-semibold",children:"AI Powered Sites"})," to send you notifications"]})}),e.jsx("div",{className:"space-y-4 pt-2",children:o?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-md bg-emerald-500/10 border border-emerald-500/20",children:[e.jsx(yn,{className:"w-5 h-5 text-emerald-400 shrink-0"}),e.jsx("p",{className:"text-sm text-emerald-300",children:"Push notifications are currently enabled"})]}),e.jsx("p",{className:"text-sm text-white/60",children:"You're receiving instant alerts on this device for new invoices, project updates, support replies, and more."}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx($,{variant:"outline",className:"flex-1 border-white/10 text-white/80",onClick:()=>f(!1),"data-testid":"button-push-keep",children:"Keep Enabled"}),e.jsxs($,{variant:"ghost",className:"flex-1 text-red-400",onClick:v,disabled:d,"data-testid":"button-push-disable",children:[d?e.jsx(Qe,{className:"w-4 h-4 animate-spin mr-2"}):null,"Turn Off"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-white/70",children:"Stay in the loop with instant notifications delivered right to your device. You'll be alerted about:"}),e.jsx("div",{className:"space-y-2.5",children:[{icon:La,label:"New invoices & payment confirmations"},{icon:$n,label:"Project milestones & updates"},{icon:Mt,label:"Support ticket replies"},{icon:No,label:"New screenshots & deliverables"},{icon:Ax,label:"Payment plan updates"}].map(y=>e.jsxs("div",{className:"flex items-center gap-3 text-sm text-white/80",children:[e.jsx("div",{className:"w-8 h-8 rounded-md bg-white/[0.06] flex items-center justify-center shrink-0",children:e.jsx(y.icon,{className:"w-4 h-4 text-blue-400"})}),y.label]},y.label))}),e.jsx("p",{className:"text-xs text-white/40 pt-1",children:"Your browser will ask for permission. You can turn this off anytime."}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx($,{variant:"ghost",className:"flex-1 text-white/60",onClick:()=>f(!1),"data-testid":"button-push-cancel",children:"Not Now"}),e.jsxs($,{className:"flex-1 bg-blue-600 text-white",onClick:b,disabled:d,"data-testid":"button-push-enable",children:[d?e.jsx(Qe,{className:"w-4 h-4 animate-spin mr-2"}):e.jsx(_c,{className:"w-4 h-4 mr-2"}),"Enable Notifications"]})]})]})})]})})]}):null}function rI({token:s}){const[t,n]=p.useState(!1),[a,o]=p.useState(!1),l=`push-banner-dismissed-${s}`;p.useEffect(()=>{if(sessionStorage.getItem(l)){o(!0);return}if(!("serviceWorker"in navigator)||!("PushManager"in window))return;(async()=>{try{const f=await navigator.serviceWorker.getRegistration();if(!f){setTimeout(()=>n(!0),1500);return}await f.pushManager.getSubscription()||setTimeout(()=>n(!0),1500)}catch{setTimeout(()=>n(!0),1500)}})()},[l]);const d=()=>{n(!1),o(!0),sessionStorage.setItem(l,"1")},u=()=>{d();const h=document.querySelector('[data-testid="button-push-toggle"]');h&&h.click()};return a||!t?null:e.jsx("div",{className:"mb-4 -mt-3 animate-in slide-in-from-top-2 fade-in duration-500","data-testid":"push-prompt-banner",children:e.jsxs("div",{className:"relative rounded-md bg-gradient-to-r from-blue-600/90 to-purple-600/90 p-4 flex items-center gap-4 flex-wrap shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"w-10 h-10 rounded-md bg-white/15 flex items-center justify-center shrink-0",children:e.jsx(_c,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-white",children:"Never miss an update"}),e.jsx("p",{className:"text-xs text-white/70 mt-0.5",children:"Get instant alerts for invoices, project milestones, and deliverables right on your device."})]})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsx($,{variant:"ghost",size:"sm",className:"text-white/70",onClick:d,"data-testid":"button-banner-dismiss",children:"Not Now"}),e.jsxs($,{size:"sm",className:"bg-white text-slate-900 font-medium",onClick:u,"data-testid":"button-banner-enable",children:[e.jsx(_c,{className:"w-3.5 h-3.5 mr-1.5"}),"Enable Notifications"]})]})]})})}function aI({token:s}){const[t,n]=p.useState(!1),{data:a,refetch:o}=Le({queryKey:["/api/portal",s,"notifications"],queryFn:async()=>{const v=await fetch(`/api/portal/${s}/notifications`);if(!v.ok)throw new Error("Failed to fetch notifications");return v.json()},enabled:!!s,refetchInterval:3e4}),l=Te({mutationFn:async v=>{await ke("PATCH",`/api/portal/${s}/notifications/${v}/read`)},onSuccess:()=>o()}),d=Te({mutationFn:async()=>{await ke("POST",`/api/portal/${s}/notifications/read-all`)},onSuccess:()=>o()}),u=a?.unreadCount||0,h=a?.notifications||[],f=v=>{switch(v){case"project_update":return e.jsx($n,{className:"w-4 h-4 text-blue-400"});case"invoice_created":return e.jsx(La,{className:"w-4 h-4 text-emerald-400"});case"ticket_reply":return e.jsx(Mt,{className:"w-4 h-4 text-purple-400"});case"screenshot_uploaded":return e.jsx(No,{className:"w-4 h-4 text-amber-400"});case"payment_plan_created":return e.jsx(Lc,{className:"w-4 h-4 text-indigo-400"});default:return e.jsx(Bu,{className:"w-4 h-4 text-white/60"})}},b=v=>{const y=Date.now()-new Date(v).getTime(),N=Math.floor(y/6e4);if(N<1)return"just now";if(N<60)return`${N}m ago`;const C=Math.floor(N/60);return C<24?`${C}h ago`:`${Math.floor(C/24)}d ago`};return e.jsxs("div",{className:"relative",children:[e.jsxs($,{size:"icon",variant:"ghost",onClick:()=>n(!t),className:"relative bg-white/[0.08] text-white/80","data-testid":"button-notification-bell",children:[e.jsx(Bu,{className:"w-5 h-5"}),u>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center","data-testid":"text-notification-badge",children:u>9?"9+":u})]}),t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>n(!1)}),e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-80 sm:w-96 z-50 bg-popover border rounded-md shadow-xl overflow-hidden","data-testid":"notification-dropdown",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 px-4 py-3 border-b bg-muted/50",children:[e.jsx("h3",{className:"text-sm font-semibold text-foreground",children:"Notifications"}),u>0&&e.jsxs($,{size:"sm",variant:"ghost",className:"text-xs",onClick:()=>d.mutate(),"data-testid":"button-mark-all-read",children:[e.jsx(Kt,{className:"w-3 h-3 mr-1"}),"Mark all read"]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:h.length===0?e.jsx("div",{className:"px-4 py-8 text-center text-sm text-muted-foreground","data-testid":"text-no-notifications",children:"No notifications yet"}):h.map(v=>e.jsxs("div",{className:`flex items-start gap-3 px-4 py-3 border-b last:border-b-0 cursor-pointer transition-colors ${v.isRead?"opacity-60":"bg-accent/30"}`,onClick:()=>{v.isRead||l.mutate(v.id),n(!1)},"data-testid":`notification-item-${v.id}`,children:[e.jsx("div",{className:"mt-0.5 shrink-0",children:f(v.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:v.title}),v.body&&e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5 line-clamp-2",children:v.body}),e.jsx("p",{className:"text-[10px] text-muted-foreground mt-1",children:b(v.createdAt)})]}),!v.isRead&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500 mt-2 shrink-0"})]},v.id))})]})]})]})}const iI={"us-central":"us","us-west":"us","us-east":"us","us-southeast":"us","us-iad":"us","us-ord":"us","us-lax":"us","ca-central":"ca","eu-west":"gb","eu-central":"de","ap-west":"in","ap-south":"sg","ap-southeast":"au","ap-northeast":"jp","gb-lon":"gb","de-fra":"de","fr-par":"fr","nl-ams":"nl","se-sto":"se","es-mad":"es","it-mil":"it","in-maa":"in","sg-sin":"sg","au-mel":"au","jp-osa":"jp","br-gru":"br"};function xb(s){const t=iI[s]||s.split("-")[0];return t.length===2?String.fromCodePoint(...Array.from(t.toUpperCase()).map(n=>n.charCodeAt(0)+127397)):""}function oI({token:s,license:t,copiedLicenseKey:n,setCopiedLicenseKey:a,servers:o}){const{toast:l}=pt(),[d,u]=p.useState(!1),[h,f]=p.useState(null),{data:b}=Le({queryKey:["/api/portal",s,"licenses",t.id,"activations"],queryFn:async()=>(await fetch(`/api/portal/${s}/licenses/${t.id}/activations`)).json(),enabled:d}),v=Te({mutationFn:async g=>{await ke("POST",`/api/portal/${s}/licenses/${t.id}/release/${g}`)},onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/portal",s,"licenses",t.id,"activations"]}),l({title:"IP Released",description:"The activation slot has been freed."})}}),y=b?.filter(g=>g.status==="active")||[],N=(g,k)=>{navigator.clipboard.writeText(g),f(k),setTimeout(()=>f(null),2e3)},C=window.location.origin;return e.jsxs(ce,{className:"p-5 bg-gradient-to-r from-emerald-50 to-green-50 dark:from-emerald-950/20 dark:to-green-950/20 border-emerald-200 dark:border-emerald-800","data-testid":`card-license-info-${t.id}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center shrink-0",children:e.jsx(Hc,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-semibold text-emerald-900 dark:text-emerald-200",children:"License & Server Setup"}),e.jsx("p",{className:"text-xs text-emerald-700 dark:text-emerald-400",children:"Your license key and one-click setup commands"})]}),e.jsxs("div",{className:"text-right flex items-center gap-2",children:[t.activationCount>0&&e.jsx(je,{className:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400 gap-1 text-xs",children:" Validated"}),e.jsxs(je,{variant:"outline",className:"text-xs border-emerald-300 dark:border-emerald-700 text-emerald-700 dark:text-emerald-400",children:[t.activationCount||0," / ",t.maxActivations===0?"":t.maxActivations," activations"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(_e,{className:"text-xs font-medium text-emerald-700 dark:text-emerald-400 mb-1 block",children:"License Key"}),e.jsxs("div",{className:"flex items-center gap-2 bg-white/70 dark:bg-black/20 rounded-lg px-3 py-2.5 font-mono text-sm border border-emerald-200/50 dark:border-emerald-800/50","data-testid":`portal-license-key-${t.id}`,children:[e.jsx(Hc,{className:"w-4 h-4 text-emerald-500 shrink-0"}),e.jsx("span",{className:"flex-1 select-all break-all",children:t.licenseKey}),e.jsx($,{variant:"ghost",size:"sm",className:"h-7 px-2 shrink-0",onClick:()=>{navigator.clipboard.writeText(t.licenseKey),a(t.id),setTimeout(()=>a(null),2e3)},"data-testid":`btn-copy-license-${t.id}`,children:n===t.id?e.jsx(Kt,{className:"w-3.5 h-3.5 text-emerald-600"}):e.jsx(Ps,{className:"w-3.5 h-3.5"})})]})]}),o&&o.length>0&&e.jsxs("div",{children:[e.jsxs(_e,{className:"text-xs font-medium text-emerald-700 dark:text-emerald-400 mb-1 block flex items-center gap-1.5",children:[e.jsx(kl,{className:"w-3.5 h-3.5"}),"One-Click Setup Commands"]}),e.jsx("p",{className:"text-[11px] text-emerald-600/70 dark:text-emerald-400/60 mb-2",children:"SSH into your server as root, then paste the command to automatically secure and configure it. Your license key is pre-included."}),e.jsx("div",{className:"space-y-2",children:o.map(g=>{const k=`curl -sL ${C}/api/server-setup/${s}/${g.id} | sudo bash`;return e.jsxs("div",{className:"bg-white/50 dark:bg-black/15 rounded-lg border border-emerald-200/40 dark:border-emerald-800/40 p-3","data-testid":`setup-cmd-card-${g.id}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[e.jsx(Dn,{className:"w-3.5 h-3.5 text-emerald-600 dark:text-emerald-400"}),e.jsx("span",{className:"text-xs font-medium text-emerald-800 dark:text-emerald-300",children:g.label||g.id}),g.ipv4&&e.jsx("span",{className:"text-[11px] font-mono text-emerald-600/70 dark:text-emerald-400/60",children:g.ipv4}),e.jsx(je,{variant:"outline",className:"text-[10px] ml-auto h-5 border-emerald-300/50 dark:border-emerald-700/50",children:g.status})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-gray-900 dark:bg-black/40 rounded-md px-3 py-2",children:[e.jsx("code",{className:"text-[11px] font-mono text-emerald-400 flex-1 break-all select-all","data-testid":`text-curl-cmd-${g.id}`,children:k}),e.jsx($,{variant:"ghost",size:"sm",className:"h-6 px-1.5 text-emerald-400 hover:text-emerald-300 hover:bg-emerald-900/30 shrink-0",onClick:()=>N(k,`curl-${g.id}`),"data-testid":`btn-copy-curl-${g.id}`,children:h===`curl-${g.id}`?e.jsx(Kt,{className:"w-3 h-3"}):e.jsx(Ps,{className:"w-3 h-3"})})]})]},g.id)})})]}),(!o||o.length===0)&&e.jsxs("div",{children:[e.jsxs(_e,{className:"text-xs font-medium text-emerald-700 dark:text-emerald-400 mb-1 block flex items-center gap-1.5",children:[e.jsx(kl,{className:"w-3.5 h-3.5"}),"Setup Command"]}),e.jsx("p",{className:"text-[11px] text-emerald-600/70 dark:text-emerald-400/60",children:"Provision a server above to get your one-click setup command with your license key pre-included."})]})]}),e.jsxs("button",{onClick:()=>u(!d),className:"mt-4 text-xs text-emerald-600 dark:text-emerald-400 hover:underline flex items-center gap-1","data-testid":`btn-toggle-activations-${t.id}`,children:[e.jsx(jn,{className:"w-3 h-3"}),d?"Hide":"Manage"," IP Activations",y.length>0&&` (${y.length} active)`]}),d&&e.jsx("div",{className:"mt-3 space-y-2",children:b?.length?b.map(g=>e.jsxs("div",{className:"flex items-center gap-2 text-xs bg-white/40 dark:bg-black/10 rounded px-3 py-2",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${g.status==="active"?"bg-green-500":"bg-gray-400"}`}),e.jsx("span",{className:"font-mono font-medium",children:g.serverIp}),e.jsx("span",{className:"text-emerald-700/70 dark:text-emerald-400/70",children:g.hostname}),e.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-medium ${g.status==="active"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400"}`,children:g.status}),e.jsx("span",{className:"ml-auto text-emerald-700/50 dark:text-emerald-400/50",children:g.activatedAt?new Date(g.activatedAt).toLocaleDateString():""}),g.status==="active"&&e.jsxs("button",{onClick:()=>{confirm(`Release IP ${g.serverIp}? This will free up an activation slot.`)&&v.mutate(g.id)},className:"text-red-500 hover:text-red-700 flex items-center gap-1 ml-2","data-testid":`btn-portal-release-ip-${g.id}`,children:[e.jsx(Cp,{className:"w-3 h-3"}),"Release"]})]},g.id)):e.jsx("p",{className:"text-xs text-emerald-700/70 dark:text-emerald-400/70",children:"No IP activations yet. Activations are created when a server runs the setup script with this license key."})})]})}function lI({token:s,servers:t,serversLoading:n}){const{toast:a}=pt(),[o,l]=p.useState(!1),[d,u]=p.useState(""),[h,f]=p.useState(""),[b,v]=p.useState(""),[y,N]=p.useState(null),[C,g]=p.useState(null),[k,A]=p.useState(null),[E,S]=p.useState(!1),[R,H]=p.useState(null),[re,K]=p.useState(""),[ee,me]=p.useState(!1),{data:pe}=Le({queryKey:["/api/portal",s,"licenses"],queryFn:async()=>{const I=await fetch(`/api/portal/${s}/licenses`);return I.ok?I.json():[]}}),{data:L}=Le({queryKey:["/api/portal",s,"server-types"],queryFn:async()=>{const I=await fetch(`/api/portal/${s}/server-types`);return I.ok?I.json():[]},enabled:o}),{data:X}=Le({queryKey:["/api/portal",s,"server-regions"],queryFn:async()=>{const I=await fetch(`/api/portal/${s}/server-regions`);return I.ok?I.json():[]},enabled:o}),z=Te({mutationFn:async I=>(await ke("POST",`/api/portal/${s}/servers/provision`,I)).json(),onSuccess:I=>{ve.invalidateQueries({queryKey:["/api/portal",s,"servers"]}),A(I.rootPassword),H(I.server.ipv4||"Assigning..."),K(I.setupCommand||""),me(I.autoSetup||!1),l(!1),S(!0),u(""),f(""),v(""),a({title:"Server Provisioned!",description:"Your server is being set up. Save your login credentials below."})},onError:I=>{a({title:"Provisioning Failed",description:I.message||"Could not create server.",variant:"destructive"})}}),V=(I,O)=>{navigator.clipboard.writeText(I),N(O),setTimeout(()=>N(null),2e3)};(L||[]).find(I=>I.id===d);const se=I=>{switch(I){case"running":return"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400";case"provisioning":case"booting":return"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400";case"offline":case"shutting_down":return"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400";default:return"bg-gray-100 text-gray-700 dark:bg-gray-900/30 dark:text-gray-400"}};return e.jsxs("div",{className:"space-y-6","data-testid":"section-servers",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-cyan-600 flex items-center justify-center",children:e.jsx(Dn,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold","data-testid":"text-servers-title",children:"My Servers"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Provision and manage your cloud servers"})]})]}),e.jsxs($,{onClick:()=>l(!0),"data-testid":"button-new-server",children:[e.jsx(Qt,{className:"w-4 h-4 mr-1.5"}),"New Server"]})]}),e.jsx(ce,{className:"p-3 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950/20 dark:to-indigo-950/20 border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center shrink-0",children:e.jsx(Fs,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-200",children:"Need help choosing?"}),e.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-400",children:"Not sure which server is right for you? Contact us via Support and we'll help you pick the perfect plan for your needs."})]})]})}),pe&&pe.length>0&&e.jsx("div",{className:"space-y-3",children:pe.map(I=>e.jsx(oI,{token:s,license:I,copiedLicenseKey:C,setCopiedLicenseKey:g,servers:t},I.id))}),n?e.jsxs("div",{className:"space-y-3",children:[e.jsx(Ce,{className:"h-28 w-full"}),e.jsx(Ce,{className:"h-28 w-full"})]}):t.length===0?e.jsxs(ce,{className:"p-10 text-center",children:[e.jsx(Dn,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"font-semibold mb-2",children:"No Servers Yet"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4 max-w-md mx-auto",children:"Spin up your own cloud server in seconds. You'll get full root access with an IP address and SSH credentials."}),e.jsxs($,{onClick:()=>l(!0),"data-testid":"button-first-server",children:[e.jsx(Qt,{className:"w-4 h-4 mr-1.5"}),"Provision Your First Server"]})]}):e.jsx("div",{className:"space-y-4",children:t.map(I=>e.jsxs(ce,{className:"overflow-hidden","data-testid":`card-server-${I.id}`,children:[e.jsx("div",{className:"p-4 border-b bg-muted/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Dn,{className:"w-5 h-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-sm",children:I.label}),e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(cl,{className:"w-3 h-3"}),xb(I.region)," ",I.region]})]})]}),e.jsxs(je,{className:se(I.status),"data-testid":`badge-status-${I.id}`,children:[I.status==="running"&&e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 mr-1.5 animate-pulse"}),I.status]})]})}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(jp,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{children:[I.vcpus||""," vCPUs"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gy,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{children:I.memory?`${(I.memory/1024).toFixed(I.memory>=1024?0:1)} GB`:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fy,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{children:I.disk?`${(I.disk/1024).toFixed(0)} GB`:""})]})]}),I.ipv4&&e.jsxs("div",{className:"flex items-center gap-2 bg-muted/50 rounded-lg p-3",children:[e.jsx(kl,{className:"w-4 h-4 text-muted-foreground shrink-0"}),e.jsxs("code",{className:"text-xs font-mono flex-1","data-testid":`text-ip-${I.id}`,children:["ssh root@",I.ipv4]}),e.jsx($,{variant:"ghost",size:"sm",className:"h-7 px-2",onClick:()=>V(`ssh root@${I.ipv4}`,I.id),"data-testid":`button-copy-ssh-${I.id}`,children:y===I.id?e.jsx(Kt,{className:"w-3.5 h-3.5 text-emerald-500"}):e.jsx(Ps,{className:"w-3.5 h-3.5"})})]}),I.ipv4&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(jn,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:["IP: ",I.ipv4]}),e.jsx($,{variant:"ghost",size:"sm",className:"h-6 px-1.5 text-xs",onClick:()=>V(I.ipv4,`ip-${I.id}`),"data-testid":`button-copy-ip-${I.id}`,children:y===`ip-${I.id}`?e.jsx(Kt,{className:"w-3 h-3 text-emerald-500"}):e.jsx(Ps,{className:"w-3 h-3"})})]})]})]},I.id))}),e.jsx(Ct,{open:o,onOpenChange:l,children:e.jsxs(vt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(yt,{children:[e.jsxs(bt,{className:"flex items-center gap-2",children:[e.jsx(Dn,{className:"w-5 h-5 text-blue-500"}),"Provision a New Server"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Choose a plan, pick a region, and your server will be live in seconds."})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(_e,{className:"text-xs font-medium",children:"Server Name"}),e.jsx(De,{value:b,onChange:I=>v(I.target.value),placeholder:"my-web-server","data-testid":"input-server-label"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_e,{className:"text-xs font-medium",children:"Choose a Plan"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3","data-testid":"select-server-type",children:(L||[]).map(I=>{const O=d===I.id,T=I.memory>=1024?(I.memory/1024).toFixed(0):(I.memory/1024).toFixed(1),Y=(I.disk/1024).toFixed(0);return e.jsxs("button",{type:"button",onClick:()=>u(I.id),"data-testid":`plan-card-${I.id}`,className:`relative text-left rounded-lg border-2 p-4 transition-all cursor-pointer hover:shadow-md ${O?"border-blue-500 bg-blue-50/50 dark:bg-blue-950/20 shadow-sm ring-1 ring-blue-500/20":"border-border hover:border-blue-300 dark:hover:border-blue-700"}`,children:[O&&e.jsx("div",{className:"absolute top-2 right-2 w-5 h-5 rounded-full bg-blue-500 flex items-center justify-center",children:e.jsx(Kt,{className:"w-3 h-3 text-white"})}),e.jsx("div",{className:"mb-2",children:e.jsx("span",{className:"font-semibold text-sm",children:I.label})}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsxs("span",{className:"text-2xl font-bold",children:["$",(I.hourlyPrice||0).toFixed(4)]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"/hour"})]}),e.jsxs("p",{className:"text-[11px] text-muted-foreground mt-0.5",children:["~$",I.monthlyPrice,"/mo cap"]})]}),e.jsxs("div",{className:"space-y-1.5 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(jp,{className:"w-3.5 h-3.5 text-blue-500 shrink-0"}),e.jsxs("span",{children:[I.vcpus," vCPU",I.vcpus>1?"s":""]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gy,{className:"w-3.5 h-3.5 text-purple-500 shrink-0"}),e.jsxs("span",{children:[T," GB RAM"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fy,{className:"w-3.5 h-3.5 text-emerald-500 shrink-0"}),e.jsxs("span",{children:[Y," GB SSD"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p3,{className:"w-3.5 h-3.5 text-amber-500 shrink-0"}),e.jsxs("span",{children:[I.transfer/1e3," TB Transfer"]})]})]})]},I.id)})}),(L||[]).length===0&&e.jsxs("div",{className:"text-center py-6 text-sm text-muted-foreground",children:[e.jsx(Qe,{className:"w-5 h-5 mx-auto mb-2 animate-spin"}),"Loading plans..."]})]}),e.jsx(ce,{className:"p-3 bg-blue-50/50 dark:bg-blue-950/10 border-blue-200/50 dark:border-blue-800/30",children:e.jsxs("div",{className:"flex items-start gap-2.5",children:[e.jsx(Fn,{className:"w-4 h-4 text-blue-500 mt-0.5 shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-blue-900 dark:text-blue-200",children:"Usage-Based Billing"}),e.jsx("p",{className:"text-[11px] text-blue-700 dark:text-blue-400 leading-relaxed",children:"You're billed hourly for the time your server is running  only pay for what you use. Each plan has a monthly cap so you'll never pay more than that amount regardless of uptime."})]})]})}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(_e,{className:"text-xs font-medium",children:"Region"}),e.jsxs(Dt,{value:h,onValueChange:f,children:[e.jsx(It,{"data-testid":"select-server-region",children:e.jsx($t,{placeholder:"Choose a region..."})}),e.jsx(Ot,{children:(X||[]).map(I=>e.jsxs(Ie,{value:I.id,children:[xb(I.id)," ",I.label]},I.id))})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx($,{variant:"outline",className:"flex-1",onClick:()=>l(!1),children:"Cancel"}),e.jsx($,{className:"flex-1 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700",disabled:!d||!h||!b.trim()||z.isPending,onClick:()=>z.mutate({typeId:d,region:h,label:b.trim()}),"data-testid":"button-provision-server",children:z.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"w-4 h-4 mr-1.5 animate-spin"})," Provisioning..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Dn,{className:"w-4 h-4 mr-1.5"})," Provision Server"]})})]})]})]})}),e.jsx(Ct,{open:E,onOpenChange:S,children:e.jsxs(vt,{className:"max-w-md",children:[e.jsx(yt,{children:e.jsxs(bt,{className:"flex items-center gap-2 text-emerald-600",children:[e.jsx(Kt,{className:"w-5 h-5"}),"Server Created Successfully!"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(ce,{className:"p-4 bg-amber-50 dark:bg-amber-950/20 border-amber-200 dark:border-amber-800",children:[e.jsx("p",{className:"text-sm font-medium text-amber-900 dark:text-amber-200 mb-1",children:" Save these credentials  they won't be shown again!"}),e.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-400",children:"You'll need this password to log into your server via SSH."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(_e,{className:"text-xs font-medium text-muted-foreground",children:"SSH Command"}),e.jsxs("div",{className:"flex items-center gap-2 bg-muted rounded-lg p-2.5",children:[e.jsxs("code",{className:"text-xs font-mono flex-1","data-testid":"text-ssh-command",children:["ssh root@",R]}),e.jsx($,{variant:"ghost",size:"sm",className:"h-7 px-2",onClick:()=>V(`ssh root@${R}`,"new-ssh"),"data-testid":"button-copy-new-ssh",children:y==="new-ssh"?e.jsx(Kt,{className:"w-3.5 h-3.5 text-emerald-500"}):e.jsx(Ps,{className:"w-3.5 h-3.5"})})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(_e,{className:"text-xs font-medium text-muted-foreground",children:"Root Password"}),e.jsxs("div",{className:"flex items-center gap-2 bg-muted rounded-lg p-2.5",children:[e.jsx("code",{className:"text-xs font-mono flex-1 break-all","data-testid":"text-root-password",children:k}),e.jsx($,{variant:"ghost",size:"sm",className:"h-7 px-2",onClick:()=>V(k||"","new-pass"),"data-testid":"button-copy-password",children:y==="new-pass"?e.jsx(Kt,{className:"w-3.5 h-3.5 text-emerald-500"}):e.jsx(Ps,{className:"w-3.5 h-3.5"})})]})]}),ee&&e.jsx("div",{className:"space-y-1",children:e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2.5 bg-gradient-to-r from-emerald-50 to-teal-50 dark:from-emerald-950/20 dark:to-teal-950/20 border border-emerald-200 dark:border-emerald-800 rounded-lg","data-testid":"auto-setup-notice",children:[e.jsx(Hc,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-emerald-700 dark:text-emerald-300",children:"Automatic Setup Enabled"}),e.jsx("p",{className:"text-[11px] text-emerald-600/80 dark:text-emerald-400/80",children:"Your server will automatically secure itself when it boots  SSH hardening, user creation, Docker install, and firewall setup. You'll receive an email with your new login credentials once complete."})]})]})}),re&&!ee&&e.jsxs("div",{className:"space-y-1",children:[e.jsx(_e,{className:"text-xs font-medium text-emerald-600 dark:text-emerald-400",children:"Manual Server Setup (fallback)"}),e.jsx("p",{className:"text-[11px] text-muted-foreground",children:"SSH into your server as root, then paste this command to secure it:"}),e.jsxs("div",{className:"flex items-center gap-2 bg-gradient-to-r from-emerald-50 to-teal-50 dark:from-emerald-950/20 dark:to-teal-950/20 border border-emerald-200 dark:border-emerald-800 rounded-lg p-2.5",children:[e.jsx("code",{className:"text-xs font-mono flex-1 break-all text-emerald-700 dark:text-emerald-300","data-testid":"text-setup-command",children:re}),e.jsx($,{variant:"ghost",size:"sm",className:"h-7 px-2",onClick:()=>V(re,"setup-cmd"),"data-testid":"button-copy-setup-cmd",children:y==="setup-cmd"?e.jsx(Kt,{className:"w-3.5 h-3.5 text-emerald-500"}):e.jsx(Ps,{className:"w-3.5 h-3.5"})})]})]})]}),e.jsx($,{className:"w-full",onClick:()=>S(!1),"data-testid":"button-close-password",children:"I've Saved My Credentials"})]})]})})]})}function cI({articles:s}){const[t,n]=p.useState(""),[a,o]=p.useState("all"),[l,d]=p.useState(null),u=["all",...Array.from(new Set(s.map(b=>b.category)))],h=s.filter(b=>{const v=!t||b.title.toLowerCase().includes(t.toLowerCase())||(b.content||"").toLowerCase().includes(t.toLowerCase()),y=a==="all"||b.category===a;return v&&y}),f={General:"","Getting Started":"",Billing:"",Technical:"",FAQ:"",Tutorials:"",Troubleshooting:""};return l?e.jsxs("div",{className:"space-y-4","data-testid":"section-help-article",children:[e.jsxs($,{variant:"ghost",size:"sm",onClick:()=>d(null),"data-testid":"button-back-to-help",children:[e.jsx(_a,{className:"w-4 h-4 mr-1.5"}),"Back to Help Center"]}),e.jsxs(ce,{className:"p-6",children:[e.jsx("div",{className:"flex items-center gap-2 mb-4",children:e.jsxs(je,{variant:"secondary",className:"text-xs",children:[f[l.category]||""," ",l.category]})}),e.jsx("h2",{className:"text-xl font-semibold mb-4","data-testid":"text-article-title",children:l.title}),e.jsx("div",{className:"article-content prose prose-sm max-w-none text-sm leading-relaxed",dangerouslySetInnerHTML:{__html:l.content},"data-testid":"article-content"})]})]}):e.jsxs("div",{className:"space-y-6","data-testid":"section-help",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-purple-500 to-pink-600 flex items-center justify-center",children:e.jsx(ki,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold","data-testid":"text-help-title",children:"Help Center"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Guides and tutorials to help you get the most out of your services"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(sn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(De,{value:t,onChange:b=>n(b.target.value),placeholder:"Search articles...",className:"pl-9","data-testid":"input-help-search"})]}),e.jsxs(Dt,{value:a,onValueChange:o,children:[e.jsx(It,{className:"w-full sm:w-[180px]","data-testid":"select-help-category",children:e.jsx($t,{placeholder:"All Categories"})}),e.jsx(Ot,{children:u.map(b=>e.jsx(Ie,{value:b,children:b==="all"?"All Categories":`${f[b]||""} ${b}`},b))})]})]}),h.length===0?e.jsxs(ce,{className:"p-10 text-center",children:[e.jsx(ki,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"font-semibold mb-2",children:"No Articles Found"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t?"Try a different search term or category.":"No help articles have been published yet."})]}):e.jsx("div",{className:"space-y-3",children:h.map(b=>e.jsx(ce,{className:"p-4 hover-elevate cursor-pointer transition-all",onClick:()=>d(b),"data-testid":`card-article-${b.id}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsxs(je,{variant:"secondary",className:"text-[10px] shrink-0",children:[f[b.category]||""," ",b.category]})}),e.jsx("h3",{className:"font-medium text-sm truncate","data-testid":`text-article-title-${b.id}`,children:b.title}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:[(b.content||"").replace(/<[^>]+>/g,"").substring(0,150),"..."]})]}),e.jsx(Sx,{className:"w-4 h-4 text-muted-foreground shrink-0 ml-3"})]})},b.id))})]})}function dI(){const s=mm(),{toast:t}=pt(),n=LC(),[a,o]=p.useState(null),[l,d]=p.useState(!1),[u,h]=p.useState(""),[f,b]=p.useState(""),[v,y]=p.useState(""),[N,C]=p.useState(""),[g,k]=p.useState(null),[A,E]=p.useState(!1),[S,R]=p.useState(""),[H,re]=p.useState("dashboard");p.useEffect(()=>{const D=new URLSearchParams(n),xe=D.get("payment"),Ke=D.get("invoice"),jt=D.get("payment_plan");xe==="success"&&Ke?(t({title:"Payment Successful",description:`Invoice ${Ke} has been paid. Thank you!`}),ve.invalidateQueries({queryKey:[`/api/portal/${s.token}`]})):xe==="cancelled"&&t({title:"Payment Cancelled",description:"Your payment was not processed.",variant:"destructive"}),jt==="accepted"?(t({title:"Payment Plan Started",description:"Your payment plan is now active. Payments will be collected automatically."}),ve.invalidateQueries({queryKey:["/api/portal",s.token,"payment-plans"]})):jt==="cancelled"&&t({title:"Plan Not Started",description:"You can accept the payment plan at any time.",variant:"destructive"});const nt=D.get("github_connected"),At=D.get("github_user");nt==="true"&&(t({title:"GitHub Connected!",description:`Your GitHub account (${At||""}) has been linked successfully.`}),re("backups"),ve.invalidateQueries({queryKey:["/api/portal",s.token,"git-backups"]}))},[n]);const K=Te({mutationFn:async D=>(k(D),(await ke("POST",`/api/portal/${s.token}/invoices/${D}/pay`)).json()),onSuccess:D=>{D.url&&(window.location.href=D.url)},onError:D=>{k(null),t({title:"Payment Error",description:D.message||"Could not start payment process.",variant:"destructive"})}}),[ee,me]=p.useState(!1),[pe,L]=p.useState(""),[X,z]=p.useState(""),[V,se]=p.useState("general"),[I,O]=p.useState("medium"),[T,Y]=p.useState(null),[Q,F]=p.useState(""),[te,B]=p.useState(null),U=`/api/portal/${s.token}`,{data:M,isLoading:q,error:oe}=Le({queryKey:[U],enabled:!!s.token}),{data:he}=Le({queryKey:["/api/portal",s.token,"payment-plans"],queryFn:async()=>{const D=await fetch(`/api/portal/${s.token}/payment-plans`);if(!D.ok)throw new Error("Failed to load payment plans");return D.json()},enabled:!!s.token}),{data:Se}=Le({queryKey:["/api/portal",s.token,"git-backups"],queryFn:async()=>{const D=await fetch(`/api/portal/${s.token}/git-backups`);if(!D.ok)throw new Error("Failed to load backups");const xe=await D.json();return Array.isArray(xe)?{configs:xe,billingRate:null}:xe},enabled:!!s.token}),be=Se?.configs,Pe=Se?.billingRate,Me=Te({mutationFn:async D=>(B(D),(await ke("POST",`/api/portal/${s.token}/payment-plans/${D}/accept`)).json()),onSuccess:D=>{D.url&&(window.location.href=D.url)},onError:D=>{B(null),t({title:"Error",description:D.message||"Could not start payment plan.",variant:"destructive"})}}),{data:Fe}=Le({queryKey:["/api/portal",s.token,"tickets"],queryFn:async()=>{const D=await fetch(`/api/portal/${s.token}/tickets`);if(!D.ok)throw new Error("Failed to fetch tickets");return D.json()},enabled:!!s.token}),{data:Je}=Le({queryKey:["/api/portal",s.token,"tickets",T],queryFn:async()=>{const D=await fetch(`/api/portal/${s.token}/tickets/${T}`);if(!D.ok)throw new Error("Failed to fetch ticket");return D.json()},enabled:!!T&&!!s.token}),lt=Te({mutationFn:async D=>(await ke("PATCH",`/api/portal/${s.token}/profile`,D)).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:[U]}),t({title:"Profile updated",description:"Your contact details have been saved."}),d(!1)},onError:D=>{t({title:"Update failed",description:D.message||"Could not update your details.",variant:"destructive"})}}),Bt=Te({mutationFn:async D=>(await ke("POST",`/api/portal/${s.token}/tickets`,D)).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/portal",s.token,"tickets"]}),t({title:"Ticket created",description:"Your support ticket has been submitted."}),me(!1),L(""),z(""),se("general"),O("medium")},onError:D=>{t({title:"Failed to create ticket",description:D.message,variant:"destructive"})}}),Xt=Te({mutationFn:async({ticketId:D,message:xe})=>(await ke("POST",`/api/portal/${s.token}/tickets/${D}/messages`,{message:xe})).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/portal",s.token,"tickets",T]}),ve.invalidateQueries({queryKey:["/api/portal",s.token,"tickets"]}),t({title:"Reply sent"}),F("")},onError:D=>{t({title:"Failed to send reply",description:D.message,variant:"destructive"})}}),us=Te({mutationFn:async()=>(await ke("POST",`/api/portal/${s.token}/delete-account`)).json(),onSuccess:()=>{t({title:"Account deleted",description:"Your account and all associated data have been removed."}),E(!1),window.location.href="/"},onError:D=>{t({title:"Cannot delete account",description:D.message||"Failed to delete account.",variant:"destructive"})}}),{data:ws,isLoading:os}=Le({queryKey:["/api/portal",s.token,"servers"],queryFn:async()=>{const D=await fetch(`/api/portal/${s.token}/servers`);return D.ok?D.json():[]},enabled:!!s.token}),{data:ms}=Le({queryKey:["/api/public/knowledge-base"],enabled:!!s.token});if(q)return e.jsx(JR,{});if(oe||!M)return e.jsx("div",{className:"min-h-screen bg-muted/30 flex items-center justify-center p-6",children:e.jsxs(ce,{className:"p-10 text-center max-w-md",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-muted mb-4",children:e.jsx(Vt,{className:"w-7 h-7 text-muted-foreground"})}),e.jsx("h1",{className:"text-xl font-semibold mb-2",children:"Link Not Found"}),e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"This portal link is invalid or has expired. Please contact your service provider for a new link."})]})});const{customer:Et,invoices:_t,projects:wt}=M,de=_t.filter(D=>D.status==="pending"||D.status==="overdue").reduce((D,xe)=>D+xe.totalAmountCents,0),Oe=_t.filter(D=>D.status==="paid").reduce((D,xe)=>D+xe.totalAmountCents,0),st=_t.filter(D=>D.status==="overdue").length,St=(Fe||[]).filter(D=>D.status==="open"||D.status==="in_progress").length,Zt=(he||[]).filter(D=>D.status!=="cancelled"&&D.status!=="completed"),qt=[{id:"dashboard",label:"Overview",icon:Wu},{id:"invoices",label:"Invoices",icon:La,count:_t.filter(D=>D.status==="pending"||D.status==="overdue").length},{id:"projects",label:"Projects",icon:$n,count:wt.filter(D=>D.status==="active"||D.status==="in_progress").length},{id:"billing",label:"Billing",icon:Ax},{id:"support",label:"Support",icon:ro,count:St},{id:"backups",label:"Backups",icon:io},{id:"servers",label:"Servers",icon:Dn},{id:"help",label:"Help Center",icon:ki}];return e.jsxs("div",{className:"min-h-screen bg-muted/30",children:[e.jsxs("div",{className:"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_80%_50%_at_50%_-20%,rgba(120,119,198,0.15),transparent)]"}),e.jsxs("div",{className:"max-w-6xl mx-auto px-6 pt-8 pb-16 relative",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("img",{src:GR,alt:"AI Powered Sites",className:"w-11 h-11 rounded-md object-cover shrink-0 ring-2 ring-white/20"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-white/50 uppercase tracking-wider font-medium",children:"Client Portal"}),e.jsx("h1",{className:"text-2xl font-semibold tracking-tight","data-testid":"text-portal-title",children:Et.company||Et.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(nI,{token:s.token}),e.jsx(aI,{token:s.token})]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white/[0.06] backdrop-blur-sm rounded-md p-4 border border-white/[0.08]",children:[e.jsx("p",{className:"text-xs text-white/50 mb-1",children:"Amount Due"}),e.jsx("p",{className:"text-xl font-semibold","data-testid":"text-portal-amount-due",children:qe(de)}),st>0&&e.jsxs("p",{className:"text-xs text-red-300 mt-1 flex items-center gap-1",children:[e.jsx(qn,{className:"w-3 h-3"}),st," overdue"]})]}),e.jsxs("div",{className:"bg-white/[0.06] backdrop-blur-sm rounded-md p-4 border border-white/[0.08]",children:[e.jsx("p",{className:"text-xs text-white/50 mb-1",children:"Total Paid"}),e.jsx("p",{className:"text-xl font-semibold","data-testid":"text-portal-total-paid",children:qe(Oe)})]}),e.jsxs("div",{className:"bg-white/[0.06] backdrop-blur-sm rounded-md p-4 border border-white/[0.08]",children:[e.jsx("p",{className:"text-xs text-white/50 mb-1",children:"Invoices"}),e.jsx("p",{className:"text-xl font-semibold","data-testid":"text-portal-invoice-count",children:_t.length})]}),e.jsxs("div",{className:"bg-white/[0.06] backdrop-blur-sm rounded-md p-4 border border-white/[0.08]",children:[e.jsx("p",{className:"text-xs text-white/50 mb-1",children:"Projects"}),e.jsx("p",{className:"text-xl font-semibold","data-testid":"text-portal-project-count",children:wt.length})]})]})]})]}),e.jsxs("div",{className:"max-w-6xl mx-auto px-6",children:[e.jsx(rI,{token:s.token}),e.jsx("div",{className:"mt-4 mb-8",children:e.jsx(ce,{className:"p-1.5 inline-flex items-center gap-1 flex-wrap",children:qt.map(D=>e.jsxs($,{variant:H===D.id?"default":"ghost",size:"sm",onClick:()=>{re(D.id),Y(null)},"data-testid":`button-tab-${D.id}`,children:[e.jsx(D.icon,{className:"w-4 h-4 mr-1.5"}),e.jsx("span",{className:"hidden sm:inline",children:D.label}),D.count&&D.count>0?e.jsx(je,{variant:"secondary",className:"ml-1.5 text-[10px] px-1.5 min-w-[20px] justify-center",children:D.count}):null]},D.id))})}),e.jsxs("div",{className:"pb-12",children:[H==="dashboard"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{"data-testid":"section-welcome",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-1",children:["Welcome back, ",Et.name.split(" ")[0]]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Here's what's happening with your projects."}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[_t.some(D=>D.status==="pending"||D.status==="overdue")&&e.jsxs($,{size:"sm",onClick:()=>re("invoices"),"data-testid":"button-quick-pay",children:[e.jsx(yi,{className:"w-4 h-4 mr-1.5"}),"Pay Invoice"]}),wt.length>0&&e.jsxs($,{size:"sm",variant:"outline",onClick:()=>re("projects"),"data-testid":"button-quick-progress",children:[e.jsx($n,{className:"w-4 h-4 mr-1.5"}),"View Projects"]}),e.jsxs($,{size:"sm",variant:"outline",onClick:()=>re("support"),"data-testid":"button-quick-ticket",children:[e.jsx(ro,{className:"w-4 h-4 mr-1.5"}),"Get Help"]})]})]}),st>0&&e.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-md bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-900/50",children:[e.jsx(qn,{className:"w-5 h-5 text-red-600 dark:text-red-400 shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm font-medium text-red-700 dark:text-red-400",children:["You have ",st," overdue invoice",st>1?"s":""]}),e.jsx("p",{className:"text-xs text-red-600/80 dark:text-red-400/80 mt-0.5",children:"Please arrange payment as soon as possible to avoid additional fees."})]}),e.jsx($,{variant:"outline",size:"sm",className:"shrink-0 text-red-600 border-red-300 dark:text-red-400 dark:border-red-800",onClick:()=>re("invoices"),"data-testid":"button-view-overdue",children:"View Invoices"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[Zt.length>0&&e.jsxs("div",{"data-testid":"section-payment-plans",children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider mb-4",children:"Active Payment Plans"}),e.jsx("div",{className:"space-y-3",children:Zt.map(D=>{const xe=_t.find(nt=>nt.id===D.invoiceId),Ke=D.frequency==="weekly"?"week":D.frequency==="biweekly"?"2 weeks":"month",jt=D.numberOfInstallments>0?Math.round(D.installmentsPaid/D.numberOfInstallments*100):0;return e.jsxs(ce,{className:"p-5","data-testid":`card-payment-plan-${D.id}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 flex-wrap mb-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-semibold",children:[D.numberOfInstallments," payments of ",qe(D.installmentAmountCents)]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5",children:["Every ",Ke," ",xe?`for invoice ${xe.invoiceNumber}`:""]})]}),e.jsx(je,{variant:"secondary",className:`text-xs ${Zn(D.status)}`,children:D.status==="pending"?"Ready to Start":D.status==="active"?"In Progress":D.status})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between gap-3 text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Total: ",qe(D.totalAmountCents)]}),e.jsxs("span",{children:[D.installmentsPaid," of ",D.numberOfInstallments," paid"]})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-violet-600 h-2 rounded-full transition-all",style:{width:`${jt}%`},"data-testid":`progress-plan-${D.id}`})})]}),D.status==="pending"&&e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsxs($,{className:"w-full bg-gradient-to-r from-blue-500 to-violet-600 text-white border-0",onClick:()=>Me.mutate(D.id),disabled:te===D.id,"data-testid":`button-accept-plan-${D.id}`,children:[te===D.id?e.jsx(Qe,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(yi,{className:"w-4 h-4 mr-2"}),te===D.id?"Redirecting...":"Accept & Start Plan"]}),e.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:"You'll be redirected to Stripe to set up automatic payments"})]}),D.status==="active"&&D.startDate&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-3",children:["Started ",$s(D.startDate),"  Next payment collected automatically"]})]},D.id)})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap mb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Recent Invoices"}),_t.length>3&&e.jsx($,{variant:"ghost",size:"sm",onClick:()=>re("invoices"),"data-testid":"button-view-all-invoices",children:"View All"})]}),_t.length>0?e.jsx("div",{className:"space-y-2",children:_t.slice(0,3).map(D=>e.jsx(ce,{className:"hover-elevate cursor-pointer",onClick:()=>{re("invoices"),o(D.id)},"data-testid":`card-dashboard-invoice-${D.id}`,children:e.jsxs("div",{className:"p-4 flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("div",{className:`flex items-center justify-center w-9 h-9 rounded-md shrink-0 ${D.status==="paid"?"bg-emerald-500/10 text-emerald-600 dark:text-emerald-400":D.status==="overdue"?"bg-red-500/10 text-red-600 dark:text-red-400":"bg-muted text-muted-foreground"}`,children:pb(D.status)}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium",children:D.invoiceNumber}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Due ",$s(D.dueDate)]})]})]}),e.jsxs("div",{className:"text-right shrink-0",children:[e.jsx("p",{className:"text-sm font-semibold",children:qe(D.totalAmountCents)}),e.jsx(je,{variant:"secondary",className:`text-xs ${Zn(D.status)}`,children:D.status})]})]})},D.id))}):e.jsxs(ce,{className:"p-8 text-center",children:[e.jsx(Vt,{className:"w-8 h-8 text-muted-foreground/40 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No invoices yet"})]})]}),wt.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap mb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Active Projects"}),wt.length>2&&e.jsx($,{variant:"ghost",size:"sm",onClick:()=>re("projects"),"data-testid":"button-view-all-projects",children:"View All"})]}),e.jsx("div",{className:"space-y-2",children:wt.slice(0,2).map(D=>e.jsx(ce,{className:"p-4 hover-elevate cursor-pointer",onClick:()=>re("projects"),"data-testid":`card-dashboard-project-${D.id}`,children:e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium",children:D.name}),D.description&&e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5 line-clamp-1",children:D.description})]}),e.jsx(je,{variant:"secondary",className:`text-xs ${Zn(D.status)}`,children:D.status})]})},D.id))})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsx(sI,{token:s.token}),e.jsxs("div",{"data-testid":"card-portal-profile",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap mb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Your Account"}),!l&&e.jsxs($,{variant:"ghost",size:"sm",onClick:()=>{h(Et.name),b(Et.email),y(Et.company||""),C(Et.phone||""),d(!0)},"data-testid":"button-edit-profile",children:[e.jsx(ia,{className:"w-3.5 h-3.5 mr-1"}),"Edit"]})]}),l?e.jsx(ce,{className:"p-5",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(_e,{htmlFor:"portal-name",className:"text-xs font-medium",children:"Full Name"}),e.jsx(De,{id:"portal-name",value:u,onChange:D=>h(D.target.value),"data-testid":"input-portal-name"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(_e,{htmlFor:"portal-company",className:"text-xs font-medium",children:"Company"}),e.jsx(De,{id:"portal-company",value:v,onChange:D=>y(D.target.value),placeholder:"(optional)","data-testid":"input-portal-company"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(_e,{htmlFor:"portal-email",className:"text-xs font-medium",children:"Email"}),e.jsx(De,{id:"portal-email",type:"email",value:f,onChange:D=>b(D.target.value),"data-testid":"input-portal-email"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(_e,{htmlFor:"portal-phone",className:"text-xs font-medium",children:"Phone"}),e.jsx(De,{id:"portal-phone",type:"tel",value:N,onChange:D=>C(D.target.value),placeholder:"(optional)","data-testid":"input-portal-phone"})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-3 border-t",children:[e.jsxs($,{size:"sm",onClick:()=>lt.mutate({name:u,email:f,company:v,phone:N}),disabled:lt.isPending||!f.trim()||!u.trim(),"data-testid":"button-save-profile",children:[lt.isPending?e.jsx(Qe,{className:"w-4 h-4 mr-1 animate-spin"}):e.jsx(Tx,{className:"w-4 h-4 mr-1"}),"Save"]}),e.jsx($,{variant:"ghost",size:"sm",onClick:()=>d(!1),"data-testid":"button-cancel-edit",children:"Cancel"})]})]})}):e.jsxs(ce,{className:"p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-violet-600 flex items-center justify-center text-white text-lg font-semibold shrink-0",children:Et.name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-semibold truncate","data-testid":"text-portal-name",children:Et.name}),Et.company&&e.jsx("p",{className:"text-xs text-muted-foreground","data-testid":"text-portal-company",children:Et.company})]})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Fs,{className:"w-3.5 h-3.5 shrink-0"}),e.jsx("span",{className:"truncate","data-testid":"text-portal-email",children:Et.email})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Bc,{className:"w-3.5 h-3.5 shrink-0"}),e.jsx("span",{"data-testid":"text-portal-phone",children:Et.phone||"Not provided"})]})]})]})]}),e.jsx("div",{className:"pt-4 border-t",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ky,{className:"w-4 h-4 text-muted-foreground shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Need to remove your data? You can request permanent deletion of your account."}),e.jsxs($,{variant:"ghost",size:"sm",className:"mt-2 text-destructive",onClick:()=>{R(""),E(!0)},"data-testid":"button-request-delete",children:[e.jsx(ps,{className:"w-3.5 h-3.5 mr-1.5"}),"Request Data Deletion"]})]})]})})]})]})]}),H==="invoices"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-1",children:"Invoices"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[_t.length," total invoice",_t.length!==1?"s":""]})]}),_t.length>0?e.jsx("div",{className:"space-y-3",children:_t.map(D=>{const xe=a===D.id;return e.jsxs(ce,{className:"overflow-hidden","data-testid":`card-portal-invoice-${D.id}`,children:[e.jsxs("button",{onClick:()=>o(xe?null:D.id),className:"w-full p-5 text-left flex items-center justify-between gap-3 hover-elevate","data-testid":`button-expand-invoice-${D.id}`,children:[e.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-md shrink-0 ${D.status==="paid"?"bg-emerald-500/10 text-emerald-600 dark:text-emerald-400":D.status==="overdue"?"bg-red-500/10 text-red-600 dark:text-red-400":"bg-muted text-muted-foreground"}`,children:pb(D.status)}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold",children:D.invoiceNumber}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Issued ",$s(D.issuedAt),"  Due ",$s(D.dueDate)]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-base font-semibold",children:qe(D.totalAmountCents)}),e.jsx(je,{variant:"secondary",className:`text-xs ${Zn(D.status)}`,children:D.status})]}),xe?e.jsx(wo,{className:"w-4 h-4 text-muted-foreground"}):e.jsx(ua,{className:"w-4 h-4 text-muted-foreground"})]})]}),xe&&e.jsxs("div",{className:"border-t px-5 pb-5",children:[D.lineItems&&D.lineItems.length>0&&e.jsx("div",{className:"mt-4",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-2.5 text-xs font-medium text-muted-foreground",children:"Item"}),e.jsx("th",{className:"text-right py-2.5 text-xs font-medium text-muted-foreground",children:"Qty"}),e.jsx("th",{className:"text-right py-2.5 text-xs font-medium text-muted-foreground",children:"Rate"}),e.jsx("th",{className:"text-right py-2.5 text-xs font-medium text-muted-foreground",children:"Total"})]})}),e.jsx("tbody",{children:D.lineItems.map(Ke=>e.jsxs("tr",{className:"border-b last:border-b-0",children:[e.jsx("td",{className:"py-2.5 pr-3",children:Ke.description}),e.jsx("td",{className:"py-2.5 text-right text-muted-foreground",children:Number(Ke.quantity)}),e.jsx("td",{className:"py-2.5 text-right text-muted-foreground",children:qe(Ke.unitPrice)}),e.jsx("td",{className:"py-2.5 text-right font-medium",children:qe(Ke.totalCents)})]},Ke.id))})]})}),e.jsxs("div",{className:"flex justify-between gap-3 text-sm pt-4 border-t mt-4 font-semibold",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{children:qe(D.totalAmountCents)})]}),e.jsxs("div",{className:"flex gap-3 pt-4 mt-4 border-t flex-wrap",children:[e.jsxs($,{variant:"outline",onClick:Ke=>{Ke.stopPropagation();const jt=document.createElement("a");jt.href=`/api/portal/${s.token}/invoices/${D.id}/pdf`,jt.download=`${D.invoiceNumber}.pdf`,jt.click()},"data-testid":`button-download-pdf-${D.id}`,children:[e.jsx(co,{className:"w-4 h-4 mr-2"}),"Download PDF"]}),D.status!=="paid"&&D.status!=="draft"&&e.jsxs($,{className:"bg-gradient-to-r from-blue-500 to-violet-600 text-white border-0 flex-1",onClick:Ke=>{Ke.stopPropagation(),K.mutate(D.id)},disabled:g===D.id,"data-testid":`button-pay-invoice-${D.id}`,children:[g===D.id?e.jsx(Qe,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(yi,{className:"w-4 h-4 mr-2"}),g===D.id?"Redirecting...":`Pay ${qe(D.totalAmountCents)}`]})]}),D.status==="paid"&&e.jsxs("div",{className:"pt-4 mt-4 border-t flex items-center justify-center gap-2 text-emerald-600 dark:text-emerald-400",children:[e.jsx(yn,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Paid in full"})]})]})]},D.id)})}):e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-full bg-muted mb-4",children:e.jsx(La,{className:"w-6 h-6 text-muted-foreground"})}),e.jsx("p",{className:"text-sm font-medium mb-1",children:"No invoices yet"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Invoices will appear here once your project work begins."})]})]}),H==="projects"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-1",children:"Projects"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[wt.length," project",wt.length!==1?"s":""]})]}),wt.length>0?e.jsx("div",{className:"space-y-4",children:wt.map(D=>e.jsxs(ce,{className:"p-5","data-testid":`card-portal-project-${D.id}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 flex-wrap mb-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-semibold",children:D.name}),D.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:D.description})]}),e.jsx(je,{variant:"secondary",className:`text-xs ${Zn(D.status)}`,children:D.status})]}),e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsx("a",{href:`/progress/${D.id}`,target:"_blank",rel:"noopener noreferrer","data-testid":`link-portal-progress-${D.id}`,children:e.jsxs($,{variant:"outline",size:"sm",children:[e.jsx(tn,{className:"w-3.5 h-3.5 mr-1.5"}),"View Progress"]})}),D.previewUrl&&e.jsx("a",{href:D.previewUrl,target:"_blank",rel:"noopener noreferrer","data-testid":`link-portal-preview-${D.id}`,children:e.jsxs($,{variant:"outline",size:"sm",children:[e.jsx(O3,{className:"w-3.5 h-3.5 mr-1.5"}),"Open Full Screen"]})})]}),e.jsxs("div",{className:"mt-4","data-testid":`preview-section-${D.id}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(jn,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Live Preview"})]}),D.previewUrl&&e.jsx("div",{className:"flex items-center gap-1",children:e.jsxs($,{variant:"ghost",size:"sm",className:"h-7 text-xs",onClick:()=>{const xe=document.getElementById(`preview-iframe-${D.id}`);xe&&(xe.src=D.previewUrl)},"data-testid":`button-refresh-preview-${D.id}`,children:[e.jsx(Ol,{className:"w-3 h-3 mr-1"}),"Refresh"]})})]}),D.previewUrl?e.jsxs("div",{className:"rounded-lg border overflow-hidden bg-background shadow-sm",children:[e.jsxs("div",{className:"bg-muted/50 px-3 py-1.5 flex items-center gap-2 border-b",children:[e.jsxs("div",{className:"flex gap-1.5",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-red-400/70"}),e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-yellow-400/70"}),e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-green-400/70"})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx("div",{className:"bg-background rounded px-3 py-0.5 text-[10px] text-muted-foreground truncate max-w-[300px] border",children:D.previewUrl})}),e.jsx("a",{href:D.previewUrl,target:"_blank",rel:"noopener noreferrer",children:e.jsx(tn,{className:"w-3 h-3 text-muted-foreground hover:text-foreground transition-colors"})})]}),e.jsx("iframe",{id:`preview-iframe-${D.id}`,src:D.previewUrl,className:"w-full border-0",style:{height:"500px"},title:`Preview of ${D.name}`,sandbox:"allow-scripts allow-same-origin allow-popups allow-forms",loading:"lazy","data-testid":`iframe-preview-${D.id}`})]}):e.jsxs("div",{className:"rounded-lg border bg-gradient-to-br from-muted/30 via-muted/20 to-background p-8 text-center","data-testid":`preview-placeholder-${D.id}`,children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-primary/10 mb-4",children:e.jsx(Ww,{className:"w-7 h-7 text-primary/60"})}),e.jsx("h4",{className:"font-semibold mb-1",children:"Your site is being prepared"}),e.jsx("p",{className:"text-sm text-muted-foreground max-w-sm mx-auto",children:"A live preview of your website will appear here once development begins. You'll be able to watch it come to life in real time."}),e.jsxs("div",{className:"flex items-center justify-center gap-1.5 mt-4",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary/40 animate-pulse"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Coming soon"})]})]})]}),e.jsx(tI,{token:s.token,projectId:D.id}),e.jsx(eI,{token:s.token,projectId:D.id})]},D.id))}):e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-full bg-muted mb-4",children:e.jsx($n,{className:"w-6 h-6 text-muted-foreground"})}),e.jsx("p",{className:"text-sm font-medium mb-1",children:"No projects yet"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Your projects will appear here once they're created."})]})]}),H==="billing"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-1",children:"Billing & Payments"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your payment methods and view payment plans"})]}),e.jsx(ZR,{token:s.token}),Zt.length>0&&e.jsxs("div",{"data-testid":"section-billing-payment-plans",children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider mb-4",children:"Payment Plans"}),e.jsx("div",{className:"space-y-3",children:Zt.map(D=>{const xe=_t.find(nt=>nt.id===D.invoiceId),Ke=D.frequency==="weekly"?"week":D.frequency==="biweekly"?"2 weeks":"month",jt=D.numberOfInstallments>0?Math.round(D.installmentsPaid/D.numberOfInstallments*100):0;return e.jsxs(ce,{className:"p-5","data-testid":`card-billing-plan-${D.id}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 flex-wrap mb-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-semibold",children:[D.numberOfInstallments," payments of ",qe(D.installmentAmountCents)]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5",children:["Every ",Ke," ",xe?`for ${xe.invoiceNumber}`:""]})]}),e.jsx(je,{variant:"secondary",className:`text-xs ${Zn(D.status)}`,children:D.status==="pending"?"Ready to Start":D.status==="active"?"In Progress":D.status})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between gap-3 text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Total: ",qe(D.totalAmountCents)]}),e.jsxs("span",{children:[D.installmentsPaid," of ",D.numberOfInstallments," paid"]})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-violet-600 h-2 rounded-full transition-all",style:{width:`${jt}%`}})})]}),D.status==="pending"&&e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsxs($,{className:"w-full bg-gradient-to-r from-blue-500 to-violet-600 text-white border-0",onClick:()=>Me.mutate(D.id),disabled:te===D.id,"data-testid":`button-billing-accept-plan-${D.id}`,children:[te===D.id?e.jsx(Qe,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(yi,{className:"w-4 h-4 mr-2"}),te===D.id?"Redirecting...":"Accept & Start Plan"]})})]},D.id)})})]}),(()=>{const D=_t.filter(Ke=>Ke.status==="paid");if(D.length===0)return null;const xe=D.reduce((Ke,jt)=>Ke+jt.totalAmountCents,0);return e.jsxs("div",{"data-testid":"section-payment-history",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap mb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Payment History"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[D.length," payment",D.length!==1?"s":""," totaling ",qe(xe)]})]}),e.jsx(ce,{className:"divide-y",children:D.map(Ke=>e.jsxs("div",{className:"flex items-center gap-4 p-4","data-testid":`payment-history-${Ke.id}`,children:[e.jsx("div",{className:"flex items-center justify-center w-9 h-9 rounded-md bg-emerald-500/10 shrink-0",children:e.jsx(yn,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium",children:Ke.invoiceNumber}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Paid ",$s(Ke.dueDate)]})]}),e.jsx("div",{className:"text-right shrink-0",children:e.jsx("p",{className:"text-sm font-semibold text-emerald-600 dark:text-emerald-400",children:qe(Ke.totalAmountCents)})}),e.jsx($,{variant:"ghost",size:"icon",onClick:()=>{const jt=document.createElement("a");jt.href=`/api/portal/${s.token}/invoices/${Ke.id}/pdf`,jt.download=`${Ke.invoiceNumber}.pdf`,jt.click()},"data-testid":`button-download-receipt-${Ke.id}`,children:e.jsx(co,{className:"w-4 h-4"})})]},Ke.id))})]})})()]}),H==="support"&&e.jsxs(e.Fragment,{children:[T&&Je?e.jsxs("div",{className:"space-y-5",children:[e.jsxs($,{variant:"ghost",size:"sm",onClick:()=>Y(null),"data-testid":"button-back-tickets",children:[e.jsx(_a,{className:"w-4 h-4 mr-2"}),"All tickets"]}),e.jsxs(ce,{className:"overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b bg-muted/30",children:e.jsxs("div",{className:"flex items-start justify-between gap-3 flex-wrap",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("h2",{className:"text-lg font-semibold leading-tight","data-testid":"text-ticket-subject",children:Je.subject}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground flex-wrap",children:[e.jsx("span",{className:"font-mono",children:Je.ticketNumber}),e.jsx("span",{className:"opacity-30",children:"|"}),e.jsx("span",{className:"capitalize",children:Je.category}),e.jsx("span",{className:"opacity-30",children:"|"}),e.jsx("span",{children:$s(Je.createdAt)})]})]}),e.jsxs(je,{variant:"secondary",className:`text-xs border ${Je.status==="open"?"bg-blue-500/10 text-blue-600 dark:text-blue-400 border-blue-500/20":Je.status==="in_progress"?"bg-amber-500/10 text-amber-600 dark:text-amber-400 border-amber-500/20":Je.status==="resolved"?"bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 border-emerald-500/20":"bg-muted border-muted"}`,children:[Je.status==="open"&&e.jsx(Ci,{className:"w-3 h-3 mr-1"}),Je.status==="in_progress"&&e.jsx(Gt,{className:"w-3 h-3 mr-1"}),Je.status==="resolved"&&e.jsx(yn,{className:"w-3 h-3 mr-1"}),Je.status.replace("_"," ")]})]})}),e.jsx("div",{className:"divide-y",children:Je.messages.map(D=>{const xe=D.senderType==="admin";return e.jsx("div",{className:`p-5 ${xe?"bg-primary/[0.03] dark:bg-primary/[0.06]":""}`,"data-testid":`message-${D.id}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-semibold shrink-0 ${xe?"bg-primary text-primary-foreground":"bg-gradient-to-br from-blue-500 to-violet-500 text-white"}`,children:D.senderName.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1.5 flex-wrap",children:[e.jsx("span",{className:"text-sm font-semibold",children:D.senderName}),e.jsx(je,{variant:"secondary",className:`text-[10px] px-1.5 py-0 ${xe?"bg-primary/10 text-primary border-primary/20":"bg-blue-500/10 text-blue-600 dark:text-blue-400 border-blue-500/20"} border`,children:xe?"Support Team":"You"}),e.jsx("span",{className:"text-xs text-muted-foreground ml-auto shrink-0",children:$s(D.createdAt)})]}),e.jsx("p",{className:"text-sm whitespace-pre-wrap leading-relaxed text-foreground/90",children:D.message})]})]})},D.id)})}),Je.status!=="closed"&&e.jsx("div",{className:"border-t",children:e.jsxs("div",{className:"p-5 space-y-3",children:[e.jsx(Rs,{placeholder:"Write your reply...",value:Q,onChange:D=>F(D.target.value),className:"resize-none min-h-[100px] text-sm","data-testid":"textarea-portal-reply"}),e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1.5",children:[e.jsx(Fs,{className:"w-3 h-3"}),"Our team will be notified"]}),e.jsxs($,{onClick:()=>Xt.mutate({ticketId:T,message:Q}),disabled:!Q.trim()||Xt.isPending,"data-testid":"button-portal-send-reply",children:[Xt.isPending?e.jsx(Qe,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(bs,{className:"w-4 h-4 mr-2"}),"Send Reply"]})]})]})}),Je.status==="resolved"&&e.jsx("div",{className:"border-t p-5 bg-emerald-500/5",children:e.jsxs("div",{className:"flex items-center gap-2 text-emerald-600 dark:text-emerald-400",children:[e.jsx(yn,{className:"w-4 h-4 shrink-0"}),e.jsx("p",{className:"text-sm font-medium",children:"This ticket has been resolved"})]})}),Je.status==="closed"&&e.jsx("div",{className:"border-t p-5 bg-muted/30",children:e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Mt,{className:"w-4 h-4 shrink-0"}),e.jsx("p",{className:"text-sm",children:"This ticket is closed. Open a new ticket if you need further help."})]})})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-1",children:"Support"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:St>0?`${St} active ticket${St!==1?"s":""}`:"Get help from our team"})]}),e.jsxs($,{onClick:()=>me(!0),"data-testid":"button-new-ticket",children:[e.jsx(Qt,{className:"w-4 h-4 mr-1.5"}),"New Ticket"]})]}),(Fe||[]).length>0?e.jsx("div",{className:"space-y-2",children:(Fe||[]).map(D=>{const xe=D.status==="open"?"bg-blue-500/10 text-blue-600 dark:text-blue-400 border-blue-500/20":D.status==="in_progress"?"bg-amber-500/10 text-amber-600 dark:text-amber-400 border-amber-500/20":D.status==="resolved"?"bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 border-emerald-500/20":"bg-muted text-muted-foreground border-muted",Ke=D.status==="open"?e.jsx(Ci,{className:"w-3.5 h-3.5"}):D.status==="in_progress"?e.jsx(Gt,{className:"w-3.5 h-3.5"}):D.status==="resolved"?e.jsx(yn,{className:"w-3.5 h-3.5"}):e.jsx(Mt,{className:"w-3.5 h-3.5"});return e.jsx(ce,{className:"hover-elevate cursor-pointer",onClick:()=>Y(D.id),"data-testid":`button-portal-ticket-${D.id}`,children:e.jsxs("div",{className:"p-4 flex items-start gap-3.5",children:[e.jsx("div",{className:`flex items-center justify-center w-9 h-9 rounded-full border shrink-0 ${xe}`,children:Ke}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[e.jsx("p",{className:"text-sm font-semibold truncate",children:D.subject}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx("span",{className:"font-mono",children:D.ticketNumber}),e.jsx("span",{className:"opacity-30",children:"|"}),e.jsx("span",{children:$s(D.createdAt)})]})]}),e.jsx(je,{variant:"secondary",className:`text-xs shrink-0 border ${xe}`,children:D.status.replace("_"," ")})]})},D.id)})}):e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-full bg-muted mb-4",children:e.jsx(ro,{className:"w-7 h-7 text-muted-foreground"})}),e.jsx("p",{className:"text-sm font-medium mb-1",children:"No support tickets yet"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"Need help? We're here for you."}),e.jsxs($,{onClick:()=>me(!0),"data-testid":"button-new-ticket-empty",children:[e.jsx(Qt,{className:"w-4 h-4 mr-1.5"}),"Create Your First Ticket"]})]})]}),e.jsx(Ct,{open:ee,onOpenChange:me,children:e.jsxs(vt,{className:"sm:max-w-lg",children:[e.jsx(yt,{children:e.jsxs(bt,{className:"flex items-center gap-2",children:[e.jsx(ro,{className:"w-5 h-5 text-muted-foreground"}),"How can we help?"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(_e,{htmlFor:"ticket-subject",className:"text-xs font-medium",children:"Subject"}),e.jsx(De,{id:"ticket-subject",placeholder:"Brief description of your issue",value:pe,onChange:D=>L(D.target.value),"data-testid":"input-ticket-subject"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(_e,{className:"text-xs font-medium",children:"Category"}),e.jsxs(Dt,{value:V,onValueChange:se,children:[e.jsx(It,{"data-testid":"select-ticket-category",children:e.jsx($t,{})}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"general",children:"General"}),e.jsx(Ie,{value:"billing",children:"Billing"}),e.jsx(Ie,{value:"technical",children:"Technical"}),e.jsx(Ie,{value:"feature_request",children:"Feature Request"}),e.jsx(Ie,{value:"bug",children:"Bug Report"})]})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(_e,{className:"text-xs font-medium",children:"Priority"}),e.jsxs(Dt,{value:I,onValueChange:O,children:[e.jsx(It,{"data-testid":"select-ticket-priority",children:e.jsx($t,{})}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"low",children:"Low"}),e.jsx(Ie,{value:"medium",children:"Medium"}),e.jsx(Ie,{value:"high",children:"High"}),e.jsx(Ie,{value:"urgent",children:"Urgent"})]})]})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(_e,{htmlFor:"ticket-message",className:"text-xs font-medium",children:"Describe your issue"}),e.jsx(Rs,{id:"ticket-message",placeholder:"Please provide as much detail as possible so we can help you quickly...",value:X,onChange:D=>z(D.target.value),className:"resize-none min-h-[140px] text-sm","data-testid":"textarea-ticket-message"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2 border-t",children:[e.jsx($,{variant:"ghost",onClick:()=>me(!1),"data-testid":"button-cancel-ticket",children:"Cancel"}),e.jsxs($,{onClick:()=>Bt.mutate({subject:pe,message:X,category:V,priority:I}),disabled:!pe.trim()||!X.trim()||Bt.isPending,"data-testid":"button-submit-ticket",children:[Bt.isPending?e.jsx(Qe,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(bs,{className:"w-4 h-4 mr-2"}),"Submit Ticket"]})]})]})]})})]}),H==="servers"&&e.jsx(lI,{token:s.token,servers:ws||[],serversLoading:os}),H==="help"&&e.jsx(cI,{articles:ms||[]}),H==="backups"&&e.jsxs("div",{className:"space-y-6","data-testid":"section-backups",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-violet-500 to-purple-600 flex items-center justify-center",children:e.jsx(io,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold","data-testid":"text-backups-title",children:"Code Backups"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Your project code is backed up to your GitHub account"})]})]}),Pe&&e.jsx(ce,{className:"p-3 bg-gradient-to-r from-emerald-50 to-teal-50 dark:from-emerald-950/20 dark:to-teal-950/20 border-emerald-200 dark:border-emerald-800","data-testid":"card-backup-pricing",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center shrink-0",children:e.jsx(Fn,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-emerald-900 dark:text-emerald-200",children:["$",(Pe.rateCents/100).toFixed(2)," per ",Pe.unitLabel]}),e.jsx("p",{className:"text-xs text-emerald-700 dark:text-emerald-400",children:"Each backup is automatically added to your project billing and will appear on your next invoice."})]})]})}),!be||be.length===0?e.jsxs(ce,{className:"p-8 text-center",children:[e.jsx(no,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"font-semibold mb-2",children:"No Backups Configured Yet"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Connect your GitHub account to enable automatic code backups for your projects."}),e.jsxs($,{onClick:()=>window.location.href=`/api/portal/${s.token}/github/connect`,className:"bg-gradient-to-r from-gray-800 to-gray-900 hover:from-gray-900 hover:to-black","data-testid":"button-connect-github",children:[e.jsx(no,{className:"w-4 h-4 mr-2"}),"Connect GitHub"]}),e.jsxs("div",{className:"mt-6 p-4 rounded-lg bg-muted/50 text-left max-w-md mx-auto",children:[e.jsxs("h4",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[e.jsx(Dw,{className:"w-4 h-4 text-muted-foreground"}),"Don't have a GitHub account?"]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"GitHub is a free platform where your project code is securely stored. You'll need an account to enable backups."}),e.jsxs("a",{href:"https://github.com/signup",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1.5 text-xs font-medium text-primary hover:underline","data-testid":"link-github-signup",children:["Create a free GitHub account",e.jsx(tn,{className:"w-3 h-3"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:`Once you've signed up, come back here and click "Connect GitHub" above  you'll be redirected to authorize the connection and then brought right back.`})]})]}):e.jsxs("div",{className:"space-y-4",children:[be.map(D=>e.jsxs(ce,{className:"overflow-hidden","data-testid":`card-backup-${D.id}`,children:[e.jsx("div",{className:"p-4 border-b bg-muted/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(io,{className:"w-5 h-5 text-violet-500"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-sm",children:D.projectName}),D.githubRepo&&e.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:D.githubRepo})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[D.isConnected?e.jsxs(je,{className:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400",children:[e.jsx(no,{className:"w-3 h-3 mr-1"}),D.githubUsername]}):e.jsxs($,{size:"sm",variant:"outline",onClick:()=>window.location.href=`/api/portal/${s.token}/github/connect`,"data-testid":`button-connect-github-${D.id}`,children:[e.jsx(no,{className:"w-3 h-3 mr-1"}),"Connect"]}),D.autopilotEnabled&&e.jsxs(je,{variant:"secondary",className:"text-xs",children:[e.jsx(Jn,{className:"w-3 h-3 mr-1 text-amber-500"}),"Autopilot"]})]})]})}),e.jsxs("div",{className:"p-4 space-y-3",children:[D.lastPushAt&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Gt,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{children:["Last backup: ",new Date(D.lastPushAt).toLocaleString()]})]}),D.recentLogs&&D.recentLogs.length>0?e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Recent Backups"}),D.recentLogs.map(xe=>e.jsxs("div",{className:"flex items-center justify-between py-1.5 px-3 rounded-md bg-muted/50 text-xs","data-testid":`log-${xe.id}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[xe.status==="success"?e.jsx(yn,{className:"w-3.5 h-3.5 text-emerald-500"}):xe.status==="failed"?e.jsx(qn,{className:"w-3.5 h-3.5 text-red-500"}):e.jsx(Qe,{className:"w-3.5 h-3.5 text-amber-500 animate-spin"}),e.jsx("span",{children:xe.commitMessage||"Backup"}),xe.triggeredBy==="autopilot"&&e.jsx("span",{title:"Autopilot",children:e.jsx(Jn,{className:"w-3 h-3 text-amber-500"})})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[xe.status==="success"&&Pe&&e.jsxs("span",{className:"text-emerald-600 dark:text-emerald-400 font-medium","data-testid":`text-backup-cost-${xe.id}`,children:["$",(Pe.rateCents/100).toFixed(2)]}),e.jsx("span",{children:new Date(xe.createdAt).toLocaleString()}),xe.commitSha&&e.jsx("code",{className:"bg-muted px-1.5 py-0.5 rounded font-mono",children:xe.commitSha.substring(0,7)})]})]},xe.id))]}):e.jsx("p",{className:"text-xs text-muted-foreground text-center py-2",children:"No backups yet"})]})]},D.id)),be.every(D=>D.isConnected)&&e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Your admin manages backup schedules and pushes. Contact support if you need to update your GitHub connection."})]})]})]})]}),e.jsx(Ct,{open:A,onOpenChange:E,children:e.jsxs(vt,{className:"max-w-md",children:[e.jsx(yt,{children:e.jsxs(bt,{className:"text-destructive flex items-center gap-2",children:[e.jsx(ky,{className:"w-5 h-5"}),"Delete Your Account"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"This will permanently delete your account and all associated data including projects, invoices, and support tickets. This action cannot be undone."}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"If you have outstanding invoices, you must settle them before deleting your account."}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(_e,{className:"text-xs font-medium",children:'Type "DELETE" to confirm'}),e.jsx(De,{value:S,onChange:D=>R(D.target.value),placeholder:"DELETE","data-testid":"input-delete-confirm"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx($,{variant:"outline",className:"flex-1",onClick:()=>E(!1),"data-testid":"button-cancel-delete",children:"Cancel"}),e.jsxs($,{variant:"destructive",className:"flex-1",disabled:S!=="DELETE"||us.isPending,onClick:()=>us.mutate(),"data-testid":"button-confirm-delete",children:[us.isPending?e.jsx(Qe,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(ps,{className:"w-4 h-4 mr-2"}),"Delete My Account"]})]})]})]})})]})}const uI="/assets/hero-ai-Dt0dd4gc.png",mI="/assets/service-websites-MnMRVx20.png",hI="/assets/service-forums-DKY4OCkT.png",fI="/assets/service-blogs-BtTjjog4.png",pI="/assets/service-backends-B-t9cV5Y.png",xI="/assets/service-support-B6dWekyT.png",gI="/assets/service-docker-CeJT6xPL.png",vI="/assets/service-opensource-D_F4gzuT.png",yI="/assets/service-accounts-CIh6rg08.png",bI="/assets/service-billing-BEa03eay.png",wI=[{title:"Custom Websites",description:"Stunning, responsive websites built with cutting-edge AI technology. From landing pages to full e-commerce platforms.",image:mI,icon:jn},{title:"Community Forums",description:"Engage your audience with powerful, AI-moderated community forums that drive retention and loyalty.",image:hI,icon:Mt},{title:"Blog Platforms",description:"Content-rich blogs with AI writing assistance, SEO optimization, and beautiful, engaging layouts.",image:fI,icon:Uc},{title:"Backend Systems",description:"Robust, scalable backend infrastructure with APIs, databases, and integrations built for performance.",image:pI,icon:qw},{title:"Support Portals",description:"Customer support portals with AI chatbots, ticket systems, and real-time communication channels.",image:xI,icon:E3},{title:"Docker Solutions",description:"Containerized deployments with Docker for scalable, portable, and consistent application infrastructure across any environment.",image:gI,icon:w3},{title:"Open Source App Hosting",description:"We host and manage popular open source applications on dedicated servers for you  fully configured, maintained, and ready to use.",image:vI,icon:k3},{title:"My Account Sections",description:"Polished user account management interfaces with profile settings, preferences, security options, and activity history.",image:yI,icon:ej},{title:"Billing Dashboards",description:"Comprehensive billing and financial dashboards with invoice tracking, payment processing, and real-time revenue analytics.",image:bI,icon:La}],jI=[{icon:zc,title:"AI-First Approach",description:"Every solution is powered by the latest AI models, delivering smarter, faster, and more intuitive experiences."},{icon:Ma,title:"Rapid Delivery",description:"Get your project live in days, not months. Our AI-accelerated workflow cuts development time dramatically."},{icon:wn,title:"Enterprise Security",description:"Bank-grade security built into every project. Your data and your customers' data stays protected."},{icon:Gt,title:"24/7 Support",description:"Round-the-clock support with real humans and AI assistants to keep your business running smoothly."}],NI=[{value:"150+",label:"Projects Delivered"},{value:"99.9%",label:"Uptime Guaranteed"},{value:"48hr",label:"Average Turnaround"},{value:"5.0",label:"Client Rating",icon:Ia}],kI=[{name:"Sarah Chen",role:"CEO, TechFlow",quote:"They turned our vision into reality in under two weeks. The AI-powered features they built into our platform have tripled our user engagement.",rating:5},{name:"Marcus Rivera",role:"Founder, GreenLeaf Co.",quote:"Incredible attention to detail and communication throughout the entire project. Our new site is fast, beautiful, and converts like crazy.",rating:5},{name:"Emily Nakamura",role:"Director of Ops, Skyline Media",quote:"We needed a complex billing dashboard and support portal fast. They delivered both ahead of schedule and the quality blew us away.",rating:5}],gb=[{step:1,icon:Fs,title:"Contact Us",description:"Send us an email describing your project and goals. We'll review everything and get back to you quickly."},{step:2,icon:Ex,title:"Design",description:"We craft a custom design and architecture tailored specifically to your needs and brand."},{step:3,icon:sj,title:"Build",description:"Our AI-accelerated development process brings your project to life with precision and speed."},{step:4,icon:F3,title:"Launch",description:"We deploy, test, and hand over your polished product with full documentation and support."}];function CI(){const[s,t]=p.useState(""),[n,a]=p.useState(""),[o,l]=p.useState(!1),{toast:d}=pt(),u=Te({mutationFn:async()=>{const[h,...f]=n.trim().split(" "),b=f.join(" ")||void 0;return(await ke("POST","/api/newsletter/subscribe",{email:s.trim(),firstName:h||void 0,lastName:b})).json()},onSuccess:()=>{l(!0),d({title:"You're in!",description:"Thanks for subscribing. We'll keep you posted."})},onError:()=>{d({title:"Couldn't subscribe",description:"Please try again or contact us directly.",variant:"destructive"})}});return o?e.jsxs("div",{className:"flex items-center justify-center gap-2 py-2","data-testid":"text-newsletter-success",children:[e.jsx(Ss,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"text-sm text-white/60",children:"You're subscribed! Thanks for joining."})]}):e.jsxs("form",{onSubmit:h=>{h.preventDefault(),s.trim()&&u.mutate()},className:"flex flex-col sm:flex-row gap-2","data-testid":"form-newsletter",children:[e.jsx(De,{type:"text",placeholder:"Your name",value:n,onChange:h=>a(h.target.value),className:"bg-white/5 border-white/10 text-white placeholder:text-white/30 text-sm flex-1 sm:max-w-[160px]","data-testid":"input-newsletter-name"}),e.jsx(De,{type:"email",placeholder:"you@example.com",value:s,onChange:h=>t(h.target.value),required:!0,className:"bg-white/5 border-white/10 text-white placeholder:text-white/30 text-sm flex-1","data-testid":"input-newsletter-email"}),e.jsx($,{type:"submit",disabled:u.isPending,className:"bg-gradient-to-r from-blue-500 to-violet-600 border-0 text-white text-sm font-medium shrink-0","data-testid":"button-newsletter-subscribe",children:u.isPending?e.jsx(Qe,{className:"w-4 h-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(Fs,{className:"w-3.5 h-3.5 mr-1.5"}),"Subscribe"]})})]})}function SI(){const[s,t]=p.useState(!1),[n,a]=p.useState(!1),[o,l]=p.useState(""),[d,u]=p.useState(""),[h,f]=p.useState(""),[b,v]=p.useState(""),[y,N]=p.useState(""),[C,g]=p.useState(""),[k,A]=p.useState(null),[E,S]=p.useState({}),[R,H]=p.useState(0),[re,K]=p.useState(""),[ee,me]=p.useState(!1),[pe,L]=p.useState(!1),[X,z]=p.useState(!1),{toast:V}=pt(),{isLoading:se,isAuthenticated:I}=WN();p.useEffect(()=>(document.title="AI Web Design Agency  Custom AI-Powered Websites & Web Development | AI Powered Sites",()=>{document.title="AI Powered Sites"}),[]);const O=[{pct:4,label:"Connecting to website..."},{pct:9,label:"Fetching page content..."},{pct:14,label:"Analyzing page structure..."},{pct:19,label:"Checking title tags & meta data..."},{pct:24,label:"Scanning structured data (JSON-LD)..."},{pct:29,label:"Evaluating heading hierarchy..."},{pct:34,label:"Measuring server response time..."},{pct:39,label:"Checking image optimization..."},{pct:44,label:"Testing mobile responsiveness..."},{pct:49,label:"Inspecting security headers..."},{pct:54,label:"Auditing accessibility (ARIA, alt text)..."},{pct:59,label:"Reviewing Open Graph & social tags..."},{pct:64,label:"Analyzing content quality & readability..."},{pct:69,label:"Running keyword analysis..."},{pct:74,label:"Extracting keyword density..."},{pct:79,label:"Generating keyword recommendations..."},{pct:84,label:"Analyzing backlink profile..."},{pct:88,label:"Evaluating link structure..."},{pct:92,label:"Compiling priority recommendations..."},{pct:95,label:"Building your PDF report..."},{pct:98,label:"Finalizing results..."}],T=Te({mutationFn:async()=>{me(!0),H(0),K("Initializing audit..."),A(null);const M=fetch("/api/audit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:y})});let q=0;const he=8e3/O.length,Se=new Promise(Pe=>{const Me=()=>{q<O.length?(H(O[q].pct),K(O[q].label),q++,setTimeout(Me,he+Math.random()*200)):Pe()};setTimeout(Me,300)}),[be]=await Promise.all([M,Se]);if(H(100),K("Audit complete!"),!be.ok){const Pe=await be.json();throw new Error(Pe.message||"Failed to audit website")}return await new Promise(Pe=>setTimeout(Pe,600)),be.json()},onSuccess:M=>{me(!1),A(M),L(!0),setTimeout(()=>{document.getElementById("audit-results")?.scrollIntoView({behavior:"smooth"})},300)},onError:M=>{me(!1),H(0),V({title:"Audit failed",description:M.message,variant:"destructive"})}}),Y=async()=>{if(!(!C.trim()||!k)){z(!0);try{const M=await fetch("/api/audit/send-report",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:C,auditData:k})});if(!M.ok){const q=await M.json().catch(()=>({message:"Failed to send report"}));throw new Error(q.message||"Failed to send report")}V({title:"Report sent!",description:"Check your email for the full PDF report."}),L(!1)}catch(M){V({title:"Send failed",description:M.message||"Could not send the report. You can still download it below.",variant:"destructive"})}finally{z(!1)}}},Q=()=>{if(!k?.pdfBase64)return;const M=atob(k.pdfBase64),q=new Array(M.length);for(let Pe=0;Pe<M.length;Pe++)q[Pe]=M.charCodeAt(Pe);const oe=new Uint8Array(q),he=new Blob([oe],{type:"application/pdf"}),Se=URL.createObjectURL(he),be=document.createElement("a");be.href=Se,be.download="website-audit-report.pdf",be.click(),URL.revokeObjectURL(Se)},F=M=>{S(q=>({...q,[M]:!q[M]}))},te=M=>{const oe={search:sn,zap:Jn,smartphone:Qw,shield:wn,eye:jo,share2:U3,fileText:Vt}[M]||uy;return e.jsx(oe,{className:"w-4 h-4"})},B=M=>M==="pass"?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-medium bg-emerald-500/15 text-emerald-400 border border-emerald-500/20",children:[e.jsx(Ss,{className:"w-3 h-3"})," Pass"]}):M==="warning"?e.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-medium bg-yellow-500/15 text-yellow-400 border border-yellow-500/20",children:"! Warning"}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-medium bg-red-500/15 text-red-400 border border-red-500/20",children:[e.jsx(sr,{className:"w-3 h-3"})," Fail"]}),U=Te({mutationFn:async()=>{const M=await fetch("/api/public/conversations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:o,email:d,subject:h,message:b})});if(!M.ok)throw new Error("Failed to start conversation");return M.json()},onSuccess:M=>{a(!1),l(""),u(""),f(""),v(""),window.location.href=`/conversation/${M.accessToken}`},onError:()=>{V({title:"Something went wrong",description:"Please try again.",variant:"destructive"})}});return e.jsxs("div",{className:"min-h-screen bg-[#0a0a0f] text-white overflow-x-hidden",style:{backgroundImage:"radial-gradient(circle, rgba(255,255,255,0.12) 1px, transparent 1px)",backgroundSize:"24px 24px"},children:[e.jsxs("nav",{"aria-label":"Main navigation",className:"fixed top-0 left-0 right-0 z-50 border-b border-white/5",style:{backdropFilter:"blur(20px)",backgroundColor:"rgba(10,10,15,0.8)"},children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 h-14 sm:h-16 flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsx("img",{src:"/images/logo.png",alt:"AI Powered Sites",className:"w-8 h-8 rounded-md object-cover"}),e.jsx("span",{className:"text-base font-semibold tracking-tight whitespace-nowrap","data-testid":"text-brand-name",children:"AI Powered Sites"})]}),e.jsxs("div",{className:"hidden lg:flex items-center gap-4 xl:gap-6",children:[e.jsxs("a",{href:"#hero",className:"text-[13px] font-medium text-white hover:text-white/80 transition-colors whitespace-nowrap flex items-center gap-1.5",style:{fontFamily:"Poppins, sans-serif"},"data-testid":"link-nav-home",children:[e.jsx(xy,{className:"w-3.5 h-3.5"}),"Home"]}),e.jsxs("a",{href:"#services",className:"text-[13px] font-medium text-white hover:text-white/80 transition-colors whitespace-nowrap flex items-center gap-1.5",style:{fontFamily:"Poppins, sans-serif"},"data-testid":"link-nav-services",children:[e.jsx(Uc,{className:"w-3.5 h-3.5"}),"Services"]}),e.jsxs("a",{href:"#process",className:"text-[13px] font-medium text-white hover:text-white/80 transition-colors whitespace-nowrap flex items-center gap-1.5",style:{fontFamily:"Poppins, sans-serif"},"data-testid":"link-nav-process",children:[e.jsx(Jn,{className:"w-3.5 h-3.5"}),"Process"]}),e.jsxs("a",{href:"#features",className:"text-[13px] font-medium text-white hover:text-white/80 transition-colors whitespace-nowrap flex items-center gap-1.5",style:{fontFamily:"Poppins, sans-serif"},"data-testid":"link-nav-features",children:[e.jsx(wn,{className:"w-3.5 h-3.5"}),"Why Us"]}),e.jsxs("a",{href:"#testimonials",className:"text-[13px] font-medium text-white hover:text-white/80 transition-colors whitespace-nowrap flex items-center gap-1.5",style:{fontFamily:"Poppins, sans-serif"},"data-testid":"link-nav-testimonials",children:[e.jsx(ou,{className:"w-3.5 h-3.5"}),"Reviews"]}),e.jsxs("a",{href:"#pricing",className:"text-[13px] font-medium text-white hover:text-white/80 transition-colors whitespace-nowrap flex items-center gap-1.5",style:{fontFamily:"Poppins, sans-serif"},"data-testid":"link-nav-pricing",children:[e.jsx(Fn,{className:"w-3.5 h-3.5"}),"Pricing"]}),e.jsxs("a",{href:"#api",className:"text-[13px] font-medium text-white hover:text-white/80 transition-colors whitespace-nowrap flex items-center gap-1.5",style:{fontFamily:"Poppins, sans-serif"},"data-testid":"link-nav-api",children:[e.jsx(wy,{className:"w-3.5 h-3.5"}),"API"]}),e.jsx(Mn,{href:"/questions",children:e.jsxs("span",{className:"text-[13px] font-medium text-white hover:text-white/80 transition-colors whitespace-nowrap flex items-center gap-1.5 cursor-pointer",style:{fontFamily:"Poppins, sans-serif"},"data-testid":"link-nav-qa",children:[e.jsx(Mt,{className:"w-3.5 h-3.5"}),"Q&A"]})})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsxs($,{onClick:()=>a(!0),size:"sm",className:"hidden sm:inline-flex bg-gradient-to-r from-blue-500 to-violet-600 border-0 text-white font-medium text-[13px]","data-testid":"button-nav-message",children:[e.jsx(Mt,{className:"w-3.5 h-3.5 mr-1"}),"Message Us"]}),!se&&I&&e.jsxs("div",{className:"hidden sm:flex items-center gap-1.5",children:[e.jsx(Mn,{href:"/admin",children:e.jsxs($,{variant:"outline",size:"sm",className:"border-white/20 text-white bg-white/5 text-[13px]","data-testid":"button-nav-dashboard",children:[e.jsx(Wu,{className:"w-3.5 h-3.5 mr-1"}),"Dashboard"]})}),e.jsx("a",{href:"/api/logout",children:e.jsx($,{variant:"ghost",size:"icon",className:"text-white/60","data-testid":"button-nav-logout",children:e.jsx(Kw,{className:"w-4 h-4"})})})]}),e.jsx($,{variant:"ghost",size:"icon",className:"lg:hidden text-white/70",onClick:()=>t(!s),"data-testid":"button-mobile-menu",children:s?e.jsx(sr,{className:"w-5 h-5"}):e.jsx(_3,{className:"w-5 h-5"})})]})]}),s&&e.jsxs("div",{className:"lg:hidden border-t border-white/5 px-4 py-4 space-y-1",style:{backgroundColor:"rgba(10,10,15,0.95)"},children:[e.jsxs("a",{href:"#hero",onClick:()=>t(!1),className:"flex items-center gap-2.5 px-3 py-2.5 rounded-md text-sm font-medium text-white/70 active:bg-white/5","data-testid":"link-mobile-home",children:[e.jsx(xy,{className:"w-4 h-4"}),"Home"]}),e.jsxs("a",{href:"#services",onClick:()=>t(!1),className:"flex items-center gap-2.5 px-3 py-2.5 rounded-md text-sm font-medium text-white/70 active:bg-white/5","data-testid":"link-mobile-services",children:[e.jsx(Uc,{className:"w-4 h-4"}),"Services"]}),e.jsxs("a",{href:"#process",onClick:()=>t(!1),className:"flex items-center gap-2.5 px-3 py-2.5 rounded-md text-sm font-medium text-white/70 active:bg-white/5","data-testid":"link-mobile-process",children:[e.jsx(Jn,{className:"w-4 h-4"}),"Process"]}),e.jsxs("a",{href:"#features",onClick:()=>t(!1),className:"flex items-center gap-2.5 px-3 py-2.5 rounded-md text-sm font-medium text-white/70 active:bg-white/5","data-testid":"link-mobile-features",children:[e.jsx(wn,{className:"w-4 h-4"}),"Why Us"]}),e.jsxs("a",{href:"#testimonials",onClick:()=>t(!1),className:"flex items-center gap-2.5 px-3 py-2.5 rounded-md text-sm font-medium text-white/70 active:bg-white/5","data-testid":"link-mobile-testimonials",children:[e.jsx(ou,{className:"w-4 h-4"}),"Reviews"]}),e.jsxs("a",{href:"#pricing",onClick:()=>t(!1),className:"flex items-center gap-2.5 px-3 py-2.5 rounded-md text-sm font-medium text-white/70 active:bg-white/5","data-testid":"link-mobile-pricing",children:[e.jsx(Fn,{className:"w-4 h-4"}),"Pricing"]}),e.jsxs("a",{href:"#api",onClick:()=>t(!1),className:"flex items-center gap-2.5 px-3 py-2.5 rounded-md text-sm font-medium text-white/70 active:bg-white/5","data-testid":"link-mobile-api",children:[e.jsx(wy,{className:"w-4 h-4"}),"API"]}),e.jsx(Mn,{href:"/questions",children:e.jsxs("span",{onClick:()=>t(!1),className:"flex items-center gap-2.5 px-3 py-2.5 rounded-md text-sm font-medium text-white/70 active:bg-white/5 cursor-pointer","data-testid":"link-mobile-qa",children:[e.jsx(Mt,{className:"w-4 h-4"}),"Q&A"]})}),e.jsxs("div",{className:"pt-3 mt-2 border-t border-white/5 space-y-2",children:[e.jsxs($,{onClick:()=>{a(!0),t(!1)},className:"w-full bg-gradient-to-r from-blue-500 to-violet-600 border-0 text-white font-medium","data-testid":"button-mobile-message",children:[e.jsx(Mt,{className:"w-4 h-4 mr-1.5"}),"Message Us"]}),!se&&I&&e.jsx(e.Fragment,{children:e.jsx(Mn,{href:"/admin",children:e.jsxs($,{variant:"outline",className:"w-full border-white/20 text-white bg-white/5","data-testid":"button-mobile-dashboard",children:[e.jsx(Wu,{className:"w-4 h-4 mr-1.5"}),"Dashboard"]})})})]})]})]}),e.jsxs("main",{children:[e.jsxs("section",{id:"hero",className:"relative pt-14 sm:pt-16 min-h-[100svh] flex items-center overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("img",{src:uI,alt:"AI-powered web design and development solutions by AI Powered Sites",className:"w-full h-full object-cover animate-hero-zoom","data-testid":"img-hero"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#0a0a0f]/70 via-[#0a0a0f]/60 to-[#0a0a0f]"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#0a0a0f]/80 via-transparent to-[#0a0a0f]/40"}),e.jsxs("div",{className:"absolute inset-0 opacity-30",children:[e.jsx("div",{className:"absolute top-1/4 -left-1/4 w-[600px] h-[600px] rounded-full bg-blue-500/20 blur-[120px] animate-hero-glow-1"}),e.jsx("div",{className:"absolute bottom-1/4 -right-1/4 w-[500px] h-[500px] rounded-full bg-violet-500/20 blur-[120px] animate-hero-glow-2"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[400px] h-[400px] rounded-full bg-purple-500/15 blur-[100px] animate-hero-glow-3"})]})]}),e.jsx("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 py-16 sm:py-24 md:py-32 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-3xl text-center",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 sm:px-4 py-1.5 rounded-full bg-white/5 border border-white/10 mb-6 sm:mb-8","data-testid":"badge-hero-tag",children:[e.jsx(zc,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-xs sm:text-sm text-white/70",children:"AI-Powered Solutions"})]}),e.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-6xl lg:text-7xl font-bold leading-tight tracking-tight mb-4 sm:mb-6","data-testid":"text-hero-title",children:["AI Web Design Agency"," ",e.jsx("span",{className:"bg-gradient-to-r from-blue-400 via-violet-400 to-purple-400 bg-clip-text text-transparent",children:"Built For Your Business."})]}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl font-medium text-white/70 leading-relaxed mb-10 sm:mb-12 max-w-2xl mx-auto","data-testid":"text-hero-description",children:"Custom websites, apps, and portals  powered by AI, built for growth. No templates. No compromises."}),e.jsxs("div",{className:"max-w-2xl mx-auto mb-8","data-testid":"audit-form",children:[e.jsx("p",{className:"text-sm font-medium text-white/70 mb-4 max-w-md mx-auto leading-relaxed",children:"Free instant website audit  SEO, speed, mobile, security & more with a detailed PDF report."}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute -inset-[1px] rounded-2xl bg-gradient-to-r from-blue-500/20 via-violet-500/15 to-purple-500/20 opacity-0 group-hover:opacity-100 transition-all duration-700"}),e.jsx("div",{className:"absolute -inset-[1px] rounded-2xl bg-gradient-to-b from-white/[0.08] to-white/[0.02]"}),e.jsx("div",{className:"relative bg-[#0c1121]/95 backdrop-blur-xl rounded-2xl border border-white/[0.06] shadow-[0_8px_40px_rgba(0,0,0,0.5),0_0_0_1px_rgba(255,255,255,0.03),inset_0_1px_0_rgba(255,255,255,0.04)]",children:e.jsxs("div",{className:"flex items-center h-[56px]",children:[e.jsxs("div",{className:"flex items-center gap-3 pl-5 pr-3 flex-1 min-w-0",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-blue-500/15 to-violet-500/10 border border-white/[0.06] flex items-center justify-center shrink-0",children:e.jsx(jn,{className:"w-4 h-4 text-blue-400"})}),e.jsx("input",{placeholder:"example.com",value:y,onChange:M=>N(M.target.value),onKeyDown:M=>{M.key==="Enter"&&y.trim()&&!T.isPending&&T.mutate()},className:"w-full bg-transparent text-white text-[15px] font-light tracking-wide placeholder:text-white/20 outline-none min-w-0","data-testid":"input-audit-url"})]}),e.jsx("button",{onClick:()=>T.mutate(),disabled:!y.trim()||T.isPending,className:"flex items-center justify-center gap-2 px-7 h-[40px] mx-2 bg-gradient-to-r from-blue-500 to-violet-500 text-white text-sm font-semibold rounded-xl transition-all duration-300 shrink-0 hover:from-blue-400 hover:to-violet-400 hover:shadow-[0_0_24px_rgba(99,102,241,0.4)] disabled:opacity-40 disabled:cursor-not-allowed","data-testid":"button-audit-submit",children:T.isPending?e.jsx(Qe,{className:"w-4 h-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(sn,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Audit"}),e.jsx(ml,{className:"w-3.5 h-3.5 sm:hidden"})]})})]})})]}),!ee&&e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-x-5 gap-y-1.5 mt-4",children:[e.jsxs("span",{className:"flex items-center gap-1.5 text-[11px] font-medium text-white/70",children:[e.jsx(Ss,{className:"w-3 h-3 text-emerald-400"}),"SEO & Keywords"]}),e.jsxs("span",{className:"flex items-center gap-1.5 text-[11px] font-medium text-white/70",children:[e.jsx(Ss,{className:"w-3 h-3 text-emerald-400"}),"Speed & Performance"]}),e.jsxs("span",{className:"flex items-center gap-1.5 text-[11px] font-medium text-white/70",children:[e.jsx(Ss,{className:"w-3 h-3 text-emerald-400"}),"Mobile & Security"]}),e.jsxs("span",{className:"flex items-center gap-1.5 text-[11px] font-medium text-white/70",children:[e.jsx(Ss,{className:"w-3 h-3 text-emerald-400"}),"Free PDF Report"]})]})]}),ee&&e.jsx("div",{className:"max-w-2xl mx-auto mb-8 mt-4","data-testid":"audit-progress",children:e.jsx("div",{className:"relative p-[1px] rounded-xl bg-gradient-to-r from-blue-500/30 via-violet-500/30 to-blue-500/30",children:e.jsxs("div",{className:"bg-[#0a0f1e] rounded-xl px-6 py-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 animate-pulse"}),e.jsx("span",{className:"text-sm text-white/70 font-medium",children:re})]}),e.jsxs("span",{className:"text-sm font-bold text-blue-400",children:[R,"%"]})]}),e.jsx("div",{className:"w-full h-2 rounded-full bg-white/[0.06] overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-blue-500 via-violet-500 to-blue-400 transition-all duration-500 ease-out",style:{width:`${R}%`}})}),e.jsxs("div",{className:"mt-3 flex items-center justify-center gap-4 text-[11px] text-white/30",children:[e.jsx("span",{children:"7 categories"}),e.jsx("span",{className:"w-1 h-1 rounded-full bg-white/20"}),e.jsx("span",{children:"50+ checks"}),e.jsx("span",{className:"w-1 h-1 rounded-full bg-white/20"}),e.jsx("span",{children:"Full PDF report"})]})]})})}),e.jsx("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-center gap-3 sm:gap-4",children:e.jsxs($,{size:"lg",onClick:()=>a(!0),className:"bg-white/5 border border-white/10 text-white text-sm font-medium rounded-full w-full sm:w-[200px] h-[44px]","data-testid":"button-hero-message",children:[e.jsx(Mt,{className:"w-4 h-4 mr-2"}),"Send Us a Message"]})})]})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-[#0a0a0f] to-transparent"})]}),k&&e.jsx("section",{id:"audit-results",className:"relative py-12 sm:py-20 border-t border-white/5",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6",children:[e.jsxs("div",{className:"text-center mb-8 sm:mb-12",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-white/5 border border-white/10 mb-4",children:[e.jsx(uy,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-sm text-white/70",children:"Audit Results"})]}),e.jsxs("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold tracking-tight mb-3","data-testid":"text-audit-results-title",children:["Your Website"," ",e.jsx("span",{className:"bg-gradient-to-r from-blue-400 to-violet-400 bg-clip-text text-transparent",children:"Score"})]}),e.jsx("p",{className:"text-white/40 text-sm max-w-lg mx-auto truncate",children:k.url})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8",children:[e.jsxs("div",{className:"sm:col-span-1 flex flex-col items-center justify-center p-6 rounded-xl border border-white/5 bg-white/[0.02]",children:[e.jsx("div",{className:`w-20 h-20 rounded-xl flex items-center justify-center text-3xl font-bold text-white mb-2 ${k.overallScore>=75?"bg-emerald-500/20 border border-emerald-500/30":k.overallScore>=50?"bg-yellow-500/20 border border-yellow-500/30":"bg-red-500/20 border border-red-500/30"}`,"data-testid":"text-audit-grade",children:k.grade}),e.jsxs("div",{className:"text-2xl font-bold text-white","data-testid":"text-audit-score",children:[k.overallScore,e.jsx("span",{className:"text-sm text-white/40",children:"/100"})]}),k.gradeLabel&&e.jsx("div",{className:`text-xs font-medium mt-1 ${k.overallScore>=75?"text-emerald-400":k.overallScore>=50?"text-yellow-400":"text-red-400"}`,children:k.gradeLabel})]}),e.jsxs("div",{className:"sm:col-span-2 p-5 rounded-xl border border-white/5 bg-white/[0.02]",children:[e.jsx("p",{className:"text-sm text-white/60 leading-relaxed mb-3","data-testid":"text-audit-summary",children:k.summary}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.jsxs($,{onClick:Q,size:"sm",className:"bg-gradient-to-r from-blue-500 to-violet-600 border-0 text-white text-xs","data-testid":"button-download-pdf",children:[e.jsx(hy,{className:"w-3.5 h-3.5 mr-1.5"}),"Download PDF Report"]}),e.jsxs($,{onClick:()=>L(!0),size:"sm",variant:"outline",className:"border-white/15 text-white/80 bg-white/5 text-xs","data-testid":"button-email-report",children:[e.jsx(Fs,{className:"w-3.5 h-3.5 mr-1.5"}),"Email Report"]})]})]})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-7 gap-2 mb-8",children:k.categories.map(M=>{const q=Math.round(M.score/M.maxScore*100);return e.jsxs("button",{onClick:()=>F(M.name),className:`p-3 rounded-lg border text-center transition-all ${E[M.name]?"border-blue-500/40 bg-blue-500/10":"border-white/5 bg-white/[0.02] hover:bg-white/[0.04]"}`,"data-testid":`button-audit-category-${M.name.toLowerCase().replace(/\s/g,"-")}`,children:[e.jsxs("div",{className:`text-lg font-bold mb-0.5 ${q>=75?"text-emerald-400":q>=50?"text-yellow-400":"text-red-400"}`,children:[q,"%"]}),e.jsx("div",{className:"text-[10px] text-white/50 leading-tight",children:M.name})]},M.name)})}),e.jsx("div",{className:"space-y-3",children:k.categories.map(M=>{const q=Math.round(M.score/M.maxScore*100),oe=E[M.name]!==!1;return e.jsxs("div",{className:"rounded-xl border border-white/5 bg-white/[0.02] overflow-hidden","data-testid":`audit-category-${M.name.toLowerCase().replace(/\s/g,"-")}`,children:[e.jsxs("button",{onClick:()=>F(M.name),className:"w-full flex items-center justify-between p-4 sm:p-5 hover:bg-white/[0.02] transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${q>=75?"bg-emerald-500/15 text-emerald-400":q>=50?"bg-yellow-500/15 text-yellow-400":"bg-red-500/15 text-red-400"}`,children:te(M.icon)}),e.jsx("span",{className:"font-medium text-sm text-white/90",children:M.name})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 sm:w-32 h-1.5 rounded-full bg-white/5 overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${q>=75?"bg-emerald-400":q>=50?"bg-yellow-400":"bg-red-400"}`,style:{width:`${q}%`}})}),e.jsxs("span",{className:`text-xs font-semibold min-w-[32px] text-right ${q>=75?"text-emerald-400":q>=50?"text-yellow-400":"text-red-400"}`,children:[q,"%"]})]}),oe?e.jsx(wo,{className:"w-4 h-4 text-white/30"}):e.jsx(ua,{className:"w-4 h-4 text-white/30"})]})]}),oe&&e.jsx("div",{className:"px-4 sm:px-5 pb-4 sm:pb-5 space-y-2.5 border-t border-white/5 pt-3",children:M.items.map((he,Se)=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-2 sm:gap-3 p-3 rounded-lg bg-white/[0.02]",children:[e.jsx("div",{className:"shrink-0",children:B(he.status)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-xs font-medium text-white/80 mb-0.5",children:he.label}),e.jsx("div",{className:"text-[11px] text-white/40 break-words",children:he.detail}),he.recommendation&&he.status!=="pass"&&e.jsxs("div",{className:"text-[11px] text-blue-400/70 mt-1 flex items-start gap-1",children:[e.jsx(ml,{className:"w-3 h-3 mt-0.5 shrink-0"}),e.jsx("span",{children:he.recommendation})]})]})]},Se))})]},M.name)})}),e.jsxs("div",{className:"mt-8 relative overflow-hidden rounded-2xl border border-blue-500/20","data-testid":"audit-cta-banner",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-600/20 via-violet-600/15 to-blue-600/10"}),e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 to-violet-500"}),e.jsxs("div",{className:"relative p-6 sm:p-8 text-center",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-blue-500/20 border border-blue-500/30 mb-4",children:[e.jsx(Si,{className:"w-3.5 h-3.5 text-blue-300"}),e.jsx("span",{className:"text-xs font-semibold text-blue-300 tracking-wide uppercase",children:"Free Consultation"})]}),e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-2",children:"Get Your Free Website Strategy Session"}),e.jsx("p",{className:"text-white/50 text-sm sm:text-base max-w-xl mx-auto mb-5 leading-relaxed",children:k.overallScore<60?"Your site is losing visitors and revenue. We'll show you exactly how to fix these issues and start growing your business online  at no cost.":k.overallScore<80?"Your site has real potential. Let us show you the quick wins that could boost your traffic by 50% or more  completely free.":"Your site is performing well! Let's fine-tune it to unlock even more traffic and conversions  on us."}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-3 mb-5",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-emerald-400",children:[e.jsx(Ss,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"100% free, no strings attached"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-emerald-400",children:[e.jsx(Ss,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"Custom growth plan for your business"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-emerald-400",children:[e.jsx(Ss,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"See results within days"})]})]}),e.jsxs($,{onClick:()=>a(!0),size:"lg",className:"bg-gradient-to-r from-blue-500 to-violet-600 border-0 text-white font-semibold px-8 shadow-[0_0_24px_rgba(99,102,241,0.4)] hover:shadow-[0_0_32px_rgba(99,102,241,0.6)] hover:brightness-110 transition-all","data-testid":"button-audit-free-consult",children:[e.jsx(Ma,{className:"w-4 h-4 mr-2"}),"Claim Your Free Consultation"]}),e.jsx("p",{className:"text-[11px] text-white/25 mt-3",children:"Limited availability  Respond within 24 hours"})]})]}),k.topRecommendations?.length>0&&e.jsxs("div",{className:"mt-6 p-5 sm:p-6 rounded-xl border border-white/5 bg-white/[0.02]",children:[e.jsxs("h3",{className:"text-sm font-semibold text-white/90 mb-4 flex items-center gap-2",children:[e.jsx(Ma,{className:"w-4 h-4 text-blue-400"}),"Top Recommendations"]}),e.jsx("div",{className:"space-y-2.5",children:k.topRecommendations.slice(0,6).map((M,q)=>e.jsxs("div",{className:"flex items-start gap-2.5 text-xs text-white/60 leading-relaxed",children:[e.jsx("span",{className:"shrink-0 w-5 h-5 rounded-full bg-blue-500/15 text-blue-400 flex items-center justify-center text-[10px] font-bold mt-0.5",children:q+1}),e.jsx("span",{children:M})]},q))})]})]})}),e.jsx("section",{id:"stats",className:"relative py-12 sm:py-20 border-y border-white/5",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 sm:gap-6 md:gap-8",children:NI.map(M=>e.jsxs("div",{className:"text-center","data-testid":`stat-${M.label.toLowerCase().replace(/\s/g,"-")}`,children:[e.jsxs("div",{className:"flex items-center justify-center gap-1.5 mb-1",children:[e.jsx("span",{className:"text-2xl sm:text-3xl md:text-4xl font-bold bg-gradient-to-r from-blue-400 to-violet-400 bg-clip-text text-transparent",children:M.value}),M.icon&&e.jsx(Ia,{className:"w-5 h-5 text-yellow-400 fill-yellow-400"})]}),e.jsx("span",{className:"text-sm text-white/40",children:M.label})]},M.label))})})}),e.jsx("section",{id:"services",className:"relative py-16 sm:py-24 md:py-32",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:[e.jsxs("div",{className:"text-center mb-10 sm:mb-16",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-white/5 border border-white/10 mb-4 sm:mb-6",children:[e.jsx(Si,{className:"w-4 h-4 text-violet-400"}),e.jsx("span",{className:"text-sm text-white/70",children:"What We Build"})]}),e.jsxs("h2",{className:"text-2xl sm:text-3xl md:text-5xl font-bold tracking-tight mb-3 sm:mb-4","data-testid":"text-services-title",children:["Custom Web Development"," ",e.jsx("span",{className:"bg-gradient-to-r from-blue-400 to-violet-400 bg-clip-text text-transparent",children:"Services"})]}),e.jsx("p",{className:"text-white/50 text-sm sm:text-lg max-w-2xl mx-auto",children:"From concept to launch, our AI-driven web design delivers responsive, mobile-first solutions that drive results. Every project is crafted with AI precision and human creativity."})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:wI.map(M=>e.jsxs("div",{className:"group relative rounded-md overflow-hidden border border-white/5 bg-white/[0.02] hover:border-white/10 transition-colors","data-testid":`card-service-${M.title.toLowerCase().replace(/\s/g,"-")}`,children:[e.jsxs("div",{className:"relative h-48 overflow-hidden",children:[e.jsx("img",{src:M.image,alt:`${M.title}  AI Powered Sites service`,loading:"lazy",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#0a0a0f] via-[#0a0a0f]/40 to-transparent"}),e.jsxs("div",{className:"absolute bottom-4 left-4 flex items-center gap-2.5",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-md bg-gradient-to-br from-blue-500/20 to-violet-600/20 border border-white/10",style:{backdropFilter:"blur(8px)"},children:e.jsx(M.icon,{className:"w-5 h-5 text-blue-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:M.title})]})]}),e.jsx("div",{className:"p-5",children:e.jsx("p",{className:"text-white/50 text-sm leading-relaxed",children:M.description})})]},M.title))})]})}),e.jsx("section",{id:"process",className:"relative py-16 sm:py-24 md:py-32 border-t border-white/5",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:[e.jsxs("div",{className:"text-center mb-10 sm:mb-16",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-white/5 border border-white/10 mb-4 sm:mb-6",children:[e.jsx(Jn,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-sm text-white/70",children:"Our Process"})]}),e.jsxs("h2",{className:"text-2xl sm:text-3xl md:text-5xl font-bold tracking-tight mb-3 sm:mb-4","data-testid":"text-process-title",children:["From Idea to"," ",e.jsx("span",{className:"bg-gradient-to-r from-blue-400 to-violet-400 bg-clip-text text-transparent",children:"Launch"})]}),e.jsx("p",{className:"text-white/50 text-sm sm:text-lg max-w-2xl mx-auto",children:"A simple, transparent process that keeps you in control every step of the way."})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 sm:gap-6",children:gb.map((M,q)=>e.jsxs("div",{className:"relative text-center p-4 sm:p-6 rounded-md border border-white/5 bg-white/[0.02]","data-testid":`card-process-${M.step}`,children:[q<gb.length-1&&e.jsx("div",{className:"hidden md:block absolute top-1/2 -right-3 z-10",children:e.jsx(ml,{className:"w-6 h-6 text-white/10"})}),e.jsx("div",{className:"flex items-center justify-center w-11 h-11 sm:w-14 sm:h-14 rounded-md bg-gradient-to-br from-blue-500/10 to-violet-600/10 border border-white/10 mx-auto mb-3 sm:mb-4",children:e.jsx(M.icon,{className:"w-5 h-5 sm:w-7 sm:h-7 text-blue-400"})}),e.jsxs("div",{className:"text-[10px] sm:text-xs font-bold uppercase tracking-widest text-violet-400 mb-1.5 sm:mb-2",children:["Step ",M.step]}),e.jsx("h3",{className:"text-sm sm:text-lg font-semibold mb-1.5 sm:mb-2",children:M.title}),e.jsx("p",{className:"text-white/50 text-xs sm:text-sm leading-relaxed",children:M.description})]},M.title))})]})}),e.jsxs("section",{id:"features",className:"relative py-16 sm:py-24 md:py-32 border-t border-white/5",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-blue-500/[0.02] to-violet-500/[0.02]"}),e.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6",children:[e.jsxs("div",{className:"text-center mb-10 sm:mb-16",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-white/5 border border-white/10 mb-4 sm:mb-6",children:[e.jsx(Ss,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-sm text-white/70",children:"Why Choose Us"})]}),e.jsxs("h2",{className:"text-2xl sm:text-3xl md:text-5xl font-bold tracking-tight mb-3 sm:mb-4","data-testid":"text-features-title",children:["Why Hire Our"," ",e.jsx("span",{className:"bg-gradient-to-r from-blue-400 to-violet-400 bg-clip-text text-transparent",children:"AI Web Design Agency"})]}),e.jsx("p",{className:"text-white/50 text-sm sm:text-lg max-w-2xl mx-auto",children:"We don't just build things. We deliver affordable custom web development with AI-first engineering that evolves with your business."})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:jI.map(M=>e.jsxs("div",{className:"flex gap-4 sm:gap-5 p-4 sm:p-6 rounded-md border border-white/5 bg-white/[0.02] hover:border-white/10 transition-colors","data-testid":`card-feature-${M.title.toLowerCase().replace(/\s/g,"-")}`,children:[e.jsx("div",{className:"flex-shrink-0 flex items-center justify-center w-12 h-12 rounded-md bg-gradient-to-br from-blue-500/10 to-violet-600/10 border border-white/10",children:e.jsx(M.icon,{className:"w-6 h-6 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-1.5",children:M.title}),e.jsx("p",{className:"text-white/50 text-sm leading-relaxed",children:M.description})]})]},M.title))})]})]}),e.jsx("section",{id:"testimonials",className:"relative py-16 sm:py-24 md:py-32 border-t border-white/5",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:[e.jsxs("div",{className:"text-center mb-10 sm:mb-16",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-white/5 border border-white/10 mb-4 sm:mb-6",children:[e.jsx(ou,{className:"w-4 h-4 text-violet-400"}),e.jsx("span",{className:"text-sm text-white/70",children:"Client Love"})]}),e.jsxs("h2",{className:"text-2xl sm:text-3xl md:text-5xl font-bold tracking-tight mb-3 sm:mb-4","data-testid":"text-testimonials-title",children:["Trusted by"," ",e.jsx("span",{className:"bg-gradient-to-r from-blue-400 to-violet-400 bg-clip-text text-transparent",children:"Growing Businesses"})]}),e.jsx("p",{className:"text-white/50 text-sm sm:text-lg max-w-2xl mx-auto",children:"Don't just take our word for it. Here's what our clients have to say."})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 sm:gap-6",children:kI.map(M=>e.jsxs("div",{className:"relative p-4 sm:p-6 rounded-md border border-white/5 bg-white/[0.02]","data-testid":`card-testimonial-${M.name.toLowerCase().replace(/\s/g,"-")}`,children:[e.jsx(ou,{className:"w-8 h-8 text-violet-400/20 mb-4"}),e.jsx("p",{className:"text-white/60 text-sm leading-relaxed mb-6",children:M.quote}),e.jsx("div",{className:"flex items-center gap-1 mb-3",children:Array.from({length:M.rating}).map((q,oe)=>e.jsx(Ia,{className:"w-3.5 h-3.5 text-yellow-400 fill-yellow-400"},oe))}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold",children:M.name}),e.jsx("p",{className:"text-xs text-white/40",children:M.role})]})]},M.name))})]})}),e.jsxs("section",{id:"pricing",className:"relative py-16 sm:py-28 md:py-36 border-t border-white/5 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-emerald-500/[0.02] via-transparent to-blue-500/[0.03]"}),e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-[800px] h-[600px] rounded-full bg-emerald-500/[0.04] blur-[120px]"}),e.jsx("div",{className:"absolute bottom-0 left-1/4 w-[500px] h-[500px] rounded-full bg-blue-500/[0.05] blur-[100px]"}),e.jsx("div",{className:"absolute top-1/3 right-0 w-[400px] h-[400px] rounded-full bg-violet-500/[0.04] blur-[100px]"})]}),e.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6",children:[e.jsxs("div",{className:"text-center mb-14 sm:mb-20",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-5 py-2 rounded-full bg-emerald-500/[0.08] border border-emerald-500/20 mb-6 sm:mb-8",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-400 animate-pulse"}),e.jsx("span",{className:"text-sm font-medium text-emerald-300/90",children:"Simple, Honest Pricing"})]}),e.jsxs("h2",{className:"text-[1.75rem] leading-[1.2] sm:text-4xl md:text-6xl font-bold tracking-tight mb-4 sm:mb-6","data-testid":"text-pricing-title",children:["Pay As You Go."," ",e.jsx("span",{className:"bg-gradient-to-r from-emerald-400 via-teal-400 to-cyan-400 bg-clip-text text-transparent",children:"Only Pay for Results."})]}),e.jsxs("p",{className:"text-white/50 text-sm sm:text-base md:text-xl max-w-2xl mx-auto leading-relaxed px-2 sm:px-0",children:["No subscriptions. No retainers. No surprise fees.",e.jsx("br",{className:"hidden sm:block"}),"Every dollar goes toward deliverables you can see."]})]}),e.jsx("div",{className:"max-w-6xl mx-auto mb-16 sm:mb-20",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 sm:gap-10 items-stretch",children:[e.jsxs("div",{className:"relative space-y-4 sm:space-y-5","data-testid":"card-pricing-comparison",children:[e.jsxs("div",{className:"relative p-5 sm:p-8 rounded-md border border-red-500/10 bg-red-500/[0.02] opacity-50 group",children:[e.jsxs("div",{className:"flex items-start gap-3.5 sm:gap-5",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-md bg-red-500/10 border border-red-500/15 shrink-0",children:e.jsx(W3,{className:"w-5 h-5 sm:w-6 sm:h-6 text-red-400/80"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm sm:text-base font-semibold text-red-300/80 mb-1.5 sm:mb-2",children:"The Old Way"}),e.jsx("p",{className:"text-sm text-white/35 leading-relaxed",children:"Pay $3,000-$10,000+ upfront. Lock into retainers. Months of waiting. Hope it works out."}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:["Hidden fees","Long contracts","Slow delivery"].map(M=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-full bg-red-500/[0.06] border border-red-500/10 text-[11px] text-red-400/60",children:[e.jsx(sr,{className:"w-2.5 h-2.5"}),M]},M))})]})]}),e.jsx("div",{className:"absolute top-1/2 left-0 right-0 -translate-y-1/2 rotate-[-3deg] flex justify-center",children:e.jsx("div",{className:"w-[90%] h-[2px] bg-gradient-to-r from-transparent via-red-400/30 to-transparent"})})]}),e.jsxs("div",{className:"relative p-5 sm:p-8 rounded-md border border-emerald-500/25 bg-gradient-to-br from-emerald-500/[0.08] via-teal-500/[0.04] to-cyan-500/[0.06] shadow-lg shadow-emerald-500/[0.05]",children:[e.jsx("div",{className:"absolute -top-3.5 left-5 sm:left-6",children:e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 sm:px-4 py-1.5 rounded-full bg-emerald-500/20 border border-emerald-500/25 text-[11px] sm:text-xs font-semibold text-emerald-300 shadow-lg shadow-emerald-500/10",children:[e.jsx(Ss,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5"})," Our Approach"]})}),e.jsxs("div",{className:"flex items-start gap-3.5 sm:gap-5 mt-3",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-md bg-gradient-to-br from-emerald-500/20 to-teal-500/20 border border-emerald-500/20 shrink-0",children:e.jsx(Hw,{className:"w-5 h-5 sm:w-6 sm:h-6 text-emerald-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm sm:text-base font-semibold text-emerald-300 mb-1.5 sm:mb-2",children:"Pay As You Go"}),e.jsx("p",{className:"text-sm text-white/55 leading-relaxed",children:"You're billed per deliverable  per page designed, per feature built, per revision made. See every line item before you approve."}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:["Transparent","No lock-in","Scale anytime"].map(M=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-full bg-emerald-500/[0.08] border border-emerald-500/15 text-[11px] text-emerald-400/80",children:[e.jsx(Ss,{className:"w-2.5 h-2.5"}),M]},M))})]})]})]})]}),e.jsx("div",{className:"space-y-4",children:[{icon:La,title:"Billed Per Deliverable",desc:"Every page, feature, and asset is itemized. You see exactly what you're paying for  no bundled mystery charges.",color:"from-emerald-500/15 to-teal-500/15",iconColor:"text-emerald-400",border:"hover:border-emerald-500/20"},{icon:wn,title:"No Contracts or Commitments",desc:"Start a project, pause it, or wrap it up. There's no minimum spend, no lock-in period, no cancellation fees.",color:"from-blue-500/15 to-cyan-500/15",iconColor:"text-blue-400",border:"hover:border-blue-500/20"},{icon:Gt,title:"Flexible Payment Plans",desc:"Bigger project? Split it into comfortable installments. We'll set up a plan that matches your cash flow.",color:"from-violet-500/15 to-purple-500/15",iconColor:"text-violet-400",border:"hover:border-violet-500/20"},{icon:ej,title:"Full Transparency Portal",desc:"Track every deliverable, view invoices, approve work, and manage payments  all from your own dashboard.",color:"from-amber-500/15 to-orange-500/15",iconColor:"text-amber-400",border:"hover:border-amber-500/20"}].map(M=>e.jsxs("div",{className:`group flex items-start gap-4 p-5 rounded-md bg-white/[0.02] border border-white/[0.06] ${M.border} transition-all duration-300 hover:bg-white/[0.04]`,"data-testid":`card-benefit-${M.title.toLowerCase().replace(/\s+/g,"-")}`,children:[e.jsx("div",{className:`flex items-center justify-center w-11 h-11 rounded-md bg-gradient-to-br ${M.color} border border-white/[0.06] shrink-0 group-hover:scale-105 transition-transform duration-300`,children:e.jsx(M.icon,{className:`w-5 h-5 ${M.iconColor}`})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold mb-1 group-hover:text-white transition-colors",children:M.title}),e.jsx("p",{className:"text-xs text-white/40 leading-relaxed",children:M.desc})]})]},M.title))})]})}),e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"relative p-6 sm:p-8 md:p-12 rounded-md border border-violet-500/20 bg-gradient-to-br from-violet-500/[0.06] via-blue-500/[0.03] to-purple-500/[0.06] text-center overflow-hidden","data-testid":"card-pricing-cta",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_top,_rgba(139,92,246,0.08)_0%,transparent_60%)]"}),e.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-[300px] h-[1px] bg-gradient-to-r from-transparent via-violet-400/40 to-transparent"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex items-center justify-center w-14 h-14 sm:w-16 sm:h-16 rounded-full bg-gradient-to-br from-blue-500/20 to-violet-500/20 border border-white/10 mx-auto mb-5 sm:mb-6 shadow-lg shadow-violet-500/10",children:e.jsx(Mt,{className:"w-6 h-6 sm:w-7 sm:h-7 text-violet-400"})}),e.jsx("h3",{className:"text-xl sm:text-2xl md:text-3xl font-bold mb-3 sm:mb-4",children:"Ready to Get Started?"}),e.jsx("p",{className:"text-white/50 text-xs sm:text-sm md:text-base max-w-lg mx-auto leading-relaxed mb-6 sm:mb-8 px-2 sm:px-0",children:"Tell us what you're building. We'll send you a clear, itemized proposal within 48 hours  completely free, zero obligation."}),e.jsxs($,{size:"lg",onClick:()=>a(!0),className:"bg-gradient-to-r from-blue-500 via-violet-500 to-purple-600 border-0 text-white text-sm sm:text-base font-semibold px-8 sm:px-12 py-5 sm:py-6 shadow-xl shadow-violet-500/25 hover:shadow-violet-500/40 transition-shadow duration-300","data-testid":"button-pricing-message",children:[e.jsx(Mt,{className:"w-5 h-5 mr-2"}),"Start a Conversation"]}),e.jsx("p",{className:"text-[11px] sm:text-xs text-white/30 mt-4 sm:mt-5",children:"Free consultation. No calls. No pressure. Just a simple conversation via email."})]})]})})]})]}),e.jsxs("section",{id:"api",className:"relative py-20 sm:py-28 md:py-36 border-t border-white/5 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-blue-500/[0.02] via-transparent to-cyan-500/[0.02]"}),e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute top-1/4 -left-20 w-[600px] h-[600px] rounded-full bg-blue-500/[0.04] blur-[120px]"}),e.jsx("div",{className:"absolute bottom-1/4 -right-20 w-[500px] h-[500px] rounded-full bg-cyan-500/[0.04] blur-[100px]"})]}),e.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-10 sm:gap-16 items-center",children:[e.jsxs("div",{className:"order-2 lg:order-1",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-5 py-2 rounded-full bg-blue-500/[0.08] border border-blue-500/20 mb-6 sm:mb-8",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 animate-pulse"}),e.jsx("span",{className:"text-sm font-medium text-blue-300/90",children:"Developer API"})]}),e.jsxs("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-bold tracking-tight mb-4 sm:mb-6","data-testid":"text-api-title",children:["Connect Your Tools with"," ",e.jsx("span",{className:"bg-gradient-to-r from-blue-400 via-cyan-400 to-teal-400 bg-clip-text text-transparent",children:"Our API"})]}),e.jsx("p",{className:"text-white/50 text-base sm:text-lg leading-relaxed mb-8 sm:mb-10 max-w-lg",children:"Pull project data into your own systems. Integrate customer info, invoices, and work entries directly into your workflow with secure API key authentication."}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8 sm:mb-10",children:[{icon:uo,title:"Secure API Keys",desc:"Scope-based permissions with read, write, and full access levels.",color:"from-blue-500/15 to-indigo-500/15",iconColor:"text-blue-400"},{icon:Fw,title:"Real-Time Data",desc:"Access customers, projects, invoices, and work entries instantly.",color:"from-cyan-500/15 to-teal-500/15",iconColor:"text-cyan-400"},{icon:my,title:"Simple REST API",desc:"Clean JSON endpoints with beginner-friendly documentation.",color:"from-violet-500/15 to-purple-500/15",iconColor:"text-violet-400"},{icon:Q3,title:"Custom Integrations",desc:"Build dashboards, automate reports, or sync with any platform.",color:"from-emerald-500/15 to-green-500/15",iconColor:"text-emerald-400"}].map(M=>e.jsxs("div",{className:"group flex items-start gap-3.5 p-4 rounded-md bg-white/[0.02] border border-white/[0.06] hover:border-blue-500/20 hover:bg-white/[0.04] transition-all duration-300","data-testid":`card-api-${M.title.toLowerCase().replace(/\s+/g,"-")}`,children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-md bg-gradient-to-br ${M.color} border border-white/[0.06] shrink-0 group-hover:scale-105 transition-transform duration-300`,children:e.jsx(M.icon,{className:`w-4.5 h-4.5 ${M.iconColor}`})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold mb-1 group-hover:text-white transition-colors",children:M.title}),e.jsx("p",{className:"text-xs text-white/40 leading-relaxed",children:M.desc})]})]},M.title))}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx(Mn,{href:"/api/docs",children:e.jsxs($,{className:"bg-gradient-to-r from-blue-500 via-cyan-500 to-teal-500 border-0 text-white font-semibold px-8 shadow-lg shadow-blue-500/20 hover:shadow-blue-500/40 transition-shadow duration-300","data-testid":"button-api-docs",children:[e.jsx(my,{className:"w-4 h-4 mr-2"}),"View API Docs"]})}),e.jsxs($,{variant:"outline",className:"border-white/15 text-white bg-white/5 hover:bg-white/10 transition-colors",onClick:()=>a(!0),"data-testid":"button-api-contact",children:[e.jsx(Mt,{className:"w-4 h-4 mr-2"}),"Ask About Integrations"]})]})]}),e.jsxs("div",{className:"order-1 lg:order-2 relative","data-testid":"img-api-visual",children:[e.jsxs("div",{className:"relative rounded-md overflow-hidden border border-white/10 shadow-2xl shadow-blue-500/[0.08]",children:[e.jsxs("div",{className:"bg-[#0d1117] p-1",children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2.5 border-b border-white/[0.06]",children:[e.jsxs("div",{className:"flex gap-1.5",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500/60"}),e.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500/60"}),e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500/60"})]}),e.jsx("div",{className:"flex-1 flex justify-center",children:e.jsx("div",{className:"px-4 py-1 rounded-md bg-white/[0.04] border border-white/[0.06]",children:e.jsx("span",{className:"text-[11px] text-white/40 font-mono",children:"api/v1/customers"})})})]}),e.jsxs("div",{className:"p-5 font-mono text-[13px] leading-relaxed",children:[e.jsxs("div",{className:"text-white/30 mb-1",children:[e.jsx("span",{className:"text-blue-400/70",children:"GET"})," ",e.jsx("span",{className:"text-white/50",children:"/api/v1/customers"})]}),e.jsx("div",{className:"mt-3 text-white/25",children:"{"}),e.jsxs("div",{className:"pl-4 text-white/25",children:['"',e.jsx("span",{className:"text-cyan-400/80",children:"data"}),'": ',"["]}),e.jsx("div",{className:"pl-8 text-white/25",children:"{"}),e.jsxs("div",{className:"pl-12",children:[e.jsx("span",{className:"text-white/25",children:'"'}),e.jsx("span",{className:"text-emerald-400/80",children:"name"}),e.jsx("span",{className:"text-white/25",children:'":'})," ",e.jsx("span",{className:"text-amber-400/70",children:'"Acme Corp"'}),e.jsx("span",{className:"text-white/20",children:","})]}),e.jsxs("div",{className:"pl-12",children:[e.jsx("span",{className:"text-white/25",children:'"'}),e.jsx("span",{className:"text-emerald-400/80",children:"email"}),e.jsx("span",{className:"text-white/25",children:'":'})," ",e.jsx("span",{className:"text-amber-400/70",children:'"hello@acme.com"'}),e.jsx("span",{className:"text-white/20",children:","})]}),e.jsxs("div",{className:"pl-12",children:[e.jsx("span",{className:"text-white/25",children:'"'}),e.jsx("span",{className:"text-emerald-400/80",children:"status"}),e.jsx("span",{className:"text-white/25",children:'":'})," ",e.jsx("span",{className:"text-amber-400/70",children:'"active"'})]}),e.jsx("div",{className:"pl-8 text-white/25",children:"}"}),e.jsx("div",{className:"pl-4 text-white/25",children:"]"}),e.jsx("div",{className:"text-white/25",children:"}"})]})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#0a0a0f]/40 to-transparent pointer-events-none"})]}),e.jsxs("div",{className:"absolute -bottom-4 -right-4 sm:-bottom-5 sm:-right-5 p-4 sm:p-5 rounded-md bg-[#12121a]/90 border border-white/10 shadow-xl",style:{backdropFilter:"blur(16px)"},children:[e.jsxs("div",{className:"flex items-center gap-2.5 text-xs mb-1.5",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-emerald-400 animate-pulse shadow-lg shadow-emerald-400/50"}),e.jsx("span",{className:"text-white/70 font-semibold",children:"API Status: Live"})]}),e.jsx("p",{className:"text-[11px] text-white/30",children:"v1  REST  JSON  Bearer Auth"})]}),e.jsx("div",{className:"absolute -top-3 -left-3 sm:-top-4 sm:-left-4 p-3 sm:p-4 rounded-md bg-[#12121a]/90 border border-white/10 shadow-xl",style:{backdropFilter:"blur(16px)"},children:e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(wn,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-white/70 font-semibold",children:"Encrypted"})]})})]})]})})]}),e.jsx("section",{id:"faq",className:"relative py-16 sm:py-24 md:py-32 border-t border-white/5",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6",children:[e.jsxs("div",{className:"text-center mb-10 sm:mb-16",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-white/5 border border-white/10 mb-4 sm:mb-6",children:[e.jsx(Mt,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-sm text-white/70",children:"Common Questions"})]}),e.jsxs("h2",{className:"text-2xl sm:text-3xl md:text-5xl font-bold tracking-tight mb-3 sm:mb-4","data-testid":"text-faq-title",children:["Frequently Asked"," ",e.jsx("span",{className:"bg-gradient-to-r from-blue-400 to-violet-400 bg-clip-text text-transparent",children:"Questions"})]}),e.jsx("p",{className:"text-white/50 text-sm sm:text-lg max-w-2xl mx-auto",children:"Everything you need to know about our AI web design and custom web development services."})]}),e.jsx("div",{className:"space-y-4","data-testid":"faq-list",children:[{q:"How long does it take to build a custom website?",a:"Most projects are delivered within 48 hours to 2 weeks depending on complexity. Our AI-accelerated workflow cuts development time dramatically compared to traditional web design agencies."},{q:"What technologies do you use for web development?",a:"We use cutting-edge technologies including React, Node.js, PostgreSQL, Docker, and the latest AI models. Our custom React development services and Node.js web development ensure modern, scalable, responsive solutions."},{q:"Do you offer affordable web development for small businesses?",a:"Absolutely. We bill per deliverable  per page designed, per feature built  so you only pay for what we create. No retainers, no subscriptions. Our pricing works for startups and small businesses of any size."},{q:"How does your AI-powered web design process work?",a:"It's simple: contact us with your project details, we design a custom architecture, our AI-accelerated development brings it to life, then we deploy and hand over your polished product with full documentation and support."},{q:"Do you offer ongoing support and maintenance?",a:"Yes, we provide 24/7 support with real humans and AI assistants. Every client gets access to a dedicated support portal with ticket tracking, real-time communication, and project progress updates."},{q:"Can you build custom web applications and APIs?",a:"Yes. We build custom web applications, REST APIs, billing dashboards, support portals, community forums, and more. We also offer Docker deployment services for self-hosted infrastructure."}].map((M,q)=>e.jsxs("div",{className:"p-5 sm:p-6 rounded-md border border-white/5 bg-white/[0.02]","data-testid":`faq-item-${q}`,children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold mb-2 text-white/90",children:M.q}),e.jsx("p",{className:"text-sm text-white/50 leading-relaxed",children:M.a})]},q))})]})}),e.jsxs("section",{className:"relative py-16 sm:py-24 md:py-32 border-t border-white/5",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-blue-500/[0.03] to-transparent"}),e.jsxs("div",{className:"relative max-w-4xl mx-auto px-4 sm:px-6 text-center",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl md:text-5xl font-bold tracking-tight mb-4 sm:mb-6","data-testid":"text-cta-title",children:["Ready to Build Something"," ",e.jsx("span",{className:"bg-gradient-to-r from-blue-400 via-violet-400 to-purple-400 bg-clip-text text-transparent",children:"Extraordinary?"})]}),e.jsx("p",{className:"text-white/50 text-sm sm:text-lg max-w-2xl mx-auto mb-8 sm:mb-10",children:"Tell us about your project and we'll craft a custom AI-powered web development solution tailored to your specific business needs. No templates, no compromises."}),e.jsx("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-center gap-3 sm:gap-4",children:e.jsxs($,{size:"lg",onClick:()=>a(!0),className:"bg-gradient-to-r from-blue-500 to-violet-600 border-0 text-white text-base font-medium px-10","data-testid":"button-cta-message",children:[e.jsx(Mt,{className:"w-4 h-4 mr-2"}),"Send Us a Message"]})})]})]})]}),e.jsx("footer",{"aria-label":"Site footer",className:"border-t border-white/5 pt-10 sm:pt-16 pb-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 sm:gap-10 mb-8 sm:mb-12",children:[e.jsxs("div",{className:"col-span-2 md:col-span-1",children:[e.jsxs("div",{className:"flex items-center gap-2.5 mb-4",children:[e.jsx("img",{src:"/images/logo.png",alt:"AI Powered Sites",className:"w-9 h-9 rounded-md object-cover"}),e.jsx("span",{className:"text-lg font-semibold",children:"AI Powered Sites"})]}),e.jsx("p",{className:"text-sm text-white/40 leading-relaxed mb-6",children:"AI web design agency crafting custom websites, web applications, and digital experiences for startups and growing businesses."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold mb-4 text-white/80",children:"Services"}),e.jsxs("ul",{className:"space-y-2.5",children:[e.jsx("li",{children:e.jsx("a",{href:"#services",className:"text-sm text-white/40 transition-colors","data-testid":"link-footer-websites",children:"Custom Websites"})}),e.jsx("li",{children:e.jsx("a",{href:"#services",className:"text-sm text-white/40 transition-colors","data-testid":"link-footer-forums",children:"Community Forums"})}),e.jsx("li",{children:e.jsx("a",{href:"#services",className:"text-sm text-white/40 transition-colors","data-testid":"link-footer-backends",children:"Backend Systems"})}),e.jsx("li",{children:e.jsx("a",{href:"#services",className:"text-sm text-white/40 transition-colors","data-testid":"link-footer-docker",children:"Docker Solutions"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold mb-4 text-white/80",children:"Company"}),e.jsxs("ul",{className:"space-y-2.5",children:[e.jsx("li",{children:e.jsx("a",{href:"#features",className:"text-sm text-white/40 transition-colors","data-testid":"link-footer-features",children:"Why Choose Us"})}),e.jsx("li",{children:e.jsx("a",{href:"#process",className:"text-sm text-white/40 transition-colors","data-testid":"link-footer-process",children:"Our Process"})}),e.jsx("li",{children:e.jsx("a",{href:"#pricing",className:"text-sm text-white/40 transition-colors","data-testid":"link-footer-pricing",children:"Pricing"})}),e.jsx("li",{children:e.jsx("a",{href:"#api",className:"text-sm text-white/40 transition-colors","data-testid":"link-footer-api",children:"API"})}),e.jsx("li",{children:e.jsx("a",{href:"#testimonials",className:"text-sm text-white/40 transition-colors","data-testid":"link-footer-testimonials",children:"Testimonials"})}),e.jsx("li",{children:e.jsx("a",{href:"#stats",className:"text-sm text-white/40 transition-colors","data-testid":"link-footer-results",children:"Results"})}),e.jsx("li",{children:e.jsx(Mn,{href:"/questions",children:e.jsx("span",{className:"text-sm text-white/40 transition-colors cursor-pointer","data-testid":"link-footer-qa",children:"Q&A"})})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold mb-4 text-white/80",children:"Get In Touch"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex items-center gap-2.5",children:[e.jsx(Fs,{className:"w-4 h-4 text-white/30 shrink-0"}),e.jsx("a",{href:"mailto:hello@aipoweredsites.com",className:"text-sm text-white/40 transition-colors","data-testid":"link-footer-email",children:"hello@aipoweredsites.com"})]}),e.jsxs("li",{className:"flex items-center gap-2.5",children:[e.jsx(cl,{className:"w-4 h-4 text-white/30 shrink-0"}),e.jsx("span",{className:"text-sm text-white/40",children:"Remote-First Team"})]})]}),e.jsx("div",{className:"mt-6",children:e.jsxs($,{size:"sm",onClick:()=>a(!0),className:"bg-gradient-to-r from-blue-500 to-violet-600 border-0 text-white font-medium","data-testid":"button-footer-message",children:[e.jsx(Mt,{className:"w-3.5 h-3.5 mr-1.5"}),"Message Us"]})})]})]}),e.jsx("div",{className:"border-t border-white/5 pt-8 pb-6",children:e.jsxs("div",{className:"max-w-xl mx-auto text-center mb-6",children:[e.jsx("h4",{className:"text-sm font-semibold mb-1.5","data-testid":"text-newsletter-title",children:"Stay in the Loop"}),e.jsx("p",{className:"text-xs text-white/40 mb-4",children:"Get tips on AI, web design, and business growth. No spam, ever."}),e.jsx(CI,{})]})}),e.jsxs("div",{className:"border-t border-white/5 pt-6 flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("p",{className:"text-xs text-white/20",children:[" ",new Date().getFullYear()," AI Powered Sites. All rights reserved."]}),e.jsx("p",{className:"text-xs text-white/20",children:"Built with AI. Powered by passion."})]})]})}),e.jsx(Ct,{open:pe,onOpenChange:L,children:e.jsxs(vt,{className:"sm:max-w-md bg-[#12121a] border-white/10 text-white",children:[e.jsxs(yt,{children:[e.jsxs(bt,{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(Fs,{className:"w-5 h-5 text-violet-400"}),"Get Your Full Report"]}),e.jsx(Vc,{className:"text-white/50",children:"Enter your email to receive the detailed PDF report with all recommendations."})]}),e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"inline-flex items-center gap-3 px-4 py-2 rounded-xl bg-white/5 border border-white/10",children:[e.jsx("span",{className:"text-2xl font-bold",style:{color:k?.overallScore>=75?"#22c55e":k?.overallScore>=50?"#eab308":"#ef4444"},children:k?.grade}),e.jsxs("span",{className:"text-white/50 text-sm",children:[k?.overallScore,"/100"]})]})}),e.jsxs("div",{className:"relative",children:[e.jsx(Fs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-violet-400"}),e.jsx("input",{type:"email",placeholder:"your@email.com",value:C,onChange:M=>g(M.target.value),onKeyDown:M=>{M.key==="Enter"&&C.trim()&&Y()},className:"w-full bg-white/5 border border-white/10 rounded-lg pl-10 pr-4 py-3 text-white text-sm placeholder:text-white/25 outline-none focus:border-violet-500/50 transition-colors","data-testid":"input-audit-email-dialog"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:Y,disabled:!C.trim()||X,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-blue-500 to-violet-500 disabled:from-blue-600 disabled:to-violet-600 disabled:cursor-not-allowed text-white text-sm font-semibold rounded-lg transition-all","data-testid":"button-send-report",children:[X?e.jsx(Qe,{className:"w-4 h-4 animate-spin"}):e.jsx(bs,{className:"w-4 h-4"}),X?"Sending...":"Email My Report"]}),e.jsxs("button",{onClick:()=>{Q(),L(!1)},className:"flex items-center justify-center gap-2 px-4 py-3 bg-white/5 border border-white/10 text-white text-sm rounded-lg hover:bg-white/10 transition-colors","data-testid":"button-download-report-dialog",children:[e.jsx(hy,{className:"w-4 h-4"}),"Download"]})]}),e.jsx("p",{className:"text-[11px] text-white/30 text-center",children:"We'll include actionable tips to improve your score"})]})]})}),e.jsx(Ct,{open:n,onOpenChange:a,children:e.jsxs(vt,{className:"sm:max-w-lg bg-[#12121a] border-white/10 text-white",children:[e.jsxs(yt,{children:[e.jsxs(bt,{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(Mt,{className:"w-5 h-5 text-blue-400"}),"Start a Conversation"]}),e.jsx(Vc,{className:"text-white/50",children:"Have a question or want to discuss a project? Send us a message and we'll reply directly to your secure conversation."})]}),e.jsxs("div",{className:"space-y-4 mt-2",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70 mb-1.5 block",children:"Name"}),e.jsx(De,{placeholder:"Your name",value:o,onChange:M=>l(M.target.value),className:"bg-white/5 border-white/10 text-white placeholder:text-white/30","data-testid":"input-chat-name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70 mb-1.5 block",children:"Email"}),e.jsx(De,{placeholder:"you@example.com",value:d,onChange:M=>u(M.target.value),className:"bg-white/5 border-white/10 text-white placeholder:text-white/30","data-testid":"input-chat-email"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70 mb-1.5 block",children:"Subject"}),e.jsx(De,{placeholder:"What would you like to discuss?",value:h,onChange:M=>f(M.target.value),className:"bg-white/5 border-white/10 text-white placeholder:text-white/30","data-testid":"input-chat-subject"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70 mb-1.5 block",children:"Message"}),e.jsx(Rs,{placeholder:"Share any details, ideas, examples, or links you'd like us to see...",value:b,onChange:M=>v(M.target.value),className:"bg-white/5 border-white/10 text-white placeholder:text-white/30 min-h-[100px] resize-none","data-testid":"input-chat-message"})]}),e.jsx($,{onClick:()=>U.mutate(),disabled:!o.trim()||!d.trim()||!h.trim()||!b.trim()||U.isPending,className:"w-full bg-gradient-to-r from-blue-500 to-violet-600 border-0 text-white font-medium","data-testid":"button-start-conversation",children:U.isPending?"Starting...":e.jsxs(e.Fragment,{children:[e.jsx(bs,{className:"w-4 h-4 mr-2"}),"Start Conversation"]})}),e.jsx("p",{className:"text-xs text-white/30 text-center",children:"Your conversation is private and secure. You'll get a unique link to continue the discussion."})]})]})})]})}const EI={"under-1k":"Under $1,000","1k-5k":"$1,000 - $5,000","5k-10k":"$5,000 - $10,000","10k-25k":"$10,000 - $25,000","25k+":"$25,000+","not-sure":"Not Sure Yet"},TI={website:"Website",forum:"Forum / Community",blog:"Blog Platform",backend:"Backend / API","support-portal":"Support Portal",ecommerce:"E-Commerce",other:"Other"};function AI(){const{data:s,isLoading:t}=Le({queryKey:["/api/quote-requests"]});return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 flex-wrap mb-6",children:[e.jsx(vy,{className:"w-6 h-6 text-primary"}),e.jsx("h1",{className:"text-2xl font-bold tracking-tight","data-testid":"text-quotes-title",children:"Quote Requests"}),s&&e.jsx(je,{variant:"secondary","data-testid":"badge-quotes-count",children:s.length})]}),t?e.jsx("div",{className:"text-muted-foreground","data-testid":"text-quotes-loading",children:"Loading quote requests..."}):!s||s.length===0?e.jsx(ce,{children:e.jsxs(yr,{className:"py-12 text-center",children:[e.jsx(vy,{className:"w-10 h-10 text-muted-foreground mx-auto mb-3"}),e.jsx("p",{className:"text-muted-foreground","data-testid":"text-quotes-empty",children:"No quote requests yet. They'll appear here when visitors submit the form on your landing page."})]})}):e.jsx("div",{className:"grid gap-4",children:s.map(n=>e.jsxs(ce,{"data-testid":`card-quote-${n.id}`,children:[e.jsx(VN,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:[e.jsxs("div",{children:[e.jsx(GN,{className:"text-lg",children:n.name}),e.jsxs("div",{className:"flex items-center gap-4 flex-wrap mt-1 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(Fs,{className:"w-3.5 h-3.5"}),n.email]}),n.phone&&e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(Bc,{className:"w-3.5 h-3.5"}),n.phone]}),n.company&&e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(hl,{className:"w-3.5 h-3.5"}),n.company]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(je,{variant:"secondary",children:TI[n.projectType]||n.projectType}),n.budget&&e.jsxs(je,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(Fn,{className:"w-3 h-3"}),EI[n.budget]||n.budget]}),e.jsx(je,{variant:n.status==="new"?"default":"secondary",children:n.status})]})]})}),e.jsxs(yr,{children:[e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:n.message}),n.createdAt&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-3 flex items-center gap-1.5",children:[e.jsx(Cx,{className:"w-3 h-3"}),new Date(n.createdAt).toLocaleString()]})]})]},n.id))})]})}function sk(s){switch(s){case"open":return e.jsx(Ci,{className:"w-4 h-4"});case"in_progress":return e.jsx(Gt,{className:"w-4 h-4"});case"resolved":return e.jsx(yn,{className:"w-4 h-4"});case"closed":return e.jsx(ao,{className:"w-4 h-4"});default:return e.jsx(Ci,{className:"w-4 h-4"})}}function Fp(s){switch(s){case"open":return"bg-blue-500/10 text-blue-600 dark:text-blue-400 border-blue-500/20";case"in_progress":return"bg-amber-500/10 text-amber-600 dark:text-amber-400 border-amber-500/20";case"resolved":return"bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 border-emerald-500/20";case"closed":return"bg-muted text-muted-foreground border-muted";default:return"bg-muted text-muted-foreground border-muted"}}function nk(s){switch(s){case"urgent":return"bg-red-500/10 text-red-600 dark:text-red-400 border-red-500/20";case"high":return"bg-orange-500/10 text-orange-600 dark:text-orange-400 border-orange-500/20";case"medium":return"bg-sky-500/10 text-sky-600 dark:text-sky-400 border-sky-500/20";case"low":return"bg-muted text-muted-foreground border-muted";default:return"bg-muted text-muted-foreground border-muted"}}function rm(s){switch(s){case"urgent":return e.jsx(qn,{className:"w-3 h-3"});case"high":return e.jsx(kx,{className:"w-3 h-3"});default:return null}}function zp(s){if(!s)return"";const t=new Date,n=new Date(s),a=t.getTime()-n.getTime(),o=Math.floor(a/6e4);if(o<1)return"just now";if(o<60)return`${o}m ago`;const l=Math.floor(o/60);if(l<24)return`${l}h ago`;const d=Math.floor(l/24);return d<7?`${d}d ago`:$s(s)}function PI(){return e.jsxs("div",{className:"space-y-5",children:[e.jsx("div",{className:"flex items-center justify-between gap-3",children:e.jsxs("div",{children:[e.jsx(Ce,{className:"h-7 w-44 mb-1.5"}),e.jsx(Ce,{className:"h-4 w-56"})]})}),e.jsx("div",{className:"flex gap-2",children:Array.from({length:4}).map((s,t)=>e.jsx(Ce,{className:"h-9 w-24 rounded-md"},t))}),e.jsx(ce,{className:"overflow-hidden",children:Array.from({length:6}).map((s,t)=>e.jsxs("div",{className:"flex items-center gap-4 p-4 border-b last:border-b-0",children:[e.jsx(Ce,{className:"h-9 w-9 rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-1.5",children:[e.jsx(Ce,{className:"h-4 w-48"}),e.jsx(Ce,{className:"h-3 w-32"})]}),e.jsx(Ce,{className:"h-5 w-20 rounded-full"})]},t))})]})}function RI({tickets:s,active:t,onChange:n}){const a={all:s.length,open:s.filter(l=>l.status==="open").length,in_progress:s.filter(l=>l.status==="in_progress").length,resolved:s.filter(l=>l.status==="resolved").length,closed:s.filter(l=>l.status==="closed").length},o=[{key:"all",label:"All",icon:A3},{key:"open",label:"Open",icon:Ci},{key:"in_progress",label:"In Progress",icon:Gt},{key:"resolved",label:"Resolved",icon:yn},{key:"closed",label:"Closed",icon:ao}];return e.jsx("div",{className:"flex items-center gap-1.5 overflow-x-auto pb-1",children:o.map(l=>{const d=a[l.key],u=t===l.key;return e.jsxs($,{variant:u?"default":"ghost",size:"sm",onClick:()=>n(l.key),className:"shrink-0","data-testid":`button-filter-${l.key}`,children:[e.jsx(l.icon,{className:"w-3.5 h-3.5 mr-1.5"}),l.label,d>0&&e.jsx("span",{className:`ml-1.5 text-xs tabular-nums ${u?"opacity-80":"text-muted-foreground"}`,children:d})]},l.key)})})}function II({onSelect:s}){const[t,n]=p.useState(""),[a,o]=p.useState("all"),[l,d]=p.useState("all"),{data:u,isLoading:h}=Le({queryKey:["/api/support/tickets"]});if(h)return e.jsx(PI,{});const f=u||[],b=f.filter(C=>{const g=!t||C.subject.toLowerCase().includes(t.toLowerCase())||C.ticketNumber.toLowerCase().includes(t.toLowerCase())||C.customerName.toLowerCase().includes(t.toLowerCase()),k=a==="all"||C.status===a,A=l==="all"||C.priority===l;return g&&k&&A}),v=f.filter(C=>C.status==="open").length,y=f.filter(C=>C.status==="in_progress").length,N=f.filter(C=>C.priority==="urgent"&&C.status!=="closed"&&C.status!=="resolved").length;return e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight","data-testid":"text-support-title",children:"Support Center"}),e.jsxs("div",{className:"flex items-center gap-3 mt-1.5 flex-wrap",children:[N>0&&e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs font-medium text-red-600 dark:text-red-400 bg-red-500/10 px-2 py-0.5 rounded-full",children:[e.jsx(qn,{className:"w-3 h-3"}),N," urgent"]}),v>0&&e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs font-medium text-blue-600 dark:text-blue-400 bg-blue-500/10 px-2 py-0.5 rounded-full",children:[e.jsx(Ci,{className:"w-3 h-3"}),v," open"]}),y>0&&e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs font-medium text-amber-600 dark:text-amber-400 bg-amber-500/10 px-2 py-0.5 rounded-full",children:[e.jsx(Gt,{className:"w-3 h-3"}),y," in progress"]}),v===0&&y===0&&N===0&&e.jsx("span",{className:"text-sm text-muted-foreground",children:"All caught up"})]})]}),e.jsx(RI,{tickets:f,active:a,onChange:o}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("div",{className:"relative flex-1 min-w-[220px]",children:[e.jsx(sn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(De,{placeholder:"Search by subject, ticket number, or customer...",className:"pl-9",value:t,onChange:C=>n(C.target.value),"data-testid":"input-search-tickets"})]}),e.jsxs(Dt,{value:l,onValueChange:d,children:[e.jsxs(It,{className:"w-[140px]","data-testid":"select-priority-filter",children:[e.jsx(N3,{className:"w-3.5 h-3.5 mr-1.5"}),e.jsx($t,{placeholder:"Priority"})]}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"all",children:"All Priority"}),e.jsx(Ie,{value:"urgent",children:"Urgent"}),e.jsx(Ie,{value:"high",children:"High"}),e.jsx(Ie,{value:"medium",children:"Medium"}),e.jsx(Ie,{value:"low",children:"Low"})]})]})]}),e.jsx(ce,{className:"overflow-hidden",children:b.length>0?e.jsx("div",{className:"divide-y",children:b.map(C=>e.jsxs("button",{className:"w-full p-4 text-left flex items-start gap-3.5 hover-elevate transition-colors",onClick:()=>s(C.id),"data-testid":`button-ticket-${C.id}`,children:[e.jsx("div",{className:`flex items-center justify-center w-9 h-9 rounded-full shrink-0 border ${Fp(C.status)}`,children:sk(C.status)}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[e.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:e.jsx("span",{className:"text-sm font-semibold truncate",children:C.subject})}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground flex-wrap",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Uw,{className:"w-3 h-3"}),C.ticketNumber]}),e.jsx("span",{className:"opacity-30",children:"|"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(tj,{className:"w-3 h-3"}),C.customerName]}),e.jsx("span",{className:"opacity-30",children:"|"}),e.jsx("span",{children:zp(C.updatedAt)})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[e.jsxs(je,{variant:"secondary",className:`text-xs border ${nk(C.priority)}`,children:[rm(C.priority),e.jsx("span",{className:rm(C.priority)?"ml-1":"",children:C.priority})]}),e.jsx(je,{variant:"secondary",className:`text-xs border ${Fp(C.status)}`,children:C.status.replace("_"," ")})]})]},C.id))}):e.jsxs("div",{className:"p-16 text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-full bg-muted mb-4",children:e.jsx(ro,{className:"w-7 h-7 text-muted-foreground"})}),e.jsx("p",{className:"text-sm font-medium mb-1",children:t||a!=="all"||l!=="all"?"No tickets match your filters":"No support tickets yet"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t||a!=="all"||l!=="all"?"Try adjusting your search or filters":"Tickets will appear here when customers reach out"})]})})]})}function OI({ticketId:s,onBack:t}){const{toast:n}=pt(),[a,o]=p.useState(""),{data:l,isLoading:d}=Le({queryKey:["/api/support/tickets",s]}),u=Te({mutationFn:async b=>(await ke("POST",`/api/support/tickets/${s}/messages`,{message:b})).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/support/tickets",s]}),ve.invalidateQueries({queryKey:["/api/support/tickets"]}),n({title:"Reply sent",description:"Your reply has been sent and the customer has been notified."}),o("")},onError:b=>{n({title:"Failed to send reply",description:b.message,variant:"destructive"})}}),h=Te({mutationFn:async b=>(await ke("PATCH",`/api/support/tickets/${s}`,b)).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/support/tickets",s]}),ve.invalidateQueries({queryKey:["/api/support/tickets"]}),n({title:"Ticket updated"})}}),f=Te({mutationFn:async()=>{await ke("DELETE",`/api/support/tickets/${s}`)},onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/support/tickets"]}),n({title:"Ticket deleted",description:"The support ticket has been permanently removed."}),t()},onError:b=>{n({title:"Failed to delete ticket",description:b.message,variant:"destructive"})}});return d?e.jsxs("div",{className:"space-y-5",children:[e.jsx(Ce,{className:"h-8 w-32"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr_280px] gap-5",children:[e.jsxs(ce,{className:"p-6",children:[e.jsx(Ce,{className:"h-6 w-64 mb-4"}),e.jsx(Ce,{className:"h-40 w-full"})]}),e.jsxs(ce,{className:"p-5",children:[e.jsx(Ce,{className:"h-5 w-32 mb-4"}),e.jsx(Ce,{className:"h-4 w-full mb-2"}),e.jsx(Ce,{className:"h-4 w-3/4"})]})]})]}):l?e.jsxs("div",{className:"space-y-5",children:[e.jsxs($,{variant:"ghost",size:"sm",onClick:t,"data-testid":"button-back-to-list",children:[e.jsx(_a,{className:"w-4 h-4 mr-2"}),"Back to tickets"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr_280px] gap-5",children:[e.jsxs("div",{className:"space-y-4 min-w-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold leading-tight mb-1","data-testid":"text-ticket-subject",children:l.subject}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs(je,{variant:"secondary",className:`text-xs border ${Fp(l.status)}`,children:[sk(l.status),e.jsx("span",{className:"ml-1",children:l.status.replace("_"," ")})]}),e.jsxs(je,{variant:"secondary",className:`text-xs border ${nk(l.priority)}`,children:[rm(l.priority),e.jsx("span",{className:rm(l.priority)?"ml-1":"",children:l.priority})]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:l.ticketNumber})]})]}),e.jsx(ce,{className:"overflow-hidden",children:e.jsx("div",{className:"divide-y",children:l.messages.map((b,v)=>{const y=b.senderType==="admin";return e.jsx("div",{className:`p-5 ${y?"bg-primary/[0.03] dark:bg-primary/[0.06]":""}`,"data-testid":`message-${b.id}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-semibold shrink-0 ${y?"bg-primary text-primary-foreground":"bg-gradient-to-br from-blue-500 to-violet-500 text-white"}`,children:b.senderName.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1.5 flex-wrap",children:[e.jsx("span",{className:"text-sm font-semibold",children:b.senderName}),e.jsx(je,{variant:"secondary",className:`text-[10px] px-1.5 py-0 ${y?"bg-primary/10 text-primary border-primary/20":"bg-muted"}`,children:y?"Staff":"Customer"}),e.jsx("span",{className:"text-xs text-muted-foreground ml-auto shrink-0",children:zp(b.createdAt)})]}),e.jsx("p",{className:"text-sm whitespace-pre-wrap leading-relaxed text-foreground/90","data-testid":`text-message-body-${b.id}`,children:b.message})]})]})},b.id)})})}),l.status!=="closed"&&e.jsxs(ce,{className:"overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b bg-muted/30",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Mt,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Reply"})]})}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsx(Rs,{placeholder:"Type your reply to the customer...",value:a,onChange:b=>o(b.target.value),className:"resize-none min-h-[120px] text-sm","data-testid":"textarea-reply"}),e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1.5",children:[e.jsx(Fs,{className:"w-3 h-3"}),"The customer will be notified by email"]}),e.jsxs($,{onClick:()=>u.mutate(a),disabled:!a.trim()||u.isPending,"data-testid":"button-send-reply",children:[u.isPending?e.jsx(Qe,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(bs,{className:"w-4 h-4 mr-2"}),"Send Reply"]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(ce,{className:"p-4",children:[e.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-3",children:"Ticket Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs text-muted-foreground",children:"Status"}),e.jsxs(Dt,{value:l.status,onValueChange:b=>h.mutate({status:b}),children:[e.jsx(It,{"data-testid":"select-ticket-status",children:e.jsx($t,{})}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"open",children:"Open"}),e.jsx(Ie,{value:"in_progress",children:"In Progress"}),e.jsx(Ie,{value:"resolved",children:"Resolved"}),e.jsx(Ie,{value:"closed",children:"Closed"})]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs text-muted-foreground",children:"Priority"}),e.jsxs(Dt,{value:l.priority,onValueChange:b=>h.mutate({priority:b}),children:[e.jsx(It,{"data-testid":"select-ticket-priority",children:e.jsx($t,{})}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"low",children:"Low"}),e.jsx(Ie,{value:"medium",children:"Medium"}),e.jsx(Ie,{value:"high",children:"High"}),e.jsx(Ie,{value:"urgent",children:"Urgent"})]})]})]})]})]}),e.jsxs(ce,{className:"p-4",children:[e.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-3",children:"Customer"}),e.jsxs("div",{className:"space-y-2.5",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-violet-500 flex items-center justify-center text-white text-xs font-semibold shrink-0",children:l.customerName.charAt(0).toUpperCase()}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:l.customerName}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:l.customerEmail})]})]}),l.projectName&&e.jsxs("div",{className:"flex items-start gap-2 text-xs text-muted-foreground pt-1 border-t",children:[e.jsx(Nl,{className:"w-3 h-3 mt-0.5 shrink-0"}),e.jsxs("span",{children:["Project: ",l.projectName]})]})]})]}),e.jsxs(ce,{className:"p-4",children:[e.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-3",children:"Info"}),e.jsxs("div",{className:"space-y-2 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Uw,{className:"w-3 h-3 shrink-0"}),e.jsx("span",{children:l.ticketNumber})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Nl,{className:"w-3 h-3 shrink-0"}),e.jsx("span",{className:"capitalize",children:l.category})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Cx,{className:"w-3 h-3 shrink-0"}),e.jsxs("span",{children:["Opened ",$s(l.createdAt)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Gt,{className:"w-3 h-3 shrink-0"}),e.jsxs("span",{children:["Updated ",zp(l.updatedAt)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Mt,{className:"w-3 h-3 shrink-0"}),e.jsxs("span",{children:[l.messages.length," message",l.messages.length!==1?"s":""]})]})]})]}),e.jsxs(ce,{className:"p-4",children:[e.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-3",children:"Actions"}),e.jsxs($,{variant:"outline",size:"sm",className:"w-full text-destructive",onClick:()=>{confirm("Are you sure you want to permanently delete this ticket and all its messages? This cannot be undone.")&&f.mutate()},disabled:f.isPending,"data-testid":"button-delete-ticket",children:[f.isPending?e.jsx(Qe,{className:"w-4 h-4 mr-1.5 animate-spin"}):e.jsx(ps,{className:"w-4 h-4 mr-1.5"}),"Delete Ticket"]})]})]})]})]}):e.jsxs("div",{className:"space-y-5",children:[e.jsxs($,{variant:"ghost",size:"sm",onClick:t,"data-testid":"button-back-to-list",children:[e.jsx(_a,{className:"w-4 h-4 mr-2"}),"Back to tickets"]}),e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-muted mb-3",children:e.jsx(ro,{className:"w-6 h-6 text-muted-foreground"})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ticket not found"})]})]})}function _I(){zn("Support Center");const[s,t]=p.useState(null);return s?e.jsx(OI,{ticketId:s,onBack:()=>t(null)}):e.jsx(II,{onSelect:t})}var rk=typeof global=="object"&&global&&global.Object===Object&&global,LI=typeof self=="object"&&self&&self.Object===Object&&self,ha=rk||LI||Function("return this")(),Ri=ha.Symbol,ak=Object.prototype,MI=ak.hasOwnProperty,DI=ak.toString,jc=Ri?Ri.toStringTag:void 0;function $I(s){var t=MI.call(s,jc),n=s[jc];try{s[jc]=void 0;var a=!0}catch{}var o=DI.call(s);return a&&(t?s[jc]=n:delete s[jc]),o}var qI=Object.prototype,FI=qI.toString;function zI(s){return FI.call(s)}var UI="[object Null]",BI="[object Undefined]",vb=Ri?Ri.toStringTag:void 0;function $l(s){return s==null?s===void 0?BI:UI:vb&&vb in Object(s)?$I(s):zI(s)}function qa(s){return s!=null&&typeof s=="object"}var po=Array.isArray;function _i(s){var t=typeof s;return s!=null&&(t=="object"||t=="function")}function ik(s){return s}var HI="[object AsyncFunction]",KI="[object Function]",WI="[object GeneratorFunction]",VI="[object Proxy]";function eg(s){if(!_i(s))return!1;var t=$l(s);return t==KI||t==WI||t==HI||t==VI}var Uf=ha["__core-js_shared__"],yb=(function(){var s=/[^.]+$/.exec(Uf&&Uf.keys&&Uf.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""})();function GI(s){return!!yb&&yb in s}var QI=Function.prototype,YI=QI.toString;function ko(s){if(s!=null){try{return YI.call(s)}catch{}try{return s+""}catch{}}return""}var XI=/[\\^$.*+?()[\]{}|]/g,ZI=/^\[object .+?Constructor\]$/,JI=Function.prototype,eO=Object.prototype,tO=JI.toString,sO=eO.hasOwnProperty,nO=RegExp("^"+tO.call(sO).replace(XI,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function rO(s){if(!_i(s)||GI(s))return!1;var t=eg(s)?nO:ZI;return t.test(ko(s))}function aO(s,t){return s?.[t]}function Co(s,t){var n=aO(s,t);return rO(n)?n:void 0}var Up=Co(ha,"WeakMap"),bb=Object.create,iO=(function(){function s(){}return function(t){if(!_i(t))return{};if(bb)return bb(t);s.prototype=t;var n=new s;return s.prototype=void 0,n}})();function oO(s,t,n){switch(n.length){case 0:return s.call(t);case 1:return s.call(t,n[0]);case 2:return s.call(t,n[0],n[1]);case 3:return s.call(t,n[0],n[1],n[2])}return s.apply(t,n)}function lO(s,t){var n=-1,a=s.length;for(t||(t=Array(a));++n<a;)t[n]=s[n];return t}var cO=800,dO=16,uO=Date.now;function mO(s){var t=0,n=0;return function(){var a=uO(),o=dO-(a-n);if(n=a,o>0){if(++t>=cO)return arguments[0]}else t=0;return s.apply(void 0,arguments)}}function hO(s){return function(){return s}}var am=(function(){try{var s=Co(Object,"defineProperty");return s({},"",{}),s}catch{}})(),fO=am?function(s,t){return am(s,"toString",{configurable:!0,enumerable:!1,value:hO(t),writable:!0})}:ik,pO=mO(fO);function xO(s,t){for(var n=-1,a=s==null?0:s.length;++n<a&&t(s[n],n,s)!==!1;);return s}var gO=9007199254740991,vO=/^(?:0|[1-9]\d*)$/;function ok(s,t){var n=typeof s;return t=t??gO,!!t&&(n=="number"||n!="symbol"&&vO.test(s))&&s>-1&&s%1==0&&s<t}function tg(s,t,n){t=="__proto__"&&am?am(s,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):s[t]=n}function ad(s,t){return s===t||s!==s&&t!==t}var yO=Object.prototype,bO=yO.hasOwnProperty;function lk(s,t,n){var a=s[t];(!(bO.call(s,t)&&ad(a,n))||n===void 0&&!(t in s))&&tg(s,t,n)}function wO(s,t,n,a){var o=!n;n||(n={});for(var l=-1,d=t.length;++l<d;){var u=t[l],h=void 0;h===void 0&&(h=s[u]),o?tg(n,u,h):lk(n,u,h)}return n}var wb=Math.max;function jO(s,t,n){return t=wb(t===void 0?s.length-1:t,0),function(){for(var a=arguments,o=-1,l=wb(a.length-t,0),d=Array(l);++o<l;)d[o]=a[t+o];o=-1;for(var u=Array(t+1);++o<t;)u[o]=a[o];return u[t]=n(d),oO(s,this,u)}}function NO(s,t){return pO(jO(s,t,ik),s+"")}var kO=9007199254740991;function ck(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=kO}function Mm(s){return s!=null&&ck(s.length)&&!eg(s)}function CO(s,t,n){if(!_i(n))return!1;var a=typeof t;return(a=="number"?Mm(n)&&ok(t,n.length):a=="string"&&t in n)?ad(n[t],s):!1}function SO(s){return NO(function(t,n){var a=-1,o=n.length,l=o>1?n[o-1]:void 0,d=o>2?n[2]:void 0;for(l=s.length>3&&typeof l=="function"?(o--,l):void 0,d&&CO(n[0],n[1],d)&&(l=o<3?void 0:l,o=1),t=Object(t);++a<o;){var u=n[a];u&&s(t,u,a,l)}return t})}var EO=Object.prototype;function sg(s){var t=s&&s.constructor,n=typeof t=="function"&&t.prototype||EO;return s===n}function TO(s,t){for(var n=-1,a=Array(s);++n<s;)a[n]=t(n);return a}var AO="[object Arguments]";function jb(s){return qa(s)&&$l(s)==AO}var dk=Object.prototype,PO=dk.hasOwnProperty,RO=dk.propertyIsEnumerable,Bp=jb((function(){return arguments})())?jb:function(s){return qa(s)&&PO.call(s,"callee")&&!RO.call(s,"callee")};function IO(){return!1}var uk=typeof er=="object"&&er&&!er.nodeType&&er,Nb=uk&&typeof tr=="object"&&tr&&!tr.nodeType&&tr,OO=Nb&&Nb.exports===uk,kb=OO?ha.Buffer:void 0,_O=kb?kb.isBuffer:void 0,Gc=_O||IO,LO="[object Arguments]",MO="[object Array]",DO="[object Boolean]",$O="[object Date]",qO="[object Error]",FO="[object Function]",zO="[object Map]",UO="[object Number]",BO="[object Object]",HO="[object RegExp]",KO="[object Set]",WO="[object String]",VO="[object WeakMap]",GO="[object ArrayBuffer]",QO="[object DataView]",YO="[object Float32Array]",XO="[object Float64Array]",ZO="[object Int8Array]",JO="[object Int16Array]",e_="[object Int32Array]",t_="[object Uint8Array]",s_="[object Uint8ClampedArray]",n_="[object Uint16Array]",r_="[object Uint32Array]",is={};is[YO]=is[XO]=is[ZO]=is[JO]=is[e_]=is[t_]=is[s_]=is[n_]=is[r_]=!0;is[LO]=is[MO]=is[GO]=is[DO]=is[QO]=is[$O]=is[qO]=is[FO]=is[zO]=is[UO]=is[BO]=is[HO]=is[KO]=is[WO]=is[VO]=!1;function a_(s){return qa(s)&&ck(s.length)&&!!is[$l(s)]}function ng(s){return function(t){return s(t)}}var mk=typeof er=="object"&&er&&!er.nodeType&&er,$c=mk&&typeof tr=="object"&&tr&&!tr.nodeType&&tr,i_=$c&&$c.exports===mk,Bf=i_&&rk.process,Tl=(function(){try{var s=$c&&$c.require&&$c.require("util").types;return s||Bf&&Bf.binding&&Bf.binding("util")}catch{}})(),Cb=Tl&&Tl.isTypedArray,rg=Cb?ng(Cb):a_,o_=Object.prototype,l_=o_.hasOwnProperty;function hk(s,t){var n=po(s),a=!n&&Bp(s),o=!n&&!a&&Gc(s),l=!n&&!a&&!o&&rg(s),d=n||a||o||l,u=d?TO(s.length,String):[],h=u.length;for(var f in s)(t||l_.call(s,f))&&!(d&&(f=="length"||o&&(f=="offset"||f=="parent")||l&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||ok(f,h)))&&u.push(f);return u}function fk(s,t){return function(n){return s(t(n))}}var c_=fk(Object.keys,Object),d_=Object.prototype,u_=d_.hasOwnProperty;function m_(s){if(!sg(s))return c_(s);var t=[];for(var n in Object(s))u_.call(s,n)&&n!="constructor"&&t.push(n);return t}function h_(s){return Mm(s)?hk(s):m_(s)}function f_(s){var t=[];if(s!=null)for(var n in Object(s))t.push(n);return t}var p_=Object.prototype,x_=p_.hasOwnProperty;function g_(s){if(!_i(s))return f_(s);var t=sg(s),n=[];for(var a in s)a=="constructor"&&(t||!x_.call(s,a))||n.push(a);return n}function pk(s){return Mm(s)?hk(s,!0):g_(s)}var Qc=Co(Object,"create");function v_(){this.__data__=Qc?Qc(null):{},this.size=0}function y_(s){var t=this.has(s)&&delete this.__data__[s];return this.size-=t?1:0,t}var b_="__lodash_hash_undefined__",w_=Object.prototype,j_=w_.hasOwnProperty;function N_(s){var t=this.__data__;if(Qc){var n=t[s];return n===b_?void 0:n}return j_.call(t,s)?t[s]:void 0}var k_=Object.prototype,C_=k_.hasOwnProperty;function S_(s){var t=this.__data__;return Qc?t[s]!==void 0:C_.call(t,s)}var E_="__lodash_hash_undefined__";function T_(s,t){var n=this.__data__;return this.size+=this.has(s)?0:1,n[s]=Qc&&t===void 0?E_:t,this}function xo(s){var t=-1,n=s==null?0:s.length;for(this.clear();++t<n;){var a=s[t];this.set(a[0],a[1])}}xo.prototype.clear=v_;xo.prototype.delete=y_;xo.prototype.get=N_;xo.prototype.has=S_;xo.prototype.set=T_;function A_(){this.__data__=[],this.size=0}function Dm(s,t){for(var n=s.length;n--;)if(ad(s[n][0],t))return n;return-1}var P_=Array.prototype,R_=P_.splice;function I_(s){var t=this.__data__,n=Dm(t,s);if(n<0)return!1;var a=t.length-1;return n==a?t.pop():R_.call(t,n,1),--this.size,!0}function O_(s){var t=this.__data__,n=Dm(t,s);return n<0?void 0:t[n][1]}function __(s){return Dm(this.__data__,s)>-1}function L_(s,t){var n=this.__data__,a=Dm(n,s);return a<0?(++this.size,n.push([s,t])):n[a][1]=t,this}function Ua(s){var t=-1,n=s==null?0:s.length;for(this.clear();++t<n;){var a=s[t];this.set(a[0],a[1])}}Ua.prototype.clear=A_;Ua.prototype.delete=I_;Ua.prototype.get=O_;Ua.prototype.has=__;Ua.prototype.set=L_;var Yc=Co(ha,"Map");function M_(){this.size=0,this.__data__={hash:new xo,map:new(Yc||Ua),string:new xo}}function D_(s){var t=typeof s;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?s!=="__proto__":s===null}function $m(s,t){var n=s.__data__;return D_(t)?n[typeof t=="string"?"string":"hash"]:n.map}function $_(s){var t=$m(this,s).delete(s);return this.size-=t?1:0,t}function q_(s){return $m(this,s).get(s)}function F_(s){return $m(this,s).has(s)}function z_(s,t){var n=$m(this,s),a=n.size;return n.set(s,t),this.size+=n.size==a?0:1,this}function So(s){var t=-1,n=s==null?0:s.length;for(this.clear();++t<n;){var a=s[t];this.set(a[0],a[1])}}So.prototype.clear=M_;So.prototype.delete=$_;So.prototype.get=q_;So.prototype.has=F_;So.prototype.set=z_;function U_(s,t){for(var n=-1,a=t.length,o=s.length;++n<a;)s[o+n]=t[n];return s}var xk=fk(Object.getPrototypeOf,Object),B_="[object Object]",H_=Function.prototype,K_=Object.prototype,gk=H_.toString,W_=K_.hasOwnProperty,V_=gk.call(Object);function G_(s){if(!qa(s)||$l(s)!=B_)return!1;var t=xk(s);if(t===null)return!0;var n=W_.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&gk.call(n)==V_}function Q_(){this.__data__=new Ua,this.size=0}function Y_(s){var t=this.__data__,n=t.delete(s);return this.size=t.size,n}function X_(s){return this.__data__.get(s)}function Z_(s){return this.__data__.has(s)}var J_=200;function eL(s,t){var n=this.__data__;if(n instanceof Ua){var a=n.__data__;if(!Yc||a.length<J_-1)return a.push([s,t]),this.size=++n.size,this;n=this.__data__=new So(a)}return n.set(s,t),this.size=n.size,this}function la(s){var t=this.__data__=new Ua(s);this.size=t.size}la.prototype.clear=Q_;la.prototype.delete=Y_;la.prototype.get=X_;la.prototype.has=Z_;la.prototype.set=eL;var vk=typeof er=="object"&&er&&!er.nodeType&&er,Sb=vk&&typeof tr=="object"&&tr&&!tr.nodeType&&tr,tL=Sb&&Sb.exports===vk,Eb=tL?ha.Buffer:void 0,Tb=Eb?Eb.allocUnsafe:void 0;function yk(s,t){if(t)return s.slice();var n=s.length,a=Tb?Tb(n):new s.constructor(n);return s.copy(a),a}function sL(s,t){for(var n=-1,a=s==null?0:s.length,o=0,l=[];++n<a;){var d=s[n];t(d,n,s)&&(l[o++]=d)}return l}function nL(){return[]}var rL=Object.prototype,aL=rL.propertyIsEnumerable,Ab=Object.getOwnPropertySymbols,iL=Ab?function(s){return s==null?[]:(s=Object(s),sL(Ab(s),function(t){return aL.call(s,t)}))}:nL;function oL(s,t,n){var a=t(s);return po(s)?a:U_(a,n(s))}function Hp(s){return oL(s,h_,iL)}var Kp=Co(ha,"DataView"),Wp=Co(ha,"Promise"),Vp=Co(ha,"Set"),Pb="[object Map]",lL="[object Object]",Rb="[object Promise]",Ib="[object Set]",Ob="[object WeakMap]",_b="[object DataView]",cL=ko(Kp),dL=ko(Yc),uL=ko(Wp),mL=ko(Vp),hL=ko(Up),$r=$l;(Kp&&$r(new Kp(new ArrayBuffer(1)))!=_b||Yc&&$r(new Yc)!=Pb||Wp&&$r(Wp.resolve())!=Rb||Vp&&$r(new Vp)!=Ib||Up&&$r(new Up)!=Ob)&&($r=function(s){var t=$l(s),n=t==lL?s.constructor:void 0,a=n?ko(n):"";if(a)switch(a){case cL:return _b;case dL:return Pb;case uL:return Rb;case mL:return Ib;case hL:return Ob}return t});var fL=Object.prototype,pL=fL.hasOwnProperty;function xL(s){var t=s.length,n=new s.constructor(t);return t&&typeof s[0]=="string"&&pL.call(s,"index")&&(n.index=s.index,n.input=s.input),n}var im=ha.Uint8Array;function ag(s){var t=new s.constructor(s.byteLength);return new im(t).set(new im(s)),t}function gL(s,t){var n=ag(s.buffer);return new s.constructor(n,s.byteOffset,s.byteLength)}var vL=/\w*$/;function yL(s){var t=new s.constructor(s.source,vL.exec(s));return t.lastIndex=s.lastIndex,t}var Lb=Ri?Ri.prototype:void 0,Mb=Lb?Lb.valueOf:void 0;function bL(s){return Mb?Object(Mb.call(s)):{}}function bk(s,t){var n=t?ag(s.buffer):s.buffer;return new s.constructor(n,s.byteOffset,s.length)}var wL="[object Boolean]",jL="[object Date]",NL="[object Map]",kL="[object Number]",CL="[object RegExp]",SL="[object Set]",EL="[object String]",TL="[object Symbol]",AL="[object ArrayBuffer]",PL="[object DataView]",RL="[object Float32Array]",IL="[object Float64Array]",OL="[object Int8Array]",_L="[object Int16Array]",LL="[object Int32Array]",ML="[object Uint8Array]",DL="[object Uint8ClampedArray]",$L="[object Uint16Array]",qL="[object Uint32Array]";function FL(s,t,n){var a=s.constructor;switch(t){case AL:return ag(s);case wL:case jL:return new a(+s);case PL:return gL(s);case RL:case IL:case OL:case _L:case LL:case ML:case DL:case $L:case qL:return bk(s,n);case NL:return new a;case kL:case EL:return new a(s);case CL:return yL(s);case SL:return new a;case TL:return bL(s)}}function wk(s){return typeof s.constructor=="function"&&!sg(s)?iO(xk(s)):{}}var zL="[object Map]";function UL(s){return qa(s)&&$r(s)==zL}var Db=Tl&&Tl.isMap,BL=Db?ng(Db):UL,HL="[object Set]";function KL(s){return qa(s)&&$r(s)==HL}var $b=Tl&&Tl.isSet,WL=$b?ng($b):KL,VL=1,jk="[object Arguments]",GL="[object Array]",QL="[object Boolean]",YL="[object Date]",XL="[object Error]",Nk="[object Function]",ZL="[object GeneratorFunction]",JL="[object Map]",e8="[object Number]",kk="[object Object]",t8="[object RegExp]",s8="[object Set]",n8="[object String]",r8="[object Symbol]",a8="[object WeakMap]",i8="[object ArrayBuffer]",o8="[object DataView]",l8="[object Float32Array]",c8="[object Float64Array]",d8="[object Int8Array]",u8="[object Int16Array]",m8="[object Int32Array]",h8="[object Uint8Array]",f8="[object Uint8ClampedArray]",p8="[object Uint16Array]",x8="[object Uint32Array]",ts={};ts[jk]=ts[GL]=ts[i8]=ts[o8]=ts[QL]=ts[YL]=ts[l8]=ts[c8]=ts[d8]=ts[u8]=ts[m8]=ts[JL]=ts[e8]=ts[kk]=ts[t8]=ts[s8]=ts[n8]=ts[r8]=ts[h8]=ts[f8]=ts[p8]=ts[x8]=!0;ts[XL]=ts[Nk]=ts[a8]=!1;function Du(s,t,n,a,o,l){var d,u=t&VL;if(d!==void 0)return d;if(!_i(s))return s;var h=po(s);if(h)d=xL(s);else{var f=$r(s),b=f==Nk||f==ZL;if(Gc(s))return yk(s,u);if(f==kk||f==jk||b&&!o)d=b?{}:wk(s);else{if(!ts[f])return o?s:{};d=FL(s,f,u)}}l||(l=new la);var v=l.get(s);if(v)return v;l.set(s,d),WL(s)?s.forEach(function(C){d.add(Du(C,t,n,C,s,l))}):BL(s)&&s.forEach(function(C,g){d.set(g,Du(C,t,n,g,s,l))});var y=Hp,N=h?void 0:y(s);return xO(N||s,function(C,g){N&&(g=C,C=s[g]),lk(d,g,Du(C,t,n,g,s,l))}),d}var g8=1,v8=4;function vl(s){return Du(s,g8|v8)}var y8="__lodash_hash_undefined__";function b8(s){return this.__data__.set(s,y8),this}function w8(s){return this.__data__.has(s)}function om(s){var t=-1,n=s==null?0:s.length;for(this.__data__=new So;++t<n;)this.add(s[t])}om.prototype.add=om.prototype.push=b8;om.prototype.has=w8;function j8(s,t){for(var n=-1,a=s==null?0:s.length;++n<a;)if(t(s[n],n,s))return!0;return!1}function N8(s,t){return s.has(t)}var k8=1,C8=2;function Ck(s,t,n,a,o,l){var d=n&k8,u=s.length,h=t.length;if(u!=h&&!(d&&h>u))return!1;var f=l.get(s),b=l.get(t);if(f&&b)return f==t&&b==s;var v=-1,y=!0,N=n&C8?new om:void 0;for(l.set(s,t),l.set(t,s);++v<u;){var C=s[v],g=t[v];if(a)var k=d?a(g,C,v,t,s,l):a(C,g,v,s,t,l);if(k!==void 0){if(k)continue;y=!1;break}if(N){if(!j8(t,function(A,E){if(!N8(N,E)&&(C===A||o(C,A,n,a,l)))return N.push(E)})){y=!1;break}}else if(!(C===g||o(C,g,n,a,l))){y=!1;break}}return l.delete(s),l.delete(t),y}function S8(s){var t=-1,n=Array(s.size);return s.forEach(function(a,o){n[++t]=[o,a]}),n}function E8(s){var t=-1,n=Array(s.size);return s.forEach(function(a){n[++t]=a}),n}var T8=1,A8=2,P8="[object Boolean]",R8="[object Date]",I8="[object Error]",O8="[object Map]",_8="[object Number]",L8="[object RegExp]",M8="[object Set]",D8="[object String]",$8="[object Symbol]",q8="[object ArrayBuffer]",F8="[object DataView]",qb=Ri?Ri.prototype:void 0,Hf=qb?qb.valueOf:void 0;function z8(s,t,n,a,o,l,d){switch(n){case F8:if(s.byteLength!=t.byteLength||s.byteOffset!=t.byteOffset)return!1;s=s.buffer,t=t.buffer;case q8:return!(s.byteLength!=t.byteLength||!l(new im(s),new im(t)));case P8:case R8:case _8:return ad(+s,+t);case I8:return s.name==t.name&&s.message==t.message;case L8:case D8:return s==t+"";case O8:var u=S8;case M8:var h=a&T8;if(u||(u=E8),s.size!=t.size&&!h)return!1;var f=d.get(s);if(f)return f==t;a|=A8,d.set(s,t);var b=Ck(u(s),u(t),a,o,l,d);return d.delete(s),b;case $8:if(Hf)return Hf.call(s)==Hf.call(t)}return!1}var U8=1,B8=Object.prototype,H8=B8.hasOwnProperty;function K8(s,t,n,a,o,l){var d=n&U8,u=Hp(s),h=u.length,f=Hp(t),b=f.length;if(h!=b&&!d)return!1;for(var v=h;v--;){var y=u[v];if(!(d?y in t:H8.call(t,y)))return!1}var N=l.get(s),C=l.get(t);if(N&&C)return N==t&&C==s;var g=!0;l.set(s,t),l.set(t,s);for(var k=d;++v<h;){y=u[v];var A=s[y],E=t[y];if(a)var S=d?a(E,A,y,t,s,l):a(A,E,y,s,t,l);if(!(S===void 0?A===E||o(A,E,n,a,l):S)){g=!1;break}k||(k=y=="constructor")}if(g&&!k){var R=s.constructor,H=t.constructor;R!=H&&"constructor"in s&&"constructor"in t&&!(typeof R=="function"&&R instanceof R&&typeof H=="function"&&H instanceof H)&&(g=!1)}return l.delete(s),l.delete(t),g}var W8=1,Fb="[object Arguments]",zb="[object Array]",xu="[object Object]",V8=Object.prototype,Ub=V8.hasOwnProperty;function G8(s,t,n,a,o,l){var d=po(s),u=po(t),h=d?zb:$r(s),f=u?zb:$r(t);h=h==Fb?xu:h,f=f==Fb?xu:f;var b=h==xu,v=f==xu,y=h==f;if(y&&Gc(s)){if(!Gc(t))return!1;d=!0,b=!1}if(y&&!b)return l||(l=new la),d||rg(s)?Ck(s,t,n,a,o,l):z8(s,t,h,n,a,o,l);if(!(n&W8)){var N=b&&Ub.call(s,"__wrapped__"),C=v&&Ub.call(t,"__wrapped__");if(N||C){var g=N?s.value():s,k=C?t.value():t;return l||(l=new la),o(g,k,n,a,l)}}return y?(l||(l=new la),K8(s,t,n,a,o,l)):!1}function Sk(s,t,n,a,o){return s===t?!0:s==null||t==null||!qa(s)&&!qa(t)?s!==s&&t!==t:G8(s,t,n,a,Sk,o)}function Q8(s){return function(t,n,a){for(var o=-1,l=Object(t),d=a(t),u=d.length;u--;){var h=d[++o];if(n(l[h],h,l)===!1)break}return t}}var Y8=Q8();function Gp(s,t,n){(n!==void 0&&!ad(s[t],n)||n===void 0&&!(t in s))&&tg(s,t,n)}function X8(s){return qa(s)&&Mm(s)}function Qp(s,t){if(!(t==="constructor"&&typeof s[t]=="function")&&t!="__proto__")return s[t]}function Z8(s){return wO(s,pk(s))}function J8(s,t,n,a,o,l,d){var u=Qp(s,n),h=Qp(t,n),f=d.get(h);if(f){Gp(s,n,f);return}var b=l?l(u,h,n+"",s,t,d):void 0,v=b===void 0;if(v){var y=po(h),N=!y&&Gc(h),C=!y&&!N&&rg(h);b=h,y||N||C?po(u)?b=u:X8(u)?b=lO(u):N?(v=!1,b=yk(h,!0)):C?(v=!1,b=bk(h,!0)):b=[]:G_(h)||Bp(h)?(b=u,Bp(u)?b=Z8(u):(!_i(u)||eg(u))&&(b=wk(h))):v=!1}v&&(d.set(h,b),o(b,h,a,l,d),d.delete(h)),Gp(s,n,b)}function Ek(s,t,n,a,o){s!==t&&Y8(t,function(l,d){if(o||(o=new la),_i(l))J8(s,t,d,n,Ek,a,o);else{var u=a?a(Qp(s,d),l,d+"",s,t,o):void 0;u===void 0&&(u=l),Gp(s,d,u)}},pk)}function gi(s,t){return Sk(s,t)}var wi=SO(function(s,t,n){Ek(s,t,n)}),tt=(s=>(s[s.TYPE=3]="TYPE",s[s.LEVEL=12]="LEVEL",s[s.ATTRIBUTE=13]="ATTRIBUTE",s[s.BLOT=14]="BLOT",s[s.INLINE=7]="INLINE",s[s.BLOCK=11]="BLOCK",s[s.BLOCK_BLOT=10]="BLOCK_BLOT",s[s.INLINE_BLOT=6]="INLINE_BLOT",s[s.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",s[s.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",s[s.ANY=15]="ANY",s))(tt||{});class da{constructor(t,n,a={}){this.attrName=t,this.keyName=n;const o=tt.TYPE&tt.ATTRIBUTE;this.scope=a.scope!=null?a.scope&tt.LEVEL|o:tt.ATTRIBUTE,a.whitelist!=null&&(this.whitelist=a.whitelist)}static keys(t){return Array.from(t.attributes).map(n=>n.name)}add(t,n){return this.canAdd(t,n)?(t.setAttribute(this.keyName,n),!0):!1}canAdd(t,n){return this.whitelist==null?!0:typeof n=="string"?this.whitelist.indexOf(n.replace(/["']/g,""))>-1:this.whitelist.indexOf(n)>-1}remove(t){t.removeAttribute(this.keyName)}value(t){const n=t.getAttribute(this.keyName);return this.canAdd(t,n)&&n?n:""}}class yl extends Error{constructor(t){t="[Parchment] "+t,super(t),this.message=t,this.name=this.constructor.name}}const Tk=class Yp{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(t,n=!1){if(t==null)return null;if(this.blots.has(t))return this.blots.get(t)||null;if(n){let a=null;try{a=t.parentNode}catch{return null}return this.find(a,n)}return null}create(t,n,a){const o=this.query(n);if(o==null)throw new yl(`Unable to create ${n} blot`);const l=o,d=n instanceof Node||n.nodeType===Node.TEXT_NODE?n:l.create(a),u=new l(t,d,a);return Yp.blots.set(u.domNode,u),u}find(t,n=!1){return Yp.find(t,n)}query(t,n=tt.ANY){let a;return typeof t=="string"?a=this.types[t]||this.attributes[t]:t instanceof Text||t.nodeType===Node.TEXT_NODE?a=this.types.text:typeof t=="number"?t&tt.LEVEL&tt.BLOCK?a=this.types.block:t&tt.LEVEL&tt.INLINE&&(a=this.types.inline):t instanceof Element&&((t.getAttribute("class")||"").split(/\s+/).some(o=>(a=this.classes[o],!!a)),a=a||this.tags[t.tagName]),a==null?null:"scope"in a&&n&tt.LEVEL&a.scope&&n&tt.TYPE&a.scope?a:null}register(...t){return t.map(n=>{const a="blotName"in n,o="attrName"in n;if(!a&&!o)throw new yl("Invalid definition");if(a&&n.blotName==="abstract")throw new yl("Cannot register abstract class");const l=a?n.blotName:o?n.attrName:void 0;return this.types[l]=n,o?typeof n.keyName=="string"&&(this.attributes[n.keyName]=n):a&&(n.className&&(this.classes[n.className]=n),n.tagName&&(Array.isArray(n.tagName)?n.tagName=n.tagName.map(d=>d.toUpperCase()):n.tagName=n.tagName.toUpperCase(),(Array.isArray(n.tagName)?n.tagName:[n.tagName]).forEach(d=>{(this.tags[d]==null||n.className==null)&&(this.tags[d]=n)}))),n})}};Tk.blots=new WeakMap;let Al=Tk;function Bb(s,t){return(s.getAttribute("class")||"").split(/\s+/).filter(n=>n.indexOf(`${t}-`)===0)}class eM extends da{static keys(t){return(t.getAttribute("class")||"").split(/\s+/).map(n=>n.split("-").slice(0,-1).join("-"))}add(t,n){return this.canAdd(t,n)?(this.remove(t),t.classList.add(`${this.keyName}-${n}`),!0):!1}remove(t){Bb(t,this.keyName).forEach(n=>{t.classList.remove(n)}),t.classList.length===0&&t.removeAttribute("class")}value(t){const n=(Bb(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,n)?n:""}}const Wr=eM;function Kf(s){const t=s.split("-"),n=t.slice(1).map(a=>a[0].toUpperCase()+a.slice(1)).join("");return t[0]+n}class tM extends da{static keys(t){return(t.getAttribute("style")||"").split(";").map(n=>n.split(":")[0].trim())}add(t,n){return this.canAdd(t,n)?(t.style[Kf(this.keyName)]=n,!0):!1}remove(t){t.style[Kf(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")}value(t){const n=t.style[Kf(this.keyName)];return this.canAdd(t,n)?n:""}}const Li=tM;class sM{constructor(t){this.attributes={},this.domNode=t,this.build()}attribute(t,n){n?t.add(this.domNode,n)&&(t.value(this.domNode)!=null?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])}build(){this.attributes={};const t=Al.find(this.domNode);if(t==null)return;const n=da.keys(this.domNode),a=Wr.keys(this.domNode),o=Li.keys(this.domNode);n.concat(a).concat(o).forEach(l=>{const d=t.scroll.query(l,tt.ATTRIBUTE);d instanceof da&&(this.attributes[d.attrName]=d)})}copy(t){Object.keys(this.attributes).forEach(n=>{const a=this.attributes[n].value(this.domNode);t.format(n,a)})}move(t){this.copy(t),Object.keys(this.attributes).forEach(n=>{this.attributes[n].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((t,n)=>(t[n]=this.attributes[n].value(this.domNode),t),{})}}const qm=sM,Ak=class{constructor(t,n){this.scroll=t,this.domNode=n,Al.blots.set(n,this),this.prev=null,this.next=null}static create(t){if(this.tagName==null)throw new yl("Blot definition missing tagName");let n,a;return Array.isArray(this.tagName)?(typeof t=="string"?(a=t.toUpperCase(),parseInt(a,10).toString()===a&&(a=parseInt(a,10))):typeof t=="number"&&(a=t),typeof a=="number"?n=document.createElement(this.tagName[a-1]):a&&this.tagName.indexOf(a)>-1?n=document.createElement(a):n=document.createElement(this.tagName[0])):n=document.createElement(this.tagName),this.className&&n.classList.add(this.className),n}get statics(){return this.constructor}attach(){}clone(){const t=this.domNode.cloneNode(!1);return this.scroll.create(t)}detach(){this.parent!=null&&this.parent.removeChild(this),Al.blots.delete(this.domNode)}deleteAt(t,n){this.isolate(t,n).remove()}formatAt(t,n,a,o){const l=this.isolate(t,n);if(this.scroll.query(a,tt.BLOT)!=null&&o)l.wrap(a,o);else if(this.scroll.query(a,tt.ATTRIBUTE)!=null){const d=this.scroll.create(this.statics.scope);l.wrap(d),d.format(a,o)}}insertAt(t,n,a){const o=a==null?this.scroll.create("text",n):this.scroll.create(n,a),l=this.split(t);this.parent.insertBefore(o,l||void 0)}isolate(t,n){const a=this.split(t);if(a==null)throw new Error("Attempt to isolate at end");return a.split(n),a}length(){return 1}offset(t=this.parent){return this.parent==null||this===t?0:this.parent.children.offset(this)+this.parent.offset(t)}optimize(t){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(t,n){const a=typeof t=="string"?this.scroll.create(t,n):t;return this.parent!=null&&(this.parent.insertBefore(a,this.next||void 0),this.remove()),a}split(t,n){return t===0?this:this.next}update(t,n){}wrap(t,n){const a=typeof t=="string"?this.scroll.create(t,n):t;if(this.parent!=null&&this.parent.insertBefore(a,this.next||void 0),typeof a.appendChild!="function")throw new yl(`Cannot wrap ${t}`);return a.appendChild(this),a}};Ak.blotName="abstract";let Pk=Ak;const Rk=class extends Pk{static value(t){return!0}index(t,n){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(n,1):-1}position(t,n){let a=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return t>0&&(a+=1),[this.parent.domNode,a]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};Rk.scope=tt.INLINE_BLOT;let nM=Rk;const un=nM;class rM{constructor(){this.head=null,this.tail=null,this.length=0}append(...t){if(this.insertBefore(t[0],null),t.length>1){const n=t.slice(1);this.append(...n)}}at(t){const n=this.iterator();let a=n();for(;a&&t>0;)t-=1,a=n();return a}contains(t){const n=this.iterator();let a=n();for(;a;){if(a===t)return!0;a=n()}return!1}indexOf(t){const n=this.iterator();let a=n(),o=0;for(;a;){if(a===t)return o;o+=1,a=n()}return-1}insertBefore(t,n){t!=null&&(this.remove(t),t.next=n,n!=null?(t.prev=n.prev,n.prev!=null&&(n.prev.next=t),n.prev=t,n===this.head&&(this.head=t)):this.tail!=null?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)}offset(t){let n=0,a=this.head;for(;a!=null;){if(a===t)return n;n+=a.length(),a=a.next}return-1}remove(t){this.contains(t)&&(t.prev!=null&&(t.prev.next=t.next),t.next!=null&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)}iterator(t=this.head){return()=>{const n=t;return t!=null&&(t=t.next),n}}find(t,n=!1){const a=this.iterator();let o=a();for(;o;){const l=o.length();if(t<l||n&&t===l&&(o.next==null||o.next.length()!==0))return[o,t];t-=l,o=a()}return[null,0]}forEach(t){const n=this.iterator();let a=n();for(;a;)t(a),a=n()}forEachAt(t,n,a){if(n<=0)return;const[o,l]=this.find(t);let d=t-l;const u=this.iterator(o);let h=u();for(;h&&d<t+n;){const f=h.length();t>d?a(h,t-d,Math.min(n,d+f-t)):a(h,0,Math.min(f,t+n-d)),d+=f,h=u()}}map(t){return this.reduce((n,a)=>(n.push(t(a)),n),[])}reduce(t,n){const a=this.iterator();let o=a();for(;o;)n=t(n,o),o=a();return n}}function Hb(s,t){const n=t.find(s);if(n)return n;try{return t.create(s)}catch{const a=t.create(tt.INLINE);return Array.from(s.childNodes).forEach(o=>{a.domNode.appendChild(o)}),s.parentNode&&s.parentNode.replaceChild(a.domNode,s),a.attach(),a}}const Ik=class xi extends Pk{constructor(t,n){super(t,n),this.uiNode=null,this.build()}appendChild(t){this.insertBefore(t)}attach(){super.attach(),this.children.forEach(t=>{t.attach()})}attachUI(t){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=t,xi.uiClass&&this.uiNode.classList.add(xi.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new rM,Array.from(this.domNode.childNodes).filter(t=>t!==this.uiNode).reverse().forEach(t=>{try{const n=Hb(t,this.scroll);this.insertBefore(n,this.children.head||void 0)}catch(n){if(n instanceof yl)return;throw n}})}deleteAt(t,n){if(t===0&&n===this.length())return this.remove();this.children.forEachAt(t,n,(a,o,l)=>{a.deleteAt(o,l)})}descendant(t,n=0){const[a,o]=this.children.find(n);return t.blotName==null&&t(a)||t.blotName!=null&&a instanceof t?[a,o]:a instanceof xi?a.descendant(t,o):[null,-1]}descendants(t,n=0,a=Number.MAX_VALUE){let o=[],l=a;return this.children.forEachAt(n,a,(d,u,h)=>{(t.blotName==null&&t(d)||t.blotName!=null&&d instanceof t)&&o.push(d),d instanceof xi&&(o=o.concat(d.descendants(t,u,l))),l-=h}),o}detach(){this.children.forEach(t=>{t.detach()}),super.detach()}enforceAllowedChildren(){let t=!1;this.children.forEach(n=>{t||this.statics.allowedChildren.some(a=>n instanceof a)||(n.statics.scope===tt.BLOCK_BLOT?(n.next!=null&&this.splitAfter(n),n.prev!=null&&this.splitAfter(n.prev),n.parent.unwrap(),t=!0):n instanceof xi?n.unwrap():n.remove())})}formatAt(t,n,a,o){this.children.forEachAt(t,n,(l,d,u)=>{l.formatAt(d,u,a,o)})}insertAt(t,n,a){const[o,l]=this.children.find(t);if(o)o.insertAt(l,n,a);else{const d=a==null?this.scroll.create("text",n):this.scroll.create(n,a);this.appendChild(d)}}insertBefore(t,n){t.parent!=null&&t.parent.children.remove(t);let a=null;this.children.insertBefore(t,n||null),t.parent=this,n!=null&&(a=n.domNode),(this.domNode.parentNode!==t.domNode||this.domNode.nextSibling!==a)&&this.domNode.insertBefore(t.domNode,a),t.attach()}length(){return this.children.reduce((t,n)=>t+n.length(),0)}moveChildren(t,n){this.children.forEach(a=>{t.insertBefore(a,n)})}optimize(t){if(super.optimize(t),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const n=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(n)}else this.remove()}path(t,n=!1){const[a,o]=this.children.find(t,n),l=[[this,t]];return a instanceof xi?l.concat(a.path(o,n)):(a!=null&&l.push([a,o]),l)}removeChild(t){this.children.remove(t)}replaceWith(t,n){const a=typeof t=="string"?this.scroll.create(t,n):t;return a instanceof xi&&this.moveChildren(a),super.replaceWith(a)}split(t,n=!1){if(!n){if(t===0)return this;if(t===this.length())return this.next}const a=this.clone();return this.parent&&this.parent.insertBefore(a,this.next||void 0),this.children.forEachAt(t,this.length(),(o,l,d)=>{const u=o.split(l,n);u!=null&&a.appendChild(u)}),a}splitAfter(t){const n=this.clone();for(;t.next!=null;)n.appendChild(t.next);return this.parent&&this.parent.insertBefore(n,this.next||void 0),n}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(t,n){const a=[],o=[];t.forEach(l=>{l.target===this.domNode&&l.type==="childList"&&(a.push(...l.addedNodes),o.push(...l.removedNodes))}),o.forEach(l=>{if(l.parentNode!=null&&l.tagName!=="IFRAME"&&document.body.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const d=this.scroll.find(l);d!=null&&(d.domNode.parentNode==null||d.domNode.parentNode===this.domNode)&&d.detach()}),a.filter(l=>l.parentNode===this.domNode&&l!==this.uiNode).sort((l,d)=>l===d?0:l.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(l=>{let d=null;l.nextSibling!=null&&(d=this.scroll.find(l.nextSibling));const u=Hb(l,this.scroll);(u.next!==d||u.next==null)&&(u.parent!=null&&u.parent.removeChild(this),this.insertBefore(u,d||void 0))}),this.enforceAllowedChildren()}};Ik.uiClass="";let aM=Ik;const zr=aM;function iM(s,t){if(Object.keys(s).length!==Object.keys(t).length)return!1;for(const n in s)if(s[n]!==t[n])return!1;return!0}const rl=class al extends zr{static create(t){return super.create(t)}static formats(t,n){const a=n.query(al.blotName);if(!(a!=null&&t.tagName===a.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(t,n){super(t,n),this.attributes=new qm(this.domNode)}format(t,n){if(t===this.statics.blotName&&!n)this.children.forEach(a=>{a instanceof al||(a=a.wrap(al.blotName,!0)),this.attributes.copy(a)}),this.unwrap();else{const a=this.scroll.query(t,tt.INLINE);if(a==null)return;a instanceof da?this.attributes.attribute(a,n):n&&(t!==this.statics.blotName||this.formats()[t]!==n)&&this.replaceWith(t,n)}}formats(){const t=this.attributes.values(),n=this.statics.formats(this.domNode,this.scroll);return n!=null&&(t[this.statics.blotName]=n),t}formatAt(t,n,a,o){this.formats()[a]!=null||this.scroll.query(a,tt.ATTRIBUTE)?this.isolate(t,n).format(a,o):super.formatAt(t,n,a,o)}optimize(t){super.optimize(t);const n=this.formats();if(Object.keys(n).length===0)return this.unwrap();const a=this.next;a instanceof al&&a.prev===this&&iM(n,a.formats())&&(a.moveChildren(this),a.remove())}replaceWith(t,n){const a=super.replaceWith(t,n);return this.attributes.copy(a),a}update(t,n){super.update(t,n),t.some(a=>a.target===this.domNode&&a.type==="attributes")&&this.attributes.build()}wrap(t,n){const a=super.wrap(t,n);return a instanceof al&&this.attributes.move(a),a}};rl.allowedChildren=[rl,un],rl.blotName="inline",rl.scope=tt.INLINE_BLOT,rl.tagName="SPAN";let oM=rl;const ig=oM,il=class Xp extends zr{static create(t){return super.create(t)}static formats(t,n){const a=n.query(Xp.blotName);if(!(a!=null&&t.tagName===a.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(t,n){super(t,n),this.attributes=new qm(this.domNode)}format(t,n){const a=this.scroll.query(t,tt.BLOCK);a!=null&&(a instanceof da?this.attributes.attribute(a,n):t===this.statics.blotName&&!n?this.replaceWith(Xp.blotName):n&&(t!==this.statics.blotName||this.formats()[t]!==n)&&this.replaceWith(t,n))}formats(){const t=this.attributes.values(),n=this.statics.formats(this.domNode,this.scroll);return n!=null&&(t[this.statics.blotName]=n),t}formatAt(t,n,a,o){this.scroll.query(a,tt.BLOCK)!=null?this.format(a,o):super.formatAt(t,n,a,o)}insertAt(t,n,a){if(a==null||this.scroll.query(n,tt.INLINE)!=null)super.insertAt(t,n,a);else{const o=this.split(t);if(o!=null){const l=this.scroll.create(n,a);o.parent.insertBefore(l,o)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(t,n){const a=super.replaceWith(t,n);return this.attributes.copy(a),a}update(t,n){super.update(t,n),t.some(a=>a.target===this.domNode&&a.type==="attributes")&&this.attributes.build()}};il.blotName="block",il.scope=tt.BLOCK_BLOT,il.tagName="P",il.allowedChildren=[ig,il,un];let lM=il;const Xc=lM,Zp=class extends zr{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(t,n){super.deleteAt(t,n),this.enforceAllowedChildren()}formatAt(t,n,a,o){super.formatAt(t,n,a,o),this.enforceAllowedChildren()}insertAt(t,n,a){super.insertAt(t,n,a),this.enforceAllowedChildren()}optimize(t){super.optimize(t),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};Zp.blotName="container",Zp.scope=tt.BLOCK_BLOT;let cM=Zp;const Fm=cM;class dM extends un{static formats(t,n){}format(t,n){super.formatAt(0,this.length(),t,n)}formatAt(t,n,a,o){t===0&&n===this.length()?this.format(a,o):super.formatAt(t,n,a,o)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const rr=dM,uM={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},mM=100,ol=class extends zr{constructor(t,n){super(null,n),this.registry=t,this.scroll=this,this.build(),this.observer=new MutationObserver(a=>{this.update(a)}),this.observer.observe(this.domNode,uM),this.attach()}create(t,n){return this.registry.create(this,t,n)}find(t,n=!1){const a=this.registry.find(t,n);return a?a.scroll===this?a:n?this.find(a.scroll.domNode.parentNode,!0):null:null}query(t,n=tt.ANY){return this.registry.query(t,n)}register(...t){return this.registry.register(...t)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(t,n){this.update(),t===0&&n===this.length()?this.children.forEach(a=>{a.remove()}):super.deleteAt(t,n)}formatAt(t,n,a,o){this.update(),super.formatAt(t,n,a,o)}insertAt(t,n,a){this.update(),super.insertAt(t,n,a)}optimize(t=[],n={}){super.optimize(n);const a=n.mutationsMap||new WeakMap;let o=Array.from(this.observer.takeRecords());for(;o.length>0;)t.push(o.pop());const l=(h,f=!0)=>{h==null||h===this||h.domNode.parentNode!=null&&(a.has(h.domNode)||a.set(h.domNode,[]),f&&l(h.parent))},d=h=>{a.has(h.domNode)&&(h instanceof zr&&h.children.forEach(d),a.delete(h.domNode),h.optimize(n))};let u=t;for(let h=0;u.length>0;h+=1){if(h>=mM)throw new Error("[Parchment] Maximum optimize iterations reached");for(u.forEach(f=>{const b=this.find(f.target,!0);b!=null&&(b.domNode===f.target&&(f.type==="childList"?(l(this.find(f.previousSibling,!1)),Array.from(f.addedNodes).forEach(v=>{const y=this.find(v,!1);l(y,!1),y instanceof zr&&y.children.forEach(N=>{l(N,!1)})})):f.type==="attributes"&&l(b.prev)),l(b))}),this.children.forEach(d),u=Array.from(this.observer.takeRecords()),o=u.slice();o.length>0;)t.push(o.pop())}}update(t,n={}){t=t||this.observer.takeRecords();const a=new WeakMap;t.map(o=>{const l=this.find(o.target,!0);return l==null?null:a.has(l.domNode)?(a.get(l.domNode).push(o),null):(a.set(l.domNode,[o]),l)}).forEach(o=>{o!=null&&o!==this&&a.has(o.domNode)&&o.update(a.get(o.domNode)||[],n)}),n.mutationsMap=a,a.has(this.domNode)&&super.update(a.get(this.domNode),n),this.optimize(t,n)}};ol.blotName="scroll",ol.defaultChild=Xc,ol.allowedChildren=[Xc,Fm],ol.scope=tt.BLOCK_BLOT,ol.tagName="DIV";let hM=ol;const og=hM,Jp=class Ok extends un{static create(t){return document.createTextNode(t)}static value(t){return t.data}constructor(t,n){super(t,n),this.text=this.statics.value(this.domNode)}deleteAt(t,n){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+n)}index(t,n){return this.domNode===t?n:-1}insertAt(t,n,a){a==null?(this.text=this.text.slice(0,t)+n+this.text.slice(t),this.domNode.data=this.text):super.insertAt(t,n,a)}length(){return this.text.length}optimize(t){super.optimize(t),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof Ok&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(t,n=!1){return[this.domNode,t]}split(t,n=!1){if(!n){if(t===0)return this;if(t===this.length())return this.next}const a=this.scroll.create(this.domNode.splitText(t));return this.parent.insertBefore(a,this.next||void 0),this.text=this.statics.value(this.domNode),a}update(t,n){t.some(a=>a.type==="characterData"&&a.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};Jp.blotName="text",Jp.scope=tt.INLINE_BLOT;let fM=Jp;const lm=fM,pM=Object.freeze(Object.defineProperty({__proto__:null,Attributor:da,AttributorStore:qm,BlockBlot:Xc,ClassAttributor:Wr,ContainerBlot:Fm,EmbedBlot:rr,InlineBlot:ig,LeafBlot:un,ParentBlot:zr,Registry:Al,Scope:tt,ScrollBlot:og,StyleAttributor:Li,TextBlot:lm},Symbol.toStringTag,{value:"Module"}));var gu={exports:{}},Wf,Kb;function xM(){if(Kb)return Wf;Kb=1;var s=-1,t=1,n=0;function a(L,X,z,V,se){if(L===X)return L?[[n,L]]:[];if(z!=null){var I=me(L,X,z);if(I)return I}var O=u(L,X),T=L.substring(0,O);L=L.substring(O),X=X.substring(O),O=f(L,X);var Y=L.substring(L.length-O);L=L.substring(0,L.length-O),X=X.substring(0,X.length-O);var Q=o(L,X);return T&&Q.unshift([n,T]),Y&&Q.push([n,Y]),E(Q,se),V&&v(Q),Q}function o(L,X){var z;if(!L)return[[t,X]];if(!X)return[[s,L]];var V=L.length>X.length?L:X,se=L.length>X.length?X:L,I=V.indexOf(se);if(I!==-1)return z=[[t,V.substring(0,I)],[n,se],[t,V.substring(I+se.length)]],L.length>X.length&&(z[0][0]=z[2][0]=s),z;if(se.length===1)return[[s,L],[t,X]];var O=b(L,X);if(O){var T=O[0],Y=O[1],Q=O[2],F=O[3],te=O[4],B=a(T,Q),U=a(Y,F);return B.concat([[n,te]],U)}return l(L,X)}function l(L,X){for(var z=L.length,V=X.length,se=Math.ceil((z+V)/2),I=se,O=2*se,T=new Array(O),Y=new Array(O),Q=0;Q<O;Q++)T[Q]=-1,Y[Q]=-1;T[I+1]=0,Y[I+1]=0;for(var F=z-V,te=F%2!==0,B=0,U=0,M=0,q=0,oe=0;oe<se;oe++){for(var he=-oe+B;he<=oe-U;he+=2){var Se=I+he,be;he===-oe||he!==oe&&T[Se-1]<T[Se+1]?be=T[Se+1]:be=T[Se-1]+1;for(var Pe=be-he;be<z&&Pe<V&&L.charAt(be)===X.charAt(Pe);)be++,Pe++;if(T[Se]=be,be>z)U+=2;else if(Pe>V)B+=2;else if(te){var Me=I+F-he;if(Me>=0&&Me<O&&Y[Me]!==-1){var Fe=z-Y[Me];if(be>=Fe)return d(L,X,be,Pe)}}}for(var Je=-oe+M;Je<=oe-q;Je+=2){var Me=I+Je,Fe;Je===-oe||Je!==oe&&Y[Me-1]<Y[Me+1]?Fe=Y[Me+1]:Fe=Y[Me-1]+1;for(var lt=Fe-Je;Fe<z&&lt<V&&L.charAt(z-Fe-1)===X.charAt(V-lt-1);)Fe++,lt++;if(Y[Me]=Fe,Fe>z)q+=2;else if(lt>V)M+=2;else if(!te){var Se=I+F-Je;if(Se>=0&&Se<O&&T[Se]!==-1){var be=T[Se],Pe=I+be-Se;if(Fe=z-Fe,be>=Fe)return d(L,X,be,Pe)}}}}return[[s,L],[t,X]]}function d(L,X,z,V){var se=L.substring(0,z),I=X.substring(0,V),O=L.substring(z),T=X.substring(V),Y=a(se,I),Q=a(O,T);return Y.concat(Q)}function u(L,X){if(!L||!X||L.charAt(0)!==X.charAt(0))return 0;for(var z=0,V=Math.min(L.length,X.length),se=V,I=0;z<se;)L.substring(I,se)==X.substring(I,se)?(z=se,I=z):V=se,se=Math.floor((V-z)/2+z);return S(L.charCodeAt(se-1))&&se--,se}function h(L,X){var z=L.length,V=X.length;if(z==0||V==0)return 0;z>V?L=L.substring(z-V):z<V&&(X=X.substring(0,z));var se=Math.min(z,V);if(L==X)return se;for(var I=0,O=1;;){var T=L.substring(se-O),Y=X.indexOf(T);if(Y==-1)return I;O+=Y,(Y==0||L.substring(se-O)==X.substring(0,O))&&(I=O,O++)}}function f(L,X){if(!L||!X||L.slice(-1)!==X.slice(-1))return 0;for(var z=0,V=Math.min(L.length,X.length),se=V,I=0;z<se;)L.substring(L.length-se,L.length-I)==X.substring(X.length-se,X.length-I)?(z=se,I=z):V=se,se=Math.floor((V-z)/2+z);return R(L.charCodeAt(L.length-se))&&se--,se}function b(L,X){var z=L.length>X.length?L:X,V=L.length>X.length?X:L;if(z.length<4||V.length*2<z.length)return null;function se(U,M,q){for(var oe=U.substring(q,q+Math.floor(U.length/4)),he=-1,Se="",be,Pe,Me,Fe;(he=M.indexOf(oe,he+1))!==-1;){var Je=u(U.substring(q),M.substring(he)),lt=f(U.substring(0,q),M.substring(0,he));Se.length<lt+Je&&(Se=M.substring(he-lt,he)+M.substring(he,he+Je),be=U.substring(0,q-lt),Pe=U.substring(q+Je),Me=M.substring(0,he-lt),Fe=M.substring(he+Je))}return Se.length*2>=U.length?[be,Pe,Me,Fe,Se]:null}var I=se(z,V,Math.ceil(z.length/4)),O=se(z,V,Math.ceil(z.length/2)),T;if(!I&&!O)return null;O?I?T=I[4].length>O[4].length?I:O:T=O:T=I;var Y,Q,F,te;L.length>X.length?(Y=T[0],Q=T[1],F=T[2],te=T[3]):(F=T[0],te=T[1],Y=T[2],Q=T[3]);var B=T[4];return[Y,Q,F,te,B]}function v(L){for(var X=!1,z=[],V=0,se=null,I=0,O=0,T=0,Y=0,Q=0;I<L.length;)L[I][0]==n?(z[V++]=I,O=Y,T=Q,Y=0,Q=0,se=L[I][1]):(L[I][0]==t?Y+=L[I][1].length:Q+=L[I][1].length,se&&se.length<=Math.max(O,T)&&se.length<=Math.max(Y,Q)&&(L.splice(z[V-1],0,[s,se]),L[z[V-1]+1][0]=t,V--,V--,I=V>0?z[V-1]:-1,O=0,T=0,Y=0,Q=0,se=null,X=!0)),I++;for(X&&E(L),A(L),I=1;I<L.length;){if(L[I-1][0]==s&&L[I][0]==t){var F=L[I-1][1],te=L[I][1],B=h(F,te),U=h(te,F);B>=U?(B>=F.length/2||B>=te.length/2)&&(L.splice(I,0,[n,te.substring(0,B)]),L[I-1][1]=F.substring(0,F.length-B),L[I+1][1]=te.substring(B),I++):(U>=F.length/2||U>=te.length/2)&&(L.splice(I,0,[n,F.substring(0,U)]),L[I-1][0]=t,L[I-1][1]=te.substring(0,te.length-U),L[I+1][0]=s,L[I+1][1]=F.substring(U),I++),I++}I++}}var y=/[^a-zA-Z0-9]/,N=/\s/,C=/[\r\n]/,g=/\n\r?\n$/,k=/^\r?\n\r?\n/;function A(L){function X(U,M){if(!U||!M)return 6;var q=U.charAt(U.length-1),oe=M.charAt(0),he=q.match(y),Se=oe.match(y),be=he&&q.match(N),Pe=Se&&oe.match(N),Me=be&&q.match(C),Fe=Pe&&oe.match(C),Je=Me&&U.match(g),lt=Fe&&M.match(k);return Je||lt?5:Me||Fe?4:he&&!be&&Pe?3:be||Pe?2:he||Se?1:0}for(var z=1;z<L.length-1;){if(L[z-1][0]==n&&L[z+1][0]==n){var V=L[z-1][1],se=L[z][1],I=L[z+1][1],O=f(V,se);if(O){var T=se.substring(se.length-O);V=V.substring(0,V.length-O),se=T+se.substring(0,se.length-O),I=T+I}for(var Y=V,Q=se,F=I,te=X(V,se)+X(se,I);se.charAt(0)===I.charAt(0);){V+=se.charAt(0),se=se.substring(1)+I.charAt(0),I=I.substring(1);var B=X(V,se)+X(se,I);B>=te&&(te=B,Y=V,Q=se,F=I)}L[z-1][1]!=Y&&(Y?L[z-1][1]=Y:(L.splice(z-1,1),z--),L[z][1]=Q,F?L[z+1][1]=F:(L.splice(z+1,1),z--))}z++}}function E(L,X){L.push([n,""]);for(var z=0,V=0,se=0,I="",O="",T;z<L.length;){if(z<L.length-1&&!L[z][1]){L.splice(z,1);continue}switch(L[z][0]){case t:se++,O+=L[z][1],z++;break;case s:V++,I+=L[z][1],z++;break;case n:var Y=z-se-V-1;if(X){if(Y>=0&&re(L[Y][1])){var Q=L[Y][1].slice(-1);if(L[Y][1]=L[Y][1].slice(0,-1),I=Q+I,O=Q+O,!L[Y][1]){L.splice(Y,1),z--;var F=Y-1;L[F]&&L[F][0]===t&&(se++,O=L[F][1]+O,F--),L[F]&&L[F][0]===s&&(V++,I=L[F][1]+I,F--),Y=F}}if(H(L[z][1])){var Q=L[z][1].charAt(0);L[z][1]=L[z][1].slice(1),I+=Q,O+=Q}}if(z<L.length-1&&!L[z][1]){L.splice(z,1);break}if(I.length>0||O.length>0){I.length>0&&O.length>0&&(T=u(O,I),T!==0&&(Y>=0?L[Y][1]+=O.substring(0,T):(L.splice(0,0,[n,O.substring(0,T)]),z++),O=O.substring(T),I=I.substring(T)),T=f(O,I),T!==0&&(L[z][1]=O.substring(O.length-T)+L[z][1],O=O.substring(0,O.length-T),I=I.substring(0,I.length-T)));var te=se+V;I.length===0&&O.length===0?(L.splice(z-te,te),z=z-te):I.length===0?(L.splice(z-te,te,[t,O]),z=z-te+1):O.length===0?(L.splice(z-te,te,[s,I]),z=z-te+1):(L.splice(z-te,te,[s,I],[t,O]),z=z-te+2)}z!==0&&L[z-1][0]===n?(L[z-1][1]+=L[z][1],L.splice(z,1)):z++,se=0,V=0,I="",O="";break}}L[L.length-1][1]===""&&L.pop();var B=!1;for(z=1;z<L.length-1;)L[z-1][0]===n&&L[z+1][0]===n&&(L[z][1].substring(L[z][1].length-L[z-1][1].length)===L[z-1][1]?(L[z][1]=L[z-1][1]+L[z][1].substring(0,L[z][1].length-L[z-1][1].length),L[z+1][1]=L[z-1][1]+L[z+1][1],L.splice(z-1,1),B=!0):L[z][1].substring(0,L[z+1][1].length)==L[z+1][1]&&(L[z-1][1]+=L[z+1][1],L[z][1]=L[z][1].substring(L[z+1][1].length)+L[z+1][1],L.splice(z+1,1),B=!0)),z++;B&&E(L,X)}function S(L){return L>=55296&&L<=56319}function R(L){return L>=56320&&L<=57343}function H(L){return R(L.charCodeAt(0))}function re(L){return S(L.charCodeAt(L.length-1))}function K(L){for(var X=[],z=0;z<L.length;z++)L[z][1].length>0&&X.push(L[z]);return X}function ee(L,X,z,V){return re(L)||H(V)?null:K([[n,L],[s,X],[t,z],[n,V]])}function me(L,X,z){var V=typeof z=="number"?{index:z,length:0}:z.oldRange,se=typeof z=="number"?null:z.newRange,I=L.length,O=X.length;if(V.length===0&&(se===null||se.length===0)){var T=V.index,Y=L.slice(0,T),Q=L.slice(T),F=se?se.index:null;e:{var te=T+O-I;if(F!==null&&F!==te||te<0||te>O)break e;var B=X.slice(0,te),U=X.slice(te);if(U!==Q)break e;var M=Math.min(T,te),q=Y.slice(0,M),oe=B.slice(0,M);if(q!==oe)break e;var he=Y.slice(M),Se=B.slice(M);return ee(q,he,Se,Q)}e:{if(F!==null&&F!==T)break e;var be=T,B=X.slice(0,be),U=X.slice(be);if(B!==Y)break e;var Pe=Math.min(I-be,O-be),Me=Q.slice(Q.length-Pe),Fe=U.slice(U.length-Pe);if(Me!==Fe)break e;var he=Q.slice(0,Q.length-Pe),Se=U.slice(0,U.length-Pe);return ee(Y,he,Se,Me)}}if(V.length>0&&se&&se.length===0)e:{var q=L.slice(0,V.index),Me=L.slice(V.index+V.length),M=q.length,Pe=Me.length;if(O<M+Pe)break e;var oe=X.slice(0,M),Fe=X.slice(O-Pe);if(q!==oe||Me!==Fe)break e;var he=L.slice(M,I-Pe),Se=X.slice(M,O-Pe);return ee(q,he,Se,Me)}return null}function pe(L,X,z,V){return a(L,X,z,V,!0)}return pe.INSERT=t,pe.DELETE=s,pe.EQUAL=n,Wf=pe,Wf}var Pc={exports:{}};Pc.exports;var Wb;function _k(){return Wb||(Wb=1,(function(s,t){var n=200,a="__lodash_hash_undefined__",o=9007199254740991,l="[object Arguments]",d="[object Array]",u="[object Boolean]",h="[object Date]",f="[object Error]",b="[object Function]",v="[object GeneratorFunction]",y="[object Map]",N="[object Number]",C="[object Object]",g="[object Promise]",k="[object RegExp]",A="[object Set]",E="[object String]",S="[object Symbol]",R="[object WeakMap]",H="[object ArrayBuffer]",re="[object DataView]",K="[object Float32Array]",ee="[object Float64Array]",me="[object Int8Array]",pe="[object Int16Array]",L="[object Int32Array]",X="[object Uint8Array]",z="[object Uint8ClampedArray]",V="[object Uint16Array]",se="[object Uint32Array]",I=/[\\^$.*+?()[\]{}|]/g,O=/\w*$/,T=/^\[object .+?Constructor\]$/,Y=/^(?:0|[1-9]\d*)$/,Q={};Q[l]=Q[d]=Q[H]=Q[re]=Q[u]=Q[h]=Q[K]=Q[ee]=Q[me]=Q[pe]=Q[L]=Q[y]=Q[N]=Q[C]=Q[k]=Q[A]=Q[E]=Q[S]=Q[X]=Q[z]=Q[V]=Q[se]=!0,Q[f]=Q[b]=Q[R]=!1;var F=typeof vi=="object"&&vi&&vi.Object===Object&&vi,te=typeof self=="object"&&self&&self.Object===Object&&self,B=F||te||Function("return this")(),U=t&&!t.nodeType&&t,M=U&&!0&&s&&!s.nodeType&&s,q=M&&M.exports===U;function oe(j,_){return j.set(_[0],_[1]),j}function he(j,_){return j.add(_),j}function Se(j,_){for(var G=-1,ge=j?j.length:0;++G<ge&&_(j[G],G,j)!==!1;);return j}function be(j,_){for(var G=-1,ge=_.length,ct=j.length;++G<ge;)j[ct+G]=_[G];return j}function Pe(j,_,G,ge){for(var ct=-1,Ye=j?j.length:0;++ct<Ye;)G=_(G,j[ct],ct,j);return G}function Me(j,_){for(var G=-1,ge=Array(j);++G<j;)ge[G]=_(G);return ge}function Fe(j,_){return j?.[_]}function Je(j){var _=!1;if(j!=null&&typeof j.toString!="function")try{_=!!(j+"")}catch{}return _}function lt(j){var _=-1,G=Array(j.size);return j.forEach(function(ge,ct){G[++_]=[ct,ge]}),G}function Bt(j,_){return function(G){return j(_(G))}}function Xt(j){var _=-1,G=Array(j.size);return j.forEach(function(ge){G[++_]=ge}),G}var us=Array.prototype,ws=Function.prototype,os=Object.prototype,ms=B["__core-js_shared__"],Et=(function(){var j=/[^.]+$/.exec(ms&&ms.keys&&ms.keys.IE_PROTO||"");return j?"Symbol(src)_1."+j:""})(),_t=ws.toString,wt=os.hasOwnProperty,de=os.toString,Oe=RegExp("^"+_t.call(wt).replace(I,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),st=q?B.Buffer:void 0,St=B.Symbol,Zt=B.Uint8Array,qt=Bt(Object.getPrototypeOf,Object),D=Object.create,xe=os.propertyIsEnumerable,Ke=us.splice,jt=Object.getOwnPropertySymbols,nt=st?st.isBuffer:void 0,At=Bt(Object.keys,Object),Us=ht(B,"DataView"),Qs=ht(B,"Map"),Is=ht(B,"Promise"),Ys=ht(B,"Set"),Os=ht(B,"WeakMap"),Bs=ht(Object,"create"),Hs=ls(Us),En=ls(Qs),ie=ls(Is),We=ls(Ys),Pt=ls(Os),Es=St?St.prototype:void 0,ar=Es?Es.valueOf:void 0;function _s(j){var _=-1,G=j?j.length:0;for(this.clear();++_<G;){var ge=j[_];this.set(ge[0],ge[1])}}function Gr(){this.__data__=Bs?Bs(null):{}}function ir(j){return this.has(j)&&delete this.__data__[j]}function Mi(j){var _=this.__data__;if(Bs){var G=_[j];return G===a?void 0:G}return wt.call(_,j)?_[j]:void 0}function js(j){var _=this.__data__;return Bs?_[j]!==void 0:wt.call(_,j)}function Ks(j,_){var G=this.__data__;return G[j]=Bs&&_===void 0?a:_,this}_s.prototype.clear=Gr,_s.prototype.delete=ir,_s.prototype.get=Mi,_s.prototype.has=js,_s.prototype.set=Ks;function ss(j){var _=-1,G=j?j.length:0;for(this.clear();++_<G;){var ge=j[_];this.set(ge[0],ge[1])}}function Qr(){this.__data__=[]}function pa(j){var _=this.__data__,G=or(_,j);if(G<0)return!1;var ge=_.length-1;return G==ge?_.pop():Ke.call(_,G,1),!0}function Ha(j){var _=this.__data__,G=or(_,j);return G<0?void 0:_[G][1]}function mn(j){return or(this.__data__,j)>-1}function Tn(j,_){var G=this.__data__,ge=or(G,j);return ge<0?G.push([j,_]):G[ge][1]=_,this}ss.prototype.clear=Qr,ss.prototype.delete=pa,ss.prototype.get=Ha,ss.prototype.has=mn,ss.prototype.set=Tn;function xs(j){var _=-1,G=j?j.length:0;for(this.clear();++_<G;){var ge=j[_];this.set(ge[0],ge[1])}}function xa(){this.__data__={hash:new _s,map:new(Qs||ss),string:new _s}}function Ka(j){return Cr(this,j).delete(j)}function Wa(j){return Cr(this,j).get(j)}function Ve(j){return Cr(this,j).has(j)}function J(j,_){return Cr(this,j).set(j,_),this}xs.prototype.clear=xa,xs.prototype.delete=Ka,xs.prototype.get=Wa,xs.prototype.has=Ve,xs.prototype.set=J;function we(j){this.__data__=new ss(j)}function ze(){this.__data__=new ss}function Ut(j){return this.__data__.delete(j)}function ut(j){return this.__data__.get(j)}function Jt(j){return this.__data__.has(j)}function gs(j,_){var G=this.__data__;if(G instanceof ss){var ge=G.__data__;if(!Qs||ge.length<n-1)return ge.push([j,_]),this;G=this.__data__=new xs(ge)}return G.set(j,_),this}we.prototype.clear=ze,we.prototype.delete=Ut,we.prototype.get=ut,we.prototype.has=Jt,we.prototype.set=gs;function Ls(j,_){var G=An(j)||ur(j)?Me(j.length,String):[],ge=G.length,ct=!!ge;for(var Ye in j)wt.call(j,Ye)&&!(ct&&(Ye=="length"||Io(Ye,ge)))&&G.push(Ye);return G}function rn(j,_,G){var ge=j[_];(!(wt.call(j,_)&&Zr(ge,G))||G===void 0&&!(_ in j))&&(j[_]=G)}function or(j,_){for(var G=j.length;G--;)if(Zr(j[G][0],_))return G;return-1}function Ft(j,_){return j&&va(_,Bi(_),j)}function Hn(j,_,G,ge,ct,Ye,Nt){var kt;if(ge&&(kt=Ye?ge(j,ct,Ye,Nt):ge(j)),kt!==void 0)return kt;if(!fn(j))return j;var Ht=An(j);if(Ht){if(kt=$i(j),!_)return Po(j,kt)}else{var Tt=dr(j),Ns=Tt==b||Tt==v;if(Jr(j))return Va(j,_);if(Tt==C||Tt==l||Ns&&!Ye){if(Je(j))return Ye?j:{};if(kt=Kn(Ns?{}:j),!_)return ya(j,Ft(kt,j))}else{if(!Q[Tt])return Ye?j:{};kt=Ro(j,Tt,Hn,_)}}Nt||(Nt=new we);var Zs=Nt.get(j);if(Zs)return Zs;if(Nt.set(j,kt),!Ht)var cs=G?Kl(j):Bi(j);return Se(cs||j,function(ks,Ts){cs&&(Ts=ks,ks=j[Ts]),rn(kt,Ts,Hn(ks,_,G,ge,Ts,j,Nt))}),kt}function Xs(j){return fn(j)?D(j):{}}function Fl(j,_,G){var ge=_(j);return An(j)?ge:be(ge,G(j))}function hn(j){return de.call(j)}function zl(j){if(!fn(j)||Ga(j))return!1;var _=Fi(j)||Je(j)?Oe:T;return _.test(ls(j))}function Ul(j){if(!Wn(j))return At(j);var _=[];for(var G in Object(j))wt.call(j,G)&&G!="constructor"&&_.push(G);return _}function Va(j,_){if(_)return j.slice();var G=new j.constructor(j.length);return j.copy(G),G}function Yr(j){var _=new j.constructor(j.byteLength);return new Zt(_).set(new Zt(j)),_}function lr(j,_){var G=_?Yr(j.buffer):j.buffer;return new j.constructor(G,j.byteOffset,j.byteLength)}function Xr(j,_,G){var ge=_?G(lt(j),!0):lt(j);return Pe(ge,oe,new j.constructor)}function ga(j){var _=new j.constructor(j.source,O.exec(j));return _.lastIndex=j.lastIndex,_}function Bl(j,_,G){var ge=_?G(Xt(j),!0):Xt(j);return Pe(ge,he,new j.constructor)}function Hl(j){return ar?Object(ar.call(j)):{}}function Di(j,_){var G=_?Yr(j.buffer):j.buffer;return new j.constructor(G,j.byteOffset,j.length)}function Po(j,_){var G=-1,ge=j.length;for(_||(_=Array(ge));++G<ge;)_[G]=j[G];return _}function va(j,_,G,ge){G||(G={});for(var ct=-1,Ye=_.length;++ct<Ye;){var Nt=_[ct],kt=void 0;rn(G,Nt,kt===void 0?j[Nt]:kt)}return G}function ya(j,_){return va(j,cr(j),_)}function Kl(j){return Fl(j,Bi,cr)}function Cr(j,_){var G=j.__data__;return qi(_)?G[typeof _=="string"?"string":"hash"]:G.map}function ht(j,_){var G=Fe(j,_);return zl(G)?G:void 0}var cr=jt?Bt(jt,Object):ba,dr=hn;(Us&&dr(new Us(new ArrayBuffer(1)))!=re||Qs&&dr(new Qs)!=y||Is&&dr(Is.resolve())!=g||Ys&&dr(new Ys)!=A||Os&&dr(new Os)!=R)&&(dr=function(j){var _=de.call(j),G=_==C?j.constructor:void 0,ge=G?ls(G):void 0;if(ge)switch(ge){case Hs:return re;case En:return y;case ie:return g;case We:return A;case Pt:return R}return _});function $i(j){var _=j.length,G=j.constructor(_);return _&&typeof j[0]=="string"&&wt.call(j,"index")&&(G.index=j.index,G.input=j.input),G}function Kn(j){return typeof j.constructor=="function"&&!Wn(j)?Xs(qt(j)):{}}function Ro(j,_,G,ge){var ct=j.constructor;switch(_){case H:return Yr(j);case u:case h:return new ct(+j);case re:return lr(j,ge);case K:case ee:case me:case pe:case L:case X:case z:case V:case se:return Di(j,ge);case y:return Xr(j,ge,G);case N:case E:return new ct(j);case k:return ga(j);case A:return Bl(j,ge,G);case S:return Hl(j)}}function Io(j,_){return _=_??o,!!_&&(typeof j=="number"||Y.test(j))&&j>-1&&j%1==0&&j<_}function qi(j){var _=typeof j;return _=="string"||_=="number"||_=="symbol"||_=="boolean"?j!=="__proto__":j===null}function Ga(j){return!!Et&&Et in j}function Wn(j){var _=j&&j.constructor,G=typeof _=="function"&&_.prototype||os;return j===G}function ls(j){if(j!=null){try{return _t.call(j)}catch{}try{return j+""}catch{}}return""}function Vn(j){return Hn(j,!0,!0)}function Zr(j,_){return j===_||j!==j&&_!==_}function ur(j){return Oo(j)&&wt.call(j,"callee")&&(!xe.call(j,"callee")||de.call(j)==l)}var An=Array.isArray;function Qa(j){return j!=null&&zi(j.length)&&!Fi(j)}function Oo(j){return Ui(j)&&Qa(j)}var Jr=nt||wa;function Fi(j){var _=fn(j)?de.call(j):"";return _==b||_==v}function zi(j){return typeof j=="number"&&j>-1&&j%1==0&&j<=o}function fn(j){var _=typeof j;return!!j&&(_=="object"||_=="function")}function Ui(j){return!!j&&typeof j=="object"}function Bi(j){return Qa(j)?Ls(j):Ul(j)}function ba(){return[]}function wa(){return!1}s.exports=Vn})(Pc,Pc.exports)),Pc.exports}var Rc={exports:{}};Rc.exports;var Vb;function Lk(){return Vb||(Vb=1,(function(s,t){var n=200,a="__lodash_hash_undefined__",o=1,l=2,d=9007199254740991,u="[object Arguments]",h="[object Array]",f="[object AsyncFunction]",b="[object Boolean]",v="[object Date]",y="[object Error]",N="[object Function]",C="[object GeneratorFunction]",g="[object Map]",k="[object Number]",A="[object Null]",E="[object Object]",S="[object Promise]",R="[object Proxy]",H="[object RegExp]",re="[object Set]",K="[object String]",ee="[object Symbol]",me="[object Undefined]",pe="[object WeakMap]",L="[object ArrayBuffer]",X="[object DataView]",z="[object Float32Array]",V="[object Float64Array]",se="[object Int8Array]",I="[object Int16Array]",O="[object Int32Array]",T="[object Uint8Array]",Y="[object Uint8ClampedArray]",Q="[object Uint16Array]",F="[object Uint32Array]",te=/[\\^$.*+?()[\]{}|]/g,B=/^\[object .+?Constructor\]$/,U=/^(?:0|[1-9]\d*)$/,M={};M[z]=M[V]=M[se]=M[I]=M[O]=M[T]=M[Y]=M[Q]=M[F]=!0,M[u]=M[h]=M[L]=M[b]=M[X]=M[v]=M[y]=M[N]=M[g]=M[k]=M[E]=M[H]=M[re]=M[K]=M[pe]=!1;var q=typeof vi=="object"&&vi&&vi.Object===Object&&vi,oe=typeof self=="object"&&self&&self.Object===Object&&self,he=q||oe||Function("return this")(),Se=t&&!t.nodeType&&t,be=Se&&!0&&s&&!s.nodeType&&s,Pe=be&&be.exports===Se,Me=Pe&&q.process,Fe=(function(){try{return Me&&Me.binding&&Me.binding("util")}catch{}})(),Je=Fe&&Fe.isTypedArray;function lt(j,_){for(var G=-1,ge=j==null?0:j.length,ct=0,Ye=[];++G<ge;){var Nt=j[G];_(Nt,G,j)&&(Ye[ct++]=Nt)}return Ye}function Bt(j,_){for(var G=-1,ge=_.length,ct=j.length;++G<ge;)j[ct+G]=_[G];return j}function Xt(j,_){for(var G=-1,ge=j==null?0:j.length;++G<ge;)if(_(j[G],G,j))return!0;return!1}function us(j,_){for(var G=-1,ge=Array(j);++G<j;)ge[G]=_(G);return ge}function ws(j){return function(_){return j(_)}}function os(j,_){return j.has(_)}function ms(j,_){return j?.[_]}function Et(j){var _=-1,G=Array(j.size);return j.forEach(function(ge,ct){G[++_]=[ct,ge]}),G}function _t(j,_){return function(G){return j(_(G))}}function wt(j){var _=-1,G=Array(j.size);return j.forEach(function(ge){G[++_]=ge}),G}var de=Array.prototype,Oe=Function.prototype,st=Object.prototype,St=he["__core-js_shared__"],Zt=Oe.toString,qt=st.hasOwnProperty,D=(function(){var j=/[^.]+$/.exec(St&&St.keys&&St.keys.IE_PROTO||"");return j?"Symbol(src)_1."+j:""})(),xe=st.toString,Ke=RegExp("^"+Zt.call(qt).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),jt=Pe?he.Buffer:void 0,nt=he.Symbol,At=he.Uint8Array,Us=st.propertyIsEnumerable,Qs=de.splice,Is=nt?nt.toStringTag:void 0,Ys=Object.getOwnPropertySymbols,Os=jt?jt.isBuffer:void 0,Bs=_t(Object.keys,Object),Hs=cr(he,"DataView"),En=cr(he,"Map"),ie=cr(he,"Promise"),We=cr(he,"Set"),Pt=cr(he,"WeakMap"),Es=cr(Object,"create"),ar=ls(Hs),_s=ls(En),Gr=ls(ie),ir=ls(We),Mi=ls(Pt),js=nt?nt.prototype:void 0,Ks=js?js.valueOf:void 0;function ss(j){var _=-1,G=j==null?0:j.length;for(this.clear();++_<G;){var ge=j[_];this.set(ge[0],ge[1])}}function Qr(){this.__data__=Es?Es(null):{},this.size=0}function pa(j){var _=this.has(j)&&delete this.__data__[j];return this.size-=_?1:0,_}function Ha(j){var _=this.__data__;if(Es){var G=_[j];return G===a?void 0:G}return qt.call(_,j)?_[j]:void 0}function mn(j){var _=this.__data__;return Es?_[j]!==void 0:qt.call(_,j)}function Tn(j,_){var G=this.__data__;return this.size+=this.has(j)?0:1,G[j]=Es&&_===void 0?a:_,this}ss.prototype.clear=Qr,ss.prototype.delete=pa,ss.prototype.get=Ha,ss.prototype.has=mn,ss.prototype.set=Tn;function xs(j){var _=-1,G=j==null?0:j.length;for(this.clear();++_<G;){var ge=j[_];this.set(ge[0],ge[1])}}function xa(){this.__data__=[],this.size=0}function Ka(j){var _=this.__data__,G=Va(_,j);if(G<0)return!1;var ge=_.length-1;return G==ge?_.pop():Qs.call(_,G,1),--this.size,!0}function Wa(j){var _=this.__data__,G=Va(_,j);return G<0?void 0:_[G][1]}function Ve(j){return Va(this.__data__,j)>-1}function J(j,_){var G=this.__data__,ge=Va(G,j);return ge<0?(++this.size,G.push([j,_])):G[ge][1]=_,this}xs.prototype.clear=xa,xs.prototype.delete=Ka,xs.prototype.get=Wa,xs.prototype.has=Ve,xs.prototype.set=J;function we(j){var _=-1,G=j==null?0:j.length;for(this.clear();++_<G;){var ge=j[_];this.set(ge[0],ge[1])}}function ze(){this.size=0,this.__data__={hash:new ss,map:new(En||xs),string:new ss}}function Ut(j){var _=ht(this,j).delete(j);return this.size-=_?1:0,_}function ut(j){return ht(this,j).get(j)}function Jt(j){return ht(this,j).has(j)}function gs(j,_){var G=ht(this,j),ge=G.size;return G.set(j,_),this.size+=G.size==ge?0:1,this}we.prototype.clear=ze,we.prototype.delete=Ut,we.prototype.get=ut,we.prototype.has=Jt,we.prototype.set=gs;function Ls(j){var _=-1,G=j==null?0:j.length;for(this.__data__=new we;++_<G;)this.add(j[_])}function rn(j){return this.__data__.set(j,a),this}function or(j){return this.__data__.has(j)}Ls.prototype.add=Ls.prototype.push=rn,Ls.prototype.has=or;function Ft(j){var _=this.__data__=new xs(j);this.size=_.size}function Hn(){this.__data__=new xs,this.size=0}function Xs(j){var _=this.__data__,G=_.delete(j);return this.size=_.size,G}function Fl(j){return this.__data__.get(j)}function hn(j){return this.__data__.has(j)}function zl(j,_){var G=this.__data__;if(G instanceof xs){var ge=G.__data__;if(!En||ge.length<n-1)return ge.push([j,_]),this.size=++G.size,this;G=this.__data__=new we(ge)}return G.set(j,_),this.size=G.size,this}Ft.prototype.clear=Hn,Ft.prototype.delete=Xs,Ft.prototype.get=Fl,Ft.prototype.has=hn,Ft.prototype.set=zl;function Ul(j,_){var G=ur(j),ge=!G&&Zr(j),ct=!G&&!ge&&Qa(j),Ye=!G&&!ge&&!ct&&Ui(j),Nt=G||ge||ct||Ye,kt=Nt?us(j.length,String):[],Ht=kt.length;for(var Tt in j)qt.call(j,Tt)&&!(Nt&&(Tt=="length"||ct&&(Tt=="offset"||Tt=="parent")||Ye&&(Tt=="buffer"||Tt=="byteLength"||Tt=="byteOffset")||Ro(Tt,Ht)))&&kt.push(Tt);return kt}function Va(j,_){for(var G=j.length;G--;)if(Vn(j[G][0],_))return G;return-1}function Yr(j,_,G){var ge=_(j);return ur(j)?ge:Bt(ge,G(j))}function lr(j){return j==null?j===void 0?me:A:Is&&Is in Object(j)?dr(j):Wn(j)}function Xr(j){return fn(j)&&lr(j)==u}function ga(j,_,G,ge,ct){return j===_?!0:j==null||_==null||!fn(j)&&!fn(_)?j!==j&&_!==_:Bl(j,_,G,ge,ga,ct)}function Bl(j,_,G,ge,ct,Ye){var Nt=ur(j),kt=ur(_),Ht=Nt?h:Kn(j),Tt=kt?h:Kn(_);Ht=Ht==u?E:Ht,Tt=Tt==u?E:Tt;var Ns=Ht==E,Zs=Tt==E,cs=Ht==Tt;if(cs&&Qa(j)){if(!Qa(_))return!1;Nt=!0,Ns=!1}if(cs&&!Ns)return Ye||(Ye=new Ft),Nt||Ui(j)?va(j,_,G,ge,ct,Ye):ya(j,_,Ht,G,ge,ct,Ye);if(!(G&o)){var ks=Ns&&qt.call(j,"__wrapped__"),Ts=Zs&&qt.call(_,"__wrapped__");if(ks||Ts){var vs=ks?j.value():j,an=Ts?_.value():_;return Ye||(Ye=new Ft),ct(vs,an,G,ge,Ye)}}return cs?(Ye||(Ye=new Ft),Kl(j,_,G,ge,ct,Ye)):!1}function Hl(j){if(!zi(j)||qi(j))return!1;var _=Jr(j)?Ke:B;return _.test(ls(j))}function Di(j){return fn(j)&&Fi(j.length)&&!!M[lr(j)]}function Po(j){if(!Ga(j))return Bs(j);var _=[];for(var G in Object(j))qt.call(j,G)&&G!="constructor"&&_.push(G);return _}function va(j,_,G,ge,ct,Ye){var Nt=G&o,kt=j.length,Ht=_.length;if(kt!=Ht&&!(Nt&&Ht>kt))return!1;var Tt=Ye.get(j);if(Tt&&Ye.get(_))return Tt==_;var Ns=-1,Zs=!0,cs=G&l?new Ls:void 0;for(Ye.set(j,_),Ye.set(_,j);++Ns<kt;){var ks=j[Ns],Ts=_[Ns];if(ge)var vs=Nt?ge(Ts,ks,Ns,_,j,Ye):ge(ks,Ts,Ns,j,_,Ye);if(vs!==void 0){if(vs)continue;Zs=!1;break}if(cs){if(!Xt(_,function(an,Sr){if(!os(cs,Sr)&&(ks===an||ct(ks,an,G,ge,Ye)))return cs.push(Sr)})){Zs=!1;break}}else if(!(ks===Ts||ct(ks,Ts,G,ge,Ye))){Zs=!1;break}}return Ye.delete(j),Ye.delete(_),Zs}function ya(j,_,G,ge,ct,Ye,Nt){switch(G){case X:if(j.byteLength!=_.byteLength||j.byteOffset!=_.byteOffset)return!1;j=j.buffer,_=_.buffer;case L:return!(j.byteLength!=_.byteLength||!Ye(new At(j),new At(_)));case b:case v:case k:return Vn(+j,+_);case y:return j.name==_.name&&j.message==_.message;case H:case K:return j==_+"";case g:var kt=Et;case re:var Ht=ge&o;if(kt||(kt=wt),j.size!=_.size&&!Ht)return!1;var Tt=Nt.get(j);if(Tt)return Tt==_;ge|=l,Nt.set(j,_);var Ns=va(kt(j),kt(_),ge,ct,Ye,Nt);return Nt.delete(j),Ns;case ee:if(Ks)return Ks.call(j)==Ks.call(_)}return!1}function Kl(j,_,G,ge,ct,Ye){var Nt=G&o,kt=Cr(j),Ht=kt.length,Tt=Cr(_),Ns=Tt.length;if(Ht!=Ns&&!Nt)return!1;for(var Zs=Ht;Zs--;){var cs=kt[Zs];if(!(Nt?cs in _:qt.call(_,cs)))return!1}var ks=Ye.get(j);if(ks&&Ye.get(_))return ks==_;var Ts=!0;Ye.set(j,_),Ye.set(_,j);for(var vs=Nt;++Zs<Ht;){cs=kt[Zs];var an=j[cs],Sr=_[cs];if(ge)var Ya=Nt?ge(Sr,an,cs,_,j,Ye):ge(an,Sr,cs,j,_,Ye);if(!(Ya===void 0?an===Sr||ct(an,Sr,G,ge,Ye):Ya)){Ts=!1;break}vs||(vs=cs=="constructor")}if(Ts&&!vs){var _o=j.constructor,Xa=_.constructor;_o!=Xa&&"constructor"in j&&"constructor"in _&&!(typeof _o=="function"&&_o instanceof _o&&typeof Xa=="function"&&Xa instanceof Xa)&&(Ts=!1)}return Ye.delete(j),Ye.delete(_),Ts}function Cr(j){return Yr(j,Bi,$i)}function ht(j,_){var G=j.__data__;return Io(_)?G[typeof _=="string"?"string":"hash"]:G.map}function cr(j,_){var G=ms(j,_);return Hl(G)?G:void 0}function dr(j){var _=qt.call(j,Is),G=j[Is];try{j[Is]=void 0;var ge=!0}catch{}var ct=xe.call(j);return ge&&(_?j[Is]=G:delete j[Is]),ct}var $i=Ys?function(j){return j==null?[]:(j=Object(j),lt(Ys(j),function(_){return Us.call(j,_)}))}:ba,Kn=lr;(Hs&&Kn(new Hs(new ArrayBuffer(1)))!=X||En&&Kn(new En)!=g||ie&&Kn(ie.resolve())!=S||We&&Kn(new We)!=re||Pt&&Kn(new Pt)!=pe)&&(Kn=function(j){var _=lr(j),G=_==E?j.constructor:void 0,ge=G?ls(G):"";if(ge)switch(ge){case ar:return X;case _s:return g;case Gr:return S;case ir:return re;case Mi:return pe}return _});function Ro(j,_){return _=_??d,!!_&&(typeof j=="number"||U.test(j))&&j>-1&&j%1==0&&j<_}function Io(j){var _=typeof j;return _=="string"||_=="number"||_=="symbol"||_=="boolean"?j!=="__proto__":j===null}function qi(j){return!!D&&D in j}function Ga(j){var _=j&&j.constructor,G=typeof _=="function"&&_.prototype||st;return j===G}function Wn(j){return xe.call(j)}function ls(j){if(j!=null){try{return Zt.call(j)}catch{}try{return j+""}catch{}}return""}function Vn(j,_){return j===_||j!==j&&_!==_}var Zr=Xr((function(){return arguments})())?Xr:function(j){return fn(j)&&qt.call(j,"callee")&&!Us.call(j,"callee")},ur=Array.isArray;function An(j){return j!=null&&Fi(j.length)&&!Jr(j)}var Qa=Os||wa;function Oo(j,_){return ga(j,_)}function Jr(j){if(!zi(j))return!1;var _=lr(j);return _==N||_==C||_==f||_==R}function Fi(j){return typeof j=="number"&&j>-1&&j%1==0&&j<=d}function zi(j){var _=typeof j;return j!=null&&(_=="object"||_=="function")}function fn(j){return j!=null&&typeof j=="object"}var Ui=Je?ws(Je):Di;function Bi(j){return An(j)?Ul(j):Po(j)}function ba(){return[]}function wa(){return!1}s.exports=Oo})(Rc,Rc.exports)),Rc.exports}var vu={},Gb;function gM(){if(Gb)return vu;Gb=1,Object.defineProperty(vu,"__esModule",{value:!0});const s=_k(),t=Lk();var n;return(function(a){function o(h={},f={},b=!1){typeof h!="object"&&(h={}),typeof f!="object"&&(f={});let v=s(f);b||(v=Object.keys(v).reduce((y,N)=>(v[N]!=null&&(y[N]=v[N]),y),{}));for(const y in h)h[y]!==void 0&&f[y]===void 0&&(v[y]=h[y]);return Object.keys(v).length>0?v:void 0}a.compose=o;function l(h={},f={}){typeof h!="object"&&(h={}),typeof f!="object"&&(f={});const b=Object.keys(h).concat(Object.keys(f)).reduce((v,y)=>(t(h[y],f[y])||(v[y]=f[y]===void 0?null:f[y]),v),{});return Object.keys(b).length>0?b:void 0}a.diff=l;function d(h={},f={}){h=h||{};const b=Object.keys(f).reduce((v,y)=>(f[y]!==h[y]&&h[y]!==void 0&&(v[y]=f[y]),v),{});return Object.keys(h).reduce((v,y)=>(h[y]!==f[y]&&f[y]===void 0&&(v[y]=null),v),b)}a.invert=d;function u(h,f,b=!1){if(typeof h!="object")return f;if(typeof f!="object")return;if(!b)return f;const v=Object.keys(f).reduce((y,N)=>(h[N]===void 0&&(y[N]=f[N]),y),{});return Object.keys(v).length>0?v:void 0}a.transform=u})(n||(n={})),vu.default=n,vu}var yu={},Qb;function Mk(){if(Qb)return yu;Qb=1,Object.defineProperty(yu,"__esModule",{value:!0});var s;return(function(t){function n(a){return typeof a.delete=="number"?a.delete:typeof a.retain=="number"?a.retain:typeof a.retain=="object"&&a.retain!==null?1:typeof a.insert=="string"?a.insert.length:1}t.length=n})(s||(s={})),yu.default=s,yu}var bu={},Yb;function vM(){if(Yb)return bu;Yb=1,Object.defineProperty(bu,"__esModule",{value:!0});const s=Mk();class t{constructor(a){this.ops=a,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(a){a||(a=1/0);const o=this.ops[this.index];if(o){const l=this.offset,d=s.default.length(o);if(a>=d-l?(a=d-l,this.index+=1,this.offset=0):this.offset+=a,typeof o.delete=="number")return{delete:a};{const u={};return o.attributes&&(u.attributes=o.attributes),typeof o.retain=="number"?u.retain=a:typeof o.retain=="object"&&o.retain!==null?u.retain=o.retain:typeof o.insert=="string"?u.insert=o.insert.substr(l,a):u.insert=o.insert,u}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?s.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const a=this.ops[this.index];return a?typeof a.delete=="number"?"delete":typeof a.retain=="number"||typeof a.retain=="object"&&a.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const a=this.offset,o=this.index,l=this.next(),d=this.ops.slice(this.index);return this.offset=a,this.index=o,[l].concat(d)}}else return[]}}return bu.default=t,bu}var Xb;function yM(){return Xb||(Xb=1,(function(s,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeMap=t.OpIterator=t.Op=void 0;const n=xM(),a=_k(),o=Lk(),l=gM();t.AttributeMap=l.default;const d=Mk();t.Op=d.default;const u=vM();t.OpIterator=u.default;const h="\0",f=(v,y)=>{if(typeof v!="object"||v===null)throw new Error(`cannot retain a ${typeof v}`);if(typeof y!="object"||y===null)throw new Error(`cannot retain a ${typeof y}`);const N=Object.keys(v)[0];if(!N||N!==Object.keys(y)[0])throw new Error(`embed types not matched: ${N} != ${Object.keys(y)[0]}`);return[N,v[N],y[N]]};class b{constructor(y){Array.isArray(y)?this.ops=y:y!=null&&Array.isArray(y.ops)?this.ops=y.ops:this.ops=[]}static registerEmbed(y,N){this.handlers[y]=N}static unregisterEmbed(y){delete this.handlers[y]}static getHandler(y){const N=this.handlers[y];if(!N)throw new Error(`no handlers for embed type "${y}"`);return N}insert(y,N){const C={};return typeof y=="string"&&y.length===0?this:(C.insert=y,N!=null&&typeof N=="object"&&Object.keys(N).length>0&&(C.attributes=N),this.push(C))}delete(y){return y<=0?this:this.push({delete:y})}retain(y,N){if(typeof y=="number"&&y<=0)return this;const C={retain:y};return N!=null&&typeof N=="object"&&Object.keys(N).length>0&&(C.attributes=N),this.push(C)}push(y){let N=this.ops.length,C=this.ops[N-1];if(y=a(y),typeof C=="object"){if(typeof y.delete=="number"&&typeof C.delete=="number")return this.ops[N-1]={delete:C.delete+y.delete},this;if(typeof C.delete=="number"&&y.insert!=null&&(N-=1,C=this.ops[N-1],typeof C!="object"))return this.ops.unshift(y),this;if(o(y.attributes,C.attributes)){if(typeof y.insert=="string"&&typeof C.insert=="string")return this.ops[N-1]={insert:C.insert+y.insert},typeof y.attributes=="object"&&(this.ops[N-1].attributes=y.attributes),this;if(typeof y.retain=="number"&&typeof C.retain=="number")return this.ops[N-1]={retain:C.retain+y.retain},typeof y.attributes=="object"&&(this.ops[N-1].attributes=y.attributes),this}}return N===this.ops.length?this.ops.push(y):this.ops.splice(N,0,y),this}chop(){const y=this.ops[this.ops.length-1];return y&&typeof y.retain=="number"&&!y.attributes&&this.ops.pop(),this}filter(y){return this.ops.filter(y)}forEach(y){this.ops.forEach(y)}map(y){return this.ops.map(y)}partition(y){const N=[],C=[];return this.forEach(g=>{(y(g)?N:C).push(g)}),[N,C]}reduce(y,N){return this.ops.reduce(y,N)}changeLength(){return this.reduce((y,N)=>N.insert?y+d.default.length(N):N.delete?y-N.delete:y,0)}length(){return this.reduce((y,N)=>y+d.default.length(N),0)}slice(y=0,N=1/0){const C=[],g=new u.default(this.ops);let k=0;for(;k<N&&g.hasNext();){let A;k<y?A=g.next(y-k):(A=g.next(N-k),C.push(A)),k+=d.default.length(A)}return new b(C)}compose(y){const N=new u.default(this.ops),C=new u.default(y.ops),g=[],k=C.peek();if(k!=null&&typeof k.retain=="number"&&k.attributes==null){let E=k.retain;for(;N.peekType()==="insert"&&N.peekLength()<=E;)E-=N.peekLength(),g.push(N.next());k.retain-E>0&&C.next(k.retain-E)}const A=new b(g);for(;N.hasNext()||C.hasNext();)if(C.peekType()==="insert")A.push(C.next());else if(N.peekType()==="delete")A.push(N.next());else{const E=Math.min(N.peekLength(),C.peekLength()),S=N.next(E),R=C.next(E);if(R.retain){const H={};if(typeof S.retain=="number")H.retain=typeof R.retain=="number"?E:R.retain;else if(typeof R.retain=="number")S.retain==null?H.insert=S.insert:H.retain=S.retain;else{const K=S.retain==null?"insert":"retain",[ee,me,pe]=f(S[K],R.retain),L=b.getHandler(ee);H[K]={[ee]:L.compose(me,pe,K==="retain")}}const re=l.default.compose(S.attributes,R.attributes,typeof S.retain=="number");if(re&&(H.attributes=re),A.push(H),!C.hasNext()&&o(A.ops[A.ops.length-1],H)){const K=new b(N.rest());return A.concat(K).chop()}}else typeof R.delete=="number"&&(typeof S.retain=="number"||typeof S.retain=="object"&&S.retain!==null)&&A.push(R)}return A.chop()}concat(y){const N=new b(this.ops.slice());return y.ops.length>0&&(N.push(y.ops[0]),N.ops=N.ops.concat(y.ops.slice(1))),N}diff(y,N){if(this.ops===y.ops)return new b;const C=[this,y].map(S=>S.map(R=>{if(R.insert!=null)return typeof R.insert=="string"?R.insert:h;const H=S===y?"on":"with";throw new Error("diff() called "+H+" non-document")}).join("")),g=new b,k=n(C[0],C[1],N,!0),A=new u.default(this.ops),E=new u.default(y.ops);return k.forEach(S=>{let R=S[1].length;for(;R>0;){let H=0;switch(S[0]){case n.INSERT:H=Math.min(E.peekLength(),R),g.push(E.next(H));break;case n.DELETE:H=Math.min(R,A.peekLength()),A.next(H),g.delete(H);break;case n.EQUAL:H=Math.min(A.peekLength(),E.peekLength(),R);const re=A.next(H),K=E.next(H);o(re.insert,K.insert)?g.retain(H,l.default.diff(re.attributes,K.attributes)):g.push(K).delete(H);break}R-=H}}),g.chop()}eachLine(y,N=`
`){const C=new u.default(this.ops);let g=new b,k=0;for(;C.hasNext();){if(C.peekType()!=="insert")return;const A=C.peek(),E=d.default.length(A)-C.peekLength(),S=typeof A.insert=="string"?A.insert.indexOf(N,E)-E:-1;if(S<0)g.push(C.next());else if(S>0)g.push(C.next(S));else{if(y(g,C.next(1).attributes||{},k)===!1)return;k+=1,g=new b}}g.length()>0&&y(g,{},k)}invert(y){const N=new b;return this.reduce((C,g)=>{if(g.insert)N.delete(d.default.length(g));else{if(typeof g.retain=="number"&&g.attributes==null)return N.retain(g.retain),C+g.retain;if(g.delete||typeof g.retain=="number"){const k=g.delete||g.retain;return y.slice(C,C+k).forEach(E=>{g.delete?N.push(E):g.retain&&g.attributes&&N.retain(d.default.length(E),l.default.invert(g.attributes,E.attributes))}),C+k}else if(typeof g.retain=="object"&&g.retain!==null){const k=y.slice(C,C+1),A=new u.default(k.ops).next(),[E,S,R]=f(g.retain,A.insert),H=b.getHandler(E);return N.retain({[E]:H.invert(S,R)},l.default.invert(g.attributes,A.attributes)),C+1}}return C},0),N.chop()}transform(y,N=!1){if(N=!!N,typeof y=="number")return this.transformPosition(y,N);const C=y,g=new u.default(this.ops),k=new u.default(C.ops),A=new b;for(;g.hasNext()||k.hasNext();)if(g.peekType()==="insert"&&(N||k.peekType()!=="insert"))A.retain(d.default.length(g.next()));else if(k.peekType()==="insert")A.push(k.next());else{const E=Math.min(g.peekLength(),k.peekLength()),S=g.next(E),R=k.next(E);if(S.delete)continue;if(R.delete)A.push(R);else{const H=S.retain,re=R.retain;let K=typeof re=="object"&&re!==null?re:E;if(typeof H=="object"&&H!==null&&typeof re=="object"&&re!==null){const ee=Object.keys(H)[0];if(ee===Object.keys(re)[0]){const me=b.getHandler(ee);me&&(K={[ee]:me.transform(H[ee],re[ee],N)})}}A.retain(K,l.default.transform(S.attributes,R.attributes,N))}}return A.chop()}transformPosition(y,N=!1){N=!!N;const C=new u.default(this.ops);let g=0;for(;C.hasNext()&&g<=y;){const k=C.peekLength(),A=C.peekType();if(C.next(),A==="delete"){y-=Math.min(k,y-g);continue}else A==="insert"&&(g<y||!N)&&(y+=k);g+=k}return y}}b.Op=d.default,b.OpIterator=u.default,b.AttributeMap=l.default,b.handlers={},t.default=b,s.exports=b,s.exports.default=b})(gu,gu.exports)),gu.exports}var Nr=yM();const Xe=ed(Nr);class Vr extends rr{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}Vr.blotName="break";Vr.tagName="BR";let Hr=class extends lm{};const bM={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function zm(s){return s.replace(/[&<>"']/g,t=>bM[t])}class bn extends ig{static allowedChildren=[bn,Vr,rr,Hr];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(t,n){const a=bn.order.indexOf(t),o=bn.order.indexOf(n);return a>=0||o>=0?a-o:t===n?0:t<n?-1:1}formatAt(t,n,a,o){if(bn.compare(this.statics.blotName,a)<0&&this.scroll.query(a,tt.BLOT)){const l=this.isolate(t,n);o&&l.wrap(a,o)}else super.formatAt(t,n,a,o)}optimize(t){if(super.optimize(t),this.parent instanceof bn&&bn.compare(this.statics.blotName,this.parent.statics.blotName)>0){const n=this.parent.isolate(this.offset(),this.length());this.moveChildren(n),n.wrap(this)}}}const Zb=1;class nn extends Xc{cache={};delta(){return this.cache.delta==null&&(this.cache.delta=Dk(this)),this.cache.delta}deleteAt(t,n){super.deleteAt(t,n),this.cache={}}formatAt(t,n,a,o){n<=0||(this.scroll.query(a,tt.BLOCK)?t+n===this.length()&&this.format(a,o):super.formatAt(t,Math.min(n,this.length()-t-1),a,o),this.cache={})}insertAt(t,n,a){if(a!=null){super.insertAt(t,n,a),this.cache={};return}if(n.length===0)return;const o=n.split(`
`),l=o.shift();l.length>0&&(t<this.length()-1||this.children.tail==null?super.insertAt(Math.min(t,this.length()-1),l):this.children.tail.insertAt(this.children.tail.length(),l),this.cache={});let d=this;o.reduce((u,h)=>(d=d.split(u,!0),d.insertAt(0,h),h.length),t+l.length)}insertBefore(t,n){const{head:a}=this.children;super.insertBefore(t,n),a instanceof Vr&&a.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+Zb),this.cache.length}moveChildren(t,n){super.moveChildren(t,n),this.cache={}}optimize(t){super.optimize(t),this.cache={}}path(t){return super.path(t,!0)}removeChild(t){super.removeChild(t),this.cache={}}split(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(n&&(t===0||t>=this.length()-Zb)){const o=this.clone();return t===0?(this.parent.insertBefore(o,this),this):(this.parent.insertBefore(o,this.next),o)}const a=super.split(t,n);return this.cache={},a}}nn.blotName="block";nn.tagName="P";nn.defaultChild=Vr;nn.allowedChildren=[Vr,bn,rr,Hr];class jr extends rr{attach(){super.attach(),this.attributes=new qm(this.domNode)}delta(){return new Xe().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(t,n){const a=this.scroll.query(t,tt.BLOCK_ATTRIBUTE);a!=null&&this.attributes.attribute(a,n)}formatAt(t,n,a,o){this.format(a,o)}insertAt(t,n,a){if(a!=null){super.insertAt(t,n,a);return}const o=n.split(`
`),l=o.pop(),d=o.map(h=>{const f=this.scroll.create(nn.blotName);return f.insertAt(0,h),f}),u=this.split(t);d.forEach(h=>{this.parent.insertBefore(h,u)}),l&&this.parent.insertBefore(this.scroll.create("text",l),u)}}jr.scope=tt.BLOCK_BLOT;function Dk(s){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return s.descendants(un).reduce((n,a)=>a.length()===0?n:n.insert(a.value(),br(a,{},t)),new Xe).insert(`
`,br(s))}function br(s){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return s==null||("formats"in s&&typeof s.formats=="function"&&(t={...t,...s.formats()},n&&delete t["code-token"]),s.parent==null||s.parent.statics.blotName==="scroll"||s.parent.statics.scope!==s.statics.scope)?t:br(s.parent,t,n)}class qr extends rr{static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\uFEFF";static value(){}constructor(t,n,a){super(t,n),this.selection=a,this.textNode=document.createTextNode(qr.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(t,n){if(this.savedLength!==0){super.format(t,n);return}let a=this,o=0;for(;a!=null&&a.statics.scope!==tt.BLOCK_BLOT;)o+=a.offset(a.parent),a=a.parent;a!=null&&(this.savedLength=qr.CONTENTS.length,a.optimize(),a.formatAt(o,qr.CONTENTS.length,t,n),this.savedLength=0)}index(t,n){return t===this.textNode?0:super.index(t,n)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const t=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const n=this.prev instanceof Hr?this.prev:null,a=n?n.length():0,o=this.next instanceof Hr?this.next:null,l=o?o.text:"",{textNode:d}=this,u=d.data.split(qr.CONTENTS).join("");d.data=qr.CONTENTS;let h;if(n)h=n,(u||o)&&(n.insertAt(n.length(),u+l),o&&o.remove());else if(o)h=o,o.insertAt(0,u);else{const f=document.createTextNode(u);h=this.scroll.create(f),this.parent.insertBefore(h,this)}if(this.remove(),t){const f=(y,N)=>n&&y===n.domNode?N:y===d?a+N-1:o&&y===o.domNode?a+u.length+N:null,b=f(t.start.node,t.start.offset),v=f(t.end.node,t.end.offset);if(b!==null&&v!==null)return{startNode:h.domNode,startOffset:b,endNode:h.domNode,endOffset:v}}return null}update(t,n){if(t.some(a=>a.type==="characterData"&&a.target===this.textNode)){const a=this.restore();a&&(n.range=a)}}optimize(t){super.optimize(t);let{parent:n}=this;for(;n;){if(n.domNode.tagName==="A"){this.savedLength=qr.CONTENTS.length,n.isolate(this.offset(n),this.length()).unwrap(),this.savedLength=0;break}n=n.parent}}value(){return""}}var Vf={exports:{}},Jb;function wM(){return Jb||(Jb=1,(function(s){var t=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function o(h,f,b){this.fn=h,this.context=f,this.once=b||!1}function l(h,f,b,v,y){if(typeof b!="function")throw new TypeError("The listener must be a function");var N=new o(b,v||h,y),C=n?n+f:f;return h._events[C]?h._events[C].fn?h._events[C]=[h._events[C],N]:h._events[C].push(N):(h._events[C]=N,h._eventsCount++),h}function d(h,f){--h._eventsCount===0?h._events=new a:delete h._events[f]}function u(){this._events=new a,this._eventsCount=0}u.prototype.eventNames=function(){var f=[],b,v;if(this._eventsCount===0)return f;for(v in b=this._events)t.call(b,v)&&f.push(n?v.slice(1):v);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(b)):f},u.prototype.listeners=function(f){var b=n?n+f:f,v=this._events[b];if(!v)return[];if(v.fn)return[v.fn];for(var y=0,N=v.length,C=new Array(N);y<N;y++)C[y]=v[y].fn;return C},u.prototype.listenerCount=function(f){var b=n?n+f:f,v=this._events[b];return v?v.fn?1:v.length:0},u.prototype.emit=function(f,b,v,y,N,C){var g=n?n+f:f;if(!this._events[g])return!1;var k=this._events[g],A=arguments.length,E,S;if(k.fn){switch(k.once&&this.removeListener(f,k.fn,void 0,!0),A){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,b),!0;case 3:return k.fn.call(k.context,b,v),!0;case 4:return k.fn.call(k.context,b,v,y),!0;case 5:return k.fn.call(k.context,b,v,y,N),!0;case 6:return k.fn.call(k.context,b,v,y,N,C),!0}for(S=1,E=new Array(A-1);S<A;S++)E[S-1]=arguments[S];k.fn.apply(k.context,E)}else{var R=k.length,H;for(S=0;S<R;S++)switch(k[S].once&&this.removeListener(f,k[S].fn,void 0,!0),A){case 1:k[S].fn.call(k[S].context);break;case 2:k[S].fn.call(k[S].context,b);break;case 3:k[S].fn.call(k[S].context,b,v);break;case 4:k[S].fn.call(k[S].context,b,v,y);break;default:if(!E)for(H=1,E=new Array(A-1);H<A;H++)E[H-1]=arguments[H];k[S].fn.apply(k[S].context,E)}}return!0},u.prototype.on=function(f,b,v){return l(this,f,b,v,!1)},u.prototype.once=function(f,b,v){return l(this,f,b,v,!0)},u.prototype.removeListener=function(f,b,v,y){var N=n?n+f:f;if(!this._events[N])return this;if(!b)return d(this,N),this;var C=this._events[N];if(C.fn)C.fn===b&&(!y||C.once)&&(!v||C.context===v)&&d(this,N);else{for(var g=0,k=[],A=C.length;g<A;g++)(C[g].fn!==b||y&&!C[g].once||v&&C[g].context!==v)&&k.push(C[g]);k.length?this._events[N]=k.length===1?k[0]:k:d(this,N)}return this},u.prototype.removeAllListeners=function(f){var b;return f?(b=n?n+f:f,this._events[b]&&d(this,b)):(this._events=new a,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,s.exports=u})(Vf)),Vf.exports}var jM=wM();const NM=ed(jM),ex=new WeakMap,tx=["error","warn","log","info"];let sx="warn";function $k(s){if(sx&&tx.indexOf(s)<=tx.indexOf(sx)){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];console[s](...n)}}function Ba(s){return tx.reduce((t,n)=>(t[n]=$k.bind(console,n,s),t),{})}Ba.level=s=>{sx=s};$k.level=Ba.level;const Gf=Ba("quill:events"),kM=["selectionchange","mousedown","mouseup","click"];kM.forEach(s=>{document.addEventListener(s,function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];Array.from(document.querySelectorAll(".ql-container")).forEach(o=>{const l=ex.get(o);l&&l.emitter&&l.emitter.handleDOM(...n)})})});class He extends NM{static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",Gf.error)}emit(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Gf.log.call(Gf,...n),super.emit(...n)}handleDOM(t){for(var n=arguments.length,a=new Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];(this.domListeners[t.type]||[]).forEach(l=>{let{node:d,handler:u}=l;(t.target===d||d.contains(t.target))&&u(t,...a)})}listenDOM(t,n,a){this.domListeners[t]||(this.domListeners[t]=[]),this.domListeners[t].push({node:n,handler:a})}}const Qf=Ba("quill:selection");class go{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=t,this.length=n}}class CM{constructor(t,n){this.emitter=n,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new go(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,He.sources.USER),1)}),this.emitter.on(He.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const a=this.getNativeRange();a!=null&&a.start.node!==this.cursor.textNode&&this.emitter.once(He.events.SCROLL_UPDATE,(o,l)=>{try{this.root.contains(a.start.node)&&this.root.contains(a.end.node)&&this.setNativeRange(a.start.node,a.start.offset,a.end.node,a.end.offset);const d=l.some(u=>u.type==="characterData"||u.type==="childList"||u.type==="attributes"&&u.target===this.root);this.update(d?He.sources.SILENT:o)}catch{}})}),this.emitter.on(He.events.SCROLL_OPTIMIZE,(a,o)=>{if(o.range){const{startNode:l,startOffset:d,endNode:u,endOffset:h}=o.range;this.setNativeRange(l,d,u,h),this.update(He.sources.SILENT)}}),this.update(He.sources.SILENT)}handleComposition(){this.emitter.on(He.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(He.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const t=this.cursor.restore();if(!t)return;setTimeout(()=>{this.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(He.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(t,n){this.scroll.update();const a=this.getNativeRange();if(!(a==null||!a.native.collapsed||this.scroll.query(t,tt.BLOCK))){if(a.start.node!==this.cursor.textNode){const o=this.scroll.find(a.start.node,!1);if(o==null)return;if(o instanceof un){const l=o.split(a.start.offset);o.parent.insertBefore(this.cursor,l)}else o.insertBefore(this.cursor,a.start.node);this.cursor.attach()}this.cursor.format(t,n),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const a=this.scroll.length();t=Math.min(t,a-1),n=Math.min(t+n,a-1)-t;let o,[l,d]=this.scroll.leaf(t);if(l==null)return null;if(n>0&&d===l.length()){const[b]=this.scroll.leaf(t+1);if(b){const[v]=this.scroll.line(t),[y]=this.scroll.line(t+1);v===y&&(l=b,d=0)}}[o,d]=l.position(d,!0);const u=document.createRange();if(n>0)return u.setStart(o,d),[l,d]=this.scroll.leaf(t+n),l==null?null:([o,d]=l.position(d,!0),u.setEnd(o,d),u.getBoundingClientRect());let h="left",f;if(o instanceof Text){if(!o.data.length)return null;d<o.data.length?(u.setStart(o,d),u.setEnd(o,d+1)):(u.setStart(o,d-1),u.setEnd(o,d),h="right"),f=u.getBoundingClientRect()}else{if(!(l.domNode instanceof Element))return null;f=l.domNode.getBoundingClientRect(),d>0&&(h="right")}return{bottom:f.top+f.height,height:f.height,left:f[h],right:f[h],top:f.top,width:0}}getNativeRange(){const t=document.getSelection();if(t==null||t.rangeCount<=0)return null;const n=t.getRangeAt(0);if(n==null)return null;const a=this.normalizeNative(n);return Qf.info("getNativeRange",a),a}getRange(){const t=this.scroll.domNode;if("isConnected"in t&&!t.isConnected)return[null,null];const n=this.getNativeRange();return n==null?[null,null]:[this.normalizedToRange(n),n]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&Yf(this.root,document.activeElement)}normalizedToRange(t){const n=[[t.start.node,t.start.offset]];t.native.collapsed||n.push([t.end.node,t.end.offset]);const a=n.map(d=>{const[u,h]=d,f=this.scroll.find(u,!0),b=f.offset(this.scroll);return h===0?b:f instanceof un?b+f.index(u,h):b+f.length()}),o=Math.min(Math.max(...a),this.scroll.length()-1),l=Math.min(o,...a);return new go(l,o-l)}normalizeNative(t){if(!Yf(this.root,t.startContainer)||!t.collapsed&&!Yf(this.root,t.endContainer))return null;const n={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[n.start,n.end].forEach(a=>{let{node:o,offset:l}=a;for(;!(o instanceof Text)&&o.childNodes.length>0;)if(o.childNodes.length>l)o=o.childNodes[l],l=0;else if(o.childNodes.length===l)o=o.lastChild,o instanceof Text?l=o.data.length:o.childNodes.length>0?l=o.childNodes.length:l=o.childNodes.length+1;else break;a.node=o,a.offset=l}),n}rangeToNative(t){const n=this.scroll.length(),a=(o,l)=>{o=Math.min(n-1,o);const[d,u]=this.scroll.leaf(o);return d?d.position(u,l):[null,-1]};return[...a(t.index,!1),...a(t.index+t.length,!0)]}setNativeRange(t,n){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(Qf.info("setNativeRange",t,n,a,o),t!=null&&(this.root.parentNode==null||t.parentNode==null||a.parentNode==null))return;const d=document.getSelection();if(d!=null)if(t!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:u}=this.getNativeRange()||{};if(u==null||l||t!==u.startContainer||n!==u.startOffset||a!==u.endContainer||o!==u.endOffset){t instanceof Element&&t.tagName==="BR"&&(n=Array.from(t.parentNode.childNodes).indexOf(t),t=t.parentNode),a instanceof Element&&a.tagName==="BR"&&(o=Array.from(a.parentNode.childNodes).indexOf(a),a=a.parentNode);const h=document.createRange();h.setStart(t,n),h.setEnd(a,o),d.removeAllRanges(),d.addRange(h)}}else d.removeAllRanges(),this.root.blur()}setRange(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:He.sources.API;if(typeof n=="string"&&(a=n,n=!1),Qf.info("setRange",t),t!=null){const o=this.rangeToNative(t);this.setNativeRange(...o,n)}else this.setNativeRange(null);this.update(a)}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:He.sources.USER;const n=this.lastRange,[a,o]=this.getRange();if(this.lastRange=a,this.lastNative=o,this.lastRange!=null&&(this.savedRange=this.lastRange),!gi(n,this.lastRange)){if(!this.composing&&o!=null&&o.native.collapsed&&o.start.node!==this.cursor.textNode){const d=this.cursor.restore();d&&this.setNativeRange(d.startNode,d.startOffset,d.endNode,d.endOffset)}const l=[He.events.SELECTION_CHANGE,vl(this.lastRange),vl(n),t];this.emitter.emit(He.events.EDITOR_CHANGE,...l),t!==He.sources.SILENT&&this.emitter.emit(...l)}}}function Yf(s,t){try{t.parentNode}catch{return!1}return s.contains(t)}const SM=/^[ -~]*$/;class EM{constructor(t){this.scroll=t,this.delta=this.getDelta()}applyDelta(t){this.scroll.update();let n=this.scroll.length();this.scroll.batchStart();const a=e1(t),o=new Xe;return AM(a.ops.slice()).reduce((d,u)=>{const h=Nr.Op.length(u);let f=u.attributes||{},b=!1,v=!1;if(u.insert!=null){if(o.retain(h),typeof u.insert=="string"){const C=u.insert;v=!C.endsWith(`
`)&&(n<=d||!!this.scroll.descendant(jr,d)[0]),this.scroll.insertAt(d,C);const[g,k]=this.scroll.line(d);let A=wi({},br(g));if(g instanceof nn){const[E]=g.descendant(un,k);E&&(A=wi(A,br(E)))}f=Nr.AttributeMap.diff(A,f)||{}}else if(typeof u.insert=="object"){const C=Object.keys(u.insert)[0];if(C==null)return d;const g=this.scroll.query(C,tt.INLINE)!=null;if(g)(n<=d||this.scroll.descendant(jr,d)[0])&&(v=!0);else if(d>0){const[k,A]=this.scroll.descendant(un,d-1);k instanceof Hr?k.value()[A]!==`
`&&(b=!0):k instanceof rr&&k.statics.scope===tt.INLINE_BLOT&&(b=!0)}if(this.scroll.insertAt(d,C,u.insert[C]),g){const[k]=this.scroll.descendant(un,d);if(k){const A=wi({},br(k));f=Nr.AttributeMap.diff(A,f)||{}}}}n+=h}else if(o.push(u),u.retain!==null&&typeof u.retain=="object"){const C=Object.keys(u.retain)[0];if(C==null)return d;this.scroll.updateEmbedAt(d,C,u.retain[C])}Object.keys(f).forEach(C=>{this.scroll.formatAt(d,h,C,f[C])});const y=b?1:0,N=v?1:0;return n+=y+N,o.retain(y),o.delete(N),d+h+y+N},0),o.reduce((d,u)=>typeof u.delete=="number"?(this.scroll.deleteAt(d,u.delete),d):d+Nr.Op.length(u),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(a)}deleteText(t,n){return this.scroll.deleteAt(t,n),this.update(new Xe().retain(t).delete(n))}formatLine(t,n){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(a).forEach(l=>{this.scroll.lines(t,Math.max(n,1)).forEach(d=>{d.format(l,a[l])})}),this.scroll.optimize();const o=new Xe().retain(t).retain(n,vl(a));return this.update(o)}formatText(t,n){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(a).forEach(l=>{this.scroll.formatAt(t,n,l,a[l])});const o=new Xe().retain(t).retain(n,vl(a));return this.update(o)}getContents(t,n){return this.delta.slice(t,t+n)}getDelta(){return this.scroll.lines().reduce((t,n)=>t.concat(n.delta()),new Xe)}getFormat(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=[],o=[];n===0?this.scroll.path(t).forEach(u=>{const[h]=u;h instanceof nn?a.push(h):h instanceof un&&o.push(h)}):(a=this.scroll.lines(t,n),o=this.scroll.descendants(un,t,n));const[l,d]=[a,o].map(u=>{const h=u.shift();if(h==null)return{};let f=br(h);for(;Object.keys(f).length>0;){const b=u.shift();if(b==null)return f;f=TM(br(b),f)}return f});return{...l,...d}}getHTML(t,n){const[a,o]=this.scroll.line(t);if(a){const l=a.length();return a.length()>=o+n&&!(o===0&&n===l)?Zc(a,o,n,!0):Zc(this.scroll,t,n,!0)}return""}getText(t,n){return this.getContents(t,n).filter(a=>typeof a.insert=="string").map(a=>a.insert).join("")}insertContents(t,n){const a=e1(n),o=new Xe().retain(t).concat(a);return this.scroll.insertContents(t,a),this.update(o)}insertEmbed(t,n,a){return this.scroll.insertAt(t,n,a),this.update(new Xe().retain(t).insert({[n]:a}))}insertText(t,n){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return n=n.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(t,n),Object.keys(a).forEach(o=>{this.scroll.formatAt(t,n.length,o,a[o])}),this.update(new Xe().retain(t).insert(n,vl(a)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const t=this.scroll.children.head;if(t?.statics.blotName!==nn.blotName)return!1;const n=t;return n.children.length>1?!1:n.children.head instanceof Vr}removeFormat(t,n){const a=this.getText(t,n),[o,l]=this.scroll.line(t+n);let d=0,u=new Xe;o!=null&&(d=o.length()-l,u=o.delta().slice(l,l+d-1).insert(`
`));const f=this.getContents(t,n+d).diff(new Xe().insert(a).concat(u)),b=new Xe().retain(t).concat(f);return this.applyDelta(b)}update(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const o=this.delta;if(n.length===1&&n[0].type==="characterData"&&n[0].target.data.match(SM)&&this.scroll.find(n[0].target)){const l=this.scroll.find(n[0].target),d=br(l),u=l.offset(this.scroll),h=n[0].oldValue.replace(qr.CONTENTS,""),f=new Xe().insert(h),b=new Xe().insert(l.value()),v=a&&{oldRange:t1(a.oldRange,-u),newRange:t1(a.newRange,-u)};t=new Xe().retain(u).concat(f.diff(b,v)).reduce((N,C)=>C.insert?N.insert(C.insert,d):N.push(C),new Xe),this.delta=o.compose(t)}else this.delta=this.getDelta(),(!t||!gi(o.compose(t),this.delta))&&(t=o.diff(this.delta,a));return t}}function ll(s,t,n){if(s.length===0){const[N]=Xf(n.pop());return t<=0?`</li></${N}>`:`</li></${N}>${ll([],t-1,n)}`}const[{child:a,offset:o,length:l,indent:d,type:u},...h]=s,[f,b]=Xf(u);if(d>t)return n.push(u),d===t+1?`<${f}><li${b}>${Zc(a,o,l)}${ll(h,d,n)}`:`<${f}><li>${ll(s,t+1,n)}`;const v=n[n.length-1];if(d===t&&u===v)return`</li><li${b}>${Zc(a,o,l)}${ll(h,d,n)}`;const[y]=Xf(n.pop());return`</li></${y}>${ll(s,t-1,n)}`}function Zc(s,t,n){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in s&&typeof s.html=="function")return s.html(t,n);if(s instanceof Hr)return zm(s.value().slice(t,t+n)).replaceAll(" ","&nbsp;");if(s instanceof zr){if(s.statics.blotName==="list-container"){const f=[];return s.children.forEachAt(t,n,(b,v,y)=>{const N="formats"in b&&typeof b.formats=="function"?b.formats():{};f.push({child:b,offset:v,length:y,indent:N.indent||0,type:N.list})}),ll(f,-1,[])}const o=[];if(s.children.forEachAt(t,n,(f,b,v)=>{o.push(Zc(f,b,v))}),a||s.statics.blotName==="list")return o.join("");const{outerHTML:l,innerHTML:d}=s.domNode,[u,h]=l.split(`>${d}<`);return u==="<table"?`<table style="border: 1px solid #000;">${o.join("")}<${h}`:`${u}>${o.join("")}<${h}`}return s.domNode instanceof Element?s.domNode.outerHTML:""}function TM(s,t){return Object.keys(t).reduce((n,a)=>{if(s[a]==null)return n;const o=t[a];return o===s[a]?n[a]=o:Array.isArray(o)?o.indexOf(s[a])<0?n[a]=o.concat([s[a]]):n[a]=o:n[a]=[o,s[a]],n},{})}function Xf(s){const t=s==="ordered"?"ol":"ul";switch(s){case"checked":return[t,' data-list="checked"'];case"unchecked":return[t,' data-list="unchecked"'];default:return[t,""]}}function e1(s){return s.reduce((t,n)=>{if(typeof n.insert=="string"){const a=n.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return t.insert(a,n.attributes)}return t.push(n)},new Xe)}function t1(s,t){let{index:n,length:a}=s;return new go(n+t,a)}function AM(s){const t=[];return s.forEach(n=>{typeof n.insert=="string"?n.insert.split(`
`).forEach((o,l)=>{l&&t.push({insert:`
`,attributes:n.attributes}),o&&t.push({insert:o,attributes:n.attributes})}):t.push(n)}),t}class fa{static DEFAULTS={};constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=t,this.options=n}}const wu="\uFEFF";class lg extends rr{constructor(t,n){super(t,n),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(a=>{this.contentNode.appendChild(a)}),this.leftGuard=document.createTextNode(wu),this.rightGuard=document.createTextNode(wu),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(t,n){return t===this.leftGuard?0:t===this.rightGuard?1:super.index(t,n)}restore(t){let n=null,a;const o=t.data.split(wu).join("");if(t===this.leftGuard)if(this.prev instanceof Hr){const l=this.prev.length();this.prev.insertAt(l,o),n={startNode:this.prev.domNode,startOffset:l+o.length}}else a=document.createTextNode(o),this.parent.insertBefore(this.scroll.create(a),this),n={startNode:a,startOffset:o.length};else t===this.rightGuard&&(this.next instanceof Hr?(this.next.insertAt(0,o),n={startNode:this.next.domNode,startOffset:o.length}):(a=document.createTextNode(o),this.parent.insertBefore(this.scroll.create(a),this.next),n={startNode:a,startOffset:o.length}));return t.data=wu,n}update(t,n){t.forEach(a=>{if(a.type==="characterData"&&(a.target===this.leftGuard||a.target===this.rightGuard)){const o=this.restore(a.target);o&&(n.range=o)}})}}class PM{isComposing=!1;constructor(t,n){this.scroll=t,this.emitter=n,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",t=>{this.isComposing||this.handleCompositionStart(t)}),this.scroll.domNode.addEventListener("compositionend",t=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(t)})})}handleCompositionStart(t){const n=t.target instanceof Node?this.scroll.find(t.target,!0):null;n&&!(n instanceof lg)&&(this.emitter.emit(He.events.COMPOSITION_BEFORE_START,t),this.scroll.batchStart(),this.emitter.emit(He.events.COMPOSITION_START,t),this.isComposing=!0)}handleCompositionEnd(t){this.emitter.emit(He.events.COMPOSITION_BEFORE_END,t),this.scroll.batchEnd(),this.emitter.emit(He.events.COMPOSITION_END,t),this.isComposing=!1}}class ql{static DEFAULTS={modules:{}};static themes={default:ql};modules={};constructor(t,n){this.quill=t,this.options=n}init(){Object.keys(this.options.modules).forEach(t=>{this.modules[t]==null&&this.addModule(t)})}addModule(t){const n=this.quill.constructor.import(`modules/${t}`);return this.modules[t]=new n(this.quill,this.options.modules[t]||{}),this.modules[t]}}const RM=s=>s.parentElement||s.getRootNode().host||null,IM=s=>{const t=s.getBoundingClientRect(),n="offsetWidth"in s&&Math.abs(t.width)/s.offsetWidth||1,a="offsetHeight"in s&&Math.abs(t.height)/s.offsetHeight||1;return{top:t.top,right:t.left+s.clientWidth*n,bottom:t.top+s.clientHeight*a,left:t.left}},ju=s=>{const t=parseInt(s,10);return Number.isNaN(t)?0:t},s1=(s,t,n,a,o,l)=>s<n&&t>a?0:s<n?-(n-s+o):t>a?t-s>a-n?s+o-n:t-a+l:0,OM=(s,t)=>{const n=s.ownerDocument;let a=t,o=s;for(;o;){const l=o===n.body,d=l?{top:0,right:window.visualViewport?.width??n.documentElement.clientWidth,bottom:window.visualViewport?.height??n.documentElement.clientHeight,left:0}:IM(o),u=getComputedStyle(o),h=s1(a.left,a.right,d.left,d.right,ju(u.scrollPaddingLeft),ju(u.scrollPaddingRight)),f=s1(a.top,a.bottom,d.top,d.bottom,ju(u.scrollPaddingTop),ju(u.scrollPaddingBottom));if(h||f)if(l)n.defaultView?.scrollBy(h,f);else{const{scrollLeft:b,scrollTop:v}=o;f&&(o.scrollTop+=f),h&&(o.scrollLeft+=h);const y=o.scrollLeft-b,N=o.scrollTop-v;a={left:a.left-y,top:a.top-N,right:a.right-y,bottom:a.bottom-N}}o=l||u.position==="fixed"?null:RM(o)}},_M=100,LM=["block","break","cursor","inline","scroll","text"],MM=(s,t,n)=>{const a=new Al;return LM.forEach(o=>{const l=t.query(o);l&&a.register(l)}),s.forEach(o=>{let l=t.query(o);l||n.error(`Cannot register "${o}" specified in "formats" config. Are you sure it was registered?`);let d=0;for(;l;)if(a.register(l),l="blotName"in l?l.requiredContainer??null:null,d+=1,d>_M){n.error(`Cycle detected in registering blot requiredContainer: "${o}"`);break}}),a},bl=Ba("quill"),Nu=new Al;zr.uiClass="ql-ui";class ye{static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:Nu,theme:"default"};static events=He.events;static sources=He.sources;static version="2.0.3";static imports={delta:Xe,parchment:pM,"core/module":fa,"core/theme":ql};static debug(t){t===!0&&(t="log"),Ba.level(t)}static find(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return ex.get(t)||Nu.find(t,n)}static import(t){return this.imports[t]==null&&bl.error(`Cannot import ${t}. Are you sure it was registered?`),this.imports[t]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const t=arguments.length<=0?void 0:arguments[0],n=!!(!(arguments.length<=1)&&arguments[1]),a="attrName"in t?t.attrName:t.blotName;typeof a=="string"?this.register(`formats/${a}`,t,n):Object.keys(t).forEach(o=>{this.register(o,t[o],n)})}else{const t=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],a=!!(!(arguments.length<=2)&&arguments[2]);this.imports[t]!=null&&!a&&bl.warn(`Overwriting ${t} with`,n),this.imports[t]=n,(t.startsWith("blots/")||t.startsWith("formats/"))&&n&&typeof n!="boolean"&&n.blotName!=="abstract"&&Nu.register(n),typeof n.register=="function"&&n.register(Nu)}}constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=DM(t,n),this.container=this.options.container,this.container==null){bl.error("Invalid Quill container",t);return}this.options.debug&&ye.debug(this.options.debug);const a=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",ex.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new He;const o=og.blotName,l=this.options.registry.query(o);if(!l||!("blotName"in l))throw new Error(`Cannot initialize Quill without "${o}" blot`);if(this.scroll=new l(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new EM(this.scroll),this.selection=new CM(this.scroll,this.emitter),this.composition=new PM(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(He.events.EDITOR_CHANGE,d=>{d===He.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(He.events.SCROLL_UPDATE,(d,u)=>{const h=this.selection.lastRange,[f]=this.selection.getRange(),b=h&&f?{oldRange:h,newRange:f}:void 0;Or.call(this,()=>this.editor.update(null,u,b),d)}),this.emitter.on(He.events.SCROLL_EMBED_UPDATE,(d,u)=>{const h=this.selection.lastRange,[f]=this.selection.getRange(),b=h&&f?{oldRange:h,newRange:f}:void 0;Or.call(this,()=>{const v=new Xe().retain(d.offset(this)).retain({[d.statics.blotName]:u});return this.editor.update(v,[],b)},ye.sources.USER)}),a){const d=this.clipboard.convert({html:`${a}<p><br></p>`,text:`
`});this.setContents(d)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof t=="string"){const a=t;t=document.createElement("div"),t.classList.add(a)}return this.container.insertBefore(t,n),t}blur(){this.selection.setRange(null)}deleteText(t,n,a){return[t,n,,a]=Ra(t,n,a),Or.call(this,()=>this.editor.deleteText(t,n),a,t,-1*n)}disable(){this.enable(!1)}editReadOnly(t){this.allowReadOnlyEdits=!0;const n=t();return this.allowReadOnlyEdits=!1,n}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}focus(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),t.preventScroll||this.scrollSelectionIntoView()}format(t,n){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:He.sources.API;return Or.call(this,()=>{const o=this.getSelection(!0);let l=new Xe;if(o==null)return l;if(this.scroll.query(t,tt.BLOCK))l=this.editor.formatLine(o.index,o.length,{[t]:n});else{if(o.length===0)return this.selection.format(t,n),l;l=this.editor.formatText(o.index,o.length,{[t]:n})}return this.setSelection(o,He.sources.SILENT),l},a)}formatLine(t,n,a,o,l){let d;return[t,n,d,l]=Ra(t,n,a,o,l),Or.call(this,()=>this.editor.formatLine(t,n,d),l,t,0)}formatText(t,n,a,o,l){let d;return[t,n,d,l]=Ra(t,n,a,o,l),Or.call(this,()=>this.editor.formatText(t,n,d),l,t,0)}getBounds(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=null;if(typeof t=="number"?a=this.selection.getBounds(t,n):a=this.selection.getBounds(t.index,t.length),!a)return null;const o=this.container.getBoundingClientRect();return{bottom:a.bottom-o.top,height:a.height,left:a.left-o.left,right:a.right-o.left,top:a.top-o.top,width:a.width}}getContents(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-t;return[t,n]=Ra(t,n),this.editor.getContents(t,n)}getFormat(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof t=="number"?this.editor.getFormat(t,n):this.editor.getFormat(t.index,t.length)}getIndex(t){return t.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(t){return this.scroll.leaf(t)}getLine(t){return this.scroll.line(t)}getLines(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof t!="number"?this.scroll.lines(t.index,t.length):this.scroll.lines(t,n)}getModule(t){return this.theme.modules[t]}getSelection(){return arguments.length>0&&arguments[0]!==void 0&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return typeof t=="number"&&(n=n??this.getLength()-t),[t,n]=Ra(t,n),this.editor.getHTML(t,n)}getText(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return typeof t=="number"&&(n=n??this.getLength()-t),[t,n]=Ra(t,n),this.editor.getText(t,n)}hasFocus(){return this.selection.hasFocus()}insertEmbed(t,n,a){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:ye.sources.API;return Or.call(this,()=>this.editor.insertEmbed(t,n,a),o,t)}insertText(t,n,a,o,l){let d;return[t,,d,l]=Ra(t,0,a,o,l),Or.call(this,()=>this.editor.insertText(t,n,d),l,t,n.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(t,n,a){return[t,n,,a]=Ra(t,n,a),Or.call(this,()=>this.editor.removeFormat(t,n),a,t)}scrollRectIntoView(t){OM(this.root,t)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const t=this.selection.lastRange,n=t&&this.selection.getBounds(t.index,t.length);n&&this.scrollRectIntoView(n)}setContents(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:He.sources.API;return Or.call(this,()=>{t=new Xe(t);const a=this.getLength(),o=this.editor.deleteText(0,a),l=this.editor.insertContents(0,t),d=this.editor.deleteText(this.getLength()-1,1);return o.compose(l).compose(d)},n)}setSelection(t,n,a){t==null?this.selection.setRange(null,n||ye.sources.API):([t,n,,a]=Ra(t,n,a),this.selection.setRange(new go(Math.max(0,t),n),a),a!==He.sources.SILENT&&this.scrollSelectionIntoView())}setText(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:He.sources.API;const a=new Xe().insert(t);return this.setContents(a,n)}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:He.sources.USER;const n=this.scroll.update(t);return this.selection.update(t),n}updateContents(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:He.sources.API;return Or.call(this,()=>(t=new Xe(t),this.editor.applyDelta(t)),n,!0)}}function n1(s){return typeof s=="string"?document.querySelector(s):s}function Zf(s){return Object.entries(s??{}).reduce((t,n)=>{let[a,o]=n;return{...t,[a]:o===!0?{}:o}},{})}function r1(s){return Object.fromEntries(Object.entries(s).filter(t=>t[1]!==void 0))}function DM(s,t){const n=n1(s);if(!n)throw new Error("Invalid Quill container");const o=!t.theme||t.theme===ye.DEFAULTS.theme?ql:ye.import(`themes/${t.theme}`);if(!o)throw new Error(`Invalid theme ${t.theme}. Did you register it?`);const{modules:l,...d}=ye.DEFAULTS,{modules:u,...h}=o.DEFAULTS;let f=Zf(t.modules);f!=null&&f.toolbar&&f.toolbar.constructor!==Object&&(f={...f,toolbar:{container:f.toolbar}});const b=wi({},Zf(l),Zf(u),f),v={...d,...r1(h),...r1(t)};let y=t.registry;return y?t.formats&&bl.warn('Ignoring "formats" option because "registry" is specified'):y=t.formats?MM(t.formats,v.registry,bl):v.registry,{...v,registry:y,container:n,theme:o,modules:Object.entries(b).reduce((N,C)=>{let[g,k]=C;if(!k)return N;const A=ye.import(`modules/${g}`);return A==null?(bl.error(`Cannot load ${g} module. Are you sure you registered it?`),N):{...N,[g]:wi({},A.DEFAULTS||{},k)}},{}),bounds:n1(v.bounds)}}function Or(s,t,n,a){if(!this.isEnabled()&&t===He.sources.USER&&!this.allowReadOnlyEdits)return new Xe;let o=n==null?null:this.getSelection();const l=this.editor.delta,d=s();if(o!=null&&(n===!0&&(n=o.index),a==null?o=a1(o,d,t):a!==0&&(o=a1(o,n,a,t)),this.setSelection(o,He.sources.SILENT)),d.length()>0){const u=[He.events.TEXT_CHANGE,d,l,t];this.emitter.emit(He.events.EDITOR_CHANGE,...u),t!==He.sources.SILENT&&this.emitter.emit(...u)}return d}function Ra(s,t,n,a,o){let l={};return typeof s.index=="number"&&typeof s.length=="number"?typeof t!="number"?(o=a,a=n,n=t,t=s.length,s=s.index):(t=s.length,s=s.index):typeof t!="number"&&(o=a,a=n,n=t,t=0),typeof n=="object"?(l=n,o=a):typeof n=="string"&&(a!=null?l[n]=a:o=n),o=o||He.sources.API,[s,t,l,o]}function a1(s,t,n,a){const o=typeof n=="number"?n:0;if(s==null)return null;let l,d;return t&&typeof t.transformPosition=="function"?[l,d]=[s.index,s.index+s.length].map(u=>t.transformPosition(u,a!==He.sources.USER)):[l,d]=[s.index,s.index+s.length].map(u=>u<t||u===t&&a===He.sources.USER?u:o>=0?u+o:Math.max(t,u+o)),new go(l,d-l)}class Eo extends Fm{}function i1(s){return s instanceof nn||s instanceof jr}function o1(s){return typeof s.updateContent=="function"}class $M extends og{static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=nn;static allowedChildren=[nn,jr,Eo];constructor(t,n,a){let{emitter:o}=a;super(t,n),this.emitter=o,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",l=>this.handleDragStart(l))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const t=this.batch;this.batch=!1,this.update(t)}emitMount(t){this.emitter.emit(He.events.SCROLL_BLOT_MOUNT,t)}emitUnmount(t){this.emitter.emit(He.events.SCROLL_BLOT_UNMOUNT,t)}emitEmbedUpdate(t,n){this.emitter.emit(He.events.SCROLL_EMBED_UPDATE,t,n)}deleteAt(t,n){const[a,o]=this.line(t),[l]=this.line(t+n);if(super.deleteAt(t,n),l!=null&&a!==l&&o>0){if(a instanceof jr||l instanceof jr){this.optimize();return}const d=l.children.head instanceof Vr?null:l.children.head;a.moveChildren(l,d),a.remove()}this.optimize()}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",t?"true":"false")}formatAt(t,n,a,o){super.formatAt(t,n,a,o),this.optimize()}insertAt(t,n,a){if(t>=this.length())if(a==null||this.scroll.query(n,tt.BLOCK)==null){const o=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(o),a==null&&n.endsWith(`
`)?o.insertAt(0,n.slice(0,-1),a):o.insertAt(0,n,a)}else{const o=this.scroll.create(n,a);this.appendChild(o)}else super.insertAt(t,n,a);this.optimize()}insertBefore(t,n){if(t.statics.scope===tt.INLINE_BLOT){const a=this.scroll.create(this.statics.defaultChild.blotName);a.appendChild(t),super.insertBefore(a,n)}else super.insertBefore(t,n)}insertContents(t,n){const a=this.deltaToRenderBlocks(n.concat(new Xe().insert(`
`))),o=a.pop();if(o==null)return;this.batchStart();const l=a.shift();if(l){const h=l.type==="block"&&(l.delta.length()===0||!this.descendant(jr,t)[0]&&t<this.length()),f=l.type==="block"?l.delta:new Xe().insert({[l.key]:l.value});Jf(this,t,f);const b=l.type==="block"?1:0,v=t+f.length()+b;h&&this.insertAt(v-1,`
`);const y=br(this.line(t)[0]),N=Nr.AttributeMap.diff(y,l.attributes)||{};Object.keys(N).forEach(C=>{this.formatAt(v-1,1,C,N[C])}),t=v}let[d,u]=this.children.find(t);if(a.length&&(d&&(d=d.split(u),u=0),a.forEach(h=>{if(h.type==="block"){const f=this.createBlock(h.attributes,d||void 0);Jf(f,0,h.delta)}else{const f=this.create(h.key,h.value);this.insertBefore(f,d||void 0),Object.keys(h.attributes).forEach(b=>{f.format(b,h.attributes[b])})}})),o.type==="block"&&o.delta.length()){const h=d?d.offset(d.scroll)+u:this.length();Jf(this,h,o.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(t){const n=this.path(t).pop();if(!n)return[null,-1];const[a,o]=n;return a instanceof un?[a,o]:[null,-1]}line(t){return t===this.length()?this.line(t-1):this.descendant(i1,t)}lines(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const a=(o,l,d)=>{let u=[],h=d;return o.children.forEachAt(l,d,(f,b,v)=>{i1(f)?u.push(f):f instanceof Fm&&(u=u.concat(a(f,b,h))),h-=v}),u};return a(this,t,n)}optimize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(t,n),t.length>0&&this.emitter.emit(He.events.SCROLL_OPTIMIZE,t,n))}path(t){return super.path(t).slice(1)}remove(){}update(t){if(this.batch){Array.isArray(t)&&(this.batch=this.batch.concat(t));return}let n=He.sources.USER;typeof t=="string"&&(n=t),Array.isArray(t)||(t=this.observer.takeRecords()),t=t.filter(a=>{let{target:o}=a;const l=this.find(o,!0);return l&&!o1(l)}),t.length>0&&this.emitter.emit(He.events.SCROLL_BEFORE_UPDATE,n,t),super.update(t.concat([])),t.length>0&&this.emitter.emit(He.events.SCROLL_UPDATE,n,t)}updateEmbedAt(t,n,a){const[o]=this.descendant(l=>l instanceof jr,t);o&&o.statics.blotName===n&&o1(o)&&o.updateContent(a)}handleDragStart(t){t.preventDefault()}deltaToRenderBlocks(t){const n=[];let a=new Xe;return t.forEach(o=>{const l=o?.insert;if(l)if(typeof l=="string"){const d=l.split(`
`);d.slice(0,-1).forEach(h=>{a.insert(h,o.attributes),n.push({type:"block",delta:a,attributes:o.attributes??{}}),a=new Xe});const u=d[d.length-1];u&&a.insert(u,o.attributes)}else{const d=Object.keys(l)[0];if(!d)return;this.query(d,tt.INLINE)?a.push(o):(a.length()&&n.push({type:"block",delta:a,attributes:{}}),a=new Xe,n.push({type:"blockEmbed",key:d,value:l[d],attributes:o.attributes??{}}))}}),a.length()&&n.push({type:"block",delta:a,attributes:{}}),n}createBlock(t,n){let a;const o={};Object.entries(t).forEach(u=>{let[h,f]=u;this.query(h,tt.BLOCK&tt.BLOT)!=null?a=h:o[h]=f});const l=this.create(a||this.statics.defaultChild.blotName,a?t[a]:void 0);this.insertBefore(l,n||void 0);const d=l.length();return Object.entries(o).forEach(u=>{let[h,f]=u;l.formatAt(0,d,h,f)}),l}}function Jf(s,t,n){n.reduce((a,o)=>{const l=Nr.Op.length(o);let d=o.attributes||{};if(o.insert!=null){if(typeof o.insert=="string"){const u=o.insert;s.insertAt(a,u);const[h]=s.descendant(un,a),f=br(h);d=Nr.AttributeMap.diff(f,d)||{}}else if(typeof o.insert=="object"){const u=Object.keys(o.insert)[0];if(u==null)return a;if(s.insertAt(a,u,o.insert[u]),s.scroll.query(u,tt.INLINE)!=null){const[f]=s.descendant(un,a),b=br(f);d=Nr.AttributeMap.diff(b,d)||{}}}}return Object.keys(d).forEach(u=>{s.formatAt(a,l,u,d[u])}),a+l},t)}const cg={scope:tt.BLOCK,whitelist:["right","center","justify"]},qM=new da("align","align",cg),qk=new Wr("align","ql-align",cg),Fk=new Li("align","text-align",cg);class zk extends Li{value(t){let n=super.value(t);return n.startsWith("rgb(")?(n=n.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${n.split(",").map(o=>`00${parseInt(o,10).toString(16)}`.slice(-2)).join("")}`):n}}const FM=new Wr("color","ql-color",{scope:tt.INLINE}),dg=new zk("color","color",{scope:tt.INLINE}),zM=new Wr("background","ql-bg",{scope:tt.INLINE}),ug=new zk("background","background-color",{scope:tt.INLINE});class To extends Eo{static create(t){const n=super.create(t);return n.setAttribute("spellcheck","false"),n}code(t,n){return this.children.map(a=>a.length()<=1?"":a.domNode.innerText).join(`
`).slice(t,t+n)}html(t,n){return`<pre>
${zm(this.code(t,n))}
</pre>`}}class Nn extends nn{static TAB="  ";static register(){ye.register(To)}}class mg extends bn{}mg.blotName="code";mg.tagName="CODE";Nn.blotName="code-block";Nn.className="ql-code-block";Nn.tagName="DIV";To.blotName="code-block-container";To.className="ql-code-block-container";To.tagName="DIV";To.allowedChildren=[Nn];Nn.allowedChildren=[Hr,Vr,qr];Nn.requiredContainer=To;const hg={scope:tt.BLOCK,whitelist:["rtl"]},Uk=new da("direction","dir",hg),Bk=new Wr("direction","ql-direction",hg),Hk=new Li("direction","direction",hg),Kk={scope:tt.INLINE,whitelist:["serif","monospace"]},Wk=new Wr("font","ql-font",Kk);class UM extends Li{value(t){return super.value(t).replace(/["']/g,"")}}const Vk=new UM("font","font-family",Kk),Gk=new Wr("size","ql-size",{scope:tt.INLINE,whitelist:["small","large","huge"]}),Qk=new Li("size","font-size",{scope:tt.INLINE,whitelist:["10px","18px","32px"]}),BM=Ba("quill:keyboard"),HM=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class Um extends fa{static match(t,n){return["altKey","ctrlKey","metaKey","shiftKey"].some(a=>!!n[a]!==t[a]&&n[a]!==null)?!1:n.key===t.key||n.key===t.which}constructor(t,n){super(t,n),this.bindings={},Object.keys(this.options.bindings).forEach(a=>{this.options.bindings[a]&&this.addBinding(this.options.bindings[a])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const o=WM(t);if(o==null){BM.warn("Attempted to add invalid keyboard binding",o);return}typeof n=="function"&&(n={handler:n}),typeof a=="function"&&(a={handler:a}),(Array.isArray(o.key)?o.key:[o.key]).forEach(d=>{const u={...o,key:d,...n,...a};this.bindings[u.key]=this.bindings[u.key]||[],this.bindings[u.key].push(u)})}listen(){this.quill.root.addEventListener("keydown",t=>{if(t.defaultPrevented||t.isComposing||t.keyCode===229&&(t.key==="Enter"||t.key==="Backspace"))return;const o=(this.bindings[t.key]||[]).concat(this.bindings[t.which]||[]).filter(A=>Um.match(t,A));if(o.length===0)return;const l=ye.find(t.target,!0);if(l&&l.scroll!==this.quill.scroll)return;const d=this.quill.getSelection();if(d==null||!this.quill.hasFocus())return;const[u,h]=this.quill.getLine(d.index),[f,b]=this.quill.getLeaf(d.index),[v,y]=d.length===0?[f,b]:this.quill.getLeaf(d.index+d.length),N=f instanceof lm?f.value().slice(0,b):"",C=v instanceof lm?v.value().slice(y):"",g={collapsed:d.length===0,empty:d.length===0&&u.length()<=1,format:this.quill.getFormat(d),line:u,offset:h,prefix:N,suffix:C,event:t};o.some(A=>{if(A.collapsed!=null&&A.collapsed!==g.collapsed||A.empty!=null&&A.empty!==g.empty||A.offset!=null&&A.offset!==g.offset)return!1;if(Array.isArray(A.format)){if(A.format.every(E=>g.format[E]==null))return!1}else if(typeof A.format=="object"&&!Object.keys(A.format).every(E=>A.format[E]===!0?g.format[E]!=null:A.format[E]===!1?g.format[E]==null:gi(A.format[E],g.format[E])))return!1;return A.prefix!=null&&!A.prefix.test(g.prefix)||A.suffix!=null&&!A.suffix.test(g.suffix)?!1:A.handler.call(this,d,g,A)!==!0})&&t.preventDefault()})}handleBackspace(t,n){const a=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(n.prefix)?2:1;if(t.index===0||this.quill.getLength()<=1)return;let o={};const[l]=this.quill.getLine(t.index);let d=new Xe().retain(t.index-a).delete(a);if(n.offset===0){const[u]=this.quill.getLine(t.index-1);if(u&&!(u.statics.blotName==="block"&&u.length()<=1)){const f=l.formats(),b=this.quill.getFormat(t.index-1,1);if(o=Nr.AttributeMap.diff(f,b)||{},Object.keys(o).length>0){const v=new Xe().retain(t.index+l.length()-2).retain(1,o);d=d.compose(v)}}}this.quill.updateContents(d,ye.sources.USER),this.quill.focus()}handleDelete(t,n){const a=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(n.suffix)?2:1;if(t.index>=this.quill.getLength()-a)return;let o={};const[l]=this.quill.getLine(t.index);let d=new Xe().retain(t.index).delete(a);if(n.offset>=l.length()-1){const[u]=this.quill.getLine(t.index+1);if(u){const h=l.formats(),f=this.quill.getFormat(t.index,1);o=Nr.AttributeMap.diff(h,f)||{},Object.keys(o).length>0&&(d=d.retain(u.length()-1).retain(1,o))}}this.quill.updateContents(d,ye.sources.USER),this.quill.focus()}handleDeleteRange(t){fg({range:t,quill:this.quill}),this.quill.focus()}handleEnter(t,n){const a=Object.keys(n.format).reduce((l,d)=>(this.quill.scroll.query(d,tt.BLOCK)&&!Array.isArray(n.format[d])&&(l[d]=n.format[d]),l),{}),o=new Xe().retain(t.index).delete(t.length).insert(`
`,a);this.quill.updateContents(o,ye.sources.USER),this.quill.setSelection(t.index+1,ye.sources.SILENT),this.quill.focus()}}const KM={bindings:{bold:ep("bold"),italic:ep("italic"),underline:ep("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(s,t){return t.collapsed&&t.offset!==0?!0:(this.quill.format("indent","+1",ye.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(s,t){return t.collapsed&&t.offset!==0?!0:(this.quill.format("indent","-1",ye.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(s,t){t.format.indent!=null?this.quill.format("indent","-1",ye.sources.USER):t.format.list!=null&&this.quill.format("list",!1,ye.sources.USER)}},"indent code-block":l1(!0),"outdent code-block":l1(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(s){this.quill.deleteText(s.index-1,1,ye.sources.USER)}},tab:{key:"Tab",handler(s,t){if(t.format.table)return!0;this.quill.history.cutoff();const n=new Xe().retain(s.index).delete(s.length).insert("	");return this.quill.updateContents(n,ye.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(s.index+1,ye.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,ye.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(s,t){const n={list:!1};t.format.indent&&(n.indent=!1),this.quill.formatLine(s.index,s.length,n,ye.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(s){const[t,n]=this.quill.getLine(s.index),a={...t.formats(),list:"checked"},o=new Xe().retain(s.index).insert(`
`,a).retain(t.length()-n-1).retain(1,{list:"unchecked"});this.quill.updateContents(o,ye.sources.USER),this.quill.setSelection(s.index+1,ye.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(s,t){const[n,a]=this.quill.getLine(s.index),o=new Xe().retain(s.index).insert(`
`,t.format).retain(n.length()-a-1).retain(1,{header:null});this.quill.updateContents(o,ye.sources.USER),this.quill.setSelection(s.index+1,ye.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(s){const t=this.quill.getModule("table");if(t){const[n,a,o,l]=t.getTable(s),d=VM(n,a,o,l);if(d==null)return;let u=n.offset();if(d<0){const h=new Xe().retain(u).insert(`
`);this.quill.updateContents(h,ye.sources.USER),this.quill.setSelection(s.index+1,s.length,ye.sources.SILENT)}else if(d>0){u+=n.length();const h=new Xe().retain(u).insert(`
`);this.quill.updateContents(h,ye.sources.USER),this.quill.setSelection(u,ye.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(s,t){const{event:n,line:a}=t,o=a.offset(this.quill.scroll);n.shiftKey?this.quill.setSelection(o-1,ye.sources.USER):this.quill.setSelection(o+a.length(),ye.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(s,t){if(this.quill.scroll.query("list")==null)return!0;const{length:n}=t.prefix,[a,o]=this.quill.getLine(s.index);if(o>n)return!0;let l;switch(t.prefix.trim()){case"[]":case"[ ]":l="unchecked";break;case"[x]":l="checked";break;case"-":case"*":l="bullet";break;default:l="ordered"}this.quill.insertText(s.index," ",ye.sources.USER),this.quill.history.cutoff();const d=new Xe().retain(s.index-o).delete(n+1).retain(a.length()-2-o).retain(1,{list:l});return this.quill.updateContents(d,ye.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(s.index-n,ye.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(s){const[t,n]=this.quill.getLine(s.index);let a=2,o=t;for(;o!=null&&o.length()<=1&&o.formats()["code-block"];)if(o=o.prev,a-=1,a<=0){const l=new Xe().retain(s.index+t.length()-n-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(l,ye.sources.USER),this.quill.setSelection(s.index-1,ye.sources.SILENT),!1}return!0}},"embed left":ku("ArrowLeft",!1),"embed left shift":ku("ArrowLeft",!0),"embed right":ku("ArrowRight",!1),"embed right shift":ku("ArrowRight",!0),"table down":c1(!1),"table up":c1(!0)}};Um.DEFAULTS=KM;function l1(s){return{key:"Tab",shiftKey:!s,format:{"code-block":!0},handler(t,n){let{event:a}=n;const o=this.quill.scroll.query("code-block"),{TAB:l}=o;if(t.length===0&&!a.shiftKey){this.quill.insertText(t.index,l,ye.sources.USER),this.quill.setSelection(t.index+l.length,ye.sources.SILENT);return}const d=t.length===0?this.quill.getLines(t.index,1):this.quill.getLines(t);let{index:u,length:h}=t;d.forEach((f,b)=>{s?(f.insertAt(0,l),b===0?u+=l.length:h+=l.length):f.domNode.textContent.startsWith(l)&&(f.deleteAt(0,l.length),b===0?u-=l.length:h-=l.length)}),this.quill.update(ye.sources.USER),this.quill.setSelection(u,h,ye.sources.SILENT)}}}function ku(s,t){return{key:s,shiftKey:t,altKey:null,[s==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(a){let{index:o}=a;s==="ArrowRight"&&(o+=a.length+1);const[l]=this.quill.getLeaf(o);return l instanceof rr?(s==="ArrowLeft"?t?this.quill.setSelection(a.index-1,a.length+1,ye.sources.USER):this.quill.setSelection(a.index-1,ye.sources.USER):t?this.quill.setSelection(a.index,a.length+1,ye.sources.USER):this.quill.setSelection(a.index+a.length+1,ye.sources.USER),!1):!0}}}function ep(s){return{key:s[0],shortKey:!0,handler(t,n){this.quill.format(s,!n.format[s],ye.sources.USER)}}}function c1(s){return{key:s?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(t,n){const a=s?"prev":"next",o=n.line,l=o.parent[a];if(l!=null){if(l.statics.blotName==="table-row"){let d=l.children.head,u=o;for(;u.prev!=null;)u=u.prev,d=d.next;const h=d.offset(this.quill.scroll)+Math.min(n.offset,d.length()-1);this.quill.setSelection(h,0,ye.sources.USER)}}else{const d=o.table()[a];d!=null&&(s?this.quill.setSelection(d.offset(this.quill.scroll)+d.length()-1,0,ye.sources.USER):this.quill.setSelection(d.offset(this.quill.scroll),0,ye.sources.USER))}return!1}}}function WM(s){if(typeof s=="string"||typeof s=="number")s={key:s};else if(typeof s=="object")s=vl(s);else return null;return s.shortKey&&(s[HM]=s.shortKey,delete s.shortKey),s}function fg(s){let{quill:t,range:n}=s;const a=t.getLines(n);let o={};if(a.length>1){const l=a[0].formats(),d=a[a.length-1].formats();o=Nr.AttributeMap.diff(d,l)||{}}t.deleteText(n,ye.sources.USER),Object.keys(o).length>0&&t.formatLine(n.index,1,o,ye.sources.USER),t.setSelection(n.index,ye.sources.SILENT)}function VM(s,t,n,a){return t.prev==null&&t.next==null?n.prev==null&&n.next==null?a===0?-1:1:n.prev==null?-1:1:t.prev==null?-1:t.next==null?1:null}const GM=/font-weight:\s*normal/,QM=["P","OL","UL"],d1=s=>s&&QM.includes(s.tagName),YM=s=>{Array.from(s.querySelectorAll("br")).filter(t=>d1(t.previousElementSibling)&&d1(t.nextElementSibling)).forEach(t=>{t.parentNode?.removeChild(t)})},XM=s=>{Array.from(s.querySelectorAll('b[style*="font-weight"]')).filter(t=>t.getAttribute("style")?.match(GM)).forEach(t=>{const n=s.createDocumentFragment();n.append(...t.childNodes),t.parentNode?.replaceChild(n,t)})};function ZM(s){s.querySelector('[id^="docs-internal-guid-"]')&&(XM(s),YM(s))}const JM=/\bmso-list:[^;]*ignore/i,e7=/\bmso-list:[^;]*\bl(\d+)/i,t7=/\bmso-list:[^;]*\blevel(\d+)/i,s7=(s,t)=>{const n=s.getAttribute("style"),a=n?.match(e7);if(!a)return null;const o=Number(a[1]),l=n?.match(t7),d=l?Number(l[1]):1,u=new RegExp(`@list l${o}:level${d}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),h=t.match(u),f=h&&h[1]==="bullet"?"bullet":"ordered";return{id:o,indent:d,type:f,element:s}},n7=s=>{const t=Array.from(s.querySelectorAll("[style*=mso-list]")),n=[],a=[];t.forEach(d=>{(d.getAttribute("style")||"").match(JM)?n.push(d):a.push(d)}),n.forEach(d=>d.parentNode?.removeChild(d));const o=s.documentElement.innerHTML,l=a.map(d=>s7(d,o)).filter(d=>d);for(;l.length;){const d=[];let u=l.shift();for(;u;)d.push(u),u=l.length&&l[0]?.element===u.element.nextElementSibling&&l[0].id===u.id?l.shift():null;const h=document.createElement("ul");d.forEach(v=>{const y=document.createElement("li");y.setAttribute("data-list",v.type),v.indent>1&&y.setAttribute("class",`ql-indent-${v.indent-1}`),y.innerHTML=v.element.innerHTML,h.appendChild(y)});const f=d[0]?.element,{parentNode:b}=f??{};f&&b?.replaceChild(h,f),d.slice(1).forEach(v=>{let{element:y}=v;b?.removeChild(y)})}};function r7(s){s.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&n7(s)}const a7=[r7,ZM],i7=s=>{s.documentElement&&a7.forEach(t=>{t(s)})},o7=Ba("quill:clipboard"),l7=[[Node.TEXT_NODE,w7],[Node.TEXT_NODE,m1],["br",f7],[Node.ELEMENT_NODE,m1],[Node.ELEMENT_NODE,h7],[Node.ELEMENT_NODE,m7],[Node.ELEMENT_NODE,y7],["li",g7],["ol, ul",v7],["pre",p7],["tr",b7],["b",tp("bold")],["i",tp("italic")],["strike",tp("strike")],["style",x7]],c7=[qM,Uk].reduce((s,t)=>(s[t.keyName]=t,s),{}),u1=[Fk,ug,dg,Hk,Vk,Qk].reduce((s,t)=>(s[t.keyName]=t,s),{});class d7 extends fa{static DEFAULTS={matchers:[]};constructor(t,n){super(t,n),this.quill.root.addEventListener("copy",a=>this.onCaptureCopy(a,!1)),this.quill.root.addEventListener("cut",a=>this.onCaptureCopy(a,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],l7.concat(this.options.matchers??[]).forEach(a=>{let[o,l]=a;this.addMatcher(o,l)})}addMatcher(t,n){this.matchers.push([t,n])}convert(t){let{html:n,text:a}=t,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(o[Nn.blotName])return new Xe().insert(a||"",{[Nn.blotName]:o[Nn.blotName]});if(!n)return new Xe().insert(a||"",o);const l=this.convertHTML(n);return id(l,`
`)&&(l.ops[l.ops.length-1].attributes==null||o.table)?l.compose(new Xe().retain(l.length()-1).delete(1)):l}normalizeHTML(t){i7(t)}convertHTML(t){const n=new DOMParser().parseFromString(t,"text/html");this.normalizeHTML(n);const a=n.body,o=new WeakMap,[l,d]=this.prepareMatching(a,o);return pg(this.quill.scroll,a,l,d,o)}dangerouslyPasteHTML(t,n){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ye.sources.API;if(typeof t=="string"){const o=this.convert({html:t,text:""});this.quill.setContents(o,n),this.quill.setSelection(0,ye.sources.SILENT)}else{const o=this.convert({html:n,text:""});this.quill.updateContents(new Xe().retain(t).concat(o),a),this.quill.setSelection(t+o.length(),ye.sources.SILENT)}}onCaptureCopy(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(t.defaultPrevented)return;t.preventDefault();const[a]=this.quill.selection.getRange();if(a==null)return;const{html:o,text:l}=this.onCopy(a,n);t.clipboardData?.setData("text/plain",l),t.clipboardData?.setData("text/html",o),n&&fg({range:a,quill:this.quill})}normalizeURIList(t){return t.split(/\r?\n/).filter(n=>n[0]!=="#").join(`
`)}onCapturePaste(t){if(t.defaultPrevented||!this.quill.isEnabled())return;t.preventDefault();const n=this.quill.getSelection(!0);if(n==null)return;const a=t.clipboardData?.getData("text/html");let o=t.clipboardData?.getData("text/plain");if(!a&&!o){const d=t.clipboardData?.getData("text/uri-list");d&&(o=this.normalizeURIList(d))}const l=Array.from(t.clipboardData?.files||[]);if(!a&&l.length>0){this.quill.uploader.upload(n,l);return}if(a&&l.length>0){const d=new DOMParser().parseFromString(a,"text/html");if(d.body.childElementCount===1&&d.body.firstElementChild?.tagName==="IMG"){this.quill.uploader.upload(n,l);return}}this.onPaste(n,{html:a,text:o})}onCopy(t){const n=this.quill.getText(t);return{html:this.quill.getSemanticHTML(t),text:n}}onPaste(t,n){let{text:a,html:o}=n;const l=this.quill.getFormat(t.index),d=this.convert({text:a,html:o},l);o7.log("onPaste",d,{text:a,html:o});const u=new Xe().retain(t.index).delete(t.length).concat(d);this.quill.updateContents(u,ye.sources.USER),this.quill.setSelection(u.length()-t.length,ye.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(t,n){const a=[],o=[];return this.matchers.forEach(l=>{const[d,u]=l;switch(d){case Node.TEXT_NODE:o.push(u);break;case Node.ELEMENT_NODE:a.push(u);break;default:Array.from(t.querySelectorAll(d)).forEach(h=>{n.has(h)?n.get(h)?.push(u):n.set(h,[u])});break}}),[a,o]}}function Ao(s,t,n,a){return a.query(t)?s.reduce((o,l)=>{if(!l.insert)return o;if(l.attributes&&l.attributes[t])return o.push(l);const d=n?{[t]:n}:{};return o.insert(l.insert,{...d,...l.attributes})},new Xe):s}function id(s,t){let n="";for(let a=s.ops.length-1;a>=0&&n.length<t.length;--a){const o=s.ops[a];if(typeof o.insert!="string")break;n=o.insert+n}return n.slice(-1*t.length)===t}function bi(s,t){if(!(s instanceof Element))return!1;const n=t.query(s);return n&&n.prototype instanceof rr?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(s.tagName.toLowerCase())}function u7(s,t){return s.previousElementSibling&&s.nextElementSibling&&!bi(s.previousElementSibling,t)&&!bi(s.nextElementSibling,t)}const Cu=new WeakMap;function Yk(s){return s==null?!1:(Cu.has(s)||(s.tagName==="PRE"?Cu.set(s,!0):Cu.set(s,Yk(s.parentNode))),Cu.get(s))}function pg(s,t,n,a,o){return t.nodeType===t.TEXT_NODE?a.reduce((l,d)=>d(t,l,s),new Xe):t.nodeType===t.ELEMENT_NODE?Array.from(t.childNodes||[]).reduce((l,d)=>{let u=pg(s,d,n,a,o);return d.nodeType===t.ELEMENT_NODE&&(u=n.reduce((h,f)=>f(d,h,s),u),u=(o.get(d)||[]).reduce((h,f)=>f(d,h,s),u)),l.concat(u)},new Xe):new Xe}function tp(s){return(t,n,a)=>Ao(n,s,!0,a)}function m7(s,t,n){const a=da.keys(s),o=Wr.keys(s),l=Li.keys(s),d={};return a.concat(o).concat(l).forEach(u=>{let h=n.query(u,tt.ATTRIBUTE);h!=null&&(d[h.attrName]=h.value(s),d[h.attrName])||(h=c7[u],h!=null&&(h.attrName===u||h.keyName===u)&&(d[h.attrName]=h.value(s)||void 0),h=u1[u],h!=null&&(h.attrName===u||h.keyName===u)&&(h=u1[u],d[h.attrName]=h.value(s)||void 0))}),Object.entries(d).reduce((u,h)=>{let[f,b]=h;return Ao(u,f,b,n)},t)}function h7(s,t,n){const a=n.query(s);if(a==null)return t;if(a.prototype instanceof rr){const o={},l=a.value(s);if(l!=null)return o[a.blotName]=l,new Xe().insert(o,a.formats(s,n))}else if(a.prototype instanceof Xc&&!id(t,`
`)&&t.insert(`
`),"blotName"in a&&"formats"in a&&typeof a.formats=="function")return Ao(t,a.blotName,a.formats(s,n),n);return t}function f7(s,t){return id(t,`
`)||t.insert(`
`),t}function p7(s,t,n){const a=n.query("code-block"),o=a&&"formats"in a&&typeof a.formats=="function"?a.formats(s,n):!0;return Ao(t,"code-block",o,n)}function x7(){return new Xe}function g7(s,t,n){const a=n.query(s);if(a==null||a.blotName!=="list"||!id(t,`
`))return t;let o=-1,l=s.parentNode;for(;l!=null;)["OL","UL"].includes(l.tagName)&&(o+=1),l=l.parentNode;return o<=0?t:t.reduce((d,u)=>u.insert?u.attributes&&typeof u.attributes.indent=="number"?d.push(u):d.insert(u.insert,{indent:o,...u.attributes||{}}):d,new Xe)}function v7(s,t,n){const a=s;let o=a.tagName==="OL"?"ordered":"bullet";const l=a.getAttribute("data-checked");return l&&(o=l==="true"?"checked":"unchecked"),Ao(t,"list",o,n)}function m1(s,t,n){if(!id(t,`
`)){if(bi(s,n)&&(s.childNodes.length>0||s instanceof HTMLParagraphElement))return t.insert(`
`);if(t.length()>0&&s.nextSibling){let a=s.nextSibling;for(;a!=null;){if(bi(a,n))return t.insert(`
`);const o=n.query(a);if(o&&o.prototype instanceof jr)return t.insert(`
`);a=a.firstChild}}}return t}function y7(s,t,n){const a={},o=s.style||{};return o.fontStyle==="italic"&&(a.italic=!0),o.textDecoration==="underline"&&(a.underline=!0),o.textDecoration==="line-through"&&(a.strike=!0),(o.fontWeight?.startsWith("bold")||parseInt(o.fontWeight,10)>=700)&&(a.bold=!0),t=Object.entries(a).reduce((l,d)=>{let[u,h]=d;return Ao(l,u,h,n)},t),parseFloat(o.textIndent||0)>0?new Xe().insert("	").concat(t):t}function b7(s,t,n){const a=s.parentElement?.tagName==="TABLE"?s.parentElement:s.parentElement?.parentElement;if(a!=null){const l=Array.from(a.querySelectorAll("tr")).indexOf(s)+1;return Ao(t,"table",l,n)}return t}function w7(s,t,n){let a=s.data;if(s.parentElement?.tagName==="O:P")return t.insert(a.trim());if(!Yk(s)){if(a.trim().length===0&&a.includes(`
`)&&!u7(s,n))return t;a=a.replace(/[^\S\u00a0]/g," "),a=a.replace(/ {2,}/g," "),(s.previousSibling==null&&s.parentElement!=null&&bi(s.parentElement,n)||s.previousSibling instanceof Element&&bi(s.previousSibling,n))&&(a=a.replace(/^ /,"")),(s.nextSibling==null&&s.parentElement!=null&&bi(s.parentElement,n)||s.nextSibling instanceof Element&&bi(s.nextSibling,n))&&(a=a.replace(/ $/,"")),a=a.replaceAll(""," ")}return t.insert(a)}class j7 extends fa{static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(t,n){super(t,n),this.quill.on(ye.events.EDITOR_CHANGE,(a,o,l,d)=>{a===ye.events.SELECTION_CHANGE?o&&d!==ye.sources.SILENT&&(this.currentRange=o):a===ye.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||d===ye.sources.USER?this.record(o,l):this.transform(o)),this.currentRange=nx(this.currentRange,o))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",a=>{a.inputType==="historyUndo"?(this.undo(),a.preventDefault()):a.inputType==="historyRedo"&&(this.redo(),a.preventDefault())})}change(t,n){if(this.stack[t].length===0)return;const a=this.stack[t].pop();if(!a)return;const o=this.quill.getContents(),l=a.delta.invert(o);this.stack[n].push({delta:l,range:nx(a.range,l)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(a.delta,ye.sources.USER),this.ignoreChange=!1,this.restoreSelection(a)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(t,n){if(t.ops.length===0)return;this.stack.redo=[];let a=t.invert(n),o=this.currentRange;const l=Date.now();if(this.lastRecorded+this.options.delay>l&&this.stack.undo.length>0){const d=this.stack.undo.pop();d&&(a=a.compose(d.delta),o=d.range)}else this.lastRecorded=l;a.length()!==0&&(this.stack.undo.push({delta:a,range:o}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(t){h1(this.stack.undo,t),h1(this.stack.redo,t)}undo(){this.change("undo","redo")}restoreSelection(t){if(t.range)this.quill.setSelection(t.range,ye.sources.USER);else{const n=k7(this.quill.scroll,t.delta);this.quill.setSelection(n,ye.sources.USER)}}}function h1(s,t){let n=t;for(let a=s.length-1;a>=0;a-=1){const o=s[a];s[a]={delta:n.transform(o.delta,!0),range:o.range&&nx(o.range,n)},n=o.delta.transform(n),s[a].delta.length()===0&&s.splice(a,1)}}function N7(s,t){const n=t.ops[t.ops.length-1];return n==null?!1:n.insert!=null?typeof n.insert=="string"&&n.insert.endsWith(`
`):n.attributes!=null?Object.keys(n.attributes).some(a=>s.query(a,tt.BLOCK)!=null):!1}function k7(s,t){const n=t.reduce((o,l)=>o+(l.delete||0),0);let a=t.length()-n;return N7(s,t)&&(a-=1),a}function nx(s,t){if(!s)return s;const n=t.transformPosition(s.index),a=t.transformPosition(s.index+s.length);return{index:n,length:a-n}}class Xk extends fa{constructor(t,n){super(t,n),t.root.addEventListener("drop",a=>{a.preventDefault();let o=null;if(document.caretRangeFromPoint)o=document.caretRangeFromPoint(a.clientX,a.clientY);else if(document.caretPositionFromPoint){const d=document.caretPositionFromPoint(a.clientX,a.clientY);o=document.createRange(),o.setStart(d.offsetNode,d.offset),o.setEnd(d.offsetNode,d.offset)}const l=o&&t.selection.normalizeNative(o);if(l){const d=t.selection.normalizedToRange(l);a.dataTransfer?.files&&this.upload(d,a.dataTransfer.files)}})}upload(t,n){const a=[];Array.from(n).forEach(o=>{o&&this.options.mimetypes?.includes(o.type)&&a.push(o)}),a.length>0&&this.options.handler.call(this,t,a)}}Xk.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(s,t){if(!this.quill.scroll.query("image"))return;const n=t.map(a=>new Promise(o=>{const l=new FileReader;l.onload=()=>{o(l.result)},l.readAsDataURL(a)}));Promise.all(n).then(a=>{const o=a.reduce((l,d)=>l.insert({image:d}),new Xe().retain(s.index).delete(s.length));this.quill.updateContents(o,He.sources.USER),this.quill.setSelection(s.index+a.length,He.sources.SILENT)})}};const C7=["insertText","insertReplacementText"];class S7 extends fa{constructor(t,n){super(t,n),t.root.addEventListener("beforeinput",a=>{this.handleBeforeInput(a)}),/Android/i.test(navigator.userAgent)||t.on(ye.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(t){fg({range:t,quill:this.quill})}replaceText(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(t.length===0)return!1;if(n){const a=this.quill.getFormat(t.index,1);this.deleteRange(t),this.quill.updateContents(new Xe().retain(t.index).insert(n,a),ye.sources.USER)}else this.deleteRange(t);return this.quill.setSelection(t.index+n.length,0,ye.sources.SILENT),!0}handleBeforeInput(t){if(this.quill.composition.isComposing||t.defaultPrevented||!C7.includes(t.inputType))return;const n=t.getTargetRanges?t.getTargetRanges()[0]:null;if(!n||n.collapsed===!0)return;const a=E7(t);if(a==null)return;const o=this.quill.selection.normalizeNative(n),l=o?this.quill.selection.normalizedToRange(o):null;l&&this.replaceText(l,a)&&t.preventDefault()}handleCompositionStart(){const t=this.quill.getSelection();t&&this.replaceText(t)}}function E7(s){return typeof s.data=="string"?s.data:s.dataTransfer?.types.includes("text/plain")?s.dataTransfer.getData("text/plain"):null}const T7=/Mac/i.test(navigator.platform),A7=100,P7=s=>!!(s.key==="ArrowLeft"||s.key==="ArrowRight"||s.key==="ArrowUp"||s.key==="ArrowDown"||s.key==="Home"||T7&&s.key==="a"&&s.ctrlKey===!0);class R7 extends fa{isListening=!1;selectionChangeDeadline=0;constructor(t,n){super(t,n),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(t,n){let{line:a,event:o}=n;if(!(a instanceof zr)||!a.uiNode)return!0;const l=getComputedStyle(a.domNode).direction==="rtl";return l&&o.key!=="ArrowRight"||!l&&o.key!=="ArrowLeft"?!0:(this.quill.setSelection(t.index-1,t.length+(o.shiftKey?1:0),ye.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",t=>{!t.defaultPrevented&&P7(t)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+A7,this.isListening)return;this.isListening=!0;const t=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",t,{once:!0})}handleSelectionChange(){const t=document.getSelection();if(!t)return;const n=t.getRangeAt(0);if(n.collapsed!==!0||n.startOffset!==0)return;const a=this.quill.scroll.find(n.startContainer);if(!(a instanceof zr)||!a.uiNode)return;const o=document.createRange();o.setStartAfter(a.uiNode),o.setEndAfter(a.uiNode),t.removeAllRanges(),t.addRange(o)}}ye.register({"blots/block":nn,"blots/block/embed":jr,"blots/break":Vr,"blots/container":Eo,"blots/cursor":qr,"blots/embed":lg,"blots/inline":bn,"blots/scroll":$M,"blots/text":Hr,"modules/clipboard":d7,"modules/history":j7,"modules/keyboard":Um,"modules/uploader":Xk,"modules/input":S7,"modules/uiNode":R7});class I7 extends Wr{add(t,n){let a=0;if(n==="+1"||n==="-1"){const o=this.value(t)||0;a=n==="+1"?o+1:o-1}else typeof n=="number"&&(a=n);return a===0?(this.remove(t),!0):super.add(t,a.toString())}canAdd(t,n){return super.canAdd(t,n)||super.canAdd(t,parseInt(n,10))}value(t){return parseInt(super.value(t),10)||void 0}}const O7=new I7("indent","ql-indent",{scope:tt.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class _7 extends nn{static blotName="blockquote";static tagName="blockquote"}class L7 extends nn{static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(t){return this.tagName.indexOf(t.tagName)+1}}class od extends Eo{}od.blotName="list-container";od.tagName="OL";class ld extends nn{static create(t){const n=super.create();return n.setAttribute("data-list",t),n}static formats(t){return t.getAttribute("data-list")||void 0}static register(){ye.register(od)}constructor(t,n){super(t,n);const a=n.ownerDocument.createElement("span"),o=l=>{if(!t.isEnabled())return;const d=this.statics.formats(n,t);d==="checked"?(this.format("list","unchecked"),l.preventDefault()):d==="unchecked"&&(this.format("list","checked"),l.preventDefault())};a.addEventListener("mousedown",o),a.addEventListener("touchstart",o),this.attachUI(a)}format(t,n){t===this.statics.blotName&&n?this.domNode.setAttribute("data-list",n):super.format(t,n)}}ld.blotName="list";ld.tagName="LI";od.allowedChildren=[ld];ld.requiredContainer=od;class xg extends bn{static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(t){super.optimize(t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}class M7 extends xg{static blotName="italic";static tagName=["EM","I"]}class cm extends bn{static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(t){const n=super.create(t);return n.setAttribute("href",this.sanitize(t)),n.setAttribute("rel","noopener noreferrer"),n.setAttribute("target","_blank"),n}static formats(t){return t.getAttribute("href")}static sanitize(t){return Zk(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}format(t,n){t!==this.statics.blotName||!n?super.format(t,n):this.domNode.setAttribute("href",this.constructor.sanitize(n))}}function Zk(s,t){const n=document.createElement("a");n.href=s;const a=n.href.slice(0,n.href.indexOf(":"));return t.indexOf(a)>-1}class D7 extends bn{static blotName="script";static tagName=["SUB","SUP"];static create(t){return t==="super"?document.createElement("sup"):t==="sub"?document.createElement("sub"):super.create(t)}static formats(t){if(t.tagName==="SUB")return"sub";if(t.tagName==="SUP")return"super"}}class $7 extends xg{static blotName="strike";static tagName=["S","STRIKE"]}class q7 extends bn{static blotName="underline";static tagName="U"}class F7 extends lg{static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(t){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const n=super.create(t);return typeof t=="string"&&(window.katex.render(t,n,{throwOnError:!1,errorColor:"#f00"}),n.setAttribute("data-value",t)),n}static value(t){return t.getAttribute("data-value")}html(){const{formula:t}=this.value();return`<span>${t}</span>`}}const f1=["alt","height","width"];class z7 extends rr{static blotName="image";static tagName="IMG";static create(t){const n=super.create(t);return typeof t=="string"&&n.setAttribute("src",this.sanitize(t)),n}static formats(t){return f1.reduce((n,a)=>(t.hasAttribute(a)&&(n[a]=t.getAttribute(a)),n),{})}static match(t){return/\.(jpe?g|gif|png)$/.test(t)||/^data:image\/.+;base64/.test(t)}static sanitize(t){return Zk(t,["http","https","data"])?t:"//:0"}static value(t){return t.getAttribute("src")}format(t,n){f1.indexOf(t)>-1?n?this.domNode.setAttribute(t,n):this.domNode.removeAttribute(t):super.format(t,n)}}const p1=["height","width"];class U7 extends jr{static blotName="video";static className="ql-video";static tagName="IFRAME";static create(t){const n=super.create(t);return n.setAttribute("frameborder","0"),n.setAttribute("allowfullscreen","true"),n.setAttribute("src",this.sanitize(t)),n}static formats(t){return p1.reduce((n,a)=>(t.hasAttribute(a)&&(n[a]=t.getAttribute(a)),n),{})}static sanitize(t){return cm.sanitize(t)}static value(t){return t.getAttribute("src")}format(t,n){p1.indexOf(t)>-1?n?this.domNode.setAttribute(t,n):this.domNode.removeAttribute(t):super.format(t,n)}html(){const{video:t}=this.value();return`<a href="${t}">${t}</a>`}}const Ic=new Wr("code-token","hljs",{scope:tt.INLINE});class Fa extends bn{static formats(t,n){for(;t!=null&&t!==n.domNode;){if(t.classList&&t.classList.contains(Nn.className))return super.formats(t,n);t=t.parentNode}}constructor(t,n,a){super(t,n,a),Ic.add(this.domNode,a)}format(t,n){t!==Fa.blotName?super.format(t,n):n?Ic.add(this.domNode,n):(Ic.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Ic.value(this.domNode)||this.unwrap()}}Fa.blotName="code-token";Fa.className="ql-token";class wr extends Nn{static create(t){const n=super.create(t);return typeof t=="string"&&n.setAttribute("data-language",t),n}static formats(t){return t.getAttribute("data-language")||"plain"}static register(){}format(t,n){t===this.statics.blotName&&n?this.domNode.setAttribute("data-language",n):super.format(t,n)}replaceWith(t,n){return this.formatAt(0,this.length(),Fa.blotName,!1),super.replaceWith(t,n)}}class qc extends To{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(t,n){t===wr.blotName&&(this.forceNext=!0,this.children.forEach(a=>{a.format(t,n)}))}formatAt(t,n,a,o){a===wr.blotName&&(this.forceNext=!0),super.formatAt(t,n,a,o)}highlight(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const o=`${Array.from(this.domNode.childNodes).filter(d=>d!==this.uiNode).map(d=>d.textContent).join(`
`)}
`,l=wr.formats(this.children.head.domNode);if(n||this.forceNext||this.cachedText!==o){if(o.trim().length>0||this.cachedText==null){const d=this.children.reduce((h,f)=>h.concat(Dk(f,!1)),new Xe),u=t(o,l);d.diff(u).reduce((h,f)=>{let{retain:b,attributes:v}=f;return b?(v&&Object.keys(v).forEach(y=>{[wr.blotName,Fa.blotName].includes(y)&&this.formatAt(h,b,y,v[y])}),h+b):h},0)}this.cachedText=o,this.forceNext=!1}}html(t,n){const[a]=this.children.find(t);return`<pre data-language="${a?wr.formats(a.domNode):"plain"}">
${zm(this.code(t,n))}
</pre>`}optimize(t){if(super.optimize(t),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const n=wr.formats(this.children.head.domNode);n!==this.uiNode.value&&(this.uiNode.value=n)}}}qc.allowedChildren=[wr];wr.requiredContainer=qc;wr.allowedChildren=[Fa,qr,Hr,Vr];const B7=(s,t,n)=>{if(typeof s.versionString=="string"){const a=s.versionString.split(".")[0];if(parseInt(a,10)>=11)return s.highlight(n,{language:t}).value}return s.highlight(t,n).value};class Jk extends fa{static register(){ye.register(Fa,!0),ye.register(wr,!0),ye.register(qc,!0)}constructor(t,n){if(super(t,n),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((a,o)=>{let{key:l}=o;return a[l]=!0,a},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(ye.events.SCROLL_BLOT_MOUNT,t=>{if(!(t instanceof qc))return;const n=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(a=>{let{key:o,label:l}=a;const d=n.ownerDocument.createElement("option");d.textContent=l,d.setAttribute("value",o),n.appendChild(d)}),n.addEventListener("change",()=>{t.format(wr.blotName,n.value),this.quill.root.focus(),this.highlight(t,!0)}),t.uiNode==null&&(t.attachUI(n),t.children.head&&(n.value=wr.formats(t.children.head.domNode)))})}initTimer(){let t=null;this.quill.on(ye.events.SCROLL_OPTIMIZE,()=>{t&&clearTimeout(t),t=setTimeout(()=>{this.highlight(),t=null},this.options.interval)})}highlight(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(ye.sources.USER);const a=this.quill.getSelection();(t==null?this.quill.scroll.descendants(qc):[t]).forEach(l=>{l.highlight(this.highlightBlot,n)}),this.quill.update(ye.sources.SILENT),a!=null&&this.quill.setSelection(a,ye.sources.SILENT)}highlightBlot(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(n=this.languages[n]?n:"plain",n==="plain")return zm(t).split(`
`).reduce((o,l,d)=>(d!==0&&o.insert(`
`,{[Nn.blotName]:n}),o.insert(l)),new Xe);const a=this.quill.root.ownerDocument.createElement("div");return a.classList.add(Nn.className),a.innerHTML=B7(this.options.hljs,n,t),pg(this.quill.scroll,a,[(o,l)=>{const d=Ic.value(o);return d?l.compose(new Xe().retain(l.length(),{[Fa.blotName]:d})):l}],[(o,l)=>o.data.split(`
`).reduce((d,u,h)=>(h!==0&&d.insert(`
`,{[Nn.blotName]:n}),d.insert(u)),l)],new WeakMap)}}Jk.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};class Fr extends nn{static blotName="table";static tagName="TD";static create(t){const n=super.create();return t?n.setAttribute("data-row",t):n.setAttribute("data-row",gg()),n}static formats(t){if(t.hasAttribute("data-row"))return t.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(t,n){t===Fr.blotName&&n?this.domNode.setAttribute("data-row",n):super.format(t,n)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}class vo extends Eo{static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const t=this.children.head.formats(),n=this.children.tail.formats(),a=this.next.children.head.formats(),o=this.next.children.tail.formats();return t.table===n.table&&t.table===a.table&&t.table===o.table}return!1}optimize(t){super.optimize(t),this.children.forEach(n=>{if(n.next==null)return;const a=n.formats(),o=n.next.formats();if(a.table!==o.table){const l=this.splitAfter(n);l&&l.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}class ji extends Eo{static blotName="table-body";static tagName="TBODY"}class dm extends Eo{static blotName="table-container";static tagName="TABLE";balanceCells(){const t=this.descendants(vo),n=t.reduce((a,o)=>Math.max(o.children.length,a),0);t.forEach(a=>{new Array(n-a.children.length).fill(0).forEach(()=>{let o;a.children.head!=null&&(o=Fr.formats(a.children.head.domNode));const l=this.scroll.create(Fr.blotName,o);a.appendChild(l),l.optimize()})})}cells(t){return this.rows().map(n=>n.children.at(t))}deleteColumn(t){const[n]=this.descendant(ji);n==null||n.children.head==null||n.children.forEach(a=>{const o=a.children.at(t);o?.remove()})}insertColumn(t){const[n]=this.descendant(ji);n==null||n.children.head==null||n.children.forEach(a=>{const o=a.children.at(t),l=Fr.formats(a.children.head.domNode),d=this.scroll.create(Fr.blotName,l);a.insertBefore(d,o)})}insertRow(t){const[n]=this.descendant(ji);if(n==null||n.children.head==null)return;const a=gg(),o=this.scroll.create(vo.blotName);n.children.head.children.forEach(()=>{const d=this.scroll.create(Fr.blotName,a);o.appendChild(d)});const l=n.children.at(t);n.insertBefore(o,l)}rows(){const t=this.children.head;return t==null?[]:t.children.map(n=>n)}}dm.allowedChildren=[ji];ji.requiredContainer=dm;ji.allowedChildren=[vo];vo.requiredContainer=ji;vo.allowedChildren=[Fr];Fr.requiredContainer=vo;function gg(){return`row-${Math.random().toString(36).slice(2,6)}`}class H7 extends fa{static register(){ye.register(Fr),ye.register(vo),ye.register(ji),ye.register(dm)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(dm).forEach(t=>{t.balanceCells()})}deleteColumn(){const[t,,n]=this.getTable();n!=null&&(t.deleteColumn(n.cellOffset()),this.quill.update(ye.sources.USER))}deleteRow(){const[,t]=this.getTable();t!=null&&(t.remove(),this.quill.update(ye.sources.USER))}deleteTable(){const[t]=this.getTable();if(t==null)return;const n=t.offset();t.remove(),this.quill.update(ye.sources.USER),this.quill.setSelection(n,ye.sources.SILENT)}getTable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(t==null)return[null,null,null,-1];const[n,a]=this.quill.getLine(t.index);if(n==null||n.statics.blotName!==Fr.blotName)return[null,null,null,-1];const o=n.parent;return[o.parent.parent,o,n,a]}insertColumn(t){const n=this.quill.getSelection();if(!n)return;const[a,o,l]=this.getTable(n);if(l==null)return;const d=l.cellOffset();a.insertColumn(d+t),this.quill.update(ye.sources.USER);let u=o.rowOffset();t===0&&(u+=1),this.quill.setSelection(n.index+u,n.length,ye.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(t){const n=this.quill.getSelection();if(!n)return;const[a,o,l]=this.getTable(n);if(l==null)return;const d=o.rowOffset();a.insertRow(d+t),this.quill.update(ye.sources.USER),t>0?this.quill.setSelection(n,ye.sources.SILENT):this.quill.setSelection(n.index+o.children.length,n.length,ye.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(t,n){const a=this.quill.getSelection();if(a==null)return;const o=new Array(t).fill(0).reduce(l=>{const d=new Array(n).fill(`
`).join("");return l.insert(d,{table:gg()})},new Xe().retain(a.index));this.quill.updateContents(o,ye.sources.USER),this.quill.setSelection(a.index,ye.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(ye.events.SCROLL_OPTIMIZE,t=>{t.some(n=>["TD","TR","TBODY","TABLE"].includes(n.target.tagName)?(this.quill.once(ye.events.TEXT_CHANGE,(a,o,l)=>{l===ye.sources.USER&&this.balanceTables()}),!0):!1)})}}const x1=Ba("quill:toolbar");class vg extends fa{constructor(t,n){if(super(t,n),Array.isArray(this.options.container)){const a=document.createElement("div");a.setAttribute("role","toolbar"),K7(a,this.options.container),t.container?.parentNode?.insertBefore(a,t.container),this.container=a}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){x1.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(a=>{const o=this.options.handlers?.[a];o&&this.addHandler(a,o)}),Array.from(this.container.querySelectorAll("button, select")).forEach(a=>{this.attach(a)}),this.quill.on(ye.events.EDITOR_CHANGE,()=>{const[a]=this.quill.selection.getRange();this.update(a)})}addHandler(t,n){this.handlers[t]=n}attach(t){let n=Array.from(t.classList).find(o=>o.indexOf("ql-")===0);if(!n)return;if(n=n.slice(3),t.tagName==="BUTTON"&&t.setAttribute("type","button"),this.handlers[n]==null&&this.quill.scroll.query(n)==null){x1.warn("ignoring attaching to nonexistent format",n,t);return}const a=t.tagName==="SELECT"?"change":"click";t.addEventListener(a,o=>{let l;if(t.tagName==="SELECT"){if(t.selectedIndex<0)return;const u=t.options[t.selectedIndex];u.hasAttribute("selected")?l=!1:l=u.value||!1}else t.classList.contains("ql-active")?l=!1:l=t.value||!t.hasAttribute("value"),o.preventDefault();this.quill.focus();const[d]=this.quill.selection.getRange();if(this.handlers[n]!=null)this.handlers[n].call(this,l);else if(this.quill.scroll.query(n).prototype instanceof rr){if(l=prompt(`Enter ${n}`),!l)return;this.quill.updateContents(new Xe().retain(d.index).delete(d.length).insert({[n]:l}),ye.sources.USER)}else this.quill.format(n,l,ye.sources.USER);this.update(d)}),this.controls.push([n,t])}update(t){const n=t==null?{}:this.quill.getFormat(t);this.controls.forEach(a=>{const[o,l]=a;if(l.tagName==="SELECT"){let d=null;if(t==null)d=null;else if(n[o]==null)d=l.querySelector("option[selected]");else if(!Array.isArray(n[o])){let u=n[o];typeof u=="string"&&(u=u.replace(/"/g,'\\"')),d=l.querySelector(`option[value="${u}"]`)}d==null?(l.value="",l.selectedIndex=-1):d.selected=!0}else if(t==null)l.classList.remove("ql-active"),l.setAttribute("aria-pressed","false");else if(l.hasAttribute("value")){const d=n[o],u=d===l.getAttribute("value")||d!=null&&d.toString()===l.getAttribute("value")||d==null&&!l.getAttribute("value");l.classList.toggle("ql-active",u),l.setAttribute("aria-pressed",u.toString())}else{const d=n[o]!=null;l.classList.toggle("ql-active",d),l.setAttribute("aria-pressed",d.toString())}})}}vg.DEFAULTS={};function g1(s,t,n){const a=document.createElement("button");a.setAttribute("type","button"),a.classList.add(`ql-${t}`),a.setAttribute("aria-pressed","false"),n!=null?(a.value=n,a.setAttribute("aria-label",`${t}: ${n}`)):a.setAttribute("aria-label",t),s.appendChild(a)}function K7(s,t){Array.isArray(t[0])||(t=[t]),t.forEach(n=>{const a=document.createElement("span");a.classList.add("ql-formats"),n.forEach(o=>{if(typeof o=="string")g1(a,o);else{const l=Object.keys(o)[0],d=o[l];Array.isArray(d)?W7(a,l,d):g1(a,l,d)}}),s.appendChild(a)})}function W7(s,t,n){const a=document.createElement("select");a.classList.add(`ql-${t}`),n.forEach(o=>{const l=document.createElement("option");o!==!1?l.setAttribute("value",String(o)):l.setAttribute("selected","selected"),a.appendChild(l)}),s.appendChild(a)}vg.DEFAULTS={container:null,handlers:{clean(){const s=this.quill.getSelection();if(s!=null)if(s.length===0){const t=this.quill.getFormat();Object.keys(t).forEach(n=>{this.quill.scroll.query(n,tt.INLINE)!=null&&this.quill.format(n,!1,ye.sources.USER)})}else this.quill.removeFormat(s.index,s.length,ye.sources.USER)},direction(s){const{align:t}=this.quill.getFormat();s==="rtl"&&t==null?this.quill.format("align","right",ye.sources.USER):!s&&t==="right"&&this.quill.format("align",!1,ye.sources.USER),this.quill.format("direction",s,ye.sources.USER)},indent(s){const t=this.quill.getSelection(),n=this.quill.getFormat(t),a=parseInt(n.indent||0,10);if(s==="+1"||s==="-1"){let o=s==="+1"?1:-1;n.direction==="rtl"&&(o*=-1),this.quill.format("indent",a+o,ye.sources.USER)}},link(s){s===!0&&(s=prompt("Enter link URL:")),this.quill.format("link",s,ye.sources.USER)},list(s){const t=this.quill.getSelection(),n=this.quill.getFormat(t);s==="check"?n.list==="checked"||n.list==="unchecked"?this.quill.format("list",!1,ye.sources.USER):this.quill.format("list","unchecked",ye.sources.USER):this.quill.format("list",s,ye.sources.USER)}}};const V7='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',G7='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',Q7='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',Y7='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',X7='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',Z7='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',J7='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',e9='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',v1='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',t9='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',s9='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',n9='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',r9='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',a9='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',i9='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',o9='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',l9='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',c9='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',d9='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',u9='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',m9='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',h9='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',f9='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',p9='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',x9='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',g9='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',v9='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',y9='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',b9='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',w9='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',j9='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',N9='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',k9='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',Jc={align:{"":V7,center:G7,right:Q7,justify:Y7},background:X7,blockquote:Z7,bold:J7,clean:e9,code:v1,"code-block":v1,color:t9,direction:{"":s9,rtl:n9},formula:r9,header:{1:a9,2:i9,3:o9,4:l9,5:c9,6:d9},italic:u9,image:m9,indent:{"+1":h9,"-1":f9},link:p9,list:{bullet:x9,check:g9,ordered:v9},script:{sub:y9,super:b9},strike:w9,table:j9,underline:N9,video:k9},C9='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let y1=0;function b1(s,t){s.setAttribute(t,`${s.getAttribute(t)!=="true"}`)}class Bm{constructor(t){this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",n=>{switch(n.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),n.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),b1(this.label,"aria-expanded"),b1(this.options,"aria-hidden")}buildItem(t){const n=document.createElement("span");n.tabIndex="0",n.setAttribute("role","button"),n.classList.add("ql-picker-item");const a=t.getAttribute("value");return a&&n.setAttribute("data-value",a),t.textContent&&n.setAttribute("data-label",t.textContent),n.addEventListener("click",()=>{this.selectItem(n,!0)}),n.addEventListener("keydown",o=>{switch(o.key){case"Enter":this.selectItem(n,!0),o.preventDefault();break;case"Escape":this.escape(),o.preventDefault();break}}),n}buildLabel(){const t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML=C9,t.tabIndex="0",t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),this.container.appendChild(t),t}buildOptions(){const t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id=`ql-picker-options-${y1}`,y1+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,Array.from(this.select.options).forEach(n=>{const a=this.buildItem(n);t.appendChild(a),n.selected===!0&&this.selectItem(a)}),this.container.appendChild(t)}buildPicker(){Array.from(this.select.attributes).forEach(t=>{this.container.setAttribute(t.name,t.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const a=this.container.querySelector(".ql-selected");t!==a&&(a?.classList.remove("ql-selected"),t!=null&&(t.classList.add("ql-selected"),this.select.selectedIndex=Array.from(t.parentNode.children).indexOf(t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),n&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let t;if(this.select.selectedIndex>-1){const a=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex],this.selectItem(a)}else this.selectItem(null);const n=t!=null&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",n)}}class e5 extends Bm{constructor(t,n){super(t),this.label.innerHTML=n,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(a=>{a.classList.add("ql-primary")})}buildItem(t){const n=super.buildItem(t);return n.style.backgroundColor=t.getAttribute("value")||"",n}selectItem(t,n){super.selectItem(t,n);const a=this.label.querySelector(".ql-color-label"),o=t&&t.getAttribute("data-value")||"";a&&(a.tagName==="line"?a.style.stroke=o:a.style.fill=o)}}let t5=class extends Bm{constructor(t,n){super(t),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(a=>{a.innerHTML=n[a.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(t,n){super.selectItem(t,n);const a=t||this.defaultItem;if(a!=null){if(this.label.innerHTML===a.innerHTML)return;this.label.innerHTML=a.innerHTML}}};const S9=s=>{const{overflowY:t}=getComputedStyle(s,null);return t!=="visible"&&t!=="clip"};class s5{constructor(t,n){this.quill=t,this.boundsContainer=n||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,S9(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(t){const n=t.left+t.width/2-this.root.offsetWidth/2,a=t.bottom+this.quill.root.scrollTop;this.root.style.left=`${n}px`,this.root.style.top=`${a}px`,this.root.classList.remove("ql-flip");const o=this.boundsContainer.getBoundingClientRect(),l=this.root.getBoundingClientRect();let d=0;if(l.right>o.right&&(d=o.right-l.right,this.root.style.left=`${n+d}px`),l.left<o.left&&(d=o.left-l.left,this.root.style.left=`${n+d}px`),l.bottom>o.bottom){const u=l.bottom-l.top,h=t.bottom-t.top+u;this.root.style.top=`${a-h}px`,this.root.classList.add("ql-flip")}return d}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const E9=[!1,"center","right","justify"],T9=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],A9=[!1,"serif","monospace"],P9=["1","2","3",!1],R9=["small",!1,"large","huge"];class cd extends ql{constructor(t,n){super(t,n);const a=o=>{if(!document.body.contains(t.root)){document.body.removeEventListener("click",a);return}this.tooltip!=null&&!this.tooltip.root.contains(o.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(l=>{l.container.contains(o.target)||l.close()})};t.emitter.listenDOM("click",document.body,a)}addModule(t){const n=super.addModule(t);return t==="toolbar"&&this.extendToolbar(n),n}buildButtons(t,n){Array.from(t).forEach(a=>{(a.getAttribute("class")||"").split(/\s+/).forEach(l=>{if(l.startsWith("ql-")&&(l=l.slice(3),n[l]!=null))if(l==="direction")a.innerHTML=n[l][""]+n[l].rtl;else if(typeof n[l]=="string")a.innerHTML=n[l];else{const d=a.value||"";d!=null&&n[l][d]&&(a.innerHTML=n[l][d])}})})}buildPickers(t,n){this.pickers=Array.from(t).map(o=>{if(o.classList.contains("ql-align")&&(o.querySelector("option")==null&&Nc(o,E9),typeof n.align=="object"))return new t5(o,n.align);if(o.classList.contains("ql-background")||o.classList.contains("ql-color")){const l=o.classList.contains("ql-background")?"background":"color";return o.querySelector("option")==null&&Nc(o,T9,l==="background"?"#ffffff":"#000000"),new e5(o,n[l])}return o.querySelector("option")==null&&(o.classList.contains("ql-font")?Nc(o,A9):o.classList.contains("ql-header")?Nc(o,P9):o.classList.contains("ql-size")&&Nc(o,R9)),new Bm(o)});const a=()=>{this.pickers.forEach(o=>{o.update()})};this.quill.on(He.events.EDITOR_CHANGE,a)}}cd.DEFAULTS=wi({},ql.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let s=this.container.querySelector("input.ql-image[type=file]");s==null&&(s=document.createElement("input"),s.setAttribute("type","file"),s.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),s.classList.add("ql-image"),s.addEventListener("change",()=>{const t=this.quill.getSelection(!0);this.quill.uploader.upload(t,s.files),s.value=""}),this.container.appendChild(s)),s.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class n5 extends s5{constructor(t,n){super(t,n),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",t=>{t.key==="Enter"?(this.save(),t.preventDefault()):t.key==="Escape"&&(this.cancel(),t.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;n!=null?this.textbox.value=n:t!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const a=this.quill.getBounds(this.quill.selection.savedRange);a!=null&&this.position(a),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${t}`)||""),this.root.setAttribute("data-mode",t)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:t}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:n}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",t,He.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",t,He.sources.USER)),this.quill.root.scrollTop=n;break}case"video":t=I9(t);case"formula":{if(!t)break;const n=this.quill.getSelection(!0);if(n!=null){const a=n.index+n.length;this.quill.insertEmbed(a,this.root.getAttribute("data-mode"),t,He.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(a+1," ",He.sources.USER),this.quill.setSelection(a+2,He.sources.USER)}break}}this.textbox.value="",this.hide()}}function I9(s){let t=s.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||s.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return t?`${t[1]||"https"}://www.youtube.com/embed/${t[2]}?showinfo=0`:(t=s.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${t[1]||"https"}://player.vimeo.com/video/${t[2]}/`:s}function Nc(s,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;t.forEach(a=>{const o=document.createElement("option");a===n?o.setAttribute("selected","selected"):o.setAttribute("value",String(a)),s.appendChild(o)})}const O9=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class _9 extends n5{static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(t,n){super(t,n),this.quill.on(He.events.EDITOR_CHANGE,(a,o,l,d)=>{if(a===He.events.SELECTION_CHANGE)if(o!=null&&o.length>0&&d===He.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const u=this.quill.getLines(o.index,o.length);if(u.length===1){const h=this.quill.getBounds(o);h!=null&&this.position(h)}else{const h=u[u.length-1],f=this.quill.getIndex(h),b=Math.min(h.length()-1,o.index+o.length-f),v=this.quill.getBounds(new go(f,b));v!=null&&this.position(v)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(He.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const t=this.quill.getSelection();if(t!=null){const n=this.quill.getBounds(t);n!=null&&this.position(n)}},1)})}cancel(){this.show()}position(t){const n=super.position(t),a=this.root.querySelector(".ql-tooltip-arrow");return a.style.marginLeft="",n!==0&&(a.style.marginLeft=`${-1*n-a.offsetWidth/2}px`),n}}class r5 extends cd{constructor(t,n){n.modules.toolbar!=null&&n.modules.toolbar.container==null&&(n.modules.toolbar.container=O9),super(t,n),this.quill.container.classList.add("ql-bubble")}extendToolbar(t){this.tooltip=new _9(this.quill,this.options.bounds),t.container!=null&&(this.tooltip.root.appendChild(t.container),this.buildButtons(t.container.querySelectorAll("button"),Jc),this.buildPickers(t.container.querySelectorAll("select"),Jc))}}r5.DEFAULTS=wi({},cd.DEFAULTS,{modules:{toolbar:{handlers:{link(s){s?this.quill.theme.tooltip.edit():this.quill.format("link",!1,ye.sources.USER)}}}}});const L9=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class M9 extends n5{static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",t=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),t.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",t=>{if(this.linkRange!=null){const n=this.linkRange;this.restoreFocus(),this.quill.formatText(n,"link",!1,He.sources.USER),delete this.linkRange}t.preventDefault(),this.hide()}),this.quill.on(He.events.SELECTION_CHANGE,(t,n,a)=>{if(t!=null){if(t.length===0&&a===He.sources.USER){const[o,l]=this.quill.scroll.descendant(cm,t.index);if(o!=null){this.linkRange=new go(t.index-l,o.length());const d=cm.formats(o.domNode);this.preview.textContent=d,this.preview.setAttribute("href",d),this.show();const u=this.quill.getBounds(this.linkRange);u!=null&&this.position(u);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}class a5 extends cd{constructor(t,n){n.modules.toolbar!=null&&n.modules.toolbar.container==null&&(n.modules.toolbar.container=L9),super(t,n),this.quill.container.classList.add("ql-snow")}extendToolbar(t){t.container!=null&&(t.container.classList.add("ql-snow"),this.buildButtons(t.container.querySelectorAll("button"),Jc),this.buildPickers(t.container.querySelectorAll("select"),Jc),this.tooltip=new M9(this.quill,this.options.bounds),t.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(n,a)=>{t.handlers.link.call(t,!a.format.link)}))}}a5.DEFAULTS=wi({},cd.DEFAULTS,{modules:{toolbar:{handlers:{link(s){if(s){const t=this.quill.getSelection();if(t==null||t.length===0)return;let n=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(n)&&n.indexOf("mailto:")!==0&&(n=`mailto:${n}`);const{tooltip:a}=this.quill.theme;a.edit("link",n)}else this.quill.format("link",!1,ye.sources.USER)}}}}});ye.register({"attributors/attribute/direction":Uk,"attributors/class/align":qk,"attributors/class/background":zM,"attributors/class/color":FM,"attributors/class/direction":Bk,"attributors/class/font":Wk,"attributors/class/size":Gk,"attributors/style/align":Fk,"attributors/style/background":ug,"attributors/style/color":dg,"attributors/style/direction":Hk,"attributors/style/font":Vk,"attributors/style/size":Qk},!0);ye.register({"formats/align":qk,"formats/direction":Bk,"formats/indent":O7,"formats/background":ug,"formats/color":dg,"formats/font":Wk,"formats/size":Gk,"formats/blockquote":_7,"formats/code-block":Nn,"formats/header":L7,"formats/list":ld,"formats/bold":xg,"formats/code":mg,"formats/italic":M7,"formats/link":cm,"formats/script":D7,"formats/strike":$7,"formats/underline":q7,"formats/formula":F7,"formats/image":z7,"formats/video":U7,"modules/syntax":Jk,"modules/table":H7,"modules/toolbar":vg,"themes/bubble":r5,"themes/snow":a5,"ui/icons":Jc,"ui/picker":Bm,"ui/icon-picker":t5,"ui/color-picker":e5,"ui/tooltip":s5},!0);var Hm=class extends ot.Component{constructor(s){super(s),this.editingAreaRef=p.createRef(),this.containerRef=p.createRef(),this.dirtyProps=["modules","formats","bounds","theme","children"],this.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp","useSemanticHTML"],this.state={generation:0},this.selection=null,this.onEditorChange=(n,a,o,l)=>{n==="text-change"?this.onEditorChangeText?.(this.props.useSemanticHTML!==!1?this.editor.getSemanticHTML():this.editor.root.innerHTML,a,l,this.unprivilegedEditor):n==="selection-change"&&this.onEditorChangeSelection?.(a,l,this.unprivilegedEditor)};const t=this.isControlled()?s.value:s.defaultValue;this.value=t??""}validateProps(s){if(ot.Children.count(s.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(ot.Children.count(s.children)&&ot.Children.only(s.children)?.type==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.");if(this.lastDeltaChangeSet&&s.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")}shouldComponentUpdate(s,t){if(this.validateProps(s),!this.editor||this.state.generation!==t.generation)return!0;if("value"in s){const n=this.getEditorContents(),a=s.value??"";this.isEqualValue(a,n)||this.setEditorContents(this.editor,a)}return s.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,s.readOnly),[...this.cleanProps,...this.dirtyProps].some(n=>!gi(s[n],this.props[n]))}shouldComponentRegenerate(s){return this.dirtyProps.some(t=>!gi(s[t],this.props[t]))}componentDidMount(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())}componentWillUnmount(){this.destroyEditor()}componentDidUpdate(s,t){if(this.editor&&this.shouldComponentRegenerate(s)){const n=this.editor.getContents(),a=this.editor.getSelection();this.regenerationSnapshot={delta:n,selection:a},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.editor&&s.placeholder!==this.props.placeholder&&(this.editor.root.dataset.placeholder=this.props.placeholder||""),this.state.generation!==t.generation){const{delta:n,selection:a}=this.regenerationSnapshot;delete this.regenerationSnapshot,this.instantiateEditor();const o=this.editor;o.setContents(n),w1(()=>this.setEditorSelection(o,a))}}instantiateEditor(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())}destroyEditor(){if(!this.editor)return;this.unhookEditor(this.editor);const s=this.props.modules?.toolbar;if(!(typeof s=="object"&&s&&"container"in s&&typeof s.container=="string"||typeof s=="string")){const n=this.containerRef.current?.querySelector(".ql-toolbar");n&&n.remove()}delete this.editor}isControlled(){return"value"in this.props}getEditorConfig(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,tabIndex:this.props.tabIndex,theme:this.props.theme}}getEditor(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor}createEditor(s,t){const n=new ye(s,t);return t.tabIndex!=null&&this.setEditorTabIndex(n,t.tabIndex),this.hookEditor(n),n}hookEditor(s){this.unprivilegedEditor=this.makeUnprivilegedEditor(s),s.on("editor-change",this.onEditorChange)}unhookEditor(s){s.off("editor-change",this.onEditorChange)}getEditorContents(){return this.value}getEditorSelection(){return this.selection}isDelta(s){return s&&s.ops}isEqualValue(s,t){return this.isDelta(s)&&this.isDelta(t)?gi(s.ops,t.ops):gi(s,t)}setEditorContents(s,t){this.value=t;const n=this.getEditorSelection();typeof t=="string"?s.setContents(s.clipboard.convert({html:t})):s.setContents(t),w1(()=>this.setEditorSelection(s,n))}setEditorSelection(s,t){if(this.selection=t,t){const n=s.getLength();t.index=Math.max(0,Math.min(t.index,n-1)),t.length=Math.max(0,Math.min(t.length,n-1-t.index)),s.setSelection(t)}}setEditorTabIndex(s,t){s?.scroll?.domNode&&(s.scroll.domNode.tabIndex=t)}setEditorReadOnly(s,t){t?s.disable():s.enable()}makeUnprivilegedEditor(s){const t=s;return{getHTML:()=>t.root.innerHTML,getSemanticHTML:t.getSemanticHTML.bind(t),getLength:t.getLength.bind(t),getText:t.getText.bind(t),getContents:t.getContents.bind(t),getSelection:t.getSelection.bind(t),getBounds:t.getBounds.bind(t)}}getEditingArea(){const s=this.editingAreaRef.current;if(!s)throw new Error("Cannot find element for editing area");if(s.nodeType===3)throw new Error("Editing area cannot be a text node");return s}renderEditingArea(){const{children:s,preserveWhitespace:t}=this.props,{generation:n}=this.state;return ot.Children.count(s)?ot.cloneElement(ot.Children.only(s),{key:n,ref:this.editingAreaRef}):t?e.jsx("pre",{ref:this.editingAreaRef},n):e.jsx("div",{ref:this.editingAreaRef},n)}render(){return e.jsx("div",{ref:this.containerRef,id:this.props.id,style:this.props.style,className:`quill ${this.props.className??""}`,onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp,children:this.renderEditingArea()},this.state.generation)}onEditorChangeText(s,t,n,a){if(!this.editor)return;const o=this.isDelta(this.value)?a.getContents():this.props.useSemanticHTML!==!1?a.getSemanticHTML():a.getHTML();o!==this.getEditorContents()&&(this.lastDeltaChangeSet=t,this.value=o,this.props.onChange?.(s,t,n,a))}onEditorChangeSelection(s,t,n){if(!this.editor)return;const a=this.getEditorSelection(),o=!a&&s,l=a&&!s;gi(s,a)||(this.selection=s,this.props.onChangeSelection?.(s,t,n),o?this.props.onFocus?.(s,t,n):l&&this.props.onBlur?.(a,t,n))}focus(){this.editor&&this.editor.focus()}blur(){this.editor&&(this.selection=null,this.editor.blur())}};Hm.displayName="React Quill";Hm.Quill=ye;Hm.defaultProps={theme:"snow",modules:{},readOnly:!1};function w1(s){Promise.resolve().then(s)}var i5=Hm;const{entries:o5,setPrototypeOf:j1,isFrozen:D9,getPrototypeOf:$9,getOwnPropertyDescriptor:q9}=Object;let{freeze:Cn,seal:kr,create:rx}=Object,{apply:ax,construct:ix}=typeof Reflect<"u"&&Reflect;Cn||(Cn=function(t){return t});kr||(kr=function(t){return t});ax||(ax=function(t,n){for(var a=arguments.length,o=new Array(a>2?a-2:0),l=2;l<a;l++)o[l-2]=arguments[l];return t.apply(n,o)});ix||(ix=function(t){for(var n=arguments.length,a=new Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];return new t(...a)});const Su=Sn(Array.prototype.forEach),F9=Sn(Array.prototype.lastIndexOf),N1=Sn(Array.prototype.pop),kc=Sn(Array.prototype.push),z9=Sn(Array.prototype.splice),$u=Sn(String.prototype.toLowerCase),sp=Sn(String.prototype.toString),np=Sn(String.prototype.match),Cc=Sn(String.prototype.replace),U9=Sn(String.prototype.indexOf),B9=Sn(String.prototype.trim),Lr=Sn(Object.prototype.hasOwnProperty),vn=Sn(RegExp.prototype.test),Sc=H9(TypeError);function Sn(s){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,a=new Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];return ax(s,t,a)}}function H9(s){return function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return ix(s,n)}}function gt(s,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$u;j1&&j1(s,null);let a=t.length;for(;a--;){let o=t[a];if(typeof o=="string"){const l=n(o);l!==o&&(D9(t)||(t[a]=l),o=l)}s[o]=!0}return s}function K9(s){for(let t=0;t<s.length;t++)Lr(s,t)||(s[t]=null);return s}function ra(s){const t=rx(null);for(const[n,a]of o5(s))Lr(s,n)&&(Array.isArray(a)?t[n]=K9(a):a&&typeof a=="object"&&a.constructor===Object?t[n]=ra(a):t[n]=a);return t}function Ec(s,t){for(;s!==null;){const a=q9(s,t);if(a){if(a.get)return Sn(a.get);if(typeof a.value=="function")return Sn(a.value)}s=$9(s)}function n(){return null}return n}const k1=Cn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),rp=Cn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ap=Cn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),W9=Cn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),ip=Cn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),V9=Cn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),C1=Cn(["#text"]),S1=Cn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),op=Cn(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),E1=Cn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Eu=Cn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),G9=kr(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Q9=kr(/<%[\w\W]*|[\w\W]*%>/gm),Y9=kr(/\$\{[\w\W]*/gm),X9=kr(/^data-[\-\w.\u00B7-\uFFFF]+$/),Z9=kr(/^aria-[\-\w]+$/),l5=kr(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),J9=kr(/^(?:\w+script|data):/i),eD=kr(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),c5=kr(/^html$/i),tD=kr(/^[a-z][.\w]*(-[.\w]+)+$/i);var T1=Object.freeze({__proto__:null,ARIA_ATTR:Z9,ATTR_WHITESPACE:eD,CUSTOM_ELEMENT:tD,DATA_ATTR:X9,DOCTYPE_NAME:c5,ERB_EXPR:Q9,IS_ALLOWED_URI:l5,IS_SCRIPT_OR_DATA:J9,MUSTACHE_EXPR:G9,TMPLIT_EXPR:Y9});const Tc={element:1,text:3,progressingInstruction:7,comment:8,document:9},sD=function(){return typeof window>"u"?null:window},nD=function(t,n){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let a=null;const o="data-tt-policy-suffix";n&&n.hasAttribute(o)&&(a=n.getAttribute(o));const l="dompurify"+(a?"#"+a:"");try{return t.createPolicy(l,{createHTML(d){return d},createScriptURL(d){return d}})}catch{return console.warn("TrustedTypes policy "+l+" could not be created."),null}},A1=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function d5(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:sD();const t=Ve=>d5(Ve);if(t.version="3.3.1",t.removed=[],!s||!s.document||s.document.nodeType!==Tc.document||!s.Element)return t.isSupported=!1,t;let{document:n}=s;const a=n,o=a.currentScript,{DocumentFragment:l,HTMLTemplateElement:d,Node:u,Element:h,NodeFilter:f,NamedNodeMap:b=s.NamedNodeMap||s.MozNamedAttrMap,HTMLFormElement:v,DOMParser:y,trustedTypes:N}=s,C=h.prototype,g=Ec(C,"cloneNode"),k=Ec(C,"remove"),A=Ec(C,"nextSibling"),E=Ec(C,"childNodes"),S=Ec(C,"parentNode");if(typeof d=="function"){const Ve=n.createElement("template");Ve.content&&Ve.content.ownerDocument&&(n=Ve.content.ownerDocument)}let R,H="";const{implementation:re,createNodeIterator:K,createDocumentFragment:ee,getElementsByTagName:me}=n,{importNode:pe}=a;let L=A1();t.isSupported=typeof o5=="function"&&typeof S=="function"&&re&&re.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:X,ERB_EXPR:z,TMPLIT_EXPR:V,DATA_ATTR:se,ARIA_ATTR:I,IS_SCRIPT_OR_DATA:O,ATTR_WHITESPACE:T,CUSTOM_ELEMENT:Y}=T1;let{IS_ALLOWED_URI:Q}=T1,F=null;const te=gt({},[...k1,...rp,...ap,...ip,...C1]);let B=null;const U=gt({},[...S1,...op,...E1,...Eu]);let M=Object.seal(rx(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),q=null,oe=null;const he=Object.seal(rx(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let Se=!0,be=!0,Pe=!1,Me=!0,Fe=!1,Je=!0,lt=!1,Bt=!1,Xt=!1,us=!1,ws=!1,os=!1,ms=!0,Et=!1;const _t="user-content-";let wt=!0,de=!1,Oe={},st=null;const St=gt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Zt=null;const qt=gt({},["audio","video","img","source","image","track"]);let D=null;const xe=gt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ke="http://www.w3.org/1998/Math/MathML",jt="http://www.w3.org/2000/svg",nt="http://www.w3.org/1999/xhtml";let At=nt,Us=!1,Qs=null;const Is=gt({},[Ke,jt,nt],sp);let Ys=gt({},["mi","mo","mn","ms","mtext"]),Os=gt({},["annotation-xml"]);const Bs=gt({},["title","style","font","a","script"]);let Hs=null;const En=["application/xhtml+xml","text/html"],ie="text/html";let We=null,Pt=null;const Es=n.createElement("form"),ar=function(J){return J instanceof RegExp||J instanceof Function},_s=function(){let J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Pt&&Pt===J)){if((!J||typeof J!="object")&&(J={}),J=ra(J),Hs=En.indexOf(J.PARSER_MEDIA_TYPE)===-1?ie:J.PARSER_MEDIA_TYPE,We=Hs==="application/xhtml+xml"?sp:$u,F=Lr(J,"ALLOWED_TAGS")?gt({},J.ALLOWED_TAGS,We):te,B=Lr(J,"ALLOWED_ATTR")?gt({},J.ALLOWED_ATTR,We):U,Qs=Lr(J,"ALLOWED_NAMESPACES")?gt({},J.ALLOWED_NAMESPACES,sp):Is,D=Lr(J,"ADD_URI_SAFE_ATTR")?gt(ra(xe),J.ADD_URI_SAFE_ATTR,We):xe,Zt=Lr(J,"ADD_DATA_URI_TAGS")?gt(ra(qt),J.ADD_DATA_URI_TAGS,We):qt,st=Lr(J,"FORBID_CONTENTS")?gt({},J.FORBID_CONTENTS,We):St,q=Lr(J,"FORBID_TAGS")?gt({},J.FORBID_TAGS,We):ra({}),oe=Lr(J,"FORBID_ATTR")?gt({},J.FORBID_ATTR,We):ra({}),Oe=Lr(J,"USE_PROFILES")?J.USE_PROFILES:!1,Se=J.ALLOW_ARIA_ATTR!==!1,be=J.ALLOW_DATA_ATTR!==!1,Pe=J.ALLOW_UNKNOWN_PROTOCOLS||!1,Me=J.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Fe=J.SAFE_FOR_TEMPLATES||!1,Je=J.SAFE_FOR_XML!==!1,lt=J.WHOLE_DOCUMENT||!1,us=J.RETURN_DOM||!1,ws=J.RETURN_DOM_FRAGMENT||!1,os=J.RETURN_TRUSTED_TYPE||!1,Xt=J.FORCE_BODY||!1,ms=J.SANITIZE_DOM!==!1,Et=J.SANITIZE_NAMED_PROPS||!1,wt=J.KEEP_CONTENT!==!1,de=J.IN_PLACE||!1,Q=J.ALLOWED_URI_REGEXP||l5,At=J.NAMESPACE||nt,Ys=J.MATHML_TEXT_INTEGRATION_POINTS||Ys,Os=J.HTML_INTEGRATION_POINTS||Os,M=J.CUSTOM_ELEMENT_HANDLING||{},J.CUSTOM_ELEMENT_HANDLING&&ar(J.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(M.tagNameCheck=J.CUSTOM_ELEMENT_HANDLING.tagNameCheck),J.CUSTOM_ELEMENT_HANDLING&&ar(J.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(M.attributeNameCheck=J.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),J.CUSTOM_ELEMENT_HANDLING&&typeof J.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(M.allowCustomizedBuiltInElements=J.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Fe&&(be=!1),ws&&(us=!0),Oe&&(F=gt({},C1),B=[],Oe.html===!0&&(gt(F,k1),gt(B,S1)),Oe.svg===!0&&(gt(F,rp),gt(B,op),gt(B,Eu)),Oe.svgFilters===!0&&(gt(F,ap),gt(B,op),gt(B,Eu)),Oe.mathMl===!0&&(gt(F,ip),gt(B,E1),gt(B,Eu))),J.ADD_TAGS&&(typeof J.ADD_TAGS=="function"?he.tagCheck=J.ADD_TAGS:(F===te&&(F=ra(F)),gt(F,J.ADD_TAGS,We))),J.ADD_ATTR&&(typeof J.ADD_ATTR=="function"?he.attributeCheck=J.ADD_ATTR:(B===U&&(B=ra(B)),gt(B,J.ADD_ATTR,We))),J.ADD_URI_SAFE_ATTR&&gt(D,J.ADD_URI_SAFE_ATTR,We),J.FORBID_CONTENTS&&(st===St&&(st=ra(st)),gt(st,J.FORBID_CONTENTS,We)),J.ADD_FORBID_CONTENTS&&(st===St&&(st=ra(st)),gt(st,J.ADD_FORBID_CONTENTS,We)),wt&&(F["#text"]=!0),lt&&gt(F,["html","head","body"]),F.table&&(gt(F,["tbody"]),delete q.tbody),J.TRUSTED_TYPES_POLICY){if(typeof J.TRUSTED_TYPES_POLICY.createHTML!="function")throw Sc('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof J.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Sc('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');R=J.TRUSTED_TYPES_POLICY,H=R.createHTML("")}else R===void 0&&(R=nD(N,o)),R!==null&&typeof H=="string"&&(H=R.createHTML(""));Cn&&Cn(J),Pt=J}},Gr=gt({},[...rp,...ap,...W9]),ir=gt({},[...ip,...V9]),Mi=function(J){let we=S(J);(!we||!we.tagName)&&(we={namespaceURI:At,tagName:"template"});const ze=$u(J.tagName),Ut=$u(we.tagName);return Qs[J.namespaceURI]?J.namespaceURI===jt?we.namespaceURI===nt?ze==="svg":we.namespaceURI===Ke?ze==="svg"&&(Ut==="annotation-xml"||Ys[Ut]):!!Gr[ze]:J.namespaceURI===Ke?we.namespaceURI===nt?ze==="math":we.namespaceURI===jt?ze==="math"&&Os[Ut]:!!ir[ze]:J.namespaceURI===nt?we.namespaceURI===jt&&!Os[Ut]||we.namespaceURI===Ke&&!Ys[Ut]?!1:!ir[ze]&&(Bs[ze]||!Gr[ze]):!!(Hs==="application/xhtml+xml"&&Qs[J.namespaceURI]):!1},js=function(J){kc(t.removed,{element:J});try{S(J).removeChild(J)}catch{k(J)}},Ks=function(J,we){try{kc(t.removed,{attribute:we.getAttributeNode(J),from:we})}catch{kc(t.removed,{attribute:null,from:we})}if(we.removeAttribute(J),J==="is")if(us||ws)try{js(we)}catch{}else try{we.setAttribute(J,"")}catch{}},ss=function(J){let we=null,ze=null;if(Xt)J="<remove></remove>"+J;else{const Jt=np(J,/^[\r\n\t ]+/);ze=Jt&&Jt[0]}Hs==="application/xhtml+xml"&&At===nt&&(J='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+J+"</body></html>");const Ut=R?R.createHTML(J):J;if(At===nt)try{we=new y().parseFromString(Ut,Hs)}catch{}if(!we||!we.documentElement){we=re.createDocument(At,"template",null);try{we.documentElement.innerHTML=Us?H:Ut}catch{}}const ut=we.body||we.documentElement;return J&&ze&&ut.insertBefore(n.createTextNode(ze),ut.childNodes[0]||null),At===nt?me.call(we,lt?"html":"body")[0]:lt?we.documentElement:ut},Qr=function(J){return K.call(J.ownerDocument||J,J,f.SHOW_ELEMENT|f.SHOW_COMMENT|f.SHOW_TEXT|f.SHOW_PROCESSING_INSTRUCTION|f.SHOW_CDATA_SECTION,null)},pa=function(J){return J instanceof v&&(typeof J.nodeName!="string"||typeof J.textContent!="string"||typeof J.removeChild!="function"||!(J.attributes instanceof b)||typeof J.removeAttribute!="function"||typeof J.setAttribute!="function"||typeof J.namespaceURI!="string"||typeof J.insertBefore!="function"||typeof J.hasChildNodes!="function")},Ha=function(J){return typeof u=="function"&&J instanceof u};function mn(Ve,J,we){Su(Ve,ze=>{ze.call(t,J,we,Pt)})}const Tn=function(J){let we=null;if(mn(L.beforeSanitizeElements,J,null),pa(J))return js(J),!0;const ze=We(J.nodeName);if(mn(L.uponSanitizeElement,J,{tagName:ze,allowedTags:F}),Je&&J.hasChildNodes()&&!Ha(J.firstElementChild)&&vn(/<[/\w!]/g,J.innerHTML)&&vn(/<[/\w!]/g,J.textContent)||J.nodeType===Tc.progressingInstruction||Je&&J.nodeType===Tc.comment&&vn(/<[/\w]/g,J.data))return js(J),!0;if(!(he.tagCheck instanceof Function&&he.tagCheck(ze))&&(!F[ze]||q[ze])){if(!q[ze]&&xa(ze)&&(M.tagNameCheck instanceof RegExp&&vn(M.tagNameCheck,ze)||M.tagNameCheck instanceof Function&&M.tagNameCheck(ze)))return!1;if(wt&&!st[ze]){const Ut=S(J)||J.parentNode,ut=E(J)||J.childNodes;if(ut&&Ut){const Jt=ut.length;for(let gs=Jt-1;gs>=0;--gs){const Ls=g(ut[gs],!0);Ls.__removalCount=(J.__removalCount||0)+1,Ut.insertBefore(Ls,A(J))}}}return js(J),!0}return J instanceof h&&!Mi(J)||(ze==="noscript"||ze==="noembed"||ze==="noframes")&&vn(/<\/no(script|embed|frames)/i,J.innerHTML)?(js(J),!0):(Fe&&J.nodeType===Tc.text&&(we=J.textContent,Su([X,z,V],Ut=>{we=Cc(we,Ut," ")}),J.textContent!==we&&(kc(t.removed,{element:J.cloneNode()}),J.textContent=we)),mn(L.afterSanitizeElements,J,null),!1)},xs=function(J,we,ze){if(ms&&(we==="id"||we==="name")&&(ze in n||ze in Es))return!1;if(!(be&&!oe[we]&&vn(se,we))){if(!(Se&&vn(I,we))){if(!(he.attributeCheck instanceof Function&&he.attributeCheck(we,J))){if(!B[we]||oe[we]){if(!(xa(J)&&(M.tagNameCheck instanceof RegExp&&vn(M.tagNameCheck,J)||M.tagNameCheck instanceof Function&&M.tagNameCheck(J))&&(M.attributeNameCheck instanceof RegExp&&vn(M.attributeNameCheck,we)||M.attributeNameCheck instanceof Function&&M.attributeNameCheck(we,J))||we==="is"&&M.allowCustomizedBuiltInElements&&(M.tagNameCheck instanceof RegExp&&vn(M.tagNameCheck,ze)||M.tagNameCheck instanceof Function&&M.tagNameCheck(ze))))return!1}else if(!D[we]){if(!vn(Q,Cc(ze,T,""))){if(!((we==="src"||we==="xlink:href"||we==="href")&&J!=="script"&&U9(ze,"data:")===0&&Zt[J])){if(!(Pe&&!vn(O,Cc(ze,T,"")))){if(ze)return!1}}}}}}}return!0},xa=function(J){return J!=="annotation-xml"&&np(J,Y)},Ka=function(J){mn(L.beforeSanitizeAttributes,J,null);const{attributes:we}=J;if(!we||pa(J))return;const ze={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:B,forceKeepAttr:void 0};let Ut=we.length;for(;Ut--;){const ut=we[Ut],{name:Jt,namespaceURI:gs,value:Ls}=ut,rn=We(Jt),or=Ls;let Ft=Jt==="value"?or:B9(or);if(ze.attrName=rn,ze.attrValue=Ft,ze.keepAttr=!0,ze.forceKeepAttr=void 0,mn(L.uponSanitizeAttribute,J,ze),Ft=ze.attrValue,Et&&(rn==="id"||rn==="name")&&(Ks(Jt,J),Ft=_t+Ft),Je&&vn(/((--!?|])>)|<\/(style|title|textarea)/i,Ft)){Ks(Jt,J);continue}if(rn==="attributename"&&np(Ft,"href")){Ks(Jt,J);continue}if(ze.forceKeepAttr)continue;if(!ze.keepAttr){Ks(Jt,J);continue}if(!Me&&vn(/\/>/i,Ft)){Ks(Jt,J);continue}Fe&&Su([X,z,V],Xs=>{Ft=Cc(Ft,Xs," ")});const Hn=We(J.nodeName);if(!xs(Hn,rn,Ft)){Ks(Jt,J);continue}if(R&&typeof N=="object"&&typeof N.getAttributeType=="function"&&!gs)switch(N.getAttributeType(Hn,rn)){case"TrustedHTML":{Ft=R.createHTML(Ft);break}case"TrustedScriptURL":{Ft=R.createScriptURL(Ft);break}}if(Ft!==or)try{gs?J.setAttributeNS(gs,Jt,Ft):J.setAttribute(Jt,Ft),pa(J)?js(J):N1(t.removed)}catch{Ks(Jt,J)}}mn(L.afterSanitizeAttributes,J,null)},Wa=function Ve(J){let we=null;const ze=Qr(J);for(mn(L.beforeSanitizeShadowDOM,J,null);we=ze.nextNode();)mn(L.uponSanitizeShadowNode,we,null),Tn(we),Ka(we),we.content instanceof l&&Ve(we.content);mn(L.afterSanitizeShadowDOM,J,null)};return t.sanitize=function(Ve){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},we=null,ze=null,Ut=null,ut=null;if(Us=!Ve,Us&&(Ve="<!-->"),typeof Ve!="string"&&!Ha(Ve))if(typeof Ve.toString=="function"){if(Ve=Ve.toString(),typeof Ve!="string")throw Sc("dirty is not a string, aborting")}else throw Sc("toString is not a function");if(!t.isSupported)return Ve;if(Bt||_s(J),t.removed=[],typeof Ve=="string"&&(de=!1),de){if(Ve.nodeName){const Ls=We(Ve.nodeName);if(!F[Ls]||q[Ls])throw Sc("root node is forbidden and cannot be sanitized in-place")}}else if(Ve instanceof u)we=ss("<!---->"),ze=we.ownerDocument.importNode(Ve,!0),ze.nodeType===Tc.element&&ze.nodeName==="BODY"||ze.nodeName==="HTML"?we=ze:we.appendChild(ze);else{if(!us&&!Fe&&!lt&&Ve.indexOf("<")===-1)return R&&os?R.createHTML(Ve):Ve;if(we=ss(Ve),!we)return us?null:os?H:""}we&&Xt&&js(we.firstChild);const Jt=Qr(de?Ve:we);for(;Ut=Jt.nextNode();)Tn(Ut),Ka(Ut),Ut.content instanceof l&&Wa(Ut.content);if(de)return Ve;if(us){if(ws)for(ut=ee.call(we.ownerDocument);we.firstChild;)ut.appendChild(we.firstChild);else ut=we;return(B.shadowroot||B.shadowrootmode)&&(ut=pe.call(a,ut,!0)),ut}let gs=lt?we.outerHTML:we.innerHTML;return lt&&F["!doctype"]&&we.ownerDocument&&we.ownerDocument.doctype&&we.ownerDocument.doctype.name&&vn(c5,we.ownerDocument.doctype.name)&&(gs="<!DOCTYPE "+we.ownerDocument.doctype.name+`>
`+gs),Fe&&Su([X,z,V],Ls=>{gs=Cc(gs,Ls," ")}),R&&os?R.createHTML(gs):gs},t.setConfig=function(){let Ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_s(Ve),Bt=!0},t.clearConfig=function(){Pt=null,Bt=!1},t.isValidAttribute=function(Ve,J,we){Pt||_s({});const ze=We(Ve),Ut=We(J);return xs(ze,Ut,we)},t.addHook=function(Ve,J){typeof J=="function"&&kc(L[Ve],J)},t.removeHook=function(Ve,J){if(J!==void 0){const we=F9(L[Ve],J);return we===-1?void 0:z9(L[Ve],we,1)[0]}return N1(L[Ve])},t.removeHooks=function(Ve){L[Ve]=[]},t.removeAllHooks=function(){L=A1()},t}var rD=d5();function aD({value:s,onChange:t,placeholder:n,className:a}){const o=p.useRef(null),l=p.useMemo(()=>({toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],["link"],["clean"]]}),[]),d=["header","bold","italic","underline","strike","color","background","blockquote","code-block","list","indent","link"];return e.jsx("div",{className:`quill-wrapper ${a||""}`,"data-testid":"quill-editor",children:e.jsx(i5,{ref:o,theme:"snow",value:s,onChange:t,modules:l,formats:d,placeholder:n||"Start typing..."})})}function u5(s){return s?new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):""}function iD({question:s,onClose:t}){const{toast:n}=pt(),[a,o]=p.useState(s.answer||""),[l,d]=p.useState(s.isPublic??!0),u=Te({mutationFn:f=>ke("PATCH",`/api/qa/questions/${s.id}`,f),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/qa/questions"]}),n({title:"Answer saved"}),t()},onError:()=>n({title:"Failed to save answer",variant:"destructive"})});function h(){const f=a.trim()?"answered":"unanswered";u.mutate({answer:a.trim(),status:f,isPublic:l})}return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx($,{variant:"ghost",size:"icon",onClick:t,"data-testid":"button-back-questions",children:e.jsx(_a,{className:"w-4 h-4"})}),e.jsx("h2",{className:"text-lg font-semibold","data-testid":"text-answer-editor-title",children:"Answer Question"}),e.jsxs("div",{className:"ml-auto flex items-center gap-2 flex-wrap",children:[e.jsxs($,{variant:"outline",size:"sm",onClick:()=>d(!l),"data-testid":"button-toggle-visibility",children:[l?e.jsx(jo,{className:"w-4 h-4 mr-1.5"}):e.jsx(gm,{className:"w-4 h-4 mr-1.5"}),l?"Public":"Hidden"]}),e.jsxs($,{onClick:h,disabled:u.isPending,"data-testid":"button-save-answer",children:[u.isPending?e.jsx(Qe,{className:"w-4 h-4 animate-spin"}):e.jsx(Tx,{className:"w-4 h-4"}),e.jsx("span",{className:"ml-2",children:"Save"})]})]})]}),e.jsxs(ce,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-sm text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:s.authorName}),e.jsx("span",{children:""}),e.jsx("span",{children:s.authorEmail}),e.jsx("span",{children:""}),e.jsx(Gt,{className:"w-3 h-3"}),e.jsx("span",{children:u5(s.createdAt)})]}),e.jsx("p",{className:"text-foreground whitespace-pre-wrap","data-testid":"text-question-content",children:s.question})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Your Answer"}),e.jsx(aD,{value:a,onChange:o,placeholder:"Write your answer here... Use the toolbar to format text, add headings, code blocks, callouts (blockquotes), and more."})]})]})}function oD(){zn("Q&A");const{toast:s}=pt(),[t,n]=p.useState(""),[a,o]=p.useState("all"),[l,d]=p.useState(null),[u,h]=p.useState(null),{data:f,isLoading:b}=Le({queryKey:["/api/qa/questions"]}),v=Te({mutationFn:g=>ke("DELETE",`/api/qa/questions/${g}`),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/qa/questions"]}),s({title:"Question deleted"}),h(null)},onError:()=>s({title:"Failed to delete question",variant:"destructive"})});if(l)return e.jsx("div",{className:"p-4 sm:p-6 max-w-4xl mx-auto",children:e.jsx(iD,{question:l,onClose:()=>d(null)})});const y=(f||[]).filter(g=>{const k=!t||g.question.toLowerCase().includes(t.toLowerCase())||g.authorName.toLowerCase().includes(t.toLowerCase()),A=a==="all"||g.status===a;return k&&A}),N=(f||[]).filter(g=>g.status==="unanswered").length,C=(f||[]).filter(g=>g.status==="answered").length;return e.jsxs("div",{className:"p-4 sm:p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Mt,{className:"w-6 h-6 text-primary"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold","data-testid":"text-page-title",children:"Q&A"}),e.jsxs("p",{className:"text-sm text-muted-foreground","data-testid":"text-question-count",children:[N," unanswered, ",C," answered"]})]})]})}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[e.jsx(sn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(De,{value:t,onChange:g=>n(g.target.value),placeholder:"Search questions...",className:"pl-9","data-testid":"input-search-questions"})]}),e.jsxs(Dt,{value:a,onValueChange:o,children:[e.jsx(It,{className:"w-[160px]","data-testid":"select-filter-status",children:e.jsx($t,{})}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"all",children:"All Questions"}),e.jsx(Ie,{value:"unanswered",children:"Unanswered"}),e.jsx(Ie,{value:"answered",children:"Answered"})]})]})]}),b?e.jsx("div",{className:"space-y-3",children:[1,2,3].map(g=>e.jsxs(ce,{className:"p-4",children:[e.jsx(Ce,{className:"h-5 w-2/3 mb-2"}),e.jsx(Ce,{className:"h-4 w-full mb-1"}),e.jsx(Ce,{className:"h-4 w-1/3"})]},g))}):y.length===0?e.jsxs(ce,{className:"p-8 text-center",children:[e.jsx(Mt,{className:"w-10 h-10 mx-auto mb-3 text-muted-foreground/50"}),e.jsx("p",{className:"text-muted-foreground font-medium","data-testid":"text-empty-state",children:t||a!=="all"?"No questions match your filters":"No questions yet"}),e.jsx("p",{className:"text-sm text-muted-foreground/70 mt-1",children:"Questions submitted by visitors will appear here for you to answer."})]}):e.jsx("div",{className:"space-y-3",children:y.map(g=>e.jsx(ce,{className:"p-4 hover-elevate cursor-pointer",onClick:()=>d(g),"data-testid":`card-question-${g.id}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-1",children:[e.jsx(je,{variant:g.status==="answered"?"default":"secondary",className:"text-xs no-default-active-elevate","data-testid":`badge-status-${g.id}`,children:g.status==="answered"?e.jsxs(e.Fragment,{children:[e.jsx(Ss,{className:"w-3 h-3 mr-1"})," Answered"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ci,{className:"w-3 h-3 mr-1"})," Unanswered"]})}),!g.isPublic&&e.jsxs(je,{variant:"outline",className:"text-xs no-default-active-elevate",children:[e.jsx(gm,{className:"w-3 h-3 mr-1"})," Hidden"]})]}),e.jsx("p",{className:"text-foreground line-clamp-2 mb-1","data-testid":`text-question-${g.id}`,children:g.question}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-muted-foreground/70 flex-wrap",children:[e.jsx("span",{children:g.authorName}),e.jsx("span",{children:""}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Gt,{className:"w-3 h-3"}),u5(g.createdAt)]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",onClick:k=>k.stopPropagation(),children:[e.jsx($,{variant:"ghost",size:"icon",onClick:()=>d(g),"data-testid":`button-answer-${g.id}`,children:e.jsx(bs,{className:"w-4 h-4"})}),e.jsx($,{variant:"ghost",size:"icon",onClick:()=>h(g.id),"data-testid":`button-delete-${g.id}`,children:e.jsx(ps,{className:"w-4 h-4"})})]})]})},g.id))}),e.jsx(Ct,{open:!!u,onOpenChange:()=>h(null),children:e.jsxs(vt,{children:[e.jsxs(yt,{children:[e.jsx(bt,{children:"Delete Question"}),e.jsx(Vc,{children:"Are you sure you want to delete this question? This action cannot be undone."})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[e.jsx($,{variant:"outline",onClick:()=>h(null),"data-testid":"button-cancel-delete",children:"Cancel"}),e.jsxs($,{variant:"destructive",onClick:()=>u&&v.mutate(u),disabled:v.isPending,"data-testid":"button-confirm-delete",children:[v.isPending?e.jsx(Qe,{className:"w-4 h-4 animate-spin mr-2"}):null,"Delete"]})]})]})})]})}function P1(s){return s?new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):""}function lD({question:s}){const[t,n]=p.useState(!1),a=s.status==="answered"&&s.answer;return e.jsxs("div",{className:"border border-white/5 rounded-md bg-white/[0.02] overflow-hidden","data-testid":`qa-item-${s.id}`,children:[e.jsxs("button",{onClick:()=>n(!t),className:"w-full text-left p-4 sm:p-5 flex items-start gap-3","data-testid":`button-toggle-${s.id}`,children:[e.jsx("div",{className:"mt-0.5 flex-shrink-0",children:a?e.jsx(Ss,{className:"w-5 h-5 text-emerald-400"}):e.jsx(Ci,{className:"w-5 h-5 text-white/30"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-white font-medium text-sm sm:text-base leading-relaxed","data-testid":`text-question-${s.id}`,children:s.question}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-white/30 flex-wrap",children:[e.jsx("span",{children:s.authorName}),e.jsx("span",{children:""}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Gt,{className:"w-3 h-3"}),P1(s.createdAt)]}),a&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:""}),e.jsx("span",{className:"text-emerald-400/70",children:"Answered"})]})]})]}),e.jsx("div",{className:"flex-shrink-0 mt-1",children:t?e.jsx(wo,{className:"w-5 h-5 text-white/30"}):e.jsx(ua,{className:"w-5 h-5 text-white/30"})})]}),t&&e.jsx("div",{className:"border-t border-white/5 p-4 sm:p-5 bg-white/[0.01]",children:a?e.jsxs("div",{"data-testid":`text-answer-${s.id}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 text-xs text-white/30",children:[e.jsx(Ss,{className:"w-3.5 h-3.5 text-emerald-400"}),e.jsxs("span",{children:["Answered ",s.answeredAt?P1(s.answeredAt):""]})]}),e.jsx("div",{className:"rich-content rich-content-dark text-white/70 text-sm leading-relaxed",dangerouslySetInnerHTML:{__html:rD.sanitize(s.answer||"",{ALLOWED_TAGS:["h1","h2","h3","p","br","strong","em","u","s","a","ul","ol","li","blockquote","pre","code","span"],ALLOWED_ATTR:["href","target","rel","class","style"]})}})]}):e.jsx("p",{className:"text-white/40 text-sm italic","data-testid":`text-pending-${s.id}`,children:"This question hasn't been answered yet. Check back soon!"})})]})}function cD(){const{toast:s}=pt(),[t,n]=p.useState(!1),[a,o]=p.useState(""),[l,d]=p.useState("all"),[u,h]=p.useState(""),[f,b]=p.useState(""),[v,y]=p.useState(""),{data:N,isLoading:C}=Le({queryKey:["/api/public/qa/questions"]}),g=Te({mutationFn:async R=>(await ke("POST","/api/public/qa/questions",R)).json(),onSuccess:()=>{s({title:"Question submitted!",description:"We'll answer your question soon."}),n(!1),h(""),b(""),y(""),ve.invalidateQueries({queryKey:["/api/public/qa/questions"]})},onError:()=>{s({title:"Something went wrong",description:"Please try again.",variant:"destructive"})}});function k(){if(!u.trim()||!f.trim()||!v.trim()){s({title:"All fields are required",variant:"destructive"});return}g.mutate({authorName:u.trim(),authorEmail:f.trim(),question:v.trim()})}const A=(N||[]).filter(R=>{const H=!a||R.question.toLowerCase().includes(a.toLowerCase())||R.answer&&R.answer.toLowerCase().includes(a.toLowerCase()),re=l==="all"||l==="answered"&&R.status==="answered"||l==="unanswered"&&R.status==="unanswered";return H&&re}),E=(N||[]).filter(R=>R.status==="answered").length,S=(N||[]).length;return e.jsxs("div",{className:"min-h-screen bg-[#0a0a0f] text-white",style:{backgroundImage:"radial-gradient(circle, rgba(255,255,255,0.12) 1px, transparent 1px)",backgroundSize:"24px 24px"},children:[e.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 border-b border-white/5",style:{backdropFilter:"blur(20px)",backgroundColor:"rgba(10,10,15,0.8)"},children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 h-14 flex items-center justify-between gap-3",children:[e.jsx(Mn,{href:"/",children:e.jsxs("div",{className:"flex items-center gap-2.5 cursor-pointer",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-md bg-gradient-to-br from-blue-500 to-violet-600",children:e.jsx(Jn,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"text-base font-semibold tracking-tight","data-testid":"text-brand-name",children:"AI Powered Sites"})]})}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs($,{onClick:()=>n(!0),className:"bg-gradient-to-r from-blue-500 to-violet-600 border-0 text-white font-medium","data-testid":"button-ask-question",children:[e.jsx(bs,{className:"w-4 h-4 mr-1.5"}),"Ask a Question"]})})]})}),e.jsxs("div",{className:"pt-14",children:[e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 py-12 sm:py-16",children:[e.jsxs("div",{className:"text-center mb-10 sm:mb-14",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-white/5 border border-white/10 mb-4 sm:mb-6",children:[e.jsx(Mt,{className:"w-4 h-4 text-violet-400"}),e.jsx("span",{className:"text-sm text-white/70",children:"Community Q&A"})]}),e.jsxs("h1",{className:"text-2xl sm:text-3xl md:text-5xl font-bold tracking-tight mb-3 sm:mb-4","data-testid":"text-qa-title",children:["Questions &"," ",e.jsx("span",{className:"bg-gradient-to-r from-blue-400 to-violet-400 bg-clip-text text-transparent",children:"Answers"})]}),e.jsx("p",{className:"text-white/50 text-sm sm:text-lg max-w-2xl mx-auto",children:"Got a question? Browse existing answers or ask your own. We're here to help."}),S>0&&e.jsxs("p",{className:"text-white/30 text-sm mt-3","data-testid":"text-qa-stats",children:[S," question",S!==1?"s":"","  ",E," answered"]})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap mb-6",children:[e.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[e.jsx(sn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-white/30"}),e.jsx("input",{value:a,onChange:R=>o(R.target.value),placeholder:"Search questions...",className:"w-full pl-9 pr-4 py-2.5 rounded-md bg-white/5 border border-white/10 text-sm text-white placeholder:text-white/30 focus:outline-none focus:border-white/20","data-testid":"input-search-qa"})]}),e.jsx("div",{className:"flex items-center gap-1.5",children:["all","answered","unanswered"].map(R=>e.jsx("button",{onClick:()=>d(R),className:`px-3 py-2 rounded-md text-xs font-medium transition-colors ${l===R?"bg-white/10 text-white":"text-white/40 hover:text-white/60"}`,"data-testid":`button-filter-${R}`,children:R==="all"?"All":R==="answered"?"Answered":"Unanswered"},R))})]}),C?e.jsx("div",{className:"space-y-3",children:[1,2,3].map(R=>e.jsxs("div",{className:"border border-white/5 rounded-md p-5 bg-white/[0.02]",children:[e.jsx("div",{className:"h-5 w-3/4 bg-white/5 rounded animate-pulse mb-2"}),e.jsx("div",{className:"h-4 w-1/3 bg-white/5 rounded animate-pulse"})]},R))}):A.length===0?e.jsxs("div",{className:"text-center py-16 border border-white/5 rounded-md bg-white/[0.02]",children:[e.jsx(Mt,{className:"w-10 h-10 mx-auto mb-3 text-white/10"}),e.jsx("p",{className:"text-white/40 font-medium","data-testid":"text-empty-state",children:a||l!=="all"?"No questions match your search":"No questions yet"}),e.jsx("p",{className:"text-white/20 text-sm mt-1 mb-4",children:"Be the first to ask a question!"}),e.jsxs($,{onClick:()=>n(!0),className:"bg-gradient-to-r from-blue-500 to-violet-600 border-0 text-white","data-testid":"button-ask-first",children:[e.jsx(bs,{className:"w-4 h-4 mr-1.5"}),"Ask a Question"]})]}):e.jsx("div",{className:"space-y-3",children:A.map(R=>e.jsx(lD,{question:R},R.id))})]}),e.jsx("footer",{className:"border-t border-white/5 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsx(Mn,{href:"/",children:e.jsxs("span",{className:"text-sm text-white/30 hover:text-white/50 transition-colors cursor-pointer","data-testid":"link-back-home",children:[e.jsx(_a,{className:"w-3.5 h-3.5 inline mr-1.5"}),"Back to AI Powered Sites"]})}),e.jsxs("p",{className:"text-xs text-white/20",children:[" ",new Date().getFullYear()," AI Powered Sites"]})]})})]}),e.jsx(Ct,{open:t,onOpenChange:n,children:e.jsxs(vt,{className:"bg-[#12121a] border-white/10 text-white max-w-lg",children:[e.jsxs(yt,{children:[e.jsxs(bt,{className:"text-white flex items-center gap-2",children:[e.jsx(Mt,{className:"w-5 h-5 text-violet-400"}),"Ask a Question"]}),e.jsx(Vc,{className:"text-white/50",children:"Your question will be visible to everyone once submitted."})]}),e.jsxs("div",{className:"space-y-4 mt-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-white/60",children:"Your Name"}),e.jsx("input",{value:u,onChange:R=>h(R.target.value),placeholder:"John Doe",className:"w-full px-3 py-2.5 rounded-md bg-white/5 border border-white/10 text-sm text-white placeholder:text-white/30 focus:outline-none focus:border-white/20","data-testid":"input-qa-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-white/60",children:"Email"}),e.jsx("input",{value:f,onChange:R=>b(R.target.value),placeholder:"john@example.com",type:"email",className:"w-full px-3 py-2.5 rounded-md bg-white/5 border border-white/10 text-sm text-white placeholder:text-white/30 focus:outline-none focus:border-white/20","data-testid":"input-qa-email"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-white/60",children:"Your Question"}),e.jsx("textarea",{value:v,onChange:R=>y(R.target.value),placeholder:"What would you like to know?",rows:4,className:"w-full px-3 py-2.5 rounded-md bg-white/5 border border-white/10 text-sm text-white placeholder:text-white/30 focus:outline-none focus:border-white/20 resize-none","data-testid":"input-qa-question"})]}),e.jsxs($,{onClick:k,disabled:g.isPending,className:"w-full bg-gradient-to-r from-blue-500 to-violet-600 border-0 text-white font-medium","data-testid":"button-submit-question",children:[g.isPending?e.jsx(Qe,{className:"w-4 h-4 animate-spin mr-2"}):e.jsx(bs,{className:"w-4 h-4 mr-2"}),"Submit Question"]})]})]})})]})}const R1={milestone:{icon:D3,label:"Milestone",color:"text-amber-500"},update:{icon:jl,label:"Update",color:"text-blue-500"},launch:{icon:Jn,label:"Launch",color:"text-green-500"},deliverable:{icon:Vt,label:"Deliverable",color:"text-purple-500"}},I1={completed:{icon:Ss,label:"Completed",color:"text-green-500"},in_progress:{icon:Gt,label:"In Progress",color:"text-amber-500"},upcoming:{icon:$w,label:"Upcoming",color:"text-muted-foreground"}};function dD(){return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-12",children:[e.jsx(Ce,{className:"h-10 w-64 mb-2"}),e.jsx(Ce,{className:"h-5 w-48 mb-8"}),e.jsx("div",{className:"space-y-4",children:Array.from({length:4}).map((s,t)=>e.jsx(Ce,{className:"h-24 w-full"},t))})]})})}function uD(){const s=mm(),{data:t,isLoading:n,error:a}=Le({queryKey:["/api/public/progress",s.projectId],queryFn:async()=>{const f=await fetch(`/api/public/progress/${s.projectId}`);if(!f.ok)throw new Error("Project not found");return f.json()},refetchInterval:3e4});if(n)return e.jsx(dD,{});if(a||!t)return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs(ce,{className:"p-8 text-center max-w-md",children:[e.jsx($w,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h1",{className:"text-xl font-semibold mb-2",children:"Project Not Found"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This progress link may be invalid or the project may have been removed."})]})});const{project:o,customerName:l,updates:d,completedWork:u}=t,h=o.status==="completed"?"Completed":o.status==="active"?"In Progress":o.status;return e.jsxs("div",{className:"min-h-screen bg-background","data-testid":"progress-page",children:[e.jsx("header",{className:"border-b sticky top-0 z-50 bg-background",children:e.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-3 flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("div",{className:"w-8 h-8 rounded-md bg-primary flex items-center justify-center shrink-0",children:e.jsx(jl,{className:"w-4 h-4 text-primary-foreground"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate","data-testid":"text-project-name",children:o.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Project Progress"})]})]}),e.jsx(IN,{})]})}),e.jsxs("main",{className:"max-w-3xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 flex-wrap mb-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight","data-testid":"text-progress-heading",children:o.name}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Prepared for ",l]})]}),e.jsx(je,{variant:"secondary","data-testid":"badge-project-status",children:h})]}),o.description&&e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:o.description})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 mb-8",children:[e.jsxs(ce,{className:"p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-semibold","data-testid":"text-update-count",children:d.length}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Updates"})]}),e.jsxs(ce,{className:"p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-semibold","data-testid":"text-deliverable-count",children:u}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Deliverables"})]}),e.jsxs(ce,{className:"p-4 text-center col-span-2 sm:col-span-1",children:[e.jsx("p",{className:"text-2xl font-semibold","data-testid":"text-started-date",children:o.createdAt?$s(o.createdAt):"N/A"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Started"})]})]}),o.previewUrl&&e.jsx(ce,{className:"p-4 mb-8",children:e.jsxs("a",{href:o.previewUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-between gap-3","data-testid":"link-preview-site",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx(tn,{className:"w-5 h-5 text-muted-foreground shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium",children:"View Live Preview"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:o.previewUrl})]})]}),e.jsx(kx,{className:"w-4 h-4 text-muted-foreground shrink-0"})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold tracking-tight",children:"Timeline"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Real-time updates on your project"})]}),d.length>0?e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-[19px] top-6 bottom-6 w-px bg-border"}),e.jsx("div",{className:"space-y-0",children:d.map((f,b)=>{const v=R1[f.type]||R1.update,y=I1[f.status]||I1.completed,N=y.icon;return e.jsxs("div",{className:"relative flex gap-4 pb-6","data-testid":`update-item-${f.id}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-full border-2 border-background bg-muted flex items-center justify-center shrink-0 z-10 ${y.color}`,children:e.jsx(N,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 pt-1.5",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 flex-wrap mb-1",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium","data-testid":`text-update-title-${f.id}`,children:f.title}),f.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1 leading-relaxed",children:f.description})]}),e.jsx(je,{variant:"outline",className:"text-xs shrink-0",children:v.label})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:f.createdAt?$s(f.createdAt):""})]})]},f.id)})})]}):e.jsxs(ce,{className:"p-8 text-center",children:[e.jsx(Gt,{className:"w-10 h-10 text-muted-foreground mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No updates yet. Check back soon for progress on your project."})]}),e.jsx("div",{className:"mt-12 pt-6 border-t text-center",children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"This page refreshes automatically every 30 seconds."})})]})]})}const O1=[{name:"Simple Landing Page",description:"Single page website with contact form",icon:Uc,lines:[{rateCode:"page_design",suggestedQty:1,note:"1 page layout"},{rateCode:"image_asset",suggestedQty:3,note:"Hero + 2 section images"},{rateCode:"revision",suggestedQty:2,note:"2 rounds of changes"}]},{name:"Business Website",description:"Multi-page site (Home, About, Services, Contact)",icon:g3,lines:[{rateCode:"page_design",suggestedQty:5,note:"Home, About, Services, Contact, FAQ"},{rateCode:"image_asset",suggestedQty:10,note:"Hero images + section graphics"},{rateCode:"revision",suggestedQty:3,note:"3 rounds of changes"}]},{name:"E-Commerce Store",description:"Online store with product pages and checkout",icon:H3,lines:[{rateCode:"page_design",suggestedQty:8,note:"Home, Shop, Product, Cart, Checkout, About, Contact, FAQ"},{rateCode:"image_asset",suggestedQty:15,note:"Product photos + banners"},{rateCode:"revision",suggestedQty:4,note:"4 rounds of changes"}]},{name:"Portfolio / Creative",description:"Showcase work with gallery and case studies",icon:Ex,lines:[{rateCode:"page_design",suggestedQty:4,note:"Home, Portfolio, About, Contact"},{rateCode:"image_asset",suggestedQty:8,note:"Gallery images + hero"},{rateCode:"revision",suggestedQty:2,note:"2 rounds of changes"}]}];let _1=0;function mD(){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(Ce,{className:"h-8 w-48 mb-1"}),e.jsx(Ce,{className:"h-4 w-72"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:Array.from({length:4}).map((s,t)=>e.jsxs(ce,{className:"p-4",children:[e.jsx(Ce,{className:"h-6 w-32 mb-2"}),e.jsx(Ce,{className:"h-4 w-48"})]},t))}),e.jsxs(ce,{className:"p-6",children:[e.jsx(Ce,{className:"h-6 w-40 mb-4"}),Array.from({length:3}).map((s,t)=>e.jsx(Ce,{className:"h-12 w-full mb-3"},t))]})]})}function hD(){zn("Quote Builder");const{toast:s}=pt(),[t,n]=p.useState([]),[a,o]=p.useState([]),[l,d]=p.useState(""),[u,h]=p.useState(""),[f,b]=p.useState(""),[v,y]=p.useState(!1),[N,C]=p.useState(null),[g,k]=p.useState(null),[A,E]=p.useState(!1),{data:S,isLoading:R}=Le({queryKey:["/api/billing-rates"]}),H=Te({mutationFn:async()=>{const U=[...t.filter(q=>q.quantity>0).map(q=>{const oe=ee(q.rateId);return{description:oe?.name||"Unknown",quantity:q.quantity,unitPriceCents:oe?.rateCents||0}}),...a.filter(q=>q.name&&q.quantity>0&&q.price>0).map(q=>({description:q.name,quantity:q.quantity,unitPriceCents:q.price}))];return(await ke("POST","/api/quotes",{customerName:l,customerEmail:u,lineItems:U,notes:f||null})).json()},onSuccess:U=>{C(U.id),k(U.viewToken),ve.invalidateQueries({queryKey:["/api/quotes"]}),s({title:"Quote saved",description:`${U.quoteNumber} is ready to send.`})},onError:()=>{s({title:"Failed to save quote",variant:"destructive"})}}),re=Te({mutationFn:async()=>(await ke("POST",`/api/quotes/${N}/send`,{})).json(),onSuccess:()=>{E(!0),ve.invalidateQueries({queryKey:["/api/quotes"]}),s({title:"Quote sent",description:`Email sent to ${u}`})},onError:()=>{s({title:"Failed to send quote",description:"Check your email configuration.",variant:"destructive"})}}),K=p.useMemo(()=>S?.filter(U=>U.isActive)||[],[S]),ee=U=>K.find(M=>M.id===U),me=U=>K.find(M=>M.code===U),pe=(U,M)=>{M<=0?n(q=>q.filter(oe=>oe.rateId!==U)):n(q=>q.find(he=>he.rateId===U)?q.map(he=>he.rateId===U?{...he,quantity:M}:he):[...q,{rateId:U,quantity:M}])},L=U=>t.find(M=>M.rateId===U)?.quantity||0,X=U=>{const M=ee(U),q=L(U);return M?M.rateCents*q:0},z=()=>{_1++,o(U=>[...U,{id:`custom-${_1}`,name:"",price:0,quantity:1}])},V=(U,M,q)=>{o(oe=>oe.map(he=>he.id===U?{...he,[M]:q}:he))},se=U=>{o(M=>M.filter(q=>q.id!==U))},I=p.useMemo(()=>a.reduce((U,M)=>U+M.price*M.quantity,0),[a]),T=p.useMemo(()=>t.reduce((U,M)=>{const q=ee(M.rateId);return U+(q?q.rateCents*M.quantity:0)},0),[t,K])+I,Y=t.length>0||a.some(U=>U.name&&U.quantity>0),Q=U=>{const M=[];U.lines.forEach(q=>{const oe=me(q.rateCode);oe&&M.push({rateId:oe.id,quantity:q.suggestedQty})}),n(M),s({title:`"${U.name}" template applied`,description:"Adjust quantities as needed."})},F=()=>{n([]),o([]),d(""),h(""),b(""),C(null),k(null),E(!1)},te=()=>{const U=l?`Quote for: ${l}
`:`Quote Estimate
`,M=t.filter(be=>be.quantity>0).map(be=>{const Pe=ee(be.rateId);return Pe?`${Pe.name}: ${be.quantity} ${Pe.unitLabel}${be.quantity>1?"s":""} x ${qe(Pe.rateCents)} = ${qe(Pe.rateCents*be.quantity)}`:""}).filter(Boolean),q=a.filter(be=>be.name&&be.quantity>0).map(be=>`${be.name}: ${be.quantity} x ${qe(be.price)} = ${qe(be.price*be.quantity)}`),oe=[...M,...q].join(`
`),he=`
Total: ${qe(T)}`,Se=U+`---
`+oe+`
---`+he;navigator.clipboard.writeText(Se),y(!0),setTimeout(()=>y(!1),2e3),s({title:"Quote copied to clipboard"})};if(R)return e.jsx(mD,{});if(K.length===0)return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight","data-testid":"text-page-title",children:"Quote Builder"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Set up your billing rates first to start building quotes."})]}),e.jsxs(ce,{className:"p-8 text-center",children:[e.jsx(Ru,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"You need billing rates before you can build quotes."}),e.jsx("a",{href:"/admin/billing-rates",children:e.jsx($,{"data-testid":"button-go-to-rates",children:"Set Up Billing Rates"})})]})]});const B=O1.some(U=>U.lines.some(M=>me(M.rateCode)));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight","data-testid":"text-page-title",children:"Quote Builder"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Quickly estimate project costs using your billing rates"})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs($,{variant:"outline",onClick:F,"data-testid":"button-reset-quote",children:[e.jsx(vm,{className:"w-4 h-4 mr-1.5"}),"Reset"]}),Y&&e.jsxs($,{onClick:te,"data-testid":"button-copy-quote",children:[v?e.jsx(Kt,{className:"w-4 h-4 mr-1.5"}):e.jsx(Ps,{className:"w-4 h-4 mr-1.5"}),v?"Copied":"Copy Quote"]})]})]}),B&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Si,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Quick Start Templates"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:O1.map(U=>{if(U.lines.filter(oe=>me(oe.rateCode)).length===0)return null;const q=U.lines.reduce((oe,he)=>{const Se=me(he.rateCode);return oe+(Se?Se.rateCents*he.suggestedQty:0)},0);return e.jsx(ce,{className:"p-4 cursor-pointer hover-elevate",onClick:()=>Q(U),"data-testid":`template-${U.name.toLowerCase().replace(/\s+/g,"-")}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-9 h-9 rounded-md bg-primary/10 shrink-0",children:e.jsx(U.icon,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-semibold leading-tight",children:U.name}),e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5 line-clamp-1",children:U.description}),e.jsxs("p",{className:"text-sm font-semibold text-primary mt-2","data-testid":`text-template-estimate-${U.name.toLowerCase().replace(/\s+/g,"-")}`,children:["~",qe(q)]})]})]})},U.name)})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs(ce,{className:"p-5 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(tj,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-semibold",children:"Customer Details"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(_e,{htmlFor:"customer-name",className:"text-xs text-muted-foreground mb-1.5 block",children:"Customer Name *"}),e.jsx(De,{id:"customer-name",value:l,onChange:U=>d(U.target.value),placeholder:"e.g. John's Bakery","data-testid":"input-customer-name",disabled:!!N})]}),e.jsxs("div",{children:[e.jsx(_e,{htmlFor:"customer-email",className:"text-xs text-muted-foreground mb-1.5 block",children:"Customer Email *"}),e.jsx(De,{id:"customer-email",type:"email",value:u,onChange:U=>h(U.target.value),placeholder:"e.g. john@bakery.com","data-testid":"input-customer-email",disabled:!!N})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx(_e,{htmlFor:"quote-notes",className:"text-xs text-muted-foreground mb-1.5 block",children:"Notes (optional)"}),e.jsx(Rs,{id:"quote-notes",value:f,onChange:U=>b(U.target.value),placeholder:"Any additional details, timelines, or special terms...",rows:2,"data-testid":"textarea-quote-notes",disabled:!!N})]})]}),e.jsxs(ce,{className:"p-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Vt,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-semibold",children:"Line Items"})]}),e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider mb-3",children:"Your Services"}),e.jsx("div",{className:"space-y-3",children:K.map(U=>{const M=L(U.id),q=X(U.id);return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-md border transition-colors ${M>0?"bg-primary/5 border-primary/20":"bg-muted/30"}`,"data-testid":`quote-line-${U.id}`,children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("p",{className:"text-sm font-medium",children:U.name}),e.jsxs(je,{variant:"secondary",className:"text-[10px]",children:[qe(U.rateCents)," / ",U.unitLabel]})]}),U.description&&e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5 line-clamp-1",children:U.description})]}),e.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[e.jsx($,{size:"icon",variant:"outline",onClick:()=>pe(U.id,M-1),disabled:M===0,"data-testid":`button-decrease-${U.id}`,children:e.jsx(yy,{className:"w-3.5 h-3.5"})}),e.jsx(De,{type:"number",min:"0",value:M,onChange:oe=>pe(U.id,parseInt(oe.target.value)||0),className:"w-16 text-center","data-testid":`input-quantity-${U.id}`}),e.jsx($,{size:"icon",variant:"outline",onClick:()=>pe(U.id,M+1),"data-testid":`button-increase-${U.id}`,children:e.jsx(Qt,{className:"w-3.5 h-3.5"})})]}),e.jsx("div",{className:"w-24 text-right shrink-0",children:e.jsx("p",{className:`text-sm font-semibold ${M>0?"":"text-muted-foreground"}`,"data-testid":`text-line-total-${U.id}`,children:M>0?qe(q):"-"})})]},U.id)})}),e.jsx(Zu,{className:"my-5"}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-3",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Custom Items"}),e.jsxs($,{variant:"outline",size:"sm",onClick:z,"data-testid":"button-add-custom-item",children:[e.jsx(v3,{className:"w-3.5 h-3.5 mr-1.5"}),"Add Item"]})]}),a.length===0?e.jsx("p",{className:"text-xs text-muted-foreground text-center py-4",children:`Add one-off items that aren't in your standard rates (e.g. "Domain Registration", "Premium Plugin")`}):e.jsx("div",{className:"space-y-3",children:a.map(U=>e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-md border transition-colors ${U.name&&U.quantity>0?"bg-primary/5 border-primary/20":"bg-muted/30"}`,"data-testid":`custom-line-${U.id}`,children:[e.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-2 flex-wrap",children:[e.jsx(De,{placeholder:"Item name",value:U.name,onChange:M=>V(U.id,"name",M.target.value),className:"flex-1 min-w-[120px]","data-testid":`input-custom-name-${U.id}`}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"$"}),e.jsx(De,{type:"number",min:"0",step:"0.01",placeholder:"Price",value:U.price>0?(U.price/100).toFixed(2):"",onChange:M=>V(U.id,"price",Math.round(parseFloat(M.target.value||"0")*100)),className:"w-24","data-testid":`input-custom-price-${U.id}`})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[e.jsx($,{size:"icon",variant:"outline",onClick:()=>V(U.id,"quantity",Math.max(0,U.quantity-1)),disabled:U.quantity===0,"data-testid":`button-custom-decrease-${U.id}`,children:e.jsx(yy,{className:"w-3.5 h-3.5"})}),e.jsx(De,{type:"number",min:"0",value:U.quantity,onChange:M=>V(U.id,"quantity",parseInt(M.target.value)||0),className:"w-16 text-center","data-testid":`input-custom-quantity-${U.id}`}),e.jsx($,{size:"icon",variant:"outline",onClick:()=>V(U.id,"quantity",U.quantity+1),"data-testid":`button-custom-increase-${U.id}`,children:e.jsx(Qt,{className:"w-3.5 h-3.5"})})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsx("div",{className:"w-24 text-right",children:e.jsx("p",{className:`text-sm font-semibold ${U.price>0&&U.quantity>0?"":"text-muted-foreground"}`,"data-testid":`text-custom-total-${U.id}`,children:U.price>0&&U.quantity>0?qe(U.price*U.quantity):"-"})}),e.jsx($,{size:"icon",variant:"ghost",onClick:()=>se(U.id),"data-testid":`button-remove-custom-${U.id}`,children:e.jsx(ps,{className:"w-3.5 h-3.5"})})]})]},U.id))})]})]}),e.jsxs("div",{children:[e.jsxs(ce,{className:"p-5 sticky top-20 z-[999]",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Ru,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-semibold",children:"Quote Summary"})]}),l&&e.jsxs("p",{className:"text-xs text-muted-foreground mb-3",children:["For: ",e.jsx("span",{className:"font-medium text-foreground",children:l})]}),Y?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2 mb-4",children:[t.filter(U=>U.quantity>0).map(U=>{const M=ee(U.rateId);return M?e.jsxs("div",{className:"flex items-center justify-between gap-2 text-xs","data-testid":`summary-line-${U.rateId}`,children:[e.jsxs("span",{className:"text-muted-foreground truncate",children:[M.name," x ",U.quantity]}),e.jsx("span",{className:"font-medium shrink-0",children:qe(M.rateCents*U.quantity)})]},U.rateId):null}),a.filter(U=>U.name&&U.quantity>0&&U.price>0).map(U=>e.jsxs("div",{className:"flex items-center justify-between gap-2 text-xs","data-testid":`summary-custom-${U.id}`,children:[e.jsxs("span",{className:"text-muted-foreground truncate",children:[U.name," x ",U.quantity]}),e.jsx("span",{className:"font-medium shrink-0",children:qe(U.price*U.quantity)})]},U.id))]}),e.jsx(Zu,{className:"mb-3"}),e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{className:"text-sm font-semibold",children:"Total"}),e.jsx("span",{className:"text-lg font-bold text-primary","data-testid":"text-grand-total",children:qe(T)})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[N?A?e.jsxs("div",{className:"text-center space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-emerald-600",children:[e.jsx(Kt,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Quote Sent"})]}),e.jsxs($,{variant:"outline",size:"sm",className:"w-full",onClick:()=>window.open(`/quote/${g}`,"_blank"),"data-testid":"button-view-quote",children:[e.jsx(tn,{className:"w-4 h-4 mr-1.5"}),"Preview Quote Page"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs($,{className:"w-full",onClick:()=>re.mutate(),disabled:re.isPending,"data-testid":"button-send-quote",children:[re.isPending?e.jsx(Qe,{className:"w-4 h-4 mr-1.5 animate-spin"}):e.jsx(Fs,{className:"w-4 h-4 mr-1.5"}),re.isPending?"Sending...":"Send Quote to Customer"]}),e.jsxs($,{variant:"outline",className:"w-full",onClick:()=>{const U=`${window.location.origin}/quote/${g}`;navigator.clipboard.writeText(U),s({title:"Quote link copied"})},"data-testid":"button-copy-quote-link",children:[e.jsx(tn,{className:"w-4 h-4 mr-1.5"}),"Copy Quote Link"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs($,{className:"w-full",onClick:()=>H.mutate(),disabled:!l||!u||H.isPending,"data-testid":"button-save-quote",children:[H.isPending?e.jsx(Qe,{className:"w-4 h-4 mr-1.5 animate-spin"}):e.jsx(Tx,{className:"w-4 h-4 mr-1.5"}),H.isPending?"Saving...":"Save & Prepare Quote"]}),(!l||!u)&&e.jsx("p",{className:"text-[10px] text-muted-foreground text-center",children:"Enter customer name & email to save"})]}),e.jsxs($,{variant:"outline",className:"w-full",onClick:te,"data-testid":"button-copy-summary",children:[v?e.jsx(Kt,{className:"w-4 h-4 mr-1.5"}):e.jsx(Ps,{className:"w-4 h-4 mr-1.5"}),v?"Copied":"Copy as Text"]})]})]}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx(Ru,{className:"w-8 h-8 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Add items or pick a template to get started"})]})]}),e.jsxs(ce,{className:"p-5 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Si,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-semibold",children:"Estimation Tips"})]}),e.jsxs("div",{className:"space-y-3 text-xs text-muted-foreground",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground mb-0.5",children:"Pages"}),e.jsx("p",{children:"Count each unique layout. Home, About, Contact, Services = 4 pages. Blog listing + blog post = 2 more."})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground mb-0.5",children:"Images / Assets"}),e.jsx("p",{children:"Each hero banner, custom graphic, or edited photo counts as 1. Stock photos that need editing count too."})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground mb-0.5",children:"Revisions"}),e.jsx("p",{children:"Include 2-3 rounds for most clients. Larger or pickier projects may need 4-5."})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground mb-0.5",children:"E-Commerce"}),e.jsx("p",{children:"Product page, cart, checkout, account pages = ~4 extra pages minimum. Add more for complex catalogs."})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground mb-0.5",children:"Custom Items"}),e.jsx("p",{children:'Use "Add Item" for one-off costs like domain registration ($15), premium plugins ($50-200), or third-party subscriptions.'})]})]})]})]})]})]})}function fD(){return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-950 dark:to-slate-900 p-4 sm:p-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[e.jsx(Ce,{className:"h-10 w-48"}),e.jsxs(ce,{className:"p-8",children:[e.jsx(Ce,{className:"h-8 w-64 mb-4"}),e.jsx("div",{className:"space-y-3",children:Array.from({length:4}).map((s,t)=>e.jsx(Ce,{className:"h-12 w-full"},t))})]})]})})}function pD(s){const n={draft:{label:"Draft",variant:"secondary"},sent:{label:"Awaiting Response",variant:"outline"},approved:{label:"Approved",variant:"default"},declined:{label:"Declined",variant:"destructive"}}[s]||{label:s,variant:"secondary"};return e.jsx(je,{variant:n.variant,"data-testid":"badge-quote-status",children:n.label})}function xD(){const[,s]=MC("/quote/:token"),t=s?.token,{toast:n}=pt(),[a,o]=p.useState(""),[l,d]=p.useState(""),[u,h]=p.useState(!1),[f,b]=p.useState(""),{data:v,isLoading:y,error:N}=Le({queryKey:["/api/public/quotes",t],queryFn:()=>fetch(`/api/public/quotes/${t}`).then(S=>{if(!S.ok)throw new Error("Quote not found");return S.json()}),enabled:!!t}),C=Te({mutationFn:async({action:S,comment:R})=>(await ke("POST",`/api/public/quotes/${t}/respond`,{action:S,comment:R})).json(),onSuccess:(S,R)=>{ve.invalidateQueries({queryKey:["/api/public/quotes",t]}),n({title:R.action==="approve"?"Quote Approved":"Quote Declined",description:R.action==="approve"?"Thank you! We'll get started on your project soon.":"We've noted your response. Feel free to leave any feedback below."}),h(!1),d("")},onError:()=>{n({title:"Something went wrong",description:"Please try again.",variant:"destructive"})}}),g=Te({mutationFn:async S=>(await ke("POST",`/api/public/quotes/${t}/comments`,{message:S})).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/public/quotes",t]}),o(""),n({title:"Comment sent",description:"We'll review your message and get back to you."})},onError:()=>{n({title:"Failed to send comment",variant:"destructive"})}}),k=Te({mutationFn:async S=>(await ke("POST",`/api/public/quotes/${t}/requirements`,{requirements:S})).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/public/quotes",t]}),b(""),n({title:"Requirements submitted",description:"We've received your project details and will be in touch soon."})},onError:()=>{n({title:"Failed to submit requirements",variant:"destructive"})}});if(y)return e.jsx(fD,{});if(N||!v)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-950 dark:to-slate-900 flex items-center justify-center p-4",children:e.jsxs(ce,{className:"p-8 text-center max-w-md",children:[e.jsx(Mc,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Quote Not Found"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This quote link may have expired or doesn't exist."})]})});const A=v.status==="sent",E=v.status==="approved"||v.status==="declined";return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-950 dark:to-slate-900",children:e.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8 sm:py-12",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-md bg-emerald-500/10",children:e.jsx(Vt,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold tracking-tight","data-testid":"text-quote-title",children:"Project Quote"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:v.quoteNumber})]})]}),e.jsxs(ce,{className:"mt-6 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-slate-900 to-slate-800 dark:from-slate-800 dark:to-slate-700 px-6 py-5",children:e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white text-sm font-semibold",children:"AI Powered Sites"}),e.jsx("p",{className:"text-slate-400 text-xs mt-0.5",children:"hello@aipoweredsites.com"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-emerald-400 text-lg font-extrabold tracking-tight","data-testid":"text-quote-number",children:v.quoteNumber}),pD(v.status)]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap mb-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wider font-medium",children:"Prepared For"}),e.jsx("p",{className:"text-sm font-semibold mt-1","data-testid":"text-customer-name",children:v.customerName}),e.jsx("p",{className:"text-xs text-muted-foreground",children:v.customerEmail})]}),v.createdAt&&e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wider font-medium",children:"Date"}),e.jsx("p",{className:"text-sm font-medium mt-1",children:new Date(v.createdAt).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]})]}),e.jsxs("div",{className:"rounded-md border overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-12 bg-muted/50 px-4 py-2.5 text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:[e.jsx("div",{className:"col-span-6",children:"Description"}),e.jsx("div",{className:"col-span-2 text-center",children:"Qty"}),e.jsx("div",{className:"col-span-2 text-right",children:"Rate"}),e.jsx("div",{className:"col-span-2 text-right",children:"Amount"})]}),v.lineItems.map((S,R)=>e.jsxs("div",{className:`grid grid-cols-12 px-4 py-3 text-sm items-center ${R%2===0?"":"bg-muted/20"}`,"data-testid":`quote-line-item-${R}`,children:[e.jsx("div",{className:"col-span-6 font-medium",children:S.description}),e.jsx("div",{className:"col-span-2 text-center text-muted-foreground",children:S.quantity}),e.jsx("div",{className:"col-span-2 text-right text-muted-foreground",children:qe(S.unitPriceCents)}),e.jsx("div",{className:"col-span-2 text-right font-semibold",children:qe(S.totalCents)})]},S.id))]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("div",{className:"bg-slate-900 dark:bg-slate-800 text-white rounded-md px-6 py-4 min-w-[200px]",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx("span",{className:"text-sm font-medium",children:"Total"}),e.jsx("span",{className:"text-xl font-extrabold tracking-tight","data-testid":"text-quote-total",children:qe(v.totalAmountCents)})]})})}),v.notes&&e.jsxs("div",{className:"mt-6 p-4 bg-muted/30 rounded-md",children:[e.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wider font-medium mb-1.5",children:"Notes"}),e.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:v.notes})]})]})]}),A&&!u&&e.jsxs(ce,{className:"mt-6 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Si,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-semibold",children:"Your Response"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-5",children:"Review the quote above and let us know how you'd like to proceed. You can also leave comments below."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs($,{className:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>C.mutate({action:"approve"}),disabled:C.isPending,"data-testid":"button-approve-quote",children:[e.jsx(Ss,{className:"w-4 h-4 mr-2"}),"Approve Quote"]}),e.jsxs($,{variant:"outline",className:"flex-1",onClick:()=>h(!0),disabled:C.isPending,"data-testid":"button-decline-quote",children:[e.jsx(ao,{className:"w-4 h-4 mr-2"}),"Request Changes"]})]})]}),A&&u&&e.jsxs(ce,{className:"mt-6 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Mt,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-semibold",children:"Let Us Know What to Change"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Tell us what you'd like adjusted - pricing, scope, timeline, or anything else."}),e.jsx(Rs,{value:l,onChange:S=>d(S.target.value),placeholder:"e.g. Can we work on pricing for the image assets? Also wondering if we could add an extra revision round...",className:"mb-4",rows:4,"data-testid":"textarea-decline-comment"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx($,{variant:"outline",onClick:()=>{h(!1),d("")},"data-testid":"button-cancel-decline",children:"Cancel"}),e.jsxs($,{variant:"destructive",onClick:()=>C.mutate({action:"deny",comment:l}),disabled:C.isPending,"data-testid":"button-submit-decline",children:[e.jsx(ao,{className:"w-4 h-4 mr-2"}),"Submit Feedback"]})]})]}),E&&e.jsx(ce,{className:"mt-6 p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[v.status==="approved"?e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-emerald-500/10",children:e.jsx(Ss,{className:"w-5 h-5 text-emerald-600"})}):e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-red-500/10",children:e.jsx(ao,{className:"w-5 h-5 text-red-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold",children:v.status==="approved"?"Quote Approved":"Changes Requested"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:v.status==="approved"?"Thank you! Please share your project requirements below so we can get started.":"We've received your feedback and will follow up shortly."})]})]})}),v.status==="approved"&&e.jsxs(ce,{className:"mt-6 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(y3,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-semibold",children:"Project Requirements"})]}),v.projectRequirements?e.jsxs("div",{children:[e.jsxs("div",{className:"p-4 bg-emerald-500/5 border border-emerald-500/20 rounded-md",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ss,{className:"w-3.5 h-3.5 text-emerald-600"}),e.jsx("span",{className:"text-xs font-medium text-emerald-600",children:"Requirements Submitted"})]}),e.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap","data-testid":"text-requirements",children:v.projectRequirements})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-3",children:"Need to add more details? Use the comments section below to share additional information."})]}):e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Help us understand your vision. Tell us about your project goals, brand preferences, content you'll provide, and any specific features or pages you need."}),e.jsx(Rs,{value:f,onChange:S=>b(S.target.value),placeholder:`Share your project details here...

- What is the purpose of your website?
- Who is your target audience?
- Do you have brand colors, logos, or style preferences?
- What pages or features do you need?
- Do you have content ready (text, images)?
- Any websites you like for inspiration?
- What's your ideal timeline?`,className:"mb-4",rows:8,"data-testid":"textarea-requirements"}),e.jsxs($,{className:"w-full",onClick:()=>f.trim()&&k.mutate(f.trim()),disabled:!f.trim()||k.isPending,"data-testid":"button-submit-requirements",children:[k.isPending?e.jsx(Qe,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(bs,{className:"w-4 h-4 mr-2"}),k.isPending?"Submitting...":"Submit Project Requirements"]})]})]}),e.jsxs(ce,{className:"mt-6 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Mt,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-semibold",children:"Comments & Discussion"})]}),v.comments.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No comments yet. Have a question about this quote? Start the conversation below."}),v.comments.length>0&&e.jsx("div",{className:"space-y-4 mb-6",children:v.comments.map(S=>e.jsxs("div",{className:`flex gap-3 ${S.senderType==="admin"?"":"flex-row-reverse"}`,"data-testid":`comment-${S.id}`,children:[e.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full shrink-0 text-xs font-bold ${S.senderType==="admin"?"bg-primary/10 text-primary":"bg-emerald-500/10 text-emerald-600"}`,children:S.senderName.charAt(0).toUpperCase()}),e.jsxs("div",{className:`max-w-[80%] ${S.senderType==="admin"?"":"text-right"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[e.jsx("span",{className:"text-xs font-semibold",children:S.senderName}),e.jsx("span",{className:"text-[10px] text-muted-foreground",children:S.createdAt&&new Date(S.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]}),e.jsx("div",{className:`rounded-md p-3 text-sm ${S.senderType==="admin"?"bg-muted/50":"bg-emerald-500/5 border border-emerald-500/20"}`,children:S.message})]})]},S.id))}),e.jsx(Zu,{className:"mb-4"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Rs,{value:a,onChange:S=>o(S.target.value),placeholder:"Ask a question or leave a comment...",className:"flex-1",rows:2,"data-testid":"textarea-comment"}),e.jsx($,{size:"icon",onClick:()=>a.trim()&&g.mutate(a.trim()),disabled:!a.trim()||g.isPending,"data-testid":"button-send-comment",children:e.jsx(bs,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"text-center mt-8 pb-8",children:e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:"AI Powered Sites"}),"  hello@aipoweredsites.com"]})})]})})}function gD(){const{token:s}=mm(),{toast:t}=pt(),[n,a]=p.useState(""),[o,l]=p.useState([]),[d,u]=p.useState(!1),[h,f]=p.useState(!1),[b,v]=p.useState(""),y=p.useRef(null),N=p.useRef(null),{data:C,isLoading:g}=Le({queryKey:["/api/public/conversations",s],queryFn:async()=>{const ee=await fetch(`/api/public/conversations/${s}`);if(!ee.ok)throw new Error("Failed to load conversation");return ee.json()},refetchInterval:1e4}),k=Te({mutationFn:async({message:ee,attachments:me})=>{const pe=await fetch(`/api/public/conversations/${s}/messages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:ee,attachments:me.length>0?JSON.stringify(me):null})});if(!pe.ok)throw new Error("Failed to send message");return pe.json()},onSuccess:()=>{a(""),l([]),ve.invalidateQueries({queryKey:["/api/public/conversations",s]})},onError:()=>{t({title:"Failed to send message",variant:"destructive"})}});p.useEffect(()=>{N.current?.scrollIntoView({behavior:"smooth"})},[C?.messages?.length]);const A=()=>{const ee=n.trim();!ee&&o.length===0||k.mutate({message:ee||(o.length>0?"Shared attachments":""),attachments:o})},E=ee=>{ee.key==="Enter"&&!ee.shiftKey&&(ee.preventDefault(),A())},S=async ee=>{const me=ee.target.files;if(!(!me||me.length===0)){u(!0);try{for(const pe of Array.from(me)){const L=pe.type.startsWith("image/"),X=await fetch("/api/uploads/request-url",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:pe.name,size:pe.size,contentType:pe.type})});if(!X.ok)throw new Error("Failed to get upload URL");const{uploadURL:z,objectPath:V}=await X.json();await fetch(z,{method:"PUT",headers:{"Content-Type":pe.type},body:pe});const se=`/objects${V}`;l(I=>[...I,{name:pe.name,url:se,type:L?"image":"file",contentType:pe.type}])}t({title:"Files uploaded",description:`${me.length} file${me.length>1?"s":""} ready to send`})}catch{t({title:"Upload failed",description:"Please try again.",variant:"destructive"})}finally{u(!1),y.current&&(y.current.value="")}}},R=()=>{const ee=b.trim();if(!ee)return;let me=ee;!me.startsWith("http://")&&!me.startsWith("https://")&&(me="https://"+me),l(pe=>[...pe,{name:me,url:me,type:"url"}]),v(""),f(!1)},H=ee=>{l(me=>me.filter((pe,L)=>L!==ee))};if(g)return e.jsx("div",{className:"min-h-screen bg-[#0a0a14] flex items-center justify-center",children:e.jsx(Qe,{className:"w-6 h-6 animate-spin text-violet-400"})});if(!C)return e.jsx("div",{className:"min-h-screen bg-[#0a0a14] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ao,{className:"w-10 h-10 text-red-400 mx-auto mb-3"}),e.jsx("h2",{className:"text-lg font-semibold text-white mb-1",children:"Conversation Not Found"}),e.jsx("p",{className:"text-white/50 text-sm mb-4",children:"This link may be invalid or expired."}),e.jsx(Mn,{href:"/",children:e.jsxs($,{variant:"outline",className:"border-white/10 text-white","data-testid":"button-back-home",children:[e.jsx(_a,{className:"w-4 h-4 mr-2"}),"Back to Home"]})})]})});const re=ee=>{const me=new Date(ee),L=new Date().getTime()-me.getTime(),X=Math.floor(L/6e4);if(X<1)return"Just now";if(X<60)return`${X}m ago`;const z=Math.floor(X/60);return z<24?`${z}h ago`:me.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})},K=ee=>{if(!ee)return null;try{const me=JSON.parse(ee);if(!Array.isArray(me)||me.length===0)return null;const pe=me.filter(z=>z.type==="image"),L=me.filter(z=>z.type==="file"),X=me.filter(z=>z.type==="url");return e.jsxs("div",{className:"mt-3 space-y-2",children:[pe.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:pe.map((z,V)=>e.jsx("a",{href:z.url,target:"_blank",rel:"noopener noreferrer",className:"block rounded-md overflow-hidden border border-white/10 hover:border-violet-500/40 transition-colors","data-testid":`link-image-attachment-${V}`,children:e.jsx("img",{src:z.url,alt:z.name,className:"max-w-[240px] max-h-[180px] object-cover",loading:"lazy"})},V))}),L.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:L.map((z,V)=>e.jsxs("a",{href:z.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1.5 px-2.5 py-1.5 rounded-md bg-white/5 border border-white/10 text-xs text-blue-400 hover:text-blue-300 transition-colors","data-testid":`link-file-attachment-${V}`,children:[e.jsx(Vt,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"max-w-[160px] truncate",children:z.name}),e.jsx(tn,{className:"w-3 h-3 shrink-0"})]},V))}),X.length>0&&e.jsx("div",{className:"flex flex-col gap-1.5",children:X.map((z,V)=>e.jsxs("a",{href:z.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1.5 text-xs text-blue-400 hover:text-blue-300 transition-colors break-all","data-testid":`link-url-attachment-${V}`,children:[e.jsx(fl,{className:"w-3.5 h-3.5 shrink-0"}),z.url]},V))})]})}catch{return null}};return e.jsxs("div",{className:"min-h-screen bg-[#0a0a14] text-white",style:{fontFamily:"Poppins, sans-serif"},children:[e.jsx("header",{className:"sticky top-0 z-50 border-b border-white/5 bg-[#0a0a14]/95 backdrop-blur-sm",children:e.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-3 flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx(Mn,{href:"/",children:e.jsx($,{variant:"ghost",size:"icon",className:"text-white/60 shrink-0","data-testid":"button-back",children:e.jsx(_a,{className:"w-4 h-4"})})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-sm font-semibold truncate","data-testid":"text-conversation-subject",children:C.subject}),e.jsx("p",{className:"text-xs text-white/40",children:"Secure conversation with AI Powered Sites"})]})]}),e.jsx(je,{variant:C.status==="active"?"default":"secondary",className:C.status==="active"?"bg-emerald-500/20 text-emerald-400 border-emerald-500/30":"","data-testid":"badge-conversation-status",children:C.status==="active"?"Active":"Closed"})]})}),e.jsx("main",{className:"max-w-3xl mx-auto px-4 py-6 pb-40",children:e.jsxs("div",{className:"flex flex-col gap-4","data-testid":"messages-list",children:[C.messages.map(ee=>{const me=ee.senderType==="visitor";return e.jsx("div",{className:`flex ${me?"justify-end":"justify-start"}`,"data-testid":`message-${ee.id}`,children:e.jsxs("div",{className:`max-w-[85%] sm:max-w-[75%] ${me?"order-1":""}`,children:[e.jsxs("div",{className:`rounded-md p-3 sm:p-4 ${me?"bg-violet-500/20 border border-violet-500/20":"bg-white/[0.04] border border-white/5"}`,children:[ee.message&&e.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap","data-testid":`text-message-content-${ee.id}`,children:ee.message}),K(ee.attachments)]}),e.jsxs("div",{className:`flex items-center gap-2 mt-1 ${me?"justify-end":"justify-start"}`,children:[e.jsx("span",{className:"text-[10px] text-white/30",children:ee.senderName}),e.jsx("span",{className:"text-[10px] text-white/20",children:re(ee.createdAt)})]})]})},ee.id)}),e.jsx("div",{ref:N})]})}),C.status==="active"&&e.jsx("div",{className:"fixed bottom-0 left-0 right-0 border-t border-white/5 bg-[#0a0a14]/95 backdrop-blur-sm",children:e.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-3",children:[o.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-2 pb-2 border-b border-white/5",children:o.map((ee,me)=>e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-md bg-white/5 border border-white/10 text-xs","data-testid":`pending-attachment-${me}`,children:[ee.type==="image"?e.jsx(No,{className:"w-3.5 h-3.5 text-emerald-400"}):ee.type==="url"?e.jsx(fl,{className:"w-3.5 h-3.5 text-blue-400"}):e.jsx(Vt,{className:"w-3.5 h-3.5 text-orange-400"}),e.jsx("span",{className:"max-w-[120px] truncate text-white/70",children:ee.name}),e.jsx("button",{onClick:()=>H(me),className:"text-white/30 hover:text-white/60 transition-colors","data-testid":`button-remove-attachment-${me}`,children:e.jsx(sr,{className:"w-3 h-3"})})]},me))}),h&&e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(De,{value:b,onChange:ee=>v(ee.target.value),onKeyDown:ee=>{ee.key==="Enter"&&(ee.preventDefault(),R())},placeholder:"Paste a URL (website, design inspiration, etc.)",className:"flex-1 bg-white/[0.04] border-white/10 text-white text-sm placeholder:text-white/30",autoFocus:!0,"data-testid":"input-url"}),e.jsxs($,{onClick:R,disabled:!b.trim(),size:"sm",className:"bg-blue-500/20 text-blue-400 border border-blue-500/30","data-testid":"button-add-url",children:[e.jsx(Qt,{className:"w-3.5 h-3.5 mr-1"}),"Add"]}),e.jsx($,{onClick:()=>{f(!1),v("")},size:"sm",variant:"ghost",className:"text-white/40","data-testid":"button-cancel-url",children:e.jsx(sr,{className:"w-3.5 h-3.5"})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex gap-1 shrink-0",children:[e.jsx("input",{ref:y,type:"file",multiple:!0,accept:"image/*,.pdf,.doc,.docx,.txt,.zip,.psd,.ai,.fig,.sketch,.xd",onChange:S,className:"hidden","data-testid":"input-file-upload"}),e.jsx($,{variant:"ghost",size:"icon",onClick:()=>y.current?.click(),disabled:d,className:"text-white/40 hover:text-white/70",title:"Attach files or images","data-testid":"button-attach-file",children:d?e.jsx(Qe,{className:"w-4 h-4 animate-spin"}):e.jsx(Vw,{className:"w-4 h-4"})}),e.jsx($,{variant:"ghost",size:"icon",onClick:()=>f(!h),className:"text-white/40 hover:text-white/70",title:"Add a URL","data-testid":"button-add-link",children:e.jsx(fl,{className:"w-4 h-4"})})]}),e.jsx(Rs,{value:n,onChange:ee=>a(ee.target.value),onKeyDown:E,placeholder:"Type your message...",className:"flex-1 min-h-[44px] max-h-32 bg-white/[0.04] border-white/10 text-white placeholder:text-white/30 resize-none text-sm","data-testid":"input-message"}),e.jsx($,{onClick:A,disabled:!n.trim()&&o.length===0||k.isPending,className:"bg-gradient-to-r from-blue-500 to-violet-600 border-0 text-white shrink-0","data-testid":"button-send-message",children:k.isPending?e.jsx(Qe,{className:"w-4 h-4 animate-spin"}):e.jsx(bs,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-[10px] text-white/20 mt-1.5 text-center",children:"Attach files, images, or URLs. Press Enter to send, Shift+Enter for new line."})]})})]})}function vD(){const{toast:s}=pt(),[t,n]=p.useState(""),[a,o]=p.useState(null),[l,d]=p.useState(""),[u,h]=p.useState(null),[f,b]=p.useState([]),[v,y]=p.useState(!1),[N,C]=p.useState(!1),[g,k]=p.useState(""),A=p.useRef(null),{data:E=[],isLoading:S}=Le({queryKey:["/api/conversations"]}),{data:R,isLoading:H}=Le({queryKey:["/api/conversations",a],enabled:!!a}),re=Te({mutationFn:async({id:I,message:O,attachments:T})=>ke("POST",`/api/conversations/${I}/messages`,{message:O,attachments:T.length>0?JSON.stringify(T):null}),onSuccess:()=>{d(""),b([]),ve.invalidateQueries({queryKey:["/api/conversations",a]}),ve.invalidateQueries({queryKey:["/api/conversations"]}),s({title:"Reply sent",description:"The visitor will receive an email notification."})},onError:()=>{s({title:"Failed to send reply",variant:"destructive"})}}),K=Te({mutationFn:async({id:I,status:O})=>ke("PATCH",`/api/conversations/${I}`,{status:O}),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/conversations"]}),ve.invalidateQueries({queryKey:["/api/conversations",a]})}}),ee=E.filter(I=>!t||I.visitorName.toLowerCase().includes(t.toLowerCase())||I.visitorEmail.toLowerCase().includes(t.toLowerCase())||I.subject.toLowerCase().includes(t.toLowerCase())),me=I=>{if(!I)return"";const O=new Date(I),Y=new Date().getTime()-O.getTime(),Q=Math.floor(Y/6e4);if(Q<1)return"Just now";if(Q<60)return`${Q}m ago`;const F=Math.floor(Q/60);if(F<24)return`${F}h ago`;const te=Math.floor(F/24);return te<7?`${te}d ago`:O.toLocaleDateString("en-US",{month:"short",day:"numeric"})},pe=()=>{const I=l.trim();!I&&f.length===0||!a||re.mutate({id:a,message:I||(f.length>0?"Shared attachments":""),attachments:f})},L=I=>{I.key==="Enter"&&!I.shiftKey&&(I.preventDefault(),pe())},X=async I=>{const O=I.target.files;if(!(!O||O.length===0)){y(!0);try{for(const T of Array.from(O)){const Y=T.type.startsWith("image/"),Q=await fetch("/api/uploads/request-url",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:T.name,size:T.size,contentType:T.type})});if(!Q.ok)throw new Error("Failed to get upload URL");const{uploadURL:F,objectPath:te}=await Q.json();await fetch(F,{method:"PUT",headers:{"Content-Type":T.type},body:T}),b(B=>[...B,{name:T.name,url:`/objects${te}`,type:Y?"image":"file",contentType:T.type}])}}catch{s({title:"Upload failed",variant:"destructive"})}finally{y(!1),A.current&&(A.current.value="")}}},z=()=>{const I=g.trim();if(!I)return;let O=I;!O.startsWith("http://")&&!O.startsWith("https://")&&(O="https://"+O),b(T=>[...T,{name:O,url:O,type:"url"}]),k(""),C(!1)},V=I=>{if(!I)return null;try{const O=JSON.parse(I);if(!Array.isArray(O)||O.length===0)return null;const T=O.filter(F=>F.type==="image"),Y=O.filter(F=>F.type==="file"),Q=O.filter(F=>F.type==="url");return e.jsxs("div",{className:"mt-2 space-y-1.5",children:[T.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:T.map((F,te)=>e.jsx("a",{href:F.url,target:"_blank",rel:"noopener noreferrer",className:"block rounded-md overflow-hidden border border-border hover:border-primary/40 transition-colors",children:e.jsx("img",{src:F.url,alt:F.name,className:"max-w-[200px] max-h-[140px] object-cover",loading:"lazy"})},te))}),Y.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1.5",children:Y.map((F,te)=>e.jsxs("a",{href:F.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-md bg-muted text-xs hover:underline",children:[e.jsx(Vt,{className:"w-3 h-3"}),e.jsx("span",{className:"max-w-[120px] truncate",children:F.name}),e.jsx(tn,{className:"w-3 h-3"})]},te))}),Q.length>0&&e.jsx("div",{className:"flex flex-col gap-1",children:Q.map((F,te)=>e.jsxs("a",{href:F.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs text-blue-500 hover:underline break-all",children:[e.jsx(fl,{className:"w-3 h-3 shrink-0"}),F.url]},te))})]})}catch{return null}},se=I=>{if(!I)return;const O=window.location.origin;navigator.clipboard.writeText(`${O}/conversation/${I}`),h(I),setTimeout(()=>h(null),2e3),s({title:"Link copied",description:"Conversation link copied to clipboard."})};return e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight","data-testid":"text-page-title",children:"Conversations"}),e.jsx("p",{className:"text-muted-foreground text-sm mt-1",children:"Manage client onboarding conversations"})]}),e.jsxs(je,{variant:"secondary","data-testid":"badge-conversation-count",children:[E.length," total"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(sn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(De,{placeholder:"Search by name, email, or subject...",value:t,onChange:I=>n(I.target.value),className:"pl-9","data-testid":"input-search-conversations"})]}),S?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx(Qe,{className:"w-6 h-6 animate-spin text-muted-foreground"})}):ee.length===0?e.jsxs(ce,{className:"p-8 text-center",children:[e.jsx(Mt,{className:"w-10 h-10 text-muted-foreground mx-auto mb-3"}),e.jsx("h3",{className:"font-medium mb-1","data-testid":"text-empty-state",children:"No conversations yet"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"When visitors start conversations from your landing page, they'll appear here."})]}):e.jsx("div",{className:"grid gap-3","data-testid":"conversations-list",children:ee.map(I=>{const O=I.lastMessage?.createdAt||I.updatedAt,T=I.lastMessage?.senderType==="visitor"&&I.status==="active";return e.jsx(ce,{className:`p-4 cursor-pointer transition-colors hover-elevate ${T?"border-violet-500/30":""}`,onClick:()=>o(I.id),"data-testid":`card-conversation-${I.id}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-1",children:[e.jsx("span",{className:"font-medium text-sm","data-testid":`text-visitor-name-${I.id}`,children:I.visitorName}),T&&e.jsx(je,{className:"bg-violet-500/20 text-violet-400 border-violet-500/30","data-testid":`badge-needs-reply-${I.id}`,children:"Needs Reply"}),e.jsx(je,{variant:I.status==="active"?"default":"secondary",className:I.status==="active"?"bg-emerald-500/20 text-emerald-400 border-emerald-500/30":"",children:I.status})]}),e.jsx("p",{className:"text-sm font-medium truncate","data-testid":`text-subject-${I.id}`,children:I.subject}),I.lastMessage&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1 truncate",children:[e.jsxs("span",{className:"font-medium",children:[I.lastMessage.senderName,":"]})," ",I.lastMessage.message]}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Fs,{className:"w-3 h-3"}),I.visitorEmail]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Mt,{className:"w-3 h-3"}),I.messageCount," messages"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Gt,{className:"w-3 h-3"}),me(O)]})]})]}),e.jsx($,{variant:"ghost",size:"icon",onClick:Y=>{Y.stopPropagation(),se(I.accessToken)},"data-testid":`button-copy-link-${I.id}`,children:u===I.accessToken?e.jsx(Kt,{className:"w-4 h-4 text-emerald-400"}):e.jsx(Ps,{className:"w-4 h-4"})})]})},I.id)})}),e.jsx(Ct,{open:!!a,onOpenChange:I=>{I||o(null)},children:e.jsxs(vt,{className:"max-w-2xl max-h-[85vh] flex flex-col",children:[e.jsx(yt,{children:e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx(bt,{className:"text-base truncate","data-testid":"text-dialog-subject",children:R?.subject||"Loading..."}),R&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5",children:[R.visitorName," (",R.visitorEmail,")"]})]}),R&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{variant:"ghost",size:"icon",onClick:()=>se(R.accessToken),"data-testid":"button-copy-conversation-link",children:u===R.accessToken?e.jsx(Kt,{className:"w-4 h-4 text-emerald-400"}):e.jsx(Ps,{className:"w-4 h-4"})}),R.status==="active"?e.jsxs($,{variant:"outline",size:"sm",onClick:()=>K.mutate({id:R.id,status:"closed"}),"data-testid":"button-close-conversation",children:[e.jsx(f3,{className:"w-3.5 h-3.5 mr-1.5"}),"Close"]}):e.jsxs($,{variant:"outline",size:"sm",onClick:()=>K.mutate({id:R.id,status:"active"}),"data-testid":"button-reopen-conversation",children:[e.jsx(vm,{className:"w-3.5 h-3.5 mr-1.5"}),"Reopen"]})]})]})}),e.jsx("div",{className:"flex-1 overflow-auto min-h-0 py-4 space-y-3","data-testid":"dialog-messages-list",children:H?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(Qe,{className:"w-5 h-5 animate-spin text-muted-foreground"})}):R?.messages?.map(I=>{const O=I.senderType==="admin";return e.jsx("div",{className:`flex ${O?"justify-end":"justify-start"}`,"data-testid":`dialog-message-${I.id}`,children:e.jsxs("div",{className:"max-w-[80%]",children:[e.jsxs(ce,{className:`p-3 ${O?"bg-primary/10 border-primary/20":""}`,children:[I.message&&e.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:I.message}),V(I.attachments)]}),e.jsxs("div",{className:`flex items-center gap-2 mt-1 ${O?"justify-end":"justify-start"}`,children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:I.senderName}),e.jsx("span",{className:"text-[10px] text-muted-foreground/50",children:me(I.createdAt)})]})]})},I.id)})}),R?.status==="active"&&e.jsxs("div",{className:"border-t pt-3 space-y-2",children:[f.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1.5",children:f.map((I,O)=>e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded-md bg-muted text-xs","data-testid":`admin-pending-attachment-${O}`,children:[I.type==="image"?e.jsx(No,{className:"w-3 h-3 text-emerald-500"}):I.type==="url"?e.jsx(fl,{className:"w-3 h-3 text-blue-500"}):e.jsx(Vt,{className:"w-3 h-3 text-orange-500"}),e.jsx("span",{className:"max-w-[100px] truncate",children:I.name}),e.jsx("button",{onClick:()=>b(T=>T.filter((Y,Q)=>Q!==O)),className:"text-muted-foreground hover:text-foreground","data-testid":`button-remove-admin-attachment-${O}`,children:e.jsx(sr,{className:"w-3 h-3"})})]},O))}),N&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(De,{value:g,onChange:I=>k(I.target.value),onKeyDown:I=>{I.key==="Enter"&&(I.preventDefault(),z())},placeholder:"Paste a URL...",className:"flex-1 text-sm",autoFocus:!0,"data-testid":"input-admin-url"}),e.jsxs($,{onClick:z,disabled:!g.trim(),size:"sm","data-testid":"button-admin-add-url",children:[e.jsx(Qt,{className:"w-3.5 h-3.5 mr-1"}),"Add"]}),e.jsx($,{onClick:()=>{C(!1),k("")},size:"sm",variant:"ghost","data-testid":"button-admin-cancel-url",children:e.jsx(sr,{className:"w-3.5 h-3.5"})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{ref:A,type:"file",multiple:!0,accept:"image/*,.pdf,.doc,.docx,.txt,.zip,.psd,.ai,.fig",onChange:X,className:"hidden","data-testid":"input-admin-file-upload"}),e.jsxs("div",{className:"flex gap-1 shrink-0",children:[e.jsx($,{variant:"ghost",size:"icon",onClick:()=>A.current?.click(),disabled:v,title:"Attach files","data-testid":"button-admin-attach-file",children:v?e.jsx(Qe,{className:"w-4 h-4 animate-spin"}):e.jsx(Vw,{className:"w-4 h-4"})}),e.jsx($,{variant:"ghost",size:"icon",onClick:()=>C(!N),title:"Add URL","data-testid":"button-admin-add-link",children:e.jsx(fl,{className:"w-4 h-4"})})]}),e.jsx(Rs,{value:l,onChange:I=>d(I.target.value),onKeyDown:L,placeholder:"Type your reply...",className:"flex-1 min-h-[44px] max-h-28 resize-none text-sm","data-testid":"input-admin-reply"}),e.jsx($,{onClick:pe,disabled:!l.trim()&&f.length===0||re.isPending,"data-testid":"button-send-admin-reply",children:re.isPending?e.jsx(Qe,{className:"w-4 h-4 animate-spin"}):e.jsx(bs,{className:"w-4 h-4"})})]})]})]})})]})}function yD(){zn("API Keys");const{toast:s}=pt(),[t,n]=p.useState(!1),[a,o]=p.useState(""),[l,d]=p.useState("read"),[u,h]=p.useState(""),[f,b]=p.useState(null),[v,y]=p.useState(null),{data:N,isLoading:C}=Le({queryKey:["/api/api-keys"]}),{data:g}=Le({queryKey:["/api/customers"]}),k=Te({mutationFn:async S=>(await ke("POST","/api/api-keys",S)).json(),onSuccess:S=>{ve.invalidateQueries({queryKey:["/api/api-keys"]}),y(S.key),n(!1),o(""),d("read"),h(""),s({title:"API key created",description:"Copy the key now - you won't be able to see it again."})}}),A=Te({mutationFn:async({id:S,isActive:R})=>{await ke("PATCH",`/api/api-keys/${S}`,{isActive:R})},onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/api-keys"]})}}),E=Te({mutationFn:async S=>{await ke("DELETE",`/api/api-keys/${S}`)},onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/api-keys"]}),s({title:"API key deleted"})}});return C?e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ce,{className:"h-8 w-32"}),e.jsx("div",{className:"grid gap-4",children:[1,2,3].map(S=>e.jsx(ce,{className:"p-5",children:e.jsx(Ce,{className:"h-20 w-full"})},S))})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2","data-testid":"text-page-title",children:[e.jsx(uo,{className:"w-6 h-6 text-primary"}),"API Keys"]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage API keys for programmatic access to your data"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx($,{variant:"outline",asChild:!0,"data-testid":"link-api-docs",children:e.jsxs("a",{href:"/api/docs",target:"_blank",rel:"noopener noreferrer",children:[e.jsx(tn,{className:"w-4 h-4 mr-1"}),"API Docs"]})}),e.jsxs($,{onClick:()=>n(!0),"data-testid":"button-create-key",children:[e.jsx(Qt,{className:"w-4 h-4 mr-1"}),"Create API Key"]})]})]}),v&&e.jsx(ce,{className:"p-4 border-yellow-500/50 bg-yellow-500/5",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(wn,{className:"w-5 h-5 text-yellow-500 mt-0.5 shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm",children:"New API Key Created"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Copy this key now. You won't be able to see the full key again."}),e.jsxs("div",{className:"flex items-center gap-2 bg-muted/50 rounded-md px-3 py-2",children:[e.jsx("code",{className:"text-xs font-mono break-all flex-1","data-testid":"text-new-key",children:v}),e.jsx($,{size:"sm",variant:"ghost",onClick:()=>{navigator.clipboard.writeText(v),s({title:"Copied!"})},"data-testid":"button-copy-new-key",children:e.jsx(Ps,{className:"w-4 h-4"})})]})]}),e.jsx($,{size:"sm",variant:"ghost",onClick:()=>y(null),className:"shrink-0",children:"Dismiss"})]})}),!N||N.length===0?e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(uo,{className:"w-12 h-12 text-muted-foreground/30 mx-auto mb-4"}),e.jsx("h3",{className:"font-semibold text-lg mb-1",children:"No API Keys"}),e.jsx("p",{className:"text-muted-foreground text-sm mb-4",children:"Create an API key to start integrating with your billing data programmatically."}),e.jsxs($,{onClick:()=>n(!0),"data-testid":"button-create-key-empty",children:[e.jsx(Qt,{className:"w-4 h-4 mr-1"})," Create Your First API Key"]})]}):e.jsx("div",{className:"space-y-3",children:N.map(S=>e.jsx(ce,{className:"p-4","data-testid":`card-api-key-${S.id}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold","data-testid":`text-key-name-${S.id}`,children:S.name}),e.jsx(je,{variant:S.isActive?"default":"secondary",className:"text-xs",children:S.isActive?"Active":"Disabled"}),e.jsx(je,{variant:"outline",className:"text-xs",children:S.scopes==="all"?"Full Access":S.scopes})]}),e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("code",{className:"text-xs font-mono text-muted-foreground","data-testid":`text-key-value-${S.id}`,children:S.key})}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Gt,{className:"w-3 h-3"}),"Created ",new Date(S.createdAt).toLocaleDateString()]}),S.lastUsedAt&&e.jsxs("span",{children:["Last used ",new Date(S.lastUsedAt).toLocaleDateString()]}),S.customerId&&g&&e.jsxs("span",{children:["Scoped to: ",g.find(R=>R.id===S.customerId)?.name||"Unknown"]}),S.expiresAt&&e.jsx("span",{className:new Date(S.expiresAt)<new Date?"text-red-500":"",children:new Date(S.expiresAt)<new Date?"Expired":`Expires ${new Date(S.expiresAt).toLocaleDateString()}`})]})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsx(Dc,{checked:S.isActive,onCheckedChange:R=>A.mutate({id:S.id,isActive:R}),"data-testid":`switch-toggle-key-${S.id}`}),e.jsx($,{size:"sm",variant:"ghost",className:"text-destructive hover:text-destructive",onClick:()=>E.mutate(S.id),"data-testid":`button-delete-key-${S.id}`,children:e.jsx(ps,{className:"w-4 h-4"})})]})]})},S.id))}),e.jsx(Ct,{open:t,onOpenChange:n,children:e.jsxs(vt,{children:[e.jsx(yt,{children:e.jsx(bt,{children:"Create API Key"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(_e,{children:"Name"}),e.jsx(De,{placeholder:"e.g., My Integration",value:a,onChange:S=>o(S.target.value),"data-testid":"input-key-name"})]}),e.jsxs("div",{children:[e.jsx(_e,{children:"Permissions"}),e.jsxs(Dt,{value:l,onValueChange:d,children:[e.jsx(It,{"data-testid":"select-key-scopes",children:e.jsx($t,{})}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"read",children:"Read Only"}),e.jsx(Ie,{value:"read,write",children:"Read & Write"}),e.jsx(Ie,{value:"all",children:"Full Access"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Read = view data, Write = create entries, Full = everything"})]}),e.jsxs("div",{children:[e.jsx(_e,{children:"Restrict to Customer (Optional)"}),e.jsxs(Dt,{value:u||"none",onValueChange:S=>h(S==="none"?"":S),children:[e.jsx(It,{"data-testid":"select-key-customer",children:e.jsx($t,{placeholder:"All customers"})}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"none",children:"All customers"}),g?.map(S=>e.jsx(Ie,{value:S.id,children:S.name},S.id))]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Limit this key to only access one customer's data"})]}),e.jsx($,{className:"w-full",disabled:!a||k.isPending,onClick:()=>k.mutate({name:a,scopes:l,customerId:u||void 0}),"data-testid":"button-submit-create-key",children:k.isPending?"Creating...":"Create API Key"})]})]})})]})}function dl({code:s,language:t="bash"}){const[n,a]=p.useState(!1);return e.jsxs("div",{className:"relative group",children:[e.jsx("pre",{className:"bg-[#0d1117] text-zinc-200 rounded-md p-5 text-[13px] font-mono overflow-x-auto border border-white/[0.06] leading-relaxed shadow-inner",children:e.jsx("code",{children:s})}),e.jsx($,{size:"sm",variant:"ghost",className:"absolute top-3 right-3 h-8 w-8 p-0 opacity-0 group-hover:opacity-100 transition-all text-zinc-400 hover:text-white hover:bg-white/10 rounded-md",onClick:()=>{navigator.clipboard.writeText(s),a(!0),setTimeout(()=>a(!1),2e3)},children:n?e.jsx(Kt,{className:"w-3.5 h-3.5 text-emerald-400"}):e.jsx(Ps,{className:"w-3.5 h-3.5"})})]})}function fi({method:s,path:t,description:n,scopes:a,example:o,response:l,children:d}){const[u,h]=p.useState(!1),f={GET:{bg:"bg-emerald-500/10",text:"text-emerald-400",glow:"shadow-emerald-500/5"},POST:{bg:"bg-blue-500/10",text:"text-blue-400",glow:"shadow-blue-500/5"},PATCH:{bg:"bg-amber-500/10",text:"text-amber-400",glow:"shadow-amber-500/5"},DELETE:{bg:"bg-red-500/10",text:"text-red-400",glow:"shadow-red-500/5"}},b=f[s]||f.GET;return e.jsxs("div",{className:`rounded-md border border-white/[0.06] bg-white/[0.01] overflow-hidden transition-all duration-200 hover:border-white/[0.1] ${u?"shadow-lg "+b.glow:""}`,"data-testid":`endpoint-${s.toLowerCase()}-${t.replace(/[/:]/g,"-")}`,children:[e.jsxs("button",{className:"w-full flex items-center gap-3 p-4 sm:p-5 text-left hover:bg-white/[0.02] transition-colors",onClick:()=>h(!u),children:[e.jsx("span",{className:`inline-flex items-center justify-center px-2.5 py-1 rounded-md ${b.bg} ${b.text} font-mono text-xs font-bold tracking-wider min-w-[52px]`,children:s}),e.jsx("code",{className:"text-sm font-mono font-medium flex-1 text-white/80",children:t}),e.jsx("span",{className:"hidden sm:inline-flex items-center px-2.5 py-1 rounded-full bg-white/[0.04] border border-white/[0.06] text-[11px] text-white/40 font-medium",children:a}),e.jsx("div",{className:`w-6 h-6 rounded-md flex items-center justify-center transition-colors ${u?"bg-white/[0.06]":""}`,children:u?e.jsx(ua,{className:"w-4 h-4 text-white/40"}):e.jsx(Sx,{className:"w-4 h-4 text-white/30"})})]}),u&&e.jsxs("div",{className:"border-t border-white/[0.06] px-5 pb-5 pt-4 space-y-4 bg-white/[0.01]",children:[e.jsx("p",{className:"text-sm text-white/50 leading-relaxed",children:n}),d,o&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2.5",children:[e.jsx("div",{className:"w-1 h-4 rounded-full bg-blue-500/50"}),e.jsx("p",{className:"text-xs font-semibold text-white/60 uppercase tracking-wider",children:"Example Request"})]}),e.jsx(dl,{code:o})]}),l&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2.5",children:[e.jsx("div",{className:"w-1 h-4 rounded-full bg-emerald-500/50"}),e.jsx("p",{className:"text-xs font-semibold text-white/60 uppercase tracking-wider",children:"Example Response"})]}),e.jsx(dl,{code:l,language:"json"})]})]})]})}function lp({number:s,title:t,description:n,children:a}){const o=["from-blue-500 to-cyan-500","from-violet-500 to-purple-500","from-emerald-500 to-teal-500"],l=o[(s-1)%o.length];return e.jsxs("div",{className:"flex gap-5",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full bg-gradient-to-br ${l} flex items-center justify-center text-sm font-bold text-white shrink-0 shadow-lg`,children:s}),e.jsx("div",{className:"w-px flex-1 bg-gradient-to-b from-white/10 to-transparent mt-3"})]}),e.jsxs("div",{className:"pb-10",children:[e.jsx("h3",{className:"font-semibold text-base text-white/90 mb-1.5",children:t}),e.jsx("p",{className:"text-sm text-white/45 mb-4 leading-relaxed",children:n}),a]})]})}function bD(){const[s,t]=p.useState("getting-started"),n=window.location.origin,a=[{id:"getting-started",label:"Getting Started",icon:Jn},{id:"authentication",label:"Authentication",icon:Np},{id:"customers",label:"Customers",icon:Ei},{id:"projects",label:"Projects",icon:$n},{id:"invoices",label:"Invoices",icon:Vt},{id:"work-entries",label:"Work Entries",icon:kl},{id:"errors",label:"Error Handling",icon:Mc}];return e.jsxs("div",{className:"min-h-screen bg-[#0a0a0f] text-white",style:{fontFamily:"Poppins, sans-serif"},children:[e.jsx("div",{className:"border-b border-white/[0.06] bg-[#0a0a0f]/80 sticky top-0 z-10",style:{backdropFilter:"blur(20px)"},children:e.jsx("div",{className:"max-w-6xl mx-auto px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-md bg-gradient-to-br from-blue-500/20 to-cyan-500/20 border border-white/[0.06] flex items-center justify-center",children:e.jsx(x3,{className:"w-5 h-5 text-blue-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-lg font-bold text-white/90","data-testid":"text-api-docs-title",children:"AI Powered Sites API"}),e.jsx("p",{className:"text-xs text-white/40",children:"Simple, powerful API for your integrations"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(je,{className:"bg-emerald-500/10 text-emerald-400 border-emerald-500/20 text-[11px] font-semibold",children:"v1"}),e.jsxs("div",{className:"hidden sm:flex items-center gap-2 px-3 py-1.5 rounded-full bg-emerald-500/[0.06] border border-emerald-500/15",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-400 animate-pulse"}),e.jsx("span",{className:"text-[11px] text-emerald-400/80 font-medium",children:"Live"})]})]})]})})}),e.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-10 flex gap-10",children:[e.jsxs("nav",{className:"w-52 shrink-0 hidden lg:block sticky top-24 self-start",children:[e.jsx("div",{className:"space-y-1",children:a.map(o=>e.jsxs("button",{onClick:()=>{t(o.id),document.getElementById(o.id)?.scrollIntoView({behavior:"smooth"})},className:`w-full flex items-center gap-2.5 px-3.5 py-2.5 rounded-md text-sm transition-all duration-200 text-left ${s===o.id?"bg-blue-500/10 text-blue-400 font-medium border border-blue-500/15":"text-white/40 hover:text-white/70 hover:bg-white/[0.03] border border-transparent"}`,"data-testid":`nav-${o.id}`,children:[e.jsx(o.icon,{className:"w-4 h-4"}),o.label]},o.id))}),e.jsxs("div",{className:"mt-6 p-4 rounded-md bg-white/[0.02] border border-white/[0.06]",children:[e.jsx("p",{className:"text-[11px] text-white/30 mb-2 font-medium uppercase tracking-wider",children:"Base URL"}),e.jsxs("code",{className:"text-[11px] text-cyan-400/70 font-mono break-all",children:[n,"/api/v1"]})]})]}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-16",children:[e.jsxs("section",{id:"getting-started",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:"w-9 h-9 rounded-md bg-gradient-to-br from-blue-500/20 to-cyan-500/20 border border-white/[0.06] flex items-center justify-center",children:e.jsx(Jn,{className:"w-5 h-5 text-blue-400"})}),e.jsx("h2",{className:"text-2xl font-bold text-white/90",children:"Getting Started"})]}),e.jsxs("div",{className:"relative p-6 sm:p-8 mb-8 rounded-md border border-blue-500/15 bg-gradient-to-br from-blue-500/[0.05] via-cyan-500/[0.02] to-transparent overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-blue-400/30 to-transparent"}),e.jsxs("div",{className:"flex items-start gap-5",children:[e.jsx("div",{className:"w-14 h-14 rounded-md bg-gradient-to-br from-blue-500/20 to-cyan-500/20 border border-white/[0.06] flex items-center justify-center shrink-0 shadow-lg shadow-blue-500/10",children:e.jsx(jn,{className:"w-7 h-7 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg text-white/90 mb-2",children:"Welcome to the API"}),e.jsx("p",{className:"text-sm text-white/45 leading-relaxed",children:"The AI Powered Sites API lets you read your customers, projects, and invoices, and log work entries  all with simple HTTP requests. No complex setup needed."})]})]})]}),e.jsxs("div",{className:"space-y-0",children:[e.jsx(lp,{number:1,title:"Get Your API Key",description:"Go to your admin dashboard and create an API key. You'll need it for all requests.",children:e.jsxs("div",{className:"flex items-center gap-2.5 p-4 rounded-md bg-white/[0.02] border border-white/[0.06] text-sm",children:[e.jsx(uo,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-white/50",children:"Dashboard"}),e.jsx(ml,{className:"w-3 h-3 text-white/20"}),e.jsx("span",{className:"text-white/50",children:"API Keys"}),e.jsx(ml,{className:"w-3 h-3 text-white/20"}),e.jsx("span",{className:"font-medium text-white/70",children:"Create API Key"})]})}),e.jsx(lp,{number:2,title:"Make Your First Request",description:"Try fetching your customers. Replace YOUR_API_KEY with your actual key.",children:e.jsx(dl,{code:`curl ${n}/api/v1/customers \\
  -H "Authorization: Bearer YOUR_API_KEY"`})}),e.jsx(lp,{number:3,title:"Check the Response",description:"You'll get back a JSON response with your data. All responses follow the same format.",children:e.jsx(dl,{code:`{
  "data": [
    {
      "id": "abc123",
      "name": "Acme Corp",
      "email": "contact@acme.com",
      "company": "Acme Corp",
      "createdAt": "2025-01-15T10:30:00Z"
    }
  ]
}`,language:"json"})})]}),e.jsxs("div",{className:"flex items-start gap-4 p-5 rounded-md border border-blue-500/15 bg-blue-500/[0.04]",children:[e.jsx(Bw,{className:"w-5 h-5 text-blue-400 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm text-white/80",children:"Base URL"}),e.jsxs("code",{className:"text-sm bg-white/[0.04] px-3 py-1.5 rounded-md mt-2 inline-block font-mono text-cyan-400/80 border border-white/[0.06]",children:[n,"/api/v1"]}),e.jsx("p",{className:"text-xs text-white/35 mt-2",children:"All endpoints start with this URL. Include your API key in every request."})]})]})]}),e.jsxs("section",{id:"authentication",className:"scroll-mt-20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:"w-9 h-9 rounded-md bg-gradient-to-br from-violet-500/20 to-purple-500/20 border border-white/[0.06] flex items-center justify-center",children:e.jsx(Np,{className:"w-5 h-5 text-violet-400"})}),e.jsx("h2",{className:"text-2xl font-bold text-white/90",children:"Authentication"})]}),e.jsxs("p",{className:"text-white/45 mb-5 text-sm leading-relaxed",children:["Every request needs your API key in the ",e.jsx("code",{className:"bg-white/[0.06] px-2 py-0.5 rounded-md text-xs font-mono text-cyan-400/70",children:"Authorization"})," header."]}),e.jsx(dl,{code:"Authorization: Bearer aips_your_api_key_here"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-8",children:[{icon:wn,title:"Read Only",desc:"View customers, projects, invoices. Can't make changes.",color:"from-emerald-500/15 to-teal-500/15",iconColor:"text-emerald-400",border:"border-emerald-500/10"},{icon:qw,title:"Read & Write",desc:"View data plus create work entries and log time.",color:"from-blue-500/15 to-cyan-500/15",iconColor:"text-blue-400",border:"border-blue-500/10"},{icon:uo,title:"Full Access",desc:"Complete access to all API features.",color:"from-violet-500/15 to-purple-500/15",iconColor:"text-violet-400",border:"border-violet-500/10"}].map(o=>e.jsxs("div",{className:`group p-5 rounded-md bg-white/[0.02] border border-white/[0.06] hover:${o.border} hover:bg-white/[0.03] transition-all duration-300`,children:[e.jsx("div",{className:`w-10 h-10 rounded-md bg-gradient-to-br ${o.color} border border-white/[0.06] flex items-center justify-center mb-3 group-hover:scale-105 transition-transform duration-300`,children:e.jsx(o.icon,{className:`w-5 h-5 ${o.iconColor}`})}),e.jsx("h4",{className:"font-semibold text-sm text-white/80 mb-1",children:o.title}),e.jsx("p",{className:"text-xs text-white/35 leading-relaxed",children:o.desc})]},o.title))}),e.jsxs("div",{className:"flex items-start gap-4 p-5 mt-6 rounded-md border border-amber-500/15 bg-amber-500/[0.04]",children:[e.jsx(Mc,{className:"w-5 h-5 text-amber-400 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm text-white/80",children:"Keep Your Key Safe"}),e.jsx("p",{className:"text-xs text-white/35 mt-1 leading-relaxed",children:"Never share your API key publicly or put it in frontend code. Store it in environment variables or a secrets manager."})]})]})]}),e.jsxs("section",{id:"customers",className:"scroll-mt-20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:"w-9 h-9 rounded-md bg-gradient-to-br from-cyan-500/20 to-blue-500/20 border border-white/[0.06] flex items-center justify-center",children:e.jsx(Ei,{className:"w-5 h-5 text-cyan-400"})}),e.jsx("h2",{className:"text-2xl font-bold text-white/90",children:"Customers"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(fi,{method:"GET",path:"/api/v1/customers",description:"Get a list of all your customers. If your API key is scoped to a specific customer, only that customer will be returned.",scopes:"read",example:`curl ${n}/api/v1/customers \\
  -H "Authorization: Bearer YOUR_API_KEY"`,response:`{
  "data": [
    {
      "id": "abc123",
      "name": "Acme Corp",
      "email": "contact@acme.com",
      "company": "Acme Corp",
      "createdAt": "2025-01-15T10:30:00Z"
    }
  ]
}`}),e.jsx(fi,{method:"GET",path:"/api/v1/customers/:id",description:"Get details for a specific customer by their ID.",scopes:"read",example:`curl ${n}/api/v1/customers/abc123 \\
  -H "Authorization: Bearer YOUR_API_KEY"`,response:`{
  "data": {
    "id": "abc123",
    "name": "Acme Corp",
    "email": "contact@acme.com",
    "company": "Acme Corp",
    "createdAt": "2025-01-15T10:30:00Z"
  }
}`})]})]}),e.jsxs("section",{id:"projects",className:"scroll-mt-20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:"w-9 h-9 rounded-md bg-gradient-to-br from-amber-500/20 to-orange-500/20 border border-white/[0.06] flex items-center justify-center",children:e.jsx($n,{className:"w-5 h-5 text-amber-400"})}),e.jsx("h2",{className:"text-2xl font-bold text-white/90",children:"Projects"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(fi,{method:"GET",path:"/api/v1/projects",description:"Get all projects. Filter by customer using the customerId query parameter.",scopes:"read",example:`curl "${n}/api/v1/projects?customerId=abc123" \\
  -H "Authorization: Bearer YOUR_API_KEY"`,response:`{
  "data": [
    {
      "id": "proj_1",
      "name": "Website Redesign",
      "description": "Complete redesign of corporate site",
      "status": "active",
      "customerId": "abc123",
      "previewUrl": "https://preview.example.com",
      "createdAt": "2025-02-01T09:00:00Z"
    }
  ]
}`}),e.jsx(fi,{method:"GET",path:"/api/v1/projects/:id",description:"Get a specific project by its ID.",scopes:"read",example:`curl ${n}/api/v1/projects/proj_1 \\
  -H "Authorization: Bearer YOUR_API_KEY"`}),e.jsx(fi,{method:"GET",path:"/api/v1/projects/:id/updates",description:"Get all progress updates for a project. Returns milestones, deliverables, and status updates in chronological order.",scopes:"read",example:`curl ${n}/api/v1/projects/proj_1/updates \\
  -H "Authorization: Bearer YOUR_API_KEY"`,response:`{
  "data": [
    {
      "id": "upd_1",
      "projectId": "proj_1",
      "type": "milestone",
      "title": "Design Approved",
      "description": "Homepage design has been approved",
      "createdAt": "2025-02-10T14:00:00Z"
    }
  ]
}`})]})]}),e.jsxs("section",{id:"invoices",className:"scroll-mt-20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:"w-9 h-9 rounded-md bg-gradient-to-br from-emerald-500/20 to-green-500/20 border border-white/[0.06] flex items-center justify-center",children:e.jsx(Vt,{className:"w-5 h-5 text-emerald-400"})}),e.jsx("h2",{className:"text-2xl font-bold text-white/90",children:"Invoices"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(fi,{method:"GET",path:"/api/v1/invoices",description:"Get all invoices. Filter by status using the status query parameter (draft, pending, paid, overdue).",scopes:"read",example:`curl "${n}/api/v1/invoices?status=pending" \\
  -H "Authorization: Bearer YOUR_API_KEY"`,response:`{
  "data": [
    {
      "id": "inv_1",
      "invoiceNumber": "INV-001",
      "customerId": "abc123",
      "projectId": "proj_1",
      "status": "pending",
      "totalCents": 250000,
      "dueDate": "2025-03-01",
      "createdAt": "2025-02-15T10:00:00Z"
    }
  ]
}`,children:e.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-md bg-white/[0.02] border border-white/[0.06]",children:[e.jsx(Si,{className:"w-4 h-4 text-amber-400 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-white/60 mb-1",children:"Understanding Amounts"}),e.jsxs("p",{className:"text-xs text-white/35 leading-relaxed",children:["All money amounts are in ",e.jsx("strong",{className:"text-white/50",children:"cents"}),". So 250000 = $2,500.00. Divide by 100 to get dollars."]})]})]})}),e.jsx(fi,{method:"GET",path:"/api/v1/invoices/:id",description:"Get a single invoice with its line items. Shows exactly what was billed and the breakdown.",scopes:"read",example:`curl ${n}/api/v1/invoices/inv_1 \\
  -H "Authorization: Bearer YOUR_API_KEY"`,response:`{
  "data": {
    "id": "inv_1",
    "invoiceNumber": "INV-001",
    "status": "pending",
    "totalCents": 250000,
    "dueDate": "2025-03-01",
    "lineItems": [
      {
        "description": "Homepage Design",
        "quantity": 1,
        "unitPriceCents": 150000,
        "totalCents": 150000
      },
      {
        "description": "Custom Images",
        "quantity": 5,
        "unitPriceCents": 20000,
        "totalCents": 100000
      }
    ]
  }
}`})]})]}),e.jsxs("section",{id:"work-entries",className:"scroll-mt-20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:"w-9 h-9 rounded-md bg-gradient-to-br from-pink-500/20 to-rose-500/20 border border-white/[0.06] flex items-center justify-center",children:e.jsx(kl,{className:"w-5 h-5 text-pink-400"})}),e.jsx("h2",{className:"text-2xl font-bold text-white/90",children:"Work Entries"})]}),e.jsx("div",{className:"space-y-3",children:e.jsx(fi,{method:"POST",path:"/api/v1/work-entries",description:"Log a new work entry against a project. This requires the 'write' scope. The entry will be available for invoicing later.",scopes:"write",example:`curl -X POST ${n}/api/v1/work-entries \\
  -H "Authorization: Bearer YOUR_API_KEY" \\
  -H "Content-Type: application/json" \\
  -d '{
    "projectId": "proj_1",
    "billingRateId": "rate_1",
    "quantity": 3,
    "description": "Designed 3 inner pages"
  }'`,response:`{
  "data": {
    "id": "we_1",
    "projectId": "proj_1",
    "billingRateId": "rate_1",
    "quantity": 3,
    "description": "Designed 3 inner pages",
    "createdAt": "2025-02-20T15:00:00Z"
  }
}`,children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"w-1 h-4 rounded-full bg-violet-500/50"}),e.jsx("p",{className:"text-xs font-semibold text-white/60 uppercase tracking-wider",children:"Required Fields"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2.5",children:[{field:"projectId",label:"Project ID"},{field:"billingRateId",label:"Rate to apply"},{field:"quantity",label:"Number of units"},{field:"description",label:"What was done"}].map(o=>e.jsxs("div",{className:"flex items-center gap-2.5 p-2.5 rounded-md bg-white/[0.02] border border-white/[0.04]",children:[e.jsx(Ss,{className:"w-3.5 h-3.5 text-emerald-400 shrink-0"}),e.jsx("code",{className:"text-xs bg-white/[0.04] px-2 py-0.5 rounded font-mono text-cyan-400/70",children:o.field}),e.jsx("span",{className:"text-xs text-white/35",children:o.label})]},o.field))})]})})})]}),e.jsxs("section",{id:"errors",className:"scroll-mt-20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:"w-9 h-9 rounded-md bg-gradient-to-br from-red-500/20 to-orange-500/20 border border-white/[0.06] flex items-center justify-center",children:e.jsx(Mc,{className:"w-5 h-5 text-red-400"})}),e.jsx("h2",{className:"text-2xl font-bold text-white/90",children:"Error Handling"})]}),e.jsx("p",{className:"text-white/45 mb-6 text-sm leading-relaxed",children:"When something goes wrong, the API returns a clear error message with an appropriate HTTP status code."}),e.jsx("div",{className:"space-y-3",children:[{code:"401",label:"Unauthorized",desc:"Your API key is missing, invalid, or not included in the Authorization header.",color:"text-red-400",bg:"bg-red-500/10",border:"border-red-500/10"},{code:"403",label:"Forbidden",desc:"Your key doesn't have the required scope, is disabled, or has expired.",color:"text-amber-400",bg:"bg-amber-500/10",border:"border-amber-500/10"},{code:"404",label:"Not Found",desc:"The resource you requested doesn't exist.",color:"text-yellow-400",bg:"bg-yellow-500/10",border:"border-yellow-500/10"},{code:"500",label:"Server Error",desc:"Something went wrong on our end. Try again in a moment.",color:"text-red-400",bg:"bg-red-500/10",border:"border-red-500/10"}].map(o=>e.jsxs("div",{className:"flex items-start gap-4 p-5 rounded-md bg-white/[0.02] border border-white/[0.06] hover:border-white/[0.1] transition-colors",children:[e.jsx("span",{className:`inline-flex items-center justify-center px-3 py-1.5 rounded-md ${o.bg} ${o.color} ${o.border} border font-mono text-xs font-bold min-w-[52px]`,children:o.code}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm text-white/80",children:o.label}),e.jsx("p",{className:"text-xs text-white/35 mt-0.5 leading-relaxed",children:o.desc})]})]},o.code))}),e.jsx("div",{className:"mt-6",children:e.jsx(dl,{code:`{
  "error": "Missing required scope: 'write'. Your key has: read"
}`,language:"json"})}),e.jsxs("div",{className:"relative p-8 mt-10 text-center rounded-md border border-blue-500/15 bg-gradient-to-br from-blue-500/[0.04] via-violet-500/[0.02] to-transparent overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-blue-400/20 to-transparent"}),e.jsx("div",{className:"w-14 h-14 rounded-full bg-gradient-to-br from-blue-500/20 to-violet-500/20 border border-white/[0.06] flex items-center justify-center mx-auto mb-5 shadow-lg shadow-blue-500/10",children:e.jsx(Si,{className:"w-6 h-6 text-blue-400"})}),e.jsx("h3",{className:"font-bold text-xl text-white/90 mb-3",children:"Need Help?"}),e.jsx("p",{className:"text-sm text-white/40 mb-6 max-w-md mx-auto",children:"Start a conversation with us or check out the Q&A section for common questions."}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx($,{className:"bg-gradient-to-r from-blue-500 to-violet-500 border-0 text-white font-medium shadow-lg shadow-blue-500/20",asChild:!0,children:e.jsx("a",{href:"/#contact",children:"Contact Us"})}),e.jsx($,{className:"bg-white/[0.04] border border-white/[0.08] text-white/70 hover:bg-white/[0.08] hover:text-white transition-colors",asChild:!0,children:e.jsx("a",{href:"/questions",children:"Q&A"})})]})]})]})]})]})]})}function wD({status:s}){switch(s){case"success":return e.jsxs(je,{className:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400","data-testid":`badge-status-${s}`,children:[e.jsx(yn,{className:"w-3 h-3 mr-1"}),"Success"]});case"failed":return e.jsxs(je,{variant:"destructive","data-testid":`badge-status-${s}`,children:[e.jsx(ao,{className:"w-3 h-3 mr-1"}),"Failed"]});case"pending":return e.jsxs(je,{className:"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400","data-testid":`badge-status-${s}`,children:[e.jsx(Qe,{className:"w-3 h-3 mr-1 animate-spin"}),"Running"]});default:return e.jsx(je,{variant:"secondary","data-testid":`badge-status-${s}`,children:s})}}function jD({project:s,customers:t,backupRate:n}){const{toast:a}=pt(),[o,l]=p.useState(!1),[d,u]=p.useState(!1),[h,f]=p.useState(""),[b,v]=p.useState("main"),[y,N]=p.useState(""),C=t.find(K=>K.id===s.customerId),{data:g,isLoading:k}=Le({queryKey:["/api/git-backups/project",s.id],queryFn:async()=>{const K=await fetch(`/api/git-backups/project/${s.id}`,{credentials:"include"});if(!K.ok)throw new Error("Failed to fetch");return K.json()}}),{data:A}=Le({queryKey:["/api/git-backups/logs",s.id],queryFn:async()=>{const K=await fetch(`/api/git-backups/logs/${s.id}`,{credentials:"include"});if(!K.ok)throw new Error("Failed to fetch");return K.json()},enabled:o}),{data:E}=Le({queryKey:["/api/git-backups/repos",g?.id],queryFn:async()=>{const K=await fetch(`/api/git-backups/${g.id}/repos`,{credentials:"include"});if(!K.ok)throw new Error("Failed to fetch");return K.json()},enabled:!!g?.isConnected&&d}),S=Te({mutationFn:async()=>(await ke("POST","/api/git-backups",{projectId:s.id,customerId:s.customerId})).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/git-backups/project",s.id]}),a({title:"Backup initialized",description:"GitHub connection is ready. Customer needs to connect their GitHub account from their portal."})}}),R=Te({mutationFn:async K=>(await ke("PATCH",`/api/git-backups/${g.id}`,K)).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/git-backups/project",s.id]}),a({title:"Config updated"})}}),H=Te({mutationFn:async()=>(await ke("POST",`/api/git-backups/${g.id}/push`,{message:y||void 0})).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/git-backups/logs",s.id]}),a({title:"Backup started",description:"Pushing project data to GitHub..."}),N("")}}),re=Te({mutationFn:async()=>(await ke("DELETE",`/api/git-backups/${g.id}`)).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/git-backups/project",s.id]}),a({title:"Backup config removed"})}});return k?e.jsx(ce,{className:"p-4",children:e.jsx(Ce,{className:"h-20 w-full"})}):e.jsxs(ce,{className:"overflow-hidden","data-testid":`card-backup-${s.id}`,children:[e.jsx("div",{className:"p-4 border-b bg-muted/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg bg-gradient-to-br from-violet-500 to-purple-600 flex items-center justify-center",children:e.jsx(io,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-sm","data-testid":`text-project-name-${s.id}`,children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:C?.name||"Unknown client"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:g?.isConnected?e.jsxs(je,{className:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400","data-testid":`badge-connected-${s.id}`,children:[e.jsx(no,{className:"w-3 h-3 mr-1"}),g.githubUsername||"Connected"]}):g?e.jsxs(je,{variant:"outline",className:"text-amber-600 border-amber-300","data-testid":`badge-pending-${s.id}`,children:[e.jsx(qn,{className:"w-3 h-3 mr-1"}),"Awaiting GitHub"]}):null})]})}),e.jsxs("div",{className:"p-4",children:[g?e.jsx("div",{className:"space-y-4",children:g.isConnected?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[g.githubRepo?e.jsx(je,{variant:"outline",className:"font-mono text-xs","data-testid":`badge-repo-${s.id}`,children:g.githubRepo}):e.jsx("span",{className:"text-xs text-muted-foreground",children:"No repo selected"}),g.githubBranch&&e.jsxs(je,{variant:"secondary",className:"text-xs",children:[e.jsx(Ku,{className:"w-3 h-3 mr-1"}),g.githubBranch]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs($,{variant:"outline",size:"sm",onClick:()=>u(!d),"data-testid":`button-settings-${s.id}`,children:[e.jsx(Ny,{className:"w-4 h-4 mr-1"}),"Settings"]}),e.jsxs($,{variant:"outline",size:"sm",onClick:()=>l(!o),"data-testid":`button-history-${s.id}`,children:[e.jsx(py,{className:"w-4 h-4 mr-1"}),"History",o?e.jsx(wo,{className:"w-3 h-3 ml-1"}):e.jsx(ua,{className:"w-3 h-3 ml-1"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>R.mutate({autopilotEnabled:!g.autopilotEnabled}),className:"text-muted-foreground hover:text-foreground transition-colors","data-testid":`button-autopilot-toggle-${s.id}`,children:g.autopilotEnabled?e.jsx(Zw,{className:"w-8 h-8 text-emerald-500"}):e.jsx(Xw,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium",children:["Autopilot ",g.autopilotEnabled?"On":"Off"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:g.autopilotEnabled?`Auto-backup ${g.autopilotFrequency||"daily"}`:"Enable for automatic backups"})]})]}),g.autopilotEnabled&&e.jsxs(Dt,{value:g.autopilotFrequency||"daily",onValueChange:K=>R.mutate({autopilotFrequency:K}),children:[e.jsx(It,{className:"w-28","data-testid":`select-frequency-${s.id}`,children:e.jsx($t,{})}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"hourly",children:"Hourly"}),e.jsx(Ie,{value:"daily",children:"Daily"}),e.jsx(Ie,{value:"weekly",children:"Weekly"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{placeholder:"Commit message (optional)",value:y,onChange:K=>N(K.target.value),className:"flex-1 text-sm","data-testid":`input-commit-message-${s.id}`}),e.jsxs($,{onClick:()=>H.mutate(),disabled:H.isPending||!g.githubRepo,className:"bg-gradient-to-r from-violet-600 to-purple-600 hover:from-violet-700 hover:to-purple-700","data-testid":`button-push-now-${s.id}`,children:[H.isPending?e.jsx(Qe,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(z3,{className:"w-4 h-4 mr-2"}),"Push Now",n?.isActive&&n.rateCents>0&&e.jsxs("span",{className:"ml-1.5 inline-flex items-center gap-0.5 bg-white/20 rounded-full px-2 py-0.5 text-xs font-medium",children:[e.jsx(Fn,{className:"w-3 h-3"}),(n.rateCents/100).toFixed(2)]})]})]}),g.lastPushAt&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last backup: ",new Date(g.lastPushAt).toLocaleString()]})]}):e.jsxs("div",{className:"text-center py-4 space-y-3",children:[e.jsx("div",{className:"w-12 h-12 mx-auto rounded-full bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center",children:e.jsx(no,{className:"w-6 h-6 text-amber-600 dark:text-amber-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Waiting for customer to connect GitHub"}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[C?.name||"Customer"," needs to connect their GitHub account from their portal."]}),C?.portalToken&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Portal link: ",e.jsxs("code",{className:"bg-muted px-1 rounded",children:["/portal/",C.portalToken]})]})]}),e.jsxs($,{variant:"outline",size:"sm",onClick:()=>re.mutate(),disabled:re.isPending,className:"text-destructive","data-testid":`button-remove-config-${s.id}`,children:[e.jsx(ps,{className:"w-3 h-3 mr-1"}),"Remove"]})]})}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx(no,{className:"w-10 h-10 mx-auto text-muted-foreground mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"No backup configured for this project"}),e.jsxs($,{onClick:()=>S.mutate(),disabled:S.isPending,"data-testid":`button-enable-backup-${s.id}`,children:[S.isPending?e.jsx(Qe,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(Ku,{className:"w-4 h-4 mr-2"}),"Enable Code Backups"]})]}),d&&g?.isConnected&&e.jsxs("div",{className:"mt-4 p-4 border rounded-lg space-y-3 bg-muted/20",children:[e.jsxs("h4",{className:"text-sm font-semibold flex items-center gap-2",children:[e.jsx(Ny,{className:"w-4 h-4"}),"Repository Settings"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_e,{className:"text-xs",children:"Repository"}),e.jsxs(Dt,{value:h||g.githubRepo||"",onValueChange:K=>{f(K);const ee=E?.find(me=>me.fullName===K);ee&&v(ee.defaultBranch),R.mutate({githubRepo:K,githubBranch:ee?.defaultBranch||"main"})},children:[e.jsx(It,{"data-testid":`select-repo-${s.id}`,children:e.jsx($t,{placeholder:"Select a repository"})}),e.jsx(Ot,{children:E?.map(K=>e.jsx(Ie,{value:K.fullName,children:e.jsxs("span",{className:"flex items-center gap-2",children:[K.fullName,K.private&&e.jsx(je,{variant:"secondary",className:"text-[10px] py-0 px-1",children:"private"})]})},K.fullName))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_e,{className:"text-xs",children:"Branch"}),e.jsx(De,{value:b||g.githubBranch||"main",onChange:K=>{v(K.target.value),R.mutate({githubBranch:K.target.value})},className:"text-sm","data-testid":`input-branch-${s.id}`})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2",children:[e.jsxs($,{variant:"ghost",size:"sm",className:"text-destructive",onClick:()=>{confirm("Remove Git backup configuration for this project?")&&re.mutate()},"data-testid":`button-delete-config-${s.id}`,children:[e.jsx(ps,{className:"w-3 h-3 mr-1"}),"Remove Backup"]}),e.jsx($,{size:"sm",variant:"outline",onClick:()=>u(!1),children:"Done"})]})]}),o&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"text-sm font-semibold flex items-center gap-2",children:[e.jsx(py,{className:"w-4 h-4"}),"Backup History"]}),e.jsx($,{variant:"ghost",size:"sm",onClick:()=>ve.invalidateQueries({queryKey:["/api/git-backups/logs",s.id]}),"data-testid":`button-refresh-logs-${s.id}`,children:e.jsx(Ol,{className:"w-3 h-3"})})]}),!A||A.length===0?e.jsx("p",{className:"text-xs text-muted-foreground text-center py-4",children:"No backups yet"}):e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:A.map(K=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-md border text-xs","data-testid":`log-entry-${K.id}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(wD,{status:K.status}),e.jsx("span",{className:"text-muted-foreground",children:K.commitMessage||"Backup"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[K.triggeredBy==="autopilot"&&e.jsx("span",{title:"Autopilot",children:e.jsx(Jn,{className:"w-3 h-3 text-amber-500"})}),e.jsx("span",{children:new Date(K.createdAt).toLocaleString()}),K.commitSha&&e.jsx("code",{className:"bg-muted px-1 rounded font-mono",children:K.commitSha.substring(0,7)})]})]},K.id))})]})]})]})}function ND(){const{toast:s}=pt(),[t,n]=p.useState(!1),[a,o]=p.useState(""),{data:l,isLoading:d}=Le({queryKey:["/api/projects"]}),{data:u}=Le({queryKey:["/api/customers"]}),{data:h}=Le({queryKey:["/api/git-backups/billing-rate"],queryFn:async()=>{const v=await fetch("/api/git-backups/billing-rate",{credentials:"include"});if(!v.ok)throw new Error("Failed to fetch");return v.json()}}),f=Te({mutationFn:async v=>(await ke("PATCH","/api/git-backups/billing-rate",v)).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/git-backups/billing-rate"]}),n(!1),s({title:"Rate updated",description:"Backup billing rate has been updated."})}}),b=l?.filter(v=>v.status==="active")||[];return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold tracking-tight flex items-center gap-3","data-testid":"text-page-title",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-violet-500 to-purple-600 flex items-center justify-center",children:e.jsx(io,{className:"w-6 h-6 text-white"})}),"Code Backups"]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Push project backups to your customers' GitHub repositories. Customers connect their GitHub from their portal, and you control when backups happen."})]}),e.jsx(ce,{className:"p-4 bg-gradient-to-r from-violet-50 to-purple-50 dark:from-violet-950/20 dark:to-purple-950/20 border-violet-200 dark:border-violet-800",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Jn,{className:"w-5 h-5 text-violet-600 dark:text-violet-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-violet-900 dark:text-violet-200",children:"How it works"}),e.jsxs("ol",{className:"text-xs text-violet-700 dark:text-violet-300 mt-1 space-y-0.5 list-decimal pl-4",children:[e.jsx("li",{children:'Click "Enable Code Backups" on any project below'}),e.jsx("li",{children:"Your customer connects their GitHub account from their portal"}),e.jsx("li",{children:"Select which repository and branch to push backups to"}),e.jsx("li",{children:"Push manually anytime, or turn on Autopilot for automatic daily/weekly backups"}),e.jsx("li",{children:"Each successful backup automatically adds a billable work entry to the project"})]})]})]})}),h&&e.jsx(ce,{className:"p-4 border-emerald-200 dark:border-emerald-800","data-testid":"card-backup-billing",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center",children:e.jsx(Fn,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Backup Billing Rate"}),t?e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"$"}),e.jsx(De,{type:"number",step:"0.01",min:"0",value:a,onChange:v=>o(v.target.value),className:"w-24 h-7 text-xs","data-testid":"input-backup-rate"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"per backup"}),e.jsx($,{size:"sm",variant:"outline",className:"h-7 text-xs",onClick:()=>{const v=parseFloat(a);if(isNaN(v)||v<0)return;const y=Math.round(v*100);f.mutate({rateCents:y})},disabled:!a||isNaN(parseFloat(a))||parseFloat(a)<0,"data-testid":"button-save-rate",children:"Save"}),e.jsx($,{size:"sm",variant:"ghost",className:"h-7 text-xs",onClick:()=>n(!1),children:"Cancel"})]}):e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsxs("span",{className:"font-semibold text-foreground",children:["$",(h.rateCents/100).toFixed(2)]})," per backup  auto-added to project billing"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!t&&e.jsx($,{size:"sm",variant:"ghost",onClick:()=>{o((h.rateCents/100).toFixed(2)),n(!0)},"data-testid":"button-edit-rate",children:e.jsx(ia,{className:"w-3.5 h-3.5"})}),e.jsx($,{size:"sm",variant:h.isActive?"outline":"secondary",onClick:()=>f.mutate({isActive:!h.isActive}),className:"text-xs","data-testid":"button-toggle-billing",children:h.isActive?e.jsxs(e.Fragment,{children:[e.jsx(Zw,{className:"w-4 h-4 mr-1 text-emerald-500"})," Billing On"]}):e.jsxs(e.Fragment,{children:[e.jsx(Xw,{className:"w-4 h-4 mr-1 text-muted-foreground"})," Billing Off"]})})]})]})}),d?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(v=>e.jsx(Ce,{className:"h-32 w-full"},v))}):b.length===0?e.jsxs(ce,{className:"p-8 text-center",children:[e.jsx(io,{className:"w-12 h-12 mx-auto text-muted-foreground mb-3"}),e.jsx("p",{className:"text-muted-foreground",children:"No active projects found"})]}):e.jsx("div",{className:"space-y-4",children:b.map(v=>e.jsx(jD,{project:v,customers:u||[],backupRate:h},v.id))})]})}const kD=[{value:"restaurant",label:"Restaurants"},{value:"plumber",label:"Plumbers"},{value:"dentist",label:"Dentists"},{value:"lawyer",label:"Lawyers"},{value:"real estate agent",label:"Real Estate"},{value:"auto repair",label:"Auto Repair"},{value:"salon",label:"Hair Salons"},{value:"gym fitness",label:"Gyms & Fitness"},{value:"accountant",label:"Accountants"},{value:"contractor",label:"Contractors"},{value:"veterinarian",label:"Veterinarians"},{value:"chiropractor",label:"Chiropractors"},{value:"florist",label:"Florists"},{value:"bakery",label:"Bakeries"},{value:"insurance agent",label:"Insurance"},{value:"photographer",label:"Photographers"},{value:"cleaning service",label:"Cleaning Services"},{value:"landscaping",label:"Landscaping"}],CD={new:"bg-blue-500/10 text-blue-500 border-blue-500/20",contacted:"bg-amber-500/10 text-amber-500 border-amber-500/20",interested:"bg-emerald-500/10 text-emerald-500 border-emerald-500/20",not_interested:"bg-red-500/10 text-red-400 border-red-500/20",converted:"bg-violet-500/10 text-violet-500 border-violet-500/20"},L1={new:"New",contacted:"Contacted",interested:"Interested",not_interested:"Not Interested",converted:"Converted"};function SD(){zn("Lead Generator");const{toast:s}=pt(),[t,n]=p.useState(""),[a,o]=p.useState("restaurant"),[l,d]=p.useState(""),[u,h]=p.useState([]),[f,b]=p.useState(!1),[v,y]=p.useState(null),[N,C]=p.useState(null),[g,k]=p.useState(null),[A,E]=p.useState("search"),[S,R]=p.useState("all"),[H,re]=p.useState(null),[K,ee]=p.useState(""),[me,pe]=p.useState(""),[L,X]=p.useState(null),{data:z=[],isLoading:V}=Le({queryKey:["/api/leads"]}),se=Te({mutationFn:async({zip:q,query:oe})=>{const he=new URLSearchParams({zipCode:q,query:oe});return(await ke("GET",`/api/leads/search?${he}`)).json()},onSuccess:q=>{h(q.results||[]),b(!0),q.results?.length===0&&s({title:"No results",description:"Try a different search or zip code."})},onError:()=>{s({title:"Search failed",description:"Could not search businesses. Check your API key.",variant:"destructive"})}}),I=Te({mutationFn:async q=>(await ke("POST","/api/leads",q)).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/leads"]}),s({title:"Lead saved",description:"Business added to your leads."})}}),O=Te({mutationFn:async({id:q,updates:oe})=>(await ke("PATCH",`/api/leads/${q}`,oe)).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/leads"]}),re(null),s({title:"Lead updated"})}}),T=Te({mutationFn:async q=>{await ke("DELETE",`/api/leads/${q}`)},onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/leads"]}),s({title:"Lead removed"})}}),Y=()=>{if(!t.trim()){s({title:"Enter a zip code",description:"A zip code is required to search.",variant:"destructive"});return}const q=l.trim()||a;se.mutate({zip:t.trim(),query:q})},Q=async q=>{k(q);try{const he=await(await ke("GET",`/api/leads/place-details/${q}`)).json();C(he),y(q)}catch{s({title:"Failed to get details",variant:"destructive"})}finally{k(null)}},F=q=>{I.mutate({businessName:q.name,address:q.address,phone:q.phone,website:q.website,domain:q.domain,emailGuess:q.emailGuess,googlePlaceId:q.placeId,googleRating:q.rating?String(q.rating):null,googleReviewCount:q.reviewCount,category:q.category,zipCode:t,status:"new"})},te=q=>{window.open(`/?audit=${encodeURIComponent(q)}`,"_blank")},B=async q=>{if(q.website){X(q.id);try{const he=await(await ke("POST","/api/leads/scrape-email",{website:q.website})).json(),Se=[...he.scrapedEmails||[],...he.guessedEmails||[]].join(", ");await ke("PATCH",`/api/leads/${q.id}`,{emailGuess:Se||q.emailGuess}),ve.invalidateQueries({queryKey:["/api/leads"]}),he.scrapedEmails?.length>0?s({title:"Emails found!",description:`Found ${he.scrapedEmails.length} email(s) on ${q.domain||q.website}`}):s({title:"No emails found on website",description:"Guessed emails have been saved instead."})}catch{s({title:"Scrape failed",variant:"destructive"})}finally{X(null)}}},U=S==="all"?z:z.filter(q=>q.status===S),M={total:z.length,new:z.filter(q=>q.status==="new").length,contacted:z.filter(q=>q.status==="contacted").length,interested:z.filter(q=>q.status==="interested").length,converted:z.filter(q=>q.status==="converted").length};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-violet-500/20 to-blue-500/20",children:e.jsx(kp,{className:"w-5 h-5 text-violet-500"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight","data-testid":"text-page-title",children:"Lead Generator"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Find local businesses that need a website or upgrade"})]})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs($,{variant:A==="search"?"default":"outline",onClick:()=>E("search"),className:"gap-2","data-testid":"button-tab-search",children:[e.jsx(sn,{className:"w-4 h-4"}),"Search"]}),e.jsxs($,{variant:A==="leads"?"default":"outline",onClick:()=>E("leads"),className:"gap-2","data-testid":"button-tab-leads",children:[e.jsx(Ei,{className:"w-4 h-4"}),"My Leads",z.length>0&&e.jsx(je,{variant:"secondary",className:"ml-1",children:z.length})]})]}),A==="search"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(ce,{className:"p-6 border-0 shadow-lg bg-gradient-to-br from-background to-muted/30",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Si,{className:"w-4 h-4 text-violet-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Find Businesses Near You"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"relative flex-shrink-0 sm:w-44",children:[e.jsx(cl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(De,{placeholder:"Zip Code",value:t,onChange:q=>n(q.target.value),className:"pl-9 h-12 text-base rounded-xl border-2 focus:border-violet-500 transition-colors",onKeyDown:q=>q.key==="Enter"&&Y(),"data-testid":"input-zip-code"})]}),e.jsxs(Dt,{value:a,onValueChange:o,children:[e.jsxs(It,{className:"h-12 rounded-xl border-2 sm:w-48","data-testid":"select-business-type",children:[e.jsx(hl,{className:"w-4 h-4 mr-2 text-muted-foreground"}),e.jsx($t,{})]}),e.jsx(Ot,{children:kD.map(q=>e.jsx(Ie,{value:q.value,children:q.label},q.value))})]}),e.jsxs("div",{className:"relative flex-1",children:[e.jsx(sn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(De,{placeholder:"Or type a custom search...",value:l,onChange:q=>d(q.target.value),className:"pl-9 h-12 text-base rounded-xl border-2 focus:border-violet-500 transition-colors",onKeyDown:q=>q.key==="Enter"&&Y(),"data-testid":"input-custom-query"})]}),e.jsxs($,{onClick:Y,disabled:se.isPending,className:"h-12 px-6 rounded-xl bg-gradient-to-r from-violet-600 to-blue-600 hover:from-violet-700 hover:to-blue-700 text-white shadow-lg shadow-violet-500/25 transition-all","data-testid":"button-search",children:[se.isPending?e.jsx(Qe,{className:"w-4 h-4 animate-spin mr-2"}):e.jsx(sn,{className:"w-4 h-4 mr-2"}),"Search"]})]})]})}),se.isPending&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Array.from({length:6}).map((q,oe)=>e.jsxs(ce,{className:"p-5",children:[e.jsx(Ce,{className:"h-5 w-3/4 mb-3"}),e.jsx(Ce,{className:"h-4 w-full mb-2"}),e.jsx(Ce,{className:"h-4 w-1/2 mb-4"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ce,{className:"h-9 w-24"}),e.jsx(Ce,{className:"h-9 w-24"})]})]},oe))}),f&&!se.isPending&&u.length===0&&e.jsxs(ce,{className:"p-12 text-center border-dashed",children:[e.jsx(hl,{className:"w-12 h-12 text-muted-foreground/50 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-1",children:"No businesses found"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Try a different zip code or business type"})]}),u.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h2",{className:"text-lg font-semibold",children:[u.length," businesses found"]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.map(q=>{const oe=z.some(he=>he.googlePlaceId===q.placeId);return e.jsxs(ce,{className:"p-5 hover:shadow-lg transition-all duration-200 border-2 hover:border-violet-500/30 group","data-testid":`card-result-${q.placeId}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-base truncate group-hover:text-violet-600 dark:group-hover:text-violet-400 transition-colors",children:q.name}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground mt-1",children:[e.jsx(cl,{className:"w-3.5 h-3.5 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:q.address})]})]}),oe&&e.jsx(je,{variant:"secondary",className:"ml-2 text-xs bg-emerald-500/10 text-emerald-500 border-emerald-500/20",children:"Saved"})]}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[q.rating&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ia,{className:"w-3.5 h-3.5 fill-amber-400 text-amber-400"}),e.jsx("span",{className:"text-sm font-medium",children:q.rating}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",q.reviewCount,")"]})]}),q.category&&e.jsx(je,{variant:"outline",className:"text-xs capitalize",children:q.category})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs($,{size:"sm",variant:"outline",onClick:()=>Q(q.placeId),disabled:g===q.placeId,className:"gap-1.5","data-testid":`button-details-${q.placeId}`,children:[g===q.placeId?e.jsx(Qe,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(jo,{className:"w-3.5 h-3.5"}),"Details"]}),!oe&&v!==q.placeId&&e.jsxs($,{size:"sm",variant:"outline",className:"gap-1.5 hover:bg-violet-50 hover:text-violet-600 hover:border-violet-300 dark:hover:bg-violet-500/10",onClick:()=>Q(q.placeId),"data-testid":`button-save-${q.placeId}`,children:[e.jsx(Qt,{className:"w-3.5 h-3.5"}),"View & Save"]})]})]},q.placeId)})})]})]}),A==="leads"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-3",children:[e.jsxs(ce,{className:"p-4 text-center cursor-pointer hover:shadow-md transition-all",onClick:()=>R("all"),"data-testid":"stat-total",children:[e.jsx("div",{className:"text-2xl font-bold",children:M.total}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Total"})]}),e.jsxs(ce,{className:"p-4 text-center cursor-pointer hover:shadow-md transition-all",onClick:()=>R("new"),"data-testid":"stat-new",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-500",children:M.new}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"New"})]}),e.jsxs(ce,{className:"p-4 text-center cursor-pointer hover:shadow-md transition-all",onClick:()=>R("contacted"),"data-testid":"stat-contacted",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-500",children:M.contacted}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Contacted"})]}),e.jsxs(ce,{className:"p-4 text-center cursor-pointer hover:shadow-md transition-all",onClick:()=>R("interested"),"data-testid":"stat-interested",children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-500",children:M.interested}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Interested"})]}),e.jsxs(ce,{className:"p-4 text-center cursor-pointer hover:shadow-md transition-all",onClick:()=>R("converted"),"data-testid":"stat-converted",children:[e.jsx("div",{className:"text-2xl font-bold text-violet-500",children:M.converted}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Converted"})]})]}),V?e.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((q,oe)=>e.jsxs(ce,{className:"p-5",children:[e.jsx(Ce,{className:"h-5 w-48 mb-3"}),e.jsx(Ce,{className:"h-4 w-full mb-2"}),e.jsx(Ce,{className:"h-4 w-2/3"})]},oe))}):U.length===0?e.jsxs(ce,{className:"p-12 text-center border-dashed",children:[e.jsx(kp,{className:"w-12 h-12 text-muted-foreground/50 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-1",children:S==="all"?"No leads yet":`No ${L1[S]?.toLowerCase()} leads`}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:S==="all"?"Search for businesses and save them as leads":"Change the filter to see other leads"}),S==="all"&&e.jsxs($,{onClick:()=>E("search"),className:"gap-2","data-testid":"button-go-search",children:[e.jsx(sn,{className:"w-4 h-4"}),"Find Businesses"]})]}):e.jsx("div",{className:"space-y-3",children:U.map(q=>e.jsx(ce,{className:"p-5 hover:shadow-md transition-all duration-200 border-l-4",style:{borderLeftColor:q.status==="new"?"#3b82f6":q.status==="contacted"?"#f59e0b":q.status==="interested"?"#10b981":q.status==="converted"?"#8b5cf6":"#ef4444"},"data-testid":`card-lead-${q.id}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[e.jsx("h3",{className:"font-semibold text-base",children:q.businessName}),e.jsx(je,{className:`text-xs ${CD[q.status]||""}`,children:L1[q.status]||q.status}),q.googleRating&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ia,{className:"w-3 h-3 fill-amber-400 text-amber-400"}),e.jsx("span",{className:"text-xs",children:q.googleRating})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-1.5 text-sm",children:[q.address&&e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(cl,{className:"w-3.5 h-3.5 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:q.address})]}),q.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Bc,{className:"w-3.5 h-3.5 flex-shrink-0"}),e.jsx("a",{href:`tel:${q.phone}`,className:"hover:text-foreground transition-colors",children:q.phone})]}),q.website&&e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(jn,{className:"w-3.5 h-3.5 flex-shrink-0"}),e.jsxs("a",{href:q.website,target:"_blank",rel:"noopener noreferrer",className:"hover:text-violet-500 transition-colors truncate","data-testid":`link-website-${q.id}`,children:[q.domain||q.website,e.jsx(tn,{className:"w-3 h-3 inline ml-1"})]})]}),q.emailGuess&&e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Fs,{className:"w-3.5 h-3.5 flex-shrink-0"}),e.jsx("span",{className:"text-xs truncate",title:q.emailGuess,children:q.emailGuess.split(",")[0]})]})]}),q.notes&&e.jsxs("div",{className:"mt-2 text-sm text-muted-foreground bg-muted/50 rounded-lg p-2.5",children:[e.jsx(Mt,{className:"w-3 h-3 inline mr-1"}),q.notes]}),q.lastContactedAt&&e.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs text-muted-foreground",children:[e.jsx(Gt,{className:"w-3 h-3"}),"Last contacted: ",new Date(q.lastContactedAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs($,{size:"sm",variant:"outline",onClick:()=>{re(q),ee(q.notes||""),pe(q.status)},className:"gap-1.5","data-testid":`button-edit-${q.id}`,children:[e.jsx(Mt,{className:"w-3.5 h-3.5"}),"Edit"]}),q.website&&e.jsxs(e.Fragment,{children:[e.jsxs($,{size:"sm",variant:"outline",onClick:()=>B(q),disabled:L===q.id,className:"gap-1.5 hover:bg-green-50 hover:text-green-600 dark:hover:bg-green-500/10","data-testid":`button-scrape-${q.id}`,children:[L===q.id?e.jsx(Qe,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(Ol,{className:"w-3.5 h-3.5"}),L===q.id?"Scraping...":"Find Emails"]}),e.jsxs($,{size:"sm",variant:"outline",onClick:()=>te(q.website),className:"gap-1.5 hover:bg-violet-50 hover:text-violet-600 dark:hover:bg-violet-500/10","data-testid":`button-audit-${q.id}`,children:[e.jsx(jy,{className:"w-3.5 h-3.5"}),"Audit"]})]}),e.jsx($,{size:"sm",variant:"ghost",onClick:()=>T.mutate(q.id),className:"gap-1.5 text-red-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10","data-testid":`button-delete-${q.id}`,children:e.jsx(ps,{className:"w-3.5 h-3.5"})})]})]})},q.id))})]}),e.jsx(Ct,{open:!!v&&!!N,onOpenChange:()=>{y(null),C(null)},children:e.jsxs(vt,{className:"sm:max-w-lg",children:[e.jsx(yt,{children:e.jsxs(bt,{className:"flex items-center gap-2",children:[e.jsx(hl,{className:"w-5 h-5 text-violet-500"}),N?.name]})}),N&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[N.address&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(cl,{className:"w-4 h-4 text-muted-foreground mt-0.5"}),e.jsx("span",{className:"text-sm",children:N.address})]}),N.phone&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Bc,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("a",{href:`tel:${N.phone}`,className:"text-sm hover:text-violet-500 transition-colors",children:N.phone})]}),N.website&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(jn,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("a",{href:N.website,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-violet-500 hover:underline flex items-center gap-1","data-testid":"link-detail-website",children:[N.domain||N.website,e.jsx(tn,{className:"w-3 h-3"})]})]}),!N.website&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(jn,{className:"w-4 h-4 text-red-400"}),e.jsx("span",{className:"text-sm text-red-400 font-medium",children:"No website found  great opportunity!"})]}),N.scrapedEmails?.length>0&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Fs,{className:"w-4 h-4 text-green-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-green-600 dark:text-green-400 font-medium block mb-1",children:"Found on website:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:N.scrapedEmails.map(q=>e.jsx(je,{className:"text-xs font-mono bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 border-green-300 dark:border-green-700",children:q},q))})]})]}),N.guessedEmails?.length>0&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Fs,{className:"w-4 h-4 text-muted-foreground mt-0.5"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-muted-foreground block mb-1",children:N.scrapedEmails?.length>0?"Other possible emails:":"Best guesses (not found on site):"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:N.guessedEmails.map(q=>e.jsx(je,{variant:"outline",className:"text-xs font-mono",children:q},q))})]})]}),N.emailSource==="none"&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Fs,{className:"w-4 h-4 text-red-400"}),e.jsx("span",{className:"text-sm text-red-400",children:"No email found  no website to scrape"})]}),N.rating&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ia,{className:"w-4 h-4 fill-amber-400 text-amber-400"}),e.jsxs("span",{className:"text-sm",children:[N.rating," stars (",N.reviewCount," reviews)"]})]}),N.googleMapsUrl&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(tn,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("a",{href:N.googleMapsUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-500 hover:underline",children:"View on Google Maps"})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2 border-t",children:[e.jsx($,{onClick:()=>F(N),disabled:I.isPending||z.some(q=>q.googlePlaceId===N.placeId),className:"flex-1 gap-2 bg-gradient-to-r from-violet-600 to-blue-600 hover:from-violet-700 hover:to-blue-700 text-white","data-testid":"button-save-lead",children:z.some(q=>q.googlePlaceId===N.placeId)?e.jsx(e.Fragment,{children:"Already Saved"}):I.isPending?e.jsx(Qe,{className:"w-4 h-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(Qt,{className:"w-4 h-4"}),"Save Lead"]})}),N.website&&e.jsxs($,{variant:"outline",onClick:()=>te(N.website),className:"gap-2","data-testid":"button-audit-site",children:[e.jsx(jy,{className:"w-4 h-4"}),"Audit Site"]})]})]})]})}),e.jsx(Ct,{open:!!H,onOpenChange:()=>re(null),children:e.jsxs(vt,{className:"sm:max-w-md",children:[e.jsx(yt,{children:e.jsxs(bt,{children:["Edit Lead  ",H?.businessName]})}),H&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1.5 block",children:"Status"}),e.jsxs(Dt,{value:me,onValueChange:pe,children:[e.jsx(It,{"data-testid":"select-lead-status",children:e.jsx($t,{})}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"new",children:"New"}),e.jsx(Ie,{value:"contacted",children:"Contacted"}),e.jsx(Ie,{value:"interested",children:"Interested"}),e.jsx(Ie,{value:"not_interested",children:"Not Interested"}),e.jsx(Ie,{value:"converted",children:"Converted"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1.5 block",children:"Notes"}),e.jsx(Rs,{value:K,onChange:q=>ee(q.target.value),placeholder:"Add notes about this lead...",rows:4,"data-testid":"textarea-lead-notes"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx($,{onClick:()=>O.mutate({id:H.id,updates:{status:me,notes:K,lastContactedAt:me==="contacted"?new Date:void 0}}),disabled:O.isPending,className:"flex-1 bg-gradient-to-r from-violet-600 to-blue-600 text-white","data-testid":"button-save-edit",children:O.isPending?e.jsx(Qe,{className:"w-4 h-4 animate-spin"}):"Save Changes"}),e.jsx($,{variant:"outline",onClick:()=>re(null),children:"Cancel"})]})]})]})})]})}const ED={"us-central":"us","us-west":"us","us-east":"us","us-southeast":"us","us-iad":"us","us-ord":"us","us-lax":"us","us-mia":"us","us-den":"us","us-sea":"us","ca-central":"ca","eu-west":"gb","eu-central":"de","ap-west":"in","ap-south":"sg","ap-southeast":"au","ap-northeast":"jp","gb-lon":"gb","de-fra":"de","fr-par":"fr","nl-ams":"nl","se-sto":"se","es-mad":"es","it-mil":"it","in-maa":"in","in-bom":"in","sg-sin":"sg","au-mel":"au","jp-osa":"jp","jp-tyo":"jp","id-cgk":"id","br-gru":"br","cl-scl":"cl","co-bog":"co","mx-qro":"mx"};function TD(s){const t=ED[s]||s.split("-")[0];return t.length===2?String.fromCodePoint(...[...t.toUpperCase()].map(n=>n.charCodeAt(0)+127397)):""}function AD({serverId:s,status:t}){const n=t!=="provisioning",a=t==="running",{data:o,refetch:l}=Le({queryKey:["/api/linode/servers",s,"pricing"],queryFn:async()=>{const N=await fetch(`/api/linode/servers/${s}/pricing`,{credentials:"include"});if(!N.ok)throw new Error("Failed");return N.json()},enabled:n,refetchInterval:a?3e4:6e4}),[d,u]=p.useState(t);p.useEffect(()=>{d!==t&&l(),u(t)},[t,d,l]);const[h,f]=p.useState(0),b=p.useRef(o);if(b.current=o,p.useEffect(()=>{if(!o)return;f(o.costWithMarkup);const N=setInterval(()=>{f(C=>{const k=(b.current?.hourlyWithMarkup??0)/3600;return+(C+k).toFixed(6)})},1e3);return()=>clearInterval(N)},[o]),!o)return n?null:e.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 bg-muted/40 rounded-lg text-xs","data-testid":`usage-counter-${s}`,children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-500 animate-pulse"}),e.jsx("span",{className:"text-muted-foreground",children:"Provisioning..."})]}),e.jsx("span",{className:"text-muted-foreground",children:"Billing starts once provisioned"})]});const v=a?"Live":t==="booting"?"Booting":t==="rebooting"?"Rebooting":t==="shutting_down"?"Stopping":t==="offline"?"Offline":t,y=a?"bg-green-500 animate-pulse":t==="booting"||t==="rebooting"?"bg-yellow-500 animate-pulse":"bg-gray-400";return e.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 bg-muted/40 rounded-lg text-xs","data-testid":`usage-counter-${s}`,children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${y}`}),e.jsx("span",{className:"text-muted-foreground",children:v})]}),e.jsxs("div",{className:"flex items-center gap-1 font-mono font-bold text-sm text-green-600 dark:text-green-400",children:[e.jsx(Fn,{className:"w-3.5 h-3.5"}),h.toFixed(4)]}),e.jsxs("span",{className:"text-muted-foreground",children:["accrued (",o.markupPercent,"% markup)"]}),e.jsxs("div",{className:"ml-auto flex items-center gap-3 text-muted-foreground flex-wrap justify-end",children:[e.jsxs("span",{children:["$",o.hourlyWithMarkup.toFixed(4),"/hr"]}),e.jsxs("span",{children:[o.hoursRunning.toFixed(1)," hrs"]}),o.monthlyWithMarkup>0&&e.jsxs("span",{className:"text-xs opacity-70",children:["(~$",o.monthlyWithMarkup,"/mo)"]}),o.backupMonthly>0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(wn,{className:"w-3 h-3"}),"Backup: $",o.backupWithMarkup.toFixed(2),"/mo"]})]})]})}function PD({serverId:s,currentLabel:t}){const{toast:n}=pt(),[a,o]=p.useState(!1),[l,d]=p.useState(t),u=Te({mutationFn:async f=>(await ke("PATCH",`/api/linode/servers/${s}`,{label:f})).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/linode/servers"]}),o(!1),n({title:"Server renamed",description:"Label updated on Linode."})},onError:f=>{n({title:"Rename failed",description:f.message,variant:"destructive"}),d(t)}}),h=()=>{if(u.isPending)return;const f=l.trim();if(!f||f===t){o(!1),d(t);return}u.mutate(f)};return a?e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Dn,{className:"w-3.5 h-3.5 text-violet-500 flex-shrink-0"}),e.jsx(De,{value:l,onChange:f=>d(f.target.value),onKeyDown:f=>{f.key==="Enter"&&h(),f.key==="Escape"&&(o(!1),d(t))},onBlur:h,className:"h-7 text-sm font-semibold w-48 px-1.5",autoFocus:!0,"data-testid":`input-rename-${s}`}),u.isPending&&e.jsx(Qe,{className:"w-3.5 h-3.5 animate-spin"})]}):e.jsxs("h3",{className:"font-semibold flex items-center gap-1.5 group cursor-pointer",onClick:()=>o(!0),"data-testid":`label-${s}`,children:[e.jsx(Dn,{className:"w-3.5 h-3.5 text-violet-500"}),t,e.jsx(ia,{className:"w-3 h-3 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity"})]})}function RD({updated:s,status:t}){const[n,a]=p.useState(Date.now());if(p.useEffect(()=>{if(t!=="running"||!s)return;const b=setInterval(()=>a(Date.now()),6e4);return()=>clearInterval(b)},[t,s]),t!=="running"||!s)return null;const o=new Date(s).getTime(),l=n-o;if(l<0)return null;const d=Math.floor(l/6e4),u=Math.floor(d/60),h=Math.floor(u/24);let f="";return h>0?f=`${h}d ${u%24}h`:u>0?f=`${u}h ${d%60}m`:f=`${d}m`,e.jsxs("span",{className:"flex items-center gap-1 text-xs text-muted-foreground","data-testid":"uptime-display",children:[e.jsx(Gt,{className:"w-3 h-3"}),"Up ",f]})}function ID({serverId:s,currentCustomerId:t,customers:n}){const{toast:a}=pt(),[o,l]=p.useState(!1),[d,u]=p.useState(t||"none"),h=Te({mutationFn:async f=>(await ke("PATCH",`/api/linode/servers/${s}`,{customerId:f==="none"?null:f})).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/linode/servers"]}),l(!1),a({title:"Customer updated"})},onError:f=>{a({title:"Failed to assign customer",description:f.message,variant:"destructive"})}});return t?null:e.jsxs(e.Fragment,{children:[e.jsxs($,{size:"sm",variant:"outline",onClick:()=>l(!0),className:"gap-1.5","data-testid":`button-assign-customer-${s}`,children:[e.jsx(Cy,{className:"w-3.5 h-3.5"}),"Assign Customer"]}),e.jsx(Ct,{open:o,onOpenChange:l,children:e.jsxs(vt,{className:"max-w-sm",children:[e.jsx(yt,{children:e.jsxs(bt,{className:"flex items-center gap-2",children:[e.jsx(Cy,{className:"w-5 h-5 text-violet-500"}),"Assign Customer"]})}),e.jsxs("div",{className:"space-y-4 mt-2",children:[e.jsxs(Dt,{value:d,onValueChange:u,children:[e.jsx(It,{"data-testid":"select-assign-customer",children:e.jsx($t,{placeholder:"Select customer"})}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"none",children:"No customer"}),n.map(f=>e.jsx(Ie,{value:f.id,children:f.name},f.id))]})]}),e.jsxs($,{className:"w-full",onClick:()=>h.mutate(d),disabled:h.isPending||d==="none","data-testid":"button-confirm-assign",children:[h.isPending?e.jsx(Qe,{className:"w-4 h-4 animate-spin mr-2"}):null,"Assign"]})]})]})})]})}function OD({serverId:s,planType:t}){const{toast:n}=pt(),{data:a,isLoading:o}=Le({queryKey:["/api/linode/servers",s,"backups"],queryFn:async()=>{const f=await fetch(`/api/linode/servers/${s}/backups`,{credentials:"include"});if(!f.ok)throw new Error("Failed");return f.json()}}),{data:l}=Le({queryKey:["/api/linode/types",t],queryFn:async()=>{const f=await fetch("/api/linode/types",{credentials:"include"});return f.ok?(await f.json()).find(v=>v.id===t)||{}:{}}}),d=Te({mutationFn:async()=>(await ke("POST",`/api/linode/servers/${s}/backups/enable`)).json(),onSuccess:f=>{ve.invalidateQueries({queryKey:["/api/linode/servers",s,"backups"]});const b=(f.backupPriceCents/100).toFixed(2),v=(f.totalCents/100).toFixed(2);n({title:"Backups enabled!",description:`Linode: $${b}/mo + 50% markup = $${v}/mo`})},onError:f=>{n({title:"Failed to enable backups",description:f.message,variant:"destructive"})}}),u=Te({mutationFn:async()=>{await ke("POST",`/api/linode/servers/${s}/backups/cancel`)},onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/linode/servers",s,"backups"]}),n({title:"Backups disabled"})},onError:f=>{n({title:"Failed to cancel backups",description:f.message,variant:"destructive"})}});return o?null:a?.enabled??!1?e.jsxs($,{size:"sm",variant:"outline",onClick:()=>{confirm("Cancel backups for this server? Existing backups will be deleted.")&&u.mutate()},disabled:u.isPending,className:"gap-1.5 text-green-600 border-green-200 hover:bg-green-50","data-testid":`button-backups-enabled-${s}`,children:[u.isPending?e.jsx(Qe,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(wn,{className:"w-3.5 h-3.5"}),"Backups On"]}):e.jsxs($,{size:"sm",variant:"outline",onClick:()=>{confirm("Enable automatic backups for this server? Pricing includes a 50% markup on Linode's backup cost.")&&d.mutate()},disabled:d.isPending,className:"gap-1.5","data-testid":`button-enable-backups-${s}`,children:[d.isPending?e.jsx(Qe,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(B3,{className:"w-3.5 h-3.5"}),"Backups"]})}function _D({ip:s}){const[t,n]=p.useState(!1),a=`ssh root@${s}`,o=()=>{navigator.clipboard.writeText(a),n(!0),setTimeout(()=>n(!1),2e3)};return e.jsxs("div",{className:"flex items-center gap-2 mb-3 px-2.5 py-2 bg-muted/50 rounded-lg","data-testid":`ssh-command-${s}`,children:[e.jsx(kl,{className:"w-3.5 h-3.5 text-muted-foreground flex-shrink-0"}),e.jsx("code",{className:"text-xs font-mono flex-1 select-all",children:a}),e.jsx("button",{onClick:o,className:"p-1 rounded hover:bg-muted transition-colors",title:"Copy SSH command","data-testid":`button-copy-ssh-${s}`,children:t?e.jsx(Kt,{className:"w-3.5 h-3.5 text-green-500"}):e.jsx(Ps,{className:"w-3.5 h-3.5 text-muted-foreground"})})]})}function LD({serverId:s,customerId:t,serverSetupComplete:n}){const[a,o]=p.useState(!1),[l,d]=p.useState(null),[u,h]=p.useState(!1),f=async()=>{if(l){navigator.clipboard.writeText(l),o(!0),setTimeout(()=>o(!1),2e3);return}h(!0);try{const b=await fetch(`/api/linode/servers/${s}/setup-command`);if(!b.ok){const y=await b.json();throw new Error(y.message||"Failed to get setup command")}const v=await b.json();d(v.setupCommand),navigator.clipboard.writeText(v.setupCommand),o(!0),setTimeout(()=>o(!1),2e3)}catch(b){alert(b.message||"Could not get setup command. Make sure this server is assigned to a customer.")}finally{h(!1)}};return t?n?e.jsx("div",{className:"mt-2",children:e.jsxs("div",{className:"flex items-center gap-2 px-2.5 py-2 bg-gradient-to-r from-emerald-50 to-teal-50 dark:from-emerald-950/20 dark:to-teal-950/20 border border-emerald-200 dark:border-emerald-800 rounded-lg","data-testid":`setup-complete-${s}`,children:[e.jsx(Hc,{className:"w-3.5 h-3.5 text-emerald-600 dark:text-emerald-400 flex-shrink-0"}),e.jsx("span",{className:"text-xs font-medium text-emerald-700 dark:text-emerald-300",children:"Server secured & setup complete"})]})}):e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2 px-2.5 py-1.5 bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-950/20 dark:to-orange-950/20 border border-amber-200 dark:border-amber-800 rounded-lg mb-2","data-testid":`auto-setup-status-${s}`,children:[e.jsx(Qe,{className:"w-3.5 h-3.5 text-amber-600 dark:text-amber-400 animate-spin flex-shrink-0"}),e.jsx("span",{className:"text-xs font-medium text-amber-700 dark:text-amber-300",children:"Auto-setup in progress  server will secure itself on boot"})]}),l?e.jsxs("div",{className:"flex items-center gap-2 px-2.5 py-2 bg-gradient-to-r from-emerald-50 to-teal-50 dark:from-emerald-950/20 dark:to-teal-950/20 border border-emerald-200 dark:border-emerald-800 rounded-lg","data-testid":`setup-command-${s}`,children:[e.jsx(Ma,{className:"w-3.5 h-3.5 text-emerald-600 dark:text-emerald-400 flex-shrink-0"}),e.jsx("code",{className:"text-xs font-mono flex-1 select-all text-emerald-700 dark:text-emerald-300 truncate",children:l}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(l),o(!0),setTimeout(()=>o(!1),2e3)},className:"p-1 rounded hover:bg-emerald-100 dark:hover:bg-emerald-900/30 transition-colors",title:"Copy setup command","data-testid":`button-copy-setup-${s}`,children:a?e.jsx(Kt,{className:"w-3.5 h-3.5 text-emerald-500"}):e.jsx(Ps,{className:"w-3.5 h-3.5 text-emerald-600 dark:text-emerald-400"})})]}):e.jsxs($,{size:"sm",variant:"outline",className:"gap-1.5 text-xs text-muted-foreground",onClick:f,disabled:u,"data-testid":`button-get-setup-${s}`,children:[u?e.jsx(Qe,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(Ma,{className:"w-3.5 h-3.5"}),"Copy Manual Setup Command (fallback)"]})]}):null}function MD(){zn("Server Provisioning");const{toast:s}=pt(),[t,n]=p.useState(!1),[a,o]=p.useState(""),[l,d]=p.useState("us-central"),[u,h]=p.useState(""),[f,b]=p.useState(""),[v,y]=p.useState("all"),[N,C]=p.useState(""),[g,k]=p.useState(!1),[A,E]=p.useState(""),[S,R]=p.useState(null),[H,re]=p.useState(null),{data:K=[],isLoading:ee}=Le({queryKey:["/api/linode/servers"],refetchInterval:B=>B.state.data?.some(M=>M.status==="provisioning"||M.status==="booting"||M.status==="rebooting")?5e3:3e4}),{data:me=[],isLoading:pe}=Le({queryKey:["/api/linode/types"],enabled:t}),{data:L=[]}=Le({queryKey:["/api/linode/regions"],enabled:t}),{data:X=[]}=Le({queryKey:["/api/customers"]}),z=Te({mutationFn:async B=>(await ke("POST","/api/linode/provision",B)).json(),onSuccess:B=>{ve.invalidateQueries({queryKey:["/api/linode/servers"]}),n(!1),o(""),h(""),b(""),C(""),E(""),s({title:"Server provisioned!",description:`${B.label} is being created.${B.rootPassword?" Root password has been set.":""}`})},onError:B=>{s({title:"Provisioning failed",description:B.message,variant:"destructive"})}}),V=Te({mutationFn:async B=>{await ke("DELETE",`/api/linode/servers/${B}`)},onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/linode/servers"]}),s({title:"Server deleted"})},onError:()=>{s({title:"Failed to delete server",variant:"destructive"})}}),se=Te({mutationFn:async B=>(await ke("GET",`/api/linode/servers/${B}/stats`)).json(),onError:B=>{const U=B.message||"";U.includes("Linode")||U.includes("stats")?s({title:"Stats not available yet",description:"Server usage data takes a few hours to become available after provisioning."}):s({title:"Failed to fetch stats",description:U,variant:"destructive"})}}),I=Te({mutationFn:async B=>(await ke("POST",`/api/linode/servers/${B}/reboot`),B),onSuccess:B=>{ve.invalidateQueries({queryKey:["/api/linode/servers"]}),ve.invalidateQueries({queryKey:["/api/linode/servers",B,"pricing"]}),s({title:"Server rebooting",description:"The server is restarting now."})},onError:B=>{s({title:"Reboot failed",description:B.message,variant:"destructive"})}});Te({mutationFn:async B=>(await ke("POST",`/api/linode/servers/${B}/backups/enable`)).json(),onSuccess:B=>{ve.invalidateQueries({queryKey:["/api/linode/servers"]});const U=(B.backupPriceCents/100).toFixed(2),M=(B.totalCents/100).toFixed(2);s({title:"Backups enabled!",description:`Linode: $${U}/mo + 50% markup = $${M}/mo billed to customer`})},onError:B=>{s({title:"Failed to enable backups",description:B.message,variant:"destructive"})}}),Te({mutationFn:async B=>{await ke("POST",`/api/linode/servers/${B}/backups/cancel`)},onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/linode/servers"]}),s({title:"Backups disabled"})},onError:B=>{s({title:"Failed to cancel backups",description:B.message,variant:"destructive"})}});const O=Te({mutationFn:async B=>(await ke("POST",`/api/linode/servers/${B}/invoice`)).json(),onSuccess:(B,U)=>{re(B.html),ve.invalidateQueries({queryKey:["/api/linode/servers",U,"pricing"]}),ve.invalidateQueries({queryKey:["/api/linode/servers"]}),B.emailSent?s({title:"Invoice sent!",description:`Emailed to ${B.customerEmail}  $${(B.totalCents/100).toFixed(2)} total`}):s({title:"Invoice generated",description:`$${(B.totalCents/100).toFixed(2)}  No customer email linked, preview only.`})},onError:B=>{s({title:"Invoice failed",description:B.message||"Could not generate invoice",variant:"destructive"})}}),T=v==="all"?me:me.filter(B=>v==="shared"?B.typeClass==="standard"||B.typeClass==="nanode":B.typeClass==="dedicated"),Y=me.find(B=>B.id===a),Q=()=>{!a||!u||z.mutate({typeId:a,region:l,label:u,customerId:f&&f!=="none"?f:void 0,rootPassword:N||void 0,authorizedKeys:A||void 0})},F=async B=>{R(B),se.mutate(B)},te=B=>{const U={running:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",provisioning:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400",booting:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",rebooting:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400",offline:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400",shutting_down:"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400"};return e.jsx(je,{className:U[B]||"bg-gray-100 text-gray-700","data-testid":`status-${B}`,children:B})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight","data-testid":"text-page-title",children:"Server Provisioning"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Provision and manage Linode servers for your clients"})]}),e.jsxs($,{onClick:()=>n(!0),className:"gap-2 bg-gradient-to-r from-violet-600 to-blue-600 text-white","data-testid":"button-new-server",children:[e.jsx(Qt,{className:"w-4 h-4"}),"New Server"]})]})}),ee?e.jsx("div",{className:"space-y-3",children:[1,2].map(B=>e.jsx(Ce,{className:"h-32 rounded-xl"},B))}):K.length===0?e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(Dn,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No servers yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Provision your first Linode server for a client"}),e.jsxs($,{onClick:()=>n(!0),className:"gap-2","data-testid":"button-first-server",children:[e.jsx(Qt,{className:"w-4 h-4"})," Provision Server"]})]}):e.jsx("div",{className:"space-y-3",children:K.map(B=>{const U=X.find(M=>M.id===B.customerId);return e.jsxs(ce,{className:"p-4","data-testid":`card-server-${B.id}`,children:[e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-[200px]",children:[e.jsx("span",{className:"text-xl",children:TD(B.region)}),e.jsxs("div",{children:[e.jsx(PD,{serverId:B.id,currentLabel:B.label}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx("span",{children:B.region}),U&&e.jsxs("span",{children:[" ",U.name]})]})]})]}),te(B.status),e.jsx(RD,{updated:B.updated,status:B.status}),B.ipv4&&e.jsxs("div",{className:"flex items-center gap-1.5 text-muted-foreground",children:[e.jsx(jn,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"font-mono text-xs",children:B.ipv4})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-3 text-xs text-muted-foreground",children:[B.vcpus&&e.jsxs("span",{children:[B.vcpus," vCPU"]}),B.memory&&e.jsxs("span",{children:[Math.round(B.memory/1024)," GB RAM"]}),B.disk&&e.jsxs("span",{children:[Math.round(B.disk/1024)," GB Disk"]})]})]}),e.jsx("div",{className:"mt-3",children:e.jsx(AD,{serverId:B.id,status:B.status})}),B.ipv4&&e.jsx("div",{className:"mt-2",children:e.jsx(_D,{ip:B.ipv4})}),e.jsx(LD,{serverId:B.id,customerId:B.customerId,serverSetupComplete:B.serverSetupComplete}),e.jsxs("div",{className:"flex gap-2 pt-3 mt-1 border-t flex-wrap",children:[e.jsxs($,{size:"sm",variant:"outline",onClick:()=>{confirm("Reboot this server? It will be briefly unavailable.")&&I.mutate(B.id)},disabled:I.isPending||B.status==="rebooting",className:"gap-1.5","data-testid":`button-reboot-${B.id}`,children:[I.isPending?e.jsx(Qe,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(vm,{className:"w-3.5 h-3.5"}),"Reboot"]}),e.jsx(ID,{serverId:B.id,currentCustomerId:B.customerId,customers:X}),e.jsx(OD,{serverId:B.id,planType:B.planType}),e.jsxs($,{size:"sm",variant:"outline",onClick:()=>F(B.id),disabled:se.isPending&&S===B.id,className:"gap-1.5","data-testid":`button-stats-${B.id}`,children:[se.isPending&&S===B.id?e.jsx(Qe,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(jl,{className:"w-3.5 h-3.5"}),"Stats"]}),e.jsxs($,{size:"sm",variant:"outline",onClick:()=>O.mutate(B.id),disabled:O.isPending,className:"gap-1.5","data-testid":`button-invoice-${B.id}`,children:[O.isPending?e.jsx(Qe,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(Vt,{className:"w-3.5 h-3.5"}),"Invoice"]}),e.jsx($,{size:"sm",variant:"outline",onClick:()=>{ve.invalidateQueries({queryKey:["/api/linode/servers"]})},className:"gap-1.5","data-testid":`button-refresh-${B.id}`,children:e.jsx(Ol,{className:"w-3.5 h-3.5"})}),e.jsx($,{size:"sm",variant:"ghost",onClick:()=>{confirm("Are you sure? This will permanently delete this server from Linode.")&&V.mutate(B.id)},className:"gap-1.5 text-red-500 ml-auto","data-testid":`button-delete-${B.id}`,children:e.jsx(ps,{className:"w-3.5 h-3.5"})})]})]},B.id)})}),e.jsx(Ct,{open:t,onOpenChange:n,children:e.jsxs(vt,{className:"max-w-lg",children:[e.jsx(yt,{children:e.jsxs(bt,{className:"flex items-center gap-2",children:[e.jsx(Dn,{className:"w-5 h-5 text-violet-500"}),"Provision New Server"]})}),e.jsxs("div",{className:"space-y-4 mt-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1.5 block",children:"Server Label"}),e.jsx(De,{placeholder:"e.g., client-website-prod",value:u,onChange:B=>h(B.target.value),"data-testid":"input-server-label"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1.5 block",children:"Assign to Customer (optional)"}),e.jsxs(Dt,{value:f,onValueChange:b,children:[e.jsx(It,{"data-testid":"select-customer",children:e.jsx($t,{placeholder:"No customer"})}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"none",children:"No customer"}),X.map(B=>e.jsx(Ie,{value:B.id,children:B.name},B.id))]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium mb-1.5 block flex items-center gap-1.5",children:[e.jsx(Np,{className:"w-3.5 h-3.5"}),"Root Password ",e.jsx("span",{className:"text-xs text-muted-foreground font-normal",children:"(optional)"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(De,{type:g?"text":"password",placeholder:"Leave blank to auto-generate",value:N,onChange:B=>C(B.target.value),"data-testid":"input-root-password"}),e.jsx("button",{type:"button",className:"absolute right-2.5 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",onClick:()=>k(!g),tabIndex:-1,children:g?e.jsx(gm,{className:"w-4 h-4"}):e.jsx(jo,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"If left blank, a secure password will be generated automatically."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium mb-1.5 block flex items-center gap-1.5",children:[e.jsx(P3,{className:"w-3.5 h-3.5"}),"SSH Public Key ",e.jsx("span",{className:"text-xs text-muted-foreground font-normal",children:"(optional)"})]}),e.jsx(Rs,{placeholder:"ssh-rsa AAAA... or ssh-ed25519 AAAA...",value:A,onChange:B=>E(B.target.value),rows:3,className:"font-mono text-xs","data-testid":"input-ssh-key"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Paste your public SSH key to enable key-based login from the start."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1.5 block",children:"Region"}),e.jsxs(Dt,{value:l,onValueChange:d,children:[e.jsx(It,{"data-testid":"select-region",children:e.jsx($t,{placeholder:"Select region"})}),e.jsx(Ot,{children:L.map(B=>e.jsxs(Ie,{value:B.id,children:[B.label," (",B.country.toUpperCase(),")"]},B.id))})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("label",{className:"text-sm font-medium",children:"Server Plan"}),e.jsx("div",{className:"flex gap-1",children:["all","shared","dedicated"].map(B=>e.jsx($,{size:"sm",variant:v===B?"default":"outline",onClick:()=>y(B),className:"text-xs h-7 px-2.5","data-testid":`button-filter-${B}`,children:B.charAt(0).toUpperCase()+B.slice(1)},B))})]}),pe?e.jsx(Ce,{className:"h-32 rounded-lg"}):e.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2 border rounded-lg p-2",children:T.map(B=>e.jsxs("button",{onClick:()=>o(B.id),className:`w-full text-left p-3 rounded-lg border transition-colors ${a===B.id?"border-violet-500 bg-violet-50 dark:bg-violet-500/10":"border-transparent hover:bg-muted/50"}`,"data-testid":`plan-${B.id}`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-sm",children:B.label}),e.jsxs("span",{className:"text-sm font-semibold text-violet-600 dark:text-violet-400",children:["$",B.monthlyPrice,"/mo"]})]}),e.jsxs("div",{className:"flex gap-3 mt-1 text-xs text-muted-foreground",children:[e.jsxs("span",{children:[B.vcpus," vCPU"]}),e.jsxs("span",{children:[Math.round(B.memory/1024)," GB RAM"]}),e.jsxs("span",{children:[Math.round(B.disk/1024)," GB Disk"]}),e.jsxs("span",{children:[B.transfer/1e3," TB Transfer"]})]})]},B.id))}),Y&&e.jsxs("div",{className:"mt-3 p-3 bg-violet-50 dark:bg-violet-500/10 rounded-lg text-sm",children:[e.jsxs("div",{className:"font-medium text-violet-700 dark:text-violet-300",children:["Selected: ",Y.label]}),e.jsxs("div",{className:"text-muted-foreground mt-1",children:["$",Y.monthlyPrice,"/mo  ",Y.vcpus," vCPU  ",Math.round(Y.memory/1024)," GB RAM  Ubuntu 24.04"]})]})]}),e.jsxs($,{onClick:Q,disabled:!a||!u||z.isPending,className:"w-full gap-2 bg-gradient-to-r from-violet-600 to-blue-600 text-white","data-testid":"button-provision",children:[z.isPending?e.jsx(Qe,{className:"w-4 h-4 animate-spin"}):e.jsx(Dn,{className:"w-4 h-4"}),z.isPending?"Provisioning...":"Provision Server"]})]})]})}),e.jsx(Ct,{open:!!S&&!!se.data,onOpenChange:B=>{B||R(null)},children:e.jsxs(vt,{className:"max-w-md",children:[e.jsx(yt,{children:e.jsxs(bt,{className:"flex items-center gap-2",children:[e.jsx(jl,{className:"w-5 h-5 text-violet-500"}),"Server Statistics"]})}),se.data&&e.jsxs("div",{className:"space-y-4 mt-2",children:[se.data.message&&e.jsx("div",{className:"p-3 bg-amber-50 dark:bg-amber-900/20 text-amber-700 dark:text-amber-400 rounded-lg text-sm","data-testid":"stats-message",children:se.data.message}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs(ce,{className:"p-3 text-center",children:[e.jsx(jp,{className:"w-5 h-5 mx-auto text-blue-500 mb-1"}),e.jsxs("div",{className:"text-lg font-bold",children:[se.data.cpu,"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"CPU Usage"})]}),e.jsxs(ce,{className:"p-3 text-center",children:[e.jsx(by,{className:"w-5 h-5 mx-auto text-green-500 mb-1"}),e.jsx("div",{className:"text-lg font-bold",children:se.data.networkInGB}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"GB In"})]}),e.jsxs(ce,{className:"p-3 text-center",children:[e.jsx(by,{className:"w-5 h-5 mx-auto text-orange-500 mb-1"}),e.jsx("div",{className:"text-lg font-bold",children:se.data.networkOutGB}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"GB Out"})]})]}),se.data.cpuTimeline?.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"CPU Timeline (last 24 points)"}),e.jsx("div",{className:"flex items-end gap-0.5 h-16 bg-muted/30 rounded-lg p-1",children:se.data.cpuTimeline.map((B,U)=>e.jsx("div",{className:"flex-1 bg-violet-500 rounded-sm min-h-[2px]",style:{height:`${Math.max(2,parseFloat(B.value))}%`},title:`${B.value}%`},U))})]})]})]})}),e.jsx(Ct,{open:!!H,onOpenChange:B=>{B||re(null)},children:e.jsxs(vt,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[e.jsx(yt,{children:e.jsxs(bt,{className:"flex items-center gap-2",children:[e.jsx(Vt,{className:"w-5 h-5 text-violet-500"}),"Server Invoice"]})}),H&&e.jsx("div",{className:"mt-2",dangerouslySetInnerHTML:{__html:H},"data-testid":"invoice-preview"})]})})]})}var cp="rovingFocusGroup.onEntryFocus",DD={bubbles:!1,cancelable:!0},Km="RovingFocusGroup",[ox,m5,$D]=bx(Km),[qD,h5]=za(Km,[$D]),[FD,zD]=qD(Km),f5=p.forwardRef((s,t)=>e.jsx(ox.Provider,{scope:s.__scopeRovingFocusGroup,children:e.jsx(ox.Slot,{scope:s.__scopeRovingFocusGroup,children:e.jsx(UD,{...s,ref:t})})}));f5.displayName=Km;var UD=p.forwardRef((s,t)=>{const{__scopeRovingFocusGroup:n,orientation:a,loop:o=!1,dir:l,currentTabStopId:d,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:h,onEntryFocus:f,preventScrollOnEntryFocus:b=!1,...v}=s,y=p.useRef(null),N=Yt(t,y),C=Yx(l),[g=null,k]=Ni({prop:d,defaultProp:u,onChange:h}),[A,E]=p.useState(!1),S=kn(f),R=m5(n),H=p.useRef(!1),[re,K]=p.useState(0);return p.useEffect(()=>{const ee=y.current;if(ee)return ee.addEventListener(cp,S),()=>ee.removeEventListener(cp,S)},[S]),e.jsx(FD,{scope:n,orientation:a,dir:C,loop:o,currentTabStopId:g,onItemFocus:p.useCallback(ee=>k(ee),[k]),onItemShiftTab:p.useCallback(()=>E(!0),[]),onFocusableItemAdd:p.useCallback(()=>K(ee=>ee+1),[]),onFocusableItemRemove:p.useCallback(()=>K(ee=>ee-1),[]),children:e.jsx(mt.div,{tabIndex:A||re===0?-1:0,"data-orientation":a,...v,ref:N,style:{outline:"none",...s.style},onMouseDown:it(s.onMouseDown,()=>{H.current=!0}),onFocus:it(s.onFocus,ee=>{const me=!H.current;if(ee.target===ee.currentTarget&&me&&!A){const pe=new CustomEvent(cp,DD);if(ee.currentTarget.dispatchEvent(pe),!pe.defaultPrevented){const L=R().filter(I=>I.focusable),X=L.find(I=>I.active),z=L.find(I=>I.id===g),se=[X,z,...L].filter(Boolean).map(I=>I.ref.current);g5(se,b)}}H.current=!1}),onBlur:it(s.onBlur,()=>E(!1))})})}),p5="RovingFocusGroupItem",x5=p.forwardRef((s,t)=>{const{__scopeRovingFocusGroup:n,focusable:a=!0,active:o=!1,tabStopId:l,...d}=s,u=Oa(),h=l||u,f=zD(p5,n),b=f.currentTabStopId===h,v=m5(n),{onFocusableItemAdd:y,onFocusableItemRemove:N}=f;return p.useEffect(()=>{if(a)return y(),()=>N()},[a,y,N]),e.jsx(ox.ItemSlot,{scope:n,id:h,focusable:a,active:o,children:e.jsx(mt.span,{tabIndex:b?0:-1,"data-orientation":f.orientation,...d,ref:t,onMouseDown:it(s.onMouseDown,C=>{a?f.onItemFocus(h):C.preventDefault()}),onFocus:it(s.onFocus,()=>f.onItemFocus(h)),onKeyDown:it(s.onKeyDown,C=>{if(C.key==="Tab"&&C.shiftKey){f.onItemShiftTab();return}if(C.target!==C.currentTarget)return;const g=KD(C,f.orientation,f.dir);if(g!==void 0){if(C.metaKey||C.ctrlKey||C.altKey||C.shiftKey)return;C.preventDefault();let A=v().filter(E=>E.focusable).map(E=>E.ref.current);if(g==="last")A.reverse();else if(g==="prev"||g==="next"){g==="prev"&&A.reverse();const E=A.indexOf(C.currentTarget);A=f.loop?WD(A,E+1):A.slice(E+1)}setTimeout(()=>g5(A))}})})})});x5.displayName=p5;var BD={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function HD(s,t){return t!=="rtl"?s:s==="ArrowLeft"?"ArrowRight":s==="ArrowRight"?"ArrowLeft":s}function KD(s,t,n){const a=HD(s.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(a))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(a)))return BD[a]}function g5(s,t=!1){const n=document.activeElement;for(const a of s)if(a===n||(a.focus({preventScroll:t}),document.activeElement!==n))return}function WD(s,t){return s.map((n,a)=>s[(t+a)%s.length])}var VD=f5,GD=x5,yg="Tabs",[QD]=za(yg,[h5]),v5=h5(),[YD,bg]=QD(yg),y5=p.forwardRef((s,t)=>{const{__scopeTabs:n,value:a,onValueChange:o,defaultValue:l,orientation:d="horizontal",dir:u,activationMode:h="automatic",...f}=s,b=Yx(u),[v,y]=Ni({prop:a,onChange:o,defaultProp:l});return e.jsx(YD,{scope:n,baseId:Oa(),value:v,onValueChange:y,orientation:d,dir:b,activationMode:h,children:e.jsx(mt.div,{dir:b,"data-orientation":d,...f,ref:t})})});y5.displayName=yg;var b5="TabsList",w5=p.forwardRef((s,t)=>{const{__scopeTabs:n,loop:a=!0,...o}=s,l=bg(b5,n),d=v5(n);return e.jsx(VD,{asChild:!0,...d,orientation:l.orientation,dir:l.dir,loop:a,children:e.jsx(mt.div,{role:"tablist","aria-orientation":l.orientation,...o,ref:t})})});w5.displayName=b5;var j5="TabsTrigger",N5=p.forwardRef((s,t)=>{const{__scopeTabs:n,value:a,disabled:o=!1,...l}=s,d=bg(j5,n),u=v5(n),h=S5(d.baseId,a),f=E5(d.baseId,a),b=a===d.value;return e.jsx(GD,{asChild:!0,...u,focusable:!o,active:b,children:e.jsx(mt.button,{type:"button",role:"tab","aria-selected":b,"aria-controls":f,"data-state":b?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:h,...l,ref:t,onMouseDown:it(s.onMouseDown,v=>{!o&&v.button===0&&v.ctrlKey===!1?d.onValueChange(a):v.preventDefault()}),onKeyDown:it(s.onKeyDown,v=>{[" ","Enter"].includes(v.key)&&d.onValueChange(a)}),onFocus:it(s.onFocus,()=>{const v=d.activationMode!=="manual";!b&&!o&&v&&d.onValueChange(a)})})})});N5.displayName=j5;var k5="TabsContent",C5=p.forwardRef((s,t)=>{const{__scopeTabs:n,value:a,forceMount:o,children:l,...d}=s,u=bg(k5,n),h=S5(u.baseId,a),f=E5(u.baseId,a),b=a===u.value,v=p.useRef(b);return p.useEffect(()=>{const y=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(y)},[]),e.jsx(bo,{present:o||b,children:({present:y})=>e.jsx(mt.div,{"data-state":b?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":h,hidden:!y,id:f,tabIndex:0,...d,ref:t,style:{...s.style,animationDuration:v.current?"0s":void 0},children:y&&l})})});C5.displayName=k5;function S5(s,t){return`${s}-trigger-${t}`}function E5(s,t){return`${s}-content-${t}`}var XD=y5,T5=w5,A5=N5,P5=C5;const ZD=XD,R5=p.forwardRef(({className:s,...t},n)=>e.jsx(T5,{ref:n,className:Ze("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...t}));R5.displayName=T5.displayName;const qu=p.forwardRef(({className:s,...t},n)=>e.jsx(A5,{ref:n,className:Ze("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...t}));qu.displayName=A5.displayName;const Fu=p.forwardRef(({className:s,...t},n)=>e.jsx(P5,{ref:n,className:Ze("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...t}));Fu.displayName=P5.displayName;const I5={Folder:Hu,Rocket:Ma,CreditCard:yi,Settings:Gw,HelpCircle:Dw,GraduationCap:C3,Wrench:sj,Tag:Nl,Heart:T3,Star:Ia,Zap:Jn,Shield:wn,Globe:jn,Code:b3,Lightbulb:R3,MessageCircle:L3,Users:Ei,Clock:Gt,CheckCircle:yn,AlertTriangle:qn,Info:Bw,Database:Fw,Layout:Uc,Smartphone:Qw,Monitor:Ww,Palette:Ex,BookOpen:ki,FileText:Vt,Search:sn},JD=Object.keys(I5),lx=[{name:"gray",bg:"bg-gray-100 dark:bg-gray-800",text:"text-gray-700 dark:text-gray-300",border:"border-gray-300 dark:border-gray-600"},{name:"blue",bg:"bg-blue-100 dark:bg-blue-900/30",text:"text-blue-700 dark:text-blue-300",border:"border-blue-300 dark:border-blue-600"},{name:"green",bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-700 dark:text-green-300",border:"border-green-300 dark:border-green-600"},{name:"red",bg:"bg-red-100 dark:bg-red-900/30",text:"text-red-700 dark:text-red-300",border:"border-red-300 dark:border-red-600"},{name:"purple",bg:"bg-purple-100 dark:bg-purple-900/30",text:"text-purple-700 dark:text-purple-300",border:"border-purple-300 dark:border-purple-600"},{name:"yellow",bg:"bg-yellow-100 dark:bg-yellow-900/30",text:"text-yellow-700 dark:text-yellow-300",border:"border-yellow-300 dark:border-yellow-600"},{name:"pink",bg:"bg-pink-100 dark:bg-pink-900/30",text:"text-pink-700 dark:text-pink-300",border:"border-pink-300 dark:border-pink-600"},{name:"indigo",bg:"bg-indigo-100 dark:bg-indigo-900/30",text:"text-indigo-700 dark:text-indigo-300",border:"border-indigo-300 dark:border-indigo-600"},{name:"teal",bg:"bg-teal-100 dark:bg-teal-900/30",text:"text-teal-700 dark:text-teal-300",border:"border-teal-300 dark:border-teal-600"},{name:"orange",bg:"bg-orange-100 dark:bg-orange-900/30",text:"text-orange-700 dark:text-orange-300",border:"border-orange-300 dark:border-orange-600"}];function Tu(s){return lx.find(t=>t.name===s)||lx[0]}function Mr({name:s,className:t}){const n=I5[s];return n?e.jsx(n,{className:t}):e.jsx(Hu,{className:t})}function M1({value:s,onChange:t}){const[n,a]=p.useState(!1);return e.jsxs("div",{className:"relative",children:[e.jsxs($,{type:"button",variant:"outline",size:"sm",className:"gap-2",onClick:()=>a(!n),"data-testid":"button-icon-picker",children:[e.jsx(Mr,{name:s,className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:s})]}),n&&e.jsx("div",{className:"absolute z-50 top-full mt-1 left-0 bg-background border rounded-lg shadow-lg p-2 grid grid-cols-6 gap-1 w-[240px]","data-testid":"icon-picker-grid",children:JD.map(o=>e.jsx("button",{type:"button",className:`p-2 rounded hover:bg-accent flex items-center justify-center ${s===o?"bg-accent ring-2 ring-primary":""}`,onClick:()=>{t(o),a(!1)},title:o,"data-testid":`icon-option-${o}`,children:e.jsx(Mr,{name:o,className:"w-4 h-4"})},o))})]})}const e$={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{color:[]},{background:[]}],["blockquote","code-block"],["link","image"],["clean"]]};function D1(s){const t=document.createElement("div");return t.innerHTML=s,t.textContent||t.innerText||""}function t$(){const{toast:s}=pt(),[t,n]=p.useState("articles"),[a,o]=p.useState(!1),[l,d]=p.useState(null),[u,h]=p.useState(null),[f,b]=p.useState("all"),[v,y]=p.useState("all"),[N,C]=p.useState(""),[g,k]=p.useState(""),[A,E]=p.useState(""),[S,R]=p.useState("General"),[H,re]=p.useState(0),[K,ee]=p.useState([]),[me,pe]=p.useState(!1),[L,X]=p.useState(null),[z,V]=p.useState(""),[se,I]=p.useState("Folder"),[O,T]=p.useState(0),[Y,Q]=p.useState(null),[F,te]=p.useState(!1),[B,U]=p.useState(null),[M,q]=p.useState(""),[oe,he]=p.useState("Tag"),[Se,be]=p.useState("gray"),[Pe,Me]=p.useState(null),{data:Fe=[],isLoading:Je}=Le({queryKey:["/api/knowledge-base"]}),{data:lt=[]}=Le({queryKey:["/api/knowledge-base/categories/list"]}),{data:Bt=[]}=Le({queryKey:["/api/knowledge-base/tags/list"]}),Xt=p.useMemo(()=>lt.map(ie=>ie.name),[lt]),us=Te({mutationFn:async ie=>(await ke("POST","/api/knowledge-base",ie)).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/knowledge-base"]}),s({title:"Article created"}),Zt()},onError:()=>s({title:"Failed to create article",variant:"destructive"})}),ws=Te({mutationFn:async({id:ie,...We})=>(await ke("PATCH",`/api/knowledge-base/${ie}`,We)).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/knowledge-base"]}),s({title:"Article updated"}),Zt()},onError:()=>s({title:"Failed to update article",variant:"destructive"})}),os=Te({mutationFn:async ie=>{await ke("DELETE",`/api/knowledge-base/${ie}`)},onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/knowledge-base"]}),s({title:"Article deleted"}),h(null)}}),ms=Te({mutationFn:async ie=>(await ke("POST","/api/knowledge-base/categories",ie)).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/knowledge-base/categories/list"]}),s({title:"Category created"}),pe(!1)},onError:()=>s({title:"Failed to create category",variant:"destructive"})}),Et=Te({mutationFn:async({id:ie,...We})=>(await ke("PATCH",`/api/knowledge-base/categories/${ie}`,We)).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/knowledge-base/categories/list"]}),s({title:"Category updated"}),pe(!1)},onError:()=>s({title:"Failed to update category",variant:"destructive"})}),_t=Te({mutationFn:async ie=>{await ke("DELETE",`/api/knowledge-base/categories/${ie}`)},onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/knowledge-base/categories/list"]}),s({title:"Category deleted"}),Q(null)}}),wt=Te({mutationFn:async ie=>(await ke("POST","/api/knowledge-base/tags",ie)).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/knowledge-base/tags/list"]}),s({title:"Tag created"}),te(!1)},onError:()=>s({title:"Failed to create tag",variant:"destructive"})}),de=Te({mutationFn:async({id:ie,...We})=>(await ke("PATCH",`/api/knowledge-base/tags/${ie}`,We)).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/knowledge-base/tags/list"]}),s({title:"Tag updated"}),te(!1)},onError:()=>s({title:"Failed to update tag",variant:"destructive"})}),Oe=Te({mutationFn:async ie=>{await ke("DELETE",`/api/knowledge-base/tags/${ie}`)},onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/knowledge-base/tags/list"]}),s({title:"Tag deleted"}),Me(null)}}),st=()=>{d(null),k(""),E(""),R(Xt[0]||"General"),re(0),ee([]),o(!0)},St=ie=>{d(ie),k(ie.title),E(ie.content),R(ie.category),re(ie.sortOrder||0),ee(ie.tags||[]),o(!0)},Zt=()=>{o(!1),d(null)},qt=()=>{if(!g.trim())return s({title:"Title is required",variant:"destructive"});l?ws.mutate({id:l.id,title:g,content:A,category:S,status:"draft",sortOrder:H,tags:K}):us.mutate({title:g,content:A,category:S,status:"draft",sortOrder:H,tags:K})},D=()=>{if(!g.trim())return s({title:"Title is required",variant:"destructive"});l?ws.mutate({id:l.id,title:g,content:A,category:S,status:"published",sortOrder:H,tags:K}):us.mutate({title:g,content:A,category:S,status:"published",sortOrder:H,tags:K})},xe=ie=>{const We=ie.status==="published"?"draft":"published";ws.mutate({id:ie.id,status:We})},Ke=Fe.filter(ie=>!(f!=="all"&&ie.status!==f||v!=="all"&&ie.category!==v||N&&!ie.title.toLowerCase().includes(N.toLowerCase()))),jt=Fe.filter(ie=>ie.status==="draft").length,nt=Fe.filter(ie=>ie.status==="published").length,At=us.isPending||ws.isPending,Us=()=>{X(null),V(""),I("Folder"),T(lt.length),pe(!0)},Qs=ie=>{X(ie),V(ie.name),I(ie.icon),T(ie.sortOrder||0),pe(!0)},Is=()=>{if(!z.trim())return s({title:"Category name is required",variant:"destructive"});L?Et.mutate({id:L.id,name:z.trim(),icon:se,sortOrder:O}):ms.mutate({name:z.trim(),icon:se,sortOrder:O})},Ys=()=>{U(null),q(""),he("Tag"),be("gray"),te(!0)},Os=ie=>{U(ie),q(ie.name),he(ie.icon),be(ie.color),te(!0)},Bs=()=>{if(!M.trim())return s({title:"Tag name is required",variant:"destructive"});B?de.mutate({id:B.id,name:M.trim(),icon:oe,color:Se}):wt.mutate({name:M.trim(),icon:oe,color:Se})},Hs=ie=>lt.find(Pt=>Pt.name===ie)?.icon||"Folder",En=ie=>{ee(We=>We.includes(ie)?We.filter(Pt=>Pt!==ie):[...We,ie])};return e.jsxs("div",{className:"space-y-6","data-testid":"page-knowledge-base",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2","data-testid":"text-kb-title",children:[e.jsx(ki,{className:"w-6 h-6"})," Knowledge Base"]}),e.jsx("p",{className:"text-muted-foreground text-sm mt-1",children:"Create and manage help articles, categories, and tags."})]})}),e.jsxs(ZD,{value:t,onValueChange:n,children:[e.jsxs(R5,{"data-testid":"tabs-kb",children:[e.jsxs(qu,{value:"articles","data-testid":"tab-articles",children:[e.jsx(Vt,{className:"w-4 h-4 mr-1"})," Articles (",Fe.length,")"]}),e.jsxs(qu,{value:"categories","data-testid":"tab-categories",children:[e.jsx(Hu,{className:"w-4 h-4 mr-1"})," Categories (",lt.length,")"]}),e.jsxs(qu,{value:"tags","data-testid":"tab-tags",children:[e.jsx(Nl,{className:"w-4 h-4 mr-1"})," Tags (",Bt.length,")"]})]}),e.jsxs(Fu,{value:"articles",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(je,{variant:f==="all"?"default":"outline",className:"cursor-pointer",onClick:()=>b("all"),"data-testid":"filter-all",children:["All (",Fe.length,")"]}),e.jsxs(je,{variant:f==="draft"?"default":"outline",className:"cursor-pointer",onClick:()=>b("draft"),"data-testid":"filter-draft",children:["Drafts (",jt,")"]}),e.jsxs(je,{variant:f==="published"?"default":"outline",className:"cursor-pointer",onClick:()=>b("published"),"data-testid":"filter-published",children:["Published (",nt,")"]})]}),e.jsxs($,{onClick:st,"data-testid":"button-new-article",children:[e.jsx(Qt,{className:"w-4 h-4 mr-2"})," New Article"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(sn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(De,{placeholder:"Search articles...",value:N,onChange:ie=>C(ie.target.value),className:"pl-9","data-testid":"input-search-articles"})]}),e.jsxs(Dt,{value:v,onValueChange:y,children:[e.jsx(It,{className:"w-[200px]","data-testid":"select-filter-category",children:e.jsx($t,{placeholder:"Category"})}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"all",children:"All Categories"}),Xt.map(ie=>e.jsx(Ie,{value:ie,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Mr,{name:Hs(ie),className:"w-3.5 h-3.5"}),ie]})},ie))]})]})]}),Je?e.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"Loading articles..."}):Ke.length===0?e.jsx(ce,{children:e.jsxs(yr,{className:"py-12 text-center",children:[e.jsx(Vt,{className:"w-12 h-12 mx-auto text-muted-foreground/50 mb-3"}),e.jsx("p",{className:"text-muted-foreground",children:"No articles found. Create your first knowledge base article!"})]})}):e.jsx("div",{className:"grid gap-3",children:Ke.map(ie=>e.jsx(ce,{className:"hover:shadow-md transition-shadow","data-testid":`card-article-${ie.id}`,children:e.jsx(yr,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3 min-w-0",children:[e.jsx(S3,{className:"w-4 h-4 text-muted-foreground/40 mt-1 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h3",{className:"font-semibold truncate","data-testid":`text-article-title-${ie.id}`,children:ie.title}),e.jsx(je,{variant:ie.status==="published"?"default":"secondary",className:"text-xs","data-testid":`badge-status-${ie.id}`,children:ie.status==="published"?"Published":"Draft"}),e.jsxs(je,{variant:"outline",className:"text-xs flex items-center gap-1",children:[e.jsx(Mr,{name:Hs(ie.category),className:"w-3 h-3"}),ie.category]}),ie.notionPageId&&e.jsx(je,{variant:"outline",className:"text-xs text-blue-600 border-blue-200",children:"Notion"})]}),(ie.tags||[]).length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-1.5",children:ie.tags.map(We=>{const Pt=Bt.find(ar=>ar.name===We),Es=Tu(Pt?.color||"gray");return e.jsxs("span",{className:`inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-[10px] font-medium border ${Es.bg} ${Es.text} ${Es.border}`,children:[e.jsx(Mr,{name:Pt?.icon||"Tag",className:"w-2.5 h-2.5"}),We]},We)})}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:ie.content?D1(ie.content).substring(0,150)+(D1(ie.content).length>150?"...":""):"No content yet"}),e.jsxs("p",{className:"text-xs text-muted-foreground/60 mt-1",children:["Updated ",ie.updatedAt?new Date(ie.updatedAt).toLocaleDateString():"","  /",ie.slug]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[e.jsx($,{variant:"ghost",size:"icon",onClick:()=>xe(ie),title:ie.status==="published"?"Unpublish":"Publish","data-testid":`button-toggle-publish-${ie.id}`,children:ie.status==="published"?e.jsx(gm,{className:"w-4 h-4"}):e.jsx(jo,{className:"w-4 h-4"})}),e.jsx($,{variant:"ghost",size:"icon",onClick:()=>St(ie),"data-testid":`button-edit-article-${ie.id}`,children:e.jsx(ia,{className:"w-4 h-4"})}),e.jsx($,{variant:"ghost",size:"icon",className:"text-destructive",onClick:()=>h(ie.id),"data-testid":`button-delete-article-${ie.id}`,children:e.jsx(ps,{className:"w-4 h-4"})})]})]})})},ie.id))})]}),e.jsxs(Fu,{value:"categories",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage categories to organize your knowledge base articles."}),e.jsxs($,{onClick:Us,"data-testid":"button-new-category",children:[e.jsx(Qt,{className:"w-4 h-4 mr-2"})," New Category"]})]}),lt.length===0?e.jsx(ce,{children:e.jsxs(yr,{className:"py-12 text-center",children:[e.jsx(Hu,{className:"w-12 h-12 mx-auto text-muted-foreground/50 mb-3"}),e.jsx("p",{className:"text-muted-foreground",children:"No categories yet. Create your first category!"})]})}):e.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:lt.map(ie=>{const We=Fe.filter(Pt=>Pt.category===ie.name).length;return e.jsx(ce,{className:"hover:shadow-md transition-shadow","data-testid":`card-category-${ie.id}`,children:e.jsx(yr,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:e.jsx(Mr,{name:ie.icon,className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold","data-testid":`text-cat-name-${ie.id}`,children:ie.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[We," article",We!==1?"s":"","  Order: ",ie.sortOrder]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($,{variant:"ghost",size:"icon",onClick:()=>Qs(ie),"data-testid":`button-edit-cat-${ie.id}`,children:e.jsx(ia,{className:"w-4 h-4"})}),e.jsx($,{variant:"ghost",size:"icon",className:"text-destructive",onClick:()=>Q(ie.id),"data-testid":`button-delete-cat-${ie.id}`,children:e.jsx(ps,{className:"w-4 h-4"})})]})]})})},ie.id)})})]}),e.jsxs(Fu,{value:"tags",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage tags for fine-grained article classification."}),e.jsxs($,{onClick:Ys,"data-testid":"button-new-tag",children:[e.jsx(Qt,{className:"w-4 h-4 mr-2"})," New Tag"]})]}),Bt.length===0?e.jsx(ce,{children:e.jsxs(yr,{className:"py-12 text-center",children:[e.jsx(Nl,{className:"w-12 h-12 mx-auto text-muted-foreground/50 mb-3"}),e.jsx("p",{className:"text-muted-foreground",children:"No tags yet. Create your first tag!"})]})}):e.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:Bt.map(ie=>{const We=Tu(ie.color),Pt=Fe.filter(Es=>(Es.tags||[]).includes(ie.name)).length;return e.jsx(ce,{className:"hover:shadow-md transition-shadow","data-testid":`card-tag-${ie.id}`,children:e.jsx(yr,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center border ${We.bg} ${We.border}`,children:e.jsx(Mr,{name:ie.icon,className:`w-5 h-5 ${We.text}`})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold","data-testid":`text-tag-name-${ie.id}`,children:ie.name}),e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-medium border ${We.bg} ${We.text} ${We.border}`,children:ie.color})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Pt," article",Pt!==1?"s":""]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($,{variant:"ghost",size:"icon",onClick:()=>Os(ie),"data-testid":`button-edit-tag-${ie.id}`,children:e.jsx(ia,{className:"w-4 h-4"})}),e.jsx($,{variant:"ghost",size:"icon",className:"text-destructive",onClick:()=>Me(ie.id),"data-testid":`button-delete-tag-${ie.id}`,children:e.jsx(ps,{className:"w-4 h-4"})})]})]})})},ie.id)})})]})]}),e.jsx(Ct,{open:a,onOpenChange:o,children:e.jsxs(vt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(yt,{children:e.jsx(bt,{"data-testid":"text-editor-title",children:l?"Edit Article":"New Article"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(_e,{children:"Title"}),e.jsx(De,{value:g,onChange:ie=>k(ie.target.value),placeholder:"Article title...","data-testid":"input-article-title"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(_e,{children:"Category"}),e.jsxs(Dt,{value:S,onValueChange:R,children:[e.jsx(It,{"data-testid":"select-article-category",children:e.jsx($t,{})}),e.jsx(Ot,{children:Xt.map(ie=>e.jsx(Ie,{value:ie,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Mr,{name:Hs(ie),className:"w-3.5 h-3.5"}),ie]})},ie))})]})]}),e.jsxs("div",{className:"w-24",children:[e.jsx(_e,{children:"Sort Order"}),e.jsx(De,{type:"number",value:H,onChange:ie=>re(parseInt(ie.target.value)||0),"data-testid":"input-sort-order"})]})]}),Bt.length>0&&e.jsxs("div",{children:[e.jsx(_e,{children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-1.5 p-3 border rounded-md bg-muted/30","data-testid":"article-tags-picker",children:Bt.map(ie=>{const We=Tu(ie.color),Pt=K.includes(ie.name);return e.jsxs("button",{type:"button",onClick:()=>En(ie.name),className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium border transition-all ${Pt?`${We.bg} ${We.text} ${We.border} ring-2 ring-primary/30`:"bg-background text-muted-foreground border-border hover:bg-accent"}`,"data-testid":`toggle-tag-${ie.id}`,children:[e.jsx(Mr,{name:ie.icon,className:"w-3 h-3"}),ie.name,Pt&&e.jsx(sr,{className:"w-3 h-3"})]},ie.id)})})]}),e.jsxs("div",{children:[e.jsx(_e,{children:"Content"}),e.jsx("div",{className:"mt-1 rounded-md border bg-background","data-testid":"editor-quill-wrapper",children:e.jsx(i5,{theme:"snow",value:A,onChange:E,modules:e$,placeholder:"Write your article content here...",style:{minHeight:"300px"}})})]})]}),e.jsxs(so,{className:"flex gap-2 sm:gap-2",children:[e.jsx($,{variant:"outline",onClick:Zt,"data-testid":"button-cancel-editor",children:"Cancel"}),e.jsxs($,{variant:"secondary",onClick:qt,disabled:At,"data-testid":"button-save-draft",children:[e.jsx(Vt,{className:"w-4 h-4 mr-2"})," Save as Draft"]}),e.jsxs($,{onClick:D,disabled:At,"data-testid":"button-publish",children:[e.jsx(bs,{className:"w-4 h-4 mr-2"})," ",l?.status==="published"?"Update & Publish":"Publish"]})]})]})}),e.jsx(Ct,{open:!!u,onOpenChange:()=>h(null),children:e.jsxs(vt,{children:[e.jsx(yt,{children:e.jsx(bt,{children:"Delete Article"})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Are you sure you want to delete this article? This action cannot be undone."}),e.jsxs(so,{children:[e.jsx($,{variant:"outline",onClick:()=>h(null),children:"Cancel"}),e.jsx($,{variant:"destructive",onClick:()=>u&&os.mutate(u),disabled:os.isPending,"data-testid":"button-confirm-delete",children:"Delete"})]})]})}),e.jsx(Ct,{open:me,onOpenChange:pe,children:e.jsxs(vt,{className:"sm:max-w-md",children:[e.jsx(yt,{children:e.jsx(bt,{children:L?"Edit Category":"New Category"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(_e,{children:"Name"}),e.jsx(De,{value:z,onChange:ie=>V(ie.target.value),placeholder:"Category name...","data-testid":"input-cat-name"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{children:[e.jsx(_e,{children:"Icon"}),e.jsx("div",{className:"mt-1",children:e.jsx(M1,{value:se,onChange:I})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(_e,{children:"Sort Order"}),e.jsx(De,{type:"number",value:O,onChange:ie=>T(parseInt(ie.target.value)||0),"data-testid":"input-cat-sort-order"})]})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-muted/50 border",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Preview"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center",children:e.jsx(Mr,{name:se,className:"w-4 h-4 text-primary"})}),e.jsx("span",{className:"font-medium",children:z||"Category Name"})]})]})]}),e.jsxs(so,{children:[e.jsx($,{variant:"outline",onClick:()=>pe(!1),children:"Cancel"}),e.jsxs($,{onClick:Is,disabled:ms.isPending||Et.isPending,"data-testid":"button-save-cat",children:[L?"Update":"Create"," Category"]})]})]})}),e.jsx(Ct,{open:!!Y,onOpenChange:()=>Q(null),children:e.jsxs(vt,{children:[e.jsx(yt,{children:e.jsx(bt,{children:"Delete Category"})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Are you sure? Articles using this category will keep their current category but it won't appear in the list."}),e.jsxs(so,{children:[e.jsx($,{variant:"outline",onClick:()=>Q(null),children:"Cancel"}),e.jsx($,{variant:"destructive",onClick:()=>Y&&_t.mutate(Y),disabled:_t.isPending,"data-testid":"button-confirm-delete-cat",children:"Delete"})]})]})}),e.jsx(Ct,{open:F,onOpenChange:te,children:e.jsxs(vt,{className:"sm:max-w-md",children:[e.jsx(yt,{children:e.jsx(bt,{children:B?"Edit Tag":"New Tag"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(_e,{children:"Name"}),e.jsx(De,{value:M,onChange:ie=>q(ie.target.value),placeholder:"Tag name...","data-testid":"input-tag-name"})]}),e.jsxs("div",{children:[e.jsx(_e,{children:"Icon"}),e.jsx("div",{className:"mt-1",children:e.jsx(M1,{value:oe,onChange:he})})]}),e.jsxs("div",{children:[e.jsx(_e,{children:"Color"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-1.5","data-testid":"tag-color-picker",children:lx.map(ie=>e.jsx("button",{type:"button",onClick:()=>be(ie.name),className:`w-8 h-8 rounded-full border-2 transition-all ${ie.bg} ${Se===ie.name?"ring-2 ring-primary ring-offset-2 border-primary":`${ie.border}`}`,title:ie.name,"data-testid":`color-option-${ie.name}`},ie.name))})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-muted/50 border",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Preview"}),e.jsx("div",{className:"flex items-center gap-2",children:(()=>{const ie=Tu(Se);return e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium border ${ie.bg} ${ie.text} ${ie.border}`,children:[e.jsx(Mr,{name:oe,className:"w-3.5 h-3.5"}),M||"Tag Name"]})})()})]})]}),e.jsxs(so,{children:[e.jsx($,{variant:"outline",onClick:()=>te(!1),children:"Cancel"}),e.jsxs($,{onClick:Bs,disabled:wt.isPending||de.isPending,"data-testid":"button-save-tag",children:[B?"Update":"Create"," Tag"]})]})]})}),e.jsx(Ct,{open:!!Pe,onOpenChange:()=>Me(null),children:e.jsxs(vt,{children:[e.jsx(yt,{children:e.jsx(bt,{children:"Delete Tag"})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Are you sure? This tag will be removed from the list but articles that use it will keep the tag name."}),e.jsxs(so,{children:[e.jsx($,{variant:"outline",onClick:()=>Me(null),children:"Cancel"}),e.jsx($,{variant:"destructive",onClick:()=>Pe&&Oe.mutate(Pe),disabled:Oe.isPending,"data-testid":"button-confirm-delete-tag",children:"Delete"})]})]})})]})}function s$(){zn("Licenses");const{toast:s}=pt(),[t,n]=p.useState(!1),[a,o]=p.useState(""),[l,d]=p.useState("0"),[u,h]=p.useState(""),[f,b]=p.useState(null),[v,y]=p.useState(null),{data:N,isLoading:C}=Le({queryKey:["/api/licenses"]}),{data:g}=Le({queryKey:["/api/customers"]}),k=Te({mutationFn:async K=>(await ke("POST","/api/licenses",K)).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/licenses"]}),n(!1),o(""),d("0"),h(""),s({title:"License created",description:"A new license key has been generated."})},onError:K=>{s({title:"Failed to create license",description:K.message||"An error occurred",variant:"destructive"})}}),A=Te({mutationFn:async K=>(await ke("POST",`/api/licenses/${K}/reissue`)).json(),onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/licenses"]}),s({title:"License reissued",description:"A new key has been generated. The old key is now invalid."})}}),E=Te({mutationFn:async({id:K,status:ee})=>{await ke("PATCH",`/api/licenses/${K}`,{status:ee})},onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/licenses"]})}}),S=Te({mutationFn:async K=>{await ke("DELETE",`/api/licenses/${K}`)},onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/licenses"]}),s({title:"License deleted"})}}),R=(K,ee)=>{navigator.clipboard.writeText(K),b(ee),setTimeout(()=>b(null),2e3)},H=K=>g?.find(ee=>ee.id===K)?.name||"Unknown",re=K=>g?.find(ee=>ee.id===K)?.portalToken||"";return C?e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx(Ce,{className:"h-8 w-48"}),e.jsx(Ce,{className:"h-32 w-full"}),e.jsx(Ce,{className:"h-32 w-full"})]}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2","data-testid":"page-title-licenses",children:[e.jsx(wn,{className:"h-6 w-6"}),"License Management"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Issue, reissue, and manage script licenses for your customers"})]}),e.jsxs($,{onClick:()=>n(!0),"data-testid":"btn-create-license",children:[e.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Issue License"]})]}),N?.length?e.jsx("div",{className:"space-y-4",children:N.map(K=>e.jsx(n$,{license:K,customerName:H(K.customerId),portalToken:re(K.customerId),copiedId:f,expanded:v===K.id,onToggleExpand:()=>y(v===K.id?null:K.id),onCopy:ee=>R(ee,K.id),onReissue:()=>{confirm("This will generate a new license key. The old key will stop working immediately. Continue?")&&A.mutate(K.id)},onToggleStatus:ee=>E.mutate({id:K.id,status:ee}),onDelete:()=>{confirm("Delete this license permanently?")&&S.mutate(K.id)}},K.id))}):e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(wn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Licenses Yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Issue a license key to a customer to let them run the server setup script."}),e.jsxs($,{onClick:()=>n(!0),children:[e.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Issue First License"]})]}),e.jsx(Ct,{open:t,onOpenChange:n,children:e.jsxs(vt,{children:[e.jsx(yt,{children:e.jsx(bt,{children:"Issue New License"})}),e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsxs("div",{children:[e.jsx(_e,{children:"Customer"}),e.jsxs(Dt,{value:a,onValueChange:o,children:[e.jsx(It,{"data-testid":"select-license-customer",children:e.jsx($t,{placeholder:"Select a customer"})}),e.jsx(Ot,{children:g?.map(K=>e.jsx(Ie,{value:K.id,children:K.name},K.id))})]})]}),e.jsxs("div",{children:[e.jsx(_e,{children:"Max Activations"}),e.jsx(De,{type:"number",value:l,onChange:K=>d(K.target.value),placeholder:"0 = unlimited","data-testid":"input-max-activations"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Set to 0 for unlimited activations"})]}),e.jsxs("div",{children:[e.jsx(_e,{children:"Notes"}),e.jsx(De,{value:u,onChange:K=>h(K.target.value),placeholder:"Optional internal notes","data-testid":"input-license-notes"})]}),e.jsx($,{className:"w-full",onClick:()=>k.mutate({customerId:a,maxActivations:parseInt(l)||0,notes:u}),disabled:!a||k.isPending,"data-testid":"btn-submit-license",children:k.isPending?"Creating...":"Issue License Key"})]})]})})]})}function n$({license:s,customerName:t,portalToken:n,copiedId:a,expanded:o,onToggleExpand:l,onCopy:d,onReissue:u,onToggleStatus:h,onDelete:f}){const{toast:b}=pt(),{data:v}=Le({queryKey:["/api/licenses",s.id,"activations"],queryFn:async()=>(await fetch(`/api/licenses/${s.id}/activations`)).json()}),y=Te({mutationFn:async g=>{await ke("POST",`/api/licenses/${s.id}/activations/${g}/release`)},onSuccess:()=>{ve.invalidateQueries({queryKey:["/api/licenses",s.id,"activations"]}),ve.invalidateQueries({queryKey:["/api/licenses"]}),b({title:"IP released",description:"This IP slot is now free for a new server."})}}),N=v?.filter(g=>g.status==="active").length||0,C=s.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":s.status==="suspended"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";return e.jsxs(ce,{className:"p-5","data-testid":`license-card-${s.id}`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(uo,{className:"h-5 w-5 text-primary"}),e.jsx("span",{className:"font-semibold text-lg",children:t}),e.jsx(je,{className:C,children:s.status}),(s.activationCount??0)>0&&e.jsxs(je,{className:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400 gap-1",children:[e.jsx(Hc,{className:"h-3.5 w-3.5"}),"Validated"]})]}),n&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(jn,{className:"h-3 w-3"}),e.jsx("span",{children:"Portal Token:"}),e.jsx("code",{className:"bg-muted/50 px-1.5 py-0.5 rounded font-mono text-xs","data-testid":`portal-token-${s.id}`,children:n})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-muted/50 rounded-lg px-3 py-2 font-mono text-sm",children:[e.jsx("span",{"data-testid":`license-key-${s.id}`,children:s.licenseKey}),e.jsx($,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>d(s.licenseKey),"data-testid":`btn-copy-key-${s.id}`,children:a===s.id?e.jsx(Kt,{className:"h-3.5 w-3.5 text-green-500"}):e.jsx(Ps,{className:"h-3.5 w-3.5"})})]}),N>0&&e.jsx("div",{className:"flex flex-wrap items-center gap-1.5",children:v?.filter(g=>g.status==="active").map(g=>e.jsxs(je,{variant:"outline",className:"text-xs font-mono gap-1 py-0.5 border-green-300 dark:border-green-700 text-green-700 dark:text-green-400",children:[e.jsx(Sy,{className:"h-3 w-3"}),g.serverIp,g.hostname&&g.hostname!=="unknown"&&e.jsxs("span",{className:"text-muted-foreground font-sans",children:["(",g.hostname,")"]})]},g.id))}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Dn,{className:"h-3.5 w-3.5"}),N," active / ",s.maxActivations&&s.maxActivations>0?`${s.maxActivations} max`:"unlimited"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Gt,{className:"h-3.5 w-3.5"}),s.createdAt?new Date(s.createdAt).toLocaleDateString():"N/A"]}),s.lastActivatedAt&&e.jsxs("span",{className:"flex items-center gap-1",children:["Last used: ",new Date(s.lastActivatedAt).toLocaleDateString()]})]}),s.notes&&e.jsx("p",{className:"text-sm text-muted-foreground italic",children:s.notes})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($,{variant:"ghost",size:"icon",onClick:l,title:"View activations","data-testid":`btn-expand-${s.id}`,children:o?e.jsx(wo,{className:"h-4 w-4"}):e.jsx(ua,{className:"h-4 w-4"})}),e.jsx($,{variant:"ghost",size:"icon",onClick:u,title:"Reissue license key","data-testid":`btn-reissue-${s.id}`,children:e.jsx(Ol,{className:"h-4 w-4"})}),e.jsx($,{variant:"ghost",size:"icon",onClick:()=>h(s.status==="active"?"suspended":"active"),title:s.status==="active"?"Suspend license":"Activate license","data-testid":`btn-toggle-status-${s.id}`,children:e.jsx(wn,{className:"h-4 w-4"})}),e.jsx($,{variant:"ghost",size:"icon",onClick:f,title:"Delete license","data-testid":`btn-delete-${s.id}`,children:e.jsx(ps,{className:"h-4 w-4 text-red-500"})})]})]}),o&&e.jsxs("div",{className:"mt-4 border-t pt-4",children:[e.jsxs("h4",{className:"text-sm font-semibold mb-3 flex items-center gap-2",children:[e.jsx(jn,{className:"h-4 w-4"}),"IP Activations",N>0&&e.jsxs(je,{variant:"outline",className:"ml-1",children:[N," active"]})]}),v?.length?e.jsx("div",{className:"space-y-2",children:v.map(g=>e.jsxs("div",{className:"flex items-center gap-3 text-sm bg-muted/30 rounded-lg px-3 py-2",children:[g.status==="active"?e.jsx(Sy,{className:"h-4 w-4 text-green-500 shrink-0"}):e.jsx(Cp,{className:"h-4 w-4 text-muted-foreground shrink-0"}),e.jsx("span",{className:"font-mono font-medium",children:g.serverIp||"N/A"}),e.jsx("span",{className:"text-muted-foreground",children:g.hostname||"N/A"}),e.jsx(je,{variant:g.status==="active"?"default":"secondary",className:"text-xs",children:g.status}),e.jsxs("span",{className:"text-muted-foreground ml-auto text-xs",children:[g.activatedAt?new Date(g.activatedAt).toLocaleDateString():"N/A",g.status==="released"&&g.releasedAt&&e.jsxs(e.Fragment,{children:["  released ",new Date(g.releasedAt).toLocaleDateString()]})]}),g.status==="active"&&e.jsxs($,{variant:"ghost",size:"sm",className:"h-7 text-xs text-red-500 hover:text-red-700",onClick:()=>{confirm(`Release IP ${g.serverIp}? This will free up an activation slot.`)&&y.mutate(g.id)},"data-testid":`btn-release-ip-${g.id}`,children:[e.jsx(Cp,{className:"h-3 w-3 mr-1"}),"Release"]})]},g.id))}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No IP activations yet. The license will activate when a server runs the setup script."})]})]})}function dp(s){const t=document.createElement("div");return t.innerHTML=s,t.textContent||t.innerText||""}function r$(){const[s,t]=p.useState(""),[n,a]=p.useState(null),[o,l]=p.useState(null),{data:d=[],isLoading:u}=Le({queryKey:["/api/public/knowledge-base"]}),h=Array.from(new Set(d.map(v=>v.category))),f=d.filter(v=>{if(o&&v.category!==o)return!1;if(s){const y=s.toLowerCase(),N=dp(v.content).toLowerCase();return v.title.toLowerCase().includes(y)||N.includes(y)}return!0}),b=d.find(v=>v.slug===n);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-background to-muted/30",children:[e.jsx("header",{className:"border-b bg-background/95 backdrop-blur sticky top-0 z-10",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-4 flex items-center justify-between",children:[e.jsxs("a",{href:"/",className:"flex items-center gap-2 hover:opacity-80 transition-opacity","data-testid":"link-home",children:[e.jsx(ki,{className:"w-6 h-6 text-primary"}),e.jsx("span",{className:"text-lg font-bold",children:"Help Center"})]}),e.jsx("a",{href:"/questions",className:"text-sm text-muted-foreground hover:text-foreground transition-colors","data-testid":"link-qa",children:"Q&A"})]})}),e.jsx("main",{className:"max-w-5xl mx-auto px-6 py-8",children:b?e.jsxs("div",{"data-testid":"article-detail-view",children:[e.jsxs($,{variant:"ghost",className:"mb-4 -ml-2",onClick:()=>a(null),"data-testid":"button-back-to-list",children:[e.jsx(_a,{className:"w-4 h-4 mr-2"})," Back to articles"]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(je,{variant:"outline",className:"mb-2",children:b.category}),e.jsx("h1",{className:"text-3xl font-bold","data-testid":"text-article-detail-title",children:b.title}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Last updated ",b.updatedAt?new Date(b.updatedAt).toLocaleDateString():""]})]}),e.jsx(ce,{children:e.jsx(yr,{className:"p-6 sm:p-8 prose dark:prose-invert max-w-none article-content","data-testid":"article-content",dangerouslySetInnerHTML:{__html:b.content}})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"How can we help?"}),e.jsx("p",{className:"text-muted-foreground",children:"Browse our knowledge base for guides, tutorials, and answers."})]}),e.jsxs("div",{className:"relative max-w-xl mx-auto mb-8",children:[e.jsx(sn,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),e.jsx(De,{placeholder:"Search for articles...",value:s,onChange:v=>t(v.target.value),className:"pl-12 h-12 text-base rounded-xl","data-testid":"input-search-help"})]}),h.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-2 justify-center mb-8",children:[e.jsx(je,{variant:o===null?"default":"outline",className:"cursor-pointer px-3 py-1",onClick:()=>l(null),"data-testid":"badge-category-all",children:"All"}),h.map(v=>e.jsxs(je,{variant:o===v?"default":"outline",className:"cursor-pointer px-3 py-1",onClick:()=>l(v),"data-testid":`badge-category-${v.toLowerCase().replace(/\s+/g,"-")}`,children:[v," (",d.filter(y=>y.category===v).length,")"]},v))]}),u?e.jsx("div",{className:"text-center py-16 text-muted-foreground",children:"Loading articles..."}):f.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(Vt,{className:"w-16 h-16 mx-auto text-muted-foreground/30 mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No articles found."})]}):e.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:f.map(v=>e.jsx(ce,{className:"cursor-pointer hover:shadow-md hover:border-primary/30 transition-all group",onClick:()=>a(v.slug),"data-testid":`card-help-article-${v.id}`,children:e.jsx(yr,{className:"p-5",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx(je,{variant:"outline",className:"text-xs mb-2",children:v.category}),e.jsx("h3",{className:"font-semibold group-hover:text-primary transition-colors","data-testid":`text-help-title-${v.id}`,children:v.title}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:v.content?dp(v.content).substring(0,120)+(dp(v.content).length>120?"...":""):""})]}),e.jsx(Sx,{className:"w-5 h-5 text-muted-foreground/40 group-hover:text-primary transition-colors flex-shrink-0 mt-1"})]})})},v.id))})]})}),e.jsx("footer",{className:"border-t mt-16 py-6 text-center text-xs text-muted-foreground",children:e.jsxs("p",{children:["AI Powered Sites  ",e.jsx("a",{href:"/",className:"hover:underline",children:"Home"}),"  ",e.jsx("a",{href:"/questions",className:"hover:underline",children:"Q&A"})]})})]})}const a$="/images/logo.png";function i$(){const{toast:s}=pt(),[t,n]=p.useState(""),[a,o]=p.useState(""),[l,d]=p.useState(!1),u=async h=>{h.preventDefault(),d(!0);try{const f=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:a})}),b=await f.json();if(!f.ok){s({title:"Login failed",description:b.message||"Invalid credentials",variant:"destructive"}),d(!1);return}window.location.href=b.redirect||"/admin"}catch{s({title:"Error",description:"Something went wrong. Please try again.",variant:"destructive"}),d(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4",children:e.jsxs(ce,{className:"w-full max-w-sm p-8 bg-card/95 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex flex-col items-center mb-6",children:[e.jsx("img",{src:a$,alt:"AI Powered Sites",className:"w-14 h-14 rounded-md object-cover mb-4"}),e.jsx("h1",{className:"text-xl font-semibold",children:"Admin Login"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Sign in to your dashboard"})]}),e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_e,{htmlFor:"email",children:"Email"}),e.jsx(De,{id:"email",type:"email",placeholder:"you@example.com",value:t,onChange:h=>n(h.target.value),required:!0,"data-testid":"input-login-email"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_e,{htmlFor:"password",children:"Password"}),e.jsx(De,{id:"password",type:"password",placeholder:"Your password",value:a,onChange:h=>o(h.target.value),required:!0,"data-testid":"input-login-password"})]}),e.jsxs($,{type:"submit",className:"w-full",disabled:l,"data-testid":"button-login-submit",children:[l?e.jsx(Qe,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(I3,{className:"w-4 h-4 mr-2"}),"Sign In"]})]})]})})}function o$(){return e.jsxs(Y1,{children:[e.jsx(zt,{path:"/admin",component:n6}),e.jsx(zt,{path:"/admin/customers",component:l6}),e.jsx(zt,{path:"/admin/projects",component:H6}),e.jsx(zt,{path:"/admin/invoices",component:W6}),e.jsx(zt,{path:"/admin/billing-rates",component:Q6}),e.jsx(zt,{path:"/admin/payment-methods",component:lR}),e.jsx(zt,{path:"/admin/quotes",component:AI}),e.jsx(zt,{path:"/admin/support",component:_I}),e.jsx(zt,{path:"/admin/qa",component:oD}),e.jsx(zt,{path:"/admin/quote-builder",component:hD}),e.jsx(zt,{path:"/admin/conversations",component:vD}),e.jsx(zt,{path:"/admin/api-keys",component:yD}),e.jsx(zt,{path:"/admin/code-backups",component:ND}),e.jsx(zt,{path:"/admin/lead-generator",component:SD}),e.jsx(zt,{path:"/admin/servers",component:MD}),e.jsx(zt,{path:"/admin/knowledge-base",component:t$}),e.jsx(zt,{path:"/admin/licenses",component:s$}),e.jsx(zt,{path:"/admin/settings",component:fR}),e.jsx(zt,{component:QN})]})}function $1(){const s={"--sidebar-width":"16rem","--sidebar-width-icon":"3rem"},{user:t,isLoading:n,isAuthenticated:a}=WN(),{toast:o}=pt();if(p.useEffect(()=>{!n&&!a&&(o({title:"Unauthorized",description:"Please sign in to access the dashboard.",variant:"destructive"}),setTimeout(()=>{window.location.href="/api/login"},500))},[n,a]),n)return e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"text-muted-foreground",children:"Loading..."})});if(!a)return null;const l=[t?.firstName?.[0],t?.lastName?.[0]].filter(Boolean).join("").toUpperCase()||"U";return e.jsx(jP,{style:s,children:e.jsxs("div",{className:"flex h-screen w-full",children:[e.jsx(IP,{}),e.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[e.jsxs("header",{className:"flex items-center justify-between gap-3 flex-wrap px-4 py-2 border-b sticky top-0 z-50 bg-background",children:[e.jsx(kP,{"data-testid":"button-sidebar-toggle"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(BN,{className:"w-7 h-7","data-testid":"img-user-avatar",children:[e.jsx(HN,{src:t?.profileImageUrl||void 0,alt:t?.firstName||"User"}),e.jsx(KN,{className:"text-xs",children:l})]}),e.jsx("span",{className:"text-sm text-muted-foreground hidden sm:inline","data-testid":"text-user-name",children:[t?.firstName,t?.lastName].filter(Boolean).join(" ")||"Admin"})]}),e.jsx("a",{href:"/api/logout",children:e.jsx($,{variant:"ghost",size:"icon","data-testid":"button-logout",children:e.jsx(Kw,{className:"w-4 h-4"})})}),e.jsx(IN,{})]})]}),e.jsx("main",{className:"flex-1 overflow-auto p-6 bg-dot-pattern",children:e.jsx(o$,{})})]})]})})}function l$(){return e.jsxs(Y1,{children:[e.jsx(zt,{path:"/",component:SI}),e.jsx(zt,{path:"/questions",component:cD}),e.jsx(zt,{path:"/portal/:token",component:dI}),e.jsx(zt,{path:"/progress/:projectId",component:uD}),e.jsx(zt,{path:"/quote/:token",component:xD}),e.jsx(zt,{path:"/conversation/:token",component:gD}),e.jsx(zt,{path:"/api/docs",component:bD}),e.jsx(zt,{path:"/help",component:r$}),e.jsx(zt,{path:"/login",component:i$}),e.jsx(zt,{path:"/admin/:rest*",children:e.jsx($1,{})}),e.jsx(zt,{path:"/admin",children:e.jsx($1,{})}),e.jsx(zt,{component:QN})]})}function c$(){return e.jsx(rS,{client:ve,children:e.jsx(OP,{children:e.jsxs(Wj,{children:[e.jsx(l$,{}),e.jsx(RE,{})]})})})}fC.createRoot(document.getElementById("root")).render(e.jsx(c$,{}))});export default d$();
