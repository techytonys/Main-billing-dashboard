var LS=(s,t)=>()=>(t||s((t={exports:{}}).exports,t),t.exports);var Nz=LS((tr,sr)=>{function MS(s,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in s)){const l=Object.getOwnPropertyDescriptor(r,o);l&&Object.defineProperty(s,o,l.get?l:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();var Ei=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yd(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Zf={exports:{}},Ic={},Jf={exports:{}},bt={};var Dy;function DS(){if(Dy)return bt;Dy=1;var s=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),d=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.iterator;function g(q){return q===null||typeof q!="object"?null:(q=x&&q[x]||q["@@iterator"],typeof q=="function"?q:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,b={};function k(q,ne,K){this.props=q,this.context=ne,this.refs=b,this.updater=K||j}k.prototype.isReactComponent={},k.prototype.setState=function(q,ne){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,ne,"setState")},k.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function E(){}E.prototype=k.prototype;function S(q,ne,K){this.props=q,this.context=ne,this.refs=b,this.updater=K||j}var T=S.prototype=new E;T.constructor=S,N(T,k.prototype),T.isPureReactComponent=!0;var P=Array.isArray,H=Object.prototype.hasOwnProperty,re={current:null},B={key:!0,ref:!0,__self:!0,__source:!0};function Q(q,ne,K){var U,M={},F=null,ie=null;if(ne!=null)for(U in ne.ref!==void 0&&(ie=ne.ref),ne.key!==void 0&&(F=""+ne.key),ne)H.call(ne,U)&&!B.hasOwnProperty(U)&&(M[U]=ne[U]);var fe=arguments.length-2;if(fe===1)M.children=K;else if(1<fe){for(var Ee=Array(fe),Ne=0;Ne<fe;Ne++)Ee[Ne]=arguments[Ne+2];M.children=Ee}if(q&&q.defaultProps)for(U in fe=q.defaultProps,fe)M[U]===void 0&&(M[U]=fe[U]);return{$$typeof:s,type:q,key:F,ref:ie,props:M,_owner:re.current}}function G(q,ne){return{$$typeof:s,type:q.type,key:ne,ref:q.ref,props:q.props,_owner:q._owner}}function ue(q){return typeof q=="object"&&q!==null&&q.$$typeof===s}function _(q){var ne={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(K){return ne[K]})}var Y=/\/+/g;function z(q,ne){return typeof q=="object"&&q!==null&&q.key!=null?_(""+q.key):ne.toString(36)}function J(q,ne,K,U,M){var F=typeof q;(F==="undefined"||F==="boolean")&&(q=null);var ie=!1;if(q===null)ie=!0;else switch(F){case"string":case"number":ie=!0;break;case"object":switch(q.$$typeof){case s:case t:ie=!0}}if(ie)return ie=q,M=M(ie),q=U===""?"."+z(ie,0):U,P(M)?(K="",q!=null&&(K=q.replace(Y,"$&/")+"/"),J(M,ne,K,"",function(Ne){return Ne})):M!=null&&(ue(M)&&(M=G(M,K+(!M.key||ie&&ie.key===M.key?"":(""+M.key).replace(Y,"$&/")+"/")+q)),ne.push(M)),1;if(ie=0,U=U===""?".":U+":",P(q))for(var fe=0;fe<q.length;fe++){F=q[fe];var Ee=U+z(F,fe);ie+=J(F,ne,K,Ee,M)}else if(Ee=g(q),typeof Ee=="function")for(q=Ee.call(q),fe=0;!(F=q.next()).done;)F=F.value,Ee=U+z(F,fe++),ie+=J(F,ne,K,Ee,M);else if(F==="object")throw ne=String(q),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.");return ie}function X(q,ne,K){if(q==null)return q;var U=[],M=0;return J(q,U,"","",function(F){return ne.call(K,F,M++)}),U}function $(q){if(q._status===-1){var ne=q._result;ne=ne(),ne.then(function(K){(q._status===0||q._status===-1)&&(q._status=1,q._result=K)},function(K){(q._status===0||q._status===-1)&&(q._status=2,q._result=K)}),q._status===-1&&(q._status=0,q._result=ne)}if(q._status===1)return q._result.default;throw q._result}var I={current:null},A={transition:null},W={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:A,ReactCurrentOwner:re};function Z(){throw Error("act(...) is not supported in production builds of React.")}return bt.Children={map:X,forEach:function(q,ne,K){X(q,function(){ne.apply(this,arguments)},K)},count:function(q){var ne=0;return X(q,function(){ne++}),ne},toArray:function(q){return X(q,function(ne){return ne})||[]},only:function(q){if(!ue(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},bt.Component=k,bt.Fragment=n,bt.Profiler=o,bt.PureComponent=S,bt.StrictMode=r,bt.Suspense=h,bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W,bt.act=Z,bt.cloneElement=function(q,ne,K){if(q==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+q+".");var U=N({},q.props),M=q.key,F=q.ref,ie=q._owner;if(ne!=null){if(ne.ref!==void 0&&(F=ne.ref,ie=re.current),ne.key!==void 0&&(M=""+ne.key),q.type&&q.type.defaultProps)var fe=q.type.defaultProps;for(Ee in ne)H.call(ne,Ee)&&!B.hasOwnProperty(Ee)&&(U[Ee]=ne[Ee]===void 0&&fe!==void 0?fe[Ee]:ne[Ee])}var Ee=arguments.length-2;if(Ee===1)U.children=K;else if(1<Ee){fe=Array(Ee);for(var Ne=0;Ne<Ee;Ne++)fe[Ne]=arguments[Ne+2];U.children=fe}return{$$typeof:s,type:q.type,key:M,ref:F,props:U,_owner:ie}},bt.createContext=function(q){return q={$$typeof:d,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},q.Provider={$$typeof:l,_context:q},q.Consumer=q},bt.createElement=Q,bt.createFactory=function(q){var ne=Q.bind(null,q);return ne.type=q,ne},bt.createRef=function(){return{current:null}},bt.forwardRef=function(q){return{$$typeof:u,render:q}},bt.isValidElement=ue,bt.lazy=function(q){return{$$typeof:v,_payload:{_status:-1,_result:q},_init:$}},bt.memo=function(q,ne){return{$$typeof:f,type:q,compare:ne===void 0?null:ne}},bt.startTransition=function(q){var ne=A.transition;A.transition={};try{q()}finally{A.transition=ne}},bt.unstable_act=Z,bt.useCallback=function(q,ne){return I.current.useCallback(q,ne)},bt.useContext=function(q){return I.current.useContext(q)},bt.useDebugValue=function(){},bt.useDeferredValue=function(q){return I.current.useDeferredValue(q)},bt.useEffect=function(q,ne){return I.current.useEffect(q,ne)},bt.useId=function(){return I.current.useId()},bt.useImperativeHandle=function(q,ne,K){return I.current.useImperativeHandle(q,ne,K)},bt.useInsertionEffect=function(q,ne){return I.current.useInsertionEffect(q,ne)},bt.useLayoutEffect=function(q,ne){return I.current.useLayoutEffect(q,ne)},bt.useMemo=function(q,ne){return I.current.useMemo(q,ne)},bt.useReducer=function(q,ne,K){return I.current.useReducer(q,ne,K)},bt.useRef=function(q){return I.current.useRef(q)},bt.useState=function(q){return I.current.useState(q)},bt.useSyncExternalStore=function(q,ne,K){return I.current.useSyncExternalStore(q,ne,K)},bt.useTransition=function(){return I.current.useTransition()},bt.version="18.3.1",bt}var $y;function Mm(){return $y||($y=1,Jf.exports=DS()),Jf.exports}var qy;function $S(){if(qy)return Ic;qy=1;var s=Mm(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(u,h,f){var v,x={},g=null,j=null;f!==void 0&&(g=""+f),h.key!==void 0&&(g=""+h.key),h.ref!==void 0&&(j=h.ref);for(v in h)r.call(h,v)&&!l.hasOwnProperty(v)&&(x[v]=h[v]);if(u&&u.defaultProps)for(v in h=u.defaultProps,h)x[v]===void 0&&(x[v]=h[v]);return{$$typeof:t,type:u,key:g,ref:j,props:x,_owner:o.current}}return Ic.Fragment=n,Ic.jsx=d,Ic.jsxs=d,Ic}var Fy;function qS(){return Fy||(Fy=1,Zf.exports=$S()),Zf.exports}var e=qS(),Eu={},ep={exports:{}},Dn={},tp={exports:{}},sp={};var zy;function FS(){return zy||(zy=1,(function(s){function t(A,W){var Z=A.length;A.push(W);e:for(;0<Z;){var q=Z-1>>>1,ne=A[q];if(0<o(ne,W))A[q]=W,A[Z]=ne,Z=q;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var W=A[0],Z=A.pop();if(Z!==W){A[0]=Z;e:for(var q=0,ne=A.length,K=ne>>>1;q<K;){var U=2*(q+1)-1,M=A[U],F=U+1,ie=A[F];if(0>o(M,Z))F<ne&&0>o(ie,M)?(A[q]=ie,A[F]=Z,q=F):(A[q]=M,A[U]=Z,q=U);else if(F<ne&&0>o(ie,Z))A[q]=ie,A[F]=Z,q=F;else break e}}return W}function o(A,W){var Z=A.sortIndex-W.sortIndex;return Z!==0?Z:A.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var d=Date,u=d.now();s.unstable_now=function(){return d.now()-u}}var h=[],f=[],v=1,x=null,g=3,j=!1,N=!1,b=!1,k=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(A){for(var W=n(f);W!==null;){if(W.callback===null)r(f);else if(W.startTime<=A)r(f),W.sortIndex=W.expirationTime,t(h,W);else break;W=n(f)}}function P(A){if(b=!1,T(A),!N)if(n(h)!==null)N=!0,$(H);else{var W=n(f);W!==null&&I(P,W.startTime-A)}}function H(A,W){N=!1,b&&(b=!1,E(Q),Q=-1),j=!0;var Z=g;try{for(T(W),x=n(h);x!==null&&(!(x.expirationTime>W)||A&&!_());){var q=x.callback;if(typeof q=="function"){x.callback=null,g=x.priorityLevel;var ne=q(x.expirationTime<=W);W=s.unstable_now(),typeof ne=="function"?x.callback=ne:x===n(h)&&r(h),T(W)}else r(h);x=n(h)}if(x!==null)var K=!0;else{var U=n(f);U!==null&&I(P,U.startTime-W),K=!1}return K}finally{x=null,g=Z,j=!1}}var re=!1,B=null,Q=-1,G=5,ue=-1;function _(){return!(s.unstable_now()-ue<G)}function Y(){if(B!==null){var A=s.unstable_now();ue=A;var W=!0;try{W=B(!0,A)}finally{W?z():(re=!1,B=null)}}else re=!1}var z;if(typeof S=="function")z=function(){S(Y)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,X=J.port2;J.port1.onmessage=Y,z=function(){X.postMessage(null)}}else z=function(){k(Y,0)};function $(A){B=A,re||(re=!0,z())}function I(A,W){Q=k(function(){A(s.unstable_now())},W)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(A){A.callback=null},s.unstable_continueExecution=function(){N||j||(N=!0,$(H))},s.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<A?Math.floor(1e3/A):5},s.unstable_getCurrentPriorityLevel=function(){return g},s.unstable_getFirstCallbackNode=function(){return n(h)},s.unstable_next=function(A){switch(g){case 1:case 2:case 3:var W=3;break;default:W=g}var Z=g;g=W;try{return A()}finally{g=Z}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(A,W){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var Z=g;g=A;try{return W()}finally{g=Z}},s.unstable_scheduleCallback=function(A,W,Z){var q=s.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?q+Z:q):Z=q,A){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=Z+ne,A={id:v++,callback:W,priorityLevel:A,startTime:Z,expirationTime:ne,sortIndex:-1},Z>q?(A.sortIndex=Z,t(f,A),n(h)===null&&A===n(f)&&(b?(E(Q),Q=-1):b=!0,I(P,Z-q))):(A.sortIndex=ne,t(h,A),N||j||(N=!0,$(H))),A},s.unstable_shouldYield=_,s.unstable_wrapCallback=function(A){var W=g;return function(){var Z=g;g=W;try{return A.apply(this,arguments)}finally{g=Z}}}})(sp)),sp}var Uy;function zS(){return Uy||(Uy=1,tp.exports=FS()),tp.exports}var By;function US(){if(By)return Dn;By=1;var s=Mm(),t=zS();function n(a){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)i+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function l(a,i){d(a,i),d(a+"Capture",i)}function d(a,i){for(o[a]=i,a=0;a<i.length;a++)r.add(i[a])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},x={};function g(a){return h.call(x,a)?!0:h.call(v,a)?!1:f.test(a)?x[a]=!0:(v[a]=!0,!1)}function j(a,i,c,m){if(c!==null&&c.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return m?!1:c!==null?!c.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function N(a,i,c,m){if(i===null||typeof i>"u"||j(a,i,c,m))return!0;if(m)return!1;if(c!==null)switch(c.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function b(a,i,c,m,y,w,R){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=m,this.attributeNamespace=y,this.mustUseProperty=c,this.propertyName=a,this.type=i,this.sanitizeURL=w,this.removeEmptyString=R}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){k[a]=new b(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var i=a[0];k[i]=new b(i,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){k[a]=new b(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){k[a]=new b(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){k[a]=new b(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){k[a]=new b(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){k[a]=new b(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){k[a]=new b(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){k[a]=new b(a,5,!1,a.toLowerCase(),null,!1,!1)});var E=/[\-:]([a-z])/g;function S(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var i=a.replace(E,S);k[i]=new b(i,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var i=a.replace(E,S);k[i]=new b(i,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var i=a.replace(E,S);k[i]=new b(i,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){k[a]=new b(a,1,!1,a.toLowerCase(),null,!1,!1)}),k.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){k[a]=new b(a,1,!1,a.toLowerCase(),null,!0,!0)});function T(a,i,c,m){var y=k.hasOwnProperty(i)?k[i]:null;(y!==null?y.type!==0:m||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(N(i,c,y,m)&&(c=null),m||y===null?g(i)&&(c===null?a.removeAttribute(i):a.setAttribute(i,""+c)):y.mustUseProperty?a[y.propertyName]=c===null?y.type===3?!1:"":c:(i=y.attributeName,m=y.attributeNamespace,c===null?a.removeAttribute(i):(y=y.type,c=y===3||y===4&&c===!0?"":""+c,m?a.setAttributeNS(m,i,c):a.setAttribute(i,c))))}var P=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,H=Symbol.for("react.element"),re=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),ue=Symbol.for("react.provider"),_=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),I=Symbol.for("react.offscreen"),A=Symbol.iterator;function W(a){return a===null||typeof a!="object"?null:(a=A&&a[A]||a["@@iterator"],typeof a=="function"?a:null)}var Z=Object.assign,q;function ne(a){if(q===void 0)try{throw Error()}catch(c){var i=c.stack.trim().match(/\n( *(at )?)/);q=i&&i[1]||""}return`
`+q+a}var K=!1;function U(a,i){if(!a||K)return"";K=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(pe){var m=pe}Reflect.construct(a,[],i)}else{try{i.call()}catch(pe){m=pe}a.call(i.prototype)}else{try{throw Error()}catch(pe){m=pe}a()}}catch(pe){if(pe&&m&&typeof pe.stack=="string"){for(var y=pe.stack.split(`
`),w=m.stack.split(`
`),R=y.length-1,V=w.length-1;1<=R&&0<=V&&y[R]!==w[V];)V--;for(;1<=R&&0<=V;R--,V--)if(y[R]!==w[V]){if(R!==1||V!==1)do if(R--,V--,0>V||y[R]!==w[V]){var te=`
`+y[R].replace(" at new "," at ");return a.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",a.displayName)),te}while(1<=R&&0<=V);break}}}finally{K=!1,Error.prepareStackTrace=c}return(a=a?a.displayName||a.name:"")?ne(a):""}function M(a){switch(a.tag){case 5:return ne(a.type);case 16:return ne("Lazy");case 13:return ne("Suspense");case 19:return ne("SuspenseList");case 0:case 2:case 15:return a=U(a.type,!1),a;case 11:return a=U(a.type.render,!1),a;case 1:return a=U(a.type,!0),a;default:return""}}function F(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case B:return"Fragment";case re:return"Portal";case G:return"Profiler";case Q:return"StrictMode";case z:return"Suspense";case J:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case _:return(a.displayName||"Context")+".Consumer";case ue:return(a._context.displayName||"Context")+".Provider";case Y:var i=a.render;return a=a.displayName,a||(a=i.displayName||i.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case X:return i=a.displayName||null,i!==null?i:F(a.type)||"Memo";case $:i=a._payload,a=a._init;try{return F(a(i))}catch{}}return null}function ie(a){var i=a.type;switch(a.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=i.render,a=a.displayName||a.name||"",i.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return F(i);case 8:return i===Q?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function fe(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Ee(a){var i=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ne(a){var i=Ee(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,i),m=""+a[i];if(!a.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,w=c.set;return Object.defineProperty(a,i,{configurable:!0,get:function(){return y.call(this)},set:function(R){m=""+R,w.call(this,R)}}),Object.defineProperty(a,i,{enumerable:c.enumerable}),{getValue:function(){return m},setValue:function(R){m=""+R},stopTracking:function(){a._valueTracker=null,delete a[i]}}}}function Pe(a){a._valueTracker||(a._valueTracker=Ne(a))}function $e(a){if(!a)return!1;var i=a._valueTracker;if(!i)return!0;var c=i.getValue(),m="";return a&&(m=Ee(a)?a.checked?"true":"false":a.value),a=m,a!==c?(i.setValue(a),!0):!1}function Ue(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function et(a,i){var c=i.checked;return Z({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??a._wrapperState.initialChecked})}function ct(a,i){var c=i.defaultValue==null?"":i.defaultValue,m=i.checked!=null?i.checked:i.defaultChecked;c=fe(i.value!=null?i.value:c),a._wrapperState={initialChecked:m,initialValue:c,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Bt(a,i){i=i.checked,i!=null&&T(a,"checked",i,!1)}function Yt(a,i){Bt(a,i);var c=fe(i.value),m=i.type;if(c!=null)m==="number"?(c===0&&a.value===""||a.value!=c)&&(a.value=""+c):a.value!==""+c&&(a.value=""+c);else if(m==="submit"||m==="reset"){a.removeAttribute("value");return}i.hasOwnProperty("value")?ks(a,i.type,c):i.hasOwnProperty("defaultValue")&&ks(a,i.type,fe(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(a.defaultChecked=!!i.defaultChecked)}function ps(a,i,c){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var m=i.type;if(!(m!=="submit"&&m!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+a._wrapperState.initialValue,c||i===a.value||(a.value=i),a.defaultValue=i}c=a.name,c!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,c!==""&&(a.name=c)}function ks(a,i,c){(i!=="number"||Ue(a.ownerDocument)!==a)&&(c==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+c&&(a.defaultValue=""+c))}var cs=Array.isArray;function xs(a,i,c,m){if(a=a.options,i){i={};for(var y=0;y<c.length;y++)i["$"+c[y]]=!0;for(c=0;c<a.length;c++)y=i.hasOwnProperty("$"+a[c].value),a[c].selected!==y&&(a[c].selected=y),y&&m&&(a[c].defaultSelected=!0)}else{for(c=""+fe(c),i=null,y=0;y<a.length;y++){if(a[y].value===c){a[y].selected=!0,m&&(a[y].defaultSelected=!0);return}i!==null||a[y].disabled||(i=a[y])}i!==null&&(i.selected=!0)}}function Et(a,i){if(i.dangerouslySetInnerHTML!=null)throw Error(n(91));return Z({},i,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function Lt(a,i){var c=i.value;if(c==null){if(c=i.children,i=i.defaultValue,c!=null){if(i!=null)throw Error(n(92));if(cs(c)){if(1<c.length)throw Error(n(93));c=c[0]}i=c}i==null&&(i=""),c=i}a._wrapperState={initialValue:fe(c)}}function wt(a,i){var c=fe(i.value),m=fe(i.defaultValue);c!=null&&(c=""+c,c!==a.value&&(a.value=c),i.defaultValue==null&&a.defaultValue!==c&&(a.defaultValue=c)),m!=null&&(a.defaultValue=""+m)}function me(a){var i=a.textContent;i===a._wrapperState.initialValue&&i!==""&&i!==null&&(a.value=i)}function Le(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nt(a,i){return a==null||a==="http://www.w3.org/1999/xhtml"?Le(i):a==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var St,Xt=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,c,m,y){MSApp.execUnsafeLocalFunction(function(){return a(i,c,m,y)})}:a})(function(a,i){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=i;else{for(St=St||document.createElement("div"),St.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=St.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;i.firstChild;)a.appendChild(i.firstChild)}});function Ft(a,i){if(i){var c=a.firstChild;if(c&&c===a.lastChild&&c.nodeType===3){c.nodeValue=i;return}}a.textContent=i}var D={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ge=["Webkit","ms","Moz","O"];Object.keys(D).forEach(function(a){ge.forEach(function(i){i=i+a.charAt(0).toUpperCase()+a.substring(1),D[i]=D[a]})});function Ge(a,i,c){return i==null||typeof i=="boolean"||i===""?"":c||typeof i!="number"||i===0||D.hasOwnProperty(a)&&D[a]?(""+i).trim():i+"px"}function Nt(a,i){a=a.style;for(var c in i)if(i.hasOwnProperty(c)){var m=c.indexOf("--")===0,y=Ge(c,i[c],m);c==="float"&&(c="cssFloat"),m?a.setProperty(c,y):a[c]=y}}var rt=Z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pt(a,i){if(i){if(rt[a]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(n(137,a));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(n(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(n(61))}if(i.style!=null&&typeof i.style!="object")throw Error(n(62))}}function Us(a,i){if(a.indexOf("-")===-1)return typeof i.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qs=null;function Is(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Ys=null,Os=null,Bs=null;function Hs(a){if(a=vc(a)){if(typeof Ys!="function")throw Error(n(280));var i=a.stateNode;i&&(i=Ud(i),Ys(a.stateNode,a.type,i))}}function An(a){Os?Bs?Bs.push(a):Bs=[a]:Os=a}function le(){if(Os){var a=Os,i=Bs;if(Bs=Os=null,Hs(a),i)for(a=0;a<i.length;a++)Hs(i[a])}}function Qe(a,i){return a(i)}function Rt(){}var As=!1;function ir(a,i,c){if(As)return a(i,c);As=!0;try{return Qe(a,i,c)}finally{As=!1,(Os!==null||Bs!==null)&&(Rt(),le())}}function Ls(a,i){var c=a.stateNode;if(c===null)return null;var m=Ud(c);if(m===null)return null;c=m[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(a=a.type,m=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!m;break e;default:a=!1}if(a)return null;if(c&&typeof c!="function")throw Error(n(231,i,typeof c));return c}var ra=!1;if(u)try{var or={};Object.defineProperty(or,"passive",{get:function(){ra=!0}}),window.addEventListener("test",or,or),window.removeEventListener("test",or,or)}catch{ra=!1}function Ki(a,i,c,m,y,w,R,V,te){var pe=Array.prototype.slice.call(arguments,3);try{i.apply(c,pe)}catch(Te){this.onError(Te)}}var Cs=!1,Ks=null,ts=!1,aa=null,Sa={onError:function(a){Cs=!0,Ks=a}};function Ja(a,i,c,m,y,w,R,V,te){Cs=!1,Ks=null,Ki.apply(Sa,arguments)}function pn(a,i,c,m,y,w,R,V,te){if(Ja.apply(this,arguments),Cs){if(Cs){var pe=Ks;Cs=!1,Ks=null}else throw Error(n(198));ts||(ts=!0,aa=pe)}}function Pn(a){var i=a,c=a;if(a.alternate)for(;i.return;)i=i.return;else{a=i;do i=a,(i.flags&4098)!==0&&(c=i.return),a=i.return;while(a)}return i.tag===3?c:null}function bs(a){if(a.tag===13){var i=a.memoizedState;if(i===null&&(a=a.alternate,a!==null&&(i=a.memoizedState)),i!==null)return i.dehydrated}return null}function Ea(a){if(Pn(a)!==a)throw Error(n(188))}function ei(a){var i=a.alternate;if(!i){if(i=Pn(a),i===null)throw Error(n(188));return i!==a?null:a}for(var c=a,m=i;;){var y=c.return;if(y===null)break;var w=y.alternate;if(w===null){if(m=y.return,m!==null){c=m;continue}break}if(y.child===w.child){for(w=y.child;w;){if(w===c)return Ea(y),a;if(w===m)return Ea(y),i;w=w.sibling}throw Error(n(188))}if(c.return!==m.return)c=y,m=w;else{for(var R=!1,V=y.child;V;){if(V===c){R=!0,c=y,m=w;break}if(V===m){R=!0,m=y,c=w;break}V=V.sibling}if(!R){for(V=w.child;V;){if(V===c){R=!0,c=w,m=y;break}if(V===m){R=!0,m=w,c=y;break}V=V.sibling}if(!R)throw Error(n(189))}}if(c.alternate!==m)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?a:i}function ti(a){return a=ei(a),a!==null?Ye(a):null}function Ye(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var i=Ye(a);if(i!==null)return i;a=a.sibling}return null}var se=t.unstable_scheduleCallback,ke=t.unstable_cancelCallback,Be=t.unstable_shouldYield,Ut=t.unstable_requestPaint,ht=t.unstable_now,Zt=t.unstable_getCurrentPriorityLevel,js=t.unstable_ImmediatePriority,Ms=t.unstable_UserBlockingPriority,on=t.unstable_NormalPriority,lr=t.unstable_LowPriority,zt=t.unstable_IdlePriority,Kn=null,Xs=null;function sc(a){if(Xs&&typeof Xs.onCommitFiberRoot=="function")try{Xs.onCommitFiberRoot(Kn,a,void 0,(a.current.flags&128)===128)}catch{}}var xn=Math.clz32?Math.clz32:si,nc=Math.log,rc=Math.LN2;function si(a){return a>>>=0,a===0?32:31-(nc(a)/rc|0)|0}var ia=64,cr=4194304;function oa(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function Ta(a,i){var c=a.pendingLanes;if(c===0)return 0;var m=0,y=a.suspendedLanes,w=a.pingedLanes,R=c&268435455;if(R!==0){var V=R&~y;V!==0?m=oa(V):(w&=R,w!==0&&(m=oa(w)))}else R=c&~y,R!==0?m=oa(R):w!==0&&(m=oa(w));if(m===0)return 0;if(i!==0&&i!==m&&(i&y)===0&&(y=m&-m,w=i&-i,y>=w||y===16&&(w&4194240)!==0))return i;if((m&4)!==0&&(m|=c&16),i=a.entangledLanes,i!==0)for(a=a.entanglements,i&=m;0<i;)c=31-xn(i),y=1<<c,m|=a[c],i&=~y;return m}function ac(a,i){switch(a){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ic(a,i){for(var c=a.suspendedLanes,m=a.pingedLanes,y=a.expirationTimes,w=a.pendingLanes;0<w;){var R=31-xn(w),V=1<<R,te=y[R];te===-1?((V&c)===0||(V&m)!==0)&&(y[R]=ac(V,i)):te<=i&&(a.expiredLanes|=V),w&=~V}}function Wi(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function Bo(){var a=ia;return ia<<=1,(ia&4194240)===0&&(ia=64),a}function Aa(a){for(var i=[],c=0;31>c;c++)i.push(a);return i}function Pa(a,i,c){a.pendingLanes|=i,i!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,i=31-xn(i),a[i]=c}function oc(a,i){var c=a.pendingLanes&~i;a.pendingLanes=i,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=i,a.mutableReadLanes&=i,a.entangledLanes&=i,i=a.entanglements;var m=a.eventTimes;for(a=a.expirationTimes;0<c;){var y=31-xn(c),w=1<<y;i[y]=0,m[y]=-1,a[y]=-1,c&=~w}}function Tr(a,i){var c=a.entangledLanes|=i;for(a=a.entanglements;c;){var m=31-xn(c),y=1<<m;y&i|a[m]&i&&(a[m]|=i),c&=~y}}var ft=0;function dr(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var ur,Vi,Wn,Ho,Ko,Gi=!1,ni=[],Vn=null,ds=null,Gn=null,la=new Map,mr=new Map,Rn=[],ri="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wo(a,i){switch(a){case"focusin":case"focusout":Vn=null;break;case"dragenter":case"dragleave":ds=null;break;case"mouseover":case"mouseout":Gn=null;break;case"pointerover":case"pointerout":la.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":mr.delete(i.pointerId)}}function ca(a,i,c,m,y,w){return a===null||a.nativeEvent!==w?(a={blockedOn:i,domEventName:c,eventSystemFlags:m,nativeEvent:w,targetContainers:[y]},i!==null&&(i=vc(i),i!==null&&Vi(i)),a):(a.eventSystemFlags|=m,i=a.targetContainers,y!==null&&i.indexOf(y)===-1&&i.push(y),a)}function Qi(a,i,c,m,y){switch(i){case"focusin":return Vn=ca(Vn,a,i,c,m,y),!0;case"dragenter":return ds=ca(ds,a,i,c,m,y),!0;case"mouseover":return Gn=ca(Gn,a,i,c,m,y),!0;case"pointerover":var w=y.pointerId;return la.set(w,ca(la.get(w)||null,a,i,c,m,y)),!0;case"gotpointercapture":return w=y.pointerId,mr.set(w,ca(mr.get(w)||null,a,i,c,m,y)),!0}return!1}function Yi(a){var i=Ji(a.target);if(i!==null){var c=Pn(i);if(c!==null){if(i=c.tag,i===13){if(i=bs(c),i!==null){a.blockedOn=i,Ko(a.priority,function(){Wn(c)});return}}else if(i===3&&c.stateNode.current.memoizedState.isDehydrated){a.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}a.blockedOn=null}function gn(a){if(a.blockedOn!==null)return!1;for(var i=a.targetContainers;0<i.length;){var c=kt(a.domEventName,a.eventSystemFlags,i[0],a.nativeEvent);if(c===null){c=a.nativeEvent;var m=new c.constructor(c.type,c);Qs=m,c.target.dispatchEvent(m),Qs=null}else return i=vc(c),i!==null&&Vi(i),a.blockedOn=c,!1;i.shift()}return!0}function Xi(a,i,c){gn(a)&&c.delete(i)}function Zi(){Gi=!1,Vn!==null&&gn(Vn)&&(Vn=null),ds!==null&&gn(ds)&&(ds=null),Gn!==null&&gn(Gn)&&(Gn=null),la.forEach(Xi),mr.forEach(Xi)}function Ra(a,i){a.blockedOn===i&&(a.blockedOn=null,Gi||(Gi=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Zi)))}function _a(a){function i(y){return Ra(y,a)}if(0<ni.length){Ra(ni[0],a);for(var c=1;c<ni.length;c++){var m=ni[c];m.blockedOn===a&&(m.blockedOn=null)}}for(Vn!==null&&Ra(Vn,a),ds!==null&&Ra(ds,a),Gn!==null&&Ra(Gn,a),la.forEach(i),mr.forEach(i),c=0;c<Rn.length;c++)m=Rn[c],m.blockedOn===a&&(m.blockedOn=null);for(;0<Rn.length&&(c=Rn[0],c.blockedOn===null);)Yi(c),c.blockedOn===null&&Rn.shift()}var C=P.ReactCurrentBatchConfig,O=!0;function ee(a,i,c,m){var y=ft,w=C.transition;C.transition=null;try{ft=1,dt(a,i,c,m)}finally{ft=y,C.transition=w}}function ve(a,i,c,m){var y=ft,w=C.transition;C.transition=null;try{ft=4,dt(a,i,c,m)}finally{ft=y,C.transition=w}}function dt(a,i,c,m){if(O){var y=kt(a,i,c,m);if(y===null)zh(a,i,m,Ze,c),Wo(a,m);else if(Qi(y,a,i,c,m))m.stopPropagation();else if(Wo(a,m),i&4&&-1<ri.indexOf(a)){for(;y!==null;){var w=vc(y);if(w!==null&&ur(w),w=kt(a,i,c,m),w===null&&zh(a,i,m,Ze,c),w===y)break;y=w}y!==null&&m.stopPropagation()}else zh(a,i,m,null,c)}}var Ze=null;function kt(a,i,c,m){if(Ze=null,a=Is(m),a=Ji(a),a!==null)if(i=Pn(a),i===null)a=null;else if(c=i.tag,c===13){if(a=bs(i),a!==null)return a;a=null}else if(c===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;a=null}else i!==a&&(a=null);return Ze=a,null}function Ct(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zt()){case js:return 1;case Ms:return 4;case on:case lr:return 16;case zt:return 536870912;default:return 16}default:return 16}}var Ht=null,Tt=null,Ss=null;function Zs(){if(Ss)return Ss;var a,i=Tt,c=i.length,m,y="value"in Ht?Ht.value:Ht.textContent,w=y.length;for(a=0;a<c&&i[a]===y[a];a++);var R=c-a;for(m=1;m<=R&&i[c-m]===y[w-m];m++);return Ss=y.slice(a,1<m?1-m:void 0)}function us(a){var i=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&i===13&&(a=13)):a=i,a===10&&(a=13),32<=a||a===13?a:0}function Es(){return!0}function Ps(){return!1}function ws(a){function i(c,m,y,w,R){this._reactName=c,this._targetInst=y,this.type=m,this.nativeEvent=w,this.target=R,this.currentTarget=null;for(var V in a)a.hasOwnProperty(V)&&(c=a[V],this[V]=c?c(w):w[V]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Es:Ps,this.isPropagationStopped=Ps,this}return Z(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Es)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Es)},persist:function(){},isPersistent:Es}),i}var ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ar=ws(ln),ai=Z({},ln,{view:0,detail:0}),Vo=ws(ai),ii,Th,lc,Od=Z({},ai,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ph,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==lc&&(lc&&a.type==="mousemove"?(ii=a.screenX-lc.screenX,Th=a.screenY-lc.screenY):Th=ii=0,lc=a),ii)},movementY:function(a){return"movementY"in a?a.movementY:Th}}),S0=ws(Od),cC=Z({},Od,{dataTransfer:0}),dC=ws(cC),uC=Z({},ai,{relatedTarget:0}),Ah=ws(uC),mC=Z({},ln,{animationName:0,elapsedTime:0,pseudoElement:0}),hC=ws(mC),fC=Z({},ln,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),pC=ws(fC),xC=Z({},ln,{data:0}),E0=ws(xC),gC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bC(a){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(a):(a=yC[a])?!!i[a]:!1}function Ph(){return bC}var jC=Z({},ai,{key:function(a){if(a.key){var i=gC[a.key]||a.key;if(i!=="Unidentified")return i}return a.type==="keypress"?(a=us(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?vC[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ph,charCode:function(a){return a.type==="keypress"?us(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?us(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),wC=ws(jC),NC=Z({},Od,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T0=ws(NC),kC=Z({},ai,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ph}),CC=ws(kC),SC=Z({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0}),EC=ws(SC),TC=Z({},Od,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),AC=ws(TC),PC=[9,13,27,32],Rh=u&&"CompositionEvent"in window,cc=null;u&&"documentMode"in document&&(cc=document.documentMode);var RC=u&&"TextEvent"in window&&!cc,A0=u&&(!Rh||cc&&8<cc&&11>=cc),P0=" ",R0=!1;function _0(a,i){switch(a){case"keyup":return PC.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function I0(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Go=!1;function _C(a,i){switch(a){case"compositionend":return I0(i);case"keypress":return i.which!==32?null:(R0=!0,P0);case"textInput":return a=i.data,a===P0&&R0?null:a;default:return null}}function IC(a,i){if(Go)return a==="compositionend"||!Rh&&_0(a,i)?(a=Zs(),Ss=Tt=Ht=null,Go=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return A0&&i.locale!=="ko"?null:i.data;default:return null}}var OC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function O0(a){var i=a&&a.nodeName&&a.nodeName.toLowerCase();return i==="input"?!!OC[a.type]:i==="textarea"}function L0(a,i,c,m){An(m),i=qd(i,"onChange"),0<i.length&&(c=new Ar("onChange","change",null,c,m),a.push({event:c,listeners:i}))}var dc=null,uc=null;function LC(a){J0(a,0)}function Ld(a){var i=Jo(a);if($e(i))return a}function MC(a,i){if(a==="change")return i}var M0=!1;if(u){var _h;if(u){var Ih="oninput"in document;if(!Ih){var D0=document.createElement("div");D0.setAttribute("oninput","return;"),Ih=typeof D0.oninput=="function"}_h=Ih}else _h=!1;M0=_h&&(!document.documentMode||9<document.documentMode)}function $0(){dc&&(dc.detachEvent("onpropertychange",q0),uc=dc=null)}function q0(a){if(a.propertyName==="value"&&Ld(uc)){var i=[];L0(i,uc,a,Is(a)),ir(LC,i)}}function DC(a,i,c){a==="focusin"?($0(),dc=i,uc=c,dc.attachEvent("onpropertychange",q0)):a==="focusout"&&$0()}function $C(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Ld(uc)}function qC(a,i){if(a==="click")return Ld(i)}function FC(a,i){if(a==="input"||a==="change")return Ld(i)}function zC(a,i){return a===i&&(a!==0||1/a===1/i)||a!==a&&i!==i}var Pr=typeof Object.is=="function"?Object.is:zC;function mc(a,i){if(Pr(a,i))return!0;if(typeof a!="object"||a===null||typeof i!="object"||i===null)return!1;var c=Object.keys(a),m=Object.keys(i);if(c.length!==m.length)return!1;for(m=0;m<c.length;m++){var y=c[m];if(!h.call(i,y)||!Pr(a[y],i[y]))return!1}return!0}function F0(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function z0(a,i){var c=F0(a);a=0;for(var m;c;){if(c.nodeType===3){if(m=a+c.textContent.length,a<=i&&m>=i)return{node:c,offset:i-a};a=m}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=F0(c)}}function U0(a,i){return a&&i?a===i?!0:a&&a.nodeType===3?!1:i&&i.nodeType===3?U0(a,i.parentNode):"contains"in a?a.contains(i):a.compareDocumentPosition?!!(a.compareDocumentPosition(i)&16):!1:!1}function B0(){for(var a=window,i=Ue();i instanceof a.HTMLIFrameElement;){try{var c=typeof i.contentWindow.location.href=="string"}catch{c=!1}if(c)a=i.contentWindow;else break;i=Ue(a.document)}return i}function Oh(a){var i=a&&a.nodeName&&a.nodeName.toLowerCase();return i&&(i==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||i==="textarea"||a.contentEditable==="true")}function UC(a){var i=B0(),c=a.focusedElem,m=a.selectionRange;if(i!==c&&c&&c.ownerDocument&&U0(c.ownerDocument.documentElement,c)){if(m!==null&&Oh(c)){if(i=m.start,a=m.end,a===void 0&&(a=i),"selectionStart"in c)c.selectionStart=i,c.selectionEnd=Math.min(a,c.value.length);else if(a=(i=c.ownerDocument||document)&&i.defaultView||window,a.getSelection){a=a.getSelection();var y=c.textContent.length,w=Math.min(m.start,y);m=m.end===void 0?w:Math.min(m.end,y),!a.extend&&w>m&&(y=m,m=w,w=y),y=z0(c,w);var R=z0(c,m);y&&R&&(a.rangeCount!==1||a.anchorNode!==y.node||a.anchorOffset!==y.offset||a.focusNode!==R.node||a.focusOffset!==R.offset)&&(i=i.createRange(),i.setStart(y.node,y.offset),a.removeAllRanges(),w>m?(a.addRange(i),a.extend(R.node,R.offset)):(i.setEnd(R.node,R.offset),a.addRange(i)))}}for(i=[],a=c;a=a.parentNode;)a.nodeType===1&&i.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<i.length;c++)a=i[c],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var BC=u&&"documentMode"in document&&11>=document.documentMode,Qo=null,Lh=null,hc=null,Mh=!1;function H0(a,i,c){var m=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Mh||Qo==null||Qo!==Ue(m)||(m=Qo,"selectionStart"in m&&Oh(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),hc&&mc(hc,m)||(hc=m,m=qd(Lh,"onSelect"),0<m.length&&(i=new Ar("onSelect","select",null,i,c),a.push({event:i,listeners:m}),i.target=Qo)))}function Md(a,i){var c={};return c[a.toLowerCase()]=i.toLowerCase(),c["Webkit"+a]="webkit"+i,c["Moz"+a]="moz"+i,c}var Yo={animationend:Md("Animation","AnimationEnd"),animationiteration:Md("Animation","AnimationIteration"),animationstart:Md("Animation","AnimationStart"),transitionend:Md("Transition","TransitionEnd")},Dh={},K0={};u&&(K0=document.createElement("div").style,"AnimationEvent"in window||(delete Yo.animationend.animation,delete Yo.animationiteration.animation,delete Yo.animationstart.animation),"TransitionEvent"in window||delete Yo.transitionend.transition);function Dd(a){if(Dh[a])return Dh[a];if(!Yo[a])return a;var i=Yo[a],c;for(c in i)if(i.hasOwnProperty(c)&&c in K0)return Dh[a]=i[c];return a}var W0=Dd("animationend"),V0=Dd("animationiteration"),G0=Dd("animationstart"),Q0=Dd("transitionend"),Y0=new Map,X0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function oi(a,i){Y0.set(a,i),l(i,[a])}for(var $h=0;$h<X0.length;$h++){var qh=X0[$h],HC=qh.toLowerCase(),KC=qh[0].toUpperCase()+qh.slice(1);oi(HC,"on"+KC)}oi(W0,"onAnimationEnd"),oi(V0,"onAnimationIteration"),oi(G0,"onAnimationStart"),oi("dblclick","onDoubleClick"),oi("focusin","onFocus"),oi("focusout","onBlur"),oi(Q0,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WC=new Set("cancel close invalid load scroll toggle".split(" ").concat(fc));function Z0(a,i,c){var m=a.type||"unknown-event";a.currentTarget=c,pn(m,i,void 0,a),a.currentTarget=null}function J0(a,i){i=(i&4)!==0;for(var c=0;c<a.length;c++){var m=a[c],y=m.event;m=m.listeners;e:{var w=void 0;if(i)for(var R=m.length-1;0<=R;R--){var V=m[R],te=V.instance,pe=V.currentTarget;if(V=V.listener,te!==w&&y.isPropagationStopped())break e;Z0(y,V,pe),w=te}else for(R=0;R<m.length;R++){if(V=m[R],te=V.instance,pe=V.currentTarget,V=V.listener,te!==w&&y.isPropagationStopped())break e;Z0(y,V,pe),w=te}}}if(ts)throw a=aa,ts=!1,aa=null,a}function ss(a,i){var c=i[Vh];c===void 0&&(c=i[Vh]=new Set);var m=a+"__bubble";c.has(m)||(ev(i,a,2,!1),c.add(m))}function Fh(a,i,c){var m=0;i&&(m|=4),ev(c,a,m,i)}var $d="_reactListening"+Math.random().toString(36).slice(2);function pc(a){if(!a[$d]){a[$d]=!0,r.forEach(function(c){c!=="selectionchange"&&(WC.has(c)||Fh(c,!1,a),Fh(c,!0,a))});var i=a.nodeType===9?a:a.ownerDocument;i===null||i[$d]||(i[$d]=!0,Fh("selectionchange",!1,i))}}function ev(a,i,c,m){switch(Ct(i)){case 1:var y=ee;break;case 4:y=ve;break;default:y=dt}c=y.bind(null,i,c,a),y=void 0,!ra||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(y=!0),m?y!==void 0?a.addEventListener(i,c,{capture:!0,passive:y}):a.addEventListener(i,c,!0):y!==void 0?a.addEventListener(i,c,{passive:y}):a.addEventListener(i,c,!1)}function zh(a,i,c,m,y){var w=m;if((i&1)===0&&(i&2)===0&&m!==null)e:for(;;){if(m===null)return;var R=m.tag;if(R===3||R===4){var V=m.stateNode.containerInfo;if(V===y||V.nodeType===8&&V.parentNode===y)break;if(R===4)for(R=m.return;R!==null;){var te=R.tag;if((te===3||te===4)&&(te=R.stateNode.containerInfo,te===y||te.nodeType===8&&te.parentNode===y))return;R=R.return}for(;V!==null;){if(R=Ji(V),R===null)return;if(te=R.tag,te===5||te===6){m=w=R;continue e}V=V.parentNode}}m=m.return}ir(function(){var pe=w,Te=Is(c),Ae=[];e:{var Se=Y0.get(a);if(Se!==void 0){var qe=Ar,Ke=a;switch(a){case"keypress":if(us(c)===0)break e;case"keydown":case"keyup":qe=wC;break;case"focusin":Ke="focus",qe=Ah;break;case"focusout":Ke="blur",qe=Ah;break;case"beforeblur":case"afterblur":qe=Ah;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":qe=S0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":qe=dC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":qe=CC;break;case W0:case V0:case G0:qe=hC;break;case Q0:qe=EC;break;case"scroll":qe=Vo;break;case"wheel":qe=AC;break;case"copy":case"cut":case"paste":qe=pC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":qe=T0}var Xe=(i&4)!==0,Ts=!Xe&&a==="scroll",oe=Xe?Se!==null?Se+"Capture":null:Se;Xe=[];for(var ae=pe,de;ae!==null;){de=ae;var Re=de.stateNode;if(de.tag===5&&Re!==null&&(de=Re,oe!==null&&(Re=Ls(ae,oe),Re!=null&&Xe.push(xc(ae,Re,de)))),Ts)break;ae=ae.return}0<Xe.length&&(Se=new qe(Se,Ke,null,c,Te),Ae.push({event:Se,listeners:Xe}))}}if((i&7)===0){e:{if(Se=a==="mouseover"||a==="pointerover",qe=a==="mouseout"||a==="pointerout",Se&&c!==Qs&&(Ke=c.relatedTarget||c.fromElement)&&(Ji(Ke)||Ke[Ia]))break e;if((qe||Se)&&(Se=Te.window===Te?Te:(Se=Te.ownerDocument)?Se.defaultView||Se.parentWindow:window,qe?(Ke=c.relatedTarget||c.toElement,qe=pe,Ke=Ke?Ji(Ke):null,Ke!==null&&(Ts=Pn(Ke),Ke!==Ts||Ke.tag!==5&&Ke.tag!==6)&&(Ke=null)):(qe=null,Ke=pe),qe!==Ke)){if(Xe=S0,Re="onMouseLeave",oe="onMouseEnter",ae="mouse",(a==="pointerout"||a==="pointerover")&&(Xe=T0,Re="onPointerLeave",oe="onPointerEnter",ae="pointer"),Ts=qe==null?Se:Jo(qe),de=Ke==null?Se:Jo(Ke),Se=new Xe(Re,ae+"leave",qe,c,Te),Se.target=Ts,Se.relatedTarget=de,Re=null,Ji(Te)===pe&&(Xe=new Xe(oe,ae+"enter",Ke,c,Te),Xe.target=de,Xe.relatedTarget=Ts,Re=Xe),Ts=Re,qe&&Ke)t:{for(Xe=qe,oe=Ke,ae=0,de=Xe;de;de=Xo(de))ae++;for(de=0,Re=oe;Re;Re=Xo(Re))de++;for(;0<ae-de;)Xe=Xo(Xe),ae--;for(;0<de-ae;)oe=Xo(oe),de--;for(;ae--;){if(Xe===oe||oe!==null&&Xe===oe.alternate)break t;Xe=Xo(Xe),oe=Xo(oe)}Xe=null}else Xe=null;qe!==null&&tv(Ae,Se,qe,Xe,!1),Ke!==null&&Ts!==null&&tv(Ae,Ts,Ke,Xe,!0)}}e:{if(Se=pe?Jo(pe):window,qe=Se.nodeName&&Se.nodeName.toLowerCase(),qe==="select"||qe==="input"&&Se.type==="file")var tt=MC;else if(O0(Se))if(M0)tt=FC;else{tt=$C;var at=DC}else(qe=Se.nodeName)&&qe.toLowerCase()==="input"&&(Se.type==="checkbox"||Se.type==="radio")&&(tt=qC);if(tt&&(tt=tt(a,pe))){L0(Ae,tt,c,Te);break e}at&&at(a,Se,pe),a==="focusout"&&(at=Se._wrapperState)&&at.controlled&&Se.type==="number"&&ks(Se,"number",Se.value)}switch(at=pe?Jo(pe):window,a){case"focusin":(O0(at)||at.contentEditable==="true")&&(Qo=at,Lh=pe,hc=null);break;case"focusout":hc=Lh=Qo=null;break;case"mousedown":Mh=!0;break;case"contextmenu":case"mouseup":case"dragend":Mh=!1,H0(Ae,c,Te);break;case"selectionchange":if(BC)break;case"keydown":case"keyup":H0(Ae,c,Te)}var it;if(Rh)e:{switch(a){case"compositionstart":var ut="onCompositionStart";break e;case"compositionend":ut="onCompositionEnd";break e;case"compositionupdate":ut="onCompositionUpdate";break e}ut=void 0}else Go?_0(a,c)&&(ut="onCompositionEnd"):a==="keydown"&&c.keyCode===229&&(ut="onCompositionStart");ut&&(A0&&c.locale!=="ko"&&(Go||ut!=="onCompositionStart"?ut==="onCompositionEnd"&&Go&&(it=Zs()):(Ht=Te,Tt="value"in Ht?Ht.value:Ht.textContent,Go=!0)),at=qd(pe,ut),0<at.length&&(ut=new E0(ut,a,null,c,Te),Ae.push({event:ut,listeners:at}),it?ut.data=it:(it=I0(c),it!==null&&(ut.data=it)))),(it=RC?_C(a,c):IC(a,c))&&(pe=qd(pe,"onBeforeInput"),0<pe.length&&(Te=new E0("onBeforeInput","beforeinput",null,c,Te),Ae.push({event:Te,listeners:pe}),Te.data=it))}J0(Ae,i)})}function xc(a,i,c){return{instance:a,listener:i,currentTarget:c}}function qd(a,i){for(var c=i+"Capture",m=[];a!==null;){var y=a,w=y.stateNode;y.tag===5&&w!==null&&(y=w,w=Ls(a,c),w!=null&&m.unshift(xc(a,w,y)),w=Ls(a,i),w!=null&&m.push(xc(a,w,y))),a=a.return}return m}function Xo(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function tv(a,i,c,m,y){for(var w=i._reactName,R=[];c!==null&&c!==m;){var V=c,te=V.alternate,pe=V.stateNode;if(te!==null&&te===m)break;V.tag===5&&pe!==null&&(V=pe,y?(te=Ls(c,w),te!=null&&R.unshift(xc(c,te,V))):y||(te=Ls(c,w),te!=null&&R.push(xc(c,te,V)))),c=c.return}R.length!==0&&a.push({event:i,listeners:R})}var VC=/\r\n?/g,GC=/\u0000|\uFFFD/g;function sv(a){return(typeof a=="string"?a:""+a).replace(VC,`
`).replace(GC,"")}function Fd(a,i,c){if(i=sv(i),sv(a)!==i&&c)throw Error(n(425))}function zd(){}var Uh=null,Bh=null;function Hh(a,i){return a==="textarea"||a==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Kh=typeof setTimeout=="function"?setTimeout:void 0,QC=typeof clearTimeout=="function"?clearTimeout:void 0,nv=typeof Promise=="function"?Promise:void 0,YC=typeof queueMicrotask=="function"?queueMicrotask:typeof nv<"u"?function(a){return nv.resolve(null).then(a).catch(XC)}:Kh;function XC(a){setTimeout(function(){throw a})}function Wh(a,i){var c=i,m=0;do{var y=c.nextSibling;if(a.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"){if(m===0){a.removeChild(y),_a(i);return}m--}else c!=="$"&&c!=="$?"&&c!=="$!"||m++;c=y}while(c);_a(i)}function li(a){for(;a!=null;a=a.nextSibling){var i=a.nodeType;if(i===1||i===3)break;if(i===8){if(i=a.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return a}function rv(a){a=a.previousSibling;for(var i=0;a;){if(a.nodeType===8){var c=a.data;if(c==="$"||c==="$!"||c==="$?"){if(i===0)return a;i--}else c==="/$"&&i++}a=a.previousSibling}return null}var Zo=Math.random().toString(36).slice(2),da="__reactFiber$"+Zo,gc="__reactProps$"+Zo,Ia="__reactContainer$"+Zo,Vh="__reactEvents$"+Zo,ZC="__reactListeners$"+Zo,JC="__reactHandles$"+Zo;function Ji(a){var i=a[da];if(i)return i;for(var c=a.parentNode;c;){if(i=c[Ia]||c[da]){if(c=i.alternate,i.child!==null||c!==null&&c.child!==null)for(a=rv(a);a!==null;){if(c=a[da])return c;a=rv(a)}return i}a=c,c=a.parentNode}return null}function vc(a){return a=a[da]||a[Ia],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Jo(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(n(33))}function Ud(a){return a[gc]||null}var Gh=[],el=-1;function ci(a){return{current:a}}function ns(a){0>el||(a.current=Gh[el],Gh[el]=null,el--)}function Jt(a,i){el++,Gh[el]=a.current,a.current=i}var di={},cn=ci(di),_n=ci(!1),eo=di;function tl(a,i){var c=a.type.contextTypes;if(!c)return di;var m=a.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===i)return m.__reactInternalMemoizedMaskedChildContext;var y={},w;for(w in c)y[w]=i[w];return m&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=i,a.__reactInternalMemoizedMaskedChildContext=y),y}function In(a){return a=a.childContextTypes,a!=null}function Bd(){ns(_n),ns(cn)}function av(a,i,c){if(cn.current!==di)throw Error(n(168));Jt(cn,i),Jt(_n,c)}function iv(a,i,c){var m=a.stateNode;if(i=i.childContextTypes,typeof m.getChildContext!="function")return c;m=m.getChildContext();for(var y in m)if(!(y in i))throw Error(n(108,ie(a)||"Unknown",y));return Z({},c,m)}function Hd(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||di,eo=cn.current,Jt(cn,a),Jt(_n,_n.current),!0}function ov(a,i,c){var m=a.stateNode;if(!m)throw Error(n(169));c?(a=iv(a,i,eo),m.__reactInternalMemoizedMergedChildContext=a,ns(_n),ns(cn),Jt(cn,a)):ns(_n),Jt(_n,c)}var Oa=null,Kd=!1,Qh=!1;function lv(a){Oa===null?Oa=[a]:Oa.push(a)}function eS(a){Kd=!0,lv(a)}function ui(){if(!Qh&&Oa!==null){Qh=!0;var a=0,i=ft;try{var c=Oa;for(ft=1;a<c.length;a++){var m=c[a];do m=m(!0);while(m!==null)}Oa=null,Kd=!1}catch(y){throw Oa!==null&&(Oa=Oa.slice(a+1)),se(js,ui),y}finally{ft=i,Qh=!1}}return null}var sl=[],nl=0,Wd=null,Vd=0,hr=[],fr=0,to=null,La=1,Ma="";function so(a,i){sl[nl++]=Vd,sl[nl++]=Wd,Wd=a,Vd=i}function cv(a,i,c){hr[fr++]=La,hr[fr++]=Ma,hr[fr++]=to,to=a;var m=La;a=Ma;var y=32-xn(m)-1;m&=~(1<<y),c+=1;var w=32-xn(i)+y;if(30<w){var R=y-y%5;w=(m&(1<<R)-1).toString(32),m>>=R,y-=R,La=1<<32-xn(i)+y|c<<y|m,Ma=w+a}else La=1<<w|c<<y|m,Ma=a}function Yh(a){a.return!==null&&(so(a,1),cv(a,1,0))}function Xh(a){for(;a===Wd;)Wd=sl[--nl],sl[nl]=null,Vd=sl[--nl],sl[nl]=null;for(;a===to;)to=hr[--fr],hr[fr]=null,Ma=hr[--fr],hr[fr]=null,La=hr[--fr],hr[fr]=null}var Qn=null,Yn=null,ms=!1,Rr=null;function dv(a,i){var c=vr(5,null,null,0);c.elementType="DELETED",c.stateNode=i,c.return=a,i=a.deletions,i===null?(a.deletions=[c],a.flags|=16):i.push(c)}function uv(a,i){switch(a.tag){case 5:var c=a.type;return i=i.nodeType!==1||c.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(a.stateNode=i,Qn=a,Yn=li(i.firstChild),!0):!1;case 6:return i=a.pendingProps===""||i.nodeType!==3?null:i,i!==null?(a.stateNode=i,Qn=a,Yn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(c=to!==null?{id:La,overflow:Ma}:null,a.memoizedState={dehydrated:i,treeContext:c,retryLane:1073741824},c=vr(18,null,null,0),c.stateNode=i,c.return=a,a.child=c,Qn=a,Yn=null,!0):!1;default:return!1}}function Zh(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Jh(a){if(ms){var i=Yn;if(i){var c=i;if(!uv(a,i)){if(Zh(a))throw Error(n(418));i=li(c.nextSibling);var m=Qn;i&&uv(a,i)?dv(m,c):(a.flags=a.flags&-4097|2,ms=!1,Qn=a)}}else{if(Zh(a))throw Error(n(418));a.flags=a.flags&-4097|2,ms=!1,Qn=a}}}function mv(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;Qn=a}function Gd(a){if(a!==Qn)return!1;if(!ms)return mv(a),ms=!0,!1;var i;if((i=a.tag!==3)&&!(i=a.tag!==5)&&(i=a.type,i=i!=="head"&&i!=="body"&&!Hh(a.type,a.memoizedProps)),i&&(i=Yn)){if(Zh(a))throw hv(),Error(n(418));for(;i;)dv(a,i),i=li(i.nextSibling)}if(mv(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));e:{for(a=a.nextSibling,i=0;a;){if(a.nodeType===8){var c=a.data;if(c==="/$"){if(i===0){Yn=li(a.nextSibling);break e}i--}else c!=="$"&&c!=="$!"&&c!=="$?"||i++}a=a.nextSibling}Yn=null}}else Yn=Qn?li(a.stateNode.nextSibling):null;return!0}function hv(){for(var a=Yn;a;)a=li(a.nextSibling)}function rl(){Yn=Qn=null,ms=!1}function ef(a){Rr===null?Rr=[a]:Rr.push(a)}var tS=P.ReactCurrentBatchConfig;function yc(a,i,c){if(a=c.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(n(309));var m=c.stateNode}if(!m)throw Error(n(147,a));var y=m,w=""+a;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===w?i.ref:(i=function(R){var V=y.refs;R===null?delete V[w]:V[w]=R},i._stringRef=w,i)}if(typeof a!="string")throw Error(n(284));if(!c._owner)throw Error(n(290,a))}return a}function Qd(a,i){throw a=Object.prototype.toString.call(i),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":a))}function fv(a){var i=a._init;return i(a._payload)}function pv(a){function i(oe,ae){if(a){var de=oe.deletions;de===null?(oe.deletions=[ae],oe.flags|=16):de.push(ae)}}function c(oe,ae){if(!a)return null;for(;ae!==null;)i(oe,ae),ae=ae.sibling;return null}function m(oe,ae){for(oe=new Map;ae!==null;)ae.key!==null?oe.set(ae.key,ae):oe.set(ae.index,ae),ae=ae.sibling;return oe}function y(oe,ae){return oe=yi(oe,ae),oe.index=0,oe.sibling=null,oe}function w(oe,ae,de){return oe.index=de,a?(de=oe.alternate,de!==null?(de=de.index,de<ae?(oe.flags|=2,ae):de):(oe.flags|=2,ae)):(oe.flags|=1048576,ae)}function R(oe){return a&&oe.alternate===null&&(oe.flags|=2),oe}function V(oe,ae,de,Re){return ae===null||ae.tag!==6?(ae=Wf(de,oe.mode,Re),ae.return=oe,ae):(ae=y(ae,de),ae.return=oe,ae)}function te(oe,ae,de,Re){var tt=de.type;return tt===B?Te(oe,ae,de.props.children,Re,de.key):ae!==null&&(ae.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===$&&fv(tt)===ae.type)?(Re=y(ae,de.props),Re.ref=yc(oe,ae,de),Re.return=oe,Re):(Re=yu(de.type,de.key,de.props,null,oe.mode,Re),Re.ref=yc(oe,ae,de),Re.return=oe,Re)}function pe(oe,ae,de,Re){return ae===null||ae.tag!==4||ae.stateNode.containerInfo!==de.containerInfo||ae.stateNode.implementation!==de.implementation?(ae=Vf(de,oe.mode,Re),ae.return=oe,ae):(ae=y(ae,de.children||[]),ae.return=oe,ae)}function Te(oe,ae,de,Re,tt){return ae===null||ae.tag!==7?(ae=uo(de,oe.mode,Re,tt),ae.return=oe,ae):(ae=y(ae,de),ae.return=oe,ae)}function Ae(oe,ae,de){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return ae=Wf(""+ae,oe.mode,de),ae.return=oe,ae;if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case H:return de=yu(ae.type,ae.key,ae.props,null,oe.mode,de),de.ref=yc(oe,null,ae),de.return=oe,de;case re:return ae=Vf(ae,oe.mode,de),ae.return=oe,ae;case $:var Re=ae._init;return Ae(oe,Re(ae._payload),de)}if(cs(ae)||W(ae))return ae=uo(ae,oe.mode,de,null),ae.return=oe,ae;Qd(oe,ae)}return null}function Se(oe,ae,de,Re){var tt=ae!==null?ae.key:null;if(typeof de=="string"&&de!==""||typeof de=="number")return tt!==null?null:V(oe,ae,""+de,Re);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case H:return de.key===tt?te(oe,ae,de,Re):null;case re:return de.key===tt?pe(oe,ae,de,Re):null;case $:return tt=de._init,Se(oe,ae,tt(de._payload),Re)}if(cs(de)||W(de))return tt!==null?null:Te(oe,ae,de,Re,null);Qd(oe,de)}return null}function qe(oe,ae,de,Re,tt){if(typeof Re=="string"&&Re!==""||typeof Re=="number")return oe=oe.get(de)||null,V(ae,oe,""+Re,tt);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case H:return oe=oe.get(Re.key===null?de:Re.key)||null,te(ae,oe,Re,tt);case re:return oe=oe.get(Re.key===null?de:Re.key)||null,pe(ae,oe,Re,tt);case $:var at=Re._init;return qe(oe,ae,de,at(Re._payload),tt)}if(cs(Re)||W(Re))return oe=oe.get(de)||null,Te(ae,oe,Re,tt,null);Qd(ae,Re)}return null}function Ke(oe,ae,de,Re){for(var tt=null,at=null,it=ae,ut=ae=0,Gs=null;it!==null&&ut<de.length;ut++){it.index>ut?(Gs=it,it=null):Gs=it.sibling;var Mt=Se(oe,it,de[ut],Re);if(Mt===null){it===null&&(it=Gs);break}a&&it&&Mt.alternate===null&&i(oe,it),ae=w(Mt,ae,ut),at===null?tt=Mt:at.sibling=Mt,at=Mt,it=Gs}if(ut===de.length)return c(oe,it),ms&&so(oe,ut),tt;if(it===null){for(;ut<de.length;ut++)it=Ae(oe,de[ut],Re),it!==null&&(ae=w(it,ae,ut),at===null?tt=it:at.sibling=it,at=it);return ms&&so(oe,ut),tt}for(it=m(oe,it);ut<de.length;ut++)Gs=qe(it,oe,ut,de[ut],Re),Gs!==null&&(a&&Gs.alternate!==null&&it.delete(Gs.key===null?ut:Gs.key),ae=w(Gs,ae,ut),at===null?tt=Gs:at.sibling=Gs,at=Gs);return a&&it.forEach(function(bi){return i(oe,bi)}),ms&&so(oe,ut),tt}function Xe(oe,ae,de,Re){var tt=W(de);if(typeof tt!="function")throw Error(n(150));if(de=tt.call(de),de==null)throw Error(n(151));for(var at=tt=null,it=ae,ut=ae=0,Gs=null,Mt=de.next();it!==null&&!Mt.done;ut++,Mt=de.next()){it.index>ut?(Gs=it,it=null):Gs=it.sibling;var bi=Se(oe,it,Mt.value,Re);if(bi===null){it===null&&(it=Gs);break}a&&it&&bi.alternate===null&&i(oe,it),ae=w(bi,ae,ut),at===null?tt=bi:at.sibling=bi,at=bi,it=Gs}if(Mt.done)return c(oe,it),ms&&so(oe,ut),tt;if(it===null){for(;!Mt.done;ut++,Mt=de.next())Mt=Ae(oe,Mt.value,Re),Mt!==null&&(ae=w(Mt,ae,ut),at===null?tt=Mt:at.sibling=Mt,at=Mt);return ms&&so(oe,ut),tt}for(it=m(oe,it);!Mt.done;ut++,Mt=de.next())Mt=qe(it,oe,ut,Mt.value,Re),Mt!==null&&(a&&Mt.alternate!==null&&it.delete(Mt.key===null?ut:Mt.key),ae=w(Mt,ae,ut),at===null?tt=Mt:at.sibling=Mt,at=Mt);return a&&it.forEach(function(OS){return i(oe,OS)}),ms&&so(oe,ut),tt}function Ts(oe,ae,de,Re){if(typeof de=="object"&&de!==null&&de.type===B&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case H:e:{for(var tt=de.key,at=ae;at!==null;){if(at.key===tt){if(tt=de.type,tt===B){if(at.tag===7){c(oe,at.sibling),ae=y(at,de.props.children),ae.return=oe,oe=ae;break e}}else if(at.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===$&&fv(tt)===at.type){c(oe,at.sibling),ae=y(at,de.props),ae.ref=yc(oe,at,de),ae.return=oe,oe=ae;break e}c(oe,at);break}else i(oe,at);at=at.sibling}de.type===B?(ae=uo(de.props.children,oe.mode,Re,de.key),ae.return=oe,oe=ae):(Re=yu(de.type,de.key,de.props,null,oe.mode,Re),Re.ref=yc(oe,ae,de),Re.return=oe,oe=Re)}return R(oe);case re:e:{for(at=de.key;ae!==null;){if(ae.key===at)if(ae.tag===4&&ae.stateNode.containerInfo===de.containerInfo&&ae.stateNode.implementation===de.implementation){c(oe,ae.sibling),ae=y(ae,de.children||[]),ae.return=oe,oe=ae;break e}else{c(oe,ae);break}else i(oe,ae);ae=ae.sibling}ae=Vf(de,oe.mode,Re),ae.return=oe,oe=ae}return R(oe);case $:return at=de._init,Ts(oe,ae,at(de._payload),Re)}if(cs(de))return Ke(oe,ae,de,Re);if(W(de))return Xe(oe,ae,de,Re);Qd(oe,de)}return typeof de=="string"&&de!==""||typeof de=="number"?(de=""+de,ae!==null&&ae.tag===6?(c(oe,ae.sibling),ae=y(ae,de),ae.return=oe,oe=ae):(c(oe,ae),ae=Wf(de,oe.mode,Re),ae.return=oe,oe=ae),R(oe)):c(oe,ae)}return Ts}var al=pv(!0),xv=pv(!1),Yd=ci(null),Xd=null,il=null,tf=null;function sf(){tf=il=Xd=null}function nf(a){var i=Yd.current;ns(Yd),a._currentValue=i}function rf(a,i,c){for(;a!==null;){var m=a.alternate;if((a.childLanes&i)!==i?(a.childLanes|=i,m!==null&&(m.childLanes|=i)):m!==null&&(m.childLanes&i)!==i&&(m.childLanes|=i),a===c)break;a=a.return}}function ol(a,i){Xd=a,tf=il=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&i)!==0&&(On=!0),a.firstContext=null)}function pr(a){var i=a._currentValue;if(tf!==a)if(a={context:a,memoizedValue:i,next:null},il===null){if(Xd===null)throw Error(n(308));il=a,Xd.dependencies={lanes:0,firstContext:a}}else il=il.next=a;return i}var no=null;function af(a){no===null?no=[a]:no.push(a)}function gv(a,i,c,m){var y=i.interleaved;return y===null?(c.next=c,af(i)):(c.next=y.next,y.next=c),i.interleaved=c,Da(a,m)}function Da(a,i){a.lanes|=i;var c=a.alternate;for(c!==null&&(c.lanes|=i),c=a,a=a.return;a!==null;)a.childLanes|=i,c=a.alternate,c!==null&&(c.childLanes|=i),c=a,a=a.return;return c.tag===3?c.stateNode:null}var mi=!1;function of(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vv(a,i){a=a.updateQueue,i.updateQueue===a&&(i.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function $a(a,i){return{eventTime:a,lane:i,tag:0,payload:null,callback:null,next:null}}function hi(a,i,c){var m=a.updateQueue;if(m===null)return null;if(m=m.shared,(_t&2)!==0){var y=m.pending;return y===null?i.next=i:(i.next=y.next,y.next=i),m.pending=i,Da(a,c)}return y=m.interleaved,y===null?(i.next=i,af(m)):(i.next=y.next,y.next=i),m.interleaved=i,Da(a,c)}function Zd(a,i,c){if(i=i.updateQueue,i!==null&&(i=i.shared,(c&4194240)!==0)){var m=i.lanes;m&=a.pendingLanes,c|=m,i.lanes=c,Tr(a,c)}}function yv(a,i){var c=a.updateQueue,m=a.alternate;if(m!==null&&(m=m.updateQueue,c===m)){var y=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var R={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};w===null?y=w=R:w=w.next=R,c=c.next}while(c!==null);w===null?y=w=i:w=w.next=i}else y=w=i;c={baseState:m.baseState,firstBaseUpdate:y,lastBaseUpdate:w,shared:m.shared,effects:m.effects},a.updateQueue=c;return}a=c.lastBaseUpdate,a===null?c.firstBaseUpdate=i:a.next=i,c.lastBaseUpdate=i}function Jd(a,i,c,m){var y=a.updateQueue;mi=!1;var w=y.firstBaseUpdate,R=y.lastBaseUpdate,V=y.shared.pending;if(V!==null){y.shared.pending=null;var te=V,pe=te.next;te.next=null,R===null?w=pe:R.next=pe,R=te;var Te=a.alternate;Te!==null&&(Te=Te.updateQueue,V=Te.lastBaseUpdate,V!==R&&(V===null?Te.firstBaseUpdate=pe:V.next=pe,Te.lastBaseUpdate=te))}if(w!==null){var Ae=y.baseState;R=0,Te=pe=te=null,V=w;do{var Se=V.lane,qe=V.eventTime;if((m&Se)===Se){Te!==null&&(Te=Te.next={eventTime:qe,lane:0,tag:V.tag,payload:V.payload,callback:V.callback,next:null});e:{var Ke=a,Xe=V;switch(Se=i,qe=c,Xe.tag){case 1:if(Ke=Xe.payload,typeof Ke=="function"){Ae=Ke.call(qe,Ae,Se);break e}Ae=Ke;break e;case 3:Ke.flags=Ke.flags&-65537|128;case 0:if(Ke=Xe.payload,Se=typeof Ke=="function"?Ke.call(qe,Ae,Se):Ke,Se==null)break e;Ae=Z({},Ae,Se);break e;case 2:mi=!0}}V.callback!==null&&V.lane!==0&&(a.flags|=64,Se=y.effects,Se===null?y.effects=[V]:Se.push(V))}else qe={eventTime:qe,lane:Se,tag:V.tag,payload:V.payload,callback:V.callback,next:null},Te===null?(pe=Te=qe,te=Ae):Te=Te.next=qe,R|=Se;if(V=V.next,V===null){if(V=y.shared.pending,V===null)break;Se=V,V=Se.next,Se.next=null,y.lastBaseUpdate=Se,y.shared.pending=null}}while(!0);if(Te===null&&(te=Ae),y.baseState=te,y.firstBaseUpdate=pe,y.lastBaseUpdate=Te,i=y.shared.interleaved,i!==null){y=i;do R|=y.lane,y=y.next;while(y!==i)}else w===null&&(y.shared.lanes=0);io|=R,a.lanes=R,a.memoizedState=Ae}}function bv(a,i,c){if(a=i.effects,i.effects=null,a!==null)for(i=0;i<a.length;i++){var m=a[i],y=m.callback;if(y!==null){if(m.callback=null,m=c,typeof y!="function")throw Error(n(191,y));y.call(m)}}}var bc={},ua=ci(bc),jc=ci(bc),wc=ci(bc);function ro(a){if(a===bc)throw Error(n(174));return a}function lf(a,i){switch(Jt(wc,i),Jt(jc,a),Jt(ua,bc),a=i.nodeType,a){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:nt(null,"");break;default:a=a===8?i.parentNode:i,i=a.namespaceURI||null,a=a.tagName,i=nt(i,a)}ns(ua),Jt(ua,i)}function ll(){ns(ua),ns(jc),ns(wc)}function jv(a){ro(wc.current);var i=ro(ua.current),c=nt(i,a.type);i!==c&&(Jt(jc,a),Jt(ua,c))}function cf(a){jc.current===a&&(ns(ua),ns(jc))}var gs=ci(0);function eu(a){for(var i=a;i!==null;){if(i.tag===13){var c=i.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break;for(;i.sibling===null;){if(i.return===null||i.return===a)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var df=[];function uf(){for(var a=0;a<df.length;a++)df[a]._workInProgressVersionPrimary=null;df.length=0}var tu=P.ReactCurrentDispatcher,mf=P.ReactCurrentBatchConfig,ao=0,vs=null,Ds=null,Ws=null,su=!1,Nc=!1,kc=0,sS=0;function dn(){throw Error(n(321))}function hf(a,i){if(i===null)return!1;for(var c=0;c<i.length&&c<a.length;c++)if(!Pr(a[c],i[c]))return!1;return!0}function ff(a,i,c,m,y,w){if(ao=w,vs=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,tu.current=a===null||a.memoizedState===null?iS:oS,a=c(m,y),Nc){w=0;do{if(Nc=!1,kc=0,25<=w)throw Error(n(301));w+=1,Ws=Ds=null,i.updateQueue=null,tu.current=lS,a=c(m,y)}while(Nc)}if(tu.current=au,i=Ds!==null&&Ds.next!==null,ao=0,Ws=Ds=vs=null,su=!1,i)throw Error(n(300));return a}function pf(){var a=kc!==0;return kc=0,a}function ma(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ws===null?vs.memoizedState=Ws=a:Ws=Ws.next=a,Ws}function xr(){if(Ds===null){var a=vs.alternate;a=a!==null?a.memoizedState:null}else a=Ds.next;var i=Ws===null?vs.memoizedState:Ws.next;if(i!==null)Ws=i,Ds=a;else{if(a===null)throw Error(n(310));Ds=a,a={memoizedState:Ds.memoizedState,baseState:Ds.baseState,baseQueue:Ds.baseQueue,queue:Ds.queue,next:null},Ws===null?vs.memoizedState=Ws=a:Ws=Ws.next=a}return Ws}function Cc(a,i){return typeof i=="function"?i(a):i}function xf(a){var i=xr(),c=i.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=a;var m=Ds,y=m.baseQueue,w=c.pending;if(w!==null){if(y!==null){var R=y.next;y.next=w.next,w.next=R}m.baseQueue=y=w,c.pending=null}if(y!==null){w=y.next,m=m.baseState;var V=R=null,te=null,pe=w;do{var Te=pe.lane;if((ao&Te)===Te)te!==null&&(te=te.next={lane:0,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null}),m=pe.hasEagerState?pe.eagerState:a(m,pe.action);else{var Ae={lane:Te,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null};te===null?(V=te=Ae,R=m):te=te.next=Ae,vs.lanes|=Te,io|=Te}pe=pe.next}while(pe!==null&&pe!==w);te===null?R=m:te.next=V,Pr(m,i.memoizedState)||(On=!0),i.memoizedState=m,i.baseState=R,i.baseQueue=te,c.lastRenderedState=m}if(a=c.interleaved,a!==null){y=a;do w=y.lane,vs.lanes|=w,io|=w,y=y.next;while(y!==a)}else y===null&&(c.lanes=0);return[i.memoizedState,c.dispatch]}function gf(a){var i=xr(),c=i.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=a;var m=c.dispatch,y=c.pending,w=i.memoizedState;if(y!==null){c.pending=null;var R=y=y.next;do w=a(w,R.action),R=R.next;while(R!==y);Pr(w,i.memoizedState)||(On=!0),i.memoizedState=w,i.baseQueue===null&&(i.baseState=w),c.lastRenderedState=w}return[w,m]}function wv(){}function Nv(a,i){var c=vs,m=xr(),y=i(),w=!Pr(m.memoizedState,y);if(w&&(m.memoizedState=y,On=!0),m=m.queue,vf(Sv.bind(null,c,m,a),[a]),m.getSnapshot!==i||w||Ws!==null&&Ws.memoizedState.tag&1){if(c.flags|=2048,Sc(9,Cv.bind(null,c,m,y,i),void 0,null),Vs===null)throw Error(n(349));(ao&30)!==0||kv(c,i,y)}return y}function kv(a,i,c){a.flags|=16384,a={getSnapshot:i,value:c},i=vs.updateQueue,i===null?(i={lastEffect:null,stores:null},vs.updateQueue=i,i.stores=[a]):(c=i.stores,c===null?i.stores=[a]:c.push(a))}function Cv(a,i,c,m){i.value=c,i.getSnapshot=m,Ev(i)&&Tv(a)}function Sv(a,i,c){return c(function(){Ev(i)&&Tv(a)})}function Ev(a){var i=a.getSnapshot;a=a.value;try{var c=i();return!Pr(a,c)}catch{return!0}}function Tv(a){var i=Da(a,1);i!==null&&Lr(i,a,1,-1)}function Av(a){var i=ma();return typeof a=="function"&&(a=a()),i.memoizedState=i.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cc,lastRenderedState:a},i.queue=a,a=a.dispatch=aS.bind(null,vs,a),[i.memoizedState,a]}function Sc(a,i,c,m){return a={tag:a,create:i,destroy:c,deps:m,next:null},i=vs.updateQueue,i===null?(i={lastEffect:null,stores:null},vs.updateQueue=i,i.lastEffect=a.next=a):(c=i.lastEffect,c===null?i.lastEffect=a.next=a:(m=c.next,c.next=a,a.next=m,i.lastEffect=a)),a}function Pv(){return xr().memoizedState}function nu(a,i,c,m){var y=ma();vs.flags|=a,y.memoizedState=Sc(1|i,c,void 0,m===void 0?null:m)}function ru(a,i,c,m){var y=xr();m=m===void 0?null:m;var w=void 0;if(Ds!==null){var R=Ds.memoizedState;if(w=R.destroy,m!==null&&hf(m,R.deps)){y.memoizedState=Sc(i,c,w,m);return}}vs.flags|=a,y.memoizedState=Sc(1|i,c,w,m)}function Rv(a,i){return nu(8390656,8,a,i)}function vf(a,i){return ru(2048,8,a,i)}function _v(a,i){return ru(4,2,a,i)}function Iv(a,i){return ru(4,4,a,i)}function Ov(a,i){if(typeof i=="function")return a=a(),i(a),function(){i(null)};if(i!=null)return a=a(),i.current=a,function(){i.current=null}}function Lv(a,i,c){return c=c!=null?c.concat([a]):null,ru(4,4,Ov.bind(null,i,a),c)}function yf(){}function Mv(a,i){var c=xr();i=i===void 0?null:i;var m=c.memoizedState;return m!==null&&i!==null&&hf(i,m[1])?m[0]:(c.memoizedState=[a,i],a)}function Dv(a,i){var c=xr();i=i===void 0?null:i;var m=c.memoizedState;return m!==null&&i!==null&&hf(i,m[1])?m[0]:(a=a(),c.memoizedState=[a,i],a)}function $v(a,i,c){return(ao&21)===0?(a.baseState&&(a.baseState=!1,On=!0),a.memoizedState=c):(Pr(c,i)||(c=Bo(),vs.lanes|=c,io|=c,a.baseState=!0),i)}function nS(a,i){var c=ft;ft=c!==0&&4>c?c:4,a(!0);var m=mf.transition;mf.transition={};try{a(!1),i()}finally{ft=c,mf.transition=m}}function qv(){return xr().memoizedState}function rS(a,i,c){var m=gi(a);if(c={lane:m,action:c,hasEagerState:!1,eagerState:null,next:null},Fv(a))zv(i,c);else if(c=gv(a,i,c,m),c!==null){var y=yn();Lr(c,a,m,y),Uv(c,i,m)}}function aS(a,i,c){var m=gi(a),y={lane:m,action:c,hasEagerState:!1,eagerState:null,next:null};if(Fv(a))zv(i,y);else{var w=a.alternate;if(a.lanes===0&&(w===null||w.lanes===0)&&(w=i.lastRenderedReducer,w!==null))try{var R=i.lastRenderedState,V=w(R,c);if(y.hasEagerState=!0,y.eagerState=V,Pr(V,R)){var te=i.interleaved;te===null?(y.next=y,af(i)):(y.next=te.next,te.next=y),i.interleaved=y;return}}catch{}c=gv(a,i,y,m),c!==null&&(y=yn(),Lr(c,a,m,y),Uv(c,i,m))}}function Fv(a){var i=a.alternate;return a===vs||i!==null&&i===vs}function zv(a,i){Nc=su=!0;var c=a.pending;c===null?i.next=i:(i.next=c.next,c.next=i),a.pending=i}function Uv(a,i,c){if((c&4194240)!==0){var m=i.lanes;m&=a.pendingLanes,c|=m,i.lanes=c,Tr(a,c)}}var au={readContext:pr,useCallback:dn,useContext:dn,useEffect:dn,useImperativeHandle:dn,useInsertionEffect:dn,useLayoutEffect:dn,useMemo:dn,useReducer:dn,useRef:dn,useState:dn,useDebugValue:dn,useDeferredValue:dn,useTransition:dn,useMutableSource:dn,useSyncExternalStore:dn,useId:dn,unstable_isNewReconciler:!1},iS={readContext:pr,useCallback:function(a,i){return ma().memoizedState=[a,i===void 0?null:i],a},useContext:pr,useEffect:Rv,useImperativeHandle:function(a,i,c){return c=c!=null?c.concat([a]):null,nu(4194308,4,Ov.bind(null,i,a),c)},useLayoutEffect:function(a,i){return nu(4194308,4,a,i)},useInsertionEffect:function(a,i){return nu(4,2,a,i)},useMemo:function(a,i){var c=ma();return i=i===void 0?null:i,a=a(),c.memoizedState=[a,i],a},useReducer:function(a,i,c){var m=ma();return i=c!==void 0?c(i):i,m.memoizedState=m.baseState=i,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:i},m.queue=a,a=a.dispatch=rS.bind(null,vs,a),[m.memoizedState,a]},useRef:function(a){var i=ma();return a={current:a},i.memoizedState=a},useState:Av,useDebugValue:yf,useDeferredValue:function(a){return ma().memoizedState=a},useTransition:function(){var a=Av(!1),i=a[0];return a=nS.bind(null,a[1]),ma().memoizedState=a,[i,a]},useMutableSource:function(){},useSyncExternalStore:function(a,i,c){var m=vs,y=ma();if(ms){if(c===void 0)throw Error(n(407));c=c()}else{if(c=i(),Vs===null)throw Error(n(349));(ao&30)!==0||kv(m,i,c)}y.memoizedState=c;var w={value:c,getSnapshot:i};return y.queue=w,Rv(Sv.bind(null,m,w,a),[a]),m.flags|=2048,Sc(9,Cv.bind(null,m,w,c,i),void 0,null),c},useId:function(){var a=ma(),i=Vs.identifierPrefix;if(ms){var c=Ma,m=La;c=(m&~(1<<32-xn(m)-1)).toString(32)+c,i=":"+i+"R"+c,c=kc++,0<c&&(i+="H"+c.toString(32)),i+=":"}else c=sS++,i=":"+i+"r"+c.toString(32)+":";return a.memoizedState=i},unstable_isNewReconciler:!1},oS={readContext:pr,useCallback:Mv,useContext:pr,useEffect:vf,useImperativeHandle:Lv,useInsertionEffect:_v,useLayoutEffect:Iv,useMemo:Dv,useReducer:xf,useRef:Pv,useState:function(){return xf(Cc)},useDebugValue:yf,useDeferredValue:function(a){var i=xr();return $v(i,Ds.memoizedState,a)},useTransition:function(){var a=xf(Cc)[0],i=xr().memoizedState;return[a,i]},useMutableSource:wv,useSyncExternalStore:Nv,useId:qv,unstable_isNewReconciler:!1},lS={readContext:pr,useCallback:Mv,useContext:pr,useEffect:vf,useImperativeHandle:Lv,useInsertionEffect:_v,useLayoutEffect:Iv,useMemo:Dv,useReducer:gf,useRef:Pv,useState:function(){return gf(Cc)},useDebugValue:yf,useDeferredValue:function(a){var i=xr();return Ds===null?i.memoizedState=a:$v(i,Ds.memoizedState,a)},useTransition:function(){var a=gf(Cc)[0],i=xr().memoizedState;return[a,i]},useMutableSource:wv,useSyncExternalStore:Nv,useId:qv,unstable_isNewReconciler:!1};function _r(a,i){if(a&&a.defaultProps){i=Z({},i),a=a.defaultProps;for(var c in a)i[c]===void 0&&(i[c]=a[c]);return i}return i}function bf(a,i,c,m){i=a.memoizedState,c=c(m,i),c=c==null?i:Z({},i,c),a.memoizedState=c,a.lanes===0&&(a.updateQueue.baseState=c)}var iu={isMounted:function(a){return(a=a._reactInternals)?Pn(a)===a:!1},enqueueSetState:function(a,i,c){a=a._reactInternals;var m=yn(),y=gi(a),w=$a(m,y);w.payload=i,c!=null&&(w.callback=c),i=hi(a,w,y),i!==null&&(Lr(i,a,y,m),Zd(i,a,y))},enqueueReplaceState:function(a,i,c){a=a._reactInternals;var m=yn(),y=gi(a),w=$a(m,y);w.tag=1,w.payload=i,c!=null&&(w.callback=c),i=hi(a,w,y),i!==null&&(Lr(i,a,y,m),Zd(i,a,y))},enqueueForceUpdate:function(a,i){a=a._reactInternals;var c=yn(),m=gi(a),y=$a(c,m);y.tag=2,i!=null&&(y.callback=i),i=hi(a,y,m),i!==null&&(Lr(i,a,m,c),Zd(i,a,m))}};function Bv(a,i,c,m,y,w,R){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(m,w,R):i.prototype&&i.prototype.isPureReactComponent?!mc(c,m)||!mc(y,w):!0}function Hv(a,i,c){var m=!1,y=di,w=i.contextType;return typeof w=="object"&&w!==null?w=pr(w):(y=In(i)?eo:cn.current,m=i.contextTypes,w=(m=m!=null)?tl(a,y):di),i=new i(c,w),a.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=iu,a.stateNode=i,i._reactInternals=a,m&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=y,a.__reactInternalMemoizedMaskedChildContext=w),i}function Kv(a,i,c,m){a=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(c,m),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(c,m),i.state!==a&&iu.enqueueReplaceState(i,i.state,null)}function jf(a,i,c,m){var y=a.stateNode;y.props=c,y.state=a.memoizedState,y.refs={},of(a);var w=i.contextType;typeof w=="object"&&w!==null?y.context=pr(w):(w=In(i)?eo:cn.current,y.context=tl(a,w)),y.state=a.memoizedState,w=i.getDerivedStateFromProps,typeof w=="function"&&(bf(a,i,w,c),y.state=a.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(i=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),i!==y.state&&iu.enqueueReplaceState(y,y.state,null),Jd(a,c,y,m),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308)}function cl(a,i){try{var c="",m=i;do c+=M(m),m=m.return;while(m);var y=c}catch(w){y=`
Error generating stack: `+w.message+`
`+w.stack}return{value:a,source:i,stack:y,digest:null}}function wf(a,i,c){return{value:a,source:null,stack:c??null,digest:i??null}}function Nf(a,i){try{console.error(i.value)}catch(c){setTimeout(function(){throw c})}}var cS=typeof WeakMap=="function"?WeakMap:Map;function Wv(a,i,c){c=$a(-1,c),c.tag=3,c.payload={element:null};var m=i.value;return c.callback=function(){hu||(hu=!0,$f=m),Nf(a,i)},c}function Vv(a,i,c){c=$a(-1,c),c.tag=3;var m=a.type.getDerivedStateFromError;if(typeof m=="function"){var y=i.value;c.payload=function(){return m(y)},c.callback=function(){Nf(a,i)}}var w=a.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(c.callback=function(){Nf(a,i),typeof m!="function"&&(pi===null?pi=new Set([this]):pi.add(this));var R=i.stack;this.componentDidCatch(i.value,{componentStack:R!==null?R:""})}),c}function Gv(a,i,c){var m=a.pingCache;if(m===null){m=a.pingCache=new cS;var y=new Set;m.set(i,y)}else y=m.get(i),y===void 0&&(y=new Set,m.set(i,y));y.has(c)||(y.add(c),a=NS.bind(null,a,i,c),i.then(a,a))}function Qv(a){do{var i;if((i=a.tag===13)&&(i=a.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return a;a=a.return}while(a!==null);return null}function Yv(a,i,c,m,y){return(a.mode&1)===0?(a===i?a.flags|=65536:(a.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(i=$a(-1,1),i.tag=2,hi(c,i,1))),c.lanes|=1),a):(a.flags|=65536,a.lanes=y,a)}var dS=P.ReactCurrentOwner,On=!1;function vn(a,i,c,m){i.child=a===null?xv(i,null,c,m):al(i,a.child,c,m)}function Xv(a,i,c,m,y){c=c.render;var w=i.ref;return ol(i,y),m=ff(a,i,c,m,w,y),c=pf(),a!==null&&!On?(i.updateQueue=a.updateQueue,i.flags&=-2053,a.lanes&=~y,qa(a,i,y)):(ms&&c&&Yh(i),i.flags|=1,vn(a,i,m,y),i.child)}function Zv(a,i,c,m,y){if(a===null){var w=c.type;return typeof w=="function"&&!Kf(w)&&w.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(i.tag=15,i.type=w,Jv(a,i,w,m,y)):(a=yu(c.type,null,m,i,i.mode,y),a.ref=i.ref,a.return=i,i.child=a)}if(w=a.child,(a.lanes&y)===0){var R=w.memoizedProps;if(c=c.compare,c=c!==null?c:mc,c(R,m)&&a.ref===i.ref)return qa(a,i,y)}return i.flags|=1,a=yi(w,m),a.ref=i.ref,a.return=i,i.child=a}function Jv(a,i,c,m,y){if(a!==null){var w=a.memoizedProps;if(mc(w,m)&&a.ref===i.ref)if(On=!1,i.pendingProps=m=w,(a.lanes&y)!==0)(a.flags&131072)!==0&&(On=!0);else return i.lanes=a.lanes,qa(a,i,y)}return kf(a,i,c,m,y)}function ey(a,i,c){var m=i.pendingProps,y=m.children,w=a!==null?a.memoizedState:null;if(m.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Jt(ul,Xn),Xn|=c;else{if((c&1073741824)===0)return a=w!==null?w.baseLanes|c:c,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:a,cachePool:null,transitions:null},i.updateQueue=null,Jt(ul,Xn),Xn|=a,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=w!==null?w.baseLanes:c,Jt(ul,Xn),Xn|=m}else w!==null?(m=w.baseLanes|c,i.memoizedState=null):m=c,Jt(ul,Xn),Xn|=m;return vn(a,i,y,c),i.child}function ty(a,i){var c=i.ref;(a===null&&c!==null||a!==null&&a.ref!==c)&&(i.flags|=512,i.flags|=2097152)}function kf(a,i,c,m,y){var w=In(c)?eo:cn.current;return w=tl(i,w),ol(i,y),c=ff(a,i,c,m,w,y),m=pf(),a!==null&&!On?(i.updateQueue=a.updateQueue,i.flags&=-2053,a.lanes&=~y,qa(a,i,y)):(ms&&m&&Yh(i),i.flags|=1,vn(a,i,c,y),i.child)}function sy(a,i,c,m,y){if(In(c)){var w=!0;Hd(i)}else w=!1;if(ol(i,y),i.stateNode===null)lu(a,i),Hv(i,c,m),jf(i,c,m,y),m=!0;else if(a===null){var R=i.stateNode,V=i.memoizedProps;R.props=V;var te=R.context,pe=c.contextType;typeof pe=="object"&&pe!==null?pe=pr(pe):(pe=In(c)?eo:cn.current,pe=tl(i,pe));var Te=c.getDerivedStateFromProps,Ae=typeof Te=="function"||typeof R.getSnapshotBeforeUpdate=="function";Ae||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(V!==m||te!==pe)&&Kv(i,R,m,pe),mi=!1;var Se=i.memoizedState;R.state=Se,Jd(i,m,R,y),te=i.memoizedState,V!==m||Se!==te||_n.current||mi?(typeof Te=="function"&&(bf(i,c,Te,m),te=i.memoizedState),(V=mi||Bv(i,c,V,m,Se,te,pe))?(Ae||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(i.flags|=4194308)):(typeof R.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=m,i.memoizedState=te),R.props=m,R.state=te,R.context=pe,m=V):(typeof R.componentDidMount=="function"&&(i.flags|=4194308),m=!1)}else{R=i.stateNode,vv(a,i),V=i.memoizedProps,pe=i.type===i.elementType?V:_r(i.type,V),R.props=pe,Ae=i.pendingProps,Se=R.context,te=c.contextType,typeof te=="object"&&te!==null?te=pr(te):(te=In(c)?eo:cn.current,te=tl(i,te));var qe=c.getDerivedStateFromProps;(Te=typeof qe=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(V!==Ae||Se!==te)&&Kv(i,R,m,te),mi=!1,Se=i.memoizedState,R.state=Se,Jd(i,m,R,y);var Ke=i.memoizedState;V!==Ae||Se!==Ke||_n.current||mi?(typeof qe=="function"&&(bf(i,c,qe,m),Ke=i.memoizedState),(pe=mi||Bv(i,c,pe,m,Se,Ke,te)||!1)?(Te||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(m,Ke,te),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(m,Ke,te)),typeof R.componentDidUpdate=="function"&&(i.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof R.componentDidUpdate!="function"||V===a.memoizedProps&&Se===a.memoizedState||(i.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||V===a.memoizedProps&&Se===a.memoizedState||(i.flags|=1024),i.memoizedProps=m,i.memoizedState=Ke),R.props=m,R.state=Ke,R.context=te,m=pe):(typeof R.componentDidUpdate!="function"||V===a.memoizedProps&&Se===a.memoizedState||(i.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||V===a.memoizedProps&&Se===a.memoizedState||(i.flags|=1024),m=!1)}return Cf(a,i,c,m,w,y)}function Cf(a,i,c,m,y,w){ty(a,i);var R=(i.flags&128)!==0;if(!m&&!R)return y&&ov(i,c,!1),qa(a,i,w);m=i.stateNode,dS.current=i;var V=R&&typeof c.getDerivedStateFromError!="function"?null:m.render();return i.flags|=1,a!==null&&R?(i.child=al(i,a.child,null,w),i.child=al(i,null,V,w)):vn(a,i,V,w),i.memoizedState=m.state,y&&ov(i,c,!0),i.child}function ny(a){var i=a.stateNode;i.pendingContext?av(a,i.pendingContext,i.pendingContext!==i.context):i.context&&av(a,i.context,!1),lf(a,i.containerInfo)}function ry(a,i,c,m,y){return rl(),ef(y),i.flags|=256,vn(a,i,c,m),i.child}var Sf={dehydrated:null,treeContext:null,retryLane:0};function Ef(a){return{baseLanes:a,cachePool:null,transitions:null}}function ay(a,i,c){var m=i.pendingProps,y=gs.current,w=!1,R=(i.flags&128)!==0,V;if((V=R)||(V=a!==null&&a.memoizedState===null?!1:(y&2)!==0),V?(w=!0,i.flags&=-129):(a===null||a.memoizedState!==null)&&(y|=1),Jt(gs,y&1),a===null)return Jh(i),a=i.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((i.mode&1)===0?i.lanes=1:a.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(R=m.children,a=m.fallback,w?(m=i.mode,w=i.child,R={mode:"hidden",children:R},(m&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=R):w=bu(R,m,0,null),a=uo(a,m,c,null),w.return=i,a.return=i,w.sibling=a,i.child=w,i.child.memoizedState=Ef(c),i.memoizedState=Sf,a):Tf(i,R));if(y=a.memoizedState,y!==null&&(V=y.dehydrated,V!==null))return uS(a,i,R,m,V,y,c);if(w){w=m.fallback,R=i.mode,y=a.child,V=y.sibling;var te={mode:"hidden",children:m.children};return(R&1)===0&&i.child!==y?(m=i.child,m.childLanes=0,m.pendingProps=te,i.deletions=null):(m=yi(y,te),m.subtreeFlags=y.subtreeFlags&14680064),V!==null?w=yi(V,w):(w=uo(w,R,c,null),w.flags|=2),w.return=i,m.return=i,m.sibling=w,i.child=m,m=w,w=i.child,R=a.child.memoizedState,R=R===null?Ef(c):{baseLanes:R.baseLanes|c,cachePool:null,transitions:R.transitions},w.memoizedState=R,w.childLanes=a.childLanes&~c,i.memoizedState=Sf,m}return w=a.child,a=w.sibling,m=yi(w,{mode:"visible",children:m.children}),(i.mode&1)===0&&(m.lanes=c),m.return=i,m.sibling=null,a!==null&&(c=i.deletions,c===null?(i.deletions=[a],i.flags|=16):c.push(a)),i.child=m,i.memoizedState=null,m}function Tf(a,i){return i=bu({mode:"visible",children:i},a.mode,0,null),i.return=a,a.child=i}function ou(a,i,c,m){return m!==null&&ef(m),al(i,a.child,null,c),a=Tf(i,i.pendingProps.children),a.flags|=2,i.memoizedState=null,a}function uS(a,i,c,m,y,w,R){if(c)return i.flags&256?(i.flags&=-257,m=wf(Error(n(422))),ou(a,i,R,m)):i.memoizedState!==null?(i.child=a.child,i.flags|=128,null):(w=m.fallback,y=i.mode,m=bu({mode:"visible",children:m.children},y,0,null),w=uo(w,y,R,null),w.flags|=2,m.return=i,w.return=i,m.sibling=w,i.child=m,(i.mode&1)!==0&&al(i,a.child,null,R),i.child.memoizedState=Ef(R),i.memoizedState=Sf,w);if((i.mode&1)===0)return ou(a,i,R,null);if(y.data==="$!"){if(m=y.nextSibling&&y.nextSibling.dataset,m)var V=m.dgst;return m=V,w=Error(n(419)),m=wf(w,m,void 0),ou(a,i,R,m)}if(V=(R&a.childLanes)!==0,On||V){if(m=Vs,m!==null){switch(R&-R){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(m.suspendedLanes|R))!==0?0:y,y!==0&&y!==w.retryLane&&(w.retryLane=y,Da(a,y),Lr(m,a,y,-1))}return Hf(),m=wf(Error(n(421))),ou(a,i,R,m)}return y.data==="$?"?(i.flags|=128,i.child=a.child,i=kS.bind(null,a),y._reactRetry=i,null):(a=w.treeContext,Yn=li(y.nextSibling),Qn=i,ms=!0,Rr=null,a!==null&&(hr[fr++]=La,hr[fr++]=Ma,hr[fr++]=to,La=a.id,Ma=a.overflow,to=i),i=Tf(i,m.children),i.flags|=4096,i)}function iy(a,i,c){a.lanes|=i;var m=a.alternate;m!==null&&(m.lanes|=i),rf(a.return,i,c)}function Af(a,i,c,m,y){var w=a.memoizedState;w===null?a.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:m,tail:c,tailMode:y}:(w.isBackwards=i,w.rendering=null,w.renderingStartTime=0,w.last=m,w.tail=c,w.tailMode=y)}function oy(a,i,c){var m=i.pendingProps,y=m.revealOrder,w=m.tail;if(vn(a,i,m.children,c),m=gs.current,(m&2)!==0)m=m&1|2,i.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=i.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&iy(a,c,i);else if(a.tag===19)iy(a,c,i);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}m&=1}if(Jt(gs,m),(i.mode&1)===0)i.memoizedState=null;else switch(y){case"forwards":for(c=i.child,y=null;c!==null;)a=c.alternate,a!==null&&eu(a)===null&&(y=c),c=c.sibling;c=y,c===null?(y=i.child,i.child=null):(y=c.sibling,c.sibling=null),Af(i,!1,y,c,w);break;case"backwards":for(c=null,y=i.child,i.child=null;y!==null;){if(a=y.alternate,a!==null&&eu(a)===null){i.child=y;break}a=y.sibling,y.sibling=c,c=y,y=a}Af(i,!0,c,null,w);break;case"together":Af(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function lu(a,i){(i.mode&1)===0&&a!==null&&(a.alternate=null,i.alternate=null,i.flags|=2)}function qa(a,i,c){if(a!==null&&(i.dependencies=a.dependencies),io|=i.lanes,(c&i.childLanes)===0)return null;if(a!==null&&i.child!==a.child)throw Error(n(153));if(i.child!==null){for(a=i.child,c=yi(a,a.pendingProps),i.child=c,c.return=i;a.sibling!==null;)a=a.sibling,c=c.sibling=yi(a,a.pendingProps),c.return=i;c.sibling=null}return i.child}function mS(a,i,c){switch(i.tag){case 3:ny(i),rl();break;case 5:jv(i);break;case 1:In(i.type)&&Hd(i);break;case 4:lf(i,i.stateNode.containerInfo);break;case 10:var m=i.type._context,y=i.memoizedProps.value;Jt(Yd,m._currentValue),m._currentValue=y;break;case 13:if(m=i.memoizedState,m!==null)return m.dehydrated!==null?(Jt(gs,gs.current&1),i.flags|=128,null):(c&i.child.childLanes)!==0?ay(a,i,c):(Jt(gs,gs.current&1),a=qa(a,i,c),a!==null?a.sibling:null);Jt(gs,gs.current&1);break;case 19:if(m=(c&i.childLanes)!==0,(a.flags&128)!==0){if(m)return oy(a,i,c);i.flags|=128}if(y=i.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),Jt(gs,gs.current),m)break;return null;case 22:case 23:return i.lanes=0,ey(a,i,c)}return qa(a,i,c)}var ly,Pf,cy,dy;ly=function(a,i){for(var c=i.child;c!==null;){if(c.tag===5||c.tag===6)a.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===i)break;for(;c.sibling===null;){if(c.return===null||c.return===i)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Pf=function(){},cy=function(a,i,c,m){var y=a.memoizedProps;if(y!==m){a=i.stateNode,ro(ua.current);var w=null;switch(c){case"input":y=et(a,y),m=et(a,m),w=[];break;case"select":y=Z({},y,{value:void 0}),m=Z({},m,{value:void 0}),w=[];break;case"textarea":y=Et(a,y),m=Et(a,m),w=[];break;default:typeof y.onClick!="function"&&typeof m.onClick=="function"&&(a.onclick=zd)}Pt(c,m);var R;c=null;for(pe in y)if(!m.hasOwnProperty(pe)&&y.hasOwnProperty(pe)&&y[pe]!=null)if(pe==="style"){var V=y[pe];for(R in V)V.hasOwnProperty(R)&&(c||(c={}),c[R]="")}else pe!=="dangerouslySetInnerHTML"&&pe!=="children"&&pe!=="suppressContentEditableWarning"&&pe!=="suppressHydrationWarning"&&pe!=="autoFocus"&&(o.hasOwnProperty(pe)?w||(w=[]):(w=w||[]).push(pe,null));for(pe in m){var te=m[pe];if(V=y?.[pe],m.hasOwnProperty(pe)&&te!==V&&(te!=null||V!=null))if(pe==="style")if(V){for(R in V)!V.hasOwnProperty(R)||te&&te.hasOwnProperty(R)||(c||(c={}),c[R]="");for(R in te)te.hasOwnProperty(R)&&V[R]!==te[R]&&(c||(c={}),c[R]=te[R])}else c||(w||(w=[]),w.push(pe,c)),c=te;else pe==="dangerouslySetInnerHTML"?(te=te?te.__html:void 0,V=V?V.__html:void 0,te!=null&&V!==te&&(w=w||[]).push(pe,te)):pe==="children"?typeof te!="string"&&typeof te!="number"||(w=w||[]).push(pe,""+te):pe!=="suppressContentEditableWarning"&&pe!=="suppressHydrationWarning"&&(o.hasOwnProperty(pe)?(te!=null&&pe==="onScroll"&&ss("scroll",a),w||V===te||(w=[])):(w=w||[]).push(pe,te))}c&&(w=w||[]).push("style",c);var pe=w;(i.updateQueue=pe)&&(i.flags|=4)}},dy=function(a,i,c,m){c!==m&&(i.flags|=4)};function Ec(a,i){if(!ms)switch(a.tailMode){case"hidden":i=a.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?a.tail=null:c.sibling=null;break;case"collapsed":c=a.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?i||a.tail===null?a.tail=null:a.tail.sibling=null:m.sibling=null}}function un(a){var i=a.alternate!==null&&a.alternate.child===a.child,c=0,m=0;if(i)for(var y=a.child;y!==null;)c|=y.lanes|y.childLanes,m|=y.subtreeFlags&14680064,m|=y.flags&14680064,y.return=a,y=y.sibling;else for(y=a.child;y!==null;)c|=y.lanes|y.childLanes,m|=y.subtreeFlags,m|=y.flags,y.return=a,y=y.sibling;return a.subtreeFlags|=m,a.childLanes=c,i}function hS(a,i,c){var m=i.pendingProps;switch(Xh(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(i),null;case 1:return In(i.type)&&Bd(),un(i),null;case 3:return m=i.stateNode,ll(),ns(_n),ns(cn),uf(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(a===null||a.child===null)&&(Gd(i)?i.flags|=4:a===null||a.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Rr!==null&&(zf(Rr),Rr=null))),Pf(a,i),un(i),null;case 5:cf(i);var y=ro(wc.current);if(c=i.type,a!==null&&i.stateNode!=null)cy(a,i,c,m,y),a.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!m){if(i.stateNode===null)throw Error(n(166));return un(i),null}if(a=ro(ua.current),Gd(i)){m=i.stateNode,c=i.type;var w=i.memoizedProps;switch(m[da]=i,m[gc]=w,a=(i.mode&1)!==0,c){case"dialog":ss("cancel",m),ss("close",m);break;case"iframe":case"object":case"embed":ss("load",m);break;case"video":case"audio":for(y=0;y<fc.length;y++)ss(fc[y],m);break;case"source":ss("error",m);break;case"img":case"image":case"link":ss("error",m),ss("load",m);break;case"details":ss("toggle",m);break;case"input":ct(m,w),ss("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!w.multiple},ss("invalid",m);break;case"textarea":Lt(m,w),ss("invalid",m)}Pt(c,w),y=null;for(var R in w)if(w.hasOwnProperty(R)){var V=w[R];R==="children"?typeof V=="string"?m.textContent!==V&&(w.suppressHydrationWarning!==!0&&Fd(m.textContent,V,a),y=["children",V]):typeof V=="number"&&m.textContent!==""+V&&(w.suppressHydrationWarning!==!0&&Fd(m.textContent,V,a),y=["children",""+V]):o.hasOwnProperty(R)&&V!=null&&R==="onScroll"&&ss("scroll",m)}switch(c){case"input":Pe(m),ps(m,w,!0);break;case"textarea":Pe(m),me(m);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(m.onclick=zd)}m=y,i.updateQueue=m,m!==null&&(i.flags|=4)}else{R=y.nodeType===9?y:y.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Le(c)),a==="http://www.w3.org/1999/xhtml"?c==="script"?(a=R.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof m.is=="string"?a=R.createElement(c,{is:m.is}):(a=R.createElement(c),c==="select"&&(R=a,m.multiple?R.multiple=!0:m.size&&(R.size=m.size))):a=R.createElementNS(a,c),a[da]=i,a[gc]=m,ly(a,i,!1,!1),i.stateNode=a;e:{switch(R=Us(c,m),c){case"dialog":ss("cancel",a),ss("close",a),y=m;break;case"iframe":case"object":case"embed":ss("load",a),y=m;break;case"video":case"audio":for(y=0;y<fc.length;y++)ss(fc[y],a);y=m;break;case"source":ss("error",a),y=m;break;case"img":case"image":case"link":ss("error",a),ss("load",a),y=m;break;case"details":ss("toggle",a),y=m;break;case"input":ct(a,m),y=et(a,m),ss("invalid",a);break;case"option":y=m;break;case"select":a._wrapperState={wasMultiple:!!m.multiple},y=Z({},m,{value:void 0}),ss("invalid",a);break;case"textarea":Lt(a,m),y=Et(a,m),ss("invalid",a);break;default:y=m}Pt(c,y),V=y;for(w in V)if(V.hasOwnProperty(w)){var te=V[w];w==="style"?Nt(a,te):w==="dangerouslySetInnerHTML"?(te=te?te.__html:void 0,te!=null&&Xt(a,te)):w==="children"?typeof te=="string"?(c!=="textarea"||te!=="")&&Ft(a,te):typeof te=="number"&&Ft(a,""+te):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(o.hasOwnProperty(w)?te!=null&&w==="onScroll"&&ss("scroll",a):te!=null&&T(a,w,te,R))}switch(c){case"input":Pe(a),ps(a,m,!1);break;case"textarea":Pe(a),me(a);break;case"option":m.value!=null&&a.setAttribute("value",""+fe(m.value));break;case"select":a.multiple=!!m.multiple,w=m.value,w!=null?xs(a,!!m.multiple,w,!1):m.defaultValue!=null&&xs(a,!!m.multiple,m.defaultValue,!0);break;default:typeof y.onClick=="function"&&(a.onclick=zd)}switch(c){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return un(i),null;case 6:if(a&&i.stateNode!=null)dy(a,i,a.memoizedProps,m);else{if(typeof m!="string"&&i.stateNode===null)throw Error(n(166));if(c=ro(wc.current),ro(ua.current),Gd(i)){if(m=i.stateNode,c=i.memoizedProps,m[da]=i,(w=m.nodeValue!==c)&&(a=Qn,a!==null))switch(a.tag){case 3:Fd(m.nodeValue,c,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&Fd(m.nodeValue,c,(a.mode&1)!==0)}w&&(i.flags|=4)}else m=(c.nodeType===9?c:c.ownerDocument).createTextNode(m),m[da]=i,i.stateNode=m}return un(i),null;case 13:if(ns(gs),m=i.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(ms&&Yn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)hv(),rl(),i.flags|=98560,w=!1;else if(w=Gd(i),m!==null&&m.dehydrated!==null){if(a===null){if(!w)throw Error(n(318));if(w=i.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(n(317));w[da]=i}else rl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;un(i),w=!1}else Rr!==null&&(zf(Rr),Rr=null),w=!0;if(!w)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=c,i):(m=m!==null,m!==(a!==null&&a.memoizedState!==null)&&m&&(i.child.flags|=8192,(i.mode&1)!==0&&(a===null||(gs.current&1)!==0?$s===0&&($s=3):Hf())),i.updateQueue!==null&&(i.flags|=4),un(i),null);case 4:return ll(),Pf(a,i),a===null&&pc(i.stateNode.containerInfo),un(i),null;case 10:return nf(i.type._context),un(i),null;case 17:return In(i.type)&&Bd(),un(i),null;case 19:if(ns(gs),w=i.memoizedState,w===null)return un(i),null;if(m=(i.flags&128)!==0,R=w.rendering,R===null)if(m)Ec(w,!1);else{if($s!==0||a!==null&&(a.flags&128)!==0)for(a=i.child;a!==null;){if(R=eu(a),R!==null){for(i.flags|=128,Ec(w,!1),m=R.updateQueue,m!==null&&(i.updateQueue=m,i.flags|=4),i.subtreeFlags=0,m=c,c=i.child;c!==null;)w=c,a=m,w.flags&=14680066,R=w.alternate,R===null?(w.childLanes=0,w.lanes=a,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=R.childLanes,w.lanes=R.lanes,w.child=R.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=R.memoizedProps,w.memoizedState=R.memoizedState,w.updateQueue=R.updateQueue,w.type=R.type,a=R.dependencies,w.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),c=c.sibling;return Jt(gs,gs.current&1|2),i.child}a=a.sibling}w.tail!==null&&ht()>ml&&(i.flags|=128,m=!0,Ec(w,!1),i.lanes=4194304)}else{if(!m)if(a=eu(R),a!==null){if(i.flags|=128,m=!0,c=a.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),Ec(w,!0),w.tail===null&&w.tailMode==="hidden"&&!R.alternate&&!ms)return un(i),null}else 2*ht()-w.renderingStartTime>ml&&c!==1073741824&&(i.flags|=128,m=!0,Ec(w,!1),i.lanes=4194304);w.isBackwards?(R.sibling=i.child,i.child=R):(c=w.last,c!==null?c.sibling=R:i.child=R,w.last=R)}return w.tail!==null?(i=w.tail,w.rendering=i,w.tail=i.sibling,w.renderingStartTime=ht(),i.sibling=null,c=gs.current,Jt(gs,m?c&1|2:c&1),i):(un(i),null);case 22:case 23:return Bf(),m=i.memoizedState!==null,a!==null&&a.memoizedState!==null!==m&&(i.flags|=8192),m&&(i.mode&1)!==0?(Xn&1073741824)!==0&&(un(i),i.subtreeFlags&6&&(i.flags|=8192)):un(i),null;case 24:return null;case 25:return null}throw Error(n(156,i.tag))}function fS(a,i){switch(Xh(i),i.tag){case 1:return In(i.type)&&Bd(),a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 3:return ll(),ns(_n),ns(cn),uf(),a=i.flags,(a&65536)!==0&&(a&128)===0?(i.flags=a&-65537|128,i):null;case 5:return cf(i),null;case 13:if(ns(gs),a=i.memoizedState,a!==null&&a.dehydrated!==null){if(i.alternate===null)throw Error(n(340));rl()}return a=i.flags,a&65536?(i.flags=a&-65537|128,i):null;case 19:return ns(gs),null;case 4:return ll(),null;case 10:return nf(i.type._context),null;case 22:case 23:return Bf(),null;case 24:return null;default:return null}}var cu=!1,mn=!1,pS=typeof WeakSet=="function"?WeakSet:Set,He=null;function dl(a,i){var c=a.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(m){Ns(a,i,m)}else c.current=null}function Rf(a,i,c){try{c()}catch(m){Ns(a,i,m)}}var uy=!1;function xS(a,i){if(Uh=O,a=B0(),Oh(a)){if("selectionStart"in a)var c={start:a.selectionStart,end:a.selectionEnd};else e:{c=(c=a.ownerDocument)&&c.defaultView||window;var m=c.getSelection&&c.getSelection();if(m&&m.rangeCount!==0){c=m.anchorNode;var y=m.anchorOffset,w=m.focusNode;m=m.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break e}var R=0,V=-1,te=-1,pe=0,Te=0,Ae=a,Se=null;t:for(;;){for(var qe;Ae!==c||y!==0&&Ae.nodeType!==3||(V=R+y),Ae!==w||m!==0&&Ae.nodeType!==3||(te=R+m),Ae.nodeType===3&&(R+=Ae.nodeValue.length),(qe=Ae.firstChild)!==null;)Se=Ae,Ae=qe;for(;;){if(Ae===a)break t;if(Se===c&&++pe===y&&(V=R),Se===w&&++Te===m&&(te=R),(qe=Ae.nextSibling)!==null)break;Ae=Se,Se=Ae.parentNode}Ae=qe}c=V===-1||te===-1?null:{start:V,end:te}}else c=null}c=c||{start:0,end:0}}else c=null;for(Bh={focusedElem:a,selectionRange:c},O=!1,He=i;He!==null;)if(i=He,a=i.child,(i.subtreeFlags&1028)!==0&&a!==null)a.return=i,He=a;else for(;He!==null;){i=He;try{var Ke=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(Ke!==null){var Xe=Ke.memoizedProps,Ts=Ke.memoizedState,oe=i.stateNode,ae=oe.getSnapshotBeforeUpdate(i.elementType===i.type?Xe:_r(i.type,Xe),Ts);oe.__reactInternalSnapshotBeforeUpdate=ae}break;case 3:var de=i.stateNode.containerInfo;de.nodeType===1?de.textContent="":de.nodeType===9&&de.documentElement&&de.removeChild(de.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Re){Ns(i,i.return,Re)}if(a=i.sibling,a!==null){a.return=i.return,He=a;break}He=i.return}return Ke=uy,uy=!1,Ke}function Tc(a,i,c){var m=i.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var y=m=m.next;do{if((y.tag&a)===a){var w=y.destroy;y.destroy=void 0,w!==void 0&&Rf(i,c,w)}y=y.next}while(y!==m)}}function du(a,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var c=i=i.next;do{if((c.tag&a)===a){var m=c.create;c.destroy=m()}c=c.next}while(c!==i)}}function _f(a){var i=a.ref;if(i!==null){var c=a.stateNode;a.tag,a=c,typeof i=="function"?i(a):i.current=a}}function my(a){var i=a.alternate;i!==null&&(a.alternate=null,my(i)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(i=a.stateNode,i!==null&&(delete i[da],delete i[gc],delete i[Vh],delete i[ZC],delete i[JC])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function hy(a){return a.tag===5||a.tag===3||a.tag===4}function fy(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||hy(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function If(a,i,c){var m=a.tag;if(m===5||m===6)a=a.stateNode,i?c.nodeType===8?c.parentNode.insertBefore(a,i):c.insertBefore(a,i):(c.nodeType===8?(i=c.parentNode,i.insertBefore(a,c)):(i=c,i.appendChild(a)),c=c._reactRootContainer,c!=null||i.onclick!==null||(i.onclick=zd));else if(m!==4&&(a=a.child,a!==null))for(If(a,i,c),a=a.sibling;a!==null;)If(a,i,c),a=a.sibling}function Of(a,i,c){var m=a.tag;if(m===5||m===6)a=a.stateNode,i?c.insertBefore(a,i):c.appendChild(a);else if(m!==4&&(a=a.child,a!==null))for(Of(a,i,c),a=a.sibling;a!==null;)Of(a,i,c),a=a.sibling}var Js=null,Ir=!1;function fi(a,i,c){for(c=c.child;c!==null;)py(a,i,c),c=c.sibling}function py(a,i,c){if(Xs&&typeof Xs.onCommitFiberUnmount=="function")try{Xs.onCommitFiberUnmount(Kn,c)}catch{}switch(c.tag){case 5:mn||dl(c,i);case 6:var m=Js,y=Ir;Js=null,fi(a,i,c),Js=m,Ir=y,Js!==null&&(Ir?(a=Js,c=c.stateNode,a.nodeType===8?a.parentNode.removeChild(c):a.removeChild(c)):Js.removeChild(c.stateNode));break;case 18:Js!==null&&(Ir?(a=Js,c=c.stateNode,a.nodeType===8?Wh(a.parentNode,c):a.nodeType===1&&Wh(a,c),_a(a)):Wh(Js,c.stateNode));break;case 4:m=Js,y=Ir,Js=c.stateNode.containerInfo,Ir=!0,fi(a,i,c),Js=m,Ir=y;break;case 0:case 11:case 14:case 15:if(!mn&&(m=c.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){y=m=m.next;do{var w=y,R=w.destroy;w=w.tag,R!==void 0&&((w&2)!==0||(w&4)!==0)&&Rf(c,i,R),y=y.next}while(y!==m)}fi(a,i,c);break;case 1:if(!mn&&(dl(c,i),m=c.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=c.memoizedProps,m.state=c.memoizedState,m.componentWillUnmount()}catch(V){Ns(c,i,V)}fi(a,i,c);break;case 21:fi(a,i,c);break;case 22:c.mode&1?(mn=(m=mn)||c.memoizedState!==null,fi(a,i,c),mn=m):fi(a,i,c);break;default:fi(a,i,c)}}function xy(a){var i=a.updateQueue;if(i!==null){a.updateQueue=null;var c=a.stateNode;c===null&&(c=a.stateNode=new pS),i.forEach(function(m){var y=CS.bind(null,a,m);c.has(m)||(c.add(m),m.then(y,y))})}}function Or(a,i){var c=i.deletions;if(c!==null)for(var m=0;m<c.length;m++){var y=c[m];try{var w=a,R=i,V=R;e:for(;V!==null;){switch(V.tag){case 5:Js=V.stateNode,Ir=!1;break e;case 3:Js=V.stateNode.containerInfo,Ir=!0;break e;case 4:Js=V.stateNode.containerInfo,Ir=!0;break e}V=V.return}if(Js===null)throw Error(n(160));py(w,R,y),Js=null,Ir=!1;var te=y.alternate;te!==null&&(te.return=null),y.return=null}catch(pe){Ns(y,i,pe)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)gy(i,a),i=i.sibling}function gy(a,i){var c=a.alternate,m=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(Or(i,a),ha(a),m&4){try{Tc(3,a,a.return),du(3,a)}catch(Xe){Ns(a,a.return,Xe)}try{Tc(5,a,a.return)}catch(Xe){Ns(a,a.return,Xe)}}break;case 1:Or(i,a),ha(a),m&512&&c!==null&&dl(c,c.return);break;case 5:if(Or(i,a),ha(a),m&512&&c!==null&&dl(c,c.return),a.flags&32){var y=a.stateNode;try{Ft(y,"")}catch(Xe){Ns(a,a.return,Xe)}}if(m&4&&(y=a.stateNode,y!=null)){var w=a.memoizedProps,R=c!==null?c.memoizedProps:w,V=a.type,te=a.updateQueue;if(a.updateQueue=null,te!==null)try{V==="input"&&w.type==="radio"&&w.name!=null&&Bt(y,w),Us(V,R);var pe=Us(V,w);for(R=0;R<te.length;R+=2){var Te=te[R],Ae=te[R+1];Te==="style"?Nt(y,Ae):Te==="dangerouslySetInnerHTML"?Xt(y,Ae):Te==="children"?Ft(y,Ae):T(y,Te,Ae,pe)}switch(V){case"input":Yt(y,w);break;case"textarea":wt(y,w);break;case"select":var Se=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!w.multiple;var qe=w.value;qe!=null?xs(y,!!w.multiple,qe,!1):Se!==!!w.multiple&&(w.defaultValue!=null?xs(y,!!w.multiple,w.defaultValue,!0):xs(y,!!w.multiple,w.multiple?[]:"",!1))}y[gc]=w}catch(Xe){Ns(a,a.return,Xe)}}break;case 6:if(Or(i,a),ha(a),m&4){if(a.stateNode===null)throw Error(n(162));y=a.stateNode,w=a.memoizedProps;try{y.nodeValue=w}catch(Xe){Ns(a,a.return,Xe)}}break;case 3:if(Or(i,a),ha(a),m&4&&c!==null&&c.memoizedState.isDehydrated)try{_a(i.containerInfo)}catch(Xe){Ns(a,a.return,Xe)}break;case 4:Or(i,a),ha(a);break;case 13:Or(i,a),ha(a),y=a.child,y.flags&8192&&(w=y.memoizedState!==null,y.stateNode.isHidden=w,!w||y.alternate!==null&&y.alternate.memoizedState!==null||(Df=ht())),m&4&&xy(a);break;case 22:if(Te=c!==null&&c.memoizedState!==null,a.mode&1?(mn=(pe=mn)||Te,Or(i,a),mn=pe):Or(i,a),ha(a),m&8192){if(pe=a.memoizedState!==null,(a.stateNode.isHidden=pe)&&!Te&&(a.mode&1)!==0)for(He=a,Te=a.child;Te!==null;){for(Ae=He=Te;He!==null;){switch(Se=He,qe=Se.child,Se.tag){case 0:case 11:case 14:case 15:Tc(4,Se,Se.return);break;case 1:dl(Se,Se.return);var Ke=Se.stateNode;if(typeof Ke.componentWillUnmount=="function"){m=Se,c=Se.return;try{i=m,Ke.props=i.memoizedProps,Ke.state=i.memoizedState,Ke.componentWillUnmount()}catch(Xe){Ns(m,c,Xe)}}break;case 5:dl(Se,Se.return);break;case 22:if(Se.memoizedState!==null){by(Ae);continue}}qe!==null?(qe.return=Se,He=qe):by(Ae)}Te=Te.sibling}e:for(Te=null,Ae=a;;){if(Ae.tag===5){if(Te===null){Te=Ae;try{y=Ae.stateNode,pe?(w=y.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(V=Ae.stateNode,te=Ae.memoizedProps.style,R=te!=null&&te.hasOwnProperty("display")?te.display:null,V.style.display=Ge("display",R))}catch(Xe){Ns(a,a.return,Xe)}}}else if(Ae.tag===6){if(Te===null)try{Ae.stateNode.nodeValue=pe?"":Ae.memoizedProps}catch(Xe){Ns(a,a.return,Xe)}}else if((Ae.tag!==22&&Ae.tag!==23||Ae.memoizedState===null||Ae===a)&&Ae.child!==null){Ae.child.return=Ae,Ae=Ae.child;continue}if(Ae===a)break e;for(;Ae.sibling===null;){if(Ae.return===null||Ae.return===a)break e;Te===Ae&&(Te=null),Ae=Ae.return}Te===Ae&&(Te=null),Ae.sibling.return=Ae.return,Ae=Ae.sibling}}break;case 19:Or(i,a),ha(a),m&4&&xy(a);break;case 21:break;default:Or(i,a),ha(a)}}function ha(a){var i=a.flags;if(i&2){try{e:{for(var c=a.return;c!==null;){if(hy(c)){var m=c;break e}c=c.return}throw Error(n(160))}switch(m.tag){case 5:var y=m.stateNode;m.flags&32&&(Ft(y,""),m.flags&=-33);var w=fy(a);Of(a,w,y);break;case 3:case 4:var R=m.stateNode.containerInfo,V=fy(a);If(a,V,R);break;default:throw Error(n(161))}}catch(te){Ns(a,a.return,te)}a.flags&=-3}i&4096&&(a.flags&=-4097)}function gS(a,i,c){He=a,vy(a)}function vy(a,i,c){for(var m=(a.mode&1)!==0;He!==null;){var y=He,w=y.child;if(y.tag===22&&m){var R=y.memoizedState!==null||cu;if(!R){var V=y.alternate,te=V!==null&&V.memoizedState!==null||mn;V=cu;var pe=mn;if(cu=R,(mn=te)&&!pe)for(He=y;He!==null;)R=He,te=R.child,R.tag===22&&R.memoizedState!==null?jy(y):te!==null?(te.return=R,He=te):jy(y);for(;w!==null;)He=w,vy(w),w=w.sibling;He=y,cu=V,mn=pe}yy(a)}else(y.subtreeFlags&8772)!==0&&w!==null?(w.return=y,He=w):yy(a)}}function yy(a){for(;He!==null;){var i=He;if((i.flags&8772)!==0){var c=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:mn||du(5,i);break;case 1:var m=i.stateNode;if(i.flags&4&&!mn)if(c===null)m.componentDidMount();else{var y=i.elementType===i.type?c.memoizedProps:_r(i.type,c.memoizedProps);m.componentDidUpdate(y,c.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var w=i.updateQueue;w!==null&&bv(i,w,m);break;case 3:var R=i.updateQueue;if(R!==null){if(c=null,i.child!==null)switch(i.child.tag){case 5:c=i.child.stateNode;break;case 1:c=i.child.stateNode}bv(i,R,c)}break;case 5:var V=i.stateNode;if(c===null&&i.flags&4){c=V;var te=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":te.autoFocus&&c.focus();break;case"img":te.src&&(c.src=te.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var pe=i.alternate;if(pe!==null){var Te=pe.memoizedState;if(Te!==null){var Ae=Te.dehydrated;Ae!==null&&_a(Ae)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}mn||i.flags&512&&_f(i)}catch(Se){Ns(i,i.return,Se)}}if(i===a){He=null;break}if(c=i.sibling,c!==null){c.return=i.return,He=c;break}He=i.return}}function by(a){for(;He!==null;){var i=He;if(i===a){He=null;break}var c=i.sibling;if(c!==null){c.return=i.return,He=c;break}He=i.return}}function jy(a){for(;He!==null;){var i=He;try{switch(i.tag){case 0:case 11:case 15:var c=i.return;try{du(4,i)}catch(te){Ns(i,c,te)}break;case 1:var m=i.stateNode;if(typeof m.componentDidMount=="function"){var y=i.return;try{m.componentDidMount()}catch(te){Ns(i,y,te)}}var w=i.return;try{_f(i)}catch(te){Ns(i,w,te)}break;case 5:var R=i.return;try{_f(i)}catch(te){Ns(i,R,te)}}}catch(te){Ns(i,i.return,te)}if(i===a){He=null;break}var V=i.sibling;if(V!==null){V.return=i.return,He=V;break}He=i.return}}var vS=Math.ceil,uu=P.ReactCurrentDispatcher,Lf=P.ReactCurrentOwner,gr=P.ReactCurrentBatchConfig,_t=0,Vs=null,Rs=null,en=0,Xn=0,ul=ci(0),$s=0,Ac=null,io=0,mu=0,Mf=0,Pc=null,Ln=null,Df=0,ml=1/0,Fa=null,hu=!1,$f=null,pi=null,fu=!1,xi=null,pu=0,Rc=0,qf=null,xu=-1,gu=0;function yn(){return(_t&6)!==0?ht():xu!==-1?xu:xu=ht()}function gi(a){return(a.mode&1)===0?1:(_t&2)!==0&&en!==0?en&-en:tS.transition!==null?(gu===0&&(gu=Bo()),gu):(a=ft,a!==0||(a=window.event,a=a===void 0?16:Ct(a.type)),a)}function Lr(a,i,c,m){if(50<Rc)throw Rc=0,qf=null,Error(n(185));Pa(a,c,m),((_t&2)===0||a!==Vs)&&(a===Vs&&((_t&2)===0&&(mu|=c),$s===4&&vi(a,en)),Mn(a,m),c===1&&_t===0&&(i.mode&1)===0&&(ml=ht()+500,Kd&&ui()))}function Mn(a,i){var c=a.callbackNode;ic(a,i);var m=Ta(a,a===Vs?en:0);if(m===0)c!==null&&ke(c),a.callbackNode=null,a.callbackPriority=0;else if(i=m&-m,a.callbackPriority!==i){if(c!=null&&ke(c),i===1)a.tag===0?eS(Ny.bind(null,a)):lv(Ny.bind(null,a)),YC(function(){(_t&6)===0&&ui()}),c=null;else{switch(dr(m)){case 1:c=js;break;case 4:c=Ms;break;case 16:c=on;break;case 536870912:c=zt;break;default:c=on}c=Ry(c,wy.bind(null,a))}a.callbackPriority=i,a.callbackNode=c}}function wy(a,i){if(xu=-1,gu=0,(_t&6)!==0)throw Error(n(327));var c=a.callbackNode;if(hl()&&a.callbackNode!==c)return null;var m=Ta(a,a===Vs?en:0);if(m===0)return null;if((m&30)!==0||(m&a.expiredLanes)!==0||i)i=vu(a,m);else{i=m;var y=_t;_t|=2;var w=Cy();(Vs!==a||en!==i)&&(Fa=null,ml=ht()+500,lo(a,i));do try{jS();break}catch(V){ky(a,V)}while(!0);sf(),uu.current=w,_t=y,Rs!==null?i=0:(Vs=null,en=0,i=$s)}if(i!==0){if(i===2&&(y=Wi(a),y!==0&&(m=y,i=Ff(a,y))),i===1)throw c=Ac,lo(a,0),vi(a,m),Mn(a,ht()),c;if(i===6)vi(a,m);else{if(y=a.current.alternate,(m&30)===0&&!yS(y)&&(i=vu(a,m),i===2&&(w=Wi(a),w!==0&&(m=w,i=Ff(a,w))),i===1))throw c=Ac,lo(a,0),vi(a,m),Mn(a,ht()),c;switch(a.finishedWork=y,a.finishedLanes=m,i){case 0:case 1:throw Error(n(345));case 2:co(a,Ln,Fa);break;case 3:if(vi(a,m),(m&130023424)===m&&(i=Df+500-ht(),10<i)){if(Ta(a,0)!==0)break;if(y=a.suspendedLanes,(y&m)!==m){yn(),a.pingedLanes|=a.suspendedLanes&y;break}a.timeoutHandle=Kh(co.bind(null,a,Ln,Fa),i);break}co(a,Ln,Fa);break;case 4:if(vi(a,m),(m&4194240)===m)break;for(i=a.eventTimes,y=-1;0<m;){var R=31-xn(m);w=1<<R,R=i[R],R>y&&(y=R),m&=~w}if(m=y,m=ht()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*vS(m/1960))-m,10<m){a.timeoutHandle=Kh(co.bind(null,a,Ln,Fa),m);break}co(a,Ln,Fa);break;case 5:co(a,Ln,Fa);break;default:throw Error(n(329))}}}return Mn(a,ht()),a.callbackNode===c?wy.bind(null,a):null}function Ff(a,i){var c=Pc;return a.current.memoizedState.isDehydrated&&(lo(a,i).flags|=256),a=vu(a,i),a!==2&&(i=Ln,Ln=c,i!==null&&zf(i)),a}function zf(a){Ln===null?Ln=a:Ln.push.apply(Ln,a)}function yS(a){for(var i=a;;){if(i.flags&16384){var c=i.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var m=0;m<c.length;m++){var y=c[m],w=y.getSnapshot;y=y.value;try{if(!Pr(w(),y))return!1}catch{return!1}}}if(c=i.child,i.subtreeFlags&16384&&c!==null)c.return=i,i=c;else{if(i===a)break;for(;i.sibling===null;){if(i.return===null||i.return===a)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function vi(a,i){for(i&=~Mf,i&=~mu,a.suspendedLanes|=i,a.pingedLanes&=~i,a=a.expirationTimes;0<i;){var c=31-xn(i),m=1<<c;a[c]=-1,i&=~m}}function Ny(a){if((_t&6)!==0)throw Error(n(327));hl();var i=Ta(a,0);if((i&1)===0)return Mn(a,ht()),null;var c=vu(a,i);if(a.tag!==0&&c===2){var m=Wi(a);m!==0&&(i=m,c=Ff(a,m))}if(c===1)throw c=Ac,lo(a,0),vi(a,i),Mn(a,ht()),c;if(c===6)throw Error(n(345));return a.finishedWork=a.current.alternate,a.finishedLanes=i,co(a,Ln,Fa),Mn(a,ht()),null}function Uf(a,i){var c=_t;_t|=1;try{return a(i)}finally{_t=c,_t===0&&(ml=ht()+500,Kd&&ui())}}function oo(a){xi!==null&&xi.tag===0&&(_t&6)===0&&hl();var i=_t;_t|=1;var c=gr.transition,m=ft;try{if(gr.transition=null,ft=1,a)return a()}finally{ft=m,gr.transition=c,_t=i,(_t&6)===0&&ui()}}function Bf(){Xn=ul.current,ns(ul)}function lo(a,i){a.finishedWork=null,a.finishedLanes=0;var c=a.timeoutHandle;if(c!==-1&&(a.timeoutHandle=-1,QC(c)),Rs!==null)for(c=Rs.return;c!==null;){var m=c;switch(Xh(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&Bd();break;case 3:ll(),ns(_n),ns(cn),uf();break;case 5:cf(m);break;case 4:ll();break;case 13:ns(gs);break;case 19:ns(gs);break;case 10:nf(m.type._context);break;case 22:case 23:Bf()}c=c.return}if(Vs=a,Rs=a=yi(a.current,null),en=Xn=i,$s=0,Ac=null,Mf=mu=io=0,Ln=Pc=null,no!==null){for(i=0;i<no.length;i++)if(c=no[i],m=c.interleaved,m!==null){c.interleaved=null;var y=m.next,w=c.pending;if(w!==null){var R=w.next;w.next=y,m.next=R}c.pending=m}no=null}return a}function ky(a,i){do{var c=Rs;try{if(sf(),tu.current=au,su){for(var m=vs.memoizedState;m!==null;){var y=m.queue;y!==null&&(y.pending=null),m=m.next}su=!1}if(ao=0,Ws=Ds=vs=null,Nc=!1,kc=0,Lf.current=null,c===null||c.return===null){$s=1,Ac=i,Rs=null;break}e:{var w=a,R=c.return,V=c,te=i;if(i=en,V.flags|=32768,te!==null&&typeof te=="object"&&typeof te.then=="function"){var pe=te,Te=V,Ae=Te.tag;if((Te.mode&1)===0&&(Ae===0||Ae===11||Ae===15)){var Se=Te.alternate;Se?(Te.updateQueue=Se.updateQueue,Te.memoizedState=Se.memoizedState,Te.lanes=Se.lanes):(Te.updateQueue=null,Te.memoizedState=null)}var qe=Qv(R);if(qe!==null){qe.flags&=-257,Yv(qe,R,V,w,i),qe.mode&1&&Gv(w,pe,i),i=qe,te=pe;var Ke=i.updateQueue;if(Ke===null){var Xe=new Set;Xe.add(te),i.updateQueue=Xe}else Ke.add(te);break e}else{if((i&1)===0){Gv(w,pe,i),Hf();break e}te=Error(n(426))}}else if(ms&&V.mode&1){var Ts=Qv(R);if(Ts!==null){(Ts.flags&65536)===0&&(Ts.flags|=256),Yv(Ts,R,V,w,i),ef(cl(te,V));break e}}w=te=cl(te,V),$s!==4&&($s=2),Pc===null?Pc=[w]:Pc.push(w),w=R;do{switch(w.tag){case 3:w.flags|=65536,i&=-i,w.lanes|=i;var oe=Wv(w,te,i);yv(w,oe);break e;case 1:V=te;var ae=w.type,de=w.stateNode;if((w.flags&128)===0&&(typeof ae.getDerivedStateFromError=="function"||de!==null&&typeof de.componentDidCatch=="function"&&(pi===null||!pi.has(de)))){w.flags|=65536,i&=-i,w.lanes|=i;var Re=Vv(w,V,i);yv(w,Re);break e}}w=w.return}while(w!==null)}Ey(c)}catch(tt){i=tt,Rs===c&&c!==null&&(Rs=c=c.return);continue}break}while(!0)}function Cy(){var a=uu.current;return uu.current=au,a===null?au:a}function Hf(){($s===0||$s===3||$s===2)&&($s=4),Vs===null||(io&268435455)===0&&(mu&268435455)===0||vi(Vs,en)}function vu(a,i){var c=_t;_t|=2;var m=Cy();(Vs!==a||en!==i)&&(Fa=null,lo(a,i));do try{bS();break}catch(y){ky(a,y)}while(!0);if(sf(),_t=c,uu.current=m,Rs!==null)throw Error(n(261));return Vs=null,en=0,$s}function bS(){for(;Rs!==null;)Sy(Rs)}function jS(){for(;Rs!==null&&!Be();)Sy(Rs)}function Sy(a){var i=Py(a.alternate,a,Xn);a.memoizedProps=a.pendingProps,i===null?Ey(a):Rs=i,Lf.current=null}function Ey(a){var i=a;do{var c=i.alternate;if(a=i.return,(i.flags&32768)===0){if(c=hS(c,i,Xn),c!==null){Rs=c;return}}else{if(c=fS(c,i),c!==null){c.flags&=32767,Rs=c;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{$s=6,Rs=null;return}}if(i=i.sibling,i!==null){Rs=i;return}Rs=i=a}while(i!==null);$s===0&&($s=5)}function co(a,i,c){var m=ft,y=gr.transition;try{gr.transition=null,ft=1,wS(a,i,c,m)}finally{gr.transition=y,ft=m}return null}function wS(a,i,c,m){do hl();while(xi!==null);if((_t&6)!==0)throw Error(n(327));c=a.finishedWork;var y=a.finishedLanes;if(c===null)return null;if(a.finishedWork=null,a.finishedLanes=0,c===a.current)throw Error(n(177));a.callbackNode=null,a.callbackPriority=0;var w=c.lanes|c.childLanes;if(oc(a,w),a===Vs&&(Rs=Vs=null,en=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||fu||(fu=!0,Ry(on,function(){return hl(),null})),w=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||w){w=gr.transition,gr.transition=null;var R=ft;ft=1;var V=_t;_t|=4,Lf.current=null,xS(a,c),gy(c,a),UC(Bh),O=!!Uh,Bh=Uh=null,a.current=c,gS(c),Ut(),_t=V,ft=R,gr.transition=w}else a.current=c;if(fu&&(fu=!1,xi=a,pu=y),w=a.pendingLanes,w===0&&(pi=null),sc(c.stateNode),Mn(a,ht()),i!==null)for(m=a.onRecoverableError,c=0;c<i.length;c++)y=i[c],m(y.value,{componentStack:y.stack,digest:y.digest});if(hu)throw hu=!1,a=$f,$f=null,a;return(pu&1)!==0&&a.tag!==0&&hl(),w=a.pendingLanes,(w&1)!==0?a===qf?Rc++:(Rc=0,qf=a):Rc=0,ui(),null}function hl(){if(xi!==null){var a=dr(pu),i=gr.transition,c=ft;try{if(gr.transition=null,ft=16>a?16:a,xi===null)var m=!1;else{if(a=xi,xi=null,pu=0,(_t&6)!==0)throw Error(n(331));var y=_t;for(_t|=4,He=a.current;He!==null;){var w=He,R=w.child;if((He.flags&16)!==0){var V=w.deletions;if(V!==null){for(var te=0;te<V.length;te++){var pe=V[te];for(He=pe;He!==null;){var Te=He;switch(Te.tag){case 0:case 11:case 15:Tc(8,Te,w)}var Ae=Te.child;if(Ae!==null)Ae.return=Te,He=Ae;else for(;He!==null;){Te=He;var Se=Te.sibling,qe=Te.return;if(my(Te),Te===pe){He=null;break}if(Se!==null){Se.return=qe,He=Se;break}He=qe}}}var Ke=w.alternate;if(Ke!==null){var Xe=Ke.child;if(Xe!==null){Ke.child=null;do{var Ts=Xe.sibling;Xe.sibling=null,Xe=Ts}while(Xe!==null)}}He=w}}if((w.subtreeFlags&2064)!==0&&R!==null)R.return=w,He=R;else e:for(;He!==null;){if(w=He,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:Tc(9,w,w.return)}var oe=w.sibling;if(oe!==null){oe.return=w.return,He=oe;break e}He=w.return}}var ae=a.current;for(He=ae;He!==null;){R=He;var de=R.child;if((R.subtreeFlags&2064)!==0&&de!==null)de.return=R,He=de;else e:for(R=ae;He!==null;){if(V=He,(V.flags&2048)!==0)try{switch(V.tag){case 0:case 11:case 15:du(9,V)}}catch(tt){Ns(V,V.return,tt)}if(V===R){He=null;break e}var Re=V.sibling;if(Re!==null){Re.return=V.return,He=Re;break e}He=V.return}}if(_t=y,ui(),Xs&&typeof Xs.onPostCommitFiberRoot=="function")try{Xs.onPostCommitFiberRoot(Kn,a)}catch{}m=!0}return m}finally{ft=c,gr.transition=i}}return!1}function Ty(a,i,c){i=cl(c,i),i=Wv(a,i,1),a=hi(a,i,1),i=yn(),a!==null&&(Pa(a,1,i),Mn(a,i))}function Ns(a,i,c){if(a.tag===3)Ty(a,a,c);else for(;i!==null;){if(i.tag===3){Ty(i,a,c);break}else if(i.tag===1){var m=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(pi===null||!pi.has(m))){a=cl(c,a),a=Vv(i,a,1),i=hi(i,a,1),a=yn(),i!==null&&(Pa(i,1,a),Mn(i,a));break}}i=i.return}}function NS(a,i,c){var m=a.pingCache;m!==null&&m.delete(i),i=yn(),a.pingedLanes|=a.suspendedLanes&c,Vs===a&&(en&c)===c&&($s===4||$s===3&&(en&130023424)===en&&500>ht()-Df?lo(a,0):Mf|=c),Mn(a,i)}function Ay(a,i){i===0&&((a.mode&1)===0?i=1:(i=cr,cr<<=1,(cr&130023424)===0&&(cr=4194304)));var c=yn();a=Da(a,i),a!==null&&(Pa(a,i,c),Mn(a,c))}function kS(a){var i=a.memoizedState,c=0;i!==null&&(c=i.retryLane),Ay(a,c)}function CS(a,i){var c=0;switch(a.tag){case 13:var m=a.stateNode,y=a.memoizedState;y!==null&&(c=y.retryLane);break;case 19:m=a.stateNode;break;default:throw Error(n(314))}m!==null&&m.delete(i),Ay(a,c)}var Py;Py=function(a,i,c){if(a!==null)if(a.memoizedProps!==i.pendingProps||_n.current)On=!0;else{if((a.lanes&c)===0&&(i.flags&128)===0)return On=!1,mS(a,i,c);On=(a.flags&131072)!==0}else On=!1,ms&&(i.flags&1048576)!==0&&cv(i,Vd,i.index);switch(i.lanes=0,i.tag){case 2:var m=i.type;lu(a,i),a=i.pendingProps;var y=tl(i,cn.current);ol(i,c),y=ff(null,i,m,a,y,c);var w=pf();return i.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,In(m)?(w=!0,Hd(i)):w=!1,i.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,of(i),y.updater=iu,i.stateNode=y,y._reactInternals=i,jf(i,m,a,c),i=Cf(null,i,m,!0,w,c)):(i.tag=0,ms&&w&&Yh(i),vn(null,i,y,c),i=i.child),i;case 16:m=i.elementType;e:{switch(lu(a,i),a=i.pendingProps,y=m._init,m=y(m._payload),i.type=m,y=i.tag=ES(m),a=_r(m,a),y){case 0:i=kf(null,i,m,a,c);break e;case 1:i=sy(null,i,m,a,c);break e;case 11:i=Xv(null,i,m,a,c);break e;case 14:i=Zv(null,i,m,_r(m.type,a),c);break e}throw Error(n(306,m,""))}return i;case 0:return m=i.type,y=i.pendingProps,y=i.elementType===m?y:_r(m,y),kf(a,i,m,y,c);case 1:return m=i.type,y=i.pendingProps,y=i.elementType===m?y:_r(m,y),sy(a,i,m,y,c);case 3:e:{if(ny(i),a===null)throw Error(n(387));m=i.pendingProps,w=i.memoizedState,y=w.element,vv(a,i),Jd(i,m,null,c);var R=i.memoizedState;if(m=R.element,w.isDehydrated)if(w={element:m,isDehydrated:!1,cache:R.cache,pendingSuspenseBoundaries:R.pendingSuspenseBoundaries,transitions:R.transitions},i.updateQueue.baseState=w,i.memoizedState=w,i.flags&256){y=cl(Error(n(423)),i),i=ry(a,i,m,c,y);break e}else if(m!==y){y=cl(Error(n(424)),i),i=ry(a,i,m,c,y);break e}else for(Yn=li(i.stateNode.containerInfo.firstChild),Qn=i,ms=!0,Rr=null,c=xv(i,null,m,c),i.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(rl(),m===y){i=qa(a,i,c);break e}vn(a,i,m,c)}i=i.child}return i;case 5:return jv(i),a===null&&Jh(i),m=i.type,y=i.pendingProps,w=a!==null?a.memoizedProps:null,R=y.children,Hh(m,y)?R=null:w!==null&&Hh(m,w)&&(i.flags|=32),ty(a,i),vn(a,i,R,c),i.child;case 6:return a===null&&Jh(i),null;case 13:return ay(a,i,c);case 4:return lf(i,i.stateNode.containerInfo),m=i.pendingProps,a===null?i.child=al(i,null,m,c):vn(a,i,m,c),i.child;case 11:return m=i.type,y=i.pendingProps,y=i.elementType===m?y:_r(m,y),Xv(a,i,m,y,c);case 7:return vn(a,i,i.pendingProps,c),i.child;case 8:return vn(a,i,i.pendingProps.children,c),i.child;case 12:return vn(a,i,i.pendingProps.children,c),i.child;case 10:e:{if(m=i.type._context,y=i.pendingProps,w=i.memoizedProps,R=y.value,Jt(Yd,m._currentValue),m._currentValue=R,w!==null)if(Pr(w.value,R)){if(w.children===y.children&&!_n.current){i=qa(a,i,c);break e}}else for(w=i.child,w!==null&&(w.return=i);w!==null;){var V=w.dependencies;if(V!==null){R=w.child;for(var te=V.firstContext;te!==null;){if(te.context===m){if(w.tag===1){te=$a(-1,c&-c),te.tag=2;var pe=w.updateQueue;if(pe!==null){pe=pe.shared;var Te=pe.pending;Te===null?te.next=te:(te.next=Te.next,Te.next=te),pe.pending=te}}w.lanes|=c,te=w.alternate,te!==null&&(te.lanes|=c),rf(w.return,c,i),V.lanes|=c;break}te=te.next}}else if(w.tag===10)R=w.type===i.type?null:w.child;else if(w.tag===18){if(R=w.return,R===null)throw Error(n(341));R.lanes|=c,V=R.alternate,V!==null&&(V.lanes|=c),rf(R,c,i),R=w.sibling}else R=w.child;if(R!==null)R.return=w;else for(R=w;R!==null;){if(R===i){R=null;break}if(w=R.sibling,w!==null){w.return=R.return,R=w;break}R=R.return}w=R}vn(a,i,y.children,c),i=i.child}return i;case 9:return y=i.type,m=i.pendingProps.children,ol(i,c),y=pr(y),m=m(y),i.flags|=1,vn(a,i,m,c),i.child;case 14:return m=i.type,y=_r(m,i.pendingProps),y=_r(m.type,y),Zv(a,i,m,y,c);case 15:return Jv(a,i,i.type,i.pendingProps,c);case 17:return m=i.type,y=i.pendingProps,y=i.elementType===m?y:_r(m,y),lu(a,i),i.tag=1,In(m)?(a=!0,Hd(i)):a=!1,ol(i,c),Hv(i,m,y),jf(i,m,y,c),Cf(null,i,m,!0,a,c);case 19:return oy(a,i,c);case 22:return ey(a,i,c)}throw Error(n(156,i.tag))};function Ry(a,i){return se(a,i)}function SS(a,i,c,m){this.tag=a,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vr(a,i,c,m){return new SS(a,i,c,m)}function Kf(a){return a=a.prototype,!(!a||!a.isReactComponent)}function ES(a){if(typeof a=="function")return Kf(a)?1:0;if(a!=null){if(a=a.$$typeof,a===Y)return 11;if(a===X)return 14}return 2}function yi(a,i){var c=a.alternate;return c===null?(c=vr(a.tag,i,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=i,c.type=a.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=a.flags&14680064,c.childLanes=a.childLanes,c.lanes=a.lanes,c.child=a.child,c.memoizedProps=a.memoizedProps,c.memoizedState=a.memoizedState,c.updateQueue=a.updateQueue,i=a.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},c.sibling=a.sibling,c.index=a.index,c.ref=a.ref,c}function yu(a,i,c,m,y,w){var R=2;if(m=a,typeof a=="function")Kf(a)&&(R=1);else if(typeof a=="string")R=5;else e:switch(a){case B:return uo(c.children,y,w,i);case Q:R=8,y|=8;break;case G:return a=vr(12,c,i,y|2),a.elementType=G,a.lanes=w,a;case z:return a=vr(13,c,i,y),a.elementType=z,a.lanes=w,a;case J:return a=vr(19,c,i,y),a.elementType=J,a.lanes=w,a;case I:return bu(c,y,w,i);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case ue:R=10;break e;case _:R=9;break e;case Y:R=11;break e;case X:R=14;break e;case $:R=16,m=null;break e}throw Error(n(130,a==null?a:typeof a,""))}return i=vr(R,c,i,y),i.elementType=a,i.type=m,i.lanes=w,i}function uo(a,i,c,m){return a=vr(7,a,m,i),a.lanes=c,a}function bu(a,i,c,m){return a=vr(22,a,m,i),a.elementType=I,a.lanes=c,a.stateNode={isHidden:!1},a}function Wf(a,i,c){return a=vr(6,a,null,i),a.lanes=c,a}function Vf(a,i,c){return i=vr(4,a.children!==null?a.children:[],a.key,i),i.lanes=c,i.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},i}function TS(a,i,c,m,y){this.tag=i,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Aa(0),this.expirationTimes=Aa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Aa(0),this.identifierPrefix=m,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function Gf(a,i,c,m,y,w,R,V,te){return a=new TS(a,i,c,V,te),i===1?(i=1,w===!0&&(i|=8)):i=0,w=vr(3,null,null,i),a.current=w,w.stateNode=a,w.memoizedState={element:m,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},of(w),a}function AS(a,i,c){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:re,key:m==null?null:""+m,children:a,containerInfo:i,implementation:c}}function _y(a){if(!a)return di;a=a._reactInternals;e:{if(Pn(a)!==a||a.tag!==1)throw Error(n(170));var i=a;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(In(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(n(171))}if(a.tag===1){var c=a.type;if(In(c))return iv(a,c,i)}return i}function Iy(a,i,c,m,y,w,R,V,te){return a=Gf(c,m,!0,a,y,w,R,V,te),a.context=_y(null),c=a.current,m=yn(),y=gi(c),w=$a(m,y),w.callback=i??null,hi(c,w,y),a.current.lanes=y,Pa(a,y,m),Mn(a,m),a}function ju(a,i,c,m){var y=i.current,w=yn(),R=gi(y);return c=_y(c),i.context===null?i.context=c:i.pendingContext=c,i=$a(w,R),i.payload={element:a},m=m===void 0?null:m,m!==null&&(i.callback=m),a=hi(y,i,R),a!==null&&(Lr(a,y,R,w),Zd(a,y,R)),R}function wu(a){return a=a.current,a.child?(a.child.tag===5,a.child.stateNode):null}function Oy(a,i){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var c=a.retryLane;a.retryLane=c!==0&&c<i?c:i}}function Qf(a,i){Oy(a,i),(a=a.alternate)&&Oy(a,i)}function PS(){return null}var Ly=typeof reportError=="function"?reportError:function(a){console.error(a)};function Yf(a){this._internalRoot=a}Nu.prototype.render=Yf.prototype.render=function(a){var i=this._internalRoot;if(i===null)throw Error(n(409));ju(a,i,null,null)},Nu.prototype.unmount=Yf.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var i=a.containerInfo;oo(function(){ju(null,a,null,null)}),i[Ia]=null}};function Nu(a){this._internalRoot=a}Nu.prototype.unstable_scheduleHydration=function(a){if(a){var i=Ho();a={blockedOn:null,target:a,priority:i};for(var c=0;c<Rn.length&&i!==0&&i<Rn[c].priority;c++);Rn.splice(c,0,a),c===0&&Yi(a)}};function Xf(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function ku(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function My(){}function RS(a,i,c,m,y){if(y){if(typeof m=="function"){var w=m;m=function(){var pe=wu(R);w.call(pe)}}var R=Iy(i,m,a,0,null,!1,!1,"",My);return a._reactRootContainer=R,a[Ia]=R.current,pc(a.nodeType===8?a.parentNode:a),oo(),R}for(;y=a.lastChild;)a.removeChild(y);if(typeof m=="function"){var V=m;m=function(){var pe=wu(te);V.call(pe)}}var te=Gf(a,0,!1,null,null,!1,!1,"",My);return a._reactRootContainer=te,a[Ia]=te.current,pc(a.nodeType===8?a.parentNode:a),oo(function(){ju(i,te,c,m)}),te}function Cu(a,i,c,m,y){var w=c._reactRootContainer;if(w){var R=w;if(typeof y=="function"){var V=y;y=function(){var te=wu(R);V.call(te)}}ju(i,R,a,y)}else R=RS(c,i,a,y,m);return wu(R)}ur=function(a){switch(a.tag){case 3:var i=a.stateNode;if(i.current.memoizedState.isDehydrated){var c=oa(i.pendingLanes);c!==0&&(Tr(i,c|1),Mn(i,ht()),(_t&6)===0&&(ml=ht()+500,ui()))}break;case 13:oo(function(){var m=Da(a,1);if(m!==null){var y=yn();Lr(m,a,1,y)}}),Qf(a,1)}},Vi=function(a){if(a.tag===13){var i=Da(a,134217728);if(i!==null){var c=yn();Lr(i,a,134217728,c)}Qf(a,134217728)}},Wn=function(a){if(a.tag===13){var i=gi(a),c=Da(a,i);if(c!==null){var m=yn();Lr(c,a,i,m)}Qf(a,i)}},Ho=function(){return ft},Ko=function(a,i){var c=ft;try{return ft=a,i()}finally{ft=c}},Ys=function(a,i,c){switch(i){case"input":if(Yt(a,c),i=c.name,c.type==="radio"&&i!=null){for(c=a;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<c.length;i++){var m=c[i];if(m!==a&&m.form===a.form){var y=Ud(m);if(!y)throw Error(n(90));$e(m),Yt(m,y)}}}break;case"textarea":wt(a,c);break;case"select":i=c.value,i!=null&&xs(a,!!c.multiple,i,!1)}},Qe=Uf,Rt=oo;var _S={usingClientEntryPoint:!1,Events:[vc,Jo,Ud,An,le,Uf]},_c={findFiberByHostInstance:Ji,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},IS={bundleType:_c.bundleType,version:_c.version,rendererPackageName:_c.rendererPackageName,rendererConfig:_c.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:P.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=ti(a),a===null?null:a.stateNode},findFiberByHostInstance:_c.findFiberByHostInstance||PS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Su=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Su.isDisabled&&Su.supportsFiber)try{Kn=Su.inject(IS),Xs=Su}catch{}}return Dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_S,Dn.createPortal=function(a,i){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xf(i))throw Error(n(200));return AS(a,i,null,c)},Dn.createRoot=function(a,i){if(!Xf(a))throw Error(n(299));var c=!1,m="",y=Ly;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(m=i.identifierPrefix),i.onRecoverableError!==void 0&&(y=i.onRecoverableError)),i=Gf(a,1,!1,null,null,c,!1,m,y),a[Ia]=i.current,pc(a.nodeType===8?a.parentNode:a),new Yf(i)},Dn.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var i=a._reactInternals;if(i===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=ti(i),a=a===null?null:a.stateNode,a},Dn.flushSync=function(a){return oo(a)},Dn.hydrate=function(a,i,c){if(!ku(i))throw Error(n(200));return Cu(null,a,i,!0,c)},Dn.hydrateRoot=function(a,i,c){if(!Xf(a))throw Error(n(405));var m=c!=null&&c.hydratedSources||null,y=!1,w="",R=Ly;if(c!=null&&(c.unstable_strictMode===!0&&(y=!0),c.identifierPrefix!==void 0&&(w=c.identifierPrefix),c.onRecoverableError!==void 0&&(R=c.onRecoverableError)),i=Iy(i,null,a,1,c??null,y,!1,w,R),a[Ia]=i.current,pc(a),m)for(a=0;a<m.length;a++)c=m[a],y=c._getVersion,y=y(c._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[c,y]:i.mutableSourceEagerHydrationData.push(c,y);return new Nu(i)},Dn.render=function(a,i,c){if(!ku(i))throw Error(n(200));return Cu(null,a,i,!1,c)},Dn.unmountComponentAtNode=function(a){if(!ku(a))throw Error(n(40));return a._reactRootContainer?(oo(function(){Cu(null,null,a,!1,function(){a._reactRootContainer=null,a[Ia]=null})}),!0):!1},Dn.unstable_batchedUpdates=Uf,Dn.unstable_renderSubtreeIntoContainer=function(a,i,c,m){if(!ku(c))throw Error(n(200));if(a==null||a._reactInternals===void 0)throw Error(n(38));return Cu(a,i,c,!1,m)},Dn.version="18.3.1-next-f1338f8080-20240426",Dn}var Hy;function Dj(){if(Hy)return ep.exports;Hy=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),ep.exports=US(),ep.exports}var Ky;function BS(){if(Ky)return Eu;Ky=1;var s=Dj();return Eu.createRoot=s.createRoot,Eu.hydrateRoot=s.hydrateRoot,Eu}var HS=BS(),p=Mm();const ot=yd(p),Qx=MS({__proto__:null,default:ot},[p]);function KS(s,t){if(s instanceof RegExp)return{keys:!1,pattern:s};var n,r,o,l,d=[],u="",h=s.split("/");for(h[0]||h.shift();o=h.shift();)n=o[0],n==="*"?(d.push(n),u+=o[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=o.indexOf("?",1),l=o.indexOf(".",1),d.push(o.substring(1,~r?r:~l?l:o.length)),u+=~r&&!~l?"(?:/([^/]+?))?":"/([^/]+?)",~l&&(u+=(~r?"?":"")+"\\"+o.substring(l))):u+="/"+o;return{keys:d,pattern:new RegExp("^"+u+(t?"(?=$|/)":"/?$"),"i")}}var np={exports:{}},rp={};var Wy;function WS(){if(Wy)return rp;Wy=1;var s=Mm();function t(x,g){return x===g&&(x!==0||1/x===1/g)||x!==x&&g!==g}var n=typeof Object.is=="function"?Object.is:t,r=s.useState,o=s.useEffect,l=s.useLayoutEffect,d=s.useDebugValue;function u(x,g){var j=g(),N=r({inst:{value:j,getSnapshot:g}}),b=N[0].inst,k=N[1];return l(function(){b.value=j,b.getSnapshot=g,h(b)&&k({inst:b})},[x,j,g]),o(function(){return h(b)&&k({inst:b}),x(function(){h(b)&&k({inst:b})})},[x]),d(j),j}function h(x){var g=x.getSnapshot;x=x.value;try{var j=g();return!n(x,j)}catch{return!0}}function f(x,g){return g()}var v=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return rp.useSyncExternalStore=s.useSyncExternalStore!==void 0?s.useSyncExternalStore:v,rp}var Vy;function VS(){return Vy||(Vy=1,np.exports=WS()),np.exports}var $j=VS();const GS=Qx.useInsertionEffect,QS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",YS=QS?p.useLayoutEffect:p.useEffect,XS=GS||YS,qj=s=>{const t=p.useRef([s,(...n)=>t[0](...n)]).current;return XS(()=>{t[0]=s}),t[1]},ZS="popstate",Yx="pushState",Xx="replaceState",JS="hashchange",Gy=[ZS,Yx,Xx,JS],e3=s=>{for(const t of Gy)addEventListener(t,s);return()=>{for(const t of Gy)removeEventListener(t,s)}},Fj=(s,t)=>$j.useSyncExternalStore(e3,s,t),t3=()=>location.search,s3=({ssrSearch:s=""}={})=>Fj(t3,()=>s),Qy=()=>location.pathname,n3=({ssrPath:s}={})=>Fj(Qy,s?()=>s:Qy),r3=(s,{replace:t=!1,state:n=null}={})=>history[t?Xx:Yx](n,"",s),a3=(s={})=>[n3(s),r3],Yy=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[Yy]>"u"){for(const s of[Yx,Xx]){const t=history[s];history[s]=function(){const n=t.apply(this,arguments),r=new Event(s);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,Yy,{value:!0})}const i3=(s,t)=>t.toLowerCase().indexOf(s.toLowerCase())?"~"+t:t.slice(s.length)||"/",zj=(s="")=>s==="/"?"":s,o3=(s,t)=>s[0]==="~"?s.slice(1):zj(t)+s,l3=(s="",t)=>i3(Qp(zj(s)),Qp(t)),c3=s=>s[0]==="?"?s.slice(1):s,Qp=s=>{try{return decodeURI(s)}catch{return s}},d3=s=>Qp(c3(s)),Uj={hook:a3,searchHook:s3,parser:KS,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:s=>s},Bj=p.createContext(Uj),_o=()=>p.useContext(Bj),Hj={},Kj=p.createContext(Hj),Dm=()=>p.useContext(Kj),$m=s=>{const[t,n]=s.hook(s);return[l3(s.base,t),qj((r,o)=>n(o3(r,s.base),o))]},Zx=()=>$m(_o()),u3=()=>{const s=_o();return d3(s.searchHook(s))},Jx=(s,t,n,r)=>{const{pattern:o,keys:l}=t instanceof RegExp?{keys:!1,pattern:t}:s(t||"*",r),d=o.exec(n)||[],[u,...h]=d;return u!==void 0?[!0,(()=>{const f=l!==!1?Object.fromEntries(l.map((x,g)=>[x,h[g]])):d.groups;let v={...h};return f&&Object.assign(v,f),v})(),...r?[u]:[]]:[!1,null]},m3=s=>Jx(_o().parser,s,Zx()[0]),h3=({children:s,...t})=>{const n=_o(),r=t.hook?Uj:n;let o=r;const[l,d]=t.ssrPath?.split("?")??[];d&&(t.ssrSearch=d,t.ssrPath=l),t.hrefs=t.hrefs??t.hook?.hrefs;let u=p.useRef({}),h=u.current,f=h;for(let v in r){const x=v==="base"?r[v]+(t[v]||""):t[v]||r[v];h===f&&x!==f[v]&&(u.current=f={...f}),f[v]=x,x!==r[v]&&(o=f)}return p.createElement(Bj.Provider,{value:o,children:s})},Xy=({children:s,component:t},n)=>t?p.createElement(t,{params:n}):typeof s=="function"?s(n):s,f3=s=>{let t=p.useRef(Hj),n=t.current;for(const r in s)s[r]!==n[r]&&(n=s);return Object.keys(s).length===0&&(n=s),t.current=n},At=({path:s,nest:t,match:n,...r})=>{const o=_o(),[l]=$m(o),[d,u,h]=n??Jx(o.parser,s,l,t),f=f3({...Dm(),...u});if(!d)return null;const v=h?p.createElement(h3,{base:h},Xy(r,f)):Xy(r,f);return p.createElement(Kj.Provider,{value:f,children:v})},Ha=p.forwardRef((s,t)=>{const n=_o(),[r,o]=$m(n),{to:l="",href:d=l,onClick:u,asChild:h,children:f,className:v,replace:x,state:g,...j}=s,N=qj(k=>{k.ctrlKey||k.metaKey||k.altKey||k.shiftKey||k.button!==0||(u?.(k),k.defaultPrevented||(k.preventDefault(),o(d,s)))}),b=n.hrefs(d[0]==="~"?d.slice(1):n.base+d,n);return h&&p.isValidElement(f)?p.cloneElement(f,{onClick:N,href:b}):p.createElement("a",{...j,onClick:N,href:b,className:v?.call?v(r===d):v,children:f,ref:t})}),Wj=s=>Array.isArray(s)?s.flatMap(t=>Wj(t&&t.type===p.Fragment?t.props.children:t)):[s],Vj=({children:s,location:t})=>{const n=_o(),[r]=$m(n);for(const o of Wj(s)){let l=0;if(p.isValidElement(o)&&(l=Jx(n.parser,o.props.path,t||r,o.props.nest))[0])return p.cloneElement(o,{match:l})}return null};var Hl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(s){return this.listeners.add(s),this.onSubscribe(),()=>{this.listeners.delete(s),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},go=typeof window>"u"||"Deno"in globalThis;function yr(){}function p3(s,t){return typeof s=="function"?s(t):s}function Yp(s){return typeof s=="number"&&s>=0&&s!==1/0}function Gj(s,t){return Math.max(s+(t||0)-Date.now(),0)}function kl(s,t){return typeof s=="function"?s(t):s}function Fr(s,t){return typeof s=="function"?s(t):s}function Zy(s,t){const{type:n="all",exact:r,fetchStatus:o,predicate:l,queryKey:d,stale:u}=s;if(d){if(r){if(t.queryHash!==eg(d,t.options))return!1}else if(!ad(t.queryKey,d))return!1}if(n!=="all"){const h=t.isActive();if(n==="active"&&!h||n==="inactive"&&h)return!1}return!(typeof u=="boolean"&&t.isStale()!==u||o&&o!==t.state.fetchStatus||l&&!l(t))}function Jy(s,t){const{exact:n,status:r,predicate:o,mutationKey:l}=s;if(l){if(!t.options.mutationKey)return!1;if(n){if(vo(t.options.mutationKey)!==vo(l))return!1}else if(!ad(t.options.mutationKey,l))return!1}return!(r&&t.state.status!==r||o&&!o(t))}function eg(s,t){return(t?.queryKeyHashFn||vo)(s)}function vo(s){return JSON.stringify(s,(t,n)=>Xp(n)?Object.keys(n).sort().reduce((r,o)=>(r[o]=n[o],r),{}):n)}function ad(s,t){return s===t?!0:typeof s!=typeof t?!1:s&&t&&typeof s=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!ad(s[n],t[n])):!1}function Qj(s,t){if(s===t)return s;const n=eb(s)&&eb(t);if(n||Xp(s)&&Xp(t)){const r=n?s:Object.keys(s),o=r.length,l=n?t:Object.keys(t),d=l.length,u=n?[]:{};let h=0;for(let f=0;f<d;f++){const v=n?f:l[f];(!n&&r.includes(v)||n)&&s[v]===void 0&&t[v]===void 0?(u[v]=void 0,h++):(u[v]=Qj(s[v],t[v]),u[v]===s[v]&&s[v]!==void 0&&h++)}return o===d&&h===o?s:u}return t}function cm(s,t){if(!t||Object.keys(s).length!==Object.keys(t).length)return!1;for(const n in s)if(s[n]!==t[n])return!1;return!0}function eb(s){return Array.isArray(s)&&s.length===Object.keys(s).length}function Xp(s){if(!tb(s))return!1;const t=s.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!tb(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(s)!==Object.prototype)}function tb(s){return Object.prototype.toString.call(s)==="[object Object]"}function x3(s){return new Promise(t=>{setTimeout(t,s)})}function Zp(s,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(s,t):n.structuralSharing!==!1?Qj(s,t):t}function g3(s,t,n=0){const r=[...s,t];return n&&r.length>n?r.slice(1):r}function v3(s,t,n=0){const r=[t,...s];return n&&r.length>n?r.slice(0,-1):r}var tg=Symbol();function Yj(s,t){return!s.queryFn&&t?.initialPromise?()=>t.initialPromise:!s.queryFn||s.queryFn===tg?()=>Promise.reject(new Error(`Missing queryFn: '${s.queryHash}'`)):s.queryFn}var y3=class extends Hl{#e;#t;#n;constructor(){super(),this.#n=s=>{if(!go&&window.addEventListener){const t=()=>s();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(s){this.#n=s,this.#t?.(),this.#t=s(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(s){this.#e!==s&&(this.#e=s,this.onFocus())}onFocus(){const s=this.isFocused();this.listeners.forEach(t=>{t(s)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},sg=new y3,b3=class extends Hl{#e=!0;#t;#n;constructor(){super(),this.#n=s=>{if(!go&&window.addEventListener){const t=()=>s(!0),n=()=>s(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(s){this.#n=s,this.#t?.(),this.#t=s(this.setOnline.bind(this))}setOnline(s){this.#e!==s&&(this.#e=s,this.listeners.forEach(n=>{n(s)}))}isOnline(){return this.#e}},dm=new b3;function Jp(){let s,t;const n=new Promise((o,l)=>{s=o,t=l});n.status="pending",n.catch(()=>{});function r(o){Object.assign(n,o),delete n.resolve,delete n.reject}return n.resolve=o=>{r({status:"fulfilled",value:o}),s(o)},n.reject=o=>{r({status:"rejected",reason:o}),t(o)},n}function j3(s){return Math.min(1e3*2**s,3e4)}function Xj(s){return(s??"online")==="online"?dm.isOnline():!0}var Zj=class extends Error{constructor(s){super("CancelledError"),this.revert=s?.revert,this.silent=s?.silent}};function ap(s){return s instanceof Zj}function Jj(s){let t=!1,n=0,r=!1,o;const l=Jp(),d=b=>{r||(g(new Zj(b)),s.abort?.())},u=()=>{t=!0},h=()=>{t=!1},f=()=>sg.isFocused()&&(s.networkMode==="always"||dm.isOnline())&&s.canRun(),v=()=>Xj(s.networkMode)&&s.canRun(),x=b=>{r||(r=!0,s.onSuccess?.(b),o?.(),l.resolve(b))},g=b=>{r||(r=!0,s.onError?.(b),o?.(),l.reject(b))},j=()=>new Promise(b=>{o=k=>{(r||f())&&b(k)},s.onPause?.()}).then(()=>{o=void 0,r||s.onContinue?.()}),N=()=>{if(r)return;let b;const k=n===0?s.initialPromise:void 0;try{b=k??s.fn()}catch(E){b=Promise.reject(E)}Promise.resolve(b).then(x).catch(E=>{if(r)return;const S=s.retry??(go?0:3),T=s.retryDelay??j3,P=typeof T=="function"?T(n,E):T,H=S===!0||typeof S=="number"&&n<S||typeof S=="function"&&S(n,E);if(t||!H){g(E);return}n++,s.onFail?.(n,E),x3(P).then(()=>f()?void 0:j()).then(()=>{t?g(E):N()})})};return{promise:l,cancel:d,continue:()=>(o?.(),l),cancelRetry:u,continueRetry:h,canStart:v,start:()=>(v()?N():j().then(N),l)}}function w3(){let s=[],t=0,n=u=>{u()},r=u=>{u()},o=u=>setTimeout(u,0);const l=u=>{t?s.push(u):o(()=>{n(u)})},d=()=>{const u=s;s=[],u.length&&o(()=>{r(()=>{u.forEach(h=>{n(h)})})})};return{batch:u=>{let h;t++;try{h=u()}finally{t--,t||d()}return h},batchCalls:u=>(...h)=>{l(()=>{u(...h)})},schedule:l,setNotifyFunction:u=>{n=u},setBatchNotifyFunction:u=>{r=u},setScheduler:u=>{o=u}}}var Fs=w3(),ew=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Yp(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(s){this.gcTime=Math.max(this.gcTime||0,s??(go?1/0:300*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},N3=class extends ew{#e;#t;#n;#s;#i;#a;constructor(s){super(),this.#a=!1,this.#i=s.defaultOptions,this.setOptions(s.options),this.observers=[],this.#n=s.cache,this.queryKey=s.queryKey,this.queryHash=s.queryHash,this.#e=k3(this.options),this.state=s.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(s){this.options={...this.#i,...s},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(s,t){const n=Zp(this.state.data,s,this.options);return this.#r({data:n,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),n}setState(s,t){this.#r({type:"setState",state:s,setStateOptions:t})}cancel(s){const t=this.#s?.promise;return this.#s?.cancel(s),t?t.then(yr).catch(yr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(s=>Fr(s.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===tg||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(s=>s.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(s=0){return this.state.isInvalidated||this.state.data===void 0||!Gj(this.state.dataUpdatedAt,s)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(s){this.observers.includes(s)||(this.observers.push(s),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:s}))}removeObserver(s){this.observers.includes(s)&&(this.observers=this.observers.filter(t=>t!==s),this.observers.length||(this.#s&&(this.#a?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:s}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#r({type:"invalidate"})}fetch(s,t){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(s&&this.setOptions(s),!this.options.queryFn){const u=this.observers.find(h=>h.options.queryFn);u&&this.setOptions(u.options)}const n=new AbortController,r=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(this.#a=!0,n.signal)})},o=()=>{const u=Yj(this.options,t),h={queryKey:this.queryKey,meta:this.meta};return r(h),this.#a=!1,this.options.persister?this.options.persister(u,h,this):u(h)},l={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};r(l),this.options.behavior?.onFetch(l,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#r({type:"fetch",meta:l.fetchOptions?.meta});const d=u=>{ap(u)&&u.silent||this.#r({type:"error",error:u}),ap(u)||(this.#n.config.onError?.(u,this),this.#n.config.onSettled?.(this.state.data,u,this)),this.scheduleGc()};return this.#s=Jj({initialPromise:t?.initialPromise,fn:l.fetchFn,abort:n.abort.bind(n),onSuccess:u=>{if(u===void 0){d(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(u)}catch(h){d(h);return}this.#n.config.onSuccess?.(u,this),this.#n.config.onSettled?.(u,this.state.error,this),this.scheduleGc()},onError:d,onFail:(u,h)=>{this.#r({type:"failed",failureCount:u,error:h})},onPause:()=>{this.#r({type:"pause"})},onContinue:()=>{this.#r({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}),this.#s.start()}#r(s){const t=n=>{switch(s.type){case"failed":return{...n,fetchFailureCount:s.failureCount,fetchFailureReason:s.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...tw(n.data,this.options),fetchMeta:s.meta??null};case"success":return{...n,data:s.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:s.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!s.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=s.error;return ap(r)&&r.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...n,error:r,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...s.state}}};this.state=t(this.state),Fs.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:s})})}};function tw(s,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Xj(t.networkMode)?"fetching":"paused",...s===void 0&&{error:null,status:"pending"}}}function k3(s){const t=typeof s.initialData=="function"?s.initialData():s.initialData,n=t!==void 0,r=n?typeof s.initialDataUpdatedAt=="function"?s.initialDataUpdatedAt():s.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var C3=class extends Hl{constructor(s={}){super(),this.config=s,this.#e=new Map}#e;build(s,t,n){const r=t.queryKey,o=t.queryHash??eg(r,t);let l=this.get(o);return l||(l=new N3({cache:this,queryKey:r,queryHash:o,options:s.defaultQueryOptions(t),state:n,defaultOptions:s.getQueryDefaults(r)}),this.add(l)),l}add(s){this.#e.has(s.queryHash)||(this.#e.set(s.queryHash,s),this.notify({type:"added",query:s}))}remove(s){const t=this.#e.get(s.queryHash);t&&(s.destroy(),t===s&&this.#e.delete(s.queryHash),this.notify({type:"removed",query:s}))}clear(){Fs.batch(()=>{this.getAll().forEach(s=>{this.remove(s)})})}get(s){return this.#e.get(s)}getAll(){return[...this.#e.values()]}find(s){const t={exact:!0,...s};return this.getAll().find(n=>Zy(t,n))}findAll(s={}){const t=this.getAll();return Object.keys(s).length>0?t.filter(n=>Zy(s,n)):t}notify(s){Fs.batch(()=>{this.listeners.forEach(t=>{t(s)})})}onFocus(){Fs.batch(()=>{this.getAll().forEach(s=>{s.onFocus()})})}onOnline(){Fs.batch(()=>{this.getAll().forEach(s=>{s.onOnline()})})}},S3=class extends ew{#e;#t;#n;constructor(s){super(),this.mutationId=s.mutationId,this.#t=s.mutationCache,this.#e=[],this.state=s.state||sw(),this.setOptions(s.options),this.scheduleGc()}setOptions(s){this.options=s,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(s){this.#e.includes(s)||(this.#e.push(s),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:s}))}removeObserver(s){this.#e=this.#e.filter(t=>t!==s),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:s})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(s){this.#n=Jj({fn:()=>this.options.mutationFn?this.options.mutationFn(s):Promise.reject(new Error("No mutationFn found")),onFail:(r,o)=>{this.#s({type:"failed",failureCount:r,error:o})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const t=this.state.status==="pending",n=!this.#n.canStart();try{if(!t){this.#s({type:"pending",variables:s,isPaused:n}),await this.#t.config.onMutate?.(s,this);const o=await this.options.onMutate?.(s);o!==this.state.context&&this.#s({type:"pending",context:o,variables:s,isPaused:n})}const r=await this.#n.start();return await this.#t.config.onSuccess?.(r,s,this.state.context,this),await this.options.onSuccess?.(r,s,this.state.context),await this.#t.config.onSettled?.(r,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(r,null,s,this.state.context),this.#s({type:"success",data:r}),r}catch(r){try{throw await this.#t.config.onError?.(r,s,this.state.context,this),await this.options.onError?.(r,s,this.state.context),await this.#t.config.onSettled?.(void 0,r,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,r,s,this.state.context),r}finally{this.#s({type:"error",error:r})}}finally{this.#t.runNext(this)}}#s(s){const t=n=>{switch(s.type){case"failed":return{...n,failureCount:s.failureCount,failureReason:s.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:s.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:s.isPaused,status:"pending",variables:s.variables,submittedAt:Date.now()};case"success":return{...n,data:s.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:s.error,failureCount:n.failureCount+1,failureReason:s.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Fs.batch(()=>{this.#e.forEach(n=>{n.onMutationUpdate(s)}),this.#t.notify({mutation:this,type:"updated",action:s})})}};function sw(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var E3=class extends Hl{constructor(s={}){super(),this.config=s,this.#e=new Map,this.#t=Date.now()}#e;#t;build(s,t,n){const r=new S3({mutationCache:this,mutationId:++this.#t,options:s.defaultMutationOptions(t),state:n});return this.add(r),r}add(s){const t=Tu(s),n=this.#e.get(t)??[];n.push(s),this.#e.set(t,n),this.notify({type:"added",mutation:s})}remove(s){const t=Tu(s);if(this.#e.has(t)){const n=this.#e.get(t)?.filter(r=>r!==s);n&&(n.length===0?this.#e.delete(t):this.#e.set(t,n))}this.notify({type:"removed",mutation:s})}canRun(s){const t=this.#e.get(Tu(s))?.find(n=>n.state.status==="pending");return!t||t===s}runNext(s){return this.#e.get(Tu(s))?.find(n=>n!==s&&n.state.isPaused)?.continue()??Promise.resolve()}clear(){Fs.batch(()=>{this.getAll().forEach(s=>{this.remove(s)})})}getAll(){return[...this.#e.values()].flat()}find(s){const t={exact:!0,...s};return this.getAll().find(n=>Jy(t,n))}findAll(s={}){return this.getAll().filter(t=>Jy(s,t))}notify(s){Fs.batch(()=>{this.listeners.forEach(t=>{t(s)})})}resumePausedMutations(){const s=this.getAll().filter(t=>t.state.isPaused);return Fs.batch(()=>Promise.all(s.map(t=>t.continue().catch(yr))))}};function Tu(s){return s.options.scope?.id??String(s.mutationId)}function sb(s){return{onFetch:(t,n)=>{const r=t.options,o=t.fetchOptions?.meta?.fetchMore?.direction,l=t.state.data?.pages||[],d=t.state.data?.pageParams||[];let u={pages:[],pageParams:[]},h=0;const f=async()=>{let v=!1;const x=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(t.signal.aborted?v=!0:t.signal.addEventListener("abort",()=>{v=!0}),t.signal)})},g=Yj(t.options,t.fetchOptions),j=async(N,b,k)=>{if(v)return Promise.reject();if(b==null&&N.pages.length)return Promise.resolve(N);const E={queryKey:t.queryKey,pageParam:b,direction:k?"backward":"forward",meta:t.options.meta};x(E);const S=await g(E),{maxPages:T}=t.options,P=k?v3:g3;return{pages:P(N.pages,S,T),pageParams:P(N.pageParams,b,T)}};if(o&&l.length){const N=o==="backward",b=N?T3:nb,k={pages:l,pageParams:d},E=b(r,k);u=await j(k,E,N)}else{const N=s??l.length;do{const b=h===0?d[0]??r.initialPageParam:nb(r,u);if(h>0&&b==null)break;u=await j(u,b),h++}while(h<N)}return u};t.options.persister?t.fetchFn=()=>t.options.persister?.(f,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n):t.fetchFn=f}}}function nb(s,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?s.getNextPageParam(t[r],t,n[r],n):void 0}function T3(s,{pages:t,pageParams:n}){return t.length>0?s.getPreviousPageParam?.(t[0],t,n[0],n):void 0}var A3=class{#e;#t;#n;#s;#i;#a;#r;#o;constructor(s={}){this.#e=s.queryCache||new C3,this.#t=s.mutationCache||new E3,this.#n=s.defaultOptions||{},this.#s=new Map,this.#i=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#r=sg.subscribe(async s=>{s&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#o=dm.subscribe(async s=>{s&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#r?.(),this.#r=void 0,this.#o?.(),this.#o=void 0)}isFetching(s){return this.#e.findAll({...s,fetchStatus:"fetching"}).length}isMutating(s){return this.#t.findAll({...s,status:"pending"}).length}getQueryData(s){const t=this.defaultQueryOptions({queryKey:s});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(s){const t=this.getQueryData(s.queryKey);if(t===void 0)return this.fetchQuery(s);{const n=this.defaultQueryOptions(s),r=this.#e.build(this,n);return s.revalidateIfStale&&r.isStaleByTime(kl(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(s){return this.#e.findAll(s).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(s,t,n){const r=this.defaultQueryOptions({queryKey:s}),l=this.#e.get(r.queryHash)?.state.data,d=p3(t,l);if(d!==void 0)return this.#e.build(this,r).setData(d,{...n,manual:!0})}setQueriesData(s,t,n){return Fs.batch(()=>this.#e.findAll(s).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(s){const t=this.defaultQueryOptions({queryKey:s});return this.#e.get(t.queryHash)?.state}removeQueries(s){const t=this.#e;Fs.batch(()=>{t.findAll(s).forEach(n=>{t.remove(n)})})}resetQueries(s,t){const n=this.#e,r={type:"active",...s};return Fs.batch(()=>(n.findAll(s).forEach(o=>{o.reset()}),this.refetchQueries(r,t)))}cancelQueries(s={},t={}){const n={revert:!0,...t},r=Fs.batch(()=>this.#e.findAll(s).map(o=>o.cancel(n)));return Promise.all(r).then(yr).catch(yr)}invalidateQueries(s={},t={}){return Fs.batch(()=>{if(this.#e.findAll(s).forEach(r=>{r.invalidate()}),s.refetchType==="none")return Promise.resolve();const n={...s,type:s.refetchType??s.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(s={},t){const n={...t,cancelRefetch:t?.cancelRefetch??!0},r=Fs.batch(()=>this.#e.findAll(s).filter(o=>!o.isDisabled()).map(o=>{let l=o.fetch(void 0,n);return n.throwOnError||(l=l.catch(yr)),o.state.fetchStatus==="paused"?Promise.resolve():l}));return Promise.all(r).then(yr)}fetchQuery(s){const t=this.defaultQueryOptions(s);t.retry===void 0&&(t.retry=!1);const n=this.#e.build(this,t);return n.isStaleByTime(kl(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(s){return this.fetchQuery(s).then(yr).catch(yr)}fetchInfiniteQuery(s){return s.behavior=sb(s.pages),this.fetchQuery(s)}prefetchInfiniteQuery(s){return this.fetchInfiniteQuery(s).then(yr).catch(yr)}ensureInfiniteQueryData(s){return s.behavior=sb(s.pages),this.ensureQueryData(s)}resumePausedMutations(){return dm.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(s){this.#n=s}setQueryDefaults(s,t){this.#s.set(vo(s),{queryKey:s,defaultOptions:t})}getQueryDefaults(s){const t=[...this.#s.values()];let n={};return t.forEach(r=>{ad(s,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(s,t){this.#i.set(vo(s),{mutationKey:s,defaultOptions:t})}getMutationDefaults(s){const t=[...this.#i.values()];let n={};return t.forEach(r=>{ad(s,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(s){if(s._defaulted)return s;const t={...this.#n.queries,...this.getQueryDefaults(s.queryKey),...s,_defaulted:!0};return t.queryHash||(t.queryHash=eg(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===tg&&(t.enabled=!1),t}defaultMutationOptions(s){return s?._defaulted?s:{...this.#n.mutations,...s?.mutationKey&&this.getMutationDefaults(s.mutationKey),...s,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},P3=class extends Hl{constructor(s,t){super(),this.options=t,this.#e=s,this.#o=null,this.#r=Jp(),this.options.experimental_prefetchInRender||this.#r.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#n=void 0;#s=void 0;#i;#a;#r;#o;#p;#m;#h;#c;#d;#l;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),rb(this.#t,this.options)?this.#u():this.updateResult(),this.#y())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ex(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ex(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#j(),this.#t.removeObserver(this)}setOptions(s,t){const n=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(s),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Fr(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#t.setOptions(this.options),n._defaulted&&!cm(this.options,n)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const o=this.hasListeners();o&&ab(this.#t,r,this.options,n)&&this.#u(),this.updateResult(t),o&&(this.#t!==r||Fr(this.options.enabled,this.#t)!==Fr(n.enabled,this.#t)||kl(this.options.staleTime,this.#t)!==kl(n.staleTime,this.#t))&&this.#x();const l=this.#g();o&&(this.#t!==r||Fr(this.options.enabled,this.#t)!==Fr(n.enabled,this.#t)||l!==this.#l)&&this.#v(l)}getOptimisticResult(s){const t=this.#e.getQueryCache().build(this.#e,s),n=this.createResult(t,s);return _3(this,n)&&(this.#s=n,this.#a=this.options,this.#i=this.#t.state),n}getCurrentResult(){return this.#s}trackResult(s,t){const n={};return Object.keys(s).forEach(r=>{Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(r),t?.(r),s[r])})}),n}trackProp(s){this.#f.add(s)}getCurrentQuery(){return this.#t}refetch({...s}={}){return this.fetch({...s})}fetchOptimistic(s){const t=this.#e.defaultQueryOptions(s),n=this.#e.getQueryCache().build(this.#e,t);return n.fetch().then(()=>this.createResult(n,t))}fetch(s){return this.#u({...s,cancelRefetch:s.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#s))}#u(s){this.#w();let t=this.#t.fetch(this.options,s);return s?.throwOnError||(t=t.catch(yr)),t}#x(){this.#b();const s=kl(this.options.staleTime,this.#t);if(go||this.#s.isStale||!Yp(s))return;const n=Gj(this.#s.dataUpdatedAt,s)+1;this.#c=setTimeout(()=>{this.#s.isStale||this.updateResult()},n)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(s){this.#j(),this.#l=s,!(go||Fr(this.options.enabled,this.#t)===!1||!Yp(this.#l)||this.#l===0)&&(this.#d=setInterval(()=>{(this.options.refetchIntervalInBackground||sg.isFocused())&&this.#u()},this.#l))}#y(){this.#x(),this.#v(this.#g())}#b(){this.#c&&(clearTimeout(this.#c),this.#c=void 0)}#j(){this.#d&&(clearInterval(this.#d),this.#d=void 0)}createResult(s,t){const n=this.#t,r=this.options,o=this.#s,l=this.#i,d=this.#a,h=s!==n?s.state:this.#n,{state:f}=s;let v={...f},x=!1,g;if(t._optimisticResults){const B=this.hasListeners(),Q=!B&&rb(s,t),G=B&&ab(s,n,t,r);(Q||G)&&(v={...v,...tw(f.data,s.options)}),t._optimisticResults==="isRestoring"&&(v.fetchStatus="idle")}let{error:j,errorUpdatedAt:N,status:b}=v;if(t.select&&v.data!==void 0)if(o&&v.data===l?.data&&t.select===this.#p)g=this.#m;else try{this.#p=t.select,g=t.select(v.data),g=Zp(o?.data,g,t),this.#m=g,this.#o=null}catch(B){this.#o=B}else g=v.data;if(t.placeholderData!==void 0&&g===void 0&&b==="pending"){let B;if(o?.isPlaceholderData&&t.placeholderData===d?.placeholderData)B=o.data;else if(B=typeof t.placeholderData=="function"?t.placeholderData(this.#h?.state.data,this.#h):t.placeholderData,t.select&&B!==void 0)try{B=t.select(B),this.#o=null}catch(Q){this.#o=Q}B!==void 0&&(b="success",g=Zp(o?.data,B,t),x=!0)}this.#o&&(j=this.#o,g=this.#m,N=Date.now(),b="error");const k=v.fetchStatus==="fetching",E=b==="pending",S=b==="error",T=E&&k,P=g!==void 0,re={status:b,fetchStatus:v.fetchStatus,isPending:E,isSuccess:b==="success",isError:S,isInitialLoading:T,isLoading:T,data:g,dataUpdatedAt:v.dataUpdatedAt,error:j,errorUpdatedAt:N,failureCount:v.fetchFailureCount,failureReason:v.fetchFailureReason,errorUpdateCount:v.errorUpdateCount,isFetched:v.dataUpdateCount>0||v.errorUpdateCount>0,isFetchedAfterMount:v.dataUpdateCount>h.dataUpdateCount||v.errorUpdateCount>h.errorUpdateCount,isFetching:k,isRefetching:k&&!E,isLoadingError:S&&!P,isPaused:v.fetchStatus==="paused",isPlaceholderData:x,isRefetchError:S&&P,isStale:ng(s,t),refetch:this.refetch,promise:this.#r};if(this.options.experimental_prefetchInRender){const B=ue=>{re.status==="error"?ue.reject(re.error):re.data!==void 0&&ue.resolve(re.data)},Q=()=>{const ue=this.#r=re.promise=Jp();B(ue)},G=this.#r;switch(G.status){case"pending":s.queryHash===n.queryHash&&B(G);break;case"fulfilled":(re.status==="error"||re.data!==G.value)&&Q();break;case"rejected":(re.status!=="error"||re.error!==G.reason)&&Q();break}}return re}updateResult(s){const t=this.#s,n=this.createResult(this.#t,this.options);if(this.#i=this.#t.state,this.#a=this.options,this.#i.data!==void 0&&(this.#h=this.#t),cm(n,t))return;this.#s=n;const r={},o=()=>{if(!t)return!0;const{notifyOnChangeProps:l}=this.options,d=typeof l=="function"?l():l;if(d==="all"||!d&&!this.#f.size)return!0;const u=new Set(d??this.#f);return this.options.throwOnError&&u.add("error"),Object.keys(this.#s).some(h=>{const f=h;return this.#s[f]!==t[f]&&u.has(f)})};s?.listeners!==!1&&o()&&(r.listeners=!0),this.#N({...r,...s})}#w(){const s=this.#e.getQueryCache().build(this.#e,this.options);if(s===this.#t)return;const t=this.#t;this.#t=s,this.#n=s.state,this.hasListeners()&&(t?.removeObserver(this),s.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#y()}#N(s){Fs.batch(()=>{s.listeners&&this.listeners.forEach(t=>{t(this.#s)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function R3(s,t){return Fr(t.enabled,s)!==!1&&s.state.data===void 0&&!(s.state.status==="error"&&t.retryOnMount===!1)}function rb(s,t){return R3(s,t)||s.state.data!==void 0&&ex(s,t,t.refetchOnMount)}function ex(s,t,n){if(Fr(t.enabled,s)!==!1){const r=typeof n=="function"?n(s):n;return r==="always"||r!==!1&&ng(s,t)}return!1}function ab(s,t,n,r){return(s!==t||Fr(r.enabled,s)===!1)&&(!n.suspense||s.state.status!=="error")&&ng(s,n)}function ng(s,t){return Fr(t.enabled,s)!==!1&&s.isStaleByTime(kl(t.staleTime,s))}function _3(s,t){return!cm(s.getCurrentResult(),t)}var I3=class extends Hl{#e;#t=void 0;#n;#s;constructor(t,n){super(),this.#e=t,this.setOptions(n),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const n=this.options;this.options=this.#e.defaultMutationOptions(t),cm(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),n?.mutationKey&&this.options.mutationKey&&vo(n.mutationKey)!==vo(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(t){this.#i(),this.#a(t)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#i(),this.#a()}mutate(t,n){return this.#s=n,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(t)}#i(){const t=this.#n?.state??sw();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#a(t){Fs.batch(()=>{if(this.#s&&this.hasListeners()){const n=this.#t.variables,r=this.#t.context;t?.type==="success"?(this.#s.onSuccess?.(t.data,n,r),this.#s.onSettled?.(t.data,null,n,r)):t?.type==="error"&&(this.#s.onError?.(t.error,n,r),this.#s.onSettled?.(void 0,t.error,n,r))}this.listeners.forEach(n=>{n(this.#t)})})}},nw=p.createContext(void 0),rg=s=>{const t=p.useContext(nw);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},O3=({client:s,children:t})=>(p.useEffect(()=>(s.mount(),()=>{s.unmount()}),[s]),e.jsx(nw.Provider,{value:s,children:t})),rw=p.createContext(!1),L3=()=>p.useContext(rw);rw.Provider;function M3(){let s=!1;return{clearReset:()=>{s=!1},reset:()=>{s=!0},isReset:()=>s}}var D3=p.createContext(M3()),$3=()=>p.useContext(D3);function aw(s,t){return typeof s=="function"?s(...t):!!s}function tx(){}var q3=(s,t)=>{(s.suspense||s.throwOnError||s.experimental_prefetchInRender)&&(t.isReset()||(s.retryOnMount=!1))},F3=s=>{p.useEffect(()=>{s.clearReset()},[s])},z3=({result:s,errorResetBoundary:t,throwOnError:n,query:r})=>s.isError&&!t.isReset()&&!s.isFetching&&r&&aw(n,[s.error,r]),U3=s=>{s.suspense&&(s.staleTime===void 0&&(s.staleTime=1e3),typeof s.gcTime=="number"&&(s.gcTime=Math.max(s.gcTime,1e3)))},B3=(s,t)=>s.isLoading&&s.isFetching&&!t,H3=(s,t)=>s?.suspense&&t.isPending,ib=(s,t,n)=>t.fetchOptimistic(s).catch(()=>{n.clearReset()});function K3(s,t,n){const r=rg(),o=L3(),l=$3(),d=r.defaultQueryOptions(s);r.getDefaultOptions().queries?._experimental_beforeQuery?.(d),d._optimisticResults=o?"isRestoring":"optimistic",U3(d),q3(d,l),F3(l);const u=!r.getQueryCache().get(d.queryHash),[h]=p.useState(()=>new t(r,d)),f=h.getOptimisticResult(d);if(p.useSyncExternalStore(p.useCallback(v=>{const x=o?tx:h.subscribe(Fs.batchCalls(v));return h.updateResult(),x},[h,o]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),p.useEffect(()=>{h.setOptions(d,{listeners:!1})},[d,h]),H3(d,f))throw ib(d,h,l);if(z3({result:f,errorResetBoundary:l,throwOnError:d.throwOnError,query:r.getQueryCache().get(d.queryHash)}))throw f.error;return r.getDefaultOptions().queries?._experimental_afterQuery?.(d,f),d.experimental_prefetchInRender&&!go&&B3(f,o)&&(u?ib(d,h,l):r.getQueryCache().get(d.queryHash)?.promise)?.catch(tx).finally(()=>{h.updateResult()}),d.notifyOnChangeProps?f:h.trackResult(f)}function _e(s,t){return K3(s,P3)}function we(s,t){const n=rg(),[r]=p.useState(()=>new I3(n,s));p.useEffect(()=>{r.setOptions(s)},[r,s]);const o=p.useSyncExternalStore(p.useCallback(d=>r.subscribe(Fs.batchCalls(d)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),l=p.useCallback((d,u)=>{r.mutate(d,u).catch(tx)},[r]);if(o.error&&aw(r.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:l,mutateAsync:o.mutate}}async function iw(s){if(!s.ok){const t=await s.text()||s.statusText;throw new Error(`${s.status}: ${t}`)}}async function je(s,t,n){const r=await fetch(t,{method:s,headers:n?{"Content-Type":"application/json"}:{},body:n?JSON.stringify(n):void 0,credentials:"include"});return await iw(r),r}const ag=({on401:s})=>async({queryKey:t})=>{const n=await fetch(t.join("/"),{credentials:"include"});return s==="returnNull"&&n.status===401?null:(await iw(n),await n.json())},xe=new A3({defaultOptions:{queries:{queryFn:ag({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),W3=1,V3=1e6;let ip=0;function G3(){return ip=(ip+1)%Number.MAX_SAFE_INTEGER,ip.toString()}const op=new Map,ob=s=>{if(op.has(s))return;const t=setTimeout(()=>{op.delete(s),Yc({type:"REMOVE_TOAST",toastId:s})},V3);op.set(s,t)},Q3=(s,t)=>{switch(t.type){case"ADD_TOAST":return{...s,toasts:[t.toast,...s.toasts].slice(0,W3)};case"UPDATE_TOAST":return{...s,toasts:s.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?ob(n):s.toasts.forEach(r=>{ob(r.id)}),{...s,toasts:s.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(n=>n.id!==t.toastId)}}},Zu=[];let Ju={toasts:[]};function Yc(s){Ju=Q3(Ju,s),Zu.forEach(t=>{t(Ju)})}function Y3({...s}){const t=G3(),n=o=>Yc({type:"UPDATE_TOAST",toast:{...o,id:t}}),r=()=>Yc({type:"DISMISS_TOAST",toastId:t});return Yc({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:o=>{o||r()}}}),{id:t,dismiss:r,update:n}}function mt(){const[s,t]=p.useState(Ju);return p.useEffect(()=>(Zu.push(t),()=>{const n=Zu.indexOf(t);n>-1&&Zu.splice(n,1)}),[s]),{...s,toast:Y3,dismiss:n=>Yc({type:"DISMISS_TOAST",toastId:n})}}var Kl=Dj();const X3=yd(Kl);function Me(s,t,{checkForDefaultPrevented:n=!0}={}){return function(o){if(s?.(o),n===!1||!o.defaultPrevented)return t?.(o)}}function lb(s,t){if(typeof s=="function")return s(t);s!=null&&(s.current=t)}function bd(...s){return t=>{let n=!1;const r=s.map(o=>{const l=lb(o,t);return!n&&typeof l=="function"&&(n=!0),l});if(n)return()=>{for(let o=0;o<r.length;o++){const l=r[o];typeof l=="function"?l():lb(s[o],null)}}}}function qt(...s){return p.useCallback(bd(...s),s)}function Z3(s,t){const n=p.createContext(t),r=l=>{const{children:d,...u}=l,h=p.useMemo(()=>u,Object.values(u));return e.jsx(n.Provider,{value:h,children:d})};r.displayName=s+"Provider";function o(l){const d=p.useContext(n);if(d)return d;if(t!==void 0)return t;throw new Error(`\`${l}\` must be used within \`${s}\``)}return[r,o]}function Jr(s,t=[]){let n=[];function r(l,d){const u=p.createContext(d),h=n.length;n=[...n,d];const f=x=>{const{scope:g,children:j,...N}=x,b=g?.[s]?.[h]||u,k=p.useMemo(()=>N,Object.values(N));return e.jsx(b.Provider,{value:k,children:j})};f.displayName=l+"Provider";function v(x,g){const j=g?.[s]?.[h]||u,N=p.useContext(j);if(N)return N;if(d!==void 0)return d;throw new Error(`\`${x}\` must be used within \`${l}\``)}return[f,v]}const o=()=>{const l=n.map(d=>p.createContext(d));return function(u){const h=u?.[s]||l;return p.useMemo(()=>({[`__scope${s}`]:{...u,[s]:h}}),[u,h])}};return o.scopeName=s,[r,J3(o,...t)]}function J3(...s){const t=s[0];if(s.length===1)return t;const n=()=>{const r=s.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(l){const d=r.reduce((u,{useScope:h,scopeName:f})=>{const x=h(l)[`__scope${f}`];return{...u,...x}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:d}),[d])}};return n.scopeName=t.scopeName,n}function yo(s){const t=eE(s),n=p.forwardRef((r,o)=>{const{children:l,...d}=r,u=p.Children.toArray(l),h=u.find(sE);if(h){const f=h.props.children,v=u.map(x=>x===h?p.Children.count(f)>1?p.Children.only(null):p.isValidElement(f)?f.props.children:null:x);return e.jsx(t,{...d,ref:o,children:p.isValidElement(f)?p.cloneElement(f,void 0,v):null})}return e.jsx(t,{...d,ref:o,children:l})});return n.displayName=`${s}.Slot`,n}var ig=yo("Slot");function eE(s){const t=p.forwardRef((n,r)=>{const{children:o,...l}=n;if(p.isValidElement(o)){const d=rE(o),u=nE(l,o.props);return o.type!==p.Fragment&&(u.ref=r?bd(r,d):d),p.cloneElement(o,u)}return p.Children.count(o)>1?p.Children.only(null):null});return t.displayName=`${s}.SlotClone`,t}var ow=Symbol("radix.slottable");function tE(s){const t=({children:n})=>e.jsx(e.Fragment,{children:n});return t.displayName=`${s}.Slottable`,t.__radixId=ow,t}function sE(s){return p.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===ow}function nE(s,t){const n={...t};for(const r in t){const o=s[r],l=t[r];/^on[A-Z]/.test(r)?o&&l?n[r]=(...u)=>{l(...u),o(...u)}:o&&(n[r]=o):r==="style"?n[r]={...o,...l}:r==="className"&&(n[r]=[o,l].filter(Boolean).join(" "))}return{...s,...n}}function rE(s){let t=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?s.ref:(t=Object.getOwnPropertyDescriptor(s,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?s.props.ref:s.props.ref||s.ref)}function qm(s){const t=s+"CollectionProvider",[n,r]=Jr(t),[o,l]=n(t,{collectionRef:{current:null},itemMap:new Map}),d=b=>{const{scope:k,children:E}=b,S=ot.useRef(null),T=ot.useRef(new Map).current;return e.jsx(o,{scope:k,itemMap:T,collectionRef:S,children:E})};d.displayName=t;const u=s+"CollectionSlot",h=yo(u),f=ot.forwardRef((b,k)=>{const{scope:E,children:S}=b,T=l(u,E),P=qt(k,T.collectionRef);return e.jsx(h,{ref:P,children:S})});f.displayName=u;const v=s+"CollectionItemSlot",x="data-radix-collection-item",g=yo(v),j=ot.forwardRef((b,k)=>{const{scope:E,children:S,...T}=b,P=ot.useRef(null),H=qt(k,P),re=l(v,E);return ot.useEffect(()=>(re.itemMap.set(P,{ref:P,...T}),()=>{re.itemMap.delete(P)})),e.jsx(g,{[x]:"",ref:H,children:S})});j.displayName=v;function N(b){const k=l(s+"CollectionConsumer",b);return ot.useCallback(()=>{const S=k.collectionRef.current;if(!S)return[];const T=Array.from(S.querySelectorAll(`[${x}]`));return Array.from(k.itemMap.values()).sort((re,B)=>T.indexOf(re.ref.current)-T.indexOf(B.ref.current))},[k.collectionRef,k.itemMap])}return[{Provider:d,Slot:f,ItemSlot:j},N,r]}var aE=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],lt=aE.reduce((s,t)=>{const n=yo(`Primitive.${t}`),r=p.forwardRef((o,l)=>{const{asChild:d,...u}=o,h=d?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(h,{...u,ref:l})});return r.displayName=`Primitive.${t}`,{...s,[t]:r}},{});function og(s,t){s&&Kl.flushSync(()=>s.dispatchEvent(t))}function an(s){const t=p.useRef(s);return p.useEffect(()=>{t.current=s}),p.useMemo(()=>(...n)=>t.current?.(...n),[])}function iE(s,t=globalThis?.document){const n=an(s);p.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var oE="DismissableLayer",sx="dismissableLayer.update",lE="dismissableLayer.pointerDownOutside",cE="dismissableLayer.focusOutside",cb,lw=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Wl=p.forwardRef((s,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:l,onInteractOutside:d,onDismiss:u,...h}=s,f=p.useContext(lw),[v,x]=p.useState(null),g=v?.ownerDocument??globalThis?.document,[,j]=p.useState({}),N=qt(t,B=>x(B)),b=Array.from(f.layers),[k]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),E=b.indexOf(k),S=v?b.indexOf(v):-1,T=f.layersWithOutsidePointerEventsDisabled.size>0,P=S>=E,H=uE(B=>{const Q=B.target,G=[...f.branches].some(ue=>ue.contains(Q));!P||G||(o?.(B),d?.(B),B.defaultPrevented||u?.())},g),re=mE(B=>{const Q=B.target;[...f.branches].some(ue=>ue.contains(Q))||(l?.(B),d?.(B),B.defaultPrevented||u?.())},g);return iE(B=>{S===f.layers.size-1&&(r?.(B),!B.defaultPrevented&&u&&(B.preventDefault(),u()))},g),p.useEffect(()=>{if(v)return n&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(cb=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(v)),f.layers.add(v),db(),()=>{n&&f.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=cb)}},[v,g,n,f]),p.useEffect(()=>()=>{v&&(f.layers.delete(v),f.layersWithOutsidePointerEventsDisabled.delete(v),db())},[v,f]),p.useEffect(()=>{const B=()=>j({});return document.addEventListener(sx,B),()=>document.removeEventListener(sx,B)},[]),e.jsx(lt.div,{...h,ref:N,style:{pointerEvents:T?P?"auto":"none":void 0,...s.style},onFocusCapture:Me(s.onFocusCapture,re.onFocusCapture),onBlurCapture:Me(s.onBlurCapture,re.onBlurCapture),onPointerDownCapture:Me(s.onPointerDownCapture,H.onPointerDownCapture)})});Wl.displayName=oE;var dE="DismissableLayerBranch",cw=p.forwardRef((s,t)=>{const n=p.useContext(lw),r=p.useRef(null),o=qt(t,r);return p.useEffect(()=>{const l=r.current;if(l)return n.branches.add(l),()=>{n.branches.delete(l)}},[n.branches]),e.jsx(lt.div,{...s,ref:o})});cw.displayName=dE;function uE(s,t=globalThis?.document){const n=an(s),r=p.useRef(!1),o=p.useRef(()=>{});return p.useEffect(()=>{const l=u=>{if(u.target&&!r.current){let h=function(){dw(lE,n,f,{discrete:!0})};const f={originalEvent:u};u.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=h,t.addEventListener("click",o.current,{once:!0})):h()}else t.removeEventListener("click",o.current);r.current=!1},d=window.setTimeout(()=>{t.addEventListener("pointerdown",l)},0);return()=>{window.clearTimeout(d),t.removeEventListener("pointerdown",l),t.removeEventListener("click",o.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function mE(s,t=globalThis?.document){const n=an(s),r=p.useRef(!1);return p.useEffect(()=>{const o=l=>{l.target&&!r.current&&dw(cE,n,{originalEvent:l},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function db(){const s=new CustomEvent(sx);document.dispatchEvent(s)}function dw(s,t,n,{discrete:r}){const o=n.originalEvent.target,l=new CustomEvent(s,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(s,t,{once:!0}),r?og(o,l):o.dispatchEvent(l)}var hE=Wl,fE=cw,zs=globalThis?.document?p.useLayoutEffect:()=>{},pE="Portal",jd=p.forwardRef((s,t)=>{const{container:n,...r}=s,[o,l]=p.useState(!1);zs(()=>l(!0),[]);const d=n||o&&globalThis?.document?.body;return d?X3.createPortal(e.jsx(lt.div,{...r,ref:t}),d):null});jd.displayName=pE;function xE(s,t){return p.useReducer((n,r)=>t[n][r]??n,s)}var ea=s=>{const{present:t,children:n}=s,r=gE(t),o=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),l=qt(r.ref,vE(o));return typeof n=="function"||r.isPresent?p.cloneElement(o,{ref:l}):null};ea.displayName="Presence";function gE(s){const[t,n]=p.useState(),r=p.useRef({}),o=p.useRef(s),l=p.useRef("none"),d=s?"mounted":"unmounted",[u,h]=xE(d,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const f=Au(r.current);l.current=u==="mounted"?f:"none"},[u]),zs(()=>{const f=r.current,v=o.current;if(v!==s){const g=l.current,j=Au(f);s?h("MOUNT"):j==="none"||f?.display==="none"?h("UNMOUNT"):h(v&&g!==j?"ANIMATION_OUT":"UNMOUNT"),o.current=s}},[s,h]),zs(()=>{if(t){let f;const v=t.ownerDocument.defaultView??window,x=j=>{const b=Au(r.current).includes(j.animationName);if(j.target===t&&b&&(h("ANIMATION_END"),!o.current)){const k=t.style.animationFillMode;t.style.animationFillMode="forwards",f=v.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=k)})}},g=j=>{j.target===t&&(l.current=Au(r.current))};return t.addEventListener("animationstart",g),t.addEventListener("animationcancel",x),t.addEventListener("animationend",x),()=>{v.clearTimeout(f),t.removeEventListener("animationstart",g),t.removeEventListener("animationcancel",x),t.removeEventListener("animationend",x)}}else h("ANIMATION_END")},[t,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:p.useCallback(f=>{f&&(r.current=getComputedStyle(f)),n(f)},[])}}function Au(s){return s?.animationName||"none"}function vE(s){let t=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?s.ref:(t=Object.getOwnPropertyDescriptor(s,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?s.props.ref:s.props.ref||s.ref)}function Ka({prop:s,defaultProp:t,onChange:n=()=>{}}){const[r,o]=yE({defaultProp:t,onChange:n}),l=s!==void 0,d=l?s:r,u=an(n),h=p.useCallback(f=>{if(l){const x=typeof f=="function"?f(s):f;x!==s&&u(x)}else o(f)},[l,s,o,u]);return[d,h]}function yE({defaultProp:s,onChange:t}){const n=p.useState(s),[r]=n,o=p.useRef(r),l=an(t);return p.useEffect(()=>{o.current!==r&&(l(r),o.current=r)},[r,o,l]),n}var bE="VisuallyHidden",wd=p.forwardRef((s,t)=>e.jsx(lt.span,{...s,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...s.style}}));wd.displayName=bE;var jE=wd,lg="ToastProvider",[cg,wE,NE]=qm("Toast"),[uw]=Jr("Toast",[NE]),[kE,Fm]=uw(lg),mw=s=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:o="right",swipeThreshold:l=50,children:d}=s,[u,h]=p.useState(null),[f,v]=p.useState(0),x=p.useRef(!1),g=p.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${lg}\`. Expected non-empty \`string\`.`),e.jsx(cg.Provider,{scope:t,children:e.jsx(kE,{scope:t,label:n,duration:r,swipeDirection:o,swipeThreshold:l,toastCount:f,viewport:u,onViewportChange:h,onToastAdd:p.useCallback(()=>v(j=>j+1),[]),onToastRemove:p.useCallback(()=>v(j=>j-1),[]),isFocusedToastEscapeKeyDownRef:x,isClosePausedRef:g,children:d})})};mw.displayName=lg;var hw="ToastViewport",CE=["F8"],nx="toast.viewportPause",rx="toast.viewportResume",fw=p.forwardRef((s,t)=>{const{__scopeToast:n,hotkey:r=CE,label:o="Notifications ({hotkey})",...l}=s,d=Fm(hw,n),u=wE(n),h=p.useRef(null),f=p.useRef(null),v=p.useRef(null),x=p.useRef(null),g=qt(t,x,d.onViewportChange),j=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),N=d.toastCount>0;p.useEffect(()=>{const k=E=>{r.length!==0&&r.every(T=>E[T]||E.code===T)&&x.current?.focus()};return document.addEventListener("keydown",k),()=>document.removeEventListener("keydown",k)},[r]),p.useEffect(()=>{const k=h.current,E=x.current;if(N&&k&&E){const S=()=>{if(!d.isClosePausedRef.current){const re=new CustomEvent(nx);E.dispatchEvent(re),d.isClosePausedRef.current=!0}},T=()=>{if(d.isClosePausedRef.current){const re=new CustomEvent(rx);E.dispatchEvent(re),d.isClosePausedRef.current=!1}},P=re=>{!k.contains(re.relatedTarget)&&T()},H=()=>{k.contains(document.activeElement)||T()};return k.addEventListener("focusin",S),k.addEventListener("focusout",P),k.addEventListener("pointermove",S),k.addEventListener("pointerleave",H),window.addEventListener("blur",S),window.addEventListener("focus",T),()=>{k.removeEventListener("focusin",S),k.removeEventListener("focusout",P),k.removeEventListener("pointermove",S),k.removeEventListener("pointerleave",H),window.removeEventListener("blur",S),window.removeEventListener("focus",T)}}},[N,d.isClosePausedRef]);const b=p.useCallback(({tabbingDirection:k})=>{const S=u().map(T=>{const P=T.ref.current,H=[P,...$E(P)];return k==="forwards"?H:H.reverse()});return(k==="forwards"?S.reverse():S).flat()},[u]);return p.useEffect(()=>{const k=x.current;if(k){const E=S=>{const T=S.altKey||S.ctrlKey||S.metaKey;if(S.key==="Tab"&&!T){const H=document.activeElement,re=S.shiftKey;if(S.target===k&&re){f.current?.focus();return}const G=b({tabbingDirection:re?"backwards":"forwards"}),ue=G.findIndex(_=>_===H);lp(G.slice(ue+1))?S.preventDefault():re?f.current?.focus():v.current?.focus()}};return k.addEventListener("keydown",E),()=>k.removeEventListener("keydown",E)}},[u,b]),e.jsxs(fE,{ref:h,role:"region","aria-label":o.replace("{hotkey}",j),tabIndex:-1,style:{pointerEvents:N?void 0:"none"},children:[N&&e.jsx(ax,{ref:f,onFocusFromOutsideViewport:()=>{const k=b({tabbingDirection:"forwards"});lp(k)}}),e.jsx(cg.Slot,{scope:n,children:e.jsx(lt.ol,{tabIndex:-1,...l,ref:g})}),N&&e.jsx(ax,{ref:v,onFocusFromOutsideViewport:()=>{const k=b({tabbingDirection:"backwards"});lp(k)}})]})});fw.displayName=hw;var pw="ToastFocusProxy",ax=p.forwardRef((s,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...o}=s,l=Fm(pw,n);return e.jsx(wd,{"aria-hidden":!0,tabIndex:0,...o,ref:t,style:{position:"fixed"},onFocus:d=>{const u=d.relatedTarget;!l.viewport?.contains(u)&&r()}})});ax.displayName=pw;var zm="Toast",SE="toast.swipeStart",EE="toast.swipeMove",TE="toast.swipeCancel",AE="toast.swipeEnd",xw=p.forwardRef((s,t)=>{const{forceMount:n,open:r,defaultOpen:o,onOpenChange:l,...d}=s,[u=!0,h]=Ka({prop:r,defaultProp:o,onChange:l});return e.jsx(ea,{present:n||u,children:e.jsx(_E,{open:u,...d,ref:t,onClose:()=>h(!1),onPause:an(s.onPause),onResume:an(s.onResume),onSwipeStart:Me(s.onSwipeStart,f=>{f.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Me(s.onSwipeMove,f=>{const{x:v,y:x}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","move"),f.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${v}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${x}px`)}),onSwipeCancel:Me(s.onSwipeCancel,f=>{f.currentTarget.setAttribute("data-swipe","cancel"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Me(s.onSwipeEnd,f=>{const{x:v,y:x}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","end"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${v}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${x}px`),h(!1)})})})});xw.displayName=zm;var[PE,RE]=uw(zm,{onClose(){}}),_E=p.forwardRef((s,t)=>{const{__scopeToast:n,type:r="foreground",duration:o,open:l,onClose:d,onEscapeKeyDown:u,onPause:h,onResume:f,onSwipeStart:v,onSwipeMove:x,onSwipeCancel:g,onSwipeEnd:j,...N}=s,b=Fm(zm,n),[k,E]=p.useState(null),S=qt(t,J=>E(J)),T=p.useRef(null),P=p.useRef(null),H=o||b.duration,re=p.useRef(0),B=p.useRef(H),Q=p.useRef(0),{onToastAdd:G,onToastRemove:ue}=b,_=an(()=>{k?.contains(document.activeElement)&&b.viewport?.focus(),d()}),Y=p.useCallback(J=>{!J||J===1/0||(window.clearTimeout(Q.current),re.current=new Date().getTime(),Q.current=window.setTimeout(_,J))},[_]);p.useEffect(()=>{const J=b.viewport;if(J){const X=()=>{Y(B.current),f?.()},$=()=>{const I=new Date().getTime()-re.current;B.current=B.current-I,window.clearTimeout(Q.current),h?.()};return J.addEventListener(nx,$),J.addEventListener(rx,X),()=>{J.removeEventListener(nx,$),J.removeEventListener(rx,X)}}},[b.viewport,H,h,f,Y]),p.useEffect(()=>{l&&!b.isClosePausedRef.current&&Y(H)},[l,H,b.isClosePausedRef,Y]),p.useEffect(()=>(G(),()=>ue()),[G,ue]);const z=p.useMemo(()=>k?Nw(k):null,[k]);return b.viewport?e.jsxs(e.Fragment,{children:[z&&e.jsx(IE,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:z}),e.jsx(PE,{scope:n,onClose:_,children:Kl.createPortal(e.jsx(cg.ItemSlot,{scope:n,children:e.jsx(hE,{asChild:!0,onEscapeKeyDown:Me(u,()=>{b.isFocusedToastEscapeKeyDownRef.current||_(),b.isFocusedToastEscapeKeyDownRef.current=!1}),children:e.jsx(lt.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":l?"open":"closed","data-swipe-direction":b.swipeDirection,...N,ref:S,style:{userSelect:"none",touchAction:"none",...s.style},onKeyDown:Me(s.onKeyDown,J=>{J.key==="Escape"&&(u?.(J.nativeEvent),J.nativeEvent.defaultPrevented||(b.isFocusedToastEscapeKeyDownRef.current=!0,_()))}),onPointerDown:Me(s.onPointerDown,J=>{J.button===0&&(T.current={x:J.clientX,y:J.clientY})}),onPointerMove:Me(s.onPointerMove,J=>{if(!T.current)return;const X=J.clientX-T.current.x,$=J.clientY-T.current.y,I=!!P.current,A=["left","right"].includes(b.swipeDirection),W=["left","up"].includes(b.swipeDirection)?Math.min:Math.max,Z=A?W(0,X):0,q=A?0:W(0,$),ne=J.pointerType==="touch"?10:2,K={x:Z,y:q},U={originalEvent:J,delta:K};I?(P.current=K,Pu(EE,x,U,{discrete:!1})):ub(K,b.swipeDirection,ne)?(P.current=K,Pu(SE,v,U,{discrete:!1}),J.target.setPointerCapture(J.pointerId)):(Math.abs(X)>ne||Math.abs($)>ne)&&(T.current=null)}),onPointerUp:Me(s.onPointerUp,J=>{const X=P.current,$=J.target;if($.hasPointerCapture(J.pointerId)&&$.releasePointerCapture(J.pointerId),P.current=null,T.current=null,X){const I=J.currentTarget,A={originalEvent:J,delta:X};ub(X,b.swipeDirection,b.swipeThreshold)?Pu(AE,j,A,{discrete:!0}):Pu(TE,g,A,{discrete:!0}),I.addEventListener("click",W=>W.preventDefault(),{once:!0})}})})})}),b.viewport)})]}):null}),IE=s=>{const{__scopeToast:t,children:n,...r}=s,o=Fm(zm,t),[l,d]=p.useState(!1),[u,h]=p.useState(!1);return ME(()=>d(!0)),p.useEffect(()=>{const f=window.setTimeout(()=>h(!0),1e3);return()=>window.clearTimeout(f)},[]),u?null:e.jsx(jd,{asChild:!0,children:e.jsx(wd,{...r,children:l&&e.jsxs(e.Fragment,{children:[o.label," ",n]})})})},OE="ToastTitle",gw=p.forwardRef((s,t)=>{const{__scopeToast:n,...r}=s;return e.jsx(lt.div,{...r,ref:t})});gw.displayName=OE;var LE="ToastDescription",vw=p.forwardRef((s,t)=>{const{__scopeToast:n,...r}=s;return e.jsx(lt.div,{...r,ref:t})});vw.displayName=LE;var yw="ToastAction",bw=p.forwardRef((s,t)=>{const{altText:n,...r}=s;return n.trim()?e.jsx(ww,{altText:n,asChild:!0,children:e.jsx(dg,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${yw}\`. Expected non-empty \`string\`.`),null)});bw.displayName=yw;var jw="ToastClose",dg=p.forwardRef((s,t)=>{const{__scopeToast:n,...r}=s,o=RE(jw,n);return e.jsx(ww,{asChild:!0,children:e.jsx(lt.button,{type:"button",...r,ref:t,onClick:Me(s.onClick,o.onClose)})})});dg.displayName=jw;var ww=p.forwardRef((s,t)=>{const{__scopeToast:n,altText:r,...o}=s;return e.jsx(lt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...o,ref:t})});function Nw(s){const t=[];return Array.from(s.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),DE(r)){const o=r.ariaHidden||r.hidden||r.style.display==="none",l=r.dataset.radixToastAnnounceExclude==="";if(!o)if(l){const d=r.dataset.radixToastAnnounceAlt;d&&t.push(d)}else t.push(...Nw(r))}}),t}function Pu(s,t,n,{discrete:r}){const o=n.originalEvent.currentTarget,l=new CustomEvent(s,{bubbles:!0,cancelable:!0,detail:n});t&&o.addEventListener(s,t,{once:!0}),r?og(o,l):o.dispatchEvent(l)}var ub=(s,t,n=0)=>{const r=Math.abs(s.x),o=Math.abs(s.y),l=r>o;return t==="left"||t==="right"?l&&r>n:!l&&o>n};function ME(s=()=>{}){const t=an(s);zs(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function DE(s){return s.nodeType===s.ELEMENT_NODE}function $E(s){const t=[],n=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function lp(s){const t=document.activeElement;return s.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var qE=mw,kw=fw,Cw=xw,Sw=gw,Ew=vw,Tw=bw,Aw=dg;function Pw(s){var t,n,r="";if(typeof s=="string"||typeof s=="number")r+=s;else if(typeof s=="object")if(Array.isArray(s)){var o=s.length;for(t=0;t<o;t++)s[t]&&(n=Pw(s[t]))&&(r&&(r+=" "),r+=n)}else for(n in s)s[n]&&(r&&(r+=" "),r+=n);return r}function Rw(){for(var s,t,n=0,r="",o=arguments.length;n<o;n++)(s=arguments[n])&&(t=Pw(s))&&(r&&(r+=" "),r+=t);return r}const mb=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,hb=Rw,Vl=(s,t)=>n=>{var r;if(t?.variants==null)return hb(s,n?.class,n?.className);const{variants:o,defaultVariants:l}=t,d=Object.keys(o).map(f=>{const v=n?.[f],x=l?.[f];if(v===null)return null;const g=mb(v)||mb(x);return o[f][g]}),u=n&&Object.entries(n).reduce((f,v)=>{let[x,g]=v;return g===void 0||(f[x]=g),f},{}),h=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((f,v)=>{let{class:x,className:g,...j}=v;return Object.entries(j).every(N=>{let[b,k]=N;return Array.isArray(k)?k.includes({...l,...u}[b]):{...l,...u}[b]===k})?[...f,x,g]:f},[]);return hb(s,d,h,n?.class,n?.className)};const FE=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_w=(...s)=>s.filter((t,n,r)=>!!t&&r.indexOf(t)===n).join(" ");var zE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const UE=p.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:l,iconNode:d,...u},h)=>p.createElement("svg",{ref:h,...zE,width:t,height:t,stroke:s,strokeWidth:r?Number(n)*24/Number(t):n,className:_w("lucide",o),...u},[...d.map(([f,v])=>p.createElement(f,v)),...Array.isArray(l)?l:[l]]));const he=(s,t)=>{const n=p.forwardRef(({className:r,...o},l)=>p.createElement(UE,{ref:l,iconNode:t,className:_w(`lucide-${FE(s)}`,r),...o}));return n.displayName=`${s}`,n};const Ml=he("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);const BE=he("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);const va=he("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const Cl=he("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const HE=he("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);const ug=he("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);const KE=he("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);const WE=he("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);const fb=he("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);const Xc=he("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]);const bo=he("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);const _i=he("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);const VE=he("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);const id=he("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);const GE=he("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);const Sl=he("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const em=he("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);const Zc=he("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);const Um=he("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const ix=he("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const cp=he("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const is=he("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const Sr=he("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const Bm=he("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const Io=he("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const Jc=he("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const wn=he("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const ys=he("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const Ii=he("CircleDot",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);const Iw=he("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const QE=he("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);const fo=he("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const mg=he("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const YE=he("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);const Wt=he("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const Ow=he("CodeXml",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]);const XE=he("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);const ZE=he("Container",[["path",{d:"M22 7.7c0-.6-.4-1.2-.8-1.5l-6.3-3.9a1.72 1.72 0 0 0-1.7 0l-10.3 6c-.5.2-.9.8-.9 1.4v6.6c0 .5.4 1.2.8 1.5l6.3 3.9a1.72 1.72 0 0 0 1.7 0l10.3-6c.5-.3.9-1 .9-1.5Z",key:"1t2lqe"}],["path",{d:"M10 21.9V14L2.1 9.1",key:"o7czzq"}],["path",{d:"m10 14 11.9-6.9",key:"zm5e20"}],["path",{d:"M14 19.8v-8.1",key:"159ecu"}],["path",{d:"M18 17.5V9.4",key:"11uown"}]]);const fn=he("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);const ox=he("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);const Ti=he("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);const JE=he("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);const rr=he("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);const jo=he("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const eT=he("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);const tT=he("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);const _s=he("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);const Hm=he("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);const Oo=he("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const pb=he("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);const Gt=he("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const Lw=he("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);const sT=he("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const po=he("FolderGit2",[["path",{d:"M9 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v5",key:"1w6njk"}],["circle",{cx:"13",cy:"12",r:"2",key:"1j92g6"}],["path",{d:"M18 19c-2.8 0-5-2.2-5-5v8",key:"pkpw2h"}],["circle",{cx:"20",cy:"19",r:"2",key:"1obnsp"}]]);const qn=he("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);const um=he("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);const mm=he("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);const nT=he("GitFork",[["circle",{cx:"12",cy:"18",r:"3",key:"1mpf1b"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["path",{d:"M18 9v2c0 .6-.4 1-1 1H7c-.6 0-1-.4-1-1V9",key:"1uq4wg"}],["path",{d:"M12 12v3",key:"158kv8"}]]);const mo=he("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);const nn=he("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);const rT=he("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);const aT=he("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);const xb=he("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);const Mw=he("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);const iT=he("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);const Dw=he("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);const gb=he("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);const Fi=he("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const oT=he("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);const $w=he("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const lT=he("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);const Dl=he("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);const qw=he("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);const hm=he("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);const ho=he("LifeBuoy",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.93 4.93 4.24 4.24",key:"1ymg45"}],["path",{d:"m14.83 9.17 4.24-4.24",key:"1cb5xl"}],["path",{d:"m14.83 14.83 4.24 4.24",key:"q42g0n"}],["path",{d:"m9.17 14.83-4.24 4.24",key:"bqpfvv"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]]);const cT=he("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);const El=he("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);const We=he("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const od=he("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const hg=he("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);const fg=he("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const hs=he("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const wl=he("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const dT=he("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);const vb=he("MemoryStick",[["path",{d:"M6 19v-3",key:"1nvgqn"}],["path",{d:"M10 19v-3",key:"iu8nkm"}],["path",{d:"M14 19v-3",key:"kcehxu"}],["path",{d:"M18 19v-3",key:"1vh91z"}],["path",{d:"M8 11V9",key:"63erz4"}],["path",{d:"M16 11V9",key:"fru6f3"}],["path",{d:"M12 11V9",key:"ha00sb"}],["path",{d:"M2 15h20",key:"16ne18"}],["path",{d:"M2 7a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v1.1a2 2 0 0 0 0 3.837V17a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-5.1a2 2 0 0 0 0-3.837Z",key:"lhddv3"}]]);const uT=he("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const Nd=he("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);const yb=he("MessageSquareMore",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M16 10h.01",key:"1m94wz"}]]);const Kt=he("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const mT=he("MessagesSquare",[["path",{d:"M14 9a2 2 0 0 1-2 2H6l-4 4V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2z",key:"p1xzt8"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v11l-4-4h-6a2 2 0 0 1-2-2v-1",key:"1cx29u"}]]);const hT=he("Milestone",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M12 3v3",key:"1n5kay"}],["path",{d:"M4 6a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h13a2 2 0 0 0 1.152-.365l3.424-2.317a1 1 0 0 0 0-1.635l-3.424-2.318A2 2 0 0 0 17 6z",key:"1btarq"}]]);const bb=he("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);const fm=he("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);const fT=he("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);const jb=he("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);const pg=he("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);const pT=he("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);const Km=he("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);const Fw=he("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);const xT=he("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]);const kr=he("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);const ld=he("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);const lx=he("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);const gT=he("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);const Qt=he("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const wb=he("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);const Wa=he("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);const Gl=he("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const wo=he("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);const Wm=he("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const Vm=he("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);const Nb=he("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);const sn=he("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const os=he("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);const er=he("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);const kb=he("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);const zw=he("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const xg=he("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);const Cb=he("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);const Uw=he("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const vT=he("ShieldOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]]);const kn=he("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);const yT=he("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);const gg=he("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);const ya=he("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);const Hr=he("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);const bT=he("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);const $l=he("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);const cx=he("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);const pm=he("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);const vg=he("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);const Bw=he("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);const Hw=he("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);const ls=he("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const jT=he("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);const yg=he("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const Fn=he("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const wT=he("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);const NT=he("Unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]]);const Sb=he("Unplug",[["path",{d:"m19 5 3-3",key:"yk6iyv"}],["path",{d:"m2 22 3-3",key:"19mgm9"}],["path",{d:"M6.3 20.3a2.4 2.4 0 0 0 3.4 0L12 18l-6-6-2.3 2.3a2.4 2.4 0 0 0 0 3.4Z",key:"goz73y"}],["path",{d:"M7.5 13.5 10 11",key:"7xgeeb"}],["path",{d:"M10.5 16.5 13 14",key:"10btkg"}],["path",{d:"m12 6 6 6 2.3-2.3a2.4 2.4 0 0 0 0-3.4l-2.6-2.6a2.4 2.4 0 0 0-3.4 0Z",key:"1snsnr"}]]);const xm=he("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const Kw=he("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);const gm=he("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);const Gm=he("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const kT=he("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);const Vr=he("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const bg=he("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);const CT=he("Webhook",[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]]);const Eb=he("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);const Ww=he("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);const zn=he("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const $n=he("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),jg="-",ST=s=>{const t=TT(s),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=s;return{getClassGroupId:d=>{const u=d.split(jg);return u[0]===""&&u.length!==1&&u.shift(),Vw(u,t)||ET(d)},getConflictingClassGroupIds:(d,u)=>{const h=n[d]||[];return u&&r[d]?[...h,...r[d]]:h}}},Vw=(s,t)=>{if(s.length===0)return t.classGroupId;const n=s[0],r=t.nextPart.get(n),o=r?Vw(s.slice(1),r):void 0;if(o)return o;if(t.validators.length===0)return;const l=s.join(jg);return t.validators.find(({validator:d})=>d(l))?.classGroupId},Tb=/^\[(.+)\]$/,ET=s=>{if(Tb.test(s)){const t=Tb.exec(s)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},TT=s=>{const{theme:t,prefix:n}=s,r={nextPart:new Map,validators:[]};return PT(Object.entries(s.classGroups),n).forEach(([l,d])=>{dx(d,r,l,t)}),r},dx=(s,t,n,r)=>{s.forEach(o=>{if(typeof o=="string"){const l=o===""?t:Ab(t,o);l.classGroupId=n;return}if(typeof o=="function"){if(AT(o)){dx(o(r),t,n,r);return}t.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([l,d])=>{dx(d,Ab(t,l),n,r)})})},Ab=(s,t)=>{let n=s;return t.split(jg).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},AT=s=>s.isThemeGetter,PT=(s,t)=>t?s.map(([n,r])=>{const o=r.map(l=>typeof l=="string"?t+l:typeof l=="object"?Object.fromEntries(Object.entries(l).map(([d,u])=>[t+d,u])):l);return[n,o]}):s,RT=s=>{if(s<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const o=(l,d)=>{n.set(l,d),t++,t>s&&(t=0,r=n,n=new Map)};return{get(l){let d=n.get(l);if(d!==void 0)return d;if((d=r.get(l))!==void 0)return o(l,d),d},set(l,d){n.has(l)?n.set(l,d):o(l,d)}}},Gw="!",_T=s=>{const{separator:t,experimentalParseClassName:n}=s,r=t.length===1,o=t[0],l=t.length,d=u=>{const h=[];let f=0,v=0,x;for(let k=0;k<u.length;k++){let E=u[k];if(f===0){if(E===o&&(r||u.slice(k,k+l)===t)){h.push(u.slice(v,k)),v=k+l;continue}if(E==="/"){x=k;continue}}E==="["?f++:E==="]"&&f--}const g=h.length===0?u:u.substring(v),j=g.startsWith(Gw),N=j?g.substring(1):g,b=x&&x>v?x-v:void 0;return{modifiers:h,hasImportantModifier:j,baseClassName:N,maybePostfixModifierPosition:b}};return n?u=>n({className:u,parseClassName:d}):d},IT=s=>{if(s.length<=1)return s;const t=[];let n=[];return s.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},OT=s=>({cache:RT(s.cacheSize),parseClassName:_T(s),...ST(s)}),LT=/\s+/,MT=(s,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:o}=t,l=[],d=s.trim().split(LT);let u="";for(let h=d.length-1;h>=0;h-=1){const f=d[h],{modifiers:v,hasImportantModifier:x,baseClassName:g,maybePostfixModifierPosition:j}=n(f);let N=!!j,b=r(N?g.substring(0,j):g);if(!b){if(!N){u=f+(u.length>0?" "+u:u);continue}if(b=r(g),!b){u=f+(u.length>0?" "+u:u);continue}N=!1}const k=IT(v).join(":"),E=x?k+Gw:k,S=E+b;if(l.includes(S))continue;l.push(S);const T=o(b,N);for(let P=0;P<T.length;++P){const H=T[P];l.push(E+H)}u=f+(u.length>0?" "+u:u)}return u};function DT(){let s=0,t,n,r="";for(;s<arguments.length;)(t=arguments[s++])&&(n=Qw(t))&&(r&&(r+=" "),r+=n);return r}const Qw=s=>{if(typeof s=="string")return s;let t,n="";for(let r=0;r<s.length;r++)s[r]&&(t=Qw(s[r]))&&(n&&(n+=" "),n+=t);return n};function $T(s,...t){let n,r,o,l=d;function d(h){const f=t.reduce((v,x)=>x(v),s());return n=OT(f),r=n.cache.get,o=n.cache.set,l=u,u(h)}function u(h){const f=r(h);if(f)return f;const v=MT(h,n);return o(h,v),v}return function(){return l(DT.apply(null,arguments))}}const rs=s=>{const t=n=>n[s]||[];return t.isThemeGetter=!0,t},Yw=/^\[(?:([a-z-]+):)?(.+)\]$/i,qT=/^\d+\/\d+$/,FT=new Set(["px","full","screen"]),zT=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,UT=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,BT=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,HT=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,KT=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,za=s=>Tl(s)||FT.has(s)||qT.test(s),ji=s=>Ql(s,"length",JT),Tl=s=>!!s&&!Number.isNaN(Number(s)),dp=s=>Ql(s,"number",Tl),Oc=s=>!!s&&Number.isInteger(Number(s)),WT=s=>s.endsWith("%")&&Tl(s.slice(0,-1)),pt=s=>Yw.test(s),wi=s=>zT.test(s),VT=new Set(["length","size","percentage"]),GT=s=>Ql(s,VT,Xw),QT=s=>Ql(s,"position",Xw),YT=new Set(["image","url"]),XT=s=>Ql(s,YT,tA),ZT=s=>Ql(s,"",eA),Lc=()=>!0,Ql=(s,t,n)=>{const r=Yw.exec(s);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},JT=s=>UT.test(s)&&!BT.test(s),Xw=()=>!1,eA=s=>HT.test(s),tA=s=>KT.test(s),sA=()=>{const s=rs("colors"),t=rs("spacing"),n=rs("blur"),r=rs("brightness"),o=rs("borderColor"),l=rs("borderRadius"),d=rs("borderSpacing"),u=rs("borderWidth"),h=rs("contrast"),f=rs("grayscale"),v=rs("hueRotate"),x=rs("invert"),g=rs("gap"),j=rs("gradientColorStops"),N=rs("gradientColorStopPositions"),b=rs("inset"),k=rs("margin"),E=rs("opacity"),S=rs("padding"),T=rs("saturate"),P=rs("scale"),H=rs("sepia"),re=rs("skew"),B=rs("space"),Q=rs("translate"),G=()=>["auto","contain","none"],ue=()=>["auto","hidden","clip","visible","scroll"],_=()=>["auto",pt,t],Y=()=>[pt,t],z=()=>["",za,ji],J=()=>["auto",Tl,pt],X=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],$=()=>["solid","dashed","dotted","double","none"],I=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],A=()=>["start","end","center","between","around","evenly","stretch"],W=()=>["","0",pt],Z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],q=()=>[Tl,pt];return{cacheSize:500,separator:":",theme:{colors:[Lc],spacing:[za,ji],blur:["none","",wi,pt],brightness:q(),borderColor:[s],borderRadius:["none","","full",wi,pt],borderSpacing:Y(),borderWidth:z(),contrast:q(),grayscale:W(),hueRotate:q(),invert:W(),gap:Y(),gradientColorStops:[s],gradientColorStopPositions:[WT,ji],inset:_(),margin:_(),opacity:q(),padding:Y(),saturate:q(),scale:q(),sepia:W(),skew:q(),space:Y(),translate:Y()},classGroups:{aspect:[{aspect:["auto","square","video",pt]}],container:["container"],columns:[{columns:[wi]}],"break-after":[{"break-after":Z()}],"break-before":[{"break-before":Z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...X(),pt]}],overflow:[{overflow:ue()}],"overflow-x":[{"overflow-x":ue()}],"overflow-y":[{"overflow-y":ue()}],overscroll:[{overscroll:G()}],"overscroll-x":[{"overscroll-x":G()}],"overscroll-y":[{"overscroll-y":G()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[b]}],"inset-x":[{"inset-x":[b]}],"inset-y":[{"inset-y":[b]}],start:[{start:[b]}],end:[{end:[b]}],top:[{top:[b]}],right:[{right:[b]}],bottom:[{bottom:[b]}],left:[{left:[b]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Oc,pt]}],basis:[{basis:_()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",pt]}],grow:[{grow:W()}],shrink:[{shrink:W()}],order:[{order:["first","last","none",Oc,pt]}],"grid-cols":[{"grid-cols":[Lc]}],"col-start-end":[{col:["auto",{span:["full",Oc,pt]},pt]}],"col-start":[{"col-start":J()}],"col-end":[{"col-end":J()}],"grid-rows":[{"grid-rows":[Lc]}],"row-start-end":[{row:["auto",{span:[Oc,pt]},pt]}],"row-start":[{"row-start":J()}],"row-end":[{"row-end":J()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",pt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",pt]}],gap:[{gap:[g]}],"gap-x":[{"gap-x":[g]}],"gap-y":[{"gap-y":[g]}],"justify-content":[{justify:["normal",...A()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...A(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...A(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[S]}],px:[{px:[S]}],py:[{py:[S]}],ps:[{ps:[S]}],pe:[{pe:[S]}],pt:[{pt:[S]}],pr:[{pr:[S]}],pb:[{pb:[S]}],pl:[{pl:[S]}],m:[{m:[k]}],mx:[{mx:[k]}],my:[{my:[k]}],ms:[{ms:[k]}],me:[{me:[k]}],mt:[{mt:[k]}],mr:[{mr:[k]}],mb:[{mb:[k]}],ml:[{ml:[k]}],"space-x":[{"space-x":[B]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[B]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",pt,t]}],"min-w":[{"min-w":[pt,t,"min","max","fit"]}],"max-w":[{"max-w":[pt,t,"none","full","min","max","fit","prose",{screen:[wi]},wi]}],h:[{h:[pt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[pt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[pt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[pt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",wi,ji]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",dp]}],"font-family":[{font:[Lc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",pt]}],"line-clamp":[{"line-clamp":["none",Tl,dp]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",za,pt]}],"list-image":[{"list-image":["none",pt]}],"list-style-type":[{list:["none","disc","decimal",pt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[s]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[s]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...$(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",za,ji]}],"underline-offset":[{"underline-offset":["auto",za,pt]}],"text-decoration-color":[{decoration:[s]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Y()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",pt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",pt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...X(),QT]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",GT]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},XT]}],"bg-color":[{bg:[s]}],"gradient-from-pos":[{from:[N]}],"gradient-via-pos":[{via:[N]}],"gradient-to-pos":[{to:[N]}],"gradient-from":[{from:[j]}],"gradient-via":[{via:[j]}],"gradient-to":[{to:[j]}],rounded:[{rounded:[l]}],"rounded-s":[{"rounded-s":[l]}],"rounded-e":[{"rounded-e":[l]}],"rounded-t":[{"rounded-t":[l]}],"rounded-r":[{"rounded-r":[l]}],"rounded-b":[{"rounded-b":[l]}],"rounded-l":[{"rounded-l":[l]}],"rounded-ss":[{"rounded-ss":[l]}],"rounded-se":[{"rounded-se":[l]}],"rounded-ee":[{"rounded-ee":[l]}],"rounded-es":[{"rounded-es":[l]}],"rounded-tl":[{"rounded-tl":[l]}],"rounded-tr":[{"rounded-tr":[l]}],"rounded-br":[{"rounded-br":[l]}],"rounded-bl":[{"rounded-bl":[l]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...$(),"hidden"]}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:$()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...$()]}],"outline-offset":[{"outline-offset":[za,pt]}],"outline-w":[{outline:[za,ji]}],"outline-color":[{outline:[s]}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[s]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[za,ji]}],"ring-offset-color":[{"ring-offset":[s]}],shadow:[{shadow:["","inner","none",wi,ZT]}],"shadow-color":[{shadow:[Lc]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...I(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":I()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[h]}],"drop-shadow":[{"drop-shadow":["","none",wi,pt]}],grayscale:[{grayscale:[f]}],"hue-rotate":[{"hue-rotate":[v]}],invert:[{invert:[x]}],saturate:[{saturate:[T]}],sepia:[{sepia:[H]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[h]}],"backdrop-grayscale":[{"backdrop-grayscale":[f]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[v]}],"backdrop-invert":[{"backdrop-invert":[x]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[T]}],"backdrop-sepia":[{"backdrop-sepia":[H]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[d]}],"border-spacing-x":[{"border-spacing-x":[d]}],"border-spacing-y":[{"border-spacing-y":[d]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",pt]}],duration:[{duration:q()}],ease:[{ease:["linear","in","out","in-out",pt]}],delay:[{delay:q()}],animate:[{animate:["none","spin","ping","pulse","bounce",pt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[P]}],"scale-x":[{"scale-x":[P]}],"scale-y":[{"scale-y":[P]}],rotate:[{rotate:[Oc,pt]}],"translate-x":[{"translate-x":[Q]}],"translate-y":[{"translate-y":[Q]}],"skew-x":[{"skew-x":[re]}],"skew-y":[{"skew-y":[re]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",pt]}],accent:[{accent:["auto",s]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",pt]}],"caret-color":[{caret:[s]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Y()}],"scroll-mx":[{"scroll-mx":Y()}],"scroll-my":[{"scroll-my":Y()}],"scroll-ms":[{"scroll-ms":Y()}],"scroll-me":[{"scroll-me":Y()}],"scroll-mt":[{"scroll-mt":Y()}],"scroll-mr":[{"scroll-mr":Y()}],"scroll-mb":[{"scroll-mb":Y()}],"scroll-ml":[{"scroll-ml":Y()}],"scroll-p":[{"scroll-p":Y()}],"scroll-px":[{"scroll-px":Y()}],"scroll-py":[{"scroll-py":Y()}],"scroll-ps":[{"scroll-ps":Y()}],"scroll-pe":[{"scroll-pe":Y()}],"scroll-pt":[{"scroll-pt":Y()}],"scroll-pr":[{"scroll-pr":Y()}],"scroll-pb":[{"scroll-pb":Y()}],"scroll-pl":[{"scroll-pl":Y()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",pt]}],fill:[{fill:[s,"none"]}],"stroke-w":[{stroke:[za,ji,dp]}],stroke:[{stroke:[s,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},nA=$T(sA);function ze(...s){return nA(Rw(s))}const rA=qE,Zw=p.forwardRef(({className:s,...t},n)=>e.jsx(kw,{ref:n,className:ze("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...t}));Zw.displayName=kw.displayName;const aA=Vl("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Jw=p.forwardRef(({className:s,variant:t,...n},r)=>e.jsx(Cw,{ref:r,className:ze(aA({variant:t}),s),...n}));Jw.displayName=Cw.displayName;const iA=p.forwardRef(({className:s,...t},n)=>e.jsx(Tw,{ref:n,className:ze("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...t}));iA.displayName=Tw.displayName;const eN=p.forwardRef(({className:s,...t},n)=>e.jsx(Aw,{ref:n,className:ze("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...t,children:e.jsx(zn,{className:"h-4 w-4"})}));eN.displayName=Aw.displayName;const tN=p.forwardRef(({className:s,...t},n)=>e.jsx(Sw,{ref:n,className:ze("text-sm font-semibold",s),...t}));tN.displayName=Sw.displayName;const sN=p.forwardRef(({className:s,...t},n)=>e.jsx(Ew,{ref:n,className:ze("text-sm opacity-90",s),...t}));sN.displayName=Ew.displayName;function oA(){const{toasts:s}=mt();return e.jsxs(rA,{children:[s.map(function({id:t,title:n,description:r,action:o,...l}){return e.jsxs(Jw,{...l,children:[e.jsxs("div",{className:"grid gap-1",children:[n&&e.jsx(tN,{children:n}),r&&e.jsx(sN,{children:r})]}),o,e.jsx(eN,{})]},t)}),e.jsx(Zw,{})]})}var lA=Qx[" useId ".trim().toString()]||(()=>{}),cA=0;function Kr(s){const[t,n]=p.useState(lA());return zs(()=>{n(r=>r??String(cA++))},[s]),t?`radix-${t}`:""}const dA=["top","right","bottom","left"],Oi=Math.min,Zn=Math.max,vm=Math.round,Ru=Math.floor,xa=s=>({x:s,y:s}),uA={left:"right",right:"left",bottom:"top",top:"bottom"},mA={start:"end",end:"start"};function ux(s,t,n){return Zn(s,Oi(t,n))}function Va(s,t){return typeof s=="function"?s(t):s}function Ga(s){return s.split("-")[0]}function Yl(s){return s.split("-")[1]}function wg(s){return s==="x"?"y":"x"}function Ng(s){return s==="y"?"height":"width"}function Li(s){return["top","bottom"].includes(Ga(s))?"y":"x"}function kg(s){return wg(Li(s))}function hA(s,t,n){n===void 0&&(n=!1);const r=Yl(s),o=kg(s),l=Ng(o);let d=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[l]>t.floating[l]&&(d=ym(d)),[d,ym(d)]}function fA(s){const t=ym(s);return[mx(s),t,mx(t)]}function mx(s){return s.replace(/start|end/g,t=>mA[t])}function pA(s,t,n){const r=["left","right"],o=["right","left"],l=["top","bottom"],d=["bottom","top"];switch(s){case"top":case"bottom":return n?t?o:r:t?r:o;case"left":case"right":return t?l:d;default:return[]}}function xA(s,t,n,r){const o=Yl(s);let l=pA(Ga(s),n==="start",r);return o&&(l=l.map(d=>d+"-"+o),t&&(l=l.concat(l.map(mx)))),l}function ym(s){return s.replace(/left|right|bottom|top/g,t=>uA[t])}function gA(s){return{top:0,right:0,bottom:0,left:0,...s}}function nN(s){return typeof s!="number"?gA(s):{top:s,right:s,bottom:s,left:s}}function bm(s){const{x:t,y:n,width:r,height:o}=s;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}function Pb(s,t,n){let{reference:r,floating:o}=s;const l=Li(t),d=kg(t),u=Ng(d),h=Ga(t),f=l==="y",v=r.x+r.width/2-o.width/2,x=r.y+r.height/2-o.height/2,g=r[u]/2-o[u]/2;let j;switch(h){case"top":j={x:v,y:r.y-o.height};break;case"bottom":j={x:v,y:r.y+r.height};break;case"right":j={x:r.x+r.width,y:x};break;case"left":j={x:r.x-o.width,y:x};break;default:j={x:r.x,y:r.y}}switch(Yl(t)){case"start":j[d]-=g*(n&&f?-1:1);break;case"end":j[d]+=g*(n&&f?-1:1);break}return j}const vA=async(s,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:l=[],platform:d}=n,u=l.filter(Boolean),h=await(d.isRTL==null?void 0:d.isRTL(t));let f=await d.getElementRects({reference:s,floating:t,strategy:o}),{x:v,y:x}=Pb(f,r,h),g=r,j={},N=0;for(let b=0;b<u.length;b++){const{name:k,fn:E}=u[b],{x:S,y:T,data:P,reset:H}=await E({x:v,y:x,initialPlacement:r,placement:g,strategy:o,middlewareData:j,rects:f,platform:d,elements:{reference:s,floating:t}});v=S??v,x=T??x,j={...j,[k]:{...j[k],...P}},H&&N<=50&&(N++,typeof H=="object"&&(H.placement&&(g=H.placement),H.rects&&(f=H.rects===!0?await d.getElementRects({reference:s,floating:t,strategy:o}):H.rects),{x:v,y:x}=Pb(f,g,h)),b=-1)}return{x:v,y:x,placement:g,strategy:o,middlewareData:j}};async function cd(s,t){var n;t===void 0&&(t={});const{x:r,y:o,platform:l,rects:d,elements:u,strategy:h}=s,{boundary:f="clippingAncestors",rootBoundary:v="viewport",elementContext:x="floating",altBoundary:g=!1,padding:j=0}=Va(t,s),N=nN(j),k=u[g?x==="floating"?"reference":"floating":x],E=bm(await l.getClippingRect({element:(n=await(l.isElement==null?void 0:l.isElement(k)))==null||n?k:k.contextElement||await(l.getDocumentElement==null?void 0:l.getDocumentElement(u.floating)),boundary:f,rootBoundary:v,strategy:h})),S=x==="floating"?{x:r,y:o,width:d.floating.width,height:d.floating.height}:d.reference,T=await(l.getOffsetParent==null?void 0:l.getOffsetParent(u.floating)),P=await(l.isElement==null?void 0:l.isElement(T))?await(l.getScale==null?void 0:l.getScale(T))||{x:1,y:1}:{x:1,y:1},H=bm(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:S,offsetParent:T,strategy:h}):S);return{top:(E.top-H.top+N.top)/P.y,bottom:(H.bottom-E.bottom+N.bottom)/P.y,left:(E.left-H.left+N.left)/P.x,right:(H.right-E.right+N.right)/P.x}}const yA=s=>({name:"arrow",options:s,async fn(t){const{x:n,y:r,placement:o,rects:l,platform:d,elements:u,middlewareData:h}=t,{element:f,padding:v=0}=Va(s,t)||{};if(f==null)return{};const x=nN(v),g={x:n,y:r},j=kg(o),N=Ng(j),b=await d.getDimensions(f),k=j==="y",E=k?"top":"left",S=k?"bottom":"right",T=k?"clientHeight":"clientWidth",P=l.reference[N]+l.reference[j]-g[j]-l.floating[N],H=g[j]-l.reference[j],re=await(d.getOffsetParent==null?void 0:d.getOffsetParent(f));let B=re?re[T]:0;(!B||!await(d.isElement==null?void 0:d.isElement(re)))&&(B=u.floating[T]||l.floating[N]);const Q=P/2-H/2,G=B/2-b[N]/2-1,ue=Oi(x[E],G),_=Oi(x[S],G),Y=ue,z=B-b[N]-_,J=B/2-b[N]/2+Q,X=ux(Y,J,z),$=!h.arrow&&Yl(o)!=null&&J!==X&&l.reference[N]/2-(J<Y?ue:_)-b[N]/2<0,I=$?J<Y?J-Y:J-z:0;return{[j]:g[j]+I,data:{[j]:X,centerOffset:J-X-I,...$&&{alignmentOffset:I}},reset:$}}}),bA=function(s){return s===void 0&&(s={}),{name:"flip",options:s,async fn(t){var n,r;const{placement:o,middlewareData:l,rects:d,initialPlacement:u,platform:h,elements:f}=t,{mainAxis:v=!0,crossAxis:x=!0,fallbackPlacements:g,fallbackStrategy:j="bestFit",fallbackAxisSideDirection:N="none",flipAlignment:b=!0,...k}=Va(s,t);if((n=l.arrow)!=null&&n.alignmentOffset)return{};const E=Ga(o),S=Li(u),T=Ga(u)===u,P=await(h.isRTL==null?void 0:h.isRTL(f.floating)),H=g||(T||!b?[ym(u)]:fA(u)),re=N!=="none";!g&&re&&H.push(...xA(u,b,N,P));const B=[u,...H],Q=await cd(t,k),G=[];let ue=((r=l.flip)==null?void 0:r.overflows)||[];if(v&&G.push(Q[E]),x){const J=hA(o,d,P);G.push(Q[J[0]],Q[J[1]])}if(ue=[...ue,{placement:o,overflows:G}],!G.every(J=>J<=0)){var _,Y;const J=(((_=l.flip)==null?void 0:_.index)||0)+1,X=B[J];if(X)return{data:{index:J,overflows:ue},reset:{placement:X}};let $=(Y=ue.filter(I=>I.overflows[0]<=0).sort((I,A)=>I.overflows[1]-A.overflows[1])[0])==null?void 0:Y.placement;if(!$)switch(j){case"bestFit":{var z;const I=(z=ue.filter(A=>{if(re){const W=Li(A.placement);return W===S||W==="y"}return!0}).map(A=>[A.placement,A.overflows.filter(W=>W>0).reduce((W,Z)=>W+Z,0)]).sort((A,W)=>A[1]-W[1])[0])==null?void 0:z[0];I&&($=I);break}case"initialPlacement":$=u;break}if(o!==$)return{reset:{placement:$}}}return{}}}};function Rb(s,t){return{top:s.top-t.height,right:s.right-t.width,bottom:s.bottom-t.height,left:s.left-t.width}}function _b(s){return dA.some(t=>s[t]>=0)}const jA=function(s){return s===void 0&&(s={}),{name:"hide",options:s,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...o}=Va(s,t);switch(r){case"referenceHidden":{const l=await cd(t,{...o,elementContext:"reference"}),d=Rb(l,n.reference);return{data:{referenceHiddenOffsets:d,referenceHidden:_b(d)}}}case"escaped":{const l=await cd(t,{...o,altBoundary:!0}),d=Rb(l,n.floating);return{data:{escapedOffsets:d,escaped:_b(d)}}}default:return{}}}}};async function wA(s,t){const{placement:n,platform:r,elements:o}=s,l=await(r.isRTL==null?void 0:r.isRTL(o.floating)),d=Ga(n),u=Yl(n),h=Li(n)==="y",f=["left","top"].includes(d)?-1:1,v=l&&h?-1:1,x=Va(t,s);let{mainAxis:g,crossAxis:j,alignmentAxis:N}=typeof x=="number"?{mainAxis:x,crossAxis:0,alignmentAxis:null}:{mainAxis:x.mainAxis||0,crossAxis:x.crossAxis||0,alignmentAxis:x.alignmentAxis};return u&&typeof N=="number"&&(j=u==="end"?N*-1:N),h?{x:j*v,y:g*f}:{x:g*f,y:j*v}}const NA=function(s){return s===void 0&&(s=0),{name:"offset",options:s,async fn(t){var n,r;const{x:o,y:l,placement:d,middlewareData:u}=t,h=await wA(t,s);return d===((n=u.offset)==null?void 0:n.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:o+h.x,y:l+h.y,data:{...h,placement:d}}}}},kA=function(s){return s===void 0&&(s={}),{name:"shift",options:s,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:l=!0,crossAxis:d=!1,limiter:u={fn:k=>{let{x:E,y:S}=k;return{x:E,y:S}}},...h}=Va(s,t),f={x:n,y:r},v=await cd(t,h),x=Li(Ga(o)),g=wg(x);let j=f[g],N=f[x];if(l){const k=g==="y"?"top":"left",E=g==="y"?"bottom":"right",S=j+v[k],T=j-v[E];j=ux(S,j,T)}if(d){const k=x==="y"?"top":"left",E=x==="y"?"bottom":"right",S=N+v[k],T=N-v[E];N=ux(S,N,T)}const b=u.fn({...t,[g]:j,[x]:N});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[g]:l,[x]:d}}}}}},CA=function(s){return s===void 0&&(s={}),{options:s,fn(t){const{x:n,y:r,placement:o,rects:l,middlewareData:d}=t,{offset:u=0,mainAxis:h=!0,crossAxis:f=!0}=Va(s,t),v={x:n,y:r},x=Li(o),g=wg(x);let j=v[g],N=v[x];const b=Va(u,t),k=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(h){const T=g==="y"?"height":"width",P=l.reference[g]-l.floating[T]+k.mainAxis,H=l.reference[g]+l.reference[T]-k.mainAxis;j<P?j=P:j>H&&(j=H)}if(f){var E,S;const T=g==="y"?"width":"height",P=["top","left"].includes(Ga(o)),H=l.reference[x]-l.floating[T]+(P&&((E=d.offset)==null?void 0:E[x])||0)+(P?0:k.crossAxis),re=l.reference[x]+l.reference[T]+(P?0:((S=d.offset)==null?void 0:S[x])||0)-(P?k.crossAxis:0);N<H?N=H:N>re&&(N=re)}return{[g]:j,[x]:N}}}},SA=function(s){return s===void 0&&(s={}),{name:"size",options:s,async fn(t){var n,r;const{placement:o,rects:l,platform:d,elements:u}=t,{apply:h=()=>{},...f}=Va(s,t),v=await cd(t,f),x=Ga(o),g=Yl(o),j=Li(o)==="y",{width:N,height:b}=l.floating;let k,E;x==="top"||x==="bottom"?(k=x,E=g===(await(d.isRTL==null?void 0:d.isRTL(u.floating))?"start":"end")?"left":"right"):(E=x,k=g==="end"?"top":"bottom");const S=b-v.top-v.bottom,T=N-v.left-v.right,P=Oi(b-v[k],S),H=Oi(N-v[E],T),re=!t.middlewareData.shift;let B=P,Q=H;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(Q=T),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(B=S),re&&!g){const ue=Zn(v.left,0),_=Zn(v.right,0),Y=Zn(v.top,0),z=Zn(v.bottom,0);j?Q=N-2*(ue!==0||_!==0?ue+_:Zn(v.left,v.right)):B=b-2*(Y!==0||z!==0?Y+z:Zn(v.top,v.bottom))}await h({...t,availableWidth:Q,availableHeight:B});const G=await d.getDimensions(u.floating);return N!==G.width||b!==G.height?{reset:{rects:!0}}:{}}}};function Qm(){return typeof window<"u"}function Xl(s){return rN(s)?(s.nodeName||"").toLowerCase():"#document"}function nr(s){var t;return(s==null||(t=s.ownerDocument)==null?void 0:t.defaultView)||window}function Na(s){var t;return(t=(rN(s)?s.ownerDocument:s.document)||window.document)==null?void 0:t.documentElement}function rN(s){return Qm()?s instanceof Node||s instanceof nr(s).Node:!1}function Gr(s){return Qm()?s instanceof Element||s instanceof nr(s).Element:!1}function ba(s){return Qm()?s instanceof HTMLElement||s instanceof nr(s).HTMLElement:!1}function Ib(s){return!Qm()||typeof ShadowRoot>"u"?!1:s instanceof ShadowRoot||s instanceof nr(s).ShadowRoot}function kd(s){const{overflow:t,overflowX:n,overflowY:r,display:o}=Qr(s);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(o)}function EA(s){return["table","td","th"].includes(Xl(s))}function Ym(s){return[":popover-open",":modal"].some(t=>{try{return s.matches(t)}catch{return!1}})}function Cg(s){const t=Sg(),n=Gr(s)?Qr(s):s;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function TA(s){let t=Mi(s);for(;ba(t)&&!ql(t);){if(Cg(t))return t;if(Ym(t))return null;t=Mi(t)}return null}function Sg(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ql(s){return["html","body","#document"].includes(Xl(s))}function Qr(s){return nr(s).getComputedStyle(s)}function Xm(s){return Gr(s)?{scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}:{scrollLeft:s.scrollX,scrollTop:s.scrollY}}function Mi(s){if(Xl(s)==="html")return s;const t=s.assignedSlot||s.parentNode||Ib(s)&&s.host||Na(s);return Ib(t)?t.host:t}function aN(s){const t=Mi(s);return ql(t)?s.ownerDocument?s.ownerDocument.body:s.body:ba(t)&&kd(t)?t:aN(t)}function dd(s,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=aN(s),l=o===((r=s.ownerDocument)==null?void 0:r.body),d=nr(o);if(l){const u=hx(d);return t.concat(d,d.visualViewport||[],kd(o)?o:[],u&&n?dd(u):[])}return t.concat(o,dd(o,[],n))}function hx(s){return s.parent&&Object.getPrototypeOf(s.parent)?s.frameElement:null}function iN(s){const t=Qr(s);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=ba(s),l=o?s.offsetWidth:n,d=o?s.offsetHeight:r,u=vm(n)!==l||vm(r)!==d;return u&&(n=l,r=d),{width:n,height:r,$:u}}function Eg(s){return Gr(s)?s:s.contextElement}function Al(s){const t=Eg(s);if(!ba(t))return xa(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:l}=iN(t);let d=(l?vm(n.width):n.width)/r,u=(l?vm(n.height):n.height)/o;return(!d||!Number.isFinite(d))&&(d=1),(!u||!Number.isFinite(u))&&(u=1),{x:d,y:u}}const AA=xa(0);function oN(s){const t=nr(s);return!Sg()||!t.visualViewport?AA:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function PA(s,t,n){return t===void 0&&(t=!1),!n||t&&n!==nr(s)?!1:t}function No(s,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=s.getBoundingClientRect(),l=Eg(s);let d=xa(1);t&&(r?Gr(r)&&(d=Al(r)):d=Al(s));const u=PA(l,n,r)?oN(l):xa(0);let h=(o.left+u.x)/d.x,f=(o.top+u.y)/d.y,v=o.width/d.x,x=o.height/d.y;if(l){const g=nr(l),j=r&&Gr(r)?nr(r):r;let N=g,b=hx(N);for(;b&&r&&j!==N;){const k=Al(b),E=b.getBoundingClientRect(),S=Qr(b),T=E.left+(b.clientLeft+parseFloat(S.paddingLeft))*k.x,P=E.top+(b.clientTop+parseFloat(S.paddingTop))*k.y;h*=k.x,f*=k.y,v*=k.x,x*=k.y,h+=T,f+=P,N=nr(b),b=hx(N)}}return bm({width:v,height:x,x:h,y:f})}function Tg(s,t){const n=Xm(s).scrollLeft;return t?t.left+n:No(Na(s)).left+n}function lN(s,t,n){n===void 0&&(n=!1);const r=s.getBoundingClientRect(),o=r.left+t.scrollLeft-(n?0:Tg(s,r)),l=r.top+t.scrollTop;return{x:o,y:l}}function RA(s){let{elements:t,rect:n,offsetParent:r,strategy:o}=s;const l=o==="fixed",d=Na(r),u=t?Ym(t.floating):!1;if(r===d||u&&l)return n;let h={scrollLeft:0,scrollTop:0},f=xa(1);const v=xa(0),x=ba(r);if((x||!x&&!l)&&((Xl(r)!=="body"||kd(d))&&(h=Xm(r)),ba(r))){const j=No(r);f=Al(r),v.x=j.x+r.clientLeft,v.y=j.y+r.clientTop}const g=d&&!x&&!l?lN(d,h,!0):xa(0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-h.scrollLeft*f.x+v.x+g.x,y:n.y*f.y-h.scrollTop*f.y+v.y+g.y}}function _A(s){return Array.from(s.getClientRects())}function IA(s){const t=Na(s),n=Xm(s),r=s.ownerDocument.body,o=Zn(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),l=Zn(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let d=-n.scrollLeft+Tg(s);const u=-n.scrollTop;return Qr(r).direction==="rtl"&&(d+=Zn(t.clientWidth,r.clientWidth)-o),{width:o,height:l,x:d,y:u}}function OA(s,t){const n=nr(s),r=Na(s),o=n.visualViewport;let l=r.clientWidth,d=r.clientHeight,u=0,h=0;if(o){l=o.width,d=o.height;const f=Sg();(!f||f&&t==="fixed")&&(u=o.offsetLeft,h=o.offsetTop)}return{width:l,height:d,x:u,y:h}}function LA(s,t){const n=No(s,!0,t==="fixed"),r=n.top+s.clientTop,o=n.left+s.clientLeft,l=ba(s)?Al(s):xa(1),d=s.clientWidth*l.x,u=s.clientHeight*l.y,h=o*l.x,f=r*l.y;return{width:d,height:u,x:h,y:f}}function Ob(s,t,n){let r;if(t==="viewport")r=OA(s,n);else if(t==="document")r=IA(Na(s));else if(Gr(t))r=LA(t,n);else{const o=oN(s);r={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return bm(r)}function cN(s,t){const n=Mi(s);return n===t||!Gr(n)||ql(n)?!1:Qr(n).position==="fixed"||cN(n,t)}function MA(s,t){const n=t.get(s);if(n)return n;let r=dd(s,[],!1).filter(u=>Gr(u)&&Xl(u)!=="body"),o=null;const l=Qr(s).position==="fixed";let d=l?Mi(s):s;for(;Gr(d)&&!ql(d);){const u=Qr(d),h=Cg(d);!h&&u.position==="fixed"&&(o=null),(l?!h&&!o:!h&&u.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||kd(d)&&!h&&cN(s,d))?r=r.filter(v=>v!==d):o=u,d=Mi(d)}return t.set(s,r),r}function DA(s){let{element:t,boundary:n,rootBoundary:r,strategy:o}=s;const d=[...n==="clippingAncestors"?Ym(t)?[]:MA(t,this._c):[].concat(n),r],u=d[0],h=d.reduce((f,v)=>{const x=Ob(t,v,o);return f.top=Zn(x.top,f.top),f.right=Oi(x.right,f.right),f.bottom=Oi(x.bottom,f.bottom),f.left=Zn(x.left,f.left),f},Ob(t,u,o));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function $A(s){const{width:t,height:n}=iN(s);return{width:t,height:n}}function qA(s,t,n){const r=ba(t),o=Na(t),l=n==="fixed",d=No(s,!0,l,t);let u={scrollLeft:0,scrollTop:0};const h=xa(0);if(r||!r&&!l)if((Xl(t)!=="body"||kd(o))&&(u=Xm(t)),r){const g=No(t,!0,l,t);h.x=g.x+t.clientLeft,h.y=g.y+t.clientTop}else o&&(h.x=Tg(o));const f=o&&!r&&!l?lN(o,u):xa(0),v=d.left+u.scrollLeft-h.x-f.x,x=d.top+u.scrollTop-h.y-f.y;return{x:v,y:x,width:d.width,height:d.height}}function up(s){return Qr(s).position==="static"}function Lb(s,t){if(!ba(s)||Qr(s).position==="fixed")return null;if(t)return t(s);let n=s.offsetParent;return Na(s)===n&&(n=n.ownerDocument.body),n}function dN(s,t){const n=nr(s);if(Ym(s))return n;if(!ba(s)){let o=Mi(s);for(;o&&!ql(o);){if(Gr(o)&&!up(o))return o;o=Mi(o)}return n}let r=Lb(s,t);for(;r&&EA(r)&&up(r);)r=Lb(r,t);return r&&ql(r)&&up(r)&&!Cg(r)?n:r||TA(s)||n}const FA=async function(s){const t=this.getOffsetParent||dN,n=this.getDimensions,r=await n(s.floating);return{reference:qA(s.reference,await t(s.floating),s.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function zA(s){return Qr(s).direction==="rtl"}const UA={convertOffsetParentRelativeRectToViewportRelativeRect:RA,getDocumentElement:Na,getClippingRect:DA,getOffsetParent:dN,getElementRects:FA,getClientRects:_A,getDimensions:$A,getScale:Al,isElement:Gr,isRTL:zA};function uN(s,t){return s.x===t.x&&s.y===t.y&&s.width===t.width&&s.height===t.height}function BA(s,t){let n=null,r;const o=Na(s);function l(){var u;clearTimeout(r),(u=n)==null||u.disconnect(),n=null}function d(u,h){u===void 0&&(u=!1),h===void 0&&(h=1),l();const f=s.getBoundingClientRect(),{left:v,top:x,width:g,height:j}=f;if(u||t(),!g||!j)return;const N=Ru(x),b=Ru(o.clientWidth-(v+g)),k=Ru(o.clientHeight-(x+j)),E=Ru(v),T={rootMargin:-N+"px "+-b+"px "+-k+"px "+-E+"px",threshold:Zn(0,Oi(1,h))||1};let P=!0;function H(re){const B=re[0].intersectionRatio;if(B!==h){if(!P)return d();B?d(!1,B):r=setTimeout(()=>{d(!1,1e-7)},1e3)}B===1&&!uN(f,s.getBoundingClientRect())&&d(),P=!1}try{n=new IntersectionObserver(H,{...T,root:o.ownerDocument})}catch{n=new IntersectionObserver(H,T)}n.observe(s)}return d(!0),l}function HA(s,t,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:l=!0,elementResize:d=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:h=!1}=r,f=Eg(s),v=o||l?[...f?dd(f):[],...dd(t)]:[];v.forEach(E=>{o&&E.addEventListener("scroll",n,{passive:!0}),l&&E.addEventListener("resize",n)});const x=f&&u?BA(f,n):null;let g=-1,j=null;d&&(j=new ResizeObserver(E=>{let[S]=E;S&&S.target===f&&j&&(j.unobserve(t),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var T;(T=j)==null||T.observe(t)})),n()}),f&&!h&&j.observe(f),j.observe(t));let N,b=h?No(s):null;h&&k();function k(){const E=No(s);b&&!uN(b,E)&&n(),b=E,N=requestAnimationFrame(k)}return n(),()=>{var E;v.forEach(S=>{o&&S.removeEventListener("scroll",n),l&&S.removeEventListener("resize",n)}),x?.(),(E=j)==null||E.disconnect(),j=null,h&&cancelAnimationFrame(N)}}const KA=NA,WA=kA,VA=bA,GA=SA,QA=jA,Mb=yA,YA=CA,XA=(s,t,n)=>{const r=new Map,o={platform:UA,...n},l={...o.platform,_c:r};return vA(s,t,{...o,platform:l})};var tm=typeof document<"u"?p.useLayoutEffect:p.useEffect;function jm(s,t){if(s===t)return!0;if(typeof s!=typeof t)return!1;if(typeof s=="function"&&s.toString()===t.toString())return!0;let n,r,o;if(s&&t&&typeof s=="object"){if(Array.isArray(s)){if(n=s.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!jm(s[r],t[r]))return!1;return!0}if(o=Object.keys(s),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;r--!==0;){const l=o[r];if(!(l==="_owner"&&s.$$typeof)&&!jm(s[l],t[l]))return!1}return!0}return s!==s&&t!==t}function mN(s){return typeof window>"u"?1:(s.ownerDocument.defaultView||window).devicePixelRatio||1}function Db(s,t){const n=mN(s);return Math.round(t*n)/n}function mp(s){const t=p.useRef(s);return tm(()=>{t.current=s}),t}function ZA(s){s===void 0&&(s={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:l,floating:d}={},transform:u=!0,whileElementsMounted:h,open:f}=s,[v,x]=p.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[g,j]=p.useState(r);jm(g,r)||j(r);const[N,b]=p.useState(null),[k,E]=p.useState(null),S=p.useCallback(A=>{A!==re.current&&(re.current=A,b(A))},[]),T=p.useCallback(A=>{A!==B.current&&(B.current=A,E(A))},[]),P=l||N,H=d||k,re=p.useRef(null),B=p.useRef(null),Q=p.useRef(v),G=h!=null,ue=mp(h),_=mp(o),Y=mp(f),z=p.useCallback(()=>{if(!re.current||!B.current)return;const A={placement:t,strategy:n,middleware:g};_.current&&(A.platform=_.current),XA(re.current,B.current,A).then(W=>{const Z={...W,isPositioned:Y.current!==!1};J.current&&!jm(Q.current,Z)&&(Q.current=Z,Kl.flushSync(()=>{x(Z)}))})},[g,t,n,_,Y]);tm(()=>{f===!1&&Q.current.isPositioned&&(Q.current.isPositioned=!1,x(A=>({...A,isPositioned:!1})))},[f]);const J=p.useRef(!1);tm(()=>(J.current=!0,()=>{J.current=!1}),[]),tm(()=>{if(P&&(re.current=P),H&&(B.current=H),P&&H){if(ue.current)return ue.current(P,H,z);z()}},[P,H,z,ue,G]);const X=p.useMemo(()=>({reference:re,floating:B,setReference:S,setFloating:T}),[S,T]),$=p.useMemo(()=>({reference:P,floating:H}),[P,H]),I=p.useMemo(()=>{const A={position:n,left:0,top:0};if(!$.floating)return A;const W=Db($.floating,v.x),Z=Db($.floating,v.y);return u?{...A,transform:"translate("+W+"px, "+Z+"px)",...mN($.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:W,top:Z}},[n,u,$.floating,v.x,v.y]);return p.useMemo(()=>({...v,update:z,refs:X,elements:$,floatingStyles:I}),[v,z,X,$,I])}const JA=s=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:s,fn(n){const{element:r,padding:o}=typeof s=="function"?s(n):s;return r&&t(r)?r.current!=null?Mb({element:r.current,padding:o}).fn(n):{}:r?Mb({element:r,padding:o}).fn(n):{}}}},eP=(s,t)=>({...KA(s),options:[s,t]}),tP=(s,t)=>({...WA(s),options:[s,t]}),sP=(s,t)=>({...YA(s),options:[s,t]}),nP=(s,t)=>({...VA(s),options:[s,t]}),rP=(s,t)=>({...GA(s),options:[s,t]}),aP=(s,t)=>({...QA(s),options:[s,t]}),iP=(s,t)=>({...JA(s),options:[s,t]});var oP="Arrow",hN=p.forwardRef((s,t)=>{const{children:n,width:r=10,height:o=5,...l}=s;return e.jsx(lt.svg,{...l,ref:t,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:s.asChild?n:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});hN.displayName=oP;var lP=hN;function fN(s){const[t,n]=p.useState(void 0);return zs(()=>{if(s){n({width:s.offsetWidth,height:s.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const l=o[0];let d,u;if("borderBoxSize"in l){const h=l.borderBoxSize,f=Array.isArray(h)?h[0]:h;d=f.inlineSize,u=f.blockSize}else d=s.offsetWidth,u=s.offsetHeight;n({width:d,height:u})});return r.observe(s,{box:"border-box"}),()=>r.unobserve(s)}else n(void 0)},[s]),t}var Ag="Popper",[pN,Zl]=Jr(Ag),[cP,xN]=pN(Ag),gN=s=>{const{__scopePopper:t,children:n}=s,[r,o]=p.useState(null);return e.jsx(cP,{scope:t,anchor:r,onAnchorChange:o,children:n})};gN.displayName=Ag;var vN="PopperAnchor",yN=p.forwardRef((s,t)=>{const{__scopePopper:n,virtualRef:r,...o}=s,l=xN(vN,n),d=p.useRef(null),u=qt(t,d);return p.useEffect(()=>{l.onAnchorChange(r?.current||d.current)}),r?null:e.jsx(lt.div,{...o,ref:u})});yN.displayName=vN;var Pg="PopperContent",[dP,uP]=pN(Pg),bN=p.forwardRef((s,t)=>{const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:l="center",alignOffset:d=0,arrowPadding:u=0,avoidCollisions:h=!0,collisionBoundary:f=[],collisionPadding:v=0,sticky:x="partial",hideWhenDetached:g=!1,updatePositionStrategy:j="optimized",onPlaced:N,...b}=s,k=xN(Pg,n),[E,S]=p.useState(null),T=qt(t,ie=>S(ie)),[P,H]=p.useState(null),re=fN(P),B=re?.width??0,Q=re?.height??0,G=r+(l!=="center"?"-"+l:""),ue=typeof v=="number"?v:{top:0,right:0,bottom:0,left:0,...v},_=Array.isArray(f)?f:[f],Y=_.length>0,z={padding:ue,boundary:_.filter(hP),altBoundary:Y},{refs:J,floatingStyles:X,placement:$,isPositioned:I,middlewareData:A}=ZA({strategy:"fixed",placement:G,whileElementsMounted:(...ie)=>HA(...ie,{animationFrame:j==="always"}),elements:{reference:k.anchor},middleware:[eP({mainAxis:o+Q,alignmentAxis:d}),h&&tP({mainAxis:!0,crossAxis:!1,limiter:x==="partial"?sP():void 0,...z}),h&&nP({...z}),rP({...z,apply:({elements:ie,rects:fe,availableWidth:Ee,availableHeight:Ne})=>{const{width:Pe,height:$e}=fe.reference,Ue=ie.floating.style;Ue.setProperty("--radix-popper-available-width",`${Ee}px`),Ue.setProperty("--radix-popper-available-height",`${Ne}px`),Ue.setProperty("--radix-popper-anchor-width",`${Pe}px`),Ue.setProperty("--radix-popper-anchor-height",`${$e}px`)}}),P&&iP({element:P,padding:u}),fP({arrowWidth:B,arrowHeight:Q}),g&&aP({strategy:"referenceHidden",...z})]}),[W,Z]=NN($),q=an(N);zs(()=>{I&&q?.()},[I,q]);const ne=A.arrow?.x,K=A.arrow?.y,U=A.arrow?.centerOffset!==0,[M,F]=p.useState();return zs(()=>{E&&F(window.getComputedStyle(E).zIndex)},[E]),e.jsx("div",{ref:J.setFloating,"data-radix-popper-content-wrapper":"",style:{...X,transform:I?X.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:M,"--radix-popper-transform-origin":[A.transformOrigin?.x,A.transformOrigin?.y].join(" "),...A.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:s.dir,children:e.jsx(dP,{scope:n,placedSide:W,onArrowChange:H,arrowX:ne,arrowY:K,shouldHideArrow:U,children:e.jsx(lt.div,{"data-side":W,"data-align":Z,...b,ref:T,style:{...b.style,animation:I?void 0:"none"}})})})});bN.displayName=Pg;var jN="PopperArrow",mP={top:"bottom",right:"left",bottom:"top",left:"right"},wN=p.forwardRef(function(t,n){const{__scopePopper:r,...o}=t,l=uP(jN,r),d=mP[l.placedSide];return e.jsx("span",{ref:l.onArrowChange,style:{position:"absolute",left:l.arrowX,top:l.arrowY,[d]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[l.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[l.placedSide],visibility:l.shouldHideArrow?"hidden":void 0},children:e.jsx(lP,{...o,ref:n,style:{...o.style,display:"block"}})})});wN.displayName=jN;function hP(s){return s!==null}var fP=s=>({name:"transformOrigin",options:s,fn(t){const{placement:n,rects:r,middlewareData:o}=t,d=o.arrow?.centerOffset!==0,u=d?0:s.arrowWidth,h=d?0:s.arrowHeight,[f,v]=NN(n),x={start:"0%",center:"50%",end:"100%"}[v],g=(o.arrow?.x??0)+u/2,j=(o.arrow?.y??0)+h/2;let N="",b="";return f==="bottom"?(N=d?x:`${g}px`,b=`${-h}px`):f==="top"?(N=d?x:`${g}px`,b=`${r.floating.height+h}px`):f==="right"?(N=`${-h}px`,b=d?x:`${j}px`):f==="left"&&(N=`${r.floating.width+h}px`,b=d?x:`${j}px`),{data:{x:N,y:b}}}});function NN(s){const[t,n="center"]=s.split("-");return[t,n]}var Rg=gN,_g=yN,Ig=bN,Og=wN,[Zm]=Jr("Tooltip",[Zl]),Jm=Zl(),kN="TooltipProvider",pP=700,fx="tooltip.open",[xP,Lg]=Zm(kN),CN=s=>{const{__scopeTooltip:t,delayDuration:n=pP,skipDelayDuration:r=300,disableHoverableContent:o=!1,children:l}=s,d=p.useRef(!0),u=p.useRef(!1),h=p.useRef(0);return p.useEffect(()=>{const f=h.current;return()=>window.clearTimeout(f)},[]),e.jsx(xP,{scope:t,isOpenDelayedRef:d,delayDuration:n,onOpen:p.useCallback(()=>{window.clearTimeout(h.current),d.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>d.current=!0,r)},[r]),isPointerInTransitRef:u,onPointerInTransitChange:p.useCallback(f=>{u.current=f},[]),disableHoverableContent:o,children:l})};CN.displayName=kN;var eh="Tooltip",[gP,th]=Zm(eh),SN=s=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:o=!1,onOpenChange:l,disableHoverableContent:d,delayDuration:u}=s,h=Lg(eh,s.__scopeTooltip),f=Jm(t),[v,x]=p.useState(null),g=Kr(),j=p.useRef(0),N=d??h.disableHoverableContent,b=u??h.delayDuration,k=p.useRef(!1),[E=!1,S]=Ka({prop:r,defaultProp:o,onChange:B=>{B?(h.onOpen(),document.dispatchEvent(new CustomEvent(fx))):h.onClose(),l?.(B)}}),T=p.useMemo(()=>E?k.current?"delayed-open":"instant-open":"closed",[E]),P=p.useCallback(()=>{window.clearTimeout(j.current),j.current=0,k.current=!1,S(!0)},[S]),H=p.useCallback(()=>{window.clearTimeout(j.current),j.current=0,S(!1)},[S]),re=p.useCallback(()=>{window.clearTimeout(j.current),j.current=window.setTimeout(()=>{k.current=!0,S(!0),j.current=0},b)},[b,S]);return p.useEffect(()=>()=>{j.current&&(window.clearTimeout(j.current),j.current=0)},[]),e.jsx(Rg,{...f,children:e.jsx(gP,{scope:t,contentId:g,open:E,stateAttribute:T,trigger:v,onTriggerChange:x,onTriggerEnter:p.useCallback(()=>{h.isOpenDelayedRef.current?re():P()},[h.isOpenDelayedRef,re,P]),onTriggerLeave:p.useCallback(()=>{N?H():(window.clearTimeout(j.current),j.current=0)},[H,N]),onOpen:P,onClose:H,disableHoverableContent:N,children:n})})};SN.displayName=eh;var px="TooltipTrigger",EN=p.forwardRef((s,t)=>{const{__scopeTooltip:n,...r}=s,o=th(px,n),l=Lg(px,n),d=Jm(n),u=p.useRef(null),h=qt(t,u,o.onTriggerChange),f=p.useRef(!1),v=p.useRef(!1),x=p.useCallback(()=>f.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",x),[x]),e.jsx(_g,{asChild:!0,...d,children:e.jsx(lt.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...r,ref:h,onPointerMove:Me(s.onPointerMove,g=>{g.pointerType!=="touch"&&!v.current&&!l.isPointerInTransitRef.current&&(o.onTriggerEnter(),v.current=!0)}),onPointerLeave:Me(s.onPointerLeave,()=>{o.onTriggerLeave(),v.current=!1}),onPointerDown:Me(s.onPointerDown,()=>{o.open&&o.onClose(),f.current=!0,document.addEventListener("pointerup",x,{once:!0})}),onFocus:Me(s.onFocus,()=>{f.current||o.onOpen()}),onBlur:Me(s.onBlur,o.onClose),onClick:Me(s.onClick,o.onClose)})})});EN.displayName=px;var vP="TooltipPortal",[Sz,yP]=Zm(vP,{forceMount:void 0}),Fl="TooltipContent",TN=p.forwardRef((s,t)=>{const n=yP(Fl,s.__scopeTooltip),{forceMount:r=n.forceMount,side:o="top",...l}=s,d=th(Fl,s.__scopeTooltip);return e.jsx(ea,{present:r||d.open,children:d.disableHoverableContent?e.jsx(AN,{side:o,...l,ref:t}):e.jsx(bP,{side:o,...l,ref:t})})}),bP=p.forwardRef((s,t)=>{const n=th(Fl,s.__scopeTooltip),r=Lg(Fl,s.__scopeTooltip),o=p.useRef(null),l=qt(t,o),[d,u]=p.useState(null),{trigger:h,onClose:f}=n,v=o.current,{onPointerInTransitChange:x}=r,g=p.useCallback(()=>{u(null),x(!1)},[x]),j=p.useCallback((N,b)=>{const k=N.currentTarget,E={x:N.clientX,y:N.clientY},S=CP(E,k.getBoundingClientRect()),T=SP(E,S),P=EP(b.getBoundingClientRect()),H=AP([...T,...P]);u(H),x(!0)},[x]);return p.useEffect(()=>()=>g(),[g]),p.useEffect(()=>{if(h&&v){const N=k=>j(k,v),b=k=>j(k,h);return h.addEventListener("pointerleave",N),v.addEventListener("pointerleave",b),()=>{h.removeEventListener("pointerleave",N),v.removeEventListener("pointerleave",b)}}},[h,v,j,g]),p.useEffect(()=>{if(d){const N=b=>{const k=b.target,E={x:b.clientX,y:b.clientY},S=h?.contains(k)||v?.contains(k),T=!TP(E,d);S?g():T&&(g(),f())};return document.addEventListener("pointermove",N),()=>document.removeEventListener("pointermove",N)}},[h,v,d,f,g]),e.jsx(AN,{...s,ref:l})}),[jP,wP]=Zm(eh,{isInside:!1}),NP=tE("TooltipContent"),AN=p.forwardRef((s,t)=>{const{__scopeTooltip:n,children:r,"aria-label":o,onEscapeKeyDown:l,onPointerDownOutside:d,...u}=s,h=th(Fl,n),f=Jm(n),{onClose:v}=h;return p.useEffect(()=>(document.addEventListener(fx,v),()=>document.removeEventListener(fx,v)),[v]),p.useEffect(()=>{if(h.trigger){const x=g=>{g.target?.contains(h.trigger)&&v()};return window.addEventListener("scroll",x,{capture:!0}),()=>window.removeEventListener("scroll",x,{capture:!0})}},[h.trigger,v]),e.jsx(Wl,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:x=>x.preventDefault(),onDismiss:v,children:e.jsxs(Ig,{"data-state":h.stateAttribute,...f,...u,ref:t,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(NP,{children:r}),e.jsx(jP,{scope:n,isInside:!0,children:e.jsx(jE,{id:h.contentId,role:"tooltip",children:o||r})})]})})});TN.displayName=Fl;var PN="TooltipArrow",kP=p.forwardRef((s,t)=>{const{__scopeTooltip:n,...r}=s,o=Jm(n);return wP(PN,n).isInside?null:e.jsx(Og,{...o,...r,ref:t})});kP.displayName=PN;function CP(s,t){const n=Math.abs(t.top-s.y),r=Math.abs(t.bottom-s.y),o=Math.abs(t.right-s.x),l=Math.abs(t.left-s.x);switch(Math.min(n,r,o,l)){case l:return"left";case o:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function SP(s,t,n=5){const r=[];switch(t){case"top":r.push({x:s.x-n,y:s.y+n},{x:s.x+n,y:s.y+n});break;case"bottom":r.push({x:s.x-n,y:s.y-n},{x:s.x+n,y:s.y-n});break;case"left":r.push({x:s.x+n,y:s.y-n},{x:s.x+n,y:s.y+n});break;case"right":r.push({x:s.x-n,y:s.y-n},{x:s.x-n,y:s.y+n});break}return r}function EP(s){const{top:t,right:n,bottom:r,left:o}=s;return[{x:o,y:t},{x:n,y:t},{x:n,y:r},{x:o,y:r}]}function TP(s,t){const{x:n,y:r}=s;let o=!1;for(let l=0,d=t.length-1;l<t.length;d=l++){const u=t[l].x,h=t[l].y,f=t[d].x,v=t[d].y;h>r!=v>r&&n<(f-u)*(r-h)/(v-h)+u&&(o=!o)}return o}function AP(s){const t=s.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),PP(t)}function PP(s){if(s.length<=1)return s.slice();const t=[];for(let r=0;r<s.length;r++){const o=s[r];for(;t.length>=2;){const l=t[t.length-1],d=t[t.length-2];if((l.x-d.x)*(o.y-d.y)>=(l.y-d.y)*(o.x-d.x))t.pop();else break}t.push(o)}t.pop();const n=[];for(let r=s.length-1;r>=0;r--){const o=s[r];for(;n.length>=2;){const l=n[n.length-1],d=n[n.length-2];if((l.x-d.x)*(o.y-d.y)>=(l.y-d.y)*(o.x-d.x))n.pop();else break}n.push(o)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var RP=CN,_P=SN,IP=EN,RN=TN;const _N=RP,OP=_P,LP=IP,IN=p.forwardRef(({className:s,sideOffset:t=4,...n},r)=>e.jsx(RN,{ref:r,sideOffset:t,className:ze("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",s),...n}));IN.displayName=RN.displayName;const hp=768;function MP(){const[s,t]=p.useState(void 0);return p.useEffect(()=>{const n=window.matchMedia(`(max-width: ${hp-1}px)`),r=()=>{t(window.innerWidth<hp)};return n.addEventListener("change",r),t(window.innerWidth<hp),()=>n.removeEventListener("change",r)},[]),!!s}const DP=Vl("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),L=p.forwardRef(({className:s,variant:t,size:n,asChild:r=!1,...o},l)=>{const d=r?ig:"button";return e.jsx(d,{className:ze(DP({variant:t,size:n,className:s})),ref:l,...o})});L.displayName="Button";const Oe=p.forwardRef(({className:s,type:t,...n},r)=>e.jsx("input",{type:t,className:ze("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:r,...n}));Oe.displayName="Input";var $P="Separator",$b="horizontal",qP=["horizontal","vertical"],ON=p.forwardRef((s,t)=>{const{decorative:n,orientation:r=$b,...o}=s,l=FP(r)?r:$b,u=n?{role:"none"}:{"aria-orientation":l==="vertical"?l:void 0,role:"separator"};return e.jsx(lt.div,{"data-orientation":l,...u,...o,ref:t})});ON.displayName=$P;function FP(s){return qP.includes(s)}var LN=ON;const Di=p.forwardRef(({className:s,orientation:t="horizontal",decorative:n=!0,...r},o)=>e.jsx(LN,{ref:o,decorative:n,orientation:t,className:ze("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s),...r}));Di.displayName=LN.displayName;var fp="focusScope.autoFocusOnMount",pp="focusScope.autoFocusOnUnmount",qb={bubbles:!1,cancelable:!0},zP="FocusScope",sh=p.forwardRef((s,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:l,...d}=s,[u,h]=p.useState(null),f=an(o),v=an(l),x=p.useRef(null),g=qt(t,b=>h(b)),j=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let b=function(T){if(j.paused||!u)return;const P=T.target;u.contains(P)?x.current=P:ki(x.current,{select:!0})},k=function(T){if(j.paused||!u)return;const P=T.relatedTarget;P!==null&&(u.contains(P)||ki(x.current,{select:!0}))},E=function(T){if(document.activeElement===document.body)for(const H of T)H.removedNodes.length>0&&ki(u)};document.addEventListener("focusin",b),document.addEventListener("focusout",k);const S=new MutationObserver(E);return u&&S.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",k),S.disconnect()}}},[r,u,j.paused]),p.useEffect(()=>{if(u){zb.add(j);const b=document.activeElement;if(!u.contains(b)){const E=new CustomEvent(fp,qb);u.addEventListener(fp,f),u.dispatchEvent(E),E.defaultPrevented||(UP(VP(MN(u)),{select:!0}),document.activeElement===b&&ki(u))}return()=>{u.removeEventListener(fp,f),setTimeout(()=>{const E=new CustomEvent(pp,qb);u.addEventListener(pp,v),u.dispatchEvent(E),E.defaultPrevented||ki(b??document.body,{select:!0}),u.removeEventListener(pp,v),zb.remove(j)},0)}}},[u,f,v,j]);const N=p.useCallback(b=>{if(!n&&!r||j.paused)return;const k=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,E=document.activeElement;if(k&&E){const S=b.currentTarget,[T,P]=BP(S);T&&P?!b.shiftKey&&E===P?(b.preventDefault(),n&&ki(T,{select:!0})):b.shiftKey&&E===T&&(b.preventDefault(),n&&ki(P,{select:!0})):E===S&&b.preventDefault()}},[n,r,j.paused]);return e.jsx(lt.div,{tabIndex:-1,...d,ref:g,onKeyDown:N})});sh.displayName=zP;function UP(s,{select:t=!1}={}){const n=document.activeElement;for(const r of s)if(ki(r,{select:t}),document.activeElement!==n)return}function BP(s){const t=MN(s),n=Fb(t,s),r=Fb(t.reverse(),s);return[n,r]}function MN(s){const t=[],n=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Fb(s,t){for(const n of s)if(!HP(n,{upTo:t}))return n}function HP(s,{upTo:t}){if(getComputedStyle(s).visibility==="hidden")return!0;for(;s;){if(t!==void 0&&s===t)return!1;if(getComputedStyle(s).display==="none")return!0;s=s.parentElement}return!1}function KP(s){return s instanceof HTMLInputElement&&"select"in s}function ki(s,{select:t=!1}={}){if(s&&s.focus){const n=document.activeElement;s.focus({preventScroll:!0}),s!==n&&KP(s)&&t&&s.select()}}var zb=WP();function WP(){let s=[];return{add(t){const n=s[0];t!==n&&n?.pause(),s=Ub(s,t),s.unshift(t)},remove(t){s=Ub(s,t),s[0]?.resume()}}}function Ub(s,t){const n=[...s],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function VP(s){return s.filter(t=>t.tagName!=="A")}var xp=0;function Mg(){p.useEffect(()=>{const s=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",s[0]??Bb()),document.body.insertAdjacentElement("beforeend",s[1]??Bb()),xp++,()=>{xp===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),xp--}},[])}function Bb(){const s=document.createElement("span");return s.setAttribute("data-radix-focus-guard",""),s.tabIndex=0,s.style.outline="none",s.style.opacity="0",s.style.position="fixed",s.style.pointerEvents="none",s}var pa=function(){return pa=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(t[l]=n[l])}return t},pa.apply(this,arguments)};function DN(s,t){var n={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&t.indexOf(r)<0&&(n[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(s);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(s,r[o])&&(n[r[o]]=s[r[o]]);return n}function GP(s,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,l;r<o;r++)(l||!(r in t))&&(l||(l=Array.prototype.slice.call(t,0,r)),l[r]=t[r]);return s.concat(l||Array.prototype.slice.call(t))}var sm="right-scroll-bar-position",nm="width-before-scroll-bar",QP="with-scroll-bars-hidden",YP="--removed-body-scroll-bar-size";function gp(s,t){return typeof s=="function"?s(t):s&&(s.current=t),s}function XP(s,t){var n=p.useState(function(){return{value:s,callback:t,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=t,n.facade}var ZP=typeof window<"u"?p.useLayoutEffect:p.useEffect,Hb=new WeakMap;function JP(s,t){var n=XP(null,function(r){return s.forEach(function(o){return gp(o,r)})});return ZP(function(){var r=Hb.get(n);if(r){var o=new Set(r),l=new Set(s),d=n.current;o.forEach(function(u){l.has(u)||gp(u,null)}),l.forEach(function(u){o.has(u)||gp(u,d)})}Hb.set(n,s)},[s]),n}function e6(s){return s}function t6(s,t){t===void 0&&(t=e6);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:s},useMedium:function(l){var d=t(l,r);return n.push(d),function(){n=n.filter(function(u){return u!==d})}},assignSyncMedium:function(l){for(r=!0;n.length;){var d=n;n=[],d.forEach(l)}n={push:function(u){return l(u)},filter:function(){return n}}},assignMedium:function(l){r=!0;var d=[];if(n.length){var u=n;n=[],u.forEach(l),d=n}var h=function(){var v=d;d=[],v.forEach(l)},f=function(){return Promise.resolve().then(h)};f(),n={push:function(v){d.push(v),f()},filter:function(v){return d=d.filter(v),n}}}};return o}function s6(s){s===void 0&&(s={});var t=t6(null);return t.options=pa({async:!0,ssr:!1},s),t}var $N=function(s){var t=s.sideCar,n=DN(s,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return p.createElement(r,pa({},n))};$N.isSideCarExport=!0;function n6(s,t){return s.useMedium(t),$N}var qN=s6(),vp=function(){},nh=p.forwardRef(function(s,t){var n=p.useRef(null),r=p.useState({onScrollCapture:vp,onWheelCapture:vp,onTouchMoveCapture:vp}),o=r[0],l=r[1],d=s.forwardProps,u=s.children,h=s.className,f=s.removeScrollBar,v=s.enabled,x=s.shards,g=s.sideCar,j=s.noIsolation,N=s.inert,b=s.allowPinchZoom,k=s.as,E=k===void 0?"div":k,S=s.gapMode,T=DN(s,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),P=g,H=JP([n,t]),re=pa(pa({},T),o);return p.createElement(p.Fragment,null,v&&p.createElement(P,{sideCar:qN,removeScrollBar:f,shards:x,noIsolation:j,inert:N,setCallbacks:l,allowPinchZoom:!!b,lockRef:n,gapMode:S}),d?p.cloneElement(p.Children.only(u),pa(pa({},re),{ref:H})):p.createElement(E,pa({},re,{className:h,ref:H}),u))});nh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};nh.classNames={fullWidth:nm,zeroRight:sm};var r6=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function a6(){if(!document)return null;var s=document.createElement("style");s.type="text/css";var t=r6();return t&&s.setAttribute("nonce",t),s}function i6(s,t){s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}function o6(s){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(s)}var l6=function(){var s=0,t=null;return{add:function(n){s==0&&(t=a6())&&(i6(t,n),o6(t)),s++},remove:function(){s--,!s&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},c6=function(){var s=l6();return function(t,n){p.useEffect(function(){return s.add(t),function(){s.remove()}},[t&&n])}},FN=function(){var s=c6(),t=function(n){var r=n.styles,o=n.dynamic;return s(r,o),null};return t},d6={left:0,top:0,right:0,gap:0},yp=function(s){return parseInt(s||"",10)||0},u6=function(s){var t=window.getComputedStyle(document.body),n=t[s==="padding"?"paddingLeft":"marginLeft"],r=t[s==="padding"?"paddingTop":"marginTop"],o=t[s==="padding"?"paddingRight":"marginRight"];return[yp(n),yp(r),yp(o)]},m6=function(s){if(s===void 0&&(s="margin"),typeof window>"u")return d6;var t=u6(s),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},h6=FN(),Pl="data-scroll-locked",f6=function(s,t,n,r){var o=s.left,l=s.top,d=s.right,u=s.gap;return n===void 0&&(n="margin"),`
  .`.concat(QP,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(u,"px ").concat(r,`;
  }
  body[`).concat(Pl,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(l,`px;
    padding-right: `).concat(d,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(u,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(sm,` {
    right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(nm,` {
    margin-right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(sm," .").concat(sm,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(nm," .").concat(nm,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Pl,`] {
    `).concat(YP,": ").concat(u,`px;
  }
`)},Kb=function(){var s=parseInt(document.body.getAttribute(Pl)||"0",10);return isFinite(s)?s:0},p6=function(){p.useEffect(function(){return document.body.setAttribute(Pl,(Kb()+1).toString()),function(){var s=Kb()-1;s<=0?document.body.removeAttribute(Pl):document.body.setAttribute(Pl,s.toString())}},[])},x6=function(s){var t=s.noRelative,n=s.noImportant,r=s.gapMode,o=r===void 0?"margin":r;p6();var l=p.useMemo(function(){return m6(o)},[o]);return p.createElement(h6,{styles:f6(l,!t,o,n?"":"!important")})},xx=!1;if(typeof window<"u")try{var _u=Object.defineProperty({},"passive",{get:function(){return xx=!0,!0}});window.addEventListener("test",_u,_u),window.removeEventListener("test",_u,_u)}catch{xx=!1}var fl=xx?{passive:!1}:!1,g6=function(s){return s.tagName==="TEXTAREA"},zN=function(s,t){if(!(s instanceof Element))return!1;var n=window.getComputedStyle(s);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!g6(s)&&n[t]==="visible")},v6=function(s){return zN(s,"overflowY")},y6=function(s){return zN(s,"overflowX")},Wb=function(s,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=UN(s,r);if(o){var l=BN(s,r),d=l[1],u=l[2];if(d>u)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},b6=function(s){var t=s.scrollTop,n=s.scrollHeight,r=s.clientHeight;return[t,n,r]},j6=function(s){var t=s.scrollLeft,n=s.scrollWidth,r=s.clientWidth;return[t,n,r]},UN=function(s,t){return s==="v"?v6(t):y6(t)},BN=function(s,t){return s==="v"?b6(t):j6(t)},w6=function(s,t){return s==="h"&&t==="rtl"?-1:1},N6=function(s,t,n,r,o){var l=w6(s,window.getComputedStyle(t).direction),d=l*r,u=n.target,h=t.contains(u),f=!1,v=d>0,x=0,g=0;do{var j=BN(s,u),N=j[0],b=j[1],k=j[2],E=b-k-l*N;(N||E)&&UN(s,u)&&(x+=E,g+=N),u instanceof ShadowRoot?u=u.host:u=u.parentNode}while(!h&&u!==document.body||h&&(t.contains(u)||t===u));return(v&&Math.abs(x)<1||!v&&Math.abs(g)<1)&&(f=!0),f},Iu=function(s){return"changedTouches"in s?[s.changedTouches[0].clientX,s.changedTouches[0].clientY]:[0,0]},Vb=function(s){return[s.deltaX,s.deltaY]},Gb=function(s){return s&&"current"in s?s.current:s},k6=function(s,t){return s[0]===t[0]&&s[1]===t[1]},C6=function(s){return`
  .block-interactivity-`.concat(s,` {pointer-events: none;}
  .allow-interactivity-`).concat(s,` {pointer-events: all;}
`)},S6=0,pl=[];function E6(s){var t=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),o=p.useState(S6++)[0],l=p.useState(FN)[0],d=p.useRef(s);p.useEffect(function(){d.current=s},[s]),p.useEffect(function(){if(s.inert){document.body.classList.add("block-interactivity-".concat(o));var b=GP([s.lockRef.current],(s.shards||[]).map(Gb),!0).filter(Boolean);return b.forEach(function(k){return k.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),b.forEach(function(k){return k.classList.remove("allow-interactivity-".concat(o))})}}},[s.inert,s.lockRef.current,s.shards]);var u=p.useCallback(function(b,k){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!d.current.allowPinchZoom;var E=Iu(b),S=n.current,T="deltaX"in b?b.deltaX:S[0]-E[0],P="deltaY"in b?b.deltaY:S[1]-E[1],H,re=b.target,B=Math.abs(T)>Math.abs(P)?"h":"v";if("touches"in b&&B==="h"&&re.type==="range")return!1;var Q=Wb(B,re);if(!Q)return!0;if(Q?H=B:(H=B==="v"?"h":"v",Q=Wb(B,re)),!Q)return!1;if(!r.current&&"changedTouches"in b&&(T||P)&&(r.current=H),!H)return!0;var G=r.current||H;return N6(G,k,b,G==="h"?T:P)},[]),h=p.useCallback(function(b){var k=b;if(!(!pl.length||pl[pl.length-1]!==l)){var E="deltaY"in k?Vb(k):Iu(k),S=t.current.filter(function(H){return H.name===k.type&&(H.target===k.target||k.target===H.shadowParent)&&k6(H.delta,E)})[0];if(S&&S.should){k.cancelable&&k.preventDefault();return}if(!S){var T=(d.current.shards||[]).map(Gb).filter(Boolean).filter(function(H){return H.contains(k.target)}),P=T.length>0?u(k,T[0]):!d.current.noIsolation;P&&k.cancelable&&k.preventDefault()}}},[]),f=p.useCallback(function(b,k,E,S){var T={name:b,delta:k,target:E,should:S,shadowParent:T6(E)};t.current.push(T),setTimeout(function(){t.current=t.current.filter(function(P){return P!==T})},1)},[]),v=p.useCallback(function(b){n.current=Iu(b),r.current=void 0},[]),x=p.useCallback(function(b){f(b.type,Vb(b),b.target,u(b,s.lockRef.current))},[]),g=p.useCallback(function(b){f(b.type,Iu(b),b.target,u(b,s.lockRef.current))},[]);p.useEffect(function(){return pl.push(l),s.setCallbacks({onScrollCapture:x,onWheelCapture:x,onTouchMoveCapture:g}),document.addEventListener("wheel",h,fl),document.addEventListener("touchmove",h,fl),document.addEventListener("touchstart",v,fl),function(){pl=pl.filter(function(b){return b!==l}),document.removeEventListener("wheel",h,fl),document.removeEventListener("touchmove",h,fl),document.removeEventListener("touchstart",v,fl)}},[]);var j=s.removeScrollBar,N=s.inert;return p.createElement(p.Fragment,null,N?p.createElement(l,{styles:C6(o)}):null,j?p.createElement(x6,{gapMode:s.gapMode}):null)}function T6(s){for(var t=null;s!==null;)s instanceof ShadowRoot&&(t=s.host,s=s.host),s=s.parentNode;return t}const A6=n6(qN,E6);var rh=p.forwardRef(function(s,t){return p.createElement(nh,pa({},s,{ref:t,sideCar:A6}))});rh.classNames=nh.classNames;var P6=function(s){if(typeof document>"u")return null;var t=Array.isArray(s)?s[0]:s;return t.ownerDocument.body},xl=new WeakMap,Ou=new WeakMap,Lu={},bp=0,HN=function(s){return s&&(s.host||HN(s.parentNode))},R6=function(s,t){return t.map(function(n){if(s.contains(n))return n;var r=HN(n);return r&&s.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",s,". Doing nothing"),null)}).filter(function(n){return!!n})},_6=function(s,t,n,r){var o=R6(t,Array.isArray(s)?s:[s]);Lu[n]||(Lu[n]=new WeakMap);var l=Lu[n],d=[],u=new Set,h=new Set(o),f=function(x){!x||u.has(x)||(u.add(x),f(x.parentNode))};o.forEach(f);var v=function(x){!x||h.has(x)||Array.prototype.forEach.call(x.children,function(g){if(u.has(g))v(g);else try{var j=g.getAttribute(r),N=j!==null&&j!=="false",b=(xl.get(g)||0)+1,k=(l.get(g)||0)+1;xl.set(g,b),l.set(g,k),d.push(g),b===1&&N&&Ou.set(g,!0),k===1&&g.setAttribute(n,"true"),N||g.setAttribute(r,"true")}catch(E){console.error("aria-hidden: cannot operate on ",g,E)}})};return v(t),u.clear(),bp++,function(){d.forEach(function(x){var g=xl.get(x)-1,j=l.get(x)-1;xl.set(x,g),l.set(x,j),g||(Ou.has(x)||x.removeAttribute(r),Ou.delete(x)),j||x.removeAttribute(n)}),bp--,bp||(xl=new WeakMap,xl=new WeakMap,Ou=new WeakMap,Lu={})}},Dg=function(s,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(s)?s:[s]),o=P6(s);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live]"))),_6(r,o,n,"aria-hidden")):function(){return null}},$g="Dialog",[KN]=Jr($g),[I6,ta]=KN($g),WN=s=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:o,onOpenChange:l,modal:d=!0}=s,u=p.useRef(null),h=p.useRef(null),[f=!1,v]=Ka({prop:r,defaultProp:o,onChange:l});return e.jsx(I6,{scope:t,triggerRef:u,contentRef:h,contentId:Kr(),titleId:Kr(),descriptionId:Kr(),open:f,onOpenChange:v,onOpenToggle:p.useCallback(()=>v(x=>!x),[v]),modal:d,children:n})};WN.displayName=$g;var VN="DialogTrigger",O6=p.forwardRef((s,t)=>{const{__scopeDialog:n,...r}=s,o=ta(VN,n),l=qt(t,o.triggerRef);return e.jsx(lt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":zg(o.open),...r,ref:l,onClick:Me(s.onClick,o.onOpenToggle)})});O6.displayName=VN;var qg="DialogPortal",[L6,GN]=KN(qg,{forceMount:void 0}),QN=s=>{const{__scopeDialog:t,forceMount:n,children:r,container:o}=s,l=ta(qg,t);return e.jsx(L6,{scope:t,forceMount:n,children:p.Children.map(r,d=>e.jsx(ea,{present:n||l.open,children:e.jsx(jd,{asChild:!0,container:o,children:d})}))})};QN.displayName=qg;var wm="DialogOverlay",YN=p.forwardRef((s,t)=>{const n=GN(wm,s.__scopeDialog),{forceMount:r=n.forceMount,...o}=s,l=ta(wm,s.__scopeDialog);return l.modal?e.jsx(ea,{present:r||l.open,children:e.jsx(D6,{...o,ref:t})}):null});YN.displayName=wm;var M6=yo("DialogOverlay.RemoveScroll"),D6=p.forwardRef((s,t)=>{const{__scopeDialog:n,...r}=s,o=ta(wm,n);return e.jsx(rh,{as:M6,allowPinchZoom:!0,shards:[o.contentRef],children:e.jsx(lt.div,{"data-state":zg(o.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),ko="DialogContent",XN=p.forwardRef((s,t)=>{const n=GN(ko,s.__scopeDialog),{forceMount:r=n.forceMount,...o}=s,l=ta(ko,s.__scopeDialog);return e.jsx(ea,{present:r||l.open,children:l.modal?e.jsx($6,{...o,ref:t}):e.jsx(q6,{...o,ref:t})})});XN.displayName=ko;var $6=p.forwardRef((s,t)=>{const n=ta(ko,s.__scopeDialog),r=p.useRef(null),o=qt(t,n.contentRef,r);return p.useEffect(()=>{const l=r.current;if(l)return Dg(l)},[]),e.jsx(ZN,{...s,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Me(s.onCloseAutoFocus,l=>{l.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Me(s.onPointerDownOutside,l=>{const d=l.detail.originalEvent,u=d.button===0&&d.ctrlKey===!0;(d.button===2||u)&&l.preventDefault()}),onFocusOutside:Me(s.onFocusOutside,l=>l.preventDefault())})}),q6=p.forwardRef((s,t)=>{const n=ta(ko,s.__scopeDialog),r=p.useRef(!1),o=p.useRef(!1);return e.jsx(ZN,{...s,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{s.onCloseAutoFocus?.(l),l.defaultPrevented||(r.current||n.triggerRef.current?.focus(),l.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:l=>{s.onInteractOutside?.(l),l.defaultPrevented||(r.current=!0,l.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const d=l.target;n.triggerRef.current?.contains(d)&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&o.current&&l.preventDefault()}})}),ZN=p.forwardRef((s,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:l,...d}=s,u=ta(ko,n),h=p.useRef(null),f=qt(t,h);return Mg(),e.jsxs(e.Fragment,{children:[e.jsx(sh,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:l,children:e.jsx(Wl,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":zg(u.open),...d,ref:f,onDismiss:()=>u.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(F6,{titleId:u.titleId}),e.jsx(U6,{contentRef:h,descriptionId:u.descriptionId})]})]})}),Fg="DialogTitle",JN=p.forwardRef((s,t)=>{const{__scopeDialog:n,...r}=s,o=ta(Fg,n);return e.jsx(lt.h2,{id:o.titleId,...r,ref:t})});JN.displayName=Fg;var e2="DialogDescription",t2=p.forwardRef((s,t)=>{const{__scopeDialog:n,...r}=s,o=ta(e2,n);return e.jsx(lt.p,{id:o.descriptionId,...r,ref:t})});t2.displayName=e2;var s2="DialogClose",n2=p.forwardRef((s,t)=>{const{__scopeDialog:n,...r}=s,o=ta(s2,n);return e.jsx(lt.button,{type:"button",...r,ref:t,onClick:Me(s.onClick,()=>o.onOpenChange(!1))})});n2.displayName=s2;function zg(s){return s?"open":"closed"}var r2="DialogTitleWarning",[Ez,a2]=Z3(r2,{contentName:ko,titleName:Fg,docsSlug:"dialog"}),F6=({titleId:s})=>{const t=a2(r2),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return p.useEffect(()=>{s&&(document.getElementById(s)||console.error(n))},[n,s]),null},z6="DialogDescriptionWarning",U6=({contentRef:s,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${a2(z6).contentName}}.`;return p.useEffect(()=>{const o=s.current?.getAttribute("aria-describedby");t&&o&&(document.getElementById(t)||console.warn(r))},[r,s,t]),null},i2=WN,o2=QN,ah=YN,ih=XN,oh=JN,lh=t2,l2=n2;const B6=i2,H6=o2,c2=p.forwardRef(({className:s,...t},n)=>e.jsx(ah,{className:ze("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:n}));c2.displayName=ah.displayName;const K6=Vl("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),d2=p.forwardRef(({side:s="right",className:t,children:n,...r},o)=>e.jsxs(H6,{children:[e.jsx(c2,{}),e.jsxs(ih,{ref:o,className:ze(K6({side:s}),t),...r,children:[n,e.jsxs(l2,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(zn,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));d2.displayName=ih.displayName;const u2=({className:s,...t})=>e.jsx("div",{className:ze("flex flex-col space-y-2 text-center sm:text-left",s),...t});u2.displayName="SheetHeader";const m2=p.forwardRef(({className:s,...t},n)=>e.jsx(oh,{ref:n,className:ze("text-lg font-semibold text-foreground",s),...t}));m2.displayName=oh.displayName;const h2=p.forwardRef(({className:s,...t},n)=>e.jsx(lh,{ref:n,className:ze("text-sm text-muted-foreground",s),...t}));h2.displayName=lh.displayName;function ye({className:s,...t}){return e.jsx("div",{className:ze("animate-pulse rounded-md bg-muted",s),...t})}const W6="sidebar_state",V6=3600*24*7,G6="16rem",Q6="18rem",Y6="3rem",X6="b",f2=p.createContext(null);function Ug(){const s=p.useContext(f2);if(!s)throw new Error("useSidebar must be used within a SidebarProvider.");return s}function Z6({defaultOpen:s=!0,open:t,onOpenChange:n,className:r,style:o,children:l,...d}){const u=MP(),[h,f]=p.useState(!1),[v,x]=p.useState(s),g=t??v,j=p.useCallback(E=>{const S=typeof E=="function"?E(g):E;n?n(S):x(S),document.cookie=`${W6}=${S}; path=/; max-age=${V6}`},[n,g]),N=p.useCallback(()=>u?f(E=>!E):j(E=>!E),[u,j,f]);p.useEffect(()=>{const E=S=>{S.key===X6&&(S.metaKey||S.ctrlKey)&&(S.preventDefault(),N())};return window.addEventListener("keydown",E),()=>window.removeEventListener("keydown",E)},[N]);const b=g?"expanded":"collapsed",k=p.useMemo(()=>({state:b,open:g,setOpen:j,isMobile:u,openMobile:h,setOpenMobile:f,toggleSidebar:N}),[b,g,j,u,h,f,N]);return e.jsx(f2.Provider,{value:k,children:e.jsx(_N,{delayDuration:0,children:e.jsx("div",{"data-slot":"sidebar-wrapper",style:{"--sidebar-width":G6,"--sidebar-width-icon":Y6,...o},className:ze("group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",r),...d,children:l})})})}function J6({side:s="left",variant:t="sidebar",collapsible:n="offcanvas",className:r,children:o,...l}){const{isMobile:d,state:u,openMobile:h,setOpenMobile:f}=Ug();return n==="none"?e.jsx("div",{"data-slot":"sidebar",className:ze("bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col",r),...l,children:o}):d?e.jsx(B6,{open:h,onOpenChange:f,...l,children:e.jsxs(d2,{"data-sidebar":"sidebar","data-slot":"sidebar","data-mobile":"true",className:"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden",style:{"--sidebar-width":Q6},side:s,children:[e.jsxs(u2,{className:"sr-only",children:[e.jsx(m2,{children:"Sidebar"}),e.jsx(h2,{children:"Displays the mobile sidebar."})]}),e.jsx("div",{className:"flex h-full w-full flex-col",children:o})]})}):e.jsxs("div",{className:"group peer text-sidebar-foreground hidden md:block","data-state":u,"data-collapsible":u==="collapsed"?n:"","data-variant":t,"data-side":s,"data-slot":"sidebar",children:[e.jsx("div",{"data-slot":"sidebar-gap",className:ze("relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",t==="floating"||t==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]":"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]")}),e.jsx("div",{"data-slot":"sidebar-container",className:ze("fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex",s==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",t==="floating"||t==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]":"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...l,children:e.jsx("div",{"data-sidebar":"sidebar","data-slot":"sidebar-inner",className:"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm",children:o})})]})}function eR({className:s,onClick:t,...n}){const{toggleSidebar:r}=Ug();return e.jsxs(L,{"data-sidebar":"trigger","data-slot":"sidebar-trigger",variant:"ghost",size:"icon",className:ze("h-7 w-7",s),onClick:o=>{t?.(o),r()},...n,children:[e.jsx(pT,{}),e.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})}function tR({className:s,...t}){return e.jsx("div",{"data-slot":"sidebar-header","data-sidebar":"header",className:ze("flex flex-col gap-2 p-2",s),...t})}function sR({className:s,...t}){return e.jsx("div",{"data-slot":"sidebar-footer","data-sidebar":"footer",className:ze("flex flex-col gap-2 p-2",s),...t})}function nR({className:s,...t}){return e.jsx("div",{"data-slot":"sidebar-content","data-sidebar":"content",className:ze("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",s),...t})}function rR({className:s,...t}){return e.jsx("div",{"data-slot":"sidebar-group","data-sidebar":"group",className:ze("relative flex w-full min-w-0 flex-col p-2",s),...t})}function aR({className:s,asChild:t=!1,...n}){const r=t?ig:"div";return e.jsx(r,{"data-slot":"sidebar-group-label","data-sidebar":"group-label",className:ze("text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",s),...n})}function iR({className:s,...t}){return e.jsx("div",{"data-slot":"sidebar-group-content","data-sidebar":"group-content",className:ze("w-full text-sm",s),...t})}function oR({className:s,...t}){return e.jsx("ul",{"data-slot":"sidebar-menu","data-sidebar":"menu",className:ze("flex w-full min-w-0 flex-col gap-1",s),...t})}function lR({className:s,...t}){return e.jsx("li",{"data-slot":"sidebar-menu-item","data-sidebar":"menu-item",className:ze("group/menu-item relative",s),...t})}const cR=Vl("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}});function dR({asChild:s=!1,isActive:t=!1,variant:n="default",size:r="default",tooltip:o,className:l,...d}){const u=s?ig:"button",{isMobile:h,state:f}=Ug(),v=e.jsx(u,{"data-slot":"sidebar-menu-button","data-sidebar":"menu-button","data-size":r,"data-active":t,className:ze(cR({variant:n,size:r}),l),...d});return o?(typeof o=="string"&&(o={children:o}),e.jsxs(OP,{children:[e.jsx(LP,{asChild:!0,children:v}),e.jsx(IN,{side:"right",align:"center",hidden:f!=="collapsed"||h,...o})]})):v}const uR="/images/logo.png",mR=[{title:"Overview",url:"/admin",icon:hm},{title:"Customers",url:"/admin/customers",icon:Vr},{title:"Projects",url:"/admin/projects",icon:qn},{title:"Invoices",url:"/admin/invoices",icon:Gt},{title:"Rates",url:"/admin/billing-rates",icon:rr},{title:"Quotes",url:"/admin/quote-builder",icon:em}],hR=[{title:"Conversations",url:"/admin/conversations",icon:mT},{title:"Support",url:"/admin/support",icon:ho},{title:"Community",url:"/admin/community",icon:kT},{title:"Leads",url:"/admin/lead-generator",icon:cx}],fR=[{title:"Knowledge Base",url:"/admin/knowledge-base",icon:_i},{title:"Code Backups",url:"/admin/code-backups",icon:po},{title:"Servers",url:"/admin/servers",icon:er},{title:"API Keys",url:"/admin/api-keys",icon:Dl},{title:"Licenses",url:"/admin/licenses",icon:kn},{title:"Settings",url:"/admin/settings",icon:zw}];function jp({label:s,items:t,location:n}){return e.jsxs(rR,{children:[e.jsx(aR,{children:s}),e.jsx(iR,{children:e.jsx(oR,{children:t.map(r=>{const o=n===r.url||r.url!=="/admin"&&n.startsWith(r.url);return e.jsx(lR,{children:e.jsx(dR,{asChild:!0,isActive:o,children:e.jsxs(Ha,{href:r.url,"data-testid":`link-nav-${r.title.toLowerCase().replace(/\s+/g,"-")}`,children:[e.jsx(r.icon,{className:"w-4 h-4"}),e.jsx("span",{children:r.title})]})})},r.title)})})})]})}function pR(){const[s]=Zx();return e.jsxs(J6,{children:[e.jsx(tR,{className:"p-4",children:e.jsx(Ha,{href:"/admin",children:e.jsxs("div",{className:"flex items-center gap-2.5 cursor-pointer","data-testid":"link-logo",children:[e.jsx("img",{src:uR,alt:"AI Powered Sites",className:"w-8 h-8 rounded-md object-cover"}),e.jsx("div",{children:e.jsx("span",{className:"text-sm font-semibold tracking-tight leading-tight",children:"AI Powered Sites"})})]})})}),e.jsxs(nR,{children:[e.jsx(jp,{label:"Core",items:mR,location:s}),e.jsx(jp,{label:"Engage",items:hR,location:s}),e.jsx(jp,{label:"Manage",items:fR,location:s})]}),e.jsx(sR,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(ya,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"AI Powered Sites"})]})})]})}const p2=p.createContext({theme:"light",toggleTheme:()=>{}});function xR({children:s}){const[t,n]=p.useState(()=>typeof window<"u"&&localStorage.getItem("theme")||"light");p.useEffect(()=>{const o=document.documentElement;t==="dark"?o.classList.add("dark"):o.classList.remove("dark"),localStorage.setItem("theme",t)},[t]);const r=()=>{n(o=>o==="light"?"dark":"light")};return e.jsx(p2.Provider,{value:{theme:t,toggleTheme:r},children:s})}function gR(){return p.useContext(p2)}function x2(){const{theme:s,toggleTheme:t}=gR();return e.jsx(L,{size:"icon",variant:"ghost",onClick:t,"data-testid":"button-theme-toggle",children:s==="light"?e.jsx(fT,{className:"w-4 h-4"}):e.jsx(bT,{className:"w-4 h-4"})})}function vR(s,t=[]){let n=[];function r(l,d){const u=p.createContext(d);u.displayName=l+"Context";const h=n.length;n=[...n,d];const f=x=>{const{scope:g,children:j,...N}=x,b=g?.[s]?.[h]||u,k=p.useMemo(()=>N,Object.values(N));return e.jsx(b.Provider,{value:k,children:j})};f.displayName=l+"Provider";function v(x,g){const j=g?.[s]?.[h]||u,N=p.useContext(j);if(N)return N;if(d!==void 0)return d;throw new Error(`\`${x}\` must be used within \`${l}\``)}return[f,v]}const o=()=>{const l=n.map(d=>p.createContext(d));return function(u){const h=u?.[s]||l;return p.useMemo(()=>({[`__scope${s}`]:{...u,[s]:h}}),[u,h])}};return o.scopeName=s,[r,yR(o,...t)]}function yR(...s){const t=s[0];if(s.length===1)return t;const n=()=>{const r=s.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(l){const d=r.reduce((u,{useScope:h,scopeName:f})=>{const x=h(l)[`__scope${f}`];return{...u,...x}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:d}),[d])}};return n.scopeName=t.scopeName,n}var bR=Symbol.for("react.lazy"),Nm=Qx[" use ".trim().toString()];function jR(s){return typeof s=="object"&&s!==null&&"then"in s}function g2(s){return s!=null&&typeof s=="object"&&"$$typeof"in s&&s.$$typeof===bR&&"_payload"in s&&jR(s._payload)}function wR(s){const t=NR(s),n=p.forwardRef((r,o)=>{let{children:l,...d}=r;g2(l)&&typeof Nm=="function"&&(l=Nm(l._payload));const u=p.Children.toArray(l),h=u.find(CR);if(h){const f=h.props.children,v=u.map(x=>x===h?p.Children.count(f)>1?p.Children.only(null):p.isValidElement(f)?f.props.children:null:x);return e.jsx(t,{...d,ref:o,children:p.isValidElement(f)?p.cloneElement(f,void 0,v):null})}return e.jsx(t,{...d,ref:o,children:l})});return n.displayName=`${s}.Slot`,n}function NR(s){const t=p.forwardRef((n,r)=>{let{children:o,...l}=n;if(g2(o)&&typeof Nm=="function"&&(o=Nm(o._payload)),p.isValidElement(o)){const d=ER(o),u=SR(l,o.props);return o.type!==p.Fragment&&(u.ref=r?bd(r,d):d),p.cloneElement(o,u)}return p.Children.count(o)>1?p.Children.only(null):null});return t.displayName=`${s}.SlotClone`,t}var kR=Symbol("radix.slottable");function CR(s){return p.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===kR}function SR(s,t){const n={...t};for(const r in t){const o=s[r],l=t[r];/^on[A-Z]/.test(r)?o&&l?n[r]=(...u)=>{const h=l(...u);return o(...u),h}:o&&(n[r]=o):r==="style"?n[r]={...o,...l}:r==="className"&&(n[r]=[o,l].filter(Boolean).join(" "))}return{...s,...n}}function ER(s){let t=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?s.ref:(t=Object.getOwnPropertyDescriptor(s,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?s.props.ref:s.props.ref||s.ref)}var TR=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Bg=TR.reduce((s,t)=>{const n=wR(`Primitive.${t}`),r=p.forwardRef((o,l)=>{const{asChild:d,...u}=o,h=d?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(h,{...u,ref:l})});return r.displayName=`Primitive.${t}`,{...s,[t]:r}},{});function AR(){return $j.useSyncExternalStore(PR,()=>!0,()=>!1)}function PR(){return()=>{}}var Hg="Avatar",[RR]=vR(Hg),[_R,v2]=RR(Hg),y2=p.forwardRef((s,t)=>{const{__scopeAvatar:n,...r}=s,[o,l]=p.useState("idle");return e.jsx(_R,{scope:n,imageLoadingStatus:o,onImageLoadingStatusChange:l,children:e.jsx(Bg.span,{...r,ref:t})})});y2.displayName=Hg;var b2="AvatarImage",j2=p.forwardRef((s,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:o=()=>{},...l}=s,d=v2(b2,n),u=IR(r,l),h=an(f=>{o(f),d.onImageLoadingStatusChange(f)});return zs(()=>{u!=="idle"&&h(u)},[u,h]),u==="loaded"?e.jsx(Bg.img,{...l,ref:t,src:r}):null});j2.displayName=b2;var w2="AvatarFallback",N2=p.forwardRef((s,t)=>{const{__scopeAvatar:n,delayMs:r,...o}=s,l=v2(w2,n),[d,u]=p.useState(r===void 0);return p.useEffect(()=>{if(r!==void 0){const h=window.setTimeout(()=>u(!0),r);return()=>window.clearTimeout(h)}},[r]),d&&l.imageLoadingStatus!=="loaded"?e.jsx(Bg.span,{...o,ref:t}):null});N2.displayName=w2;function Qb(s,t){return s?t?(s.src!==t&&(s.src=t),s.complete&&s.naturalWidth>0?"loaded":"loading"):"error":"idle"}function IR(s,{referrerPolicy:t,crossOrigin:n}){const r=AR(),o=p.useRef(null),l=r?(o.current||(o.current=new window.Image),o.current):null,[d,u]=p.useState(()=>Qb(l,s));return zs(()=>{u(Qb(l,s))},[l,s]),zs(()=>{const h=x=>()=>{u(x)};if(!l)return;const f=h("loaded"),v=h("error");return l.addEventListener("load",f),l.addEventListener("error",v),t&&(l.referrerPolicy=t),typeof n=="string"&&(l.crossOrigin=n),()=>{l.removeEventListener("load",f),l.removeEventListener("error",v)}},[l,n,t]),d}var k2=y2,C2=j2,S2=N2;const Yr=p.forwardRef(({className:s,...t},n)=>e.jsx(k2,{ref:n,className:ze(`
      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10
      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,s),...t}));Yr.displayName=k2.displayName;const ja=p.forwardRef(({className:s,...t},n)=>e.jsx(C2,{ref:n,className:ze("aspect-square h-full w-full",s),...t}));ja.displayName=C2.displayName;const Xr=p.forwardRef(({className:s,...t},n)=>e.jsx(S2,{ref:n,className:ze("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...t}));Xr.displayName=S2.displayName;async function OR(){const s=await fetch("/api/auth/user",{credentials:"include"});if(s.status===401)return null;if(!s.ok)throw new Error(`${s.status}: ${s.statusText}`);return s.json()}async function LR(){window.location.href="/api/logout"}function E2(){const s=rg(),{data:t,isLoading:n}=_e({queryKey:["/api/auth/user"],queryFn:OR,retry:!1,staleTime:1e3*60*5}),r=we({mutationFn:LR,onSuccess:()=>{s.setQueryData(["/api/auth/user"],null)}});return{user:t,isLoading:n,isAuthenticated:!!t,logout:r.mutate,isLoggingOut:r.isPending}}const ce=p.forwardRef(({className:s,...t},n)=>e.jsx("div",{ref:n,className:ze("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",s),...t}));ce.displayName="Card";const ed=p.forwardRef(({className:s,...t},n)=>e.jsx("div",{ref:n,className:ze("flex flex-col space-y-1.5 p-6",s),...t}));ed.displayName="CardHeader";const td=p.forwardRef(({className:s,...t},n)=>e.jsx("div",{ref:n,className:ze("text-2xl font-semibold leading-none tracking-tight",s),...t}));td.displayName="CardTitle";const rm=p.forwardRef(({className:s,...t},n)=>e.jsx("div",{ref:n,className:ze("text-sm text-muted-foreground",s),...t}));rm.displayName="CardDescription";const tn=p.forwardRef(({className:s,...t},n)=>e.jsx("div",{ref:n,className:ze("p-6 pt-0",s),...t}));tn.displayName="CardContent";const MR=p.forwardRef(({className:s,...t},n)=>e.jsx("div",{ref:n,className:ze("flex items-center p-6 pt-0",s),...t}));MR.displayName="CardFooter";function T2(){return e.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:e.jsx(ce,{className:"w-full max-w-md mx-4",children:e.jsxs(tn,{className:"pt-6",children:[e.jsxs("div",{className:"flex mb-4 gap-2",children:[e.jsx(Jc,{className:"h-8 w-8 text-red-500"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),e.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}const DR=Vl("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function Ce({className:s,variant:t,...n}){return e.jsx("div",{className:ze(DR({variant:t}),s),...n})}function Mu({title:s,value:t,subtitle:n,icon:r,trend:o,testId:l}){return e.jsx(ce,{className:"p-5","data-testid":l,children:e.jsxs("div",{className:"flex items-start justify-between gap-3 flex-wrap",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:s}),e.jsx("p",{className:"text-2xl font-semibold mt-1 tracking-tight","data-testid":l?`${l}-value`:void 0,children:t}),n&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:n}),o&&e.jsxs("p",{className:`text-xs mt-1 font-medium ${o.positive?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"}`,children:[o.positive?"+":"",o.value]})]}),e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-md bg-primary/10 shrink-0",children:e.jsx(r,{className:"w-5 h-5 text-primary"})})]})})}function Fe(s,t="USD"){return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(s/100)}function qs(s){return s?new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(new Date(s)):""}function Jn(s){switch(s.toLowerCase()){case"active":case"paid":case"finalized":case"resolved":case"closed":return"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400";case"pending":case"draft":case"in_progress":return"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400";case"open":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400";case"overdue":case"failed":case"canceled":case"cancelled":case"urgent":return"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400";case"high":return"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400";case"medium":return"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400";case"low":return"bg-gray-100 text-gray-600 dark:bg-gray-800/30 dark:text-gray-400";case"voided":return"bg-gray-100 text-gray-600 dark:bg-gray-800/30 dark:text-gray-400";default:return"bg-gray-100 text-gray-600 dark:bg-gray-800/30 dark:text-gray-400"}}function Un(s){p.useEffect(()=>{document.title=`${s} | Billing Hub`},[s])}function $R(){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(ye,{className:"h-8 w-48 mb-1"}),e.jsx(ye,{className:"h-4 w-72"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:Array.from({length:4}).map((s,t)=>e.jsxs(ce,{className:"p-5",children:[e.jsx(ye,{className:"h-4 w-24 mb-3"}),e.jsx(ye,{className:"h-8 w-32 mb-2"}),e.jsx(ye,{className:"h-3 w-20"})]},t))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs(ce,{className:"p-5",children:[e.jsx(ye,{className:"h-6 w-36 mb-4"}),e.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((s,t)=>e.jsx(ye,{className:"h-12 w-full"},t))})]}),e.jsxs(ce,{className:"p-5",children:[e.jsx(ye,{className:"h-6 w-36 mb-4"}),e.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((s,t)=>e.jsx(ye,{className:"h-12 w-full"},t))})]})]})]})}function qR(){const{data:s,isLoading:t}=_e({queryKey:["/api/dashboard/stats"]}),{data:n,isLoading:r}=_e({queryKey:["/api/invoices?limit=5"]}),{data:o,isLoading:l}=_e({queryKey:["/api/projects"]}),{data:d}=_e({queryKey:["/api/customers"]}),{data:u}=_e({queryKey:["/api/work-entries"]}),{data:h}=_e({queryKey:["/api/billing-rates"]}),{data:f}=_e({queryKey:["/api/agent-costs/summary"]}),v=t||r||l;if(Un("Overview"),v)return e.jsx($R,{});const x=new Map(d?.map(b=>[b.id,b])??[]),g=new Map(h?.map(b=>[b.id,b])??[]),j=o?.filter(b=>b.status==="active")??[],N=u?.slice(0,8)??[];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight","data-testid":"text-page-title",children:"Overview"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Your billing dashboard at a glance"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(Mu,{title:"Total Revenue",value:Fe(s?.totalRevenue??0),icon:rr,subtitle:"From paid invoices",testId:"stat-revenue"}),e.jsx(Mu,{title:"Active Projects",value:String(s?.activeProjects??0),icon:qn,subtitle:"Currently in progress",testId:"stat-projects"}),e.jsx(Mu,{title:"Pending Invoices",value:String(s?.pendingInvoices??0),icon:Gt,subtitle:"Awaiting payment",testId:"stat-invoices"}),e.jsx(Mu,{title:s?.overdueInvoices?"Overdue":"Unbilled Work",value:s?.overdueInvoices?String(s.overdueInvoices):Fe(s?.unbilledWork??0),icon:s?.overdueInvoices?Fn:Wt,subtitle:s?.overdueInvoices?"Past due date":"Ready to invoice",testId:"stat-overdue"})]}),(s?.overdueInvoices??0)>0&&e.jsx(ce,{className:"p-4 border-red-200 dark:border-red-900/50 bg-red-50 dark:bg-red-950/20","data-testid":"alert-overdue",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Fn,{className:"w-5 h-5 text-red-600 dark:text-red-400 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-red-700 dark:text-red-400",children:[s.overdueInvoices," overdue invoice",s.overdueInvoices>1?"s":""," need",s.overdueInvoices===1?"s":""," attention"]}),e.jsx("p",{className:"text-xs text-red-600/80 dark:text-red-400/80 mt-0.5",children:"These invoices are past their due date. Follow up with your clients to collect payment."})]})]})}),e.jsx(ce,{className:"p-4 border-primary/20 bg-primary/5 dark:bg-primary/10","data-testid":"card-agent-cost-reminder",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(id,{className:"w-5 h-5 text-primary shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium",children:"Did an AI agent do work recently? Don't forget to log the cost!"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:f&&f.unbilledCount>0?`You have ${f.unbilledCount} unbilled entr${f.unbilledCount===1?"y":"ies"} worth ${Fe(f.unbilledChargeCents)} ready to invoice.`:"Track what the agents built so you can bill your clients accurately."})]}),e.jsx(Ha,{href:"/billing-rates",children:e.jsxs(L,{variant:"outline","data-testid":"button-go-to-agent-costs",children:["Log Costs",e.jsx(Cl,{className:"w-4 h-4 ml-2"})]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs(ce,{className:"p-5",children:[e.jsx("h2",{className:"text-base font-semibold mb-4","data-testid":"text-recent-invoices-title",children:"Recent Invoices"}),e.jsx("div",{className:"space-y-3",children:n&&n.length>0?n.slice(0,5).map(b=>{const k=x.get(b.customerId);return e.jsxs("div",{className:"flex items-center justify-between gap-3 py-2 border-b last:border-b-0","data-testid":`row-invoice-${b.id}`,children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:b.invoiceNumber}),e.jsx("p",{className:"text-xs text-muted-foreground",children:k?.company||k?.name||""})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsx("span",{className:"text-sm font-medium",children:Fe(b.totalAmountCents,b.currency??"USD")}),e.jsx(Ce,{variant:"secondary",className:`text-xs ${Jn(b.status)}`,children:b.status})]})]},b.id)}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No invoices yet"})})]}),e.jsxs(ce,{className:"p-5",children:[e.jsx("h2",{className:"text-base font-semibold mb-4","data-testid":"text-active-projects-title",children:"Active Projects"}),e.jsx("div",{className:"space-y-3",children:j.length>0?j.slice(0,5).map(b=>{const k=x.get(b.customerId),E=u?.filter(T=>T.projectId===b.id&&!T.invoiceId).length??0,S=u?.filter(T=>T.projectId===b.id&&!T.invoiceId).reduce((T,P)=>T+Number(P.quantity)*(g.get(P.rateId)?.rateCents??0),0)??0;return e.jsxs("div",{className:"flex items-center justify-between gap-3 py-2 border-b last:border-b-0","data-testid":`row-project-${b.id}`,children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:b.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:k?.company||k?.name||""})]}),e.jsx("div",{className:"text-right shrink-0",children:E>0?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm font-medium",children:Fe(S)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[E," unbilled"]})]}):e.jsx("p",{className:"text-xs text-muted-foreground",children:"All billed"})})]},b.id)}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No active projects"})})]})]}),e.jsxs(ce,{className:"p-5",children:[e.jsx("h2",{className:"text-base font-semibold mb-4","data-testid":"text-recent-work-title",children:"Recent Work Entries"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-2 pr-4 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Work Type"}),e.jsx("th",{className:"text-left py-2 pr-4 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Project"}),e.jsx("th",{className:"text-left py-2 pr-4 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"text-right py-2 pr-4 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Qty"}),e.jsx("th",{className:"text-right py-2 pr-4 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"text-left py-2 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{children:N.length>0?N.map(b=>{const k=g.get(b.rateId),E=o?.find(T=>T.id===b.projectId),S=Number(b.quantity)*(k?.rateCents??0);return e.jsxs("tr",{className:"border-b last:border-b-0","data-testid":`row-work-${b.id}`,children:[e.jsx("td",{className:"py-3 pr-4 font-medium",children:k?.name??""}),e.jsx("td",{className:"py-3 pr-4 text-muted-foreground",children:E?.name??""}),e.jsx("td",{className:"py-3 pr-4 text-muted-foreground max-w-[200px] truncate",children:b.description||""}),e.jsx("td",{className:"py-3 pr-4 text-right",children:Number(b.quantity)}),e.jsx("td",{className:"py-3 pr-4 text-right font-medium",children:Fe(S)}),e.jsx("td",{className:"py-3",children:e.jsx(Ce,{variant:"secondary",className:`text-xs ${b.invoiceId?Jn("paid"):Jn("pending")}`,children:b.invoiceId?"Billed":"Unbilled"})})]},b.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"py-8 text-center text-muted-foreground",children:"No work entries yet"})})})]})})]})]})}var FR="Label",A2=p.forwardRef((s,t)=>e.jsx(lt.label,{...s,ref:t,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(s.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));A2.displayName=FR;var P2=A2;const zR=Vl("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),De=p.forwardRef(({className:s,...t},n)=>e.jsx(P2,{ref:n,className:ze(zR(),s),...t}));De.displayName=P2.displayName;const fs=p.forwardRef(({className:s,...t},n)=>e.jsx("textarea",{className:ze("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:n,...t}));fs.displayName="Textarea";const yt=i2,UR=o2,R2=p.forwardRef(({className:s,...t},n)=>e.jsx(ah,{ref:n,className:ze("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t}));R2.displayName=ah.displayName;const xt=p.forwardRef(({className:s,children:t,...n},r)=>e.jsxs(UR,{children:[e.jsx(R2,{}),e.jsxs(ih,{ref:r,className:ze("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...n,children:[t,e.jsxs(l2,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(zn,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));xt.displayName=ih.displayName;const gt=({className:s,...t})=>e.jsx("div",{className:ze("flex flex-col space-y-1.5 text-center sm:text-left",s),...t});gt.displayName="DialogHeader";const Ba=({className:s,...t})=>e.jsx("div",{className:ze("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});Ba.displayName="DialogFooter";const vt=p.forwardRef(({className:s,...t},n)=>e.jsx(oh,{ref:n,className:ze("text-lg font-semibold leading-none tracking-tight",s),...t}));vt.displayName=oh.displayName;const $i=p.forwardRef(({className:s,...t},n)=>e.jsx(lh,{ref:n,className:ze("text-sm text-muted-foreground",s),...t}));$i.displayName=lh.displayName;function BR(){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsx(ye,{className:"h-8 w-32 mb-1"}),e.jsx(ye,{className:"h-4 w-56"})]}),e.jsx(ye,{className:"h-9 w-36"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from({length:3}).map((s,t)=>e.jsxs(ce,{className:"p-5",children:[e.jsx(ye,{className:"h-6 w-40 mb-3"}),e.jsx(ye,{className:"h-4 w-32 mb-2"}),e.jsx(ye,{className:"h-4 w-48"})]},t))})]})}function HR(){Un("Customers");const{toast:s}=mt(),[t,n]=p.useState(""),[r,o]=p.useState(!1),[l,d]=p.useState(null),[u,h]=p.useState({name:"",email:"",company:"",phone:"",notes:""}),{data:f,isLoading:v}=_e({queryKey:["/api/customers"]}),x=we({mutationFn:async P=>(await je("POST","/api/customers",P)).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/customers"]}),xe.invalidateQueries({queryKey:["/api/dashboard/stats"]}),o(!1),b(),s({title:"Customer created",description:"New customer has been added."})},onError:P=>{s({title:"Error",description:P.message,variant:"destructive"})}}),g=we({mutationFn:async({id:P,data:H})=>(await je("PATCH",`/api/customers/${P}`,H)).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/customers"]}),o(!1),d(null),b(),s({title:"Customer updated",description:"Customer details have been saved."})},onError:P=>{s({title:"Error",description:P.message,variant:"destructive"})}}),j=we({mutationFn:async P=>{await je("DELETE",`/api/customers/${P}`)},onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/customers"]}),xe.invalidateQueries({queryKey:["/api/dashboard/stats"]}),s({title:"Customer deleted",description:"Customer has been removed."})},onError:P=>{s({title:"Error",description:P.message,variant:"destructive"})}}),N=we({mutationFn:async P=>(await je("POST",`/api/customers/${P}/send-portal-link`)).json(),onSuccess:()=>{s({title:"Email sent",description:"Portal access link has been emailed to the customer."})},onError:P=>{s({title:"Error",description:P.message,variant:"destructive"})}}),b=()=>h({name:"",email:"",company:"",phone:"",notes:""}),k=()=>{b(),d(null),o(!0)},E=P=>{d(P),h({name:P.name,email:P.email,company:P.company??"",phone:P.phone??"",notes:P.notes??""}),o(!0)},S=P=>{P.preventDefault(),l?g.mutate({id:l.id,data:u}):x.mutate(u)};if(v)return e.jsx(BR,{});const T=f?.filter(P=>P.name.toLowerCase().includes(t.toLowerCase())||P.email.toLowerCase().includes(t.toLowerCase())||(P.company??"").toLowerCase().includes(t.toLowerCase()))??[];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight","data-testid":"text-page-title",children:"Customers"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage your clients and their projects"})]}),e.jsxs(L,{onClick:k,"data-testid":"button-add-customer",children:[e.jsx(Qt,{className:"w-4 h-4 mr-2"}),"Add Customer"]})]}),e.jsxs("div",{className:"relative max-w-sm",children:[e.jsx(sn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(Oe,{placeholder:"Search customers...",value:t,onChange:P=>n(P.target.value),className:"pl-9","data-testid":"input-search-customers"})]}),T.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:T.map(P=>e.jsxs(ce,{className:"p-5","data-testid":`card-customer-${P.id}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"font-semibold truncate","data-testid":`text-customer-name-${P.id}`,children:P.name}),P.company&&e.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-muted-foreground mt-0.5",children:[e.jsx(Sl,{className:"w-3.5 h-3.5 shrink-0"}),e.jsx("span",{className:"truncate",children:P.company})]})]}),e.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[e.jsx(L,{size:"icon",variant:"ghost",onClick:()=>E(P),"data-testid":`button-edit-customer-${P.id}`,children:e.jsx(kr,{className:"w-4 h-4"})}),e.jsx(L,{size:"icon",variant:"ghost",onClick:()=>j.mutate(P.id),"data-testid":`button-delete-customer-${P.id}`,children:e.jsx(ls,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-1.5 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(hs,{className:"w-3.5 h-3.5 shrink-0"}),e.jsx("span",{className:"truncate",children:P.email})]}),P.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(ld,{className:"w-3.5 h-3.5 shrink-0"}),e.jsx("span",{children:P.phone})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t flex items-center justify-between gap-2 flex-wrap",children:[e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Added ",qs(P.createdAt)]}),P.portalToken&&e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs(L,{size:"sm",variant:"outline",onClick:()=>{const H=`${window.location.origin}/portal/${P.portalToken}`;navigator.clipboard.writeText(H),s({title:"Link copied",description:"Client portal link copied to clipboard."})},"data-testid":`button-copy-portal-${P.id}`,children:[e.jsx(fn,{className:"w-3 h-3 mr-1"}),"Copy Link"]}),e.jsxs(L,{size:"sm",variant:"outline",onClick:()=>N.mutate(P.id),disabled:N.isPending,"data-testid":`button-send-portal-${P.id}`,children:[e.jsx(os,{className:"w-3 h-3 mr-1"}),N.isPending?"Sending...":"Email Link"]})]})]})]},P.id))}):e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(Vr,{className:"w-10 h-10 text-muted-foreground mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t?"No customers match your search":"No customers yet. Add your first client to get started."})]}),e.jsx(yt,{open:r,onOpenChange:o,children:e.jsxs(xt,{children:[e.jsx(gt,{children:e.jsx(vt,{children:l?"Edit Customer":"Add Customer"})}),e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"name",children:"Name *"}),e.jsx(Oe,{id:"name",value:u.name,onChange:P=>h(H=>({...H,name:P.target.value})),required:!0,"data-testid":"input-customer-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"email",children:"Email *"}),e.jsx(Oe,{id:"email",type:"email",value:u.email,onChange:P=>h(H=>({...H,email:P.target.value})),required:!0,"data-testid":"input-customer-email"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"company",children:"Company"}),e.jsx(Oe,{id:"company",value:u.company,onChange:P=>h(H=>({...H,company:P.target.value})),"data-testid":"input-customer-company"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"phone",children:"Phone"}),e.jsx(Oe,{id:"phone",value:u.phone,onChange:P=>h(H=>({...H,phone:P.target.value})),"data-testid":"input-customer-phone"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"notes",children:"Notes"}),e.jsx(fs,{id:"notes",value:u.notes,onChange:P=>h(H=>({...H,notes:P.target.value})),"data-testid":"input-customer-notes"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(L,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(L,{type:"submit",disabled:x.isPending||g.isPending,"data-testid":"button-save-customer",children:x.isPending||g.isPending?"Saving...":l?"Save Changes":"Add Customer"})]})]})]})})]})}function Yb(s,[t,n]){return Math.min(n,Math.max(t,s))}var KR=p.createContext(void 0);function ch(s){const t=p.useContext(KR);return s||t||"ltr"}function _2(s){const t=p.useRef({value:s,previous:s});return p.useMemo(()=>(t.current.value!==s&&(t.current.previous=t.current.value,t.current.value=s),t.current.previous),[s])}var WR=[" ","Enter","ArrowUp","ArrowDown"],VR=[" ","Enter"],Cd="Select",[dh,uh,GR]=qm(Cd),[Jl]=Jr(Cd,[GR,Zl]),mh=Zl(),[QR,zi]=Jl(Cd),[YR,XR]=Jl(Cd),I2=s=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:o,onOpenChange:l,value:d,defaultValue:u,onValueChange:h,dir:f,name:v,autoComplete:x,disabled:g,required:j,form:N}=s,b=mh(t),[k,E]=p.useState(null),[S,T]=p.useState(null),[P,H]=p.useState(!1),re=ch(f),[B=!1,Q]=Ka({prop:r,defaultProp:o,onChange:l}),[G,ue]=Ka({prop:d,defaultProp:u,onChange:h}),_=p.useRef(null),Y=k?N||!!k.closest("form"):!0,[z,J]=p.useState(new Set),X=Array.from(z).map($=>$.props.value).join(";");return e.jsx(Rg,{...b,children:e.jsxs(QR,{required:j,scope:t,trigger:k,onTriggerChange:E,valueNode:S,onValueNodeChange:T,valueNodeHasChildren:P,onValueNodeHasChildrenChange:H,contentId:Kr(),value:G,onValueChange:ue,open:B,onOpenChange:Q,dir:re,triggerPointerDownPosRef:_,disabled:g,children:[e.jsx(dh.Provider,{scope:t,children:e.jsx(YR,{scope:s.__scopeSelect,onNativeOptionAdd:p.useCallback($=>{J(I=>new Set(I).add($))},[]),onNativeOptionRemove:p.useCallback($=>{J(I=>{const A=new Set(I);return A.delete($),A})},[]),children:n})}),Y?e.jsxs(rk,{"aria-hidden":!0,required:j,tabIndex:-1,name:v,autoComplete:x,value:G,onChange:$=>ue($.target.value),disabled:g,form:N,children:[G===void 0?e.jsx("option",{value:""}):null,Array.from(z)]},X):null]})})};I2.displayName=Cd;var O2="SelectTrigger",L2=p.forwardRef((s,t)=>{const{__scopeSelect:n,disabled:r=!1,...o}=s,l=mh(n),d=zi(O2,n),u=d.disabled||r,h=qt(t,d.onTriggerChange),f=uh(n),v=p.useRef("touch"),[x,g,j]=ak(b=>{const k=f().filter(T=>!T.disabled),E=k.find(T=>T.value===d.value),S=ik(k,b,E);S!==void 0&&d.onValueChange(S.value)}),N=b=>{u||(d.onOpenChange(!0),j()),b&&(d.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)})};return e.jsx(_g,{asChild:!0,...l,children:e.jsx(lt.button,{type:"button",role:"combobox","aria-controls":d.contentId,"aria-expanded":d.open,"aria-required":d.required,"aria-autocomplete":"none",dir:d.dir,"data-state":d.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":nk(d.value)?"":void 0,...o,ref:h,onClick:Me(o.onClick,b=>{b.currentTarget.focus(),v.current!=="mouse"&&N(b)}),onPointerDown:Me(o.onPointerDown,b=>{v.current=b.pointerType;const k=b.target;k.hasPointerCapture(b.pointerId)&&k.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&b.pointerType==="mouse"&&(N(b),b.preventDefault())}),onKeyDown:Me(o.onKeyDown,b=>{const k=x.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&g(b.key),!(k&&b.key===" ")&&WR.includes(b.key)&&(N(),b.preventDefault())})})})});L2.displayName=O2;var M2="SelectValue",D2=p.forwardRef((s,t)=>{const{__scopeSelect:n,className:r,style:o,children:l,placeholder:d="",...u}=s,h=zi(M2,n),{onValueNodeHasChildrenChange:f}=h,v=l!==void 0,x=qt(t,h.onValueNodeChange);return zs(()=>{f(v)},[f,v]),e.jsx(lt.span,{...u,ref:x,style:{pointerEvents:"none"},children:nk(h.value)?e.jsx(e.Fragment,{children:d}):l})});D2.displayName=M2;var ZR="SelectIcon",$2=p.forwardRef((s,t)=>{const{__scopeSelect:n,children:r,...o}=s;return e.jsx(lt.span,{"aria-hidden":!0,...o,ref:t,children:r||""})});$2.displayName=ZR;var JR="SelectPortal",q2=s=>e.jsx(jd,{asChild:!0,...s});q2.displayName=JR;var Co="SelectContent",F2=p.forwardRef((s,t)=>{const n=zi(Co,s.__scopeSelect),[r,o]=p.useState();if(zs(()=>{o(new DocumentFragment)},[]),!n.open){const l=r;return l?Kl.createPortal(e.jsx(z2,{scope:s.__scopeSelect,children:e.jsx(dh.Slot,{scope:s.__scopeSelect,children:e.jsx("div",{children:s.children})})}),l):null}return e.jsx(U2,{...s,ref:t})});F2.displayName=Co;var Dr=10,[z2,Ui]=Jl(Co),e_="SelectContentImpl",t_=yo("SelectContent.RemoveScroll"),U2=p.forwardRef((s,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:l,onPointerDownOutside:d,side:u,sideOffset:h,align:f,alignOffset:v,arrowPadding:x,collisionBoundary:g,collisionPadding:j,sticky:N,hideWhenDetached:b,avoidCollisions:k,...E}=s,S=zi(Co,n),[T,P]=p.useState(null),[H,re]=p.useState(null),B=qt(t,ie=>P(ie)),[Q,G]=p.useState(null),[ue,_]=p.useState(null),Y=uh(n),[z,J]=p.useState(!1),X=p.useRef(!1);p.useEffect(()=>{if(T)return Dg(T)},[T]),Mg();const $=p.useCallback(ie=>{const[fe,...Ee]=Y().map($e=>$e.ref.current),[Ne]=Ee.slice(-1),Pe=document.activeElement;for(const $e of ie)if($e===Pe||($e?.scrollIntoView({block:"nearest"}),$e===fe&&H&&(H.scrollTop=0),$e===Ne&&H&&(H.scrollTop=H.scrollHeight),$e?.focus(),document.activeElement!==Pe))return},[Y,H]),I=p.useCallback(()=>$([Q,T]),[$,Q,T]);p.useEffect(()=>{z&&I()},[z,I]);const{onOpenChange:A,triggerPointerDownPosRef:W}=S;p.useEffect(()=>{if(T){let ie={x:0,y:0};const fe=Ne=>{ie={x:Math.abs(Math.round(Ne.pageX)-(W.current?.x??0)),y:Math.abs(Math.round(Ne.pageY)-(W.current?.y??0))}},Ee=Ne=>{ie.x<=10&&ie.y<=10?Ne.preventDefault():T.contains(Ne.target)||A(!1),document.removeEventListener("pointermove",fe),W.current=null};return W.current!==null&&(document.addEventListener("pointermove",fe),document.addEventListener("pointerup",Ee,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",fe),document.removeEventListener("pointerup",Ee,{capture:!0})}}},[T,A,W]),p.useEffect(()=>{const ie=()=>A(!1);return window.addEventListener("blur",ie),window.addEventListener("resize",ie),()=>{window.removeEventListener("blur",ie),window.removeEventListener("resize",ie)}},[A]);const[Z,q]=ak(ie=>{const fe=Y().filter(Pe=>!Pe.disabled),Ee=fe.find(Pe=>Pe.ref.current===document.activeElement),Ne=ik(fe,ie,Ee);Ne&&setTimeout(()=>Ne.ref.current.focus())}),ne=p.useCallback((ie,fe,Ee)=>{const Ne=!X.current&&!Ee;(S.value!==void 0&&S.value===fe||Ne)&&(G(ie),Ne&&(X.current=!0))},[S.value]),K=p.useCallback(()=>T?.focus(),[T]),U=p.useCallback((ie,fe,Ee)=>{const Ne=!X.current&&!Ee;(S.value!==void 0&&S.value===fe||Ne)&&_(ie)},[S.value]),M=r==="popper"?gx:B2,F=M===gx?{side:u,sideOffset:h,align:f,alignOffset:v,arrowPadding:x,collisionBoundary:g,collisionPadding:j,sticky:N,hideWhenDetached:b,avoidCollisions:k}:{};return e.jsx(z2,{scope:n,content:T,viewport:H,onViewportChange:re,itemRefCallback:ne,selectedItem:Q,onItemLeave:K,itemTextRefCallback:U,focusSelectedItem:I,selectedItemText:ue,position:r,isPositioned:z,searchRef:Z,children:e.jsx(rh,{as:t_,allowPinchZoom:!0,children:e.jsx(sh,{asChild:!0,trapped:S.open,onMountAutoFocus:ie=>{ie.preventDefault()},onUnmountAutoFocus:Me(o,ie=>{S.trigger?.focus({preventScroll:!0}),ie.preventDefault()}),children:e.jsx(Wl,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:ie=>ie.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:e.jsx(M,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:ie=>ie.preventDefault(),...E,...F,onPlaced:()=>J(!0),ref:B,style:{display:"flex",flexDirection:"column",outline:"none",...E.style},onKeyDown:Me(E.onKeyDown,ie=>{const fe=ie.ctrlKey||ie.altKey||ie.metaKey;if(ie.key==="Tab"&&ie.preventDefault(),!fe&&ie.key.length===1&&q(ie.key),["ArrowUp","ArrowDown","Home","End"].includes(ie.key)){let Ne=Y().filter(Pe=>!Pe.disabled).map(Pe=>Pe.ref.current);if(["ArrowUp","End"].includes(ie.key)&&(Ne=Ne.slice().reverse()),["ArrowUp","ArrowDown"].includes(ie.key)){const Pe=ie.target,$e=Ne.indexOf(Pe);Ne=Ne.slice($e+1)}setTimeout(()=>$(Ne)),ie.preventDefault()}})})})})})})});U2.displayName=e_;var s_="SelectItemAlignedPosition",B2=p.forwardRef((s,t)=>{const{__scopeSelect:n,onPlaced:r,...o}=s,l=zi(Co,n),d=Ui(Co,n),[u,h]=p.useState(null),[f,v]=p.useState(null),x=qt(t,B=>v(B)),g=uh(n),j=p.useRef(!1),N=p.useRef(!0),{viewport:b,selectedItem:k,selectedItemText:E,focusSelectedItem:S}=d,T=p.useCallback(()=>{if(l.trigger&&l.valueNode&&u&&f&&b&&k&&E){const B=l.trigger.getBoundingClientRect(),Q=f.getBoundingClientRect(),G=l.valueNode.getBoundingClientRect(),ue=E.getBoundingClientRect();if(l.dir!=="rtl"){const Pe=ue.left-Q.left,$e=G.left-Pe,Ue=B.left-$e,et=B.width+Ue,ct=Math.max(et,Q.width),Bt=window.innerWidth-Dr,Yt=Yb($e,[Dr,Math.max(Dr,Bt-ct)]);u.style.minWidth=et+"px",u.style.left=Yt+"px"}else{const Pe=Q.right-ue.right,$e=window.innerWidth-G.right-Pe,Ue=window.innerWidth-B.right-$e,et=B.width+Ue,ct=Math.max(et,Q.width),Bt=window.innerWidth-Dr,Yt=Yb($e,[Dr,Math.max(Dr,Bt-ct)]);u.style.minWidth=et+"px",u.style.right=Yt+"px"}const _=g(),Y=window.innerHeight-Dr*2,z=b.scrollHeight,J=window.getComputedStyle(f),X=parseInt(J.borderTopWidth,10),$=parseInt(J.paddingTop,10),I=parseInt(J.borderBottomWidth,10),A=parseInt(J.paddingBottom,10),W=X+$+z+A+I,Z=Math.min(k.offsetHeight*5,W),q=window.getComputedStyle(b),ne=parseInt(q.paddingTop,10),K=parseInt(q.paddingBottom,10),U=B.top+B.height/2-Dr,M=Y-U,F=k.offsetHeight/2,ie=k.offsetTop+F,fe=X+$+ie,Ee=W-fe;if(fe<=U){const Pe=_.length>0&&k===_[_.length-1].ref.current;u.style.bottom="0px";const $e=f.clientHeight-b.offsetTop-b.offsetHeight,Ue=Math.max(M,F+(Pe?K:0)+$e+I),et=fe+Ue;u.style.height=et+"px"}else{const Pe=_.length>0&&k===_[0].ref.current;u.style.top="0px";const Ue=Math.max(U,X+b.offsetTop+(Pe?ne:0)+F)+Ee;u.style.height=Ue+"px",b.scrollTop=fe-U+b.offsetTop}u.style.margin=`${Dr}px 0`,u.style.minHeight=Z+"px",u.style.maxHeight=Y+"px",r?.(),requestAnimationFrame(()=>j.current=!0)}},[g,l.trigger,l.valueNode,u,f,b,k,E,l.dir,r]);zs(()=>T(),[T]);const[P,H]=p.useState();zs(()=>{f&&H(window.getComputedStyle(f).zIndex)},[f]);const re=p.useCallback(B=>{B&&N.current===!0&&(T(),S?.(),N.current=!1)},[T,S]);return e.jsx(r_,{scope:n,contentWrapper:u,shouldExpandOnScrollRef:j,onScrollButtonChange:re,children:e.jsx("div",{ref:h,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:P},children:e.jsx(lt.div,{...o,ref:x,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});B2.displayName=s_;var n_="SelectPopperPosition",gx=p.forwardRef((s,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:o=Dr,...l}=s,d=mh(n);return e.jsx(Ig,{...d,...l,ref:t,align:r,collisionPadding:o,style:{boxSizing:"border-box",...l.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});gx.displayName=n_;var[r_,Kg]=Jl(Co,{}),vx="SelectViewport",H2=p.forwardRef((s,t)=>{const{__scopeSelect:n,nonce:r,...o}=s,l=Ui(vx,n),d=Kg(vx,n),u=qt(t,l.onViewportChange),h=p.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),e.jsx(dh.Slot,{scope:n,children:e.jsx(lt.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:u,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:Me(o.onScroll,f=>{const v=f.currentTarget,{contentWrapper:x,shouldExpandOnScrollRef:g}=d;if(g?.current&&x){const j=Math.abs(h.current-v.scrollTop);if(j>0){const N=window.innerHeight-Dr*2,b=parseFloat(x.style.minHeight),k=parseFloat(x.style.height),E=Math.max(b,k);if(E<N){const S=E+j,T=Math.min(N,S),P=S-T;x.style.height=T+"px",x.style.bottom==="0px"&&(v.scrollTop=P>0?P:0,x.style.justifyContent="flex-end")}}}h.current=v.scrollTop})})})]})});H2.displayName=vx;var K2="SelectGroup",[a_,i_]=Jl(K2),o_=p.forwardRef((s,t)=>{const{__scopeSelect:n,...r}=s,o=Kr();return e.jsx(a_,{scope:n,id:o,children:e.jsx(lt.div,{role:"group","aria-labelledby":o,...r,ref:t})})});o_.displayName=K2;var W2="SelectLabel",V2=p.forwardRef((s,t)=>{const{__scopeSelect:n,...r}=s,o=i_(W2,n);return e.jsx(lt.div,{id:o.id,...r,ref:t})});V2.displayName=W2;var km="SelectItem",[l_,G2]=Jl(km),Q2=p.forwardRef((s,t)=>{const{__scopeSelect:n,value:r,disabled:o=!1,textValue:l,...d}=s,u=zi(km,n),h=Ui(km,n),f=u.value===r,[v,x]=p.useState(l??""),[g,j]=p.useState(!1),N=qt(t,S=>h.itemRefCallback?.(S,r,o)),b=Kr(),k=p.useRef("touch"),E=()=>{o||(u.onValueChange(r),u.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(l_,{scope:n,value:r,disabled:o,textId:b,isSelected:f,onItemTextChange:p.useCallback(S=>{x(T=>T||(S?.textContent??"").trim())},[]),children:e.jsx(dh.ItemSlot,{scope:n,value:r,disabled:o,textValue:v,children:e.jsx(lt.div,{role:"option","aria-labelledby":b,"data-highlighted":g?"":void 0,"aria-selected":f&&g,"data-state":f?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...d,ref:N,onFocus:Me(d.onFocus,()=>j(!0)),onBlur:Me(d.onBlur,()=>j(!1)),onClick:Me(d.onClick,()=>{k.current!=="mouse"&&E()}),onPointerUp:Me(d.onPointerUp,()=>{k.current==="mouse"&&E()}),onPointerDown:Me(d.onPointerDown,S=>{k.current=S.pointerType}),onPointerMove:Me(d.onPointerMove,S=>{k.current=S.pointerType,o?h.onItemLeave?.():k.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Me(d.onPointerLeave,S=>{S.currentTarget===document.activeElement&&h.onItemLeave?.()}),onKeyDown:Me(d.onKeyDown,S=>{h.searchRef?.current!==""&&S.key===" "||(VR.includes(S.key)&&E(),S.key===" "&&S.preventDefault())})})})})});Q2.displayName=km;var Kc="SelectItemText",Y2=p.forwardRef((s,t)=>{const{__scopeSelect:n,className:r,style:o,...l}=s,d=zi(Kc,n),u=Ui(Kc,n),h=G2(Kc,n),f=XR(Kc,n),[v,x]=p.useState(null),g=qt(t,E=>x(E),h.onItemTextChange,E=>u.itemTextRefCallback?.(E,h.value,h.disabled)),j=v?.textContent,N=p.useMemo(()=>e.jsx("option",{value:h.value,disabled:h.disabled,children:j},h.value),[h.disabled,h.value,j]),{onNativeOptionAdd:b,onNativeOptionRemove:k}=f;return zs(()=>(b(N),()=>k(N)),[b,k,N]),e.jsxs(e.Fragment,{children:[e.jsx(lt.span,{id:h.textId,...l,ref:g}),h.isSelected&&d.valueNode&&!d.valueNodeHasChildren?Kl.createPortal(l.children,d.valueNode):null]})});Y2.displayName=Kc;var X2="SelectItemIndicator",Z2=p.forwardRef((s,t)=>{const{__scopeSelect:n,...r}=s;return G2(X2,n).isSelected?e.jsx(lt.span,{"aria-hidden":!0,...r,ref:t}):null});Z2.displayName=X2;var yx="SelectScrollUpButton",J2=p.forwardRef((s,t)=>{const n=Ui(yx,s.__scopeSelect),r=Kg(yx,s.__scopeSelect),[o,l]=p.useState(!1),d=qt(t,r.onScrollButtonChange);return zs(()=>{if(n.viewport&&n.isPositioned){let u=function(){const f=h.scrollTop>0;l(f)};const h=n.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[n.viewport,n.isPositioned]),o?e.jsx(tk,{...s,ref:d,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=n;u&&h&&(u.scrollTop=u.scrollTop-h.offsetHeight)}}):null});J2.displayName=yx;var bx="SelectScrollDownButton",ek=p.forwardRef((s,t)=>{const n=Ui(bx,s.__scopeSelect),r=Kg(bx,s.__scopeSelect),[o,l]=p.useState(!1),d=qt(t,r.onScrollButtonChange);return zs(()=>{if(n.viewport&&n.isPositioned){let u=function(){const f=h.scrollHeight-h.clientHeight,v=Math.ceil(h.scrollTop)<f;l(v)};const h=n.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[n.viewport,n.isPositioned]),o?e.jsx(tk,{...s,ref:d,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=n;u&&h&&(u.scrollTop=u.scrollTop+h.offsetHeight)}}):null});ek.displayName=bx;var tk=p.forwardRef((s,t)=>{const{__scopeSelect:n,onAutoScroll:r,...o}=s,l=Ui("SelectScrollButton",n),d=p.useRef(null),u=uh(n),h=p.useCallback(()=>{d.current!==null&&(window.clearInterval(d.current),d.current=null)},[]);return p.useEffect(()=>()=>h(),[h]),zs(()=>{u().find(v=>v.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[u]),e.jsx(lt.div,{"aria-hidden":!0,...o,ref:t,style:{flexShrink:0,...o.style},onPointerDown:Me(o.onPointerDown,()=>{d.current===null&&(d.current=window.setInterval(r,50))}),onPointerMove:Me(o.onPointerMove,()=>{l.onItemLeave?.(),d.current===null&&(d.current=window.setInterval(r,50))}),onPointerLeave:Me(o.onPointerLeave,()=>{h()})})}),c_="SelectSeparator",sk=p.forwardRef((s,t)=>{const{__scopeSelect:n,...r}=s;return e.jsx(lt.div,{"aria-hidden":!0,...r,ref:t})});sk.displayName=c_;var jx="SelectArrow",d_=p.forwardRef((s,t)=>{const{__scopeSelect:n,...r}=s,o=mh(n),l=zi(jx,n),d=Ui(jx,n);return l.open&&d.position==="popper"?e.jsx(Og,{...o,...r,ref:t}):null});d_.displayName=jx;function nk(s){return s===""||s===void 0}var rk=p.forwardRef((s,t)=>{const{value:n,...r}=s,o=p.useRef(null),l=qt(t,o),d=_2(n);return p.useEffect(()=>{const u=o.current,h=window.HTMLSelectElement.prototype,v=Object.getOwnPropertyDescriptor(h,"value").set;if(d!==n&&v){const x=new Event("change",{bubbles:!0});v.call(u,n),u.dispatchEvent(x)}},[d,n]),e.jsx(wd,{asChild:!0,children:e.jsx("select",{...r,ref:l,defaultValue:n})})});rk.displayName="BubbleSelect";function ak(s){const t=an(s),n=p.useRef(""),r=p.useRef(0),o=p.useCallback(d=>{const u=n.current+d;t(u),(function h(f){n.current=f,window.clearTimeout(r.current),f!==""&&(r.current=window.setTimeout(()=>h(""),1e3))})(u)},[t]),l=p.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,o,l]}function ik(s,t,n){const o=t.length>1&&Array.from(t).every(f=>f===t[0])?t[0]:t,l=n?s.indexOf(n):-1;let d=u_(s,Math.max(l,0));o.length===1&&(d=d.filter(f=>f!==n));const h=d.find(f=>f.textValue.toLowerCase().startsWith(o.toLowerCase()));return h!==n?h:void 0}function u_(s,t){return s.map((n,r)=>s[(t+r)%s.length])}var m_=I2,ok=L2,h_=D2,f_=$2,p_=q2,lk=F2,x_=H2,ck=V2,dk=Q2,g_=Y2,v_=Z2,uk=J2,mk=ek,hk=sk;const Dt=m_,$t=h_,It=p.forwardRef(({className:s,children:t,...n},r)=>e.jsxs(ok,{ref:r,className:ze("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...n,children:[t,e.jsx(f_,{asChild:!0,children:e.jsx(Sr,{className:"h-4 w-4 opacity-50"})})]}));It.displayName=ok.displayName;const fk=p.forwardRef(({className:s,...t},n)=>e.jsx(uk,{ref:n,className:ze("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(Io,{className:"h-4 w-4"})}));fk.displayName=uk.displayName;const pk=p.forwardRef(({className:s,...t},n)=>e.jsx(mk,{ref:n,className:ze("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(Sr,{className:"h-4 w-4"})}));pk.displayName=mk.displayName;const Ot=p.forwardRef(({className:s,children:t,position:n="popper",...r},o)=>e.jsx(p_,{children:e.jsxs(lk,{ref:o,className:ze("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:n,...r,children:[e.jsx(fk,{}),e.jsx(x_,{className:ze("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),e.jsx(pk,{})]})}));Ot.displayName=lk.displayName;const y_=p.forwardRef(({className:s,...t},n)=>e.jsx(ck,{ref:n,className:ze("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...t}));y_.displayName=ck.displayName;const Ie=p.forwardRef(({className:s,children:t,...n},r)=>e.jsxs(dk,{ref:r,className:ze("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...n,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(v_,{children:e.jsx(is,{className:"h-4 w-4"})})}),e.jsx(g_,{children:t})]}));Ie.displayName=dk.displayName;const b_=p.forwardRef(({className:s,...t},n)=>e.jsx(hk,{ref:n,className:ze("-mx-1 my-1 h-px bg-muted",s),...t}));b_.displayName=hk.displayName;function xk(s={}){const[t,n]=p.useState(!1),[r,o]=p.useState(null),[l,d]=p.useState(0),u=p.useCallback(async x=>{const g=await fetch("/api/uploads/request-url",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:x.name,size:x.size,contentType:x.type||"application/octet-stream"})});if(!g.ok){const j=await g.json().catch(()=>({}));throw new Error(j.error||"Failed to get upload URL")}return g.json()},[]),h=p.useCallback(async(x,g)=>{if(!(await fetch(g,{method:"PUT",body:x,headers:{"Content-Type":x.type||"application/octet-stream"}})).ok)throw new Error("Failed to upload file to storage")},[]),f=p.useCallback(async x=>{n(!0),o(null),d(0);try{d(10);const g=await u(x);return d(30),await h(x,g.uploadURL),d(100),s.onSuccess?.(g),g}catch(g){const j=g instanceof Error?g:new Error("Upload failed");return o(j),s.onError?.(j),null}finally{n(!1)}},[u,h,s]),v=p.useCallback(async x=>{const g=await fetch("/api/uploads/request-url",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:x.name,size:x.size,contentType:x.type||"application/octet-stream"})});if(!g.ok)throw new Error("Failed to get upload URL");return{method:"PUT",url:(await g.json()).uploadURL,headers:{"Content-Type":x.type||"application/octet-stream"}}},[]);return{uploadFile:f,getUploadParameters:v,isUploading:t,error:r,progress:l}}function j_({projectId:s}){const{toast:t}=mt(),[n,r]=p.useState([]),[o,l]=p.useState(!1),{data:d,isLoading:u}=_e({queryKey:["/api/projects",s,"screenshots"],queryFn:async()=>{const S=await fetch(`/api/projects/${s}/screenshots`);if(!S.ok)throw new Error("Failed to fetch screenshots");return S.json()}}),{uploadFile:h}=xk({}),f=we({mutationFn:async S=>{await je("DELETE",`/api/screenshots/${S}`)},onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/projects",s,"screenshots"]}),t({title:"Screenshot deleted"})}}),v=we({mutationFn:async({id:S,fileName:T})=>(await je("PATCH",`/api/screenshots/${S}`,{fileName:T})).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/projects",s,"screenshots"]}),t({title:"Name updated"})}}),x=we({mutationFn:async S=>(await je("PATCH",`/api/screenshots/${S}/request-approval`)).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/projects",s,"screenshots"]}),t({title:"Approval requested",description:"Client can now approve or request revisions."})}}),g=S=>{const T=S.target.files;if(!T||T.length===0)return;const P=[];for(let H=0;H<T.length;H++){const re=T[H],B=re.name.replace(/\.[^/.]+$/,"");P.push({file:re,name:B,preview:URL.createObjectURL(re)})}r(P),S.target.value=""},j=async()=>{l(!0);try{for(const S of n){const T=await h(S.file);T&&await je("POST",`/api/projects/${s}/screenshots`,{objectPath:T.objectPath,fileName:S.name||T.metadata.name,fileSize:T.metadata.size,contentType:T.metadata.contentType})}xe.invalidateQueries({queryKey:["/api/projects",s,"screenshots"]}),t({title:"Screenshots uploaded",description:`${n.length} screenshot${n.length>1?"s":""} saved.`})}catch(S){t({title:"Upload failed",description:S.message,variant:"destructive"})}finally{n.forEach(S=>URL.revokeObjectURL(S.preview)),r([]),l(!1)}},[N,b]=p.useState(null),[k,E]=p.useState("");return e.jsxs("div",{className:"p-3 rounded-md bg-muted/40","data-testid":`screenshots-section-${s}`,children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ix,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Screenshots"}),d&&d.length>0&&e.jsx(Ce,{variant:"secondary",className:"text-xs",children:d.length})]}),e.jsxs("div",{children:[e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:g,className:"hidden",id:`screenshot-upload-${s}`,"data-testid":`input-screenshot-upload-${s}`}),e.jsxs(L,{variant:"outline",size:"sm",onClick:()=>document.getElementById(`screenshot-upload-${s}`)?.click(),"data-testid":`button-upload-screenshot-${s}`,children:[e.jsx(Qt,{className:"w-3.5 h-3.5 mr-1.5"}),"Upload"]})]})]}),u?e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ye,{className:"h-16 w-16 rounded-md"}),e.jsx(ye,{className:"h-16 w-16 rounded-md"})]}):d&&d.length>0?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-2",children:d.map(S=>e.jsxs("div",{className:"group relative rounded-md overflow-visible border bg-background","data-testid":`screenshot-item-${S.id}`,children:[e.jsxs("a",{href:S.objectPath,target:"_blank",rel:"noopener noreferrer",className:"block relative",children:[e.jsx("img",{src:S.objectPath,alt:S.fileName,className:"w-full h-20 object-cover rounded-t-md",loading:"lazy"}),S.approvalStatus&&e.jsxs("div",{className:"absolute top-1 right-1",children:[S.approvalStatus==="approved"&&e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-emerald-500 border border-white",title:"Approved"}),S.approvalStatus==="pending"&&e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-blue-500 border border-white",title:"Awaiting approval"}),S.approvalStatus==="revisions"&&e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-amber-500 border border-white",title:"Revisions requested"})]})]}),e.jsxs("div",{className:"p-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between gap-1",children:[N===S.id?e.jsxs("div",{className:"flex items-center gap-1 flex-1 min-w-0",children:[e.jsx(Oe,{value:k,onChange:T=>E(T.target.value),className:"h-6 text-[11px] px-1.5 flex-1 min-w-0",autoFocus:!0,onKeyDown:T=>{T.key==="Enter"?(v.mutate({id:S.id,fileName:k}),b(null)):T.key==="Escape"&&b(null)},"data-testid":`input-rename-screenshot-${S.id}`}),e.jsx(L,{size:"icon",variant:"ghost",className:"h-5 w-5 shrink-0",onClick:()=>{v.mutate({id:S.id,fileName:k}),b(null)},"data-testid":`button-confirm-rename-${S.id}`,children:e.jsx(is,{className:"w-3 h-3"})})]}):e.jsx("span",{className:"text-[11px] text-muted-foreground truncate flex-1 cursor-pointer",title:`${S.fileName} (click to rename)`,onClick:()=>{b(S.id),E(S.fileName)},"data-testid":`text-screenshot-name-${S.id}`,children:S.fileName}),e.jsx(L,{size:"icon",variant:"ghost",className:"h-5 w-5 shrink-0",onClick:()=>f.mutate(S.id),"data-testid":`button-delete-screenshot-${S.id}`,children:e.jsx(ls,{className:"w-3 h-3"})})]}),S.approvalStatus==="revisions"&&S.revisionNotes&&e.jsxs("p",{className:"text-[10px] text-amber-600 dark:text-amber-400 mt-1 line-clamp-2",title:S.revisionNotes,children:["Revisions: ",S.revisionNotes]}),!S.approvalStatus&&e.jsxs(L,{variant:"outline",size:"sm",className:"w-full mt-1.5 h-6 text-[10px]",onClick:()=>x.mutate(S.id),disabled:x.isPending,"data-testid":`button-request-approval-${S.id}`,children:[e.jsx(vg,{className:"w-3 h-3 mr-1"}),"Request Approval"]}),S.approvalStatus==="approved"&&e.jsx(Ce,{variant:"secondary",className:"text-[10px] mt-1.5 w-full justify-center bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 border-emerald-500/20",children:"Approved"}),S.approvalStatus==="pending"&&e.jsx(Ce,{variant:"secondary",className:"text-[10px] mt-1.5 w-full justify-center",children:"Awaiting Approval"}),S.approvalStatus==="revisions"&&e.jsxs(L,{variant:"outline",size:"sm",className:"w-full mt-1.5 h-6 text-[10px]",onClick:()=>x.mutate(S.id),disabled:x.isPending,"data-testid":`button-resubmit-approval-${S.id}`,children:[e.jsx(os,{className:"w-3 h-3 mr-1"}),"Resubmit for Approval"]})]})]},S.id))}):e.jsx("p",{className:"text-xs text-muted-foreground",children:"No screenshots uploaded yet"}),e.jsx(yt,{open:n.length>0,onOpenChange:()=>{n.forEach(S=>URL.revokeObjectURL(S.preview)),r([])},children:e.jsxs(xt,{className:"max-w-lg",children:[e.jsx(gt,{children:e.jsx(vt,{children:"Name Your Screenshots"})}),e.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:n.map((S,T)=>e.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-md border","data-testid":`pending-upload-${T}`,children:[e.jsx("img",{src:S.preview,alt:"",className:"w-14 h-14 rounded-md object-cover shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[e.jsx(Oe,{value:S.name,onChange:P=>{const H=[...n];H[T]={...H[T],name:P.target.value},r(H)},placeholder:"Screenshot name",className:"text-sm","data-testid":`input-screenshot-name-${T}`}),e.jsx("p",{className:"text-[10px] text-muted-foreground truncate",children:S.file.name})]})]},T))}),e.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[e.jsx(L,{variant:"ghost",size:"sm",onClick:()=>{n.forEach(S=>URL.revokeObjectURL(S.preview)),r([])},disabled:o,"data-testid":"button-cancel-upload",children:"Cancel"}),e.jsx(L,{size:"sm",onClick:j,disabled:o||n.some(S=>!S.name.trim()),"data-testid":"button-confirm-upload",children:o?e.jsxs(e.Fragment,{children:[e.jsx(We,{className:"w-4 h-4 mr-1.5 animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ix,{className:"w-4 h-4 mr-1.5"}),"Upload ",n.length>1?`${n.length} Screenshots`:"Screenshot"]})})]})]})})]})}function w_({projectId:s}){const{data:t,isLoading:n}=_e({queryKey:["/api/projects",s,"client-files"],queryFn:async()=>{const r=await fetch(`/api/projects/${s}/client-files`);if(!r.ok)throw new Error("Failed to fetch client files");return r.json()}});return n?e.jsxs("div",{className:"p-3 rounded-md bg-muted/40",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(xm,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Client Files"})]}),e.jsx(ye,{className:"h-8 w-full"})]}):!t||t.length===0?null:e.jsxs("div",{className:"p-3 rounded-md bg-muted/40","data-testid":`client-files-section-${s}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(xm,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Client Files"}),e.jsx(Ce,{variant:"secondary",className:"text-xs",children:t.length})]}),e.jsx("div",{className:"space-y-1.5",children:t.map(r=>e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-md border bg-background","data-testid":`client-file-${r.id}`,children:[e.jsx(Lw,{className:"w-4 h-4 text-muted-foreground shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-medium truncate","data-testid":`text-client-file-name-${r.id}`,children:r.fileName}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:[r.contentType," ",r.fileSize?` ${(r.fileSize/1024).toFixed(1)} KB`:""]})]}),e.jsx("a",{href:r.objectPath,target:"_blank",rel:"noopener noreferrer",children:e.jsx(L,{size:"icon",variant:"ghost","data-testid":`button-download-client-file-${r.id}`,children:e.jsx(jo,{className:"w-3.5 h-3.5"})})})]},r.id))})]})}function N_(){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsx(ye,{className:"h-8 w-32 mb-1"}),e.jsx(ye,{className:"h-4 w-56"})]}),e.jsx(ye,{className:"h-9 w-36"})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:Array.from({length:2}).map((s,t)=>e.jsxs(ce,{className:"p-5",children:[e.jsx(ye,{className:"h-6 w-48 mb-3"}),e.jsx(ye,{className:"h-4 w-full mb-2"}),e.jsx(ye,{className:"h-4 w-36"})]},t))})]})}const k_={netlify:{label:"Netlify",color:"teal",accent:"from-teal-500/5 to-cyan-500/5 border-teal-500/20",description:"Static sites & JAMstack",icon:"N"},vercel:{label:"Vercel",color:"blue",accent:"from-blue-500/5 to-indigo-500/5 border-blue-500/20",description:"Static & serverless apps",icon:"V"},railway:{label:"Railway",color:"purple",accent:"from-purple-500/5 to-pink-500/5 border-purple-500/20",description:"Docker & full-stack apps",icon:"R"}};function Xb({project:s,platform:t,isConnected:n,platformId:r,platformUrl:o}){const{toast:l}=mt(),d=k_[t],[u,h]=p.useState(s.githubRepoUrl||""),[f,v]=p.useState(!1),x=t==="netlify"?{bg:"bg-teal-500/10",text:"text-teal-600",darkText:"dark:text-teal-400",heading:"text-teal-700 dark:text-teal-300",border:"border-teal-500/30",link:"text-teal-600 dark:text-teal-400"}:t==="vercel"?{bg:"bg-blue-500/10",text:"text-blue-600",darkText:"dark:text-blue-400",heading:"text-blue-700 dark:text-blue-300",border:"border-blue-500/30",link:"text-blue-600 dark:text-blue-400"}:{bg:"bg-purple-500/10",text:"text-purple-600",darkText:"dark:text-purple-400",heading:"text-purple-700 dark:text-purple-300",border:"border-purple-500/30",link:"text-purple-600 dark:text-purple-400"},{data:g,refetch:j}=_e({queryKey:["/api/projects",s.id,`${t}/info`],enabled:n&&!!r,retry:!1}),N=we({mutationFn:async()=>(await je("POST",`/api/projects/${s.id}/${t}/create`)).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/projects"]}),l({title:`${d.label} project created`,description:"Now link a GitHub repo for auto-deploy."})},onError:S=>l({title:"Error",description:S.message,variant:"destructive"})}),b=we({mutationFn:async()=>(await je("POST",`/api/projects/${s.id}/${t}/link-github`,{repoUrl:u,branch:"main"})).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/projects"]}),j(),v(!1),l({title:"GitHub linked",description:`Repo connected to ${d.label}.`})},onError:S=>l({title:"Error",description:S.message,variant:"destructive"})}),k=we({mutationFn:async()=>(await je("POST",`/api/projects/${s.id}/${t}/deploy`)).json(),onSuccess:()=>{j(),l({title:"Deploy triggered",description:`Building on ${d.label}...`})},onError:S=>l({title:"Error",description:S.message,variant:"destructive"})}),E=we({mutationFn:async()=>(await je("DELETE",`/api/projects/${s.id}/${t}`)).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/projects"]}),l({title:"Disconnected",description:`${d.label} removed from this project.`})},onError:S=>l({title:"Error",description:S.message,variant:"destructive"})});return n?e.jsxs("div",{className:`p-3 rounded-lg bg-gradient-to-r ${d.accent}`,"data-testid":`deploy-platform-${t}-${s.id}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`w-5 h-5 rounded text-[10px] font-bold flex items-center justify-center ${x.bg} ${x.text}`,children:d.icon}),e.jsx("span",{className:`text-xs font-medium uppercase tracking-wider ${x.heading}`,children:d.label}),e.jsx(Ce,{variant:"outline",className:`text-[10px] px-1.5 py-0 ${x.border} ${x.text} ${x.darkText}`,children:"Active"})]}),e.jsx(L,{size:"icon",variant:"ghost",className:"h-6 w-6 text-muted-foreground hover:text-destructive",onClick:()=>{confirm(`Disconnect ${d.label}? This will remove the project from ${d.label}.`)&&E.mutate()},"data-testid":`button-unlink-${t}-${s.id}`,children:e.jsx(NT,{className:"w-3 h-3"})})]}),o&&e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(nn,{className:"w-3 h-3 text-muted-foreground"}),e.jsx("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:`text-xs underline underline-offset-2 truncate ${x.link}`,"data-testid":`link-deploy-url-${t}-${s.id}`,children:o})]}),s.githubRepoUrl?e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(mm,{className:"w-3 h-3 text-muted-foreground"}),e.jsx("span",{className:"text-[11px] text-muted-foreground truncate",children:s.githubRepoUrl}),e.jsx(Ce,{variant:"secondary",className:"text-[10px] px-1.5 py-0",children:"auto"})]}):f?e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Oe,{value:u,onChange:S=>h(S.target.value),placeholder:"https://github.com/user/repo",className:"flex-1 text-xs h-7","data-testid":`input-github-repo-${t}-${s.id}`}),e.jsx(L,{size:"sm",variant:"default",className:"h-7 text-xs",onClick:()=>b.mutate(),disabled:b.isPending||!u,"data-testid":`button-link-github-${t}-${s.id}`,children:b.isPending?e.jsx(We,{className:"w-3 h-3 animate-spin"}):"Link"}),e.jsx(L,{size:"sm",variant:"ghost",className:"h-7 text-xs",onClick:()=>v(!1),children:"Cancel"})]}):e.jsxs(L,{variant:"outline",size:"sm",onClick:()=>v(!0),className:"mb-2 h-7 text-xs","data-testid":`button-show-link-github-${t}-${s.id}`,children:[e.jsx(mm,{className:"w-3.5 h-3.5 mr-1"}),"Link GitHub Repo"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(L,{size:"sm",variant:"outline",className:"h-7 text-xs",onClick:()=>k.mutate(),disabled:k.isPending,"data-testid":`button-deploy-${t}-${s.id}`,children:[k.isPending?e.jsx(We,{className:"w-3 h-3 mr-1 animate-spin"}):e.jsx(Gl,{className:"w-3 h-3 mr-1"}),"Deploy Now"]}),g?.deploys?.[0]&&e.jsxs("span",{className:"text-[10px] text-muted-foreground",children:["Last: ",new Date(g.deploys[0].created_at).toLocaleDateString(),"  ",g.deploys[0].state]})]})]}):e.jsxs(L,{variant:"outline",size:"sm",className:"justify-start h-auto py-2.5 px-3",onClick:()=>N.mutate(),disabled:N.isPending,"data-testid":`button-create-${t}-${s.id}`,children:[N.isPending?e.jsx(We,{className:"w-5 h-5 mr-2.5 animate-spin"}):e.jsx("span",{className:`w-6 h-6 rounded text-[11px] font-bold flex items-center justify-center mr-2.5 ${x.bg} ${x.text}`,children:d.icon}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-sm font-medium",children:d.label}),e.jsx("div",{className:"text-[10px] text-muted-foreground",children:d.description})]})]})}function C_({project:s}){const{data:t}=_e({queryKey:["/api/deploy/status"]}),n=Object.entries(t||{}).filter(([d,u])=>u.configured).map(([d])=>d);if(n.length===0)return e.jsxs("div",{className:"p-3 rounded-md bg-muted/40","data-testid":`deploy-section-${s.id}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(wo,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Deploy"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Add a deploy platform token in Settings to enable deployment (Netlify, Vercel, or Railway)."})]});const r=d=>({isConnected:d==="netlify"?!!s.netlifySiteId:d==="vercel"?!!s.vercelProjectId:!!s.railwayProjectId,platformId:d==="netlify"?s.netlifySiteId:d==="vercel"?s.vercelProjectId:s.railwayProjectId,platformUrl:d==="netlify"?s.netlifySiteUrl:d==="vercel"?s.vercelProjectUrl:s.railwayProjectUrl}),o=n.filter(d=>r(d).isConnected),l=n.filter(d=>!r(d).isConnected);return e.jsxs("div",{className:"p-3 rounded-md bg-muted/40","data-testid":`deploy-section-${s.id}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(wo,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Deploy"}),o.length>0&&e.jsxs(Ce,{variant:"secondary",className:"text-[10px] px-1.5 py-0",children:[o.length," active"]})]}),e.jsxs("div",{className:"space-y-2",children:[o.map(d=>{const u=r(d);return e.jsx(Xb,{project:s,platform:d,...u},d)}),l.length>0&&e.jsxs(e.Fragment,{children:[o.length>0&&e.jsx("p",{className:"text-[10px] text-muted-foreground pt-1",children:"Add another platform:"}),e.jsx("div",{className:"grid gap-1.5",children:l.map(d=>{const u=r(d);return e.jsx(Xb,{project:s,platform:d,...u},d)})})]})]})]})}function S_(){Un("Projects");const{toast:s}=mt(),[t,n]=p.useState(""),[r,o]=p.useState(!1),[l,d]=p.useState(!1),[u,h]=p.useState(!1),[f,v]=p.useState(null),[x,g]=p.useState({customerId:"",name:"",description:""}),[j,N]=p.useState({rateId:"",quantity:"1",description:"",recordedAt:""}),[b,k]=p.useState(!1),[E,S]=p.useState(null),[T,P]=p.useState({rateId:"",quantity:"1",description:"",recordedAt:""}),[H,re]=p.useState("30"),[B,Q]=p.useState(null),[G,ue]=p.useState(""),[_,Y]=p.useState(null),[z,J]=p.useState(!1),[X,$]=p.useState(null),[I,A]=p.useState({title:"",description:"",type:"update",status:"completed"}),[W,Z]=p.useState(new Set),q=me=>{Z(Le=>{const nt=new Set(Le);return nt.has(me)?nt.delete(me):nt.add(me),nt})},{data:ne,isLoading:K}=_e({queryKey:["/api/projects"]}),{data:U}=_e({queryKey:["/api/customers"]}),{data:M}=_e({queryKey:["/api/billing-rates"]}),{data:F}=_e({queryKey:["/api/work-entries"]}),ie=we({mutationFn:async me=>(await je("POST","/api/projects",me)).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/projects"]}),xe.invalidateQueries({queryKey:["/api/dashboard/stats"]}),o(!1),g({customerId:"",name:"",description:""}),s({title:"Project created",description:"New project has been added."})},onError:me=>{s({title:"Error",description:me.message,variant:"destructive"})}}),fe=we({mutationFn:async me=>(await je("POST","/api/work-entries",me)).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/work-entries"]}),xe.invalidateQueries({queryKey:["/api/dashboard/stats"]}),d(!1),N({rateId:"",quantity:"1",description:""}),s({title:"Work logged",description:"Work entry has been recorded."})},onError:me=>{s({title:"Error",description:me.message,variant:"destructive"})}}),Ee=we({mutationFn:async({id:me,data:Le})=>(await je("PATCH",`/api/work-entries/${me}`,Le)).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/work-entries"]}),xe.invalidateQueries({queryKey:["/api/dashboard/stats"]}),k(!1),S(null),s({title:"Entry updated",description:"Work entry has been updated."})},onError:me=>{s({title:"Error",description:me.message,variant:"destructive"})}}),Ne=we({mutationFn:async me=>{await je("DELETE",`/api/work-entries/${me}`)},onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/work-entries"]}),xe.invalidateQueries({queryKey:["/api/dashboard/stats"]}),s({title:"Entry deleted",description:"Work entry has been removed."})}}),Pe=we({mutationFn:async me=>{await je("DELETE",`/api/projects/${me}`)},onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/projects"]}),xe.invalidateQueries({queryKey:["/api/work-entries"]}),xe.invalidateQueries({queryKey:["/api/invoices"]}),xe.invalidateQueries({queryKey:["/api/dashboard/stats"]}),s({title:"Project deleted",description:"Project and all related data have been removed."})},onError:me=>{s({title:"Error",description:me.message,variant:"destructive"})}}),$e=we({mutationFn:async me=>(await je("POST","/api/invoices/generate",{...me,taxRate:0})).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/invoices"]}),xe.invalidateQueries({queryKey:["/api/work-entries"]}),xe.invalidateQueries({queryKey:["/api/dashboard/stats"]}),h(!1),s({title:"Invoice generated",description:"Invoice has been created from unbilled work."})},onError:me=>{s({title:"Error",description:me.message,variant:"destructive"})}}),Ue=we({mutationFn:async({id:me,field:Le,url:nt})=>(await je("PATCH",`/api/projects/${me}`,{[Le]:nt||null})).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/projects"]}),Q(null),s({title:"Link saved",description:"The link has been updated."})},onError:me=>{s({title:"Error",description:me.message,variant:"destructive"})}}),et=(me,Le)=>{navigator.clipboard.writeText(Le),Y(me),setTimeout(()=>Y(null),2e3),s({title:"Copied",description:"Link copied to clipboard."})},ct=we({mutationFn:async({projectId:me,data:Le})=>(await je("POST",`/api/projects/${me}/updates`,Le)).json(),onSuccess:()=>{X&&xe.invalidateQueries({queryKey:["/api/projects",X,"updates"]}),J(!1),A({title:"",description:"",type:"update",status:"completed"}),s({title:"Update posted",description:"Progress update has been published."})},onError:me=>{s({title:"Error",description:me.message,variant:"destructive"})}});we({mutationFn:async me=>{await je("DELETE",`/api/project-updates/${me}`)},onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/projects"]}),s({title:"Update deleted"})},onError:me=>{s({title:"Error",description:me.message,variant:"destructive"})}});const Bt=me=>{v(me),N({rateId:"",quantity:"1",description:"",recordedAt:new Date().toISOString().split("T")[0]}),d(!0)},Yt=me=>{S(me),P({rateId:me.rateId,quantity:String(Number(me.quantity)),description:me.description||"",recordedAt:me.recordedAt?new Date(me.recordedAt).toISOString().split("T")[0]:new Date().toISOString().split("T")[0]}),k(!0)},ps=me=>{v(me),re("30"),h(!0)},ks=me=>{if(me.preventDefault(),!f)return;const Le=ne?.find(nt=>nt.id===f);Le&&fe.mutate({projectId:f,customerId:Le.customerId,rateId:j.rateId,quantity:j.quantity,description:j.description,recordedAt:j.recordedAt?new Date(j.recordedAt+"T12:00:00").toISOString():void 0})},cs=me=>{me.preventDefault(),E&&Ee.mutate({id:E.id,data:{rateId:T.rateId,quantity:T.quantity,description:T.description,recordedAt:T.recordedAt?new Date(T.recordedAt+"T12:00:00").toISOString():void 0}})};if(K)return e.jsx(N_,{});const xs=new Map(U?.map(me=>[me.id,me])??[]),Et=new Map(M?.map(me=>[me.id,me])??[]),Lt=ne?.filter(me=>me.name.toLowerCase().includes(t.toLowerCase())||(xs.get(me.customerId)?.name??"").toLowerCase().includes(t.toLowerCase()))??[],wt=me=>{const Le=F?.filter(D=>D.projectId===me)??[],nt=Le.filter(D=>!D.invoiceId),St=Le.filter(D=>D.invoiceId),Xt=nt.reduce((D,ge)=>{const Ge=Et.get(ge.rateId);return D+Number(ge.quantity)*(Ge?.rateCents??0)},0),Ft=St.reduce((D,ge)=>{const Ge=Et.get(ge.rateId);return D+Number(ge.quantity)*(Ge?.rateCents??0)},0);return{totalEntries:Le.length,unbilledCount:nt.length,unbilledAmount:Xt,billedAmount:Ft,totalAmount:Xt+Ft}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight","data-testid":"text-page-title",children:"Projects"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Track work and generate invoices for each project"})]}),e.jsxs(L,{onClick:()=>{g({customerId:"",name:"",description:""}),o(!0)},"data-testid":"button-add-project",children:[e.jsx(Qt,{className:"w-4 h-4 mr-2"}),"New Project"]})]}),e.jsxs("div",{className:"relative max-w-sm",children:[e.jsx(sn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(Oe,{placeholder:"Search projects...",value:t,onChange:me=>n(me.target.value),className:"pl-9","data-testid":"input-search-projects"})]}),Lt.length>0?e.jsx("div",{className:"space-y-5",children:(()=>{const me=new Map;return Lt.forEach(Le=>{const nt=Le.customerId;me.has(nt)||me.set(nt,[]),me.get(nt).push(Le)}),Array.from(me.entries()).map(([Le,nt])=>{const St=xs.get(Le),Xt=W.has(Le),Ft=nt.reduce((ge,Ge)=>ge+wt(Ge.id).unbilledAmount,0),D=nt.reduce((ge,Ge)=>ge+wt(Ge.id).billedAmount,0);return e.jsxs("div",{"data-testid":`customer-group-${Le}`,children:[e.jsxs("button",{onClick:()=>q(Le),className:"w-full flex items-center justify-between gap-3 px-4 py-3 rounded-lg bg-muted/50 hover-elevate transition-colors mb-2","data-testid":`button-toggle-customer-${Le}`,children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx(Sr,{className:`w-4 h-4 text-muted-foreground shrink-0 transition-transform ${Xt?"-rotate-90":""}`}),e.jsx(Sl,{className:"w-4 h-4 text-muted-foreground shrink-0"}),e.jsx("span",{className:"font-semibold truncate","data-testid":`text-customer-group-name-${Le}`,children:St?.company||St?.name||"Unknown Customer"}),e.jsxs(Ce,{variant:"secondary",className:"text-xs shrink-0",children:[nt.length," ",nt.length===1?"project":"projects"]})]}),e.jsxs("div",{className:"flex items-center gap-4 shrink-0 text-sm",children:[Ft>0&&e.jsxs("span",{className:"text-amber-500 font-medium","data-testid":`text-customer-unbilled-${Le}`,children:["$",(Ft/100).toLocaleString()," unbilled"]}),D>0&&e.jsxs("span",{className:"text-muted-foreground","data-testid":`text-customer-billed-${Le}`,children:["$",(D/100).toLocaleString()," billed"]})]})]}),!Xt&&e.jsx("div",{className:"space-y-4 pl-4 border-l-2 border-muted ml-4",children:nt.map(ge=>{const Ge=wt(ge.id),Nt=F?.filter(rt=>rt.projectId===ge.id&&!rt.invoiceId)??[];return e.jsxs(ce,{className:"p-5","data-testid":`card-project-${ge.id}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 flex-wrap mb-4",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h3",{className:"font-semibold","data-testid":`text-project-name-${ge.id}`,children:ge.name}),e.jsx(Ce,{variant:"secondary",className:`text-xs ${Jn(ge.status)}`,children:ge.status})]}),ge.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:ge.description})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsxs(L,{variant:"outline",size:"sm",onClick:()=>Bt(ge.id),"data-testid":`button-log-work-${ge.id}`,children:[e.jsx(Wt,{className:"w-4 h-4 mr-1.5"}),"Log Work"]}),e.jsxs(L,{variant:"outline",size:"sm",onClick:()=>{$(ge.id),A({title:"",description:"",type:"update",status:"completed"}),J(!0)},"data-testid":`button-post-update-${ge.id}`,children:[e.jsx(Ml,{className:"w-4 h-4 mr-1.5"}),"Post Update"]}),Ge.unbilledCount>0&&e.jsxs(L,{size:"sm",onClick:()=>ps(ge.id),"data-testid":`button-generate-invoice-${ge.id}`,children:[e.jsx(Wa,{className:"w-4 h-4 mr-1.5"}),"Generate Invoice"]}),e.jsx(L,{variant:"ghost",size:"icon",className:"text-muted-foreground hover:text-destructive",onClick:()=>{confirm("Delete this project? This will also remove all related work entries and invoices.")&&Pe.mutate(ge.id)},disabled:Pe.isPending,"data-testid":`button-delete-project-${ge.id}`,children:e.jsx(ls,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"mb-4 grid grid-cols-1 sm:grid-cols-3 gap-3",children:[(()=>{const rt=`${ge.id}-previewUrl`;return e.jsxs("div",{className:"p-3 rounded-md bg-muted/40","data-testid":`previewUrl-section-${ge.id}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(_s,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Preview Link"})]}),B===rt?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{value:G,onChange:Pt=>ue(Pt.target.value),placeholder:"https://preview.example.com/site",className:"flex-1 text-sm","data-testid":`input-previewUrl-${ge.id}`}),e.jsx(L,{size:"icon",variant:"ghost",onClick:()=>Ue.mutate({id:ge.id,field:"previewUrl",url:G}),disabled:Ue.isPending,"data-testid":`button-save-previewUrl-${ge.id}`,children:e.jsx(is,{className:"w-4 h-4"})}),e.jsx(L,{size:"icon",variant:"ghost",onClick:()=>Q(null),"data-testid":`button-cancel-previewUrl-${ge.id}`,children:e.jsx(zn,{className:"w-4 h-4"})})]}):ge.previewUrl?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("a",{href:ge.previewUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sm truncate flex-1 underline decoration-muted-foreground/30 underline-offset-2","data-testid":`link-previewUrl-${ge.id}`,children:ge.previewUrl}),e.jsx(L,{size:"icon",variant:"ghost",onClick:()=>et(rt,ge.previewUrl),"data-testid":`button-copy-previewUrl-${ge.id}`,children:_===rt?e.jsx(is,{className:"w-4 h-4 text-green-500"}):e.jsx(fn,{className:"w-4 h-4"})}),e.jsx(L,{size:"icon",variant:"ghost",onClick:()=>window.open(ge.previewUrl,"_blank"),"data-testid":`button-open-previewUrl-${ge.id}`,children:e.jsx(_s,{className:"w-4 h-4"})}),e.jsx(L,{size:"icon",variant:"ghost",onClick:()=>{Q(rt),ue(ge.previewUrl||"")},"data-testid":`button-edit-previewUrl-${ge.id}`,children:e.jsx(kr,{className:"w-4 h-4"})})]}):e.jsxs(L,{variant:"outline",size:"sm",onClick:()=>{Q(rt),ue("")},"data-testid":`button-add-previewUrl-${ge.id}`,children:[e.jsx(Qt,{className:"w-4 h-4 mr-1.5"}),"Add Preview Link"]})]})})(),(()=>{const rt=`${window.location.origin}/progress/${ge.id}`,Pt=`${ge.id}-progressUrl`;return e.jsxs("div",{className:"p-3 rounded-md bg-muted/40","data-testid":`progressUrl-section-${ge.id}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ml,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Progress Link"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm truncate flex-1 text-muted-foreground","data-testid":`link-progressUrl-${ge.id}`,children:["/progress/",ge.id.slice(0,8),"..."]}),e.jsx(L,{size:"icon",variant:"ghost",onClick:()=>et(Pt,rt),"data-testid":`button-copy-progressUrl-${ge.id}`,children:_===Pt?e.jsx(is,{className:"w-4 h-4 text-green-500"}):e.jsx(fn,{className:"w-4 h-4"})}),e.jsx(L,{size:"icon",variant:"ghost",onClick:()=>window.open(rt,"_blank"),"data-testid":`button-open-progressUrl-${ge.id}`,children:e.jsx(_s,{className:"w-4 h-4"})})]})]})})(),(()=>{if(!St?.portalToken)return null;const rt=`${window.location.origin}/portal/${St.portalToken}`,Pt=`${ge.id}-portalUrl`;return e.jsxs("div",{className:"p-3 rounded-md bg-muted/40","data-testid":`portalUrl-section-${ge.id}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Vr,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Client Portal"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm truncate flex-1 text-muted-foreground","data-testid":`link-portalUrl-${ge.id}`,children:["/portal/",St.portalToken.slice(0,8),"..."]}),e.jsx(L,{size:"icon",variant:"ghost",onClick:()=>et(Pt,rt),"data-testid":`button-copy-portalUrl-${ge.id}`,children:_===Pt?e.jsx(is,{className:"w-4 h-4 text-green-500"}):e.jsx(fn,{className:"w-4 h-4"})}),e.jsx(L,{size:"icon",variant:"ghost",onClick:()=>window.open(rt,"_blank"),"data-testid":`button-open-portalUrl-${ge.id}`,children:e.jsx(_s,{className:"w-4 h-4"})})]})]})})()]}),e.jsx("div",{className:"mb-4",children:e.jsx(C_,{project:ge})}),e.jsx("div",{className:"mb-4",children:e.jsx(j_,{projectId:ge.id})}),e.jsx("div",{className:"mb-4",children:e.jsx(w_,{projectId:ge.id})}),Ge.totalEntries>0&&e.jsxs("div",{className:"mb-4 grid grid-cols-2 sm:grid-cols-4 gap-3","data-testid":`metrics-project-${ge.id}`,children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-md bg-muted/40",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-md bg-primary/10 shrink-0",children:e.jsx(yg,{className:"w-4 h-4 text-primary"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs text-muted-foreground leading-none mb-1",children:"Total Value"}),e.jsx("p",{className:"text-sm font-semibold leading-none truncate","data-testid":`text-total-value-${ge.id}`,children:Fe(Ge.totalAmount)})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-md bg-muted/40",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-md bg-green-500/10 shrink-0",children:e.jsx(rr,{className:"w-4 h-4 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs text-muted-foreground leading-none mb-1",children:"Invoiced"}),e.jsx("p",{className:"text-sm font-semibold leading-none truncate","data-testid":`text-billed-value-${ge.id}`,children:Fe(Ge.billedAmount)})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-md bg-muted/40",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-md bg-amber-500/10 shrink-0",children:e.jsx(Wt,{className:"w-4 h-4 text-amber-600 dark:text-amber-400"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs text-muted-foreground leading-none mb-1",children:"Unbilled"}),e.jsx("p",{className:"text-sm font-semibold leading-none truncate","data-testid":`text-unbilled-value-${ge.id}`,children:Fe(Ge.unbilledAmount)})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-md bg-muted/40",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-md bg-blue-500/10 shrink-0",children:e.jsx(qw,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs text-muted-foreground leading-none mb-1",children:"Deliverables"}),e.jsx("p",{className:"text-sm font-semibold leading-none truncate","data-testid":`text-total-entries-${ge.id}`,children:Ge.totalEntries})]})]})]}),Nt.length>0&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-2 pr-4 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Work"}),e.jsx("th",{className:"text-left py-2 pr-4 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"text-right py-2 pr-4 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Qty"}),e.jsx("th",{className:"text-right py-2 pr-4 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Rate"}),e.jsx("th",{className:"text-right py-2 pr-4 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"text-right py-2 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"py-2 w-8"})]})}),e.jsx("tbody",{children:Nt.map(rt=>{const Pt=Et.get(rt.rateId),Us=Number(rt.quantity)*(Pt?.rateCents??0);return e.jsxs("tr",{className:"border-b last:border-b-0","data-testid":`row-work-${rt.id}`,children:[e.jsx("td",{className:"py-2 pr-4 font-medium",children:Pt?.name??"Unknown"}),e.jsx("td",{className:"py-2 pr-4 text-muted-foreground max-w-[200px] truncate",children:rt.description||""}),e.jsx("td",{className:"py-2 pr-4 text-right",children:Number(rt.quantity)}),e.jsxs("td",{className:"py-2 pr-4 text-right text-muted-foreground",children:[Fe(Pt?.rateCents??0),"/",Pt?.unitLabel]}),e.jsx("td",{className:"py-2 pr-4 text-right font-medium",children:Fe(Us)}),e.jsx("td",{className:"py-2 pr-4 text-right text-muted-foreground text-xs",children:qs(rt.recordedAt)}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center gap-0.5",children:[e.jsx(L,{size:"icon",variant:"ghost",onClick:()=>Yt(rt),"data-testid":`button-edit-work-${rt.id}`,children:e.jsx(kr,{className:"w-3.5 h-3.5"})}),e.jsx(L,{size:"icon",variant:"ghost",onClick:()=>Ne.mutate(rt.id),"data-testid":`button-delete-work-${rt.id}`,children:e.jsx(ls,{className:"w-3.5 h-3.5"})})]})})]},rt.id)})})]})}),Nt.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No unbilled work entries yet"})]},ge.id)})})]},Le)})})()}):e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(qn,{className:"w-10 h-10 text-muted-foreground mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t?"No projects match your search":"No projects yet. Create a project to start tracking work."})]}),e.jsx(yt,{open:r,onOpenChange:o,children:e.jsxs(xt,{children:[e.jsx(gt,{children:e.jsx(vt,{children:"New Project"})}),e.jsxs("form",{onSubmit:me=>{me.preventDefault(),ie.mutate(x)},className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{children:"Customer *"}),e.jsxs(Dt,{value:x.customerId,onValueChange:me=>g(Le=>({...Le,customerId:me})),children:[e.jsx(It,{"data-testid":"select-project-customer",children:e.jsx($t,{placeholder:"Select a customer"})}),e.jsx(Ot,{children:U?.map(me=>e.jsx(Ie,{value:me.id,children:me.company?`${me.company} (${me.name})`:me.name},me.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"project-name",children:"Project Name *"}),e.jsx(Oe,{id:"project-name",value:x.name,onChange:me=>g(Le=>({...Le,name:me.target.value})),required:!0,"data-testid":"input-project-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"project-desc",children:"Description"}),e.jsx(fs,{id:"project-desc",value:x.description,onChange:me=>g(Le=>({...Le,description:me.target.value})),"data-testid":"input-project-description"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(L,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(L,{type:"submit",disabled:ie.isPending||!x.customerId,"data-testid":"button-save-project",children:ie.isPending?"Creating...":"Create Project"})]})]})]})}),e.jsx(yt,{open:l,onOpenChange:d,children:e.jsxs(xt,{children:[e.jsx(gt,{children:e.jsx(vt,{children:"Log Work"})}),e.jsxs("form",{onSubmit:ks,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{children:"What did you do? *"}),e.jsxs(Dt,{value:j.rateId,onValueChange:me=>N(Le=>({...Le,rateId:me})),children:[e.jsx(It,{"data-testid":"select-work-type",children:e.jsx($t,{placeholder:"Select work type"})}),e.jsx(Ot,{children:M?.filter(me=>me.isActive).map(me=>e.jsxs(Ie,{value:me.id,children:[me.name," (",Fe(me.rateCents),"/",me.unitLabel,")"]},me.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"work-qty",children:"Quantity *"}),e.jsx(Oe,{id:"work-qty",type:"number",min:"0.1",step:"0.1",value:j.quantity,onChange:me=>N(Le=>({...Le,quantity:me.target.value})),required:!0,"data-testid":"input-work-quantity"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"work-date",children:"Date"}),e.jsx(Oe,{id:"work-date",type:"date",value:j.recordedAt,onChange:me=>N(Le=>({...Le,recordedAt:me.target.value})),"data-testid":"input-work-date"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"work-desc",children:"Description"}),e.jsx(fs,{id:"work-desc",placeholder:"Brief note about what was done",value:j.description,onChange:me=>N(Le=>({...Le,description:me.target.value})),"data-testid":"input-work-description"})]}),j.rateId&&e.jsx("div",{className:"p-3 rounded-md bg-muted/50 text-sm",children:e.jsxs("div",{className:"flex justify-between gap-3",children:[e.jsx("span",{className:"text-muted-foreground",children:"Estimated charge:"}),e.jsx("span",{className:"font-semibold","data-testid":"text-work-estimate",children:Fe(Number(j.quantity)*(Et.get(j.rateId)?.rateCents??0))})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(L,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(L,{type:"submit",disabled:fe.isPending||!j.rateId,"data-testid":"button-save-work",children:fe.isPending?"Logging...":"Log Work"})]})]})]})}),e.jsx(yt,{open:u,onOpenChange:h,children:e.jsxs(xt,{children:[e.jsx(gt,{children:e.jsx(vt,{children:"Generate Invoice"})}),f&&(()=>{const me=wt(f),Le=me.unbilledAmount,nt=me.unbilledCount,St=new Date;return St.setDate(St.getDate()+Number(H)),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2 p-3 rounded-md bg-muted/50 text-sm",children:[e.jsxs("div",{className:"flex justify-between gap-3",children:[e.jsx("span",{className:"text-muted-foreground",children:"Work entries:"}),e.jsx("span",{children:nt})]}),e.jsxs("div",{className:"flex justify-between gap-3 pt-2 border-t font-semibold",children:[e.jsx("span",{children:"Total:"}),e.jsx("span",{children:Fe(Le)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{children:"Payment Terms"}),e.jsxs(Dt,{value:H,onValueChange:re,children:[e.jsx(It,{"data-testid":"select-payment-terms",children:e.jsx($t,{})}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"7",children:"Net 7 (Due in 7 days)"}),e.jsx(Ie,{value:"14",children:"Net 14 (Due in 14 days)"}),e.jsx(Ie,{value:"15",children:"Net 15 (Due in 15 days)"}),e.jsx(Ie,{value:"30",children:"Net 30 (Due in 30 days)"}),e.jsx(Ie,{value:"45",children:"Net 45 (Due in 45 days)"}),e.jsx(Ie,{value:"60",children:"Net 60 (Due in 60 days)"}),e.jsx(Ie,{value:"90",children:"Net 90 (Due in 90 days)"})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground","data-testid":"text-due-date-preview",children:["Due date: ",St.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(L,{type:"button",variant:"outline",onClick:()=>h(!1),children:"Cancel"}),e.jsx(L,{onClick:()=>$e.mutate({projectId:f,dueDays:Number(H)}),disabled:$e.isPending,"data-testid":"button-confirm-generate-invoice",children:$e.isPending?"Generating...":"Generate Invoice"})]})]})})()]})}),e.jsx(yt,{open:z,onOpenChange:J,children:e.jsxs(xt,{children:[e.jsx(gt,{children:e.jsx(vt,{children:"Post Progress Update"})}),e.jsxs("form",{onSubmit:me=>{me.preventDefault(),X&&ct.mutate({projectId:X,data:I})},className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"update-title",children:"Title *"}),e.jsx(Oe,{id:"update-title",value:I.title,onChange:me=>A(Le=>({...Le,title:me.target.value})),placeholder:"e.g. Homepage design completed",required:!0,"data-testid":"input-update-title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"update-desc",children:"Description"}),e.jsx(fs,{id:"update-desc",value:I.description,onChange:me=>A(Le=>({...Le,description:me.target.value})),placeholder:"Add details about this update...","data-testid":"input-update-description"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{children:"Type"}),e.jsxs(Dt,{value:I.type,onValueChange:me=>A(Le=>({...Le,type:me})),children:[e.jsx(It,{"data-testid":"select-update-type",children:e.jsx($t,{})}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"update",children:"Update"}),e.jsx(Ie,{value:"milestone",children:"Milestone"}),e.jsx(Ie,{value:"deliverable",children:"Deliverable"}),e.jsx(Ie,{value:"launch",children:"Launch"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{children:"Status"}),e.jsxs(Dt,{value:I.status,onValueChange:me=>A(Le=>({...Le,status:me})),children:[e.jsx(It,{"data-testid":"select-update-status",children:e.jsx($t,{})}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"completed",children:"Completed"}),e.jsx(Ie,{value:"in_progress",children:"In Progress"}),e.jsx(Ie,{value:"upcoming",children:"Upcoming"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(L,{type:"button",variant:"outline",onClick:()=>J(!1),children:"Cancel"}),e.jsx(L,{type:"submit",disabled:ct.isPending,"data-testid":"button-save-update",children:ct.isPending?"Posting...":"Post Update"})]})]})]})}),e.jsx(yt,{open:b,onOpenChange:k,children:e.jsxs(xt,{children:[e.jsx(gt,{children:e.jsx(vt,{children:"Edit Work Entry"})}),e.jsxs("form",{onSubmit:cs,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{children:"Work Type *"}),e.jsxs(Dt,{value:T.rateId,onValueChange:me=>P(Le=>({...Le,rateId:me})),children:[e.jsx(It,{"data-testid":"select-edit-work-type",children:e.jsx($t,{placeholder:"Select work type"})}),e.jsx(Ot,{children:M?.filter(me=>me.isActive).map(me=>e.jsxs(Ie,{value:me.id,children:[me.name," (",Fe(me.rateCents),"/",me.unitLabel,")"]},me.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"edit-work-qty",children:"Quantity *"}),e.jsx(Oe,{id:"edit-work-qty",type:"number",min:"0.1",step:"0.1",value:T.quantity,onChange:me=>P(Le=>({...Le,quantity:me.target.value})),required:!0,"data-testid":"input-edit-work-quantity"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"edit-work-date",children:"Date"}),e.jsx(Oe,{id:"edit-work-date",type:"date",value:T.recordedAt,onChange:me=>P(Le=>({...Le,recordedAt:me.target.value})),"data-testid":"input-edit-work-date"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"edit-work-desc",children:"Description"}),e.jsx(fs,{id:"edit-work-desc",placeholder:"Brief note about what was done",value:T.description,onChange:me=>P(Le=>({...Le,description:me.target.value})),"data-testid":"input-edit-work-description"})]}),T.rateId&&e.jsx("div",{className:"p-3 rounded-md bg-muted/50 text-sm",children:e.jsxs("div",{className:"flex justify-between gap-3",children:[e.jsx("span",{className:"text-muted-foreground",children:"Estimated charge:"}),e.jsx("span",{className:"font-semibold","data-testid":"text-edit-work-estimate",children:Fe(Number(T.quantity)*(Et.get(T.rateId)?.rateCents??0))})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(L,{type:"button",variant:"outline",onClick:()=>k(!1),children:"Cancel"}),e.jsx(L,{type:"submit",disabled:Ee.isPending||!T.rateId,"data-testid":"button-save-edit-work",children:Ee.isPending?"Saving...":"Save Changes"})]})]})]})})]})}function E_(){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(ye,{className:"h-8 w-32 mb-1"}),e.jsx(ye,{className:"h-4 w-56"})]}),e.jsxs(ce,{className:"overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsx(ye,{className:"h-9 w-64"})}),e.jsx("div",{className:"divide-y",children:Array.from({length:6}).map((s,t)=>e.jsxs("div",{className:"flex items-center gap-4 p-4",children:[e.jsx(ye,{className:"h-10 w-10 rounded-md"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(ye,{className:"h-4 w-32"}),e.jsx(ye,{className:"h-3 w-24"})]}),e.jsx(ye,{className:"h-5 w-16"}),e.jsx(ye,{className:"h-4 w-20"})]},t))})]})]})}function T_(){Un("Invoices");const{toast:s}=mt(),[t,n]=p.useState(""),[r,o]=p.useState("all"),[l,d]=p.useState(!1),[u,h]=p.useState(null),{data:f,isLoading:v}=_e({queryKey:["/api/invoices"]}),{data:x}=_e({queryKey:["/api/overdue-invoices"]}),{data:g}=_e({queryKey:["/api/customers"]}),[j,N]=p.useState(null),[b,k]=p.useState(!1),[E,S]=p.useState(null),[T,P]=p.useState("3"),[H,re]=p.useState("monthly"),{data:B}=_e({queryKey:["/api/payment-plans"]}),Q=we({mutationFn:async A=>(N(A),(await je("POST",`/api/invoices/${A}/send`)).json()),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/invoices"]}),s({title:"Invoice sent",description:"The invoice has been emailed to the client."}),N(null)},onError:A=>{s({title:"Send failed",description:A.message||"Could not send invoice email.",variant:"destructive"}),N(null)}}),G=we({mutationFn:async({id:A,status:W})=>(await je("PATCH",`/api/invoices/${A}/status`,{status:W})).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/invoices"]}),xe.invalidateQueries({queryKey:["/api/overdue-invoices"]}),xe.invalidateQueries({queryKey:["/api/dashboard/stats"]}),s({title:"Invoice updated",description:"Invoice status has been changed."})}}),ue=we({mutationFn:async({invoiceId:A,numberOfInstallments:W,frequency:Z})=>(await je("POST",`/api/invoices/${A}/payment-plan`,{numberOfInstallments:W,frequency:Z})).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/payment-plans"]}),s({title:"Payment plan created",description:"The payment plan has been set up and is waiting for the client to accept."}),k(!1)},onError:A=>{s({title:"Failed to create plan",description:A.message||"Could not create payment plan.",variant:"destructive"})}}),_=we({mutationFn:async A=>(await je("DELETE",`/api/payment-plans/${A}`)).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/payment-plans"]}),s({title:"Plan cancelled",description:"The payment plan has been cancelled."})},onError:A=>{s({title:"Failed to cancel",description:A.message||"Could not cancel plan.",variant:"destructive"})}}),Y=we({mutationFn:async A=>(await je("DELETE",`/api/invoices/${A}`)).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/invoices"]}),xe.invalidateQueries({queryKey:["/api/dashboard/stats"]}),s({title:"Invoice deleted",description:"The draft invoice has been removed."})},onError:A=>{s({title:"Delete failed",description:A.message||"Could not delete invoice.",variant:"destructive"})}}),z=(A,W)=>{const Z=document.createElement("a");Z.href=`/api/invoices/${A}/pdf`,Z.download=`${W}.pdf`,Z.click()},J=async A=>{try{const Z=await(await je("GET",`/api/invoices/${A}`)).json();h(Z),d(!0)}catch(W){s({title:"Error",description:W.message||"Could not load invoice details.",variant:"destructive"})}};if(v)return e.jsx(E_,{});const X=new Map(g?.map(A=>[A.id,A])??[]),$=f?.filter(A=>{if(r!=="all"&&A.status!==r)return!1;if(!t)return!0;const W=t.toLowerCase();return A.invoiceNumber.toLowerCase().includes(W)||A.status.toLowerCase().includes(W)||(X.get(A.customerId)?.name??"").toLowerCase().includes(W)||(X.get(A.customerId)?.company??"").toLowerCase().includes(W)})??[],I=f?.reduce((A,W)=>(A[W.status]=(A[W.status]||0)+1,A),{})??{};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight","data-testid":"text-page-title",children:"Invoices"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage and track all billing invoices"})]}),x&&x.length>0&&e.jsx(ce,{className:"p-4 border-red-200 dark:border-red-900/50 bg-red-50 dark:bg-red-950/20","data-testid":"alert-overdue-invoices",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Fn,{className:"w-5 h-5 text-red-600 dark:text-red-400 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-red-700 dark:text-red-400",children:[x.length," overdue invoice",x.length>1?"s":""]}),e.jsxs("p",{className:"text-xs text-red-600/80 dark:text-red-400/80 mt-0.5",children:[x.map(A=>A.invoiceNumber).join(", "),"  follow up with clients to collect payment."]})]})]})}),e.jsx("div",{className:"flex items-center gap-2 flex-wrap","data-testid":"status-filter-bar",children:[{value:"all",label:"All",icon:Gt},{value:"draft",label:"Draft",icon:Wt},{value:"pending",label:"Pending",icon:os},{value:"paid",label:"Paid",icon:wn},{value:"overdue",label:"Overdue",icon:Fn}].map(({value:A,label:W,icon:Z})=>e.jsxs(L,{variant:r===A?"default":"outline",size:"sm",onClick:()=>o(A),className:"gap-1.5","data-testid":`filter-status-${A}`,children:[e.jsx(Z,{className:"w-3.5 h-3.5"}),W,A!=="all"&&I[A]?e.jsx(Ce,{variant:"secondary",className:"ml-1 text-[10px]",children:I[A]}):A==="all"&&f?e.jsx(Ce,{variant:"secondary",className:"ml-1 text-[10px]",children:f.length}):null]},A))}),e.jsxs(ce,{className:"overflow-hidden",children:[e.jsx("div",{className:"flex items-center gap-3 flex-wrap p-4 border-b",children:e.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[e.jsx(sn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(Oe,{placeholder:"Search invoices...",value:t,onChange:A=>n(A.target.value),className:"pl-9","data-testid":"input-search-invoices"})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-muted/30",children:[e.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Invoice"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Due Date"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"text-right py-3 px-4 text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"py-3 px-4"})]})}),e.jsx("tbody",{children:$.length>0?$.map(A=>{const W=X.get(A.customerId);return e.jsxs("tr",{className:"border-b last:border-b-0","data-testid":`row-invoice-${A.id}`,children:[e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-9 h-9 rounded-md bg-muted shrink-0",children:e.jsx(Gt,{className:"w-4 h-4 text-muted-foreground"})}),e.jsx("span",{className:"font-medium",children:A.invoiceNumber})]})}),e.jsx("td",{className:"py-3 px-4 text-muted-foreground",children:W?.company||W?.name||""}),e.jsx("td",{className:"py-3 px-4 text-muted-foreground",children:qs(A.issuedAt)}),e.jsx("td",{className:"py-3 px-4 text-muted-foreground",children:qs(A.dueDate)}),e.jsx("td",{className:"py-3 px-4",children:e.jsx(Ce,{variant:"secondary",className:`text-xs ${Jn(A.status)}`,children:A.status})}),e.jsx("td",{className:"py-3 px-4 text-right font-medium",children:Fe(A.totalAmountCents,A.currency??"USD")}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[e.jsx(L,{size:"icon",variant:"ghost",onClick:()=>J(A.id),"data-testid":`button-view-invoice-${A.id}`,children:e.jsx(Oo,{className:"w-4 h-4"})}),e.jsx(L,{size:"icon",variant:"ghost",onClick:()=>z(A.id,A.invoiceNumber),"data-testid":`button-download-pdf-${A.id}`,children:e.jsx(jo,{className:"w-4 h-4"})}),A.status!=="paid"&&e.jsx(L,{size:"icon",variant:"ghost",onClick:()=>Q.mutate(A.id),disabled:j===A.id,"data-testid":`button-send-invoice-${A.id}`,children:j===A.id?e.jsx(We,{className:"w-4 h-4 animate-spin"}):e.jsx(os,{className:"w-4 h-4"})}),(A.status==="pending"||A.status==="overdue")&&e.jsx(L,{size:"icon",variant:"ghost",onClick:()=>G.mutate({id:A.id,status:"paid"}),"data-testid":`button-mark-paid-${A.id}`,children:e.jsx(wn,{className:"w-4 h-4"})}),e.jsx(L,{size:"icon",variant:"ghost",onClick:()=>{confirm("Delete this invoice? This cannot be undone.")&&Y.mutate(A.id)},"data-testid":`button-delete-invoice-${A.id}`,children:e.jsx(ls,{className:"w-4 h-4 text-destructive"})})]})})]},A.id)}):e.jsx("tr",{children:e.jsxs("td",{colSpan:9,className:"py-12 text-center",children:[e.jsx(Gt,{className:"w-10 h-10 text-muted-foreground mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t?"No invoices match your search":"No invoices found"})]})})})]})})]}),e.jsx(yt,{open:l,onOpenChange:d,children:e.jsxs(xt,{className:"max-w-2xl max-h-[85vh] overflow-y-auto",children:[e.jsx(gt,{children:e.jsxs(vt,{className:"flex items-center gap-3","data-testid":"text-invoice-detail-title",children:[e.jsx(Gt,{className:"w-5 h-5 text-primary"}),"Invoice ",u?.invoiceNumber]})}),u&&e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"p-3 rounded-md bg-muted/40","data-testid":"detail-customer",children:[e.jsx("p",{className:"text-[11px] text-muted-foreground uppercase tracking-wider mb-1",children:"Customer"}),e.jsx("p",{className:"text-sm font-medium truncate",children:u.customerName||X.get(u.customerId)?.company||X.get(u.customerId)?.name||""})]}),u.projectName&&e.jsxs("div",{className:"p-3 rounded-md bg-muted/40","data-testid":"detail-project",children:[e.jsx("p",{className:"text-[11px] text-muted-foreground uppercase tracking-wider mb-1",children:"Project"}),e.jsxs("p",{className:"text-sm font-medium truncate flex items-center gap-1.5",children:[e.jsx(qn,{className:"w-3.5 h-3.5 text-muted-foreground shrink-0"}),u.projectName]})]}),e.jsxs("div",{className:"p-3 rounded-md bg-muted/40","data-testid":"detail-issued",children:[e.jsx("p",{className:"text-[11px] text-muted-foreground uppercase tracking-wider mb-1",children:"Issued"}),e.jsx("p",{className:"text-sm font-medium",children:qs(u.issuedAt)})]}),e.jsxs("div",{className:"p-3 rounded-md bg-muted/40","data-testid":"detail-due",children:[e.jsx("p",{className:"text-[11px] text-muted-foreground uppercase tracking-wider mb-1",children:"Due"}),e.jsx("p",{className:"text-sm font-medium",children:qs(u.dueDate)})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-3 px-1",children:[e.jsx(Ce,{variant:"secondary",className:`text-xs ${Jn(u.status)}`,"data-testid":"detail-status",children:u.status}),e.jsx("span",{className:"text-lg font-bold","data-testid":"detail-total",children:Fe(u.totalAmountCents)})]}),u.lineItems&&u.lineItems.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider mb-2 px-1",children:"Line Items"}),e.jsx("div",{className:"border rounded-md overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-muted/30 border-b",children:[e.jsx("th",{className:"text-left py-2 px-3 text-xs font-medium text-muted-foreground",children:"Item"}),e.jsx("th",{className:"text-right py-2 px-3 text-xs font-medium text-muted-foreground",children:"Qty"}),e.jsx("th",{className:"text-right py-2 px-3 text-xs font-medium text-muted-foreground",children:"Rate"}),e.jsx("th",{className:"text-right py-2 px-3 text-xs font-medium text-muted-foreground",children:"Total"})]})}),e.jsx("tbody",{children:u.lineItems.map(A=>e.jsxs("tr",{className:"border-b last:border-b-0","data-testid":`detail-line-item-${A.id}`,children:[e.jsx("td",{className:"py-2 px-3",children:A.description}),e.jsx("td",{className:"py-2 px-3 text-right",children:Number(A.quantity)}),e.jsx("td",{className:"py-2 px-3 text-right text-muted-foreground",children:Fe(A.unitPrice)}),e.jsx("td",{className:"py-2 px-3 text-right font-medium",children:Fe(A.totalCents)})]},A.id))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-muted/20",children:[e.jsx("td",{colSpan:3,className:"py-2 px-3 text-right font-semibold text-xs uppercase tracking-wider",children:"Total"}),e.jsx("td",{className:"py-2 px-3 text-right font-bold",children:Fe(u.totalAmountCents)})]})})]})})]}),u.workEntries&&u.workEntries.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider mb-2 px-1",children:"Work Breakdown"}),e.jsx("div",{className:"border rounded-md overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-muted/30 border-b",children:[e.jsx("th",{className:"text-left py-2 px-3 text-xs font-medium text-muted-foreground",children:"Type"}),e.jsx("th",{className:"text-left py-2 px-3 text-xs font-medium text-muted-foreground",children:"Description"}),e.jsx("th",{className:"text-right py-2 px-3 text-xs font-medium text-muted-foreground",children:"Qty"}),e.jsx("th",{className:"text-right py-2 px-3 text-xs font-medium text-muted-foreground",children:"Date"})]})}),e.jsx("tbody",{children:u.workEntries.map(A=>e.jsxs("tr",{className:"border-b last:border-b-0","data-testid":`detail-work-entry-${A.id}`,children:[e.jsxs("td",{className:"py-2 px-3",children:[e.jsx("span",{className:"font-medium",children:A.rateName||""}),A.unitLabel&&e.jsxs("span",{className:"text-muted-foreground text-xs ml-1",children:["(",Fe(A.rateCents),"/",A.unitLabel,")"]})]}),e.jsx("td",{className:"py-2 px-3 text-muted-foreground max-w-[180px] truncate",children:A.description||""}),e.jsx("td",{className:"py-2 px-3 text-right",children:Number(A.quantity)}),e.jsx("td",{className:"py-2 px-3 text-right text-muted-foreground text-xs",children:A.recordedAt?qs(A.recordedAt):""})]},A.id))})]})})]}),(()=>{const A=B?.find(W=>W.invoiceId===u.id&&(W.status==="pending"||W.status==="active"));return A?e.jsx("div",{className:"p-3 rounded-md border bg-muted/30","data-testid":"card-existing-plan",children:e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Zc,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Payment Plan"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[A.numberOfInstallments," ",A.frequency," payments of ",Fe(A.installmentAmountCents)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{variant:"secondary",className:`text-xs ${Jn(A.status)}`,children:A.status==="pending"?"Awaiting Client":`${A.installmentsPaid}/${A.numberOfInstallments} paid`}),e.jsx(L,{size:"icon",variant:"ghost",onClick:()=>{confirm("Cancel this payment plan?")&&_.mutate(A.id)},"data-testid":"button-cancel-plan",children:e.jsx(zn,{className:"w-4 h-4 text-muted-foreground"})})]})]})}):null})(),e.jsxs("div",{className:"flex gap-2 pt-2 flex-wrap",children:[e.jsxs(L,{variant:"outline",className:"flex-1",onClick:()=>z(u.id,u.invoiceNumber),"data-testid":"button-download-pdf-dialog",children:[e.jsx(jo,{className:"w-4 h-4 mr-2"}),"Download PDF"]}),u.status!=="paid"&&e.jsxs(L,{className:"flex-1",onClick:()=>{Q.mutate(u.id),d(!1)},disabled:j===u.id,"data-testid":"button-send-invoice-dialog",children:[j===u.id?e.jsx(We,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(os,{className:"w-4 h-4 mr-2"}),"Email Invoice"]}),u.status!=="paid"&&!B?.find(A=>A.invoiceId===u.id&&(A.status==="pending"||A.status==="active"))&&e.jsxs(L,{variant:"outline",className:"flex-1",onClick:()=>{S(u),P("3"),re("monthly"),k(!0)},"data-testid":"button-create-payment-plan",children:[e.jsx(Zc,{className:"w-4 h-4 mr-2"}),"Payment Plan"]})]})]})]})}),e.jsx(yt,{open:b,onOpenChange:k,children:e.jsxs(xt,{className:"max-w-md",children:[e.jsx(gt,{children:e.jsx(vt,{children:"Create Payment Plan"})}),E&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-3 rounded-md bg-muted/30 border",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Invoice Total"}),e.jsx("p",{className:"text-lg font-semibold","data-testid":"text-plan-total",children:Fe(E.totalAmountCents)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:E.invoiceNumber})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1.5 block",children:"Number of Installments"}),e.jsxs(Dt,{value:T,onValueChange:P,children:[e.jsx(It,{"data-testid":"select-installments",children:e.jsx($t,{})}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"2",children:"2 payments"}),e.jsx(Ie,{value:"3",children:"3 payments"}),e.jsx(Ie,{value:"4",children:"4 payments"}),e.jsx(Ie,{value:"6",children:"6 payments"}),e.jsx(Ie,{value:"12",children:"12 payments"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1.5 block",children:"Frequency"}),e.jsxs(Dt,{value:H,onValueChange:re,children:[e.jsx(It,{"data-testid":"select-frequency",children:e.jsx($t,{})}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"weekly",children:"Weekly"}),e.jsx(Ie,{value:"biweekly",children:"Every 2 Weeks"}),e.jsx(Ie,{value:"monthly",children:"Monthly"})]})]})]})]}),e.jsxs("div",{className:"p-3 rounded-md border bg-muted/10",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Each payment"}),e.jsx("span",{className:"font-semibold","data-testid":"text-installment-amount",children:Fe(Math.ceil(E.totalAmountCents/Number(T)))})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[T," ",H," payments  Stripe handles collection automatically"]})]}),e.jsxs(L,{className:"w-full",onClick:()=>{ue.mutate({invoiceId:E.id,numberOfInstallments:Number(T),frequency:H})},disabled:ue.isPending,"data-testid":"button-confirm-create-plan",children:[ue.isPending?e.jsx(We,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(Zc,{className:"w-4 h-4 mr-2"}),"Create Payment Plan"]})]})]})})]})}function A_(){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsx(ye,{className:"h-8 w-32 mb-1"}),e.jsx(ye,{className:"h-4 w-56"})]}),e.jsx(ye,{className:"h-9 w-36"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from({length:6}).map((s,t)=>e.jsxs(ce,{className:"p-5",children:[e.jsx(ye,{className:"h-6 w-40 mb-3"}),e.jsx(ye,{className:"h-4 w-32 mb-2"}),e.jsx(ye,{className:"h-4 w-24"})]},t))})]})}function P_(){const{toast:s}=mt(),[t,n]=p.useState(!1),[r,o]=p.useState(!1),[l,d]=p.useState(""),[u,h]=p.useState(""),[f,v]=p.useState(!1),[x,g]=p.useState({description:"",agentCost:"",markupPercent:"50",customerId:"",projectId:""}),{data:j}=_e({queryKey:["/api/agent-costs"]}),{data:N}=_e({queryKey:["/api/agent-costs/summary"]}),{data:b}=_e({queryKey:["/api/projects"]}),{data:k}=_e({queryKey:["/api/customers"]}),{data:E}=_e({queryKey:["/api/invoices"]}),S=we({mutationFn:async I=>(await je("POST","/api/agent-costs",I)).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/agent-costs"]}),xe.invalidateQueries({queryKey:["/api/agent-costs/summary"]}),g({description:"",agentCost:"",markupPercent:"50",customerId:"",projectId:""}),n(!1),s({title:"Cost logged",description:"Agent cost entry has been recorded."})},onError:I=>{s({title:"Error",description:I.message,variant:"destructive"})}}),T=we({mutationFn:async I=>{await je("DELETE",`/api/agent-costs/${I}`)},onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/agent-costs"]}),xe.invalidateQueries({queryKey:["/api/agent-costs/summary"]}),s({title:"Entry removed",description:"Agent cost entry has been deleted."})}}),P=we({mutationFn:async I=>(await je("POST","/api/invoices/generate-from-agent-costs",I)).json(),onSuccess:I=>{xe.invalidateQueries({queryKey:["/api/agent-costs"]}),xe.invalidateQueries({queryKey:["/api/agent-costs/summary"]}),xe.invalidateQueries({queryKey:["/api/invoices"]}),o(!1),d(""),h(""),s({title:"Invoice created",description:`Invoice ${I.invoiceNumber} for ${Fe(I.totalAmountCents)} has been generated. Go to Invoices to send it.`})},onError:I=>{s({title:"Error",description:I.message,variant:"destructive"})}}),H=I=>{I.preventDefault();const A=Math.round(Number(x.agentCost)*100);if(A<=0){s({title:"Invalid cost",description:"Enter a valid agent cost amount.",variant:"destructive"});return}S.mutate({description:x.description,agentCostCents:A,markupPercent:Number(x.markupPercent),projectId:x.projectId||void 0,customerId:x.customerId||void 0})},re=Number(x.agentCost)||0,B=Number(x.markupPercent)||50,Q=re*(1+B/100),G=Q-re,ue=new Map(b?.map(I=>[I.id,I.name])||[]),_=new Map(E?.map(I=>[I.id,I])||[]),Y=new Map(k?.map(I=>[I.id,I])||[]),z=j?.filter(I=>!I.invoiceId)||[];z.reduce((I,A)=>I+A.clientChargeCents,0);const J=k?.filter(I=>z.some(A=>A.customerId===I.id))||[],X=l?z.filter(I=>I.customerId===l&&(!u||I.projectId===u)):[],$=X.reduce((I,A)=>I+A.clientChargeCents,0);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(id,{className:"w-5 h-5 text-primary"}),e.jsx("h2",{className:"text-xl font-semibold tracking-tight","data-testid":"text-agent-costs-title",children:"Agent Cost Tracker"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Log AI agent coding costs and auto-calculate client charges with markup"})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[z.length>0&&e.jsxs(L,{variant:"outline",onClick:()=>o(!0),"data-testid":"button-generate-agent-invoice",children:[e.jsx(Gt,{className:"w-4 h-4 mr-2"}),"Generate Invoice (",z.length," unbilled)"]}),e.jsxs(L,{onClick:()=>n(!t),"data-testid":"button-log-agent-cost",children:[e.jsx(Qt,{className:"w-4 h-4 mr-2"}),"Log Cost"]})]})]}),N&&N.totalEntries>0&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs(ce,{className:"p-4",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Your Cost"}),e.jsx("p",{className:"text-lg font-bold","data-testid":"text-total-agent-cost",children:Fe(N.totalAgentCostCents)})]}),e.jsxs(ce,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(ug,{className:"w-3 h-3 text-green-500"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Client Charge"})]}),e.jsx("p",{className:"text-lg font-bold","data-testid":"text-total-client-charge",children:Fe(N.totalClientChargeCents)})]}),e.jsxs(ce,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(yg,{className:"w-3 h-3 text-green-500"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Profit"})]}),e.jsx("p",{className:"text-lg font-bold text-green-600 dark:text-green-400","data-testid":"text-total-profit",children:Fe(N.totalProfitCents)})]})]}),N&&N.byProject&&N.byProject.length>0&&e.jsxs(ce,{className:"p-4",children:[e.jsxs("button",{onClick:()=>v(!f),className:"flex items-center justify-between gap-3 w-full text-left","data-testid":"button-toggle-breakdown",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qn,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-semibold",children:"Cost Breakdown by Project"}),e.jsxs(Ce,{variant:"secondary",className:"text-xs",children:[N.byProject.length," project",N.byProject.length!==1?"s":""]})]}),f?e.jsx(Io,{className:"w-4 h-4 text-muted-foreground"}):e.jsx(Sr,{className:"w-4 h-4 text-muted-foreground"})]}),f&&e.jsxs("div",{className:"mt-4 space-y-0",children:[e.jsxs("div",{className:"grid grid-cols-5 gap-3 pb-2 border-b text-xs font-medium text-muted-foreground uppercase tracking-wider",children:[e.jsx("span",{className:"col-span-1",children:"Project"}),e.jsx("span",{className:"text-right",children:"Entries"}),e.jsx("span",{className:"text-right",children:"Your Cost"}),e.jsx("span",{className:"text-right",children:"Client Charge"}),e.jsx("span",{className:"text-right",children:"Profit"})]}),N.byProject.map(I=>{const A=I.projectId==="unassigned"?"Unassigned":ue.get(I.projectId)||"Unknown Project";return e.jsxs("div",{className:"grid grid-cols-5 gap-3 py-3 border-b last:border-b-0 text-sm items-center","data-testid":`row-breakdown-${I.projectId}`,children:[e.jsx("span",{className:"col-span-1 font-medium truncate",children:A}),e.jsx("span",{className:"text-right text-muted-foreground",children:I.count}),e.jsx("span",{className:"text-right",children:Fe(I.agentCost)}),e.jsx("span",{className:"text-right",children:Fe(I.clientCharge)}),e.jsx("span",{className:"text-right font-medium text-green-600 dark:text-green-400",children:Fe(I.profit)})]},I.projectId)}),e.jsxs("div",{className:"grid grid-cols-5 gap-3 pt-3 text-sm font-semibold border-t",children:[e.jsx("span",{className:"col-span-1",children:"Totals"}),e.jsx("span",{className:"text-right",children:N.totalEntries}),e.jsx("span",{className:"text-right",children:Fe(N.totalAgentCostCents)}),e.jsx("span",{className:"text-right",children:Fe(N.totalClientChargeCents)}),e.jsx("span",{className:"text-right text-green-600 dark:text-green-400",children:Fe(N.totalProfitCents)})]})]})]}),t&&e.jsx(ce,{className:"p-5",children:e.jsxs("form",{onSubmit:H,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"cost-desc",children:"Description *"}),e.jsx(Oe,{id:"cost-desc",placeholder:"e.g., Homepage design session, Bug fixes, New feature build",value:x.description,onChange:I=>g(A=>({...A,description:I.target.value})),required:!0,"data-testid":"input-agent-cost-description"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"cost-amount",children:"Agent Cost ($) *"}),e.jsx(Oe,{id:"cost-amount",type:"number",min:"0.01",step:"0.01",placeholder:"4.35",value:x.agentCost,onChange:I=>g(A=>({...A,agentCost:I.target.value})),required:!0,"data-testid":"input-agent-cost-amount"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"cost-markup",children:"Markup %"}),e.jsx(Oe,{id:"cost-markup",type:"number",min:"0",step:"1",value:x.markupPercent,onChange:I=>g(A=>({...A,markupPercent:I.target.value})),"data-testid":"input-agent-cost-markup"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{children:"Customer"}),e.jsxs(Dt,{value:x.customerId||"none",onValueChange:I=>g(A=>({...A,customerId:I==="none"?"":I,projectId:""})),children:[e.jsx(It,{"data-testid":"select-agent-cost-customer",children:e.jsx($t,{placeholder:"Select customer"})}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"none",children:"No customer"}),k?.map(I=>e.jsx(Ie,{value:I.id,children:I.company||I.name},I.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{children:"Project"}),e.jsxs(Dt,{value:x.projectId||"none",onValueChange:I=>{const A=I==="none"?"":I,W=b?.find(Z=>Z.id===A);g(Z=>({...Z,projectId:A,customerId:W?.customerId||Z.customerId}))},children:[e.jsx(It,{"data-testid":"select-agent-cost-project",children:e.jsx($t,{placeholder:"Select project"})}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"none",children:"No project"}),(x.customerId?b?.filter(I=>I.customerId===x.customerId):b)?.map(I=>e.jsx(Ie,{value:I.id,children:I.name},I.id))]})]})]})]}),re>0&&e.jsx(ce,{className:"p-4 bg-muted/50",children:e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Your cost:"})," ",e.jsxs("span",{className:"font-semibold",children:["$",re.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-muted-foreground",children:["+ ",B,"% markup ="]})," ",e.jsxs("span",{className:"font-bold text-green-600 dark:text-green-400",children:["$",Q.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Profit:"})," ",e.jsxs("span",{className:"font-semibold text-green-600 dark:text-green-400",children:["$",G.toFixed(2)]})]})]})}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(L,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsx(L,{type:"submit",disabled:S.isPending,"data-testid":"button-save-agent-cost",children:S.isPending?"Saving...":"Log Cost"})]})]})}),j&&j.length>0?e.jsx("div",{className:"space-y-2",children:j.map(I=>e.jsx(ce,{className:"p-4","data-testid":`card-agent-cost-${I.id}`,children:e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("p",{className:"font-medium text-sm truncate","data-testid":`text-agent-cost-desc-${I.id}`,children:I.description}),I.customerId&&Y.get(I.customerId)&&e.jsx(Ce,{variant:"outline",className:"text-xs shrink-0",children:Y.get(I.customerId)?.company||Y.get(I.customerId)?.name}),I.projectId&&ue.get(I.projectId)&&e.jsx(Ce,{variant:"secondary",className:"text-xs shrink-0",children:ue.get(I.projectId)})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-muted-foreground flex-wrap",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Um,{className:"w-3 h-3"}),I.sessionDate?new Date(I.sessionDate).toLocaleDateString():""]}),e.jsxs("span",{children:[I.markupPercent,"% markup"]}),(()=>{if(!I.invoiceId)return e.jsx(Ce,{variant:"outline",className:"text-xs bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400 border-amber-200 dark:border-amber-800","data-testid":`badge-status-${I.id}`,children:"Unbilled"});const A=_.get(I.invoiceId);if(!A)return e.jsx(Ce,{variant:"secondary",className:"text-xs","data-testid":`badge-status-${I.id}`,children:"Invoiced"});switch(A.status){case"draft":return e.jsxs(Ce,{variant:"outline",className:"text-xs bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400 border-blue-200 dark:border-blue-800","data-testid":`badge-status-${I.id}`,children:[e.jsx(os,{className:"w-3 h-3 mr-1"}),"Needs Sending"]});case"pending":return e.jsxs(Ce,{variant:"outline",className:"text-xs bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400 border-orange-200 dark:border-orange-800","data-testid":`badge-status-${I.id}`,children:[e.jsx(Wt,{className:"w-3 h-3 mr-1"}),"Unpaid"]});case"overdue":return e.jsxs(Ce,{variant:"outline",className:"text-xs bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 border-red-200 dark:border-red-800","data-testid":`badge-status-${I.id}`,children:[e.jsx(Fn,{className:"w-3 h-3 mr-1"}),"Overdue"]});case"paid":return e.jsxs(Ce,{variant:"outline",className:"text-xs bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400 border-emerald-200 dark:border-emerald-800","data-testid":`badge-status-${I.id}`,children:[e.jsx(wn,{className:"w-3 h-3 mr-1"}),"Paid"]});default:return e.jsx(Ce,{variant:"secondary",className:"text-xs","data-testid":`badge-status-${I.id}`,children:A.status})}})()]})]}),e.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Cost"}),e.jsx("p",{className:"text-sm font-medium",children:Fe(I.agentCostCents)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Charge"}),e.jsx("p",{className:"text-sm font-bold text-green-600 dark:text-green-400","data-testid":`text-agent-charge-${I.id}`,children:Fe(I.clientChargeCents)})]}),e.jsx(L,{size:"icon",variant:"ghost",onClick:()=>T.mutate(I.id),"data-testid":`button-delete-agent-cost-${I.id}`,children:e.jsx(ls,{className:"w-4 h-4"})})]})]})},I.id))}):t?null:e.jsxs(ce,{className:"p-8 text-center",children:[e.jsx(id,{className:"w-8 h-8 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:'No agent costs logged yet. Click "Log Cost" to start tracking your AI coding expenses.'})]}),e.jsx(yt,{open:r,onOpenChange:o,children:e.jsxs(xt,{className:"max-w-md",children:[e.jsx(gt,{children:e.jsx(vt,{children:"Generate Invoice from Agent Costs"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create an invoice from unbilled AI development costs. The invoice will appear on the Invoices page where you can send it via email."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{children:"Customer *"}),e.jsxs(Dt,{value:l,onValueChange:I=>{d(I),h("")},children:[e.jsx(It,{"data-testid":"select-invoice-customer",children:e.jsx($t,{placeholder:"Select customer"})}),e.jsx(Ot,{children:J.length>0?J.map(I=>e.jsx(Ie,{value:I.id,children:I.company||I.name},I.id)):k?.map(I=>e.jsx(Ie,{value:I.id,children:I.company||I.name},I.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{children:"Project (optional)"}),e.jsxs(Dt,{value:u||"all",onValueChange:I=>h(I==="all"?"":I),children:[e.jsx(It,{"data-testid":"select-invoice-project",children:e.jsx($t,{placeholder:"All projects"})}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"all",children:"All projects"}),b?.filter(I=>l?I.customerId===l:!0).map(I=>e.jsx(Ie,{value:I.id,children:I.name},I.id))]})]})]}),l&&e.jsx(ce,{className:"p-4 bg-muted/50",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Unbilled entries"}),e.jsx("span",{className:"font-medium",children:X.length})]}),e.jsxs("div",{className:"flex items-center justify-between gap-3 text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Invoice total"}),e.jsx("span",{className:"font-bold text-lg",children:Fe($)})]}),X.length>0&&e.jsxs("div",{className:"border-t pt-2 mt-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Line items:"}),e.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:X.map(I=>e.jsxs("div",{className:"flex items-center justify-between gap-2 text-xs",children:[e.jsx("span",{className:"truncate",children:I.description}),e.jsx("span",{className:"font-medium shrink-0",children:Fe(I.clientChargeCents)})]},I.id))})]})]})}),e.jsxs(L,{className:"w-full",onClick:()=>{if(!l){s({title:"Select a customer",description:"Please select a customer for this invoice.",variant:"destructive"});return}P.mutate({customerId:l,projectId:u||void 0})},disabled:P.isPending||!l||X.length===0,"data-testid":"button-confirm-generate-invoice",children:[P.isPending?e.jsx(We,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(Gt,{className:"w-4 h-4 mr-2"}),"Generate Invoice"]})]})]})})]})}function R_(){Un("Billing Rates");const{toast:s}=mt(),[t,n]=p.useState(!1),[r,o]=p.useState(null),[l,d]=p.useState({code:"",name:"",description:"",unitLabel:"",rateCents:""}),{data:u,isLoading:h}=_e({queryKey:["/api/billing-rates"]}),f=we({mutationFn:async k=>(await je("POST","/api/billing-rates",k)).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/billing-rates"]}),n(!1),g(),s({title:"Rate created",description:"New billing rate has been added."})},onError:k=>{s({title:"Error",description:k.message,variant:"destructive"})}}),v=we({mutationFn:async({id:k,data:E})=>(await je("PATCH",`/api/billing-rates/${k}`,E)).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/billing-rates"]}),n(!1),o(null),g(),s({title:"Rate updated",description:"Billing rate has been saved."})},onError:k=>{s({title:"Error",description:k.message,variant:"destructive"})}}),x=we({mutationFn:async k=>{await je("DELETE",`/api/billing-rates/${k}`)},onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/billing-rates"]}),s({title:"Rate deleted",description:"Billing rate has been removed."})},onError:k=>{s({title:"Error",description:k.message,variant:"destructive"})}}),g=()=>d({code:"",name:"",description:"",unitLabel:"",rateCents:""}),j=()=>{g(),o(null),n(!0)},N=k=>{o(k),d({code:k.code,name:k.name,description:k.description??"",unitLabel:k.unitLabel,rateCents:String(k.rateCents/100)}),n(!0)},b=k=>{k.preventDefault();const E={code:l.code,name:l.name,description:l.description||void 0,unitLabel:l.unitLabel,rateCents:Math.round(Number(l.rateCents)*100)};r?v.mutate({id:r.id,data:E}):f.mutate(E)};return h?e.jsx(A_,{}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight","data-testid":"text-page-title",children:"Billing Rates"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Configure your per-unit pricing for different types of work"})]}),e.jsxs(L,{onClick:j,"data-testid":"button-add-rate",children:[e.jsx(Qt,{className:"w-4 h-4 mr-2"}),"Add Rate"]})]}),u&&u.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.map(k=>e.jsxs(ce,{className:"p-5","data-testid":`card-rate-${k.id}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-md bg-primary/10 shrink-0",children:e.jsx(rr,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[e.jsx(L,{size:"icon",variant:"ghost",onClick:()=>N(k),"data-testid":`button-edit-rate-${k.id}`,children:e.jsx(kr,{className:"w-4 h-4"})}),e.jsx(L,{size:"icon",variant:"ghost",onClick:()=>x.mutate(k.id),"data-testid":`button-delete-rate-${k.id}`,children:e.jsx(ls,{className:"w-4 h-4"})})]})]}),e.jsx("h3",{className:"font-semibold mb-1","data-testid":`text-rate-name-${k.id}`,children:k.name}),k.description&&e.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:k.description}),e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap mt-auto pt-3 border-t",children:[e.jsxs(Ce,{variant:"secondary",className:"text-xs",children:[e.jsx($l,{className:"w-3 h-3 mr-1"}),k.code]}),e.jsxs("span",{className:"text-sm font-semibold","data-testid":`text-rate-price-${k.id}`,children:[Fe(k.rateCents)," / ",k.unitLabel]})]})]},k.id))}):e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(rr,{className:"w-10 h-10 text-muted-foreground mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No billing rates configured. Add your first rate to get started."})]})]}),e.jsx("div",{className:"border-t pt-8",children:e.jsx(P_,{})}),e.jsx(yt,{open:t,onOpenChange:n,children:e.jsxs(xt,{children:[e.jsx(gt,{children:e.jsx(vt,{children:r?"Edit Rate":"Add Billing Rate"})}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"rate-name",children:"Name *"}),e.jsx(Oe,{id:"rate-name",placeholder:"e.g., Page Design",value:l.name,onChange:k=>d(E=>({...E,name:k.target.value})),required:!0,"data-testid":"input-rate-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"rate-code",children:"Code *"}),e.jsx(Oe,{id:"rate-code",placeholder:"e.g., page_design",value:l.code,onChange:k=>d(E=>({...E,code:k.target.value})),required:!0,"data-testid":"input-rate-code"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"rate-price",children:"Price ($) *"}),e.jsx(Oe,{id:"rate-price",type:"number",min:"0",step:"0.01",placeholder:"200.00",value:l.rateCents,onChange:k=>d(E=>({...E,rateCents:k.target.value})),required:!0,"data-testid":"input-rate-price"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"rate-unit",children:"Per Unit *"}),e.jsx(Oe,{id:"rate-unit",placeholder:"e.g., page, asset, session",value:l.unitLabel,onChange:k=>d(E=>({...E,unitLabel:k.target.value})),required:!0,"data-testid":"input-rate-unit"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"rate-desc",children:"Description"}),e.jsx(fs,{id:"rate-desc",placeholder:"What this rate covers",value:l.description,onChange:k=>d(E=>({...E,description:k.target.value})),"data-testid":"input-rate-description"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(L,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsx(L,{type:"submit",disabled:f.isPending||v.isPending,"data-testid":"button-save-rate",children:f.isPending||v.isPending?"Saving...":r?"Save Changes":"Add Rate"})]})]})]})})]})}var gk={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Zb=ot.createContext&&ot.createContext(gk),__=["attr","size","title"];function I_(s,t){if(s==null)return{};var n=O_(s,t),r,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);for(o=0;o<l.length;o++)r=l[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(s,r)&&(n[r]=s[r])}return n}function O_(s,t){if(s==null)return{};var n={};for(var r in s)if(Object.prototype.hasOwnProperty.call(s,r)){if(t.indexOf(r)>=0)continue;n[r]=s[r]}return n}function Cm(){return Cm=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(s[r]=n[r])}return s},Cm.apply(this,arguments)}function Jb(s,t){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(s,o).enumerable})),n.push.apply(n,r)}return n}function Sm(s){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Jb(Object(n),!0).forEach(function(r){L_(s,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):Jb(Object(n)).forEach(function(r){Object.defineProperty(s,r,Object.getOwnPropertyDescriptor(n,r))})}return s}function L_(s,t,n){return t=M_(t),t in s?Object.defineProperty(s,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[t]=n,s}function M_(s){var t=D_(s,"string");return typeof t=="symbol"?t:t+""}function D_(s,t){if(typeof s!="object"||!s)return s;var n=s[Symbol.toPrimitive];if(n!==void 0){var r=n.call(s,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(s)}function vk(s){return s&&s.map((t,n)=>ot.createElement(t.tag,Sm({key:n},t.attr),vk(t.child)))}function Wg(s){return t=>ot.createElement($_,Cm({attr:Sm({},s.attr)},t),vk(s.child))}function $_(s){var t=n=>{var{attr:r,size:o,title:l}=s,d=I_(s,__),u=o||n.size||"1em",h;return n.className&&(h=n.className),s.className&&(h=(h?h+" ":"")+s.className),ot.createElement("svg",Cm({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,d,{className:h,style:Sm(Sm({color:s.color||n.color},n.style),s.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),l&&ot.createElement("title",null,l),s.children)};return Zb!==void 0?ot.createElement(Zb.Consumer,null,n=>t(n)):t(gk)}function q_(s){return Wg({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16.015 14.378c0-.32-.135-.496-.344-.622-.21-.12-.464-.135-.81-.135h-1.543v2.82h.675v-1.027h.72c.24 0 .39.024.478.125.12.13.104.38.104.55v.35h.66v-.555c-.002-.25-.017-.376-.108-.516-.06-.08-.18-.18-.33-.234l.02-.008c.18-.072.48-.297.48-.747zm-.87.407l-.028-.002c-.09.053-.195.058-.33.058h-.81v-.63h.824c.12 0 .24 0 .33.05.098.048.156.147.15.255 0 .12-.045.215-.134.27zM20.297 15.837H19v.6h1.304c.676 0 1.05-.278 1.05-.884 0-.28-.066-.448-.187-.582-.153-.133-.392-.193-.73-.207l-.376-.015c-.104 0-.18 0-.255-.03-.09-.03-.15-.105-.15-.21 0-.09.017-.166.09-.21.083-.046.177-.066.272-.06h1.23v-.602h-1.35c-.704 0-.958.437-.958.84 0 .9.776.855 1.407.87.104 0 .18.015.225.06.046.03.082.106.082.18 0 .077-.035.15-.08.18-.06.053-.15.07-.277.07zM0 0v10.096L.81 8.22h1.75l.225.464V8.22h2.043l.45 1.02.437-1.013h6.502c.295 0 .56.057.756.236v-.23h1.787v.23c.307-.17.686-.23 1.12-.23h2.606l.24.466v-.466h1.918l.254.465v-.466h1.858v3.948H20.87l-.36-.6v.585h-2.353l-.256-.63h-.583l-.27.614h-1.213c-.48 0-.84-.104-1.08-.24v.24h-2.89v-.884c0-.12-.03-.12-.105-.135h-.105v1.036H6.067v-.48l-.21.48H4.69l-.202-.48v.465H2.235l-.256-.624H1.4l-.256.624H0V24h23.786v-7.108c-.27.135-.613.18-.973.18H21.09v-.255c-.21.165-.57.255-.914.255H14.71v-.9c0-.12-.018-.12-.12-.12h-.075v1.022h-1.8v-1.066c-.298.136-.643.15-.928.136h-.214v.915h-2.18l-.54-.617-.57.6H4.742v-3.93h3.61l.518.602.554-.6h2.412c.28 0 .74.03.942.225v-.24h2.177c.202 0 .644.045.903.225v-.24h3.265v.24c.163-.164.508-.24.803-.24h1.89v.24c.194-.15.464-.24.84-.24h1.176V0H0zM21.156 14.955c.004.005.006.012.01.016.01.01.024.01.032.02l-.042-.035zM23.828 13.082h.065v.555h-.065zM23.865 15.03v-.005c-.03-.025-.046-.048-.075-.07-.15-.153-.39-.215-.764-.225l-.36-.012c-.12 0-.194-.007-.27-.03-.09-.03-.15-.105-.15-.21 0-.09.03-.16.09-.204.076-.045.15-.05.27-.05h1.223v-.588h-1.283c-.69 0-.96.437-.96.84 0 .9.78.855 1.41.87.104 0 .18.015.224.06.046.03.076.106.076.18 0 .07-.034.138-.09.18-.045.056-.136.07-.27.07h-1.288v.605h1.287c.42 0 .734-.118.9-.36h.03c.09-.134.135-.3.135-.523 0-.24-.045-.39-.135-.526zM18.597 14.208v-.583h-2.235V16.458h2.235v-.585h-1.57v-.57h1.533v-.584h-1.532v-.51M13.51 8.787h.685V11.6h-.684zM13.126 9.543l-.007.006c0-.314-.13-.5-.34-.624-.217-.125-.47-.135-.81-.135H10.43v2.82h.674v-1.034h.72c.24 0 .39.03.487.12.122.136.107.378.107.548v.354h.677v-.553c0-.25-.016-.375-.11-.516-.09-.107-.202-.19-.33-.237.172-.07.472-.3.472-.75zm-.855.396h-.015c-.09.054-.195.056-.33.056H11.1v-.623h.825c.12 0 .24.004.33.05.09.04.15.128.15.25s-.047.22-.134.266zM15.92 9.373h.632v-.6h-.644c-.464 0-.804.105-1.02.33-.286.3-.362.69-.362 1.11 0 .512.123.833.36 1.074.232.238.645.31.97.31h.78l.255-.627h1.39l.262.627h1.36v-2.11l1.272 2.11h.95l.002.002V8.786h-.684v1.963l-1.18-1.96h-1.02V11.4L18.11 8.744h-1.004l-.943 2.22h-.3c-.177 0-.362-.03-.468-.134-.125-.15-.186-.36-.186-.662 0-.285.08-.51.194-.63.133-.135.272-.165.516-.165zm1.668-.108l.464 1.118v.002h-.93l.466-1.12zM2.38 10.97l.254.628H4V9.393l.972 2.205h.584l.973-2.202.015 2.202h.69v-2.81H6.118l-.807 1.904-.876-1.905H3.343v2.663L2.205 8.787h-.997L.01 11.597h.72l.26-.626h1.39zm-.688-1.705l.46 1.118-.003.002h-.915l.457-1.12zM11.856 13.62H9.714l-.85.923-.825-.922H5.346v2.82H8l.855-.932.824.93h1.302v-.94h.838c.6 0 1.17-.164 1.17-.945l-.006-.003c0-.78-.598-.93-1.128-.93zM7.67 15.853l-.014-.002H6.02v-.557h1.47v-.574H6.02v-.51H7.7l.733.82-.764.824zm2.642.33l-1.03-1.147 1.03-1.108v2.253zm1.553-1.258h-.885v-.717h.885c.24 0 .42.098.42.344 0 .243-.15.372-.42.372zM9.967 9.373v-.586H7.73V11.6h2.237v-.58H8.4v-.564h1.527V9.88H8.4v-.507"},child:[]}]})(s)}function F_(s){return Wg({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M11.343 18.031c.058.049.12.098.181.146-1.177.783-2.59 1.238-4.107 1.238C3.32 19.416 0 16.096 0 12c0-4.095 3.32-7.416 7.416-7.416 1.518 0 2.931.456 4.105 1.238-.06.051-.12.098-.165.15C9.6 7.489 8.595 9.688 8.595 12c0 2.311 1.001 4.51 2.748 6.031zm5.241-13.447c-1.52 0-2.931.456-4.105 1.238.06.051.12.098.165.15C14.4 7.489 15.405 9.688 15.405 12c0 2.31-1.001 4.507-2.748 6.031-.058.049-.12.098-.181.146 1.177.783 2.588 1.238 4.107 1.238C20.68 19.416 24 16.096 24 12c0-4.094-3.32-7.416-7.416-7.416zM12 6.174c-.096.075-.189.15-.28.231C10.156 7.764 9.169 9.765 9.169 12c0 2.236.987 4.236 2.551 5.595.09.08.185.158.28.232.096-.074.189-.152.28-.232 1.563-1.359 2.551-3.359 2.551-5.595 0-2.235-.987-4.236-2.551-5.595-.09-.08-.184-.156-.28-.231z"},child:[]}]})(s)}function z_(s){return Wg({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M9.112 8.262L5.97 15.758H3.92L2.374 9.775c-.094-.368-.175-.503-.461-.658C1.447 8.864.677 8.627 0 8.479l.046-.217h3.3a.904.904 0 01.894.764l.817 4.338 2.018-5.102zm8.033 5.049c.008-1.979-2.736-2.088-2.717-2.972.006-.269.262-.555.822-.628a3.66 3.66 0 011.913.336l.34-1.59a5.207 5.207 0 00-1.814-.333c-1.917 0-3.266 1.02-3.278 2.479-.012 1.079.963 1.68 1.698 2.04.756.367 1.01.603 1.006.931-.005.504-.602.725-1.16.734-.975.015-1.54-.263-1.992-.473l-.351 1.642c.453.208 1.289.39 2.156.398 2.037 0 3.37-1.006 3.377-2.564m5.061 2.447H24l-1.565-7.496h-1.656a.883.883 0 00-.826.55l-2.909 6.946h2.036l.405-1.12h2.488zm-2.163-2.656l1.02-2.815.588 2.815zm-8.16-4.84l-1.603 7.496H8.34l1.605-7.496z"},child:[]}]})(s)}function U_(s){switch(s?.toLowerCase()){case"visa":return e.jsx(z_,{className:"w-8 h-5 text-blue-600 dark:text-blue-400"});case"mastercard":return e.jsx(F_,{className:"w-8 h-5 text-orange-500"});case"amex":return e.jsx(q_,{className:"w-8 h-5 text-blue-500"});default:return e.jsx(Ti,{className:"w-6 h-5 text-muted-foreground"})}}function B_(){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(ye,{className:"h-8 w-48 mb-1"}),e.jsx(ye,{className:"h-4 w-64"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Array.from({length:3}).map((s,t)=>e.jsx(ce,{className:"p-5",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ye,{className:"h-12 w-16 rounded-md"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(ye,{className:"h-5 w-36"}),e.jsx(ye,{className:"h-4 w-24"})]})]})},t))})]})}function H_(){Un("Payment Methods");const{data:s,isLoading:t}=_e({queryKey:["/api/payment-methods"]});return t?e.jsx(B_,{}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight","data-testid":"text-page-title",children:"Payment Methods"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage your saved payment methods"})]}),s&&s.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map(n=>e.jsx(ce,{className:"p-5","data-testid":`card-payment-${n.id}`,children:e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-14 h-10 rounded-md bg-muted shrink-0",children:U_(n.brand)}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("p",{className:"font-medium capitalize",children:[n.brand||n.type," ending in ",n.last4]}),n.isDefault&&e.jsxs(Ce,{variant:"secondary",className:"text-xs bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400",children:[e.jsx(ys,{className:"w-3 h-3 mr-1"}),"Default"]})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Expires ",n.expiryMonth?.toString().padStart(2,"0"),"/",n.expiryYear]})]})]}),e.jsx(L,{size:"icon",variant:"ghost","data-testid":`button-more-${n.id}`,children:e.jsx(eT,{className:"w-4 h-4"})})]})},n.id))}):e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(bg,{className:"w-10 h-10 text-muted-foreground mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No payment methods saved"})]})]})}var Vg="Switch",[K_]=Jr(Vg),[W_,V_]=K_(Vg),yk=p.forwardRef((s,t)=>{const{__scopeSwitch:n,name:r,checked:o,defaultChecked:l,required:d,disabled:u,value:h="on",onCheckedChange:f,form:v,...x}=s,[g,j]=p.useState(null),N=qt(t,T=>j(T)),b=p.useRef(!1),k=g?v||!!g.closest("form"):!0,[E=!1,S]=Ka({prop:o,defaultProp:l,onChange:f});return e.jsxs(W_,{scope:n,checked:E,disabled:u,children:[e.jsx(lt.button,{type:"button",role:"switch","aria-checked":E,"aria-required":d,"data-state":wk(E),"data-disabled":u?"":void 0,disabled:u,value:h,...x,ref:N,onClick:Me(s.onClick,T=>{S(P=>!P),k&&(b.current=T.isPropagationStopped(),b.current||T.stopPropagation())})}),k&&e.jsx(G_,{control:g,bubbles:!b.current,name:r,value:h,checked:E,required:d,disabled:u,form:v,style:{transform:"translateX(-100%)"}})]})});yk.displayName=Vg;var bk="SwitchThumb",jk=p.forwardRef((s,t)=>{const{__scopeSwitch:n,...r}=s,o=V_(bk,n);return e.jsx(lt.span,{"data-state":wk(o.checked),"data-disabled":o.disabled?"":void 0,...r,ref:t})});jk.displayName=bk;var G_=s=>{const{control:t,checked:n,bubbles:r=!0,...o}=s,l=p.useRef(null),d=_2(n),u=fN(t);return p.useEffect(()=>{const h=l.current,f=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(f,"checked").set;if(d!==n&&x){const g=new Event("click",{bubbles:r});x.call(h,n),h.dispatchEvent(g)}},[d,n,r]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...o,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function wk(s){return s?"checked":"unchecked"}var Nk=yk,Q_=jk;const sd=p.forwardRef(({className:s,...t},n)=>e.jsx(Nk,{className:ze("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...t,ref:n,children:e.jsx(Q_,{className:ze("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));sd.displayName=Nk.displayName;function Y_(){Un("Settings"),mt();const{data:s}=_e({queryKey:["/api/deploy/status"]});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight","data-testid":"text-page-title",children:"Settings"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Configuration and how-to guide"})]}),e.jsxs(ce,{className:"p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-md bg-primary/10 shrink-0",children:e.jsx(_i,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold",children:"How to Use This Dashboard"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Step-by-step guide to billing your clients"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary text-primary-foreground text-sm font-semibold shrink-0",children:"1"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(rr,{className:"w-4 h-4 text-muted-foreground shrink-0"}),e.jsx("h3",{className:"font-semibold text-sm",children:"Set Up Your Billing Rates"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Go to ",e.jsx("strong",{children:"Billing Rates"})," in the sidebar. This is where you set your prices. For example: Page Design = $200 per page, Image Creation = $25 per image. You can add, edit, or delete rates anytime. These rates are already pre-filled with common web design services."]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary text-primary-foreground text-sm font-semibold shrink-0",children:"2"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Vr,{className:"w-4 h-4 text-muted-foreground shrink-0"}),e.jsx("h3",{className:"font-semibold text-sm",children:"Add Your Clients"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Go to ",e.jsx("strong",{children:"Customers"})," in the sidebar. Click ",e.jsx("strong",{children:"Add Customer"}),". Fill in their name, email, company name, and phone. That's it. You can edit or delete them later if needed."]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary text-primary-foreground text-sm font-semibold shrink-0",children:"3"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(qn,{className:"w-4 h-4 text-muted-foreground shrink-0"}),e.jsx("h3",{className:"font-semibold text-sm",children:"Create a Project"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Go to ",e.jsx("strong",{children:"Projects"})," in the sidebar. Click ",e.jsx("strong",{children:"New Project"}),'. Pick the customer from the dropdown, give the project a name (like "Restaurant Website Redesign"), and add a description if you want. Click ',e.jsx("strong",{children:"Create Project"}),"."]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary text-primary-foreground text-sm font-semibold shrink-0",children:"4"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Wt,{className:"w-4 h-4 text-muted-foreground shrink-0"}),e.jsx("h3",{className:"font-semibold text-sm",children:"Log Your Work"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground leading-relaxed",children:["This is the main thing you do day to day. When you finish doing something for a client, go to ",e.jsx("strong",{children:"Projects"}),", find their project, and click ",e.jsx("strong",{children:"Log Work"}),"."]}),e.jsxs("div",{className:"mt-2 p-3 rounded-md bg-muted/50 text-sm space-y-2",children:[e.jsx("p",{className:"font-medium",children:"Example:"}),e.jsx("p",{className:"text-muted-foreground",children:"You just designed 2 pages for Sarah's restaurant website."}),e.jsxs("ol",{className:"list-decimal list-inside text-muted-foreground space-y-1",children:[e.jsxs("li",{children:["Go to ",e.jsx("strong",{children:"Projects"})]}),e.jsx("li",{children:'Find "Restaurant Website Redesign"'}),e.jsxs("li",{children:["Click ",e.jsx("strong",{children:"Log Work"})]}),e.jsxs("li",{children:["Select ",e.jsx("strong",{children:'"Page Design ($200.00/page)"'})]}),e.jsxs("li",{children:["Set quantity to ",e.jsx("strong",{children:"2"})]}),e.jsx("li",{children:'Add a note like "Homepage and menu page"'}),e.jsxs("li",{children:["Click ",e.jsx("strong",{children:"Log Work"})]})]}),e.jsxs("p",{className:"text-muted-foreground",children:["The system calculates: 2 pages x $200 = ",e.jsx("strong",{children:"$400"}),". Done."]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"You can log as many entries as you want. They all pile up under the project until you create an invoice."})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary text-primary-foreground text-sm font-semibold shrink-0",children:"5"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Wa,{className:"w-4 h-4 text-muted-foreground shrink-0"}),e.jsx("h3",{className:"font-semibold text-sm",children:"Generate an Invoice"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground leading-relaxed",children:["When you're ready to bill the client, go to ",e.jsx("strong",{children:"Projects"}),", find their project, and click ",e.jsx("strong",{children:"Generate Invoice"}),". The system adds up all the unbilled work, applies your tax rate, and creates an invoice automatically."]}),e.jsxs("div",{className:"mt-2 p-3 rounded-md bg-muted/50 text-sm space-y-2",children:[e.jsx("p",{className:"font-medium",children:"Example invoice breakdown:"}),e.jsxs("ul",{className:"text-muted-foreground space-y-1",children:[e.jsx("li",{children:"2x Page Design @ $200 = $400"}),e.jsx("li",{children:"5x Image Assets @ $25 = $125"}),e.jsx("li",{children:"1x Consultation @ $100 = $100"}),e.jsx("li",{className:"pt-1 border-t font-medium text-foreground",children:"Subtotal: $625"}),e.jsx("li",{children:"Tax (10%): $62.50"}),e.jsx("li",{className:"font-semibold text-foreground",children:"Total: $687.50"})]})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["You can view all your invoices on the ",e.jsx("strong",{children:"Invoices"})," page, and mark them as paid when the client pays you."]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary text-primary-foreground text-sm font-semibold shrink-0",children:"6"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(_s,{className:"w-4 h-4 text-muted-foreground shrink-0"}),e.jsx("h3",{className:"font-semibold text-sm",children:"Share the Client Portal"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground leading-relaxed",children:["Each customer gets their own private portal link. Go to ",e.jsx("strong",{children:"Customers"}),", find the client, and click ",e.jsx("strong",{children:"Portal Link"})," to copy it. Send this link to your client so they can view their invoices, project status, and payment history anytime."]}),e.jsxs("div",{className:"mt-2 p-3 rounded-md bg-muted/50 text-sm space-y-2",children:[e.jsx("p",{className:"font-medium",children:"What the client sees:"}),e.jsxs("ul",{className:"text-muted-foreground space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Their total amount due and payment history"}),e.jsx("li",{children:"All their projects and current status"}),e.jsx("li",{children:"Every invoice with full line-item detail"}),e.jsx("li",{children:"Overdue alerts if any invoices are past due"})]})]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary text-primary-foreground text-sm font-semibold shrink-0",children:"7"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(os,{className:"w-4 h-4 text-muted-foreground shrink-0"}),e.jsx("h3",{className:"font-semibold text-sm",children:"Email Invoices to Clients"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground leading-relaxed",children:["You can email invoices directly to your clients. Go to ",e.jsx("strong",{children:"Invoices"}),", find the invoice, and click the ",e.jsx("strong",{children:"send icon"})," (paper airplane). The client receives a professional email with the full invoice breakdown and a link to their portal."]}),e.jsxs("div",{className:"mt-2 p-3 rounded-md bg-muted/50 text-sm space-y-2",children:[e.jsx("p",{className:"font-medium",children:"You can also send from the detail view:"}),e.jsxs("ol",{className:"list-decimal list-inside text-muted-foreground space-y-1",children:[e.jsxs("li",{children:["Click the ",e.jsx("strong",{children:"eye icon"})," on any invoice to view details"]}),e.jsxs("li",{children:["Click ",e.jsx("strong",{children:'"Email Invoice to Client"'})]}),e.jsx("li",{children:"The invoice is emailed, and draft invoices are automatically marked as pending"})]})]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary text-primary-foreground text-sm font-semibold shrink-0",children:"8"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Fn,{className:"w-4 h-4 text-muted-foreground shrink-0"}),e.jsx("h3",{className:"font-semibold text-sm",children:"Track Overdue Invoices"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground leading-relaxed",children:["The system automatically tracks overdue invoices. When an invoice passes its due date (30 days after you create it), it turns ",e.jsx("strong",{children:"red"}),' and shows as "overdue" everywhere: on the ',e.jsx("strong",{children:"Overview"}),", the ",e.jsx("strong",{children:"Invoices"})," page, and in the client's portal. You'll see a red alert banner reminding you to follow up with the client."]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs(ce,{className:"p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-md bg-primary/10 shrink-0",children:e.jsx(bo,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold",children:"Notifications"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Configure billing alerts"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Invoice notifications"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Get notified when invoices are generated"})]}),e.jsx(sd,{"data-testid":"switch-invoice-notif"})]}),e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Payment alerts"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Get notified on successful payments"})]}),e.jsx(sd,{"data-testid":"switch-payment-notif"})]}),e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Unbilled work reminders"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Remind you about unbilled work entries"})]}),e.jsx(sd,{"data-testid":"switch-unbilled-notif"})]})]})]}),e.jsxs(ce,{className:"p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-md bg-primary/10 shrink-0",children:e.jsx(nn,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold",children:"Regional Settings"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Currency and locale preferences"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"currency",children:"Default Currency"}),e.jsx(Oe,{id:"currency",value:"USD",disabled:!0,"data-testid":"input-currency"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"timezone",children:"Timezone"}),e.jsx(Oe,{id:"timezone",value:"America/New_York",disabled:!0,"data-testid":"input-timezone"})]})]})]})]}),e.jsxs(ce,{className:"p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-md bg-primary/10 shrink-0",children:e.jsx(hs,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold",children:"Email-to-Ticket Setup"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically create support tickets from incoming emails"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-3 rounded-md bg-muted/50 text-sm space-y-2",children:[e.jsxs("p",{className:"text-muted-foreground",children:["When someone sends an email to ",e.jsx("strong",{children:"hello@aipoweredsites.com"}),", a support ticket is automatically created in the system. To enable this:"]}),e.jsxs("ol",{className:"list-decimal list-inside text-muted-foreground space-y-1 pl-2",children:[e.jsxs("li",{children:["Go to your ",e.jsx("strong",{children:"Resend Dashboard"})," and navigate to ",e.jsx("strong",{children:"Webhooks"})]}),e.jsx("li",{children:"Add a new webhook endpoint with this URL:"})]}),e.jsxs("div",{className:"p-2 rounded bg-muted font-mono text-xs break-all","data-testid":"text-webhook-url",children:[window.location.origin,"/api/webhooks/resend/inbound"]}),e.jsxs("ol",{className:"list-decimal list-inside text-muted-foreground space-y-1 pl-2",start:3,children:[e.jsxs("li",{children:["Select the ",e.jsx("strong",{children:"email.received"})," event type"]}),e.jsx("li",{children:"Save the webhook and you're done"})]})]}),e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsx(CT,{className:"w-4 h-4 text-muted-foreground mt-0.5 shrink-0"}),e.jsx("p",{className:"text-muted-foreground",children:"Quote form submissions from the landing page also automatically create support tickets."})]})]})]}),e.jsxs(ce,{className:"p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-md bg-teal-500/10 shrink-0",children:e.jsx(wo,{className:"w-5 h-5 text-teal-600 dark:text-teal-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"font-semibold",children:"Deploy Platforms"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Connect one or more platforms to deploy client sites"})]})]}),e.jsxs("div",{className:"p-3 rounded-md bg-muted/30 text-sm text-muted-foreground mb-5",children:[e.jsx("strong",{children:"How it works:"})," Build client sites on Replit  push to GitHub  platform auto-deploys  client sees the live preview link. Choose the right platform for each project type."]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"p-4 rounded-lg border border-teal-500/20 bg-teal-500/5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"w-7 h-7 rounded bg-teal-500/10 text-teal-600 dark:text-teal-400 font-bold text-sm flex items-center justify-center",children:"N"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-sm",children:"Netlify"}),e.jsx("p",{className:"text-[11px] text-muted-foreground",children:"Static sites & JAMstack  Free tier: unlimited sites, 100GB bandwidth"})]}),s?.netlify?.configured&&e.jsxs(Ce,{variant:"outline",className:"border-green-500/30 text-green-600 dark:text-green-400 text-[10px]",children:[e.jsx(is,{className:"w-3 h-3 mr-1"})," Connected"]})]}),e.jsxs("div",{className:"space-y-2 text-xs text-muted-foreground",children:[e.jsxs("p",{children:["1. Sign up at ",e.jsx("a",{href:"https://app.netlify.com/signup",target:"_blank",rel:"noopener noreferrer",className:"underline underline-offset-2",children:"netlify.com"})]}),e.jsxs("p",{children:["2. Go to ",e.jsx("strong",{children:"User Settings  Applications  Personal access tokens"}),"  create token"]}),e.jsxs("p",{children:["3. Add secret: ",e.jsx("code",{className:"px-1 py-0.5 rounded bg-muted text-[11px] font-mono",children:"NETLIFY_API_TOKEN"})]}),e.jsxs("p",{children:["4. Connect GitHub in Netlify: ",e.jsx("strong",{children:"User Settings  Applications"})]})]})]}),e.jsxs("div",{className:"p-4 rounded-lg border border-blue-500/20 bg-blue-500/5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"w-7 h-7 rounded bg-blue-500/10 text-blue-600 dark:text-blue-400 font-bold text-sm flex items-center justify-center",children:"V"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-sm",children:"Vercel"}),e.jsx("p",{className:"text-[11px] text-muted-foreground",children:"Static & serverless apps  Free tier: unlimited deploys, 100GB bandwidth"})]}),s?.vercel?.configured&&e.jsxs(Ce,{variant:"outline",className:"border-green-500/30 text-green-600 dark:text-green-400 text-[10px]",children:[e.jsx(is,{className:"w-3 h-3 mr-1"})," Connected"]})]}),e.jsxs("div",{className:"space-y-2 text-xs text-muted-foreground",children:[e.jsxs("p",{children:["1. Sign up at ",e.jsx("a",{href:"https://vercel.com/signup",target:"_blank",rel:"noopener noreferrer",className:"underline underline-offset-2",children:"vercel.com"})]}),e.jsxs("p",{children:["2. Go to ",e.jsx("strong",{children:"Settings  Tokens"}),"  create token (full account scope)"]}),e.jsxs("p",{children:["3. Add secret: ",e.jsx("code",{className:"px-1 py-0.5 rounded bg-muted text-[11px] font-mono",children:"VERCEL_API_TOKEN"})]}),e.jsxs("p",{children:["4. Connect GitHub in Vercel: ",e.jsx("strong",{children:"Settings  Git  Connect GitHub"})]})]})]}),e.jsxs("div",{className:"p-4 rounded-lg border border-purple-500/20 bg-purple-500/5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"w-7 h-7 rounded bg-purple-500/10 text-purple-600 dark:text-purple-400 font-bold text-sm flex items-center justify-center",children:"R"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-sm",children:"Railway"}),e.jsx("p",{className:"text-[11px] text-muted-foreground",children:"Docker & full-stack apps  Free trial: $5 credit, then $5/mo + usage"})]}),s?.railway?.configured&&e.jsxs(Ce,{variant:"outline",className:"border-green-500/30 text-green-600 dark:text-green-400 text-[10px]",children:[e.jsx(is,{className:"w-3 h-3 mr-1"})," Connected"]})]}),e.jsxs("div",{className:"space-y-2 text-xs text-muted-foreground",children:[e.jsxs("p",{children:["1. Sign up at ",e.jsx("a",{href:"https://railway.app",target:"_blank",rel:"noopener noreferrer",className:"underline underline-offset-2",children:"railway.app"})]}),e.jsxs("p",{children:["2. Go to ",e.jsx("strong",{children:"Account Settings  Tokens"}),"  create API token"]}),e.jsxs("p",{children:["3. Add secret: ",e.jsx("code",{className:"px-1 py-0.5 rounded bg-muted text-[11px] font-mono",children:"RAILWAY_API_TOKEN"})]}),e.jsxs("p",{children:["4. Connect GitHub in Railway: ",e.jsx("strong",{children:"Account Settings  Source"})]})]})]}),e.jsxs("div",{className:"p-3 rounded-md bg-amber-500/5 border border-amber-500/20 text-xs text-muted-foreground",children:[e.jsx("strong",{className:"text-amber-600 dark:text-amber-400",children:"Which to choose?"})," Use ",e.jsx("strong",{children:"Netlify"})," for simple HTML/CSS/React sites. Use ",e.jsx("strong",{children:"Vercel"})," for Next.js or serverless apps. Use ",e.jsx("strong",{children:"Railway"})," for Docker containers and full-stack apps with databases. You can connect all three and choose per project."]})]})]})]})}function am(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?am=function(t){return typeof t}:am=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},am(s)}var kk="clover",X_=function(t){return t===3?"v3":t},Ck="https://js.stripe.com",Z_="".concat(Ck,"/").concat(kk,"/stripe.js"),J_=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,eI=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,tI=function(t){return J_.test(t)||eI.test(t)},sI=function(){for(var t=document.querySelectorAll('script[src^="'.concat(Ck,'"]')),n=0;n<t.length;n++){var r=t[n];if(tI(r.src))return r}return null},e1=function(t){var n="",r=document.createElement("script");r.src="".concat(Z_).concat(n);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(r),r},nI=function(t,n){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"8.7.0",startTime:n})},Mc=null,Du=null,$u=null,rI=function(t){return function(n){t(new Error("Failed to load Stripe.js",{cause:n}))}},aI=function(t,n){return function(){window.Stripe?t(window.Stripe):n(new Error("Stripe.js not available"))}},iI=function(t){return Mc!==null?Mc:(Mc=new Promise(function(n,r){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe){n(window.Stripe);return}try{var o=sI();if(!(o&&t)){if(!o)o=e1(t);else if(o&&$u!==null&&Du!==null){var l;o.removeEventListener("load",$u),o.removeEventListener("error",Du),(l=o.parentNode)===null||l===void 0||l.removeChild(o),o=e1(t)}}$u=aI(n,r),Du=rI(r),o.addEventListener("load",$u),o.addEventListener("error",Du)}catch(d){r(d);return}}),Mc.catch(function(n){return Mc=null,Promise.reject(n)}))},oI=function(t,n,r){if(t===null)return null;var o=n[0];if(typeof o!="string")throw new Error("Expected publishable key to be of type string, got type ".concat(am(o)," instead."));var l=o.match(/^pk_test/),d=X_(t.version),u=kk;l&&d!==u&&console.warn("Stripe.js@".concat(d," was loaded on the page, but @stripe/stripe-js@").concat("8.7.0"," expected Stripe.js@").concat(u,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var h=t.apply(void 0,n);return nI(h,r),h},Dc,Sk=!1,Ek=function(){return Dc||(Dc=iI(null).catch(function(t){return Dc=null,Promise.reject(t)}),Dc)};Promise.resolve().then(function(){return Ek()}).catch(function(s){Sk||console.warn(s)});var lI=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Sk=!0;var o=Date.now();return Ek().then(function(l){return oI(l,n,o)})},wp={exports:{}},Np,t1;function cI(){if(t1)return Np;t1=1;var s="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Np=s,Np}var kp,s1;function dI(){if(s1)return kp;s1=1;var s=cI();function t(){}function n(){}return n.resetWarningCache=t,kp=function(){function r(d,u,h,f,v,x){if(x!==s){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}r.isRequired=r;function o(){return r}var l={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:o,element:r,elementType:r,instanceOf:o,node:r,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:n,resetWarningCache:t};return l.PropTypes=l,l},kp}var n1;function uI(){return n1||(n1=1,wp.exports=dI()()),wp.exports}var mI=uI();const Vt=yd(mI);function r1(s,t){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(s,o).enumerable})),n.push.apply(n,r)}return n}function a1(s){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?r1(Object(n),!0).forEach(function(r){Tk(s,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):r1(Object(n)).forEach(function(r){Object.defineProperty(s,r,Object.getOwnPropertyDescriptor(n,r))})}return s}function im(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?im=function(t){return typeof t}:im=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},im(s)}function Tk(s,t,n){return t in s?Object.defineProperty(s,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[t]=n,s}function hI(s,t){if(s==null)return{};var n={},r=Object.keys(s),o,l;for(l=0;l<r.length;l++)o=r[l],!(t.indexOf(o)>=0)&&(n[o]=s[o]);return n}function fI(s,t){if(s==null)return{};var n=hI(s,t),r,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);for(o=0;o<l.length;o++)r=l[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(s,r)&&(n[r]=s[r])}return n}function Ak(s,t){return pI(s)||xI(s,t)||gI(s,t)||vI()}function pI(s){if(Array.isArray(s))return s}function xI(s,t){var n=s&&(typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"]);if(n!=null){var r=[],o=!0,l=!1,d,u;try{for(n=n.call(s);!(o=(d=n.next()).done)&&(r.push(d.value),!(t&&r.length===t));o=!0);}catch(h){l=!0,u=h}finally{try{!o&&n.return!=null&&n.return()}finally{if(l)throw u}}return r}}function gI(s,t){if(s){if(typeof s=="string")return i1(s,t);var n=Object.prototype.toString.call(s).slice(8,-1);if(n==="Object"&&s.constructor&&(n=s.constructor.name),n==="Map"||n==="Set")return Array.from(s);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i1(s,t)}}function i1(s,t){(t==null||t>s.length)&&(t=s.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=s[n];return r}function vI(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var bn=function(t,n,r){var o=!!r,l=ot.useRef(r);ot.useEffect(function(){l.current=r},[r]),ot.useEffect(function(){if(!o||!t)return function(){};var d=function(){l.current&&l.current.apply(l,arguments)};return t.on(n,d),function(){t.off(n,d)}},[o,n,t,l])},wx=function(t){var n=ot.useRef(t);return ot.useEffect(function(){n.current=t},[t]),n.current},zl=function(t){return t!==null&&im(t)==="object"},yI=function(t){return zl(t)&&typeof t.then=="function"},bI=function(t){return zl(t)&&typeof t.elements=="function"&&typeof t.createToken=="function"&&typeof t.createPaymentMethod=="function"&&typeof t.confirmCardPayment=="function"},o1="[object Object]",jI=function s(t,n){if(!zl(t)||!zl(n))return t===n;var r=Array.isArray(t),o=Array.isArray(n);if(r!==o)return!1;var l=Object.prototype.toString.call(t)===o1,d=Object.prototype.toString.call(n)===o1;if(l!==d)return!1;if(!l&&!r)return t===n;var u=Object.keys(t),h=Object.keys(n);if(u.length!==h.length)return!1;for(var f={},v=0;v<u.length;v+=1)f[u[v]]=!0;for(var x=0;x<h.length;x+=1)f[h[x]]=!0;var g=Object.keys(f);if(g.length!==u.length)return!1;var j=t,N=n,b=function(E){return s(j[E],N[E])};return g.every(b)},Pk=function(t,n,r){return zl(t)?Object.keys(t).reduce(function(o,l){var d=!zl(n)||!jI(t[l],n[l]);return r.includes(l)?(d&&console.warn("Unsupported prop change: options.".concat(l," is not a mutable property.")),o):d?a1(a1({},o||{}),{},Tk({},l,t[l])):o},null):null},Rk="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",l1=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Rk;if(t===null||bI(t))return t;throw new Error(n)},wI=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Rk;if(yI(t))return{tag:"async",stripePromise:Promise.resolve(t).then(function(o){return l1(o,n)})};var r=l1(t,n);return r===null?{tag:"empty"}:{tag:"sync",stripe:r}},NI=function(t){!t||!t._registerWrapper||!t.registerAppInfo||(t._registerWrapper({name:"react-stripe-js",version:"5.6.0"}),t.registerAppInfo({name:"react-stripe-js",version:"5.6.0",url:"https://stripe.com/docs/stripe-js/react"}))},hh=ot.createContext(null);hh.displayName="ElementsContext";var _k=function(t,n){if(!t)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(n," in an <Elements> provider."));return t},Ik=function(t){var n=t.stripe,r=t.options,o=t.children,l=ot.useMemo(function(){return wI(n)},[n]),d=ot.useState(function(){return{stripe:l.tag==="sync"?l.stripe:null,elements:l.tag==="sync"?l.stripe.elements(r):null}}),u=Ak(d,2),h=u[0],f=u[1];ot.useEffect(function(){var g=!0,j=function(b){f(function(k){return k.stripe?k:{stripe:b,elements:b.elements(r)}})};return l.tag==="async"&&!h.stripe?l.stripePromise.then(function(N){N&&g&&j(N)}):l.tag==="sync"&&!h.stripe&&j(l.stripe),function(){g=!1}},[l,h,r]);var v=wx(n);ot.useEffect(function(){v!==null&&v!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[v,n]);var x=wx(r);return ot.useEffect(function(){if(h.elements){var g=Pk(r,x,["clientSecret","fonts"]);g&&h.elements.update(g)}},[r,x,h.elements]),ot.useEffect(function(){NI(h.stripe)},[h.stripe]),ot.createElement(hh.Provider,{value:h},o)};Ik.propTypes={stripe:Vt.any,options:Vt.object};var kI=function(t){var n=ot.useContext(hh);return _k(n,t)},CI=function(){var t=kI("calls useElements()"),n=t.elements;return n};Vt.func.isRequired;var Ok=ot.createContext(null);Ok.displayName="CheckoutContext";Vt.any,Vt.shape({clientSecret:Vt.oneOfType([Vt.string,Vt.instanceOf(Promise)]).isRequired,elementsOptions:Vt.object}).isRequired;var Nx=function(t){var n=ot.useContext(Ok),r=ot.useContext(hh);if(n){if(r)throw new Error("You cannot wrap the part of your app that ".concat(t," in both <CheckoutProvider> and <Elements> providers."));return n}else return _k(r,t)},SI=["mode"],EI=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},Bn=function(t,n){var r="".concat(EI(t),"Element"),o=function(h){var f=h.id,v=h.className,x=h.options,g=x===void 0?{}:x,j=h.onBlur,N=h.onFocus,b=h.onReady,k=h.onChange,E=h.onEscape,S=h.onClick,T=h.onLoadError,P=h.onLoaderStart,H=h.onNetworksChange,re=h.onConfirm,B=h.onCancel,Q=h.onShippingAddressChange,G=h.onShippingRateChange,ue=h.onSavedPaymentMethodRemove,_=h.onSavedPaymentMethodUpdate,Y=Nx("mounts <".concat(r,">")),z="elements"in Y?Y.elements:null,J="checkoutState"in Y?Y.checkoutState:null,X=J?.type==="success"||J?.type==="loading"?J.sdk:null,$=ot.useState(null),I=Ak($,2),A=I[0],W=I[1],Z=ot.useRef(null),q=ot.useRef(null);bn(A,"blur",j),bn(A,"focus",N),bn(A,"escape",E),bn(A,"click",S),bn(A,"loaderror",T),bn(A,"loaderstart",P),bn(A,"networkschange",H),bn(A,"confirm",re),bn(A,"cancel",B),bn(A,"shippingaddresschange",Q),bn(A,"shippingratechange",G),bn(A,"savedpaymentmethodremove",ue),bn(A,"savedpaymentmethodupdate",_),bn(A,"change",k);var ne;b&&(t==="expressCheckout"?ne=b:ne=function(){b(A)}),bn(A,"ready",ne),ot.useLayoutEffect(function(){if(Z.current===null&&q.current!==null&&(z||X)){var U=null;if(X)switch(t){case"paymentForm":U=X.createPaymentFormElement(g);break;case"payment":U=X.createPaymentElement(g);break;case"address":if("mode"in g){var M=g.mode,F=fI(g,SI);if(M==="shipping")U=X.createShippingAddressElement(F);else if(M==="billing")U=X.createBillingAddressElement(F);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":U=X.createExpressCheckoutElement(g);break;case"currencySelector":U=X.createCurrencySelectorElement();break;case"taxId":U=X.createTaxIdElement(g);break;default:throw new Error("Invalid Element type ".concat(r,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else z&&(U=z.create(t,g));Z.current=U,W(U),U&&U.mount(q.current)}},[z,X,g]);var K=wx(g);return ot.useEffect(function(){if(Z.current){var U=Pk(g,K,["paymentRequest"]);U&&"update"in Z.current&&Z.current.update(U)}},[g,K]),ot.useLayoutEffect(function(){return function(){if(Z.current&&typeof Z.current.destroy=="function")try{Z.current.destroy(),Z.current=null}catch{}}},[]),ot.createElement("div",{id:f,className:v,ref:q})},l=function(h){Nx("mounts <".concat(r,">"));var f=h.id,v=h.className;return ot.createElement("div",{id:f,className:v})},d=n?l:o;return d.propTypes={id:Vt.string,className:Vt.string,onChange:Vt.func,onBlur:Vt.func,onFocus:Vt.func,onReady:Vt.func,onEscape:Vt.func,onClick:Vt.func,onLoadError:Vt.func,onLoaderStart:Vt.func,onNetworksChange:Vt.func,onConfirm:Vt.func,onCancel:Vt.func,onShippingAddressChange:Vt.func,onShippingRateChange:Vt.func,onSavedPaymentMethodRemove:Vt.func,onSavedPaymentMethodUpdate:Vt.func,options:Vt.object},d.displayName=r,d.__elementType=t,d},Hn=typeof window>"u",TI=ot.createContext(null);TI.displayName="EmbeddedCheckoutProviderContext";var AI=function(){var t=Nx("calls useStripe()"),n=t.stripe;return n};Bn("auBankAccount",Hn);var c1=Bn("card",Hn);Bn("cardNumber",Hn);Bn("cardExpiry",Hn);Bn("cardCvc",Hn);Bn("iban",Hn);Bn("payment",Hn);Bn("expressCheckout",Hn);Bn("paymentRequestButton",Hn);Bn("linkAuthentication",Hn);Bn("address",Hn);Bn("shippingAddress",Hn);Bn("paymentMethodMessaging",Hn);Bn("taxId",Hn);const PI="/images/logo.png";let Cp=null;function RI(){return Cp||(Cp=fetch("/api/stripe/publishable-key").then(s=>s.json()).then(s=>lI(s.publishableKey)).catch(()=>null)),Cp}function _I({brand:s}){const t=s.charAt(0).toUpperCase()+s.slice(1);return e.jsx("div",{className:"flex items-center justify-center w-10 h-7 rounded-md border bg-background text-xs font-bold uppercase tracking-wide",children:s==="visa"?"VISA":s==="mastercard"?"MC":s==="amex"?"AMEX":t.substring(0,4)})}function II({token:s,onSuccess:t,onCancel:n}){const r=AI(),o=CI(),[l,d]=p.useState(!1),[u,h]=p.useState(null),{toast:f}=mt(),v=async k=>{if(k.preventDefault(),!(!r||!o)){d(!0),h(null);try{const E=await je("POST",`/api/portal/${s}/setup-intent`),{clientSecret:S}=await E.json(),T=o.getElement(c1);if(!T)throw new Error("Card element not found");const P=await r.confirmCardSetup(S,{payment_method:{card:T}});P.error?h(P.error.message||"Failed to save card"):(f({title:"Card saved",description:"Your payment method has been added."}),t())}catch(E){h(E.message||"Something went wrong")}finally{d(!1)}}},x=document.documentElement.classList.contains("dark"),g=x?"#fafafa":"#171717",j=x?"#a3a3a3":"#666666",N="#ef4444",b=x?"#1a1a1a":"#ffffff";return e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsx("div",{className:"p-4 border rounded-lg",style:{backgroundColor:b},children:e.jsx(c1,{options:{style:{base:{fontSize:"15px",color:g,iconColor:g,"::placeholder":{color:j},fontFamily:"Poppins, sans-serif",fontSmoothing:"antialiased",":-webkit-autofill":{color:g}},invalid:{color:N,iconColor:N}}}})}),u&&e.jsx("p",{className:"text-xs text-destructive",children:u}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(L,{type:"submit",disabled:l||!r,"data-testid":"button-save-card",children:[l?e.jsx(We,{className:"w-4 h-4 mr-1.5 animate-spin"}):e.jsx(Ti,{className:"w-4 h-4 mr-1.5"}),"Save Card"]}),e.jsx(L,{variant:"ghost",type:"button",onClick:n,"data-testid":"button-cancel-add-card",children:"Cancel"})]})]})}function OI({token:s}){const[t,n]=p.useState(!1),[r,o]=p.useState(null),{toast:l}=mt();p.useEffect(()=>{o(RI())},[]);const{data:d,isLoading:u,refetch:h}=_e({queryKey:["/api/portal",s,"payment-methods"],queryFn:async()=>{const g=await fetch(`/api/portal/${s}/payment-methods`);if(!g.ok)throw new Error("Failed to load payment methods");return g.json()},enabled:!!s}),f=we({mutationFn:async g=>(await je("DELETE",`/api/portal/${s}/payment-methods/${g}`)).json(),onSuccess:()=>{h(),l({title:"Card removed",description:"Payment method has been deleted."})},onError:g=>{l({title:"Error",description:g.message||"Could not remove card.",variant:"destructive"})}}),v=we({mutationFn:async g=>(await je("POST",`/api/portal/${s}/default-payment-method`,{paymentMethodId:g})).json(),onSuccess:()=>{h(),l({title:"Default updated",description:"Your default payment method has been changed."})},onError:g=>{l({title:"Error",description:g.message||"Could not set default.",variant:"destructive"})}}),x=d?.paymentMethods||[];return e.jsxs("div",{"data-testid":"card-payment-methods",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap mb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Payment Methods"}),!t&&x.length>0&&e.jsxs(L,{variant:"ghost",size:"sm",onClick:()=>n(!0),"data-testid":"button-add-card",children:[e.jsx(Qt,{className:"w-4 h-4 mr-1"}),"Add Card"]})]}),u?e.jsxs("div",{className:"space-y-3",children:[e.jsx(ye,{className:"h-16 w-full rounded-md"}),e.jsx(ye,{className:"h-16 w-full rounded-md"})]}):e.jsxs(e.Fragment,{children:[x.length===0&&!t&&e.jsxs(ce,{className:"p-8 text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-muted mb-3",children:e.jsx(Ti,{className:"w-5 h-5 text-muted-foreground"})}),e.jsx("p",{className:"text-sm font-medium mb-1",children:"No saved payment methods"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"Add a card for faster checkout"}),e.jsxs(L,{variant:"outline",onClick:()=>n(!0),"data-testid":"button-add-first-card",children:[e.jsx(Qt,{className:"w-4 h-4 mr-1.5"}),"Add Your First Card"]})]}),x.length>0&&e.jsx("div",{className:"space-y-2",children:x.map(g=>e.jsx(ce,{className:"p-4","data-testid":`card-pm-${g.id}`,children:e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_I,{brand:g.brand}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("span",{className:"text-sm font-medium","data-testid":`text-pm-last4-${g.id}`,children:["**** ",g.last4]}),g.isDefault&&e.jsxs(Ce,{variant:"secondary",className:"text-xs",children:[e.jsx(Hr,{className:"w-3 h-3 mr-0.5"}),"Default"]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Expires ",String(g.expMonth).padStart(2,"0"),"/",g.expYear]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[!g.isDefault&&e.jsxs(L,{variant:"ghost",size:"sm",onClick:()=>v.mutate(g.id),disabled:v.isPending,"data-testid":`button-set-default-${g.id}`,children:[e.jsx(Hr,{className:"w-3.5 h-3.5 mr-1"}),"Set Default"]}),e.jsx(L,{variant:"ghost",size:"icon",onClick:()=>{confirm("Remove this card?")&&f.mutate(g.id)},disabled:f.isPending,"data-testid":`button-remove-pm-${g.id}`,children:e.jsx(ls,{className:"w-4 h-4 text-muted-foreground"})})]})]})},g.id))}),t&&r&&e.jsxs(ce,{className:"p-5 mt-3",children:[e.jsx("p",{className:"text-sm font-medium mb-4",children:"Add a new card"}),e.jsx(Ik,{stripe:r,children:e.jsx(II,{token:s,onSuccess:()=>{n(!1),h()},onCancel:()=>n(!1)})})]})]})]})}function LI(){return e.jsxs("div",{className:"min-h-screen bg-muted/30",children:[e.jsx("div",{className:"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-12",children:[e.jsx(ye,{className:"h-10 w-64 bg-white/10"}),e.jsx(ye,{className:"h-5 w-48 mt-3 bg-white/10"})]})}),e.jsxs("div",{className:"max-w-6xl mx-auto px-6 -mt-8",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8",children:[1,2,3].map(s=>e.jsx(ce,{className:"p-6",children:e.jsx(ye,{className:"h-10 w-24"})},s))}),e.jsx("div",{className:"space-y-4",children:[1,2,3].map(s=>e.jsxs(ce,{className:"p-6",children:[e.jsx(ye,{className:"h-6 w-40 mb-3"}),e.jsx(ye,{className:"h-4 w-32"})]},s))})]})]})}function d1(s){switch(s){case"paid":return e.jsx(wn,{className:"w-4 h-4"});case"overdue":return e.jsx(Fn,{className:"w-4 h-4"});default:return e.jsx(Wt,{className:"w-4 h-4"})}}function MI({token:s,projectId:t}){const{toast:n}=mt(),[r,o]=p.useState(!1),{uploadFile:l}=xk({}),{data:d,isLoading:u}=_e({queryKey:["/api/portal",s,"projects",t,"files"],queryFn:async()=>{const g=await fetch(`/api/portal/${s}/projects/${t}/files`);if(!g.ok)throw new Error("Failed to fetch files");return g.json()},enabled:!!s&&!!t}),h=we({mutationFn:async g=>{if(!(await fetch(`/api/portal/${s}/files/${g}`,{method:"DELETE"})).ok)throw new Error("Failed to delete")},onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/portal",s,"projects",t,"files"]}),n({title:"File removed"})}}),f=async g=>{const j=g.target.files;if(!(!j||j.length===0)){o(!0);try{for(let N=0;N<j.length;N++){const b=j[N],k=await l(b);k&&await fetch(`/api/portal/${s}/projects/${t}/files`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({objectPath:k.objectPath,fileName:b.name,fileSize:k.metadata.size,contentType:k.metadata.contentType})})}xe.invalidateQueries({queryKey:["/api/portal",s,"projects",t,"files"]}),n({title:"Files uploaded",description:`${j.length} file${j.length>1?"s":""} uploaded successfully.`})}catch(N){n({title:"Upload failed",description:N.message,variant:"destructive"})}finally{o(!1),g.target.value=""}}},v=g=>g?.startsWith("image/")?e.jsx(Fi,{className:"w-4 h-4 text-blue-500"}):e.jsx(Lw,{className:"w-4 h-4 text-muted-foreground"}),x=g=>g?g<1024?`${g} B`:g<1024*1024?`${(g/1024).toFixed(1)} KB`:`${(g/(1024*1024)).toFixed(1)} MB`:"";return e.jsxs("div",{className:"mt-4 pt-4 border-t","data-testid":`portal-client-files-${t}`,children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-3",children:[e.jsxs("p",{className:"text-xs font-medium text-muted-foreground flex items-center gap-1.5",children:[e.jsx(xm,{className:"w-3.5 h-3.5"}),"Your Files ",d&&d.length>0?`(${d.length})`:""]}),e.jsxs("div",{children:[e.jsx("input",{type:"file",multiple:!0,onChange:f,className:"hidden",id:`client-file-upload-${t}`,"data-testid":`input-client-file-upload-${t}`}),e.jsxs(L,{variant:"outline",size:"sm",onClick:()=>document.getElementById(`client-file-upload-${t}`)?.click(),disabled:r,"data-testid":`button-upload-client-file-${t}`,children:[r?e.jsx(We,{className:"w-3.5 h-3.5 mr-1.5 animate-spin"}):e.jsx(xm,{className:"w-3.5 h-3.5 mr-1.5"}),r?"Uploading...":"Upload Files"]})]})]}),u&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(ye,{className:"h-10 w-full rounded-md"}),e.jsx(ye,{className:"h-10 w-full rounded-md"})]}),d&&d.length>0&&e.jsx("div",{className:"space-y-1.5",children:d.map(g=>e.jsxs("div",{className:"flex items-center gap-3 p-2.5 rounded-md border bg-muted/30","data-testid":`client-file-${g.id}`,children:[v(g.contentType),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-medium truncate",children:g.fileName}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:x(g.fileSize)})]}),e.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[g.contentType?.startsWith("image/")&&e.jsx("a",{href:g.objectPath,target:"_blank",rel:"noreferrer",children:e.jsx(L,{size:"icon",variant:"ghost","data-testid":`button-view-file-${g.id}`,children:e.jsx(Oo,{className:"w-3.5 h-3.5"})})}),e.jsx("a",{href:g.objectPath,download:g.fileName,children:e.jsx(L,{size:"icon",variant:"ghost","data-testid":`button-download-file-${g.id}`,children:e.jsx(jo,{className:"w-3.5 h-3.5"})})}),e.jsx(L,{size:"icon",variant:"ghost",onClick:()=>h.mutate(g.id),disabled:h.isPending,"data-testid":`button-delete-file-${g.id}`,children:e.jsx(ls,{className:"w-3.5 h-3.5"})})]})]},g.id))}),d&&d.length===0&&!u&&e.jsx("p",{className:"text-xs text-muted-foreground text-center py-3",children:"Upload logos, brand assets, or documents for this project."})]})}function DI({token:s,projectId:t}){const[n,r]=p.useState(null),[o,l]=p.useState(""),[d,u]=p.useState(null),{toast:h}=mt(),{data:f,isLoading:v}=_e({queryKey:["/api/portal",s,"projects",t,"screenshots"],queryFn:async()=>{const b=await fetch(`/api/portal/${s}/projects/${t}/screenshots`);if(!b.ok)throw new Error("Failed to fetch screenshots");return b.json()},enabled:!!s&&!!t}),x=we({mutationFn:async b=>{const k=await fetch(`/api/portal/${s}/screenshots/${b}/approve`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!k.ok)throw new Error("Failed to approve");return k.json()},onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/portal",s,"projects",t,"screenshots"]}),h({title:"Approved",description:"Deliverable has been approved."}),r(null)}}),g=we({mutationFn:async({screenshotId:b,notes:k})=>{const E=await fetch(`/api/portal/${s}/screenshots/${b}/revisions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({notes:k})});if(!E.ok)throw new Error("Failed to request revisions");return E.json()},onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/portal",s,"projects",t,"screenshots"]}),h({title:"Revisions Requested",description:"We'll review your feedback."}),l(""),u(null),r(null)}}),j=b=>b.approvalStatus?b.approvalStatus==="pending"?e.jsx(Ce,{variant:"secondary",className:"text-[10px]",children:"Needs Approval"}):b.approvalStatus==="approved"?e.jsx(Ce,{variant:"secondary",className:"text-[10px] bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 border-emerald-500/20",children:"Approved"}):b.approvalStatus==="revisions"?e.jsx(Ce,{variant:"secondary",className:"text-[10px] bg-amber-500/10 text-amber-600 dark:text-amber-400 border-amber-500/20",children:"Revisions Requested"}):null:null;if(v)return e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsx(ye,{className:"h-4 w-24 mb-2"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ye,{className:"w-20 h-20 rounded-md"}),e.jsx(ye,{className:"w-20 h-20 rounded-md"})]})]});if(!f||f.length===0)return null;const N=f.filter(b=>b.approvalStatus==="pending");return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-4 pt-4 border-t","data-testid":`portal-screenshots-${t}`,children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-3",children:[e.jsxs("p",{className:"text-xs font-medium text-muted-foreground flex items-center gap-1.5",children:[e.jsx(Fi,{className:"w-3.5 h-3.5"}),"Screenshots (",f.length,")"]}),N.length>0&&e.jsxs(Ce,{variant:"secondary",className:"text-[10px] bg-blue-500/10 text-blue-600 dark:text-blue-400 border-blue-500/20","data-testid":`badge-needs-approval-${t}`,children:[N.length," awaiting approval"]})]}),e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2",children:f.map(b=>e.jsxs("div",{className:"group relative rounded-md overflow-hidden border cursor-pointer",onClick:()=>r(b),"data-testid":`portal-screenshot-${b.id}`,children:[e.jsxs("div",{className:"aspect-square relative",children:[e.jsx("img",{src:b.objectPath,alt:b.fileName,className:"w-full h-full object-cover",loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors"}),b.approvalStatus==="pending"&&e.jsx("div",{className:"absolute top-1 right-1 w-2.5 h-2.5 rounded-full bg-blue-500 border border-white"}),b.approvalStatus==="approved"&&e.jsx("div",{className:"absolute top-1 right-1 w-2.5 h-2.5 rounded-full bg-emerald-500 border border-white"})]}),e.jsx("p",{className:"text-[10px] text-muted-foreground truncate px-1.5 py-1 border-t",title:b.fileName,"data-testid":`text-portal-screenshot-name-${b.id}`,children:b.fileName})]},b.id))})]}),n&&e.jsx(yt,{open:!!n,onOpenChange:()=>{r(null),u(null),l("")},children:e.jsxs(xt,{className:"max-w-3xl p-2",children:[e.jsx(gt,{children:e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(vt,{className:"text-sm","data-testid":"text-lightbox-name",children:n.fileName}),j(n)]})}),e.jsx("img",{src:n.objectPath,alt:n.fileName,className:"w-full h-auto rounded-md"}),n.approvalStatus==="revisions"&&n.revisionNotes&&e.jsxs("div",{className:"bg-amber-500/10 border border-amber-500/20 rounded-md p-3 text-sm",children:[e.jsx("p",{className:"text-xs font-medium text-amber-600 dark:text-amber-400 mb-1",children:"Your revision notes:"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:n.revisionNotes})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 pt-2",children:[e.jsx("div",{className:"flex gap-2 flex-wrap",children:n.approvalStatus==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs(L,{size:"sm",onClick:()=>x.mutate(n.id),disabled:x.isPending,className:"bg-emerald-600 text-white border-0","data-testid":`button-approve-${n.id}`,children:[x.isPending?e.jsx(We,{className:"w-3.5 h-3.5 mr-1.5 animate-spin"}):e.jsx(vg,{className:"w-3.5 h-3.5 mr-1.5"}),"Approve"]}),e.jsxs(L,{size:"sm",variant:"outline",onClick:()=>u(n.id),"data-testid":`button-request-revisions-${n.id}`,children:[e.jsx(Wm,{className:"w-3.5 h-3.5 mr-1.5"}),"Request Revisions"]})]})}),e.jsx("a",{href:n.objectPath,download:!0,children:e.jsxs(L,{size:"sm",variant:"outline","data-testid":"button-download-screenshot",children:[e.jsx(jo,{className:"w-4 h-4 mr-1.5"}),"Download"]})})]}),d===n.id&&e.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[e.jsx(De,{className:"text-xs",children:"What changes would you like?"}),e.jsx(fs,{value:o,onChange:b=>l(b.target.value),placeholder:"Describe the changes you'd like...",className:"text-sm","data-testid":"input-revision-notes"}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(L,{size:"sm",variant:"ghost",onClick:()=>{u(null),l("")},children:"Cancel"}),e.jsxs(L,{size:"sm",onClick:()=>g.mutate({screenshotId:n.id,notes:o}),disabled:!o.trim()||g.isPending,"data-testid":"button-submit-revisions",children:[g.isPending?e.jsx(We,{className:"w-3.5 h-3.5 mr-1.5 animate-spin"}):e.jsx(os,{className:"w-3.5 h-3.5 mr-1.5"}),"Send Feedback"]})]})]})]})})]})}function $I({token:s}){const{data:t}=_e({queryKey:["/api/portal",s,"notifications"],queryFn:async()=>{const l=await fetch(`/api/portal/${s}/notifications`);if(!l.ok)throw new Error("Failed to fetch notifications");return l.json()},enabled:!!s,refetchInterval:3e4}),n=(t?.notifications||[]).slice(0,5),r=l=>{switch(l){case"project_update":return e.jsx(qn,{className:"w-3.5 h-3.5 text-blue-500"});case"invoice_created":return e.jsx(Wa,{className:"w-3.5 h-3.5 text-emerald-500"});case"ticket_reply":return e.jsx(Kt,{className:"w-3.5 h-3.5 text-purple-500"});case"screenshot_uploaded":return e.jsx(Fi,{className:"w-3.5 h-3.5 text-amber-500"});case"payment_plan_created":return e.jsx(Zc,{className:"w-3.5 h-3.5 text-indigo-500"});default:return e.jsx(bo,{className:"w-3.5 h-3.5 text-muted-foreground"})}},o=l=>{const d=Date.now()-new Date(l).getTime(),u=Math.floor(d/6e4);if(u<1)return"just now";if(u<60)return`${u}m ago`;const h=Math.floor(u/60);return h<24?`${h}h ago`:`${Math.floor(h/24)}d ago`};return n.length===0?null:e.jsxs("div",{"data-testid":"section-recent-activity",children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider mb-4",children:"Recent Activity"}),e.jsx(ce,{className:"divide-y",children:n.map(l=>e.jsxs("div",{className:"flex items-start gap-3 p-3.5","data-testid":`activity-item-${l.id}`,children:[e.jsx("div",{className:"mt-0.5 shrink-0",children:r(l.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:l.title}),e.jsx("p",{className:"text-[11px] text-muted-foreground mt-0.5",children:o(l.createdAt)})]}),!l.isRead&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500 mt-2 shrink-0"})]},l.id))})]})}function qI({token:s}){const{toast:t}=mt(),[n,r]=p.useState(!1),[o,l]=p.useState(!1),[d,u]=p.useState(!1),[h,f]=p.useState(!1);p.useEffect(()=>{"serviceWorker"in navigator&&"PushManager"in window&&(r(!0),navigator.serviceWorker.ready.then(g=>{g.pushManager.getSubscription().then(j=>{l(!!j)})}))},[]);const v=async()=>{u(!0);try{const g=await navigator.serviceWorker.register("/sw.js");await navigator.serviceWorker.ready;const j=await fetch("/api/push/vapid-key"),{publicKey:N}=await j.json();if(!N)throw new Error("Push not configured");const k=(await g.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:N})).toJSON();await je("POST",`/api/portal/${s}/push/subscribe`,{endpoint:k.endpoint,keys:{p256dh:k.keys?.p256dh,auth:k.keys?.auth}}),l(!0),f(!1),t({title:"Notifications enabled",description:"You'll now receive push notifications for updates."})}catch(g){g?.name==="NotAllowedError"?t({title:"Notifications blocked",description:"Please enable notifications in your browser settings.",variant:"destructive"}):t({title:"Error",description:"Could not enable push notifications.",variant:"destructive"})}u(!1)},x=async()=>{u(!0);try{const j=await(await navigator.serviceWorker.ready).pushManager.getSubscription();j&&(await je("POST",`/api/portal/${s}/push/unsubscribe`,{endpoint:j.endpoint}),await j.unsubscribe()),l(!1),f(!1),t({title:"Notifications disabled",description:"You won't receive push notifications anymore."})}catch{t({title:"Error",description:"Could not disable push notifications.",variant:"destructive"})}u(!1)};return n?e.jsxs(e.Fragment,{children:[e.jsx(L,{size:"icon",variant:"ghost",onClick:()=>f(!0),disabled:d,className:`relative bg-white/[0.08] text-white/80 ${o?"text-emerald-400":""}`,title:o?"Manage push notifications":"Enable push notifications","data-testid":"button-push-toggle",children:d?e.jsx(We,{className:"w-5 h-5 animate-spin"}):o?e.jsx(Xc,{className:"w-5 h-5"}):e.jsx(fb,{className:"w-5 h-5"})}),e.jsx(yt,{open:h,onOpenChange:f,children:e.jsxs(xt,{className:"sm:max-w-md bg-[#1a1a2e] border-white/10 text-white",children:[e.jsx(gt,{children:e.jsxs(vt,{className:"text-white flex items-center gap-2",children:[o?e.jsx(Xc,{className:"w-5 h-5 text-emerald-400"}):e.jsx(fb,{className:"w-5 h-5 text-white/60"}),"Push Notifications"]})}),e.jsx("div",{className:"rounded-md bg-gradient-to-r from-blue-600/20 to-purple-600/20 border border-blue-500/20 p-4 -mt-1",children:e.jsxs("p",{className:"text-sm font-medium text-white/90 text-center",children:["Allow ",e.jsx("span",{className:"text-blue-400 font-semibold",children:"AI Powered Sites"})," to send you notifications"]})}),e.jsx("div",{className:"space-y-4 pt-2",children:o?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-md bg-emerald-500/10 border border-emerald-500/20",children:[e.jsx(wn,{className:"w-5 h-5 text-emerald-400 shrink-0"}),e.jsx("p",{className:"text-sm text-emerald-300",children:"Push notifications are currently enabled"})]}),e.jsx("p",{className:"text-sm text-white/60",children:"You're receiving instant alerts on this device for new invoices, project updates, support replies, and more."}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx(L,{variant:"outline",className:"flex-1 border-white/10 text-white/80",onClick:()=>f(!1),"data-testid":"button-push-keep",children:"Keep Enabled"}),e.jsxs(L,{variant:"ghost",className:"flex-1 text-red-400",onClick:x,disabled:d,"data-testid":"button-push-disable",children:[d?e.jsx(We,{className:"w-4 h-4 animate-spin mr-2"}):null,"Turn Off"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-white/70",children:"Stay in the loop with instant notifications delivered right to your device. You'll be alerted about:"}),e.jsx("div",{className:"space-y-2.5",children:[{icon:Wa,label:"New invoices & payment confirmations"},{icon:qn,label:"Project milestones & updates"},{icon:Kt,label:"Support ticket replies"},{icon:Fi,label:"New screenshots & deliverables"},{icon:bg,label:"Payment plan updates"}].map(g=>e.jsxs("div",{className:"flex items-center gap-3 text-sm text-white/80",children:[e.jsx("div",{className:"w-8 h-8 rounded-md bg-white/[0.06] flex items-center justify-center shrink-0",children:e.jsx(g.icon,{className:"w-4 h-4 text-blue-400"})}),g.label]},g.label))}),e.jsx("p",{className:"text-xs text-white/40 pt-1",children:"Your browser will ask for permission. You can turn this off anytime."}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx(L,{variant:"ghost",className:"flex-1 text-white/60",onClick:()=>f(!1),"data-testid":"button-push-cancel",children:"Not Now"}),e.jsxs(L,{className:"flex-1 bg-blue-600 text-white",onClick:v,disabled:d,"data-testid":"button-push-enable",children:[d?e.jsx(We,{className:"w-4 h-4 animate-spin mr-2"}):e.jsx(Xc,{className:"w-4 h-4 mr-2"}),"Enable Notifications"]})]})]})})]})})]}):null}function FI({token:s}){const[t,n]=p.useState(!1),[r,o]=p.useState(!1),l=`push-banner-dismissed-${s}`;p.useEffect(()=>{if(sessionStorage.getItem(l)){o(!0);return}if(!("serviceWorker"in navigator)||!("PushManager"in window))return;(async()=>{try{const f=await navigator.serviceWorker.getRegistration();if(!f){setTimeout(()=>n(!0),1500);return}await f.pushManager.getSubscription()||setTimeout(()=>n(!0),1500)}catch{setTimeout(()=>n(!0),1500)}})()},[l]);const d=()=>{n(!1),o(!0),sessionStorage.setItem(l,"1")},u=()=>{d();const h=document.querySelector('[data-testid="button-push-toggle"]');h&&h.click()};return r||!t?null:e.jsx("div",{className:"mb-4 -mt-3 animate-in slide-in-from-top-2 fade-in duration-500","data-testid":"push-prompt-banner",children:e.jsxs("div",{className:"relative rounded-md bg-gradient-to-r from-blue-600/90 to-purple-600/90 p-4 flex items-center gap-4 flex-wrap shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"w-10 h-10 rounded-md bg-white/15 flex items-center justify-center shrink-0",children:e.jsx(Xc,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-white",children:"Never miss an update"}),e.jsx("p",{className:"text-xs text-white/70 mt-0.5",children:"Get instant alerts for invoices, project milestones, and deliverables right on your device."})]})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsx(L,{variant:"ghost",size:"sm",className:"text-white/70",onClick:d,"data-testid":"button-banner-dismiss",children:"Not Now"}),e.jsxs(L,{size:"sm",className:"bg-white text-slate-900 font-medium",onClick:u,"data-testid":"button-banner-enable",children:[e.jsx(Xc,{className:"w-3.5 h-3.5 mr-1.5"}),"Enable Notifications"]})]})]})})}function zI({token:s}){const[t,n]=p.useState(!1),{data:r,refetch:o}=_e({queryKey:["/api/portal",s,"notifications"],queryFn:async()=>{const x=await fetch(`/api/portal/${s}/notifications`);if(!x.ok)throw new Error("Failed to fetch notifications");return x.json()},enabled:!!s,refetchInterval:3e4}),l=we({mutationFn:async x=>{await je("PATCH",`/api/portal/${s}/notifications/${x}/read`)},onSuccess:()=>o()}),d=we({mutationFn:async()=>{await je("POST",`/api/portal/${s}/notifications/read-all`)},onSuccess:()=>o()}),u=r?.unreadCount||0,h=r?.notifications||[],f=x=>{switch(x){case"project_update":return e.jsx(qn,{className:"w-4 h-4 text-blue-400"});case"invoice_created":return e.jsx(Wa,{className:"w-4 h-4 text-emerald-400"});case"ticket_reply":return e.jsx(Kt,{className:"w-4 h-4 text-purple-400"});case"screenshot_uploaded":return e.jsx(Fi,{className:"w-4 h-4 text-amber-400"});case"payment_plan_created":return e.jsx(Zc,{className:"w-4 h-4 text-indigo-400"});default:return e.jsx(bo,{className:"w-4 h-4 text-white/60"})}},v=x=>{const g=Date.now()-new Date(x).getTime(),j=Math.floor(g/6e4);if(j<1)return"just now";if(j<60)return`${j}m ago`;const N=Math.floor(j/60);return N<24?`${N}h ago`:`${Math.floor(N/24)}d ago`};return e.jsxs("div",{className:"relative",children:[e.jsxs(L,{size:"icon",variant:"ghost",onClick:()=>n(!t),className:"relative bg-white/[0.08] text-white/80","data-testid":"button-notification-bell",children:[e.jsx(bo,{className:"w-5 h-5"}),u>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center","data-testid":"text-notification-badge",children:u>9?"9+":u})]}),t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>n(!1)}),e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-80 sm:w-96 z-50 bg-popover border rounded-md shadow-xl overflow-hidden","data-testid":"notification-dropdown",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 px-4 py-3 border-b bg-muted/50",children:[e.jsx("h3",{className:"text-sm font-semibold text-foreground",children:"Notifications"}),u>0&&e.jsxs(L,{size:"sm",variant:"ghost",className:"text-xs",onClick:()=>d.mutate(),"data-testid":"button-mark-all-read",children:[e.jsx(is,{className:"w-3 h-3 mr-1"}),"Mark all read"]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:h.length===0?e.jsx("div",{className:"px-4 py-8 text-center text-sm text-muted-foreground","data-testid":"text-no-notifications",children:"No notifications yet"}):h.map(x=>e.jsxs("div",{className:`flex items-start gap-3 px-4 py-3 border-b last:border-b-0 cursor-pointer transition-colors ${x.isRead?"opacity-60":"bg-accent/30"}`,onClick:()=>{x.isRead||l.mutate(x.id),n(!1)},"data-testid":`notification-item-${x.id}`,children:[e.jsx("div",{className:"mt-0.5 shrink-0",children:f(x.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:x.title}),x.body&&e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5 line-clamp-2",children:x.body}),e.jsx("p",{className:"text-[10px] text-muted-foreground mt-1",children:v(x.createdAt)})]}),!x.isRead&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500 mt-2 shrink-0"})]},x.id))})]})]})]})}const UI={"us-central":"us","us-west":"us","us-east":"us","us-southeast":"us","us-iad":"us","us-ord":"us","us-lax":"us","ca-central":"ca","eu-west":"gb","eu-central":"de","ap-west":"in","ap-south":"sg","ap-southeast":"au","ap-northeast":"jp","gb-lon":"gb","de-fra":"de","fr-par":"fr","nl-ams":"nl","se-sto":"se","es-mad":"es","it-mil":"it","in-maa":"in","sg-sin":"sg","au-mel":"au","jp-osa":"jp","br-gru":"br"};function u1(s){const t=UI[s]||s.split("-")[0];return t.length===2?String.fromCodePoint(...Array.from(t.toUpperCase()).map(n=>n.charCodeAt(0)+127397)):""}function BI({token:s,servers:t,serversLoading:n}){const{toast:r}=mt(),[o,l]=p.useState(!1),[d,u]=p.useState(""),[h,f]=p.useState(""),[v,x]=p.useState(""),[g,j]=p.useState(null),[N,b]=p.useState(null),[k,E]=p.useState(!1),[S,T]=p.useState(null),{data:P}=_e({queryKey:["/api/portal",s,"server-types"],queryFn:async()=>{const G=await fetch(`/api/portal/${s}/server-types`);return G.ok?G.json():[]},enabled:o}),{data:H}=_e({queryKey:["/api/portal",s,"server-regions"],queryFn:async()=>{const G=await fetch(`/api/portal/${s}/server-regions`);return G.ok?G.json():[]},enabled:o}),re=we({mutationFn:async G=>(await je("POST",`/api/portal/${s}/servers/provision`,G)).json(),onSuccess:G=>{xe.invalidateQueries({queryKey:["/api/portal",s,"servers"]}),b(G.rootPassword),T(G.server.ipv4||"Assigning..."),l(!1),E(!0),u(""),f(""),x(""),r({title:"Server Provisioned!",description:"Your server is being set up. Save your login credentials below."})},onError:G=>{r({title:"Provisioning Failed",description:G.message||"Could not create server.",variant:"destructive"})}}),B=(G,ue)=>{navigator.clipboard.writeText(G),j(ue),setTimeout(()=>j(null),2e3)};(P||[]).find(G=>G.id===d);const Q=G=>{switch(G){case"running":return"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400";case"provisioning":case"booting":return"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400";case"offline":case"shutting_down":return"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400";default:return"bg-gray-100 text-gray-700 dark:bg-gray-900/30 dark:text-gray-400"}};return e.jsxs("div",{className:"space-y-6","data-testid":"section-servers",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-cyan-600 flex items-center justify-center",children:e.jsx(er,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold","data-testid":"text-servers-title",children:"My Servers"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Provision and manage your cloud servers"})]})]}),e.jsxs(L,{onClick:()=>l(!0),"data-testid":"button-new-server",children:[e.jsx(Qt,{className:"w-4 h-4 mr-1.5"}),"New Server"]})]}),e.jsx(ce,{className:"p-3 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950/20 dark:to-indigo-950/20 border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center shrink-0",children:e.jsx(hs,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-200",children:"Need help choosing?"}),e.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-400",children:"Not sure which server is right for you? Contact us via Support and we'll help you pick the perfect plan for your needs."})]})]})}),n?e.jsxs("div",{className:"space-y-3",children:[e.jsx(ye,{className:"h-28 w-full"}),e.jsx(ye,{className:"h-28 w-full"})]}):t.length===0?e.jsxs(ce,{className:"p-10 text-center",children:[e.jsx(er,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"font-semibold mb-2",children:"No Servers Yet"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4 max-w-md mx-auto",children:"Spin up your own cloud server in seconds. You'll get full root access with an IP address and SSH credentials."}),e.jsxs(L,{onClick:()=>l(!0),"data-testid":"button-first-server",children:[e.jsx(Qt,{className:"w-4 h-4 mr-1.5"}),"Provision Your First Server"]})]}):e.jsx("div",{className:"space-y-4",children:t.map(G=>e.jsxs(ce,{className:"overflow-hidden","data-testid":`card-server-${G.id}`,children:[e.jsx("div",{className:"p-4 border-b bg-muted/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(er,{className:"w-5 h-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-sm",children:G.label}),e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(wl,{className:"w-3 h-3"}),u1(G.region)," ",G.region]})]})]}),e.jsxs(Ce,{className:Q(G.status),"data-testid":`badge-status-${G.id}`,children:[G.status==="running"&&e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 mr-1.5 animate-pulse"}),G.status]})]})}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ox,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{children:[G.vcpus||""," vCPUs"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vb,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{children:G.memory?`${(G.memory/1024).toFixed(G.memory>=1024?0:1)} GB`:""})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xb,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{children:G.disk?`${(G.disk/1024).toFixed(0)} GB`:""})]})]}),G.ipv4&&e.jsxs("div",{className:"flex items-center gap-2 bg-muted/50 rounded-lg p-3",children:[e.jsx(pm,{className:"w-4 h-4 text-muted-foreground shrink-0"}),e.jsxs("code",{className:"text-xs font-mono flex-1","data-testid":`text-ip-${G.id}`,children:["ssh root@",G.ipv4]}),e.jsx(L,{variant:"ghost",size:"sm",className:"h-7 px-2",onClick:()=>B(`ssh root@${G.ipv4}`,G.id),"data-testid":`button-copy-ssh-${G.id}`,children:g===G.id?e.jsx(is,{className:"w-3.5 h-3.5 text-emerald-500"}):e.jsx(fn,{className:"w-3.5 h-3.5"})})]}),G.ipv4&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(nn,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:["IP: ",G.ipv4]}),e.jsx(L,{variant:"ghost",size:"sm",className:"h-6 px-1.5 text-xs",onClick:()=>B(G.ipv4,`ip-${G.id}`),"data-testid":`button-copy-ip-${G.id}`,children:g===`ip-${G.id}`?e.jsx(is,{className:"w-3 h-3 text-emerald-500"}):e.jsx(fn,{className:"w-3 h-3"})})]})]})]},G.id))}),e.jsx(yt,{open:o,onOpenChange:l,children:e.jsxs(xt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(gt,{children:[e.jsxs(vt,{className:"flex items-center gap-2",children:[e.jsx(er,{className:"w-5 h-5 text-blue-500"}),"Provision a New Server"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Choose a plan, pick a region, and your server will be live in seconds."})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(De,{className:"text-xs font-medium",children:"Server Name"}),e.jsx(Oe,{value:v,onChange:G=>x(G.target.value),placeholder:"my-web-server","data-testid":"input-server-label"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{className:"text-xs font-medium",children:"Choose a Plan"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3","data-testid":"select-server-type",children:(P||[]).map(G=>{const ue=d===G.id,_=G.memory>=1024?(G.memory/1024).toFixed(0):(G.memory/1024).toFixed(1),Y=(G.disk/1024).toFixed(0);return e.jsxs("button",{type:"button",onClick:()=>u(G.id),"data-testid":`plan-card-${G.id}`,className:`relative text-left rounded-lg border-2 p-4 transition-all cursor-pointer hover:shadow-md ${ue?"border-blue-500 bg-blue-50/50 dark:bg-blue-950/20 shadow-sm ring-1 ring-blue-500/20":"border-border hover:border-blue-300 dark:hover:border-blue-700"}`,children:[ue&&e.jsx("div",{className:"absolute top-2 right-2 w-5 h-5 rounded-full bg-blue-500 flex items-center justify-center",children:e.jsx(is,{className:"w-3 h-3 text-white"})}),e.jsx("div",{className:"mb-2",children:e.jsx("span",{className:"font-semibold text-sm",children:G.label})}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsxs("span",{className:"text-2xl font-bold",children:["$",(G.hourlyPrice||0).toFixed(4)]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"/hour"})]}),e.jsxs("p",{className:"text-[11px] text-muted-foreground mt-0.5",children:["~$",G.monthlyPrice,"/mo cap"]})]}),e.jsxs("div",{className:"space-y-1.5 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ox,{className:"w-3.5 h-3.5 text-blue-500 shrink-0"}),e.jsxs("span",{children:[G.vcpus," vCPU",G.vcpus>1?"s":""]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vb,{className:"w-3.5 h-3.5 text-purple-500 shrink-0"}),e.jsxs("span",{children:[_," GB RAM"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xb,{className:"w-3.5 h-3.5 text-emerald-500 shrink-0"}),e.jsxs("span",{children:[Y," GB SSD"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(HE,{className:"w-3.5 h-3.5 text-amber-500 shrink-0"}),e.jsxs("span",{children:[G.transfer/1e3," TB Transfer"]})]})]})]},G.id)})}),(P||[]).length===0&&e.jsxs("div",{className:"text-center py-6 text-sm text-muted-foreground",children:[e.jsx(We,{className:"w-5 h-5 mx-auto mb-2 animate-spin"}),"Loading plans..."]})]}),e.jsx(ce,{className:"p-3 bg-blue-50/50 dark:bg-blue-950/10 border-blue-200/50 dark:border-blue-800/30",children:e.jsxs("div",{className:"flex items-start gap-2.5",children:[e.jsx(rr,{className:"w-4 h-4 text-blue-500 mt-0.5 shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-blue-900 dark:text-blue-200",children:"Usage-Based Billing"}),e.jsx("p",{className:"text-[11px] text-blue-700 dark:text-blue-400 leading-relaxed",children:"You're billed hourly for the time your server is running  only pay for what you use. Each plan has a monthly cap so you'll never pay more than that amount regardless of uptime."})]})]})}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(De,{className:"text-xs font-medium",children:"Region"}),e.jsxs(Dt,{value:h,onValueChange:f,children:[e.jsx(It,{"data-testid":"select-server-region",children:e.jsx($t,{placeholder:"Choose a region..."})}),e.jsx(Ot,{children:(H||[]).map(G=>e.jsxs(Ie,{value:G.id,children:[u1(G.id)," ",G.label]},G.id))})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{variant:"outline",className:"flex-1",onClick:()=>l(!1),children:"Cancel"}),e.jsx(L,{className:"flex-1 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700",disabled:!d||!h||!v.trim()||re.isPending,onClick:()=>re.mutate({typeId:d,region:h,label:v.trim()}),"data-testid":"button-provision-server",children:re.isPending?e.jsxs(e.Fragment,{children:[e.jsx(We,{className:"w-4 h-4 mr-1.5 animate-spin"})," Provisioning..."]}):e.jsxs(e.Fragment,{children:[e.jsx(er,{className:"w-4 h-4 mr-1.5"})," Provision Server"]})})]})]})]})}),e.jsx(yt,{open:k,onOpenChange:E,children:e.jsxs(xt,{className:"max-w-md",children:[e.jsx(gt,{children:e.jsxs(vt,{className:"flex items-center gap-2 text-emerald-600",children:[e.jsx(is,{className:"w-5 h-5"}),"Server Created Successfully!"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(ce,{className:"p-4 bg-amber-50 dark:bg-amber-950/20 border-amber-200 dark:border-amber-800",children:[e.jsx("p",{className:"text-sm font-medium text-amber-900 dark:text-amber-200 mb-1",children:" Save these credentials  they won't be shown again!"}),e.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-400",children:"You'll need this password to log into your server via SSH."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(De,{className:"text-xs font-medium text-muted-foreground",children:"SSH Command"}),e.jsxs("div",{className:"flex items-center gap-2 bg-muted rounded-lg p-2.5",children:[e.jsxs("code",{className:"text-xs font-mono flex-1","data-testid":"text-ssh-command",children:["ssh root@",S]}),e.jsx(L,{variant:"ghost",size:"sm",className:"h-7 px-2",onClick:()=>B(`ssh root@${S}`,"new-ssh"),"data-testid":"button-copy-new-ssh",children:g==="new-ssh"?e.jsx(is,{className:"w-3.5 h-3.5 text-emerald-500"}):e.jsx(fn,{className:"w-3.5 h-3.5"})})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(De,{className:"text-xs font-medium text-muted-foreground",children:"Root Password"}),e.jsxs("div",{className:"flex items-center gap-2 bg-muted rounded-lg p-2.5",children:[e.jsx("code",{className:"text-xs font-mono flex-1 break-all","data-testid":"text-root-password",children:N}),e.jsx(L,{variant:"ghost",size:"sm",className:"h-7 px-2",onClick:()=>B(N||"","new-pass"),"data-testid":"button-copy-password",children:g==="new-pass"?e.jsx(is,{className:"w-3.5 h-3.5 text-emerald-500"}):e.jsx(fn,{className:"w-3.5 h-3.5"})})]})]})]}),e.jsx(L,{className:"w-full",onClick:()=>E(!1),"data-testid":"button-close-password",children:"I've Saved My Credentials"})]})]})})]})}function HI({articles:s}){const[t,n]=p.useState(""),[r,o]=p.useState("all"),[l,d]=p.useState(null),u=["all",...Array.from(new Set(s.map(v=>v.category)))],h=s.filter(v=>{const x=!t||v.title.toLowerCase().includes(t.toLowerCase())||(v.content||"").toLowerCase().includes(t.toLowerCase()),g=r==="all"||v.category===r;return x&&g}),f={General:"","Getting Started":"",Billing:"",Technical:"",FAQ:"",Tutorials:"",Troubleshooting:""};return l?e.jsxs("div",{className:"space-y-4","data-testid":"section-help-article",children:[e.jsxs(L,{variant:"ghost",size:"sm",onClick:()=>d(null),"data-testid":"button-back-to-help",children:[e.jsx(va,{className:"w-4 h-4 mr-1.5"}),"Back to Help Center"]}),e.jsxs(ce,{className:"p-6",children:[e.jsx("div",{className:"flex items-center gap-2 mb-4",children:e.jsxs(Ce,{variant:"secondary",className:"text-xs",children:[f[l.category]||""," ",l.category]})}),e.jsx("h2",{className:"text-xl font-semibold mb-4","data-testid":"text-article-title",children:l.title}),e.jsx("div",{className:"article-content prose prose-sm max-w-none text-sm leading-relaxed",dangerouslySetInnerHTML:{__html:l.content},"data-testid":"article-content"})]})]}):e.jsxs("div",{className:"space-y-6","data-testid":"section-help",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-purple-500 to-pink-600 flex items-center justify-center",children:e.jsx(_i,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold","data-testid":"text-help-title",children:"Help Center"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Guides and tutorials to help you get the most out of your services"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(sn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(Oe,{value:t,onChange:v=>n(v.target.value),placeholder:"Search articles...",className:"pl-9","data-testid":"input-help-search"})]}),e.jsxs(Dt,{value:r,onValueChange:o,children:[e.jsx(It,{className:"w-full sm:w-[180px]","data-testid":"select-help-category",children:e.jsx($t,{placeholder:"All Categories"})}),e.jsx(Ot,{children:u.map(v=>e.jsx(Ie,{value:v,children:v==="all"?"All Categories":`${f[v]||""} ${v}`},v))})]})]}),h.length===0?e.jsxs(ce,{className:"p-10 text-center",children:[e.jsx(_i,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"font-semibold mb-2",children:"No Articles Found"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t?"Try a different search term or category.":"No help articles have been published yet."})]}):e.jsx("div",{className:"space-y-3",children:h.map(v=>e.jsx(ce,{className:"p-4 hover-elevate cursor-pointer transition-all",onClick:()=>d(v),"data-testid":`card-article-${v.id}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsxs(Ce,{variant:"secondary",className:"text-[10px] shrink-0",children:[f[v.category]||""," ",v.category]})}),e.jsx("h3",{className:"font-medium text-sm truncate","data-testid":`text-article-title-${v.id}`,children:v.title}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:[(v.content||"").replace(/<[^>]+>/g,"").substring(0,150),"..."]})]}),e.jsx(Bm,{className:"w-4 h-4 text-muted-foreground shrink-0 ml-3"})]})},v.id))})]})}function KI(){const s=Dm(),{toast:t}=mt(),n=u3(),[r,o]=p.useState(null),[l,d]=p.useState(!1),[u,h]=p.useState(""),[f,v]=p.useState(""),[x,g]=p.useState(""),[j,N]=p.useState(""),[b,k]=p.useState(null),[E,S]=p.useState(!1),[T,P]=p.useState(""),[H,re]=p.useState("dashboard");p.useEffect(()=>{const D=new URLSearchParams(n),ge=D.get("payment"),Ge=D.get("invoice"),Nt=D.get("payment_plan");ge==="success"&&Ge?(t({title:"Payment Successful",description:`Invoice ${Ge} has been paid. Thank you!`}),xe.invalidateQueries({queryKey:[`/api/portal/${s.token}`]})):ge==="cancelled"&&t({title:"Payment Cancelled",description:"Your payment was not processed.",variant:"destructive"}),Nt==="accepted"?(t({title:"Payment Plan Started",description:"Your payment plan is now active. Payments will be collected automatically."}),xe.invalidateQueries({queryKey:["/api/portal",s.token,"payment-plans"]})):Nt==="cancelled"&&t({title:"Plan Not Started",description:"You can accept the payment plan at any time.",variant:"destructive"});const rt=D.get("github_connected"),Pt=D.get("github_user");rt==="true"&&(t({title:"GitHub Connected!",description:`Your GitHub account (${Pt||""}) has been linked successfully.`}),re("backups"),xe.invalidateQueries({queryKey:["/api/portal",s.token,"git-backups"]}))},[n]);const B=we({mutationFn:async D=>(k(D),(await je("POST",`/api/portal/${s.token}/invoices/${D}/pay`)).json()),onSuccess:D=>{D.url&&(window.location.href=D.url)},onError:D=>{k(null),t({title:"Payment Error",description:D.message||"Could not start payment process.",variant:"destructive"})}}),[Q,G]=p.useState(!1),[ue,_]=p.useState(""),[Y,z]=p.useState(""),[J,X]=p.useState("general"),[$,I]=p.useState("medium"),[A,W]=p.useState(null),[Z,q]=p.useState(""),[ne,K]=p.useState(null),U=`/api/portal/${s.token}`,{data:M,isLoading:F,error:ie}=_e({queryKey:[U],enabled:!!s.token}),{data:fe}=_e({queryKey:["/api/portal",s.token,"payment-plans"],queryFn:async()=>{const D=await fetch(`/api/portal/${s.token}/payment-plans`);if(!D.ok)throw new Error("Failed to load payment plans");return D.json()},enabled:!!s.token}),{data:Ee}=_e({queryKey:["/api/portal",s.token,"git-backups"],queryFn:async()=>{const D=await fetch(`/api/portal/${s.token}/git-backups`);if(!D.ok)throw new Error("Failed to load backups");const ge=await D.json();return Array.isArray(ge)?{configs:ge,billingRate:null}:ge},enabled:!!s.token}),Ne=Ee?.configs,Pe=Ee?.billingRate,$e=we({mutationFn:async D=>(K(D),(await je("POST",`/api/portal/${s.token}/payment-plans/${D}/accept`)).json()),onSuccess:D=>{D.url&&(window.location.href=D.url)},onError:D=>{K(null),t({title:"Error",description:D.message||"Could not start payment plan.",variant:"destructive"})}}),{data:Ue}=_e({queryKey:["/api/portal",s.token,"tickets"],queryFn:async()=>{const D=await fetch(`/api/portal/${s.token}/tickets`);if(!D.ok)throw new Error("Failed to fetch tickets");return D.json()},enabled:!!s.token}),{data:et}=_e({queryKey:["/api/portal",s.token,"tickets",A],queryFn:async()=>{const D=await fetch(`/api/portal/${s.token}/tickets/${A}`);if(!D.ok)throw new Error("Failed to fetch ticket");return D.json()},enabled:!!A&&!!s.token}),ct=we({mutationFn:async D=>(await je("PATCH",`/api/portal/${s.token}/profile`,D)).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:[U]}),t({title:"Profile updated",description:"Your contact details have been saved."}),d(!1)},onError:D=>{t({title:"Update failed",description:D.message||"Could not update your details.",variant:"destructive"})}}),Bt=we({mutationFn:async D=>(await je("POST",`/api/portal/${s.token}/tickets`,D)).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/portal",s.token,"tickets"]}),t({title:"Ticket created",description:"Your support ticket has been submitted."}),G(!1),_(""),z(""),X("general"),I("medium")},onError:D=>{t({title:"Failed to create ticket",description:D.message,variant:"destructive"})}}),Yt=we({mutationFn:async({ticketId:D,message:ge})=>(await je("POST",`/api/portal/${s.token}/tickets/${D}/messages`,{message:ge})).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/portal",s.token,"tickets",A]}),xe.invalidateQueries({queryKey:["/api/portal",s.token,"tickets"]}),t({title:"Reply sent"}),q("")},onError:D=>{t({title:"Failed to send reply",description:D.message,variant:"destructive"})}}),ps=we({mutationFn:async()=>(await je("POST",`/api/portal/${s.token}/delete-account`)).json(),onSuccess:()=>{t({title:"Account deleted",description:"Your account and all associated data have been removed."}),S(!1),window.location.href="/"},onError:D=>{t({title:"Cannot delete account",description:D.message||"Failed to delete account.",variant:"destructive"})}}),{data:ks,isLoading:cs}=_e({queryKey:["/api/portal",s.token,"servers"],queryFn:async()=>{const D=await fetch(`/api/portal/${s.token}/servers`);return D.ok?D.json():[]},enabled:!!s.token}),{data:xs}=_e({queryKey:["/api/public/knowledge-base"],enabled:!!s.token});if(F)return e.jsx(LI,{});if(ie||!M)return e.jsx("div",{className:"min-h-screen bg-muted/30 flex items-center justify-center p-6",children:e.jsxs(ce,{className:"p-10 text-center max-w-md",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-muted mb-4",children:e.jsx(Gt,{className:"w-7 h-7 text-muted-foreground"})}),e.jsx("h1",{className:"text-xl font-semibold mb-2",children:"Link Not Found"}),e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"This portal link is invalid or has expired. Please contact your service provider for a new link."})]})});const{customer:Et,invoices:Lt,projects:wt}=M,me=Lt.filter(D=>D.status==="pending"||D.status==="overdue").reduce((D,ge)=>D+ge.totalAmountCents,0),Le=Lt.filter(D=>D.status==="paid").reduce((D,ge)=>D+ge.totalAmountCents,0),nt=Lt.filter(D=>D.status==="overdue").length,St=(Ue||[]).filter(D=>D.status==="open"||D.status==="in_progress").length,Xt=(fe||[]).filter(D=>D.status!=="cancelled"&&D.status!=="completed"),Ft=[{id:"dashboard",label:"Overview",icon:hm},{id:"invoices",label:"Invoices",icon:Wa,count:Lt.filter(D=>D.status==="pending"||D.status==="overdue").length},{id:"projects",label:"Projects",icon:qn,count:wt.filter(D=>D.status==="active"||D.status==="in_progress").length},{id:"billing",label:"Billing",icon:bg},{id:"support",label:"Support",icon:ho,count:St},{id:"backups",label:"Backups",icon:po},{id:"servers",label:"Servers",icon:er},{id:"help",label:"Help Center",icon:_i}];return e.jsxs("div",{className:"min-h-screen bg-muted/30",children:[e.jsxs("div",{className:"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_80%_50%_at_50%_-20%,rgba(120,119,198,0.15),transparent)]"}),e.jsxs("div",{className:"max-w-6xl mx-auto px-6 pt-8 pb-16 relative",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("img",{src:PI,alt:"AI Powered Sites",className:"w-11 h-11 rounded-md object-cover shrink-0 ring-2 ring-white/20"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-white/50 uppercase tracking-wider font-medium",children:"Client Portal"}),e.jsx("h1",{className:"text-2xl font-semibold tracking-tight","data-testid":"text-portal-title",children:Et.company||Et.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qI,{token:s.token}),e.jsx(zI,{token:s.token})]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white/[0.06] backdrop-blur-sm rounded-md p-4 border border-white/[0.08]",children:[e.jsx("p",{className:"text-xs text-white/50 mb-1",children:"Amount Due"}),e.jsx("p",{className:"text-xl font-semibold","data-testid":"text-portal-amount-due",children:Fe(me)}),nt>0&&e.jsxs("p",{className:"text-xs text-red-300 mt-1 flex items-center gap-1",children:[e.jsx(Fn,{className:"w-3 h-3"}),nt," overdue"]})]}),e.jsxs("div",{className:"bg-white/[0.06] backdrop-blur-sm rounded-md p-4 border border-white/[0.08]",children:[e.jsx("p",{className:"text-xs text-white/50 mb-1",children:"Total Paid"}),e.jsx("p",{className:"text-xl font-semibold","data-testid":"text-portal-total-paid",children:Fe(Le)})]}),e.jsxs("div",{className:"bg-white/[0.06] backdrop-blur-sm rounded-md p-4 border border-white/[0.08]",children:[e.jsx("p",{className:"text-xs text-white/50 mb-1",children:"Invoices"}),e.jsx("p",{className:"text-xl font-semibold","data-testid":"text-portal-invoice-count",children:Lt.length})]}),e.jsxs("div",{className:"bg-white/[0.06] backdrop-blur-sm rounded-md p-4 border border-white/[0.08]",children:[e.jsx("p",{className:"text-xs text-white/50 mb-1",children:"Projects"}),e.jsx("p",{className:"text-xl font-semibold","data-testid":"text-portal-project-count",children:wt.length})]})]})]})]}),e.jsxs("div",{className:"max-w-6xl mx-auto px-6",children:[e.jsx(FI,{token:s.token}),e.jsx("div",{className:"mt-4 mb-8",children:e.jsx(ce,{className:"p-1.5 inline-flex items-center gap-1 flex-wrap",children:Ft.map(D=>e.jsxs(L,{variant:H===D.id?"default":"ghost",size:"sm",onClick:()=>{re(D.id),W(null)},"data-testid":`button-tab-${D.id}`,children:[e.jsx(D.icon,{className:"w-4 h-4 mr-1.5"}),e.jsx("span",{className:"hidden sm:inline",children:D.label}),D.count&&D.count>0?e.jsx(Ce,{variant:"secondary",className:"ml-1.5 text-[10px] px-1.5 min-w-[20px] justify-center",children:D.count}):null]},D.id))})}),e.jsxs("div",{className:"pb-12",children:[H==="dashboard"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{"data-testid":"section-welcome",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-1",children:["Welcome back, ",Et.name.split(" ")[0]]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Here's what's happening with your projects."}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[Lt.some(D=>D.status==="pending"||D.status==="overdue")&&e.jsxs(L,{size:"sm",onClick:()=>re("invoices"),"data-testid":"button-quick-pay",children:[e.jsx(Ti,{className:"w-4 h-4 mr-1.5"}),"Pay Invoice"]}),wt.length>0&&e.jsxs(L,{size:"sm",variant:"outline",onClick:()=>re("projects"),"data-testid":"button-quick-progress",children:[e.jsx(qn,{className:"w-4 h-4 mr-1.5"}),"View Projects"]}),e.jsxs(L,{size:"sm",variant:"outline",onClick:()=>re("support"),"data-testid":"button-quick-ticket",children:[e.jsx(ho,{className:"w-4 h-4 mr-1.5"}),"Get Help"]})]})]}),nt>0&&e.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-md bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-900/50",children:[e.jsx(Fn,{className:"w-5 h-5 text-red-600 dark:text-red-400 shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm font-medium text-red-700 dark:text-red-400",children:["You have ",nt," overdue invoice",nt>1?"s":""]}),e.jsx("p",{className:"text-xs text-red-600/80 dark:text-red-400/80 mt-0.5",children:"Please arrange payment as soon as possible to avoid additional fees."})]}),e.jsx(L,{variant:"outline",size:"sm",className:"shrink-0 text-red-600 border-red-300 dark:text-red-400 dark:border-red-800",onClick:()=>re("invoices"),"data-testid":"button-view-overdue",children:"View Invoices"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[Xt.length>0&&e.jsxs("div",{"data-testid":"section-payment-plans",children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider mb-4",children:"Active Payment Plans"}),e.jsx("div",{className:"space-y-3",children:Xt.map(D=>{const ge=Lt.find(rt=>rt.id===D.invoiceId),Ge=D.frequency==="weekly"?"week":D.frequency==="biweekly"?"2 weeks":"month",Nt=D.numberOfInstallments>0?Math.round(D.installmentsPaid/D.numberOfInstallments*100):0;return e.jsxs(ce,{className:"p-5","data-testid":`card-payment-plan-${D.id}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 flex-wrap mb-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-semibold",children:[D.numberOfInstallments," payments of ",Fe(D.installmentAmountCents)]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5",children:["Every ",Ge," ",ge?`for invoice ${ge.invoiceNumber}`:""]})]}),e.jsx(Ce,{variant:"secondary",className:`text-xs ${Jn(D.status)}`,children:D.status==="pending"?"Ready to Start":D.status==="active"?"In Progress":D.status})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between gap-3 text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Total: ",Fe(D.totalAmountCents)]}),e.jsxs("span",{children:[D.installmentsPaid," of ",D.numberOfInstallments," paid"]})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-violet-600 h-2 rounded-full transition-all",style:{width:`${Nt}%`},"data-testid":`progress-plan-${D.id}`})})]}),D.status==="pending"&&e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsxs(L,{className:"w-full bg-gradient-to-r from-blue-500 to-violet-600 text-white border-0",onClick:()=>$e.mutate(D.id),disabled:ne===D.id,"data-testid":`button-accept-plan-${D.id}`,children:[ne===D.id?e.jsx(We,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(Ti,{className:"w-4 h-4 mr-2"}),ne===D.id?"Redirecting...":"Accept & Start Plan"]}),e.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:"You'll be redirected to Stripe to set up automatic payments"})]}),D.status==="active"&&D.startDate&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-3",children:["Started ",qs(D.startDate),"  Next payment collected automatically"]})]},D.id)})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap mb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Recent Invoices"}),Lt.length>3&&e.jsx(L,{variant:"ghost",size:"sm",onClick:()=>re("invoices"),"data-testid":"button-view-all-invoices",children:"View All"})]}),Lt.length>0?e.jsx("div",{className:"space-y-2",children:Lt.slice(0,3).map(D=>e.jsx(ce,{className:"hover-elevate cursor-pointer",onClick:()=>{re("invoices"),o(D.id)},"data-testid":`card-dashboard-invoice-${D.id}`,children:e.jsxs("div",{className:"p-4 flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("div",{className:`flex items-center justify-center w-9 h-9 rounded-md shrink-0 ${D.status==="paid"?"bg-emerald-500/10 text-emerald-600 dark:text-emerald-400":D.status==="overdue"?"bg-red-500/10 text-red-600 dark:text-red-400":"bg-muted text-muted-foreground"}`,children:d1(D.status)}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium",children:D.invoiceNumber}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Due ",qs(D.dueDate)]})]})]}),e.jsxs("div",{className:"text-right shrink-0",children:[e.jsx("p",{className:"text-sm font-semibold",children:Fe(D.totalAmountCents)}),e.jsx(Ce,{variant:"secondary",className:`text-xs ${Jn(D.status)}`,children:D.status})]})]})},D.id))}):e.jsxs(ce,{className:"p-8 text-center",children:[e.jsx(Gt,{className:"w-8 h-8 text-muted-foreground/40 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No invoices yet"})]})]}),wt.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap mb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Active Projects"}),wt.length>2&&e.jsx(L,{variant:"ghost",size:"sm",onClick:()=>re("projects"),"data-testid":"button-view-all-projects",children:"View All"})]}),e.jsx("div",{className:"space-y-2",children:wt.slice(0,2).map(D=>e.jsx(ce,{className:"p-4 hover-elevate cursor-pointer",onClick:()=>re("projects"),"data-testid":`card-dashboard-project-${D.id}`,children:e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium",children:D.name}),D.description&&e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5 line-clamp-1",children:D.description})]}),e.jsx(Ce,{variant:"secondary",className:`text-xs ${Jn(D.status)}`,children:D.status})]})},D.id))})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsx($I,{token:s.token}),e.jsxs("div",{"data-testid":"card-portal-profile",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap mb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Your Account"}),!l&&e.jsxs(L,{variant:"ghost",size:"sm",onClick:()=>{h(Et.name),v(Et.email),g(Et.company||""),N(Et.phone||""),d(!0)},"data-testid":"button-edit-profile",children:[e.jsx(kr,{className:"w-3.5 h-3.5 mr-1"}),"Edit"]})]}),l?e.jsx(ce,{className:"p-5",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(De,{htmlFor:"portal-name",className:"text-xs font-medium",children:"Full Name"}),e.jsx(Oe,{id:"portal-name",value:u,onChange:D=>h(D.target.value),"data-testid":"input-portal-name"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(De,{htmlFor:"portal-company",className:"text-xs font-medium",children:"Company"}),e.jsx(Oe,{id:"portal-company",value:x,onChange:D=>g(D.target.value),placeholder:"(optional)","data-testid":"input-portal-company"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(De,{htmlFor:"portal-email",className:"text-xs font-medium",children:"Email"}),e.jsx(Oe,{id:"portal-email",type:"email",value:f,onChange:D=>v(D.target.value),"data-testid":"input-portal-email"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(De,{htmlFor:"portal-phone",className:"text-xs font-medium",children:"Phone"}),e.jsx(Oe,{id:"portal-phone",type:"tel",value:j,onChange:D=>N(D.target.value),placeholder:"(optional)","data-testid":"input-portal-phone"})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-3 border-t",children:[e.jsxs(L,{size:"sm",onClick:()=>ct.mutate({name:u,email:f,company:x,phone:j}),disabled:ct.isPending||!f.trim()||!u.trim(),"data-testid":"button-save-profile",children:[ct.isPending?e.jsx(We,{className:"w-4 h-4 mr-1 animate-spin"}):e.jsx(Vm,{className:"w-4 h-4 mr-1"}),"Save"]}),e.jsx(L,{variant:"ghost",size:"sm",onClick:()=>d(!1),"data-testid":"button-cancel-edit",children:"Cancel"})]})]})}):e.jsxs(ce,{className:"p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-violet-600 flex items-center justify-center text-white text-lg font-semibold shrink-0",children:Et.name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-semibold truncate","data-testid":"text-portal-name",children:Et.name}),Et.company&&e.jsx("p",{className:"text-xs text-muted-foreground","data-testid":"text-portal-company",children:Et.company})]})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(hs,{className:"w-3.5 h-3.5 shrink-0"}),e.jsx("span",{className:"truncate","data-testid":"text-portal-email",children:Et.email})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(ld,{className:"w-3.5 h-3.5 shrink-0"}),e.jsx("span",{"data-testid":"text-portal-phone",children:Et.phone||"Not provided"})]})]})]})]}),e.jsx("div",{className:"pt-4 border-t",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Cb,{className:"w-4 h-4 text-muted-foreground shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Need to remove your data? You can request permanent deletion of your account."}),e.jsxs(L,{variant:"ghost",size:"sm",className:"mt-2 text-destructive",onClick:()=>{P(""),S(!0)},"data-testid":"button-request-delete",children:[e.jsx(ls,{className:"w-3.5 h-3.5 mr-1.5"}),"Request Data Deletion"]})]})]})})]})]})]}),H==="invoices"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-1",children:"Invoices"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[Lt.length," total invoice",Lt.length!==1?"s":""]})]}),Lt.length>0?e.jsx("div",{className:"space-y-3",children:Lt.map(D=>{const ge=r===D.id;return e.jsxs(ce,{className:"overflow-hidden","data-testid":`card-portal-invoice-${D.id}`,children:[e.jsxs("button",{onClick:()=>o(ge?null:D.id),className:"w-full p-5 text-left flex items-center justify-between gap-3 hover-elevate","data-testid":`button-expand-invoice-${D.id}`,children:[e.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-md shrink-0 ${D.status==="paid"?"bg-emerald-500/10 text-emerald-600 dark:text-emerald-400":D.status==="overdue"?"bg-red-500/10 text-red-600 dark:text-red-400":"bg-muted text-muted-foreground"}`,children:d1(D.status)}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold",children:D.invoiceNumber}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Issued ",qs(D.issuedAt),"  Due ",qs(D.dueDate)]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-base font-semibold",children:Fe(D.totalAmountCents)}),e.jsx(Ce,{variant:"secondary",className:`text-xs ${Jn(D.status)}`,children:D.status})]}),ge?e.jsx(Io,{className:"w-4 h-4 text-muted-foreground"}):e.jsx(Sr,{className:"w-4 h-4 text-muted-foreground"})]})]}),ge&&e.jsxs("div",{className:"border-t px-5 pb-5",children:[D.lineItems&&D.lineItems.length>0&&e.jsx("div",{className:"mt-4",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-2.5 text-xs font-medium text-muted-foreground",children:"Item"}),e.jsx("th",{className:"text-right py-2.5 text-xs font-medium text-muted-foreground",children:"Qty"}),e.jsx("th",{className:"text-right py-2.5 text-xs font-medium text-muted-foreground",children:"Rate"}),e.jsx("th",{className:"text-right py-2.5 text-xs font-medium text-muted-foreground",children:"Total"})]})}),e.jsx("tbody",{children:D.lineItems.map(Ge=>e.jsxs("tr",{className:"border-b last:border-b-0",children:[e.jsx("td",{className:"py-2.5 pr-3",children:Ge.description}),e.jsx("td",{className:"py-2.5 text-right text-muted-foreground",children:Number(Ge.quantity)}),e.jsx("td",{className:"py-2.5 text-right text-muted-foreground",children:Fe(Ge.unitPrice)}),e.jsx("td",{className:"py-2.5 text-right font-medium",children:Fe(Ge.totalCents)})]},Ge.id))})]})}),e.jsxs("div",{className:"flex justify-between gap-3 text-sm pt-4 border-t mt-4 font-semibold",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{children:Fe(D.totalAmountCents)})]}),e.jsxs("div",{className:"flex gap-3 pt-4 mt-4 border-t flex-wrap",children:[e.jsxs(L,{variant:"outline",onClick:Ge=>{Ge.stopPropagation();const Nt=document.createElement("a");Nt.href=`/api/portal/${s.token}/invoices/${D.id}/pdf`,Nt.download=`${D.invoiceNumber}.pdf`,Nt.click()},"data-testid":`button-download-pdf-${D.id}`,children:[e.jsx(jo,{className:"w-4 h-4 mr-2"}),"Download PDF"]}),D.status!=="paid"&&D.status!=="draft"&&e.jsxs(L,{className:"bg-gradient-to-r from-blue-500 to-violet-600 text-white border-0 flex-1",onClick:Ge=>{Ge.stopPropagation(),B.mutate(D.id)},disabled:b===D.id,"data-testid":`button-pay-invoice-${D.id}`,children:[b===D.id?e.jsx(We,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(Ti,{className:"w-4 h-4 mr-2"}),b===D.id?"Redirecting...":`Pay ${Fe(D.totalAmountCents)}`]})]}),D.status==="paid"&&e.jsxs("div",{className:"pt-4 mt-4 border-t flex items-center justify-center gap-2 text-emerald-600 dark:text-emerald-400",children:[e.jsx(wn,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Paid in full"})]})]})]},D.id)})}):e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-full bg-muted mb-4",children:e.jsx(Wa,{className:"w-6 h-6 text-muted-foreground"})}),e.jsx("p",{className:"text-sm font-medium mb-1",children:"No invoices yet"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Invoices will appear here once your project work begins."})]})]}),H==="projects"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-1",children:"Projects"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[wt.length," project",wt.length!==1?"s":""]})]}),wt.length>0?e.jsx("div",{className:"space-y-4",children:wt.map(D=>e.jsxs(ce,{className:"p-5","data-testid":`card-portal-project-${D.id}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 flex-wrap mb-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-semibold",children:D.name}),D.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:D.description})]}),e.jsx(Ce,{variant:"secondary",className:`text-xs ${Jn(D.status)}`,children:D.status})]}),e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsx("a",{href:`/progress/${D.id}`,target:"_blank",rel:"noopener noreferrer","data-testid":`link-portal-progress-${D.id}`,children:e.jsxs(L,{variant:"outline",size:"sm",children:[e.jsx(_s,{className:"w-3.5 h-3.5 mr-1.5"}),"View Progress"]})}),D.previewUrl&&e.jsx("a",{href:D.previewUrl,target:"_blank",rel:"noopener noreferrer","data-testid":`link-portal-preview-${D.id}`,children:e.jsxs(L,{variant:"outline",size:"sm",children:[e.jsx(dT,{className:"w-3.5 h-3.5 mr-1.5"}),"Open Full Screen"]})})]}),e.jsxs("div",{className:"mt-4","data-testid":`preview-section-${D.id}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(nn,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Live Preview"})]}),D.previewUrl&&e.jsx("div",{className:"flex items-center gap-1",children:e.jsxs(L,{variant:"ghost",size:"sm",className:"h-7 text-xs",onClick:()=>{const ge=document.getElementById(`preview-iframe-${D.id}`);ge&&(ge.src=D.previewUrl)},"data-testid":`button-refresh-preview-${D.id}`,children:[e.jsx(Gl,{className:"w-3 h-3 mr-1"}),"Refresh"]})})]}),D.previewUrl?e.jsxs("div",{className:"rounded-lg border overflow-hidden bg-background shadow-sm",children:[e.jsxs("div",{className:"bg-muted/50 px-3 py-1.5 flex items-center gap-2 border-b",children:[e.jsxs("div",{className:"flex gap-1.5",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-red-400/70"}),e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-yellow-400/70"}),e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-green-400/70"})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx("div",{className:"bg-background rounded px-3 py-0.5 text-[10px] text-muted-foreground truncate max-w-[300px] border",children:D.previewUrl})}),e.jsx("a",{href:D.previewUrl,target:"_blank",rel:"noopener noreferrer",children:e.jsx(_s,{className:"w-3 h-3 text-muted-foreground hover:text-foreground transition-colors"})})]}),e.jsx("iframe",{id:`preview-iframe-${D.id}`,src:D.previewUrl,className:"w-full border-0",style:{height:"500px"},title:`Preview of ${D.name}`,sandbox:"allow-scripts allow-same-origin allow-popups allow-forms",loading:"lazy","data-testid":`iframe-preview-${D.id}`})]}):e.jsxs("div",{className:"rounded-lg border bg-gradient-to-br from-muted/30 via-muted/20 to-background p-8 text-center","data-testid":`preview-placeholder-${D.id}`,children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-primary/10 mb-4",children:e.jsx(fm,{className:"w-7 h-7 text-primary/60"})}),e.jsx("h4",{className:"font-semibold mb-1",children:"Your site is being prepared"}),e.jsx("p",{className:"text-sm text-muted-foreground max-w-sm mx-auto",children:"A live preview of your website will appear here once development begins. You'll be able to watch it come to life in real time."}),e.jsxs("div",{className:"flex items-center justify-center gap-1.5 mt-4",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary/40 animate-pulse"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Coming soon"})]})]})]}),e.jsx(DI,{token:s.token,projectId:D.id}),e.jsx(MI,{token:s.token,projectId:D.id})]},D.id))}):e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-full bg-muted mb-4",children:e.jsx(qn,{className:"w-6 h-6 text-muted-foreground"})}),e.jsx("p",{className:"text-sm font-medium mb-1",children:"No projects yet"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Your projects will appear here once they're created."})]})]}),H==="billing"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-1",children:"Billing & Payments"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your payment methods and view payment plans"})]}),e.jsx(OI,{token:s.token}),Xt.length>0&&e.jsxs("div",{"data-testid":"section-billing-payment-plans",children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider mb-4",children:"Payment Plans"}),e.jsx("div",{className:"space-y-3",children:Xt.map(D=>{const ge=Lt.find(rt=>rt.id===D.invoiceId),Ge=D.frequency==="weekly"?"week":D.frequency==="biweekly"?"2 weeks":"month",Nt=D.numberOfInstallments>0?Math.round(D.installmentsPaid/D.numberOfInstallments*100):0;return e.jsxs(ce,{className:"p-5","data-testid":`card-billing-plan-${D.id}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 flex-wrap mb-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-semibold",children:[D.numberOfInstallments," payments of ",Fe(D.installmentAmountCents)]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5",children:["Every ",Ge," ",ge?`for ${ge.invoiceNumber}`:""]})]}),e.jsx(Ce,{variant:"secondary",className:`text-xs ${Jn(D.status)}`,children:D.status==="pending"?"Ready to Start":D.status==="active"?"In Progress":D.status})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between gap-3 text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Total: ",Fe(D.totalAmountCents)]}),e.jsxs("span",{children:[D.installmentsPaid," of ",D.numberOfInstallments," paid"]})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-violet-600 h-2 rounded-full transition-all",style:{width:`${Nt}%`}})})]}),D.status==="pending"&&e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsxs(L,{className:"w-full bg-gradient-to-r from-blue-500 to-violet-600 text-white border-0",onClick:()=>$e.mutate(D.id),disabled:ne===D.id,"data-testid":`button-billing-accept-plan-${D.id}`,children:[ne===D.id?e.jsx(We,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(Ti,{className:"w-4 h-4 mr-2"}),ne===D.id?"Redirecting...":"Accept & Start Plan"]})})]},D.id)})})]}),(()=>{const D=Lt.filter(Ge=>Ge.status==="paid");if(D.length===0)return null;const ge=D.reduce((Ge,Nt)=>Ge+Nt.totalAmountCents,0);return e.jsxs("div",{"data-testid":"section-payment-history",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap mb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Payment History"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[D.length," payment",D.length!==1?"s":""," totaling ",Fe(ge)]})]}),e.jsx(ce,{className:"divide-y",children:D.map(Ge=>e.jsxs("div",{className:"flex items-center gap-4 p-4","data-testid":`payment-history-${Ge.id}`,children:[e.jsx("div",{className:"flex items-center justify-center w-9 h-9 rounded-md bg-emerald-500/10 shrink-0",children:e.jsx(wn,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium",children:Ge.invoiceNumber}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Paid ",qs(Ge.dueDate)]})]}),e.jsx("div",{className:"text-right shrink-0",children:e.jsx("p",{className:"text-sm font-semibold text-emerald-600 dark:text-emerald-400",children:Fe(Ge.totalAmountCents)})}),e.jsx(L,{variant:"ghost",size:"icon",onClick:()=>{const Nt=document.createElement("a");Nt.href=`/api/portal/${s.token}/invoices/${Ge.id}/pdf`,Nt.download=`${Ge.invoiceNumber}.pdf`,Nt.click()},"data-testid":`button-download-receipt-${Ge.id}`,children:e.jsx(jo,{className:"w-4 h-4"})})]},Ge.id))})]})})()]}),H==="support"&&e.jsxs(e.Fragment,{children:[A&&et?e.jsxs("div",{className:"space-y-5",children:[e.jsxs(L,{variant:"ghost",size:"sm",onClick:()=>W(null),"data-testid":"button-back-tickets",children:[e.jsx(va,{className:"w-4 h-4 mr-2"}),"All tickets"]}),e.jsxs(ce,{className:"overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b bg-muted/30",children:e.jsxs("div",{className:"flex items-start justify-between gap-3 flex-wrap",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("h2",{className:"text-lg font-semibold leading-tight","data-testid":"text-ticket-subject",children:et.subject}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground flex-wrap",children:[e.jsx("span",{className:"font-mono",children:et.ticketNumber}),e.jsx("span",{className:"opacity-30",children:"|"}),e.jsx("span",{className:"capitalize",children:et.category}),e.jsx("span",{className:"opacity-30",children:"|"}),e.jsx("span",{children:qs(et.createdAt)})]})]}),e.jsxs(Ce,{variant:"secondary",className:`text-xs border ${et.status==="open"?"bg-blue-500/10 text-blue-600 dark:text-blue-400 border-blue-500/20":et.status==="in_progress"?"bg-amber-500/10 text-amber-600 dark:text-amber-400 border-amber-500/20":et.status==="resolved"?"bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 border-emerald-500/20":"bg-muted border-muted"}`,children:[et.status==="open"&&e.jsx(Ii,{className:"w-3 h-3 mr-1"}),et.status==="in_progress"&&e.jsx(Wt,{className:"w-3 h-3 mr-1"}),et.status==="resolved"&&e.jsx(wn,{className:"w-3 h-3 mr-1"}),et.status.replace("_"," ")]})]})}),e.jsx("div",{className:"divide-y",children:et.messages.map(D=>{const ge=D.senderType==="admin";return e.jsx("div",{className:`p-5 ${ge?"bg-primary/[0.03] dark:bg-primary/[0.06]":""}`,"data-testid":`message-${D.id}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-semibold shrink-0 ${ge?"bg-primary text-primary-foreground":"bg-gradient-to-br from-blue-500 to-violet-500 text-white"}`,children:D.senderName.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1.5 flex-wrap",children:[e.jsx("span",{className:"text-sm font-semibold",children:D.senderName}),e.jsx(Ce,{variant:"secondary",className:`text-[10px] px-1.5 py-0 ${ge?"bg-primary/10 text-primary border-primary/20":"bg-blue-500/10 text-blue-600 dark:text-blue-400 border-blue-500/20"} border`,children:ge?"Support Team":"You"}),e.jsx("span",{className:"text-xs text-muted-foreground ml-auto shrink-0",children:qs(D.createdAt)})]}),e.jsx("p",{className:"text-sm whitespace-pre-wrap leading-relaxed text-foreground/90",children:D.message})]})]})},D.id)})}),et.status!=="closed"&&e.jsx("div",{className:"border-t",children:e.jsxs("div",{className:"p-5 space-y-3",children:[e.jsx(fs,{placeholder:"Write your reply...",value:Z,onChange:D=>q(D.target.value),className:"resize-none min-h-[100px] text-sm","data-testid":"textarea-portal-reply"}),e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1.5",children:[e.jsx(hs,{className:"w-3 h-3"}),"Our team will be notified"]}),e.jsxs(L,{onClick:()=>Yt.mutate({ticketId:A,message:Z}),disabled:!Z.trim()||Yt.isPending,"data-testid":"button-portal-send-reply",children:[Yt.isPending?e.jsx(We,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(os,{className:"w-4 h-4 mr-2"}),"Send Reply"]})]})]})}),et.status==="resolved"&&e.jsx("div",{className:"border-t p-5 bg-emerald-500/5",children:e.jsxs("div",{className:"flex items-center gap-2 text-emerald-600 dark:text-emerald-400",children:[e.jsx(wn,{className:"w-4 h-4 shrink-0"}),e.jsx("p",{className:"text-sm font-medium",children:"This ticket has been resolved"})]})}),et.status==="closed"&&e.jsx("div",{className:"border-t p-5 bg-muted/30",children:e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Kt,{className:"w-4 h-4 shrink-0"}),e.jsx("p",{className:"text-sm",children:"This ticket is closed. Open a new ticket if you need further help."})]})})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-1",children:"Support"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:St>0?`${St} active ticket${St!==1?"s":""}`:"Get help from our team"})]}),e.jsxs(L,{onClick:()=>G(!0),"data-testid":"button-new-ticket",children:[e.jsx(Qt,{className:"w-4 h-4 mr-1.5"}),"New Ticket"]})]}),(Ue||[]).length>0?e.jsx("div",{className:"space-y-2",children:(Ue||[]).map(D=>{const ge=D.status==="open"?"bg-blue-500/10 text-blue-600 dark:text-blue-400 border-blue-500/20":D.status==="in_progress"?"bg-amber-500/10 text-amber-600 dark:text-amber-400 border-amber-500/20":D.status==="resolved"?"bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 border-emerald-500/20":"bg-muted text-muted-foreground border-muted",Ge=D.status==="open"?e.jsx(Ii,{className:"w-3.5 h-3.5"}):D.status==="in_progress"?e.jsx(Wt,{className:"w-3.5 h-3.5"}):D.status==="resolved"?e.jsx(wn,{className:"w-3.5 h-3.5"}):e.jsx(Kt,{className:"w-3.5 h-3.5"});return e.jsx(ce,{className:"hover-elevate cursor-pointer",onClick:()=>W(D.id),"data-testid":`button-portal-ticket-${D.id}`,children:e.jsxs("div",{className:"p-4 flex items-start gap-3.5",children:[e.jsx("div",{className:`flex items-center justify-center w-9 h-9 rounded-full border shrink-0 ${ge}`,children:Ge}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[e.jsx("p",{className:"text-sm font-semibold truncate",children:D.subject}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx("span",{className:"font-mono",children:D.ticketNumber}),e.jsx("span",{className:"opacity-30",children:"|"}),e.jsx("span",{children:qs(D.createdAt)})]})]}),e.jsx(Ce,{variant:"secondary",className:`text-xs shrink-0 border ${ge}`,children:D.status.replace("_"," ")})]})},D.id)})}):e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-full bg-muted mb-4",children:e.jsx(ho,{className:"w-7 h-7 text-muted-foreground"})}),e.jsx("p",{className:"text-sm font-medium mb-1",children:"No support tickets yet"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"Need help? We're here for you."}),e.jsxs(L,{onClick:()=>G(!0),"data-testid":"button-new-ticket-empty",children:[e.jsx(Qt,{className:"w-4 h-4 mr-1.5"}),"Create Your First Ticket"]})]})]}),e.jsx(yt,{open:Q,onOpenChange:G,children:e.jsxs(xt,{className:"sm:max-w-lg",children:[e.jsx(gt,{children:e.jsxs(vt,{className:"flex items-center gap-2",children:[e.jsx(ho,{className:"w-5 h-5 text-muted-foreground"}),"How can we help?"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(De,{htmlFor:"ticket-subject",className:"text-xs font-medium",children:"Subject"}),e.jsx(Oe,{id:"ticket-subject",placeholder:"Brief description of your issue",value:ue,onChange:D=>_(D.target.value),"data-testid":"input-ticket-subject"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(De,{className:"text-xs font-medium",children:"Category"}),e.jsxs(Dt,{value:J,onValueChange:X,children:[e.jsx(It,{"data-testid":"select-ticket-category",children:e.jsx($t,{})}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"general",children:"General"}),e.jsx(Ie,{value:"billing",children:"Billing"}),e.jsx(Ie,{value:"technical",children:"Technical"}),e.jsx(Ie,{value:"feature_request",children:"Feature Request"}),e.jsx(Ie,{value:"bug",children:"Bug Report"})]})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(De,{className:"text-xs font-medium",children:"Priority"}),e.jsxs(Dt,{value:$,onValueChange:I,children:[e.jsx(It,{"data-testid":"select-ticket-priority",children:e.jsx($t,{})}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"low",children:"Low"}),e.jsx(Ie,{value:"medium",children:"Medium"}),e.jsx(Ie,{value:"high",children:"High"}),e.jsx(Ie,{value:"urgent",children:"Urgent"})]})]})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(De,{htmlFor:"ticket-message",className:"text-xs font-medium",children:"Describe your issue"}),e.jsx(fs,{id:"ticket-message",placeholder:"Please provide as much detail as possible so we can help you quickly...",value:Y,onChange:D=>z(D.target.value),className:"resize-none min-h-[140px] text-sm","data-testid":"textarea-ticket-message"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2 border-t",children:[e.jsx(L,{variant:"ghost",onClick:()=>G(!1),"data-testid":"button-cancel-ticket",children:"Cancel"}),e.jsxs(L,{onClick:()=>Bt.mutate({subject:ue,message:Y,category:J,priority:$}),disabled:!ue.trim()||!Y.trim()||Bt.isPending,"data-testid":"button-submit-ticket",children:[Bt.isPending?e.jsx(We,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(os,{className:"w-4 h-4 mr-2"}),"Submit Ticket"]})]})]})]})})]}),H==="servers"&&e.jsx(BI,{token:s.token,servers:ks||[],serversLoading:cs}),H==="help"&&e.jsx(HI,{articles:xs||[]}),H==="backups"&&e.jsxs("div",{className:"space-y-6","data-testid":"section-backups",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-violet-500 to-purple-600 flex items-center justify-center",children:e.jsx(po,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold","data-testid":"text-backups-title",children:"Code Backups"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Your project code is backed up to your GitHub account"})]})]}),Pe&&e.jsx(ce,{className:"p-3 bg-gradient-to-r from-emerald-50 to-teal-50 dark:from-emerald-950/20 dark:to-teal-950/20 border-emerald-200 dark:border-emerald-800","data-testid":"card-backup-pricing",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center shrink-0",children:e.jsx(rr,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-emerald-900 dark:text-emerald-200",children:["$",(Pe.rateCents/100).toFixed(2)," per ",Pe.unitLabel]}),e.jsx("p",{className:"text-xs text-emerald-700 dark:text-emerald-400",children:"Each backup is automatically added to your project billing and will appear on your next invoice."})]})]})}),!Ne||Ne.length===0?e.jsxs(ce,{className:"p-8 text-center",children:[e.jsx(mo,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"font-semibold mb-2",children:"No Backups Configured Yet"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Connect your GitHub account to enable automatic code backups for your projects."}),e.jsxs(L,{onClick:()=>window.location.href=`/api/portal/${s.token}/github/connect`,className:"bg-gradient-to-r from-gray-800 to-gray-900 hover:from-gray-900 hover:to-black","data-testid":"button-connect-github",children:[e.jsx(mo,{className:"w-4 h-4 mr-2"}),"Connect GitHub"]}),e.jsxs("div",{className:"mt-6 p-4 rounded-lg bg-muted/50 text-left max-w-md mx-auto",children:[e.jsxs("h4",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[e.jsx(Iw,{className:"w-4 h-4 text-muted-foreground"}),"Don't have a GitHub account?"]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"GitHub is a free platform where your project code is securely stored. You'll need an account to enable backups."}),e.jsxs("a",{href:"https://github.com/signup",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1.5 text-xs font-medium text-primary hover:underline","data-testid":"link-github-signup",children:["Create a free GitHub account",e.jsx(_s,{className:"w-3 h-3"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:`Once you've signed up, come back here and click "Connect GitHub" above  you'll be redirected to authorize the connection and then brought right back.`})]})]}):e.jsxs("div",{className:"space-y-4",children:[Ne.map(D=>e.jsxs(ce,{className:"overflow-hidden","data-testid":`card-backup-${D.id}`,children:[e.jsx("div",{className:"p-4 border-b bg-muted/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(po,{className:"w-5 h-5 text-violet-500"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-sm",children:D.projectName}),D.githubRepo&&e.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:D.githubRepo})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[D.isConnected?e.jsxs(Ce,{className:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400",children:[e.jsx(mo,{className:"w-3 h-3 mr-1"}),D.githubUsername]}):e.jsxs(L,{size:"sm",variant:"outline",onClick:()=>window.location.href=`/api/portal/${s.token}/github/connect`,"data-testid":`button-connect-github-${D.id}`,children:[e.jsx(mo,{className:"w-3 h-3 mr-1"}),"Connect"]}),D.autopilotEnabled&&e.jsxs(Ce,{variant:"secondary",className:"text-xs",children:[e.jsx($n,{className:"w-3 h-3 mr-1 text-amber-500"}),"Autopilot"]})]})]})}),e.jsxs("div",{className:"p-4 space-y-3",children:[D.lastPushAt&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Wt,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{children:["Last backup: ",new Date(D.lastPushAt).toLocaleString()]})]}),D.recentLogs&&D.recentLogs.length>0?e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Recent Backups"}),D.recentLogs.map(ge=>e.jsxs("div",{className:"flex items-center justify-between py-1.5 px-3 rounded-md bg-muted/50 text-xs","data-testid":`log-${ge.id}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[ge.status==="success"?e.jsx(wn,{className:"w-3.5 h-3.5 text-emerald-500"}):ge.status==="failed"?e.jsx(Fn,{className:"w-3.5 h-3.5 text-red-500"}):e.jsx(We,{className:"w-3.5 h-3.5 text-amber-500 animate-spin"}),e.jsx("span",{children:ge.commitMessage||"Backup"}),ge.triggeredBy==="autopilot"&&e.jsx("span",{title:"Autopilot",children:e.jsx($n,{className:"w-3 h-3 text-amber-500"})})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[ge.status==="success"&&Pe&&e.jsxs("span",{className:"text-emerald-600 dark:text-emerald-400 font-medium","data-testid":`text-backup-cost-${ge.id}`,children:["$",(Pe.rateCents/100).toFixed(2)]}),e.jsx("span",{children:new Date(ge.createdAt).toLocaleString()}),ge.commitSha&&e.jsx("code",{className:"bg-muted px-1.5 py-0.5 rounded font-mono",children:ge.commitSha.substring(0,7)})]})]},ge.id))]}):e.jsx("p",{className:"text-xs text-muted-foreground text-center py-2",children:"No backups yet"})]})]},D.id)),Ne.every(D=>D.isConnected)&&e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Your admin manages backup schedules and pushes. Contact support if you need to update your GitHub connection."})]})]})]})]}),e.jsx(yt,{open:E,onOpenChange:S,children:e.jsxs(xt,{className:"max-w-md",children:[e.jsx(gt,{children:e.jsxs(vt,{className:"text-destructive flex items-center gap-2",children:[e.jsx(Cb,{className:"w-5 h-5"}),"Delete Your Account"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"This will permanently delete your account and all associated data including projects, invoices, and support tickets. This action cannot be undone."}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"If you have outstanding invoices, you must settle them before deleting your account."}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(De,{className:"text-xs font-medium",children:'Type "DELETE" to confirm'}),e.jsx(Oe,{value:T,onChange:D=>P(D.target.value),placeholder:"DELETE","data-testid":"input-delete-confirm"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{variant:"outline",className:"flex-1",onClick:()=>S(!1),"data-testid":"button-cancel-delete",children:"Cancel"}),e.jsxs(L,{variant:"destructive",className:"flex-1",disabled:T!=="DELETE"||ps.isPending,onClick:()=>ps.mutate(),"data-testid":"button-confirm-delete",children:[ps.isPending?e.jsx(We,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(ls,{className:"w-4 h-4 mr-2"}),"Delete My Account"]})]})]})]})})]})}const WI="/assets/hero-ai-Dt0dd4gc.png",VI="/assets/service-websites-MnMRVx20.png",GI="/assets/service-forums-DKY4OCkT.png",QI="/assets/service-blogs-BtTjjog4.png",YI="/assets/service-backends-B-t9cV5Y.png",XI="/assets/service-support-B6dWekyT.png",ZI="/assets/service-docker-CeJT6xPL.png",JI="/assets/service-opensource-D_F4gzuT.png",eO="/assets/service-accounts-CIh6rg08.png",tO="/assets/service-billing-BEa03eay.png",sO=[{title:"Custom Websites",description:"Stunning, responsive websites built with cutting-edge AI technology. From landing pages to full e-commerce platforms.",image:VI,icon:nn},{title:"Community Forums",description:"Engage your audience with powerful, AI-moderated community forums that drive retention and loyalty.",image:GI,icon:Kt},{title:"Blog Platforms",description:"Content-rich blogs with AI writing assistance, SEO optimization, and beautiful, engaging layouts.",image:QI,icon:Km},{title:"Backend Systems",description:"Robust, scalable backend infrastructure with APIs, databases, and integrations built for performance.",image:YI,icon:Ow},{title:"Support Portals",description:"Customer support portals with AI chatbots, ticket systems, and real-time communication channels.",image:XI,icon:iT},{title:"Docker Solutions",description:"Containerized deployments with Docker for scalable, portable, and consistent application infrastructure across any environment.",image:ZI,icon:ZE},{title:"Open Source App Hosting",description:"We host and manage popular open source applications on dedicated servers for you  fully configured, maintained, and ready to use.",image:JI,icon:nT},{title:"My Account Sections",description:"Polished user account management interfaces with profile settings, preferences, security options, and activity history.",image:eO,icon:Kw},{title:"Billing Dashboards",description:"Comprehensive billing and financial dashboards with invoice tracking, payment processing, and real-time revenue analytics.",image:tO,icon:Wa}],nO=[{icon:id,title:"AI-First Approach",description:"Every solution is powered by the latest AI models, delivering smarter, faster, and more intuitive experiences."},{icon:wo,title:"Rapid Delivery",description:"Get your project live in days, not months. Our AI-accelerated workflow cuts development time dramatically."},{icon:kn,title:"Enterprise Security",description:"Bank-grade security built into every project. Your data and your customers' data stays protected."},{icon:Wt,title:"24/7 Support",description:"Round-the-clock support with real humans and AI assistants to keep your business running smoothly."}],rO=[{value:"150+",label:"Projects Delivered"},{value:"99.9%",label:"Uptime Guaranteed"},{value:"48hr",label:"Average Turnaround"},{value:"5.0",label:"Client Rating",icon:Hr}],aO=[{name:"Sarah Chen",role:"CEO, TechFlow",quote:"They turned our vision into reality in under two weeks. The AI-powered features they built into our platform have tripled our user engagement.",rating:5},{name:"Marcus Rivera",role:"Founder, GreenLeaf Co.",quote:"Incredible attention to detail and communication throughout the entire project. Our new site is fast, beautiful, and converts like crazy.",rating:5},{name:"Emily Nakamura",role:"Director of Ops, Skyline Media",quote:"We needed a complex billing dashboard and support portal fast. They delivered both ahead of schedule and the quality blew us away.",rating:5}],m1=[{step:1,icon:hs,title:"Contact Us",description:"Send us an email describing your project and goals. We'll review everything and get back to you quickly."},{step:2,icon:pg,title:"Design",description:"We craft a custom design and architecture tailored specifically to your needs and brand."},{step:3,icon:Ww,title:"Build",description:"Our AI-accelerated development process brings your project to life with precision and speed."},{step:4,icon:xT,title:"Launch",description:"We deploy, test, and hand over your polished product with full documentation and support."}];function iO(){const[s,t]=p.useState(""),[n,r]=p.useState(""),[o,l]=p.useState(!1),{toast:d}=mt(),u=we({mutationFn:async()=>{const[h,...f]=n.trim().split(" "),v=f.join(" ")||void 0;return(await je("POST","/api/newsletter/subscribe",{email:s.trim(),firstName:h||void 0,lastName:v})).json()},onSuccess:()=>{l(!0),d({title:"You're in!",description:"Thanks for subscribing. We'll keep you posted."})},onError:()=>{d({title:"Couldn't subscribe",description:"Please try again or contact us directly.",variant:"destructive"})}});return o?e.jsxs("div",{className:"flex items-center justify-center gap-2 py-2","data-testid":"text-newsletter-success",children:[e.jsx(ys,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"text-sm text-white/60",children:"You're subscribed! Thanks for joining."})]}):e.jsxs("form",{onSubmit:h=>{h.preventDefault(),s.trim()&&u.mutate()},className:"flex flex-col sm:flex-row gap-2","data-testid":"form-newsletter",children:[e.jsx(Oe,{type:"text",placeholder:"Your name",value:n,onChange:h=>r(h.target.value),className:"bg-white/5 border-white/10 text-white placeholder:text-white/30 text-sm flex-1 sm:max-w-[160px]","data-testid":"input-newsletter-name"}),e.jsx(Oe,{type:"email",placeholder:"you@example.com",value:s,onChange:h=>t(h.target.value),required:!0,className:"bg-white/5 border-white/10 text-white placeholder:text-white/30 text-sm flex-1","data-testid":"input-newsletter-email"}),e.jsx(L,{type:"submit",disabled:u.isPending,className:"bg-gradient-to-r from-blue-500 to-violet-600 border-0 text-white text-sm font-medium shrink-0","data-testid":"button-newsletter-subscribe",children:u.isPending?e.jsx(We,{className:"w-4 h-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(hs,{className:"w-3.5 h-3.5 mr-1.5"}),"Subscribe"]})})]})}function oO(){const[s,t]=p.useState(!1),[n,r]=p.useState(!1),[o,l]=p.useState(""),[d,u]=p.useState(""),[h,f]=p.useState(""),[v,x]=p.useState(""),[g,j]=p.useState(""),[N,b]=p.useState(""),[k,E]=p.useState(null),[S,T]=p.useState({}),[P,H]=p.useState(0),[re,B]=p.useState(""),[Q,G]=p.useState(!1),[ue,_]=p.useState(!1),[Y,z]=p.useState(!1),{toast:J}=mt(),{isLoading:X,isAuthenticated:$}=E2();p.useEffect(()=>(document.title="AI Web Design Agency  Custom AI-Powered Websites & Web Development | AI Powered Sites",()=>{document.title="AI Powered Sites"}),[]);const I=[{pct:4,label:"Connecting to website..."},{pct:9,label:"Fetching page content..."},{pct:14,label:"Analyzing page structure..."},{pct:19,label:"Checking title tags & meta data..."},{pct:24,label:"Scanning structured data (JSON-LD)..."},{pct:29,label:"Evaluating heading hierarchy..."},{pct:34,label:"Measuring server response time..."},{pct:39,label:"Checking image optimization..."},{pct:44,label:"Testing mobile responsiveness..."},{pct:49,label:"Inspecting security headers..."},{pct:54,label:"Auditing accessibility (ARIA, alt text)..."},{pct:59,label:"Reviewing Open Graph & social tags..."},{pct:64,label:"Analyzing content quality & readability..."},{pct:69,label:"Running keyword analysis..."},{pct:74,label:"Extracting keyword density..."},{pct:79,label:"Generating keyword recommendations..."},{pct:84,label:"Analyzing backlink profile..."},{pct:88,label:"Evaluating link structure..."},{pct:92,label:"Compiling priority recommendations..."},{pct:95,label:"Building your PDF report..."},{pct:98,label:"Finalizing results..."}],A=we({mutationFn:async()=>{G(!0),H(0),B("Initializing audit..."),E(null);const M=fetch("/api/audit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:g})});let F=0;const fe=8e3/I.length,Ee=new Promise(Pe=>{const $e=()=>{F<I.length?(H(I[F].pct),B(I[F].label),F++,setTimeout($e,fe+Math.random()*200)):Pe()};setTimeout($e,300)}),[Ne]=await Promise.all([M,Ee]);if(H(100),B("Audit complete!"),!Ne.ok){const Pe=await Ne.json();throw new Error(Pe.message||"Failed to audit website")}return await new Promise(Pe=>setTimeout(Pe,600)),Ne.json()},onSuccess:M=>{G(!1),E(M),_(!0),setTimeout(()=>{document.getElementById("audit-results")?.scrollIntoView({behavior:"smooth"})},300)},onError:M=>{G(!1),H(0),J({title:"Audit failed",description:M.message,variant:"destructive"})}}),W=async()=>{if(!(!N.trim()||!k)){z(!0);try{const M=await fetch("/api/audit/send-report",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:N,auditData:k})});if(!M.ok){const F=await M.json().catch(()=>({message:"Failed to send report"}));throw new Error(F.message||"Failed to send report")}J({title:"Report sent!",description:"Check your email for the full PDF report."}),_(!1)}catch(M){J({title:"Send failed",description:M.message||"Could not send the report. You can still download it below.",variant:"destructive"})}finally{z(!1)}}},Z=()=>{if(!k?.pdfBase64)return;const M=atob(k.pdfBase64),F=new Array(M.length);for(let Pe=0;Pe<M.length;Pe++)F[Pe]=M.charCodeAt(Pe);const ie=new Uint8Array(F),fe=new Blob([ie],{type:"application/pdf"}),Ee=URL.createObjectURL(fe),Ne=document.createElement("a");Ne.href=Ee,Ne.download="website-audit-report.pdf",Ne.click(),URL.revokeObjectURL(Ee)},q=M=>{T(F=>({...F,[M]:!F[M]}))},ne=M=>{const ie={search:sn,zap:$n,smartphone:gg,shield:kn,eye:Oo,share2:xg,fileText:Gt}[M]||cp;return e.jsx(ie,{className:"w-4 h-4"})},K=M=>M==="pass"?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-medium bg-emerald-500/15 text-emerald-400 border border-emerald-500/20",children:[e.jsx(ys,{className:"w-3 h-3"})," Pass"]}):M==="warning"?e.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-medium bg-yellow-500/15 text-yellow-400 border border-yellow-500/20",children:"! Warning"}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[10px] font-medium bg-red-500/15 text-red-400 border border-red-500/20",children:[e.jsx(zn,{className:"w-3 h-3"})," Fail"]}),U=we({mutationFn:async()=>{const M=await fetch("/api/public/conversations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:o,email:d,subject:h,message:v})});if(!M.ok)throw new Error("Failed to start conversation");return M.json()},onSuccess:M=>{r(!1),l(""),u(""),f(""),x(""),window.location.href=`/conversation/${M.accessToken}`},onError:()=>{J({title:"Something went wrong",description:"Please try again.",variant:"destructive"})}});return e.jsxs("div",{className:"min-h-screen bg-[#0a0a0f] text-white overflow-x-hidden",style:{backgroundImage:"radial-gradient(circle, rgba(255,255,255,0.12) 1px, transparent 1px)",backgroundSize:"24px 24px"},children:[e.jsxs("nav",{"aria-label":"Main navigation",className:"fixed top-0 left-0 right-0 z-50 border-b border-white/5",style:{backdropFilter:"blur(20px)",backgroundColor:"rgba(10,10,15,0.8)"},children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 h-14 sm:h-16 flex items-center justify-between gap-3",children:[e.jsxs("a",{href:"#hero",className:"flex items-center gap-2 shrink-0","data-testid":"link-nav-home",children:[e.jsx("img",{src:"/images/logo.png",alt:"AI Powered Sites",className:"w-8 h-8 rounded-md object-cover"}),e.jsx("span",{className:"text-base font-semibold tracking-tight whitespace-nowrap","data-testid":"text-brand-name",children:"AI Powered Sites"})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-1",children:[e.jsx("a",{href:"#services",className:"px-3 py-1.5 text-[13px] font-medium text-white/70 hover:text-white hover:bg-white/5 rounded-md transition-all","data-testid":"link-nav-services",children:"Services"}),e.jsx("a",{href:"#pricing",className:"px-3 py-1.5 text-[13px] font-medium text-white/70 hover:text-white hover:bg-white/5 rounded-md transition-all","data-testid":"link-nav-pricing",children:"Pricing"}),e.jsxs("div",{className:"relative group",children:[e.jsxs("button",{className:"px-3 py-1.5 text-[13px] font-medium text-white/70 hover:text-white hover:bg-white/5 rounded-md transition-all flex items-center gap-1","data-testid":"button-nav-more",children:["About ",e.jsx(Sr,{className:"w-3 h-3 opacity-50 group-hover:opacity-100 transition-opacity"})]}),e.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 pt-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200",children:e.jsxs("div",{className:"w-44 rounded-lg border border-white/10 bg-[#12121a]/95 shadow-xl shadow-black/40 py-1.5",style:{backdropFilter:"blur(20px)"},children:[e.jsxs("a",{href:"#process",className:"flex items-center gap-2.5 px-3.5 py-2 text-[13px] text-white/60 hover:text-white hover:bg-white/5 transition-colors","data-testid":"link-nav-process",children:[e.jsx($n,{className:"w-3.5 h-3.5 text-blue-400/70"}),"Our Process"]}),e.jsxs("a",{href:"#features",className:"flex items-center gap-2.5 px-3.5 py-2 text-[13px] text-white/60 hover:text-white hover:bg-white/5 transition-colors","data-testid":"link-nav-features",children:[e.jsx(kn,{className:"w-3.5 h-3.5 text-emerald-400/70"}),"Why Us"]}),e.jsxs("a",{href:"#testimonials",className:"flex items-center gap-2.5 px-3.5 py-2 text-[13px] text-white/60 hover:text-white hover:bg-white/5 transition-colors","data-testid":"link-nav-testimonials",children:[e.jsx(Hr,{className:"w-3.5 h-3.5 text-amber-400/70"}),"Reviews"]}),e.jsxs("a",{href:"#stats",className:"flex items-center gap-2.5 px-3.5 py-2 text-[13px] text-white/60 hover:text-white hover:bg-white/5 transition-colors","data-testid":"link-nav-stats",children:[e.jsx(cp,{className:"w-3.5 h-3.5 text-violet-400/70"}),"Results"]})]})})]})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsxs(L,{onClick:()=>r(!0),size:"sm",className:"hidden sm:inline-flex bg-gradient-to-r from-blue-500 to-violet-600 border-0 text-white font-medium text-[13px] h-8 px-3.5","data-testid":"button-nav-message",children:[e.jsx(Kt,{className:"w-3.5 h-3.5 mr-1.5"}),"Contact"]}),!X&&$&&e.jsxs("div",{className:"hidden sm:flex items-center gap-1",children:[e.jsx(Ha,{href:"/admin",children:e.jsx(L,{variant:"ghost",size:"sm",className:"text-white/60 hover:text-white text-[13px] h-8 px-2.5","data-testid":"button-nav-dashboard",children:e.jsx(hm,{className:"w-3.5 h-3.5"})})}),e.jsx("a",{href:"/api/logout",children:e.jsx(L,{variant:"ghost",size:"sm",className:"text-white/40 hover:text-white/70 h-8 px-2","data-testid":"button-nav-logout",children:e.jsx(fg,{className:"w-3.5 h-3.5"})})})]}),e.jsx(L,{variant:"ghost",size:"icon",className:"md:hidden text-white/70 h-8 w-8",onClick:()=>t(!s),"data-testid":"button-mobile-menu",children:s?e.jsx(zn,{className:"w-5 h-5"}):e.jsx(uT,{className:"w-5 h-5"})})]})]}),s&&e.jsxs("div",{className:"md:hidden border-t border-white/5 px-4 py-3 space-y-0.5",style:{backgroundColor:"rgba(10,10,15,0.95)"},children:[e.jsxs("a",{href:"#services",onClick:()=>t(!1),className:"flex items-center gap-2.5 px-3 py-2.5 rounded-md text-sm font-medium text-white/70 active:bg-white/5","data-testid":"link-mobile-services",children:[e.jsx(Km,{className:"w-4 h-4 text-blue-400/60"}),"Services"]}),e.jsxs("a",{href:"#pricing",onClick:()=>t(!1),className:"flex items-center gap-2.5 px-3 py-2.5 rounded-md text-sm font-medium text-white/70 active:bg-white/5","data-testid":"link-mobile-pricing",children:[e.jsx(rr,{className:"w-4 h-4 text-emerald-400/60"}),"Pricing"]}),e.jsxs("a",{href:"#process",onClick:()=>t(!1),className:"flex items-center gap-2.5 px-3 py-2.5 rounded-md text-sm font-medium text-white/70 active:bg-white/5","data-testid":"link-mobile-process",children:[e.jsx($n,{className:"w-4 h-4 text-amber-400/60"}),"Our Process"]}),e.jsxs("a",{href:"#features",onClick:()=>t(!1),className:"flex items-center gap-2.5 px-3 py-2.5 rounded-md text-sm font-medium text-white/70 active:bg-white/5","data-testid":"link-mobile-features",children:[e.jsx(kn,{className:"w-4 h-4 text-violet-400/60"}),"Why Us"]}),e.jsxs("a",{href:"#testimonials",onClick:()=>t(!1),className:"flex items-center gap-2.5 px-3 py-2.5 rounded-md text-sm font-medium text-white/70 active:bg-white/5","data-testid":"link-mobile-testimonials",children:[e.jsx(Hr,{className:"w-4 h-4 text-amber-400/60"}),"Reviews"]}),e.jsxs("div",{className:"pt-3 mt-2 border-t border-white/5 space-y-2",children:[e.jsxs(L,{onClick:()=>{r(!0),t(!1)},className:"w-full bg-gradient-to-r from-blue-500 to-violet-600 border-0 text-white font-medium h-9","data-testid":"button-mobile-message",children:[e.jsx(Kt,{className:"w-4 h-4 mr-1.5"}),"Contact Us"]}),!X&&$&&e.jsx(Ha,{href:"/admin",children:e.jsxs(L,{variant:"outline",className:"w-full border-white/15 text-white/70 bg-white/5 h-9","data-testid":"button-mobile-dashboard",children:[e.jsx(hm,{className:"w-4 h-4 mr-1.5"}),"Dashboard"]})})]})]})]}),e.jsxs("main",{children:[e.jsxs("section",{id:"hero",className:"relative pt-14 sm:pt-16 min-h-[100svh] flex items-center overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("img",{src:WI,alt:"AI-powered web design and development solutions by AI Powered Sites",className:"w-full h-full object-cover animate-hero-zoom","data-testid":"img-hero"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#0a0a0f]/70 via-[#0a0a0f]/60 to-[#0a0a0f]"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#0a0a0f]/80 via-transparent to-[#0a0a0f]/40"}),e.jsxs("div",{className:"absolute inset-0 opacity-30",children:[e.jsx("div",{className:"absolute top-1/4 -left-1/4 w-[600px] h-[600px] rounded-full bg-blue-500/20 blur-[120px] animate-hero-glow-1"}),e.jsx("div",{className:"absolute bottom-1/4 -right-1/4 w-[500px] h-[500px] rounded-full bg-violet-500/20 blur-[120px] animate-hero-glow-2"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[400px] h-[400px] rounded-full bg-purple-500/15 blur-[100px] animate-hero-glow-3"})]})]}),e.jsx("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 py-16 sm:py-24 md:py-32 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-3xl text-center",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 sm:px-4 py-1.5 rounded-full bg-white/5 border border-white/10 mb-6 sm:mb-8","data-testid":"badge-hero-tag",children:[e.jsx(id,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-xs sm:text-sm text-white/70",children:"AI-Powered Solutions"})]}),e.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-6xl lg:text-7xl font-bold leading-tight tracking-tight mb-4 sm:mb-6","data-testid":"text-hero-title",children:["AI Web Design Agency"," ",e.jsx("span",{className:"bg-gradient-to-r from-blue-400 via-violet-400 to-purple-400 bg-clip-text text-transparent",children:"Built For Your Business."})]}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl font-medium text-white/70 leading-relaxed mb-10 sm:mb-12 max-w-2xl mx-auto","data-testid":"text-hero-description",children:"Custom websites, apps, and portals  powered by AI, built for growth. No templates. No compromises."}),e.jsxs("div",{className:"max-w-2xl mx-auto mb-8","data-testid":"audit-form",children:[e.jsx("p",{className:"text-sm font-medium text-white/70 mb-4 max-w-md mx-auto leading-relaxed",children:"Free instant website audit  SEO, speed, mobile, security & more with a detailed PDF report."}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"absolute -inset-[1px] rounded-2xl bg-gradient-to-r from-blue-500/20 via-violet-500/15 to-purple-500/20 opacity-0 group-hover:opacity-100 transition-all duration-700"}),e.jsx("div",{className:"absolute -inset-[1px] rounded-2xl bg-gradient-to-b from-white/[0.08] to-white/[0.02]"}),e.jsx("div",{className:"relative bg-[#0c1121]/95 backdrop-blur-xl rounded-2xl border border-white/[0.06] shadow-[0_8px_40px_rgba(0,0,0,0.5),0_0_0_1px_rgba(255,255,255,0.03),inset_0_1px_0_rgba(255,255,255,0.04)]",children:e.jsxs("div",{className:"flex items-center h-[56px]",children:[e.jsxs("div",{className:"flex items-center gap-3 pl-5 pr-3 flex-1 min-w-0",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-blue-500/15 to-violet-500/10 border border-white/[0.06] flex items-center justify-center shrink-0",children:e.jsx(nn,{className:"w-4 h-4 text-blue-400"})}),e.jsx("input",{placeholder:"example.com",value:g,onChange:M=>j(M.target.value),onKeyDown:M=>{M.key==="Enter"&&g.trim()&&!A.isPending&&A.mutate()},className:"w-full bg-transparent text-white text-[15px] font-light tracking-wide placeholder:text-white/20 outline-none min-w-0","data-testid":"input-audit-url"})]}),e.jsx("button",{onClick:()=>A.mutate(),disabled:!g.trim()||A.isPending,className:"flex items-center justify-center gap-2 px-7 h-[40px] mx-2 bg-gradient-to-r from-blue-500 to-violet-500 text-white text-sm font-semibold rounded-xl transition-all duration-300 shrink-0 hover:from-blue-400 hover:to-violet-400 hover:shadow-[0_0_24px_rgba(99,102,241,0.4)] disabled:opacity-40 disabled:cursor-not-allowed","data-testid":"button-audit-submit",children:A.isPending?e.jsx(We,{className:"w-4 h-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(sn,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Audit"}),e.jsx(Cl,{className:"w-3.5 h-3.5 sm:hidden"})]})})]})})]}),!Q&&e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-x-5 gap-y-1.5 mt-4",children:[e.jsxs("span",{className:"flex items-center gap-1.5 text-[11px] font-medium text-white/70",children:[e.jsx(ys,{className:"w-3 h-3 text-emerald-400"}),"SEO & Keywords"]}),e.jsxs("span",{className:"flex items-center gap-1.5 text-[11px] font-medium text-white/70",children:[e.jsx(ys,{className:"w-3 h-3 text-emerald-400"}),"Speed & Performance"]}),e.jsxs("span",{className:"flex items-center gap-1.5 text-[11px] font-medium text-white/70",children:[e.jsx(ys,{className:"w-3 h-3 text-emerald-400"}),"Mobile & Security"]}),e.jsxs("span",{className:"flex items-center gap-1.5 text-[11px] font-medium text-white/70",children:[e.jsx(ys,{className:"w-3 h-3 text-emerald-400"}),"Free PDF Report"]})]})]}),Q&&e.jsx("div",{className:"max-w-2xl mx-auto mb-8 mt-4","data-testid":"audit-progress",children:e.jsx("div",{className:"relative p-[1px] rounded-xl bg-gradient-to-r from-blue-500/30 via-violet-500/30 to-blue-500/30",children:e.jsxs("div",{className:"bg-[#0a0f1e] rounded-xl px-6 py-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 animate-pulse"}),e.jsx("span",{className:"text-sm text-white/70 font-medium",children:re})]}),e.jsxs("span",{className:"text-sm font-bold text-blue-400",children:[P,"%"]})]}),e.jsx("div",{className:"w-full h-2 rounded-full bg-white/[0.06] overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-blue-500 via-violet-500 to-blue-400 transition-all duration-500 ease-out",style:{width:`${P}%`}})}),e.jsxs("div",{className:"mt-3 flex items-center justify-center gap-4 text-[11px] text-white/30",children:[e.jsx("span",{children:"7 categories"}),e.jsx("span",{className:"w-1 h-1 rounded-full bg-white/20"}),e.jsx("span",{children:"50+ checks"}),e.jsx("span",{className:"w-1 h-1 rounded-full bg-white/20"}),e.jsx("span",{children:"Full PDF report"})]})]})})}),e.jsx("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-center gap-3 sm:gap-4",children:e.jsxs(L,{size:"lg",onClick:()=>r(!0),className:"bg-white/5 border border-white/10 text-white text-sm font-medium rounded-full w-full sm:w-[200px] h-[44px]","data-testid":"button-hero-message",children:[e.jsx(Kt,{className:"w-4 h-4 mr-2"}),"Send Us a Message"]})})]})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-[#0a0a0f] to-transparent"})]}),k&&e.jsx("section",{id:"audit-results",className:"relative py-12 sm:py-20 border-t border-white/5",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6",children:[e.jsxs("div",{className:"text-center mb-8 sm:mb-12",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-white/5 border border-white/10 mb-4",children:[e.jsx(cp,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-sm text-white/70",children:"Audit Results"})]}),e.jsxs("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold tracking-tight mb-3","data-testid":"text-audit-results-title",children:["Your Website"," ",e.jsx("span",{className:"bg-gradient-to-r from-blue-400 to-violet-400 bg-clip-text text-transparent",children:"Score"})]}),e.jsx("p",{className:"text-white/40 text-sm max-w-lg mx-auto truncate",children:k.url})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8",children:[e.jsxs("div",{className:"sm:col-span-1 flex flex-col items-center justify-center p-6 rounded-xl border border-white/5 bg-white/[0.02]",children:[e.jsx("div",{className:`w-20 h-20 rounded-xl flex items-center justify-center text-3xl font-bold text-white mb-2 ${k.overallScore>=75?"bg-emerald-500/20 border border-emerald-500/30":k.overallScore>=50?"bg-yellow-500/20 border border-yellow-500/30":"bg-red-500/20 border border-red-500/30"}`,"data-testid":"text-audit-grade",children:k.grade}),e.jsxs("div",{className:"text-2xl font-bold text-white","data-testid":"text-audit-score",children:[k.overallScore,e.jsx("span",{className:"text-sm text-white/40",children:"/100"})]}),k.gradeLabel&&e.jsx("div",{className:`text-xs font-medium mt-1 ${k.overallScore>=75?"text-emerald-400":k.overallScore>=50?"text-yellow-400":"text-red-400"}`,children:k.gradeLabel})]}),e.jsxs("div",{className:"sm:col-span-2 p-5 rounded-xl border border-white/5 bg-white/[0.02]",children:[e.jsx("p",{className:"text-sm text-white/60 leading-relaxed mb-3","data-testid":"text-audit-summary",children:k.summary}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.jsxs(L,{onClick:Z,size:"sm",className:"bg-gradient-to-r from-blue-500 to-violet-600 border-0 text-white text-xs","data-testid":"button-download-pdf",children:[e.jsx(pb,{className:"w-3.5 h-3.5 mr-1.5"}),"Download PDF Report"]}),e.jsxs(L,{onClick:()=>_(!0),size:"sm",variant:"outline",className:"border-white/15 text-white/80 bg-white/5 text-xs","data-testid":"button-email-report",children:[e.jsx(hs,{className:"w-3.5 h-3.5 mr-1.5"}),"Email Report"]})]})]})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-7 gap-2 mb-8",children:k.categories.map(M=>{const F=Math.round(M.score/M.maxScore*100);return e.jsxs("button",{onClick:()=>q(M.name),className:`p-3 rounded-lg border text-center transition-all ${S[M.name]?"border-blue-500/40 bg-blue-500/10":"border-white/5 bg-white/[0.02] hover:bg-white/[0.04]"}`,"data-testid":`button-audit-category-${M.name.toLowerCase().replace(/\s/g,"-")}`,children:[e.jsxs("div",{className:`text-lg font-bold mb-0.5 ${F>=75?"text-emerald-400":F>=50?"text-yellow-400":"text-red-400"}`,children:[F,"%"]}),e.jsx("div",{className:"text-[10px] text-white/50 leading-tight",children:M.name})]},M.name)})}),e.jsx("div",{className:"space-y-3",children:k.categories.map(M=>{const F=Math.round(M.score/M.maxScore*100),ie=S[M.name]!==!1;return e.jsxs("div",{className:"rounded-xl border border-white/5 bg-white/[0.02] overflow-hidden","data-testid":`audit-category-${M.name.toLowerCase().replace(/\s/g,"-")}`,children:[e.jsxs("button",{onClick:()=>q(M.name),className:"w-full flex items-center justify-between p-4 sm:p-5 hover:bg-white/[0.02] transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${F>=75?"bg-emerald-500/15 text-emerald-400":F>=50?"bg-yellow-500/15 text-yellow-400":"bg-red-500/15 text-red-400"}`,children:ne(M.icon)}),e.jsx("span",{className:"font-medium text-sm text-white/90",children:M.name})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 sm:w-32 h-1.5 rounded-full bg-white/5 overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${F>=75?"bg-emerald-400":F>=50?"bg-yellow-400":"bg-red-400"}`,style:{width:`${F}%`}})}),e.jsxs("span",{className:`text-xs font-semibold min-w-[32px] text-right ${F>=75?"text-emerald-400":F>=50?"text-yellow-400":"text-red-400"}`,children:[F,"%"]})]}),ie?e.jsx(Io,{className:"w-4 h-4 text-white/30"}):e.jsx(Sr,{className:"w-4 h-4 text-white/30"})]})]}),ie&&e.jsx("div",{className:"px-4 sm:px-5 pb-4 sm:pb-5 space-y-2.5 border-t border-white/5 pt-3",children:M.items.map((fe,Ee)=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-2 sm:gap-3 p-3 rounded-lg bg-white/[0.02]",children:[e.jsx("div",{className:"shrink-0",children:K(fe.status)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-xs font-medium text-white/80 mb-0.5",children:fe.label}),e.jsx("div",{className:"text-[11px] text-white/40 break-words",children:fe.detail}),fe.recommendation&&fe.status!=="pass"&&e.jsxs("div",{className:"text-[11px] text-blue-400/70 mt-1 flex items-start gap-1",children:[e.jsx(Cl,{className:"w-3 h-3 mt-0.5 shrink-0"}),e.jsx("span",{children:fe.recommendation})]})]})]},Ee))})]},M.name)})}),e.jsxs("div",{className:"mt-8 relative overflow-hidden rounded-2xl border border-blue-500/20","data-testid":"audit-cta-banner",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-600/20 via-violet-600/15 to-blue-600/10"}),e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 to-violet-500"}),e.jsxs("div",{className:"relative p-6 sm:p-8 text-center",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-blue-500/20 border border-blue-500/30 mb-4",children:[e.jsx(ya,{className:"w-3.5 h-3.5 text-blue-300"}),e.jsx("span",{className:"text-xs font-semibold text-blue-300 tracking-wide uppercase",children:"Free Consultation"})]}),e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-2",children:"Get Your Free Website Strategy Session"}),e.jsx("p",{className:"text-white/50 text-sm sm:text-base max-w-xl mx-auto mb-5 leading-relaxed",children:k.overallScore<60?"Your site is losing visitors and revenue. We'll show you exactly how to fix these issues and start growing your business online  at no cost.":k.overallScore<80?"Your site has real potential. Let us show you the quick wins that could boost your traffic by 50% or more  completely free.":"Your site is performing well! Let's fine-tune it to unlock even more traffic and conversions  on us."}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-3 mb-5",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-emerald-400",children:[e.jsx(ys,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"100% free, no strings attached"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-emerald-400",children:[e.jsx(ys,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"Custom growth plan for your business"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-emerald-400",children:[e.jsx(ys,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"See results within days"})]})]}),e.jsxs(L,{onClick:()=>r(!0),size:"lg",className:"bg-gradient-to-r from-blue-500 to-violet-600 border-0 text-white font-semibold px-8 shadow-[0_0_24px_rgba(99,102,241,0.4)] hover:shadow-[0_0_32px_rgba(99,102,241,0.6)] hover:brightness-110 transition-all","data-testid":"button-audit-free-consult",children:[e.jsx(wo,{className:"w-4 h-4 mr-2"}),"Claim Your Free Consultation"]}),e.jsx("p",{className:"text-[11px] text-white/25 mt-3",children:"Limited availability  Respond within 24 hours"})]})]}),k.topRecommendations?.length>0&&e.jsxs("div",{className:"mt-6 p-5 sm:p-6 rounded-xl border border-white/5 bg-white/[0.02]",children:[e.jsxs("h3",{className:"text-sm font-semibold text-white/90 mb-4 flex items-center gap-2",children:[e.jsx(wo,{className:"w-4 h-4 text-blue-400"}),"Top Recommendations"]}),e.jsx("div",{className:"space-y-2.5",children:k.topRecommendations.slice(0,6).map((M,F)=>e.jsxs("div",{className:"flex items-start gap-2.5 text-xs text-white/60 leading-relaxed",children:[e.jsx("span",{className:"shrink-0 w-5 h-5 rounded-full bg-blue-500/15 text-blue-400 flex items-center justify-center text-[10px] font-bold mt-0.5",children:F+1}),e.jsx("span",{children:M})]},F))})]})]})}),e.jsx("section",{id:"stats",className:"relative py-12 sm:py-20 border-y border-white/5",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 sm:gap-6 md:gap-8",children:rO.map(M=>e.jsxs("div",{className:"text-center","data-testid":`stat-${M.label.toLowerCase().replace(/\s/g,"-")}`,children:[e.jsxs("div",{className:"flex items-center justify-center gap-1.5 mb-1",children:[e.jsx("span",{className:"text-2xl sm:text-3xl md:text-4xl font-bold bg-gradient-to-r from-blue-400 to-violet-400 bg-clip-text text-transparent",children:M.value}),M.icon&&e.jsx(Hr,{className:"w-5 h-5 text-yellow-400 fill-yellow-400"})]}),e.jsx("span",{className:"text-sm text-white/40",children:M.label})]},M.label))})})}),e.jsx("section",{id:"services",className:"relative py-16 sm:py-24 md:py-32",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:[e.jsxs("div",{className:"text-center mb-10 sm:mb-16",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-white/5 border border-white/10 mb-4 sm:mb-6",children:[e.jsx(ya,{className:"w-4 h-4 text-violet-400"}),e.jsx("span",{className:"text-sm text-white/70",children:"What We Build"})]}),e.jsxs("h2",{className:"text-2xl sm:text-3xl md:text-5xl font-bold tracking-tight mb-3 sm:mb-4","data-testid":"text-services-title",children:["Custom Web Development"," ",e.jsx("span",{className:"bg-gradient-to-r from-blue-400 to-violet-400 bg-clip-text text-transparent",children:"Services"})]}),e.jsx("p",{className:"text-white/50 text-sm sm:text-lg max-w-2xl mx-auto",children:"From concept to launch, our AI-driven web design delivers responsive, mobile-first solutions that drive results. Every project is crafted with AI precision and human creativity."})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:sO.map(M=>e.jsxs("div",{className:"group relative rounded-md overflow-hidden border border-white/5 bg-white/[0.02] hover:border-white/10 transition-colors","data-testid":`card-service-${M.title.toLowerCase().replace(/\s/g,"-")}`,children:[e.jsxs("div",{className:"relative h-48 overflow-hidden",children:[e.jsx("img",{src:M.image,alt:`${M.title}  AI Powered Sites service`,loading:"lazy",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#0a0a0f] via-[#0a0a0f]/40 to-transparent"}),e.jsxs("div",{className:"absolute bottom-4 left-4 flex items-center gap-2.5",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-md bg-gradient-to-br from-blue-500/20 to-violet-600/20 border border-white/10",style:{backdropFilter:"blur(8px)"},children:e.jsx(M.icon,{className:"w-5 h-5 text-blue-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:M.title})]})]}),e.jsx("div",{className:"p-5",children:e.jsx("p",{className:"text-white/50 text-sm leading-relaxed",children:M.description})})]},M.title))})]})}),e.jsx("section",{id:"process",className:"relative py-16 sm:py-24 md:py-32 border-t border-white/5",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:[e.jsxs("div",{className:"text-center mb-10 sm:mb-16",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-white/5 border border-white/10 mb-4 sm:mb-6",children:[e.jsx($n,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-sm text-white/70",children:"Our Process"})]}),e.jsxs("h2",{className:"text-2xl sm:text-3xl md:text-5xl font-bold tracking-tight mb-3 sm:mb-4","data-testid":"text-process-title",children:["From Idea to"," ",e.jsx("span",{className:"bg-gradient-to-r from-blue-400 to-violet-400 bg-clip-text text-transparent",children:"Launch"})]}),e.jsx("p",{className:"text-white/50 text-sm sm:text-lg max-w-2xl mx-auto",children:"A simple, transparent process that keeps you in control every step of the way."})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 sm:gap-6",children:m1.map((M,F)=>e.jsxs("div",{className:"relative text-center p-4 sm:p-6 rounded-md border border-white/5 bg-white/[0.02]","data-testid":`card-process-${M.step}`,children:[F<m1.length-1&&e.jsx("div",{className:"hidden md:block absolute top-1/2 -right-3 z-10",children:e.jsx(Cl,{className:"w-6 h-6 text-white/10"})}),e.jsx("div",{className:"flex items-center justify-center w-11 h-11 sm:w-14 sm:h-14 rounded-md bg-gradient-to-br from-blue-500/10 to-violet-600/10 border border-white/10 mx-auto mb-3 sm:mb-4",children:e.jsx(M.icon,{className:"w-5 h-5 sm:w-7 sm:h-7 text-blue-400"})}),e.jsxs("div",{className:"text-[10px] sm:text-xs font-bold uppercase tracking-widest text-violet-400 mb-1.5 sm:mb-2",children:["Step ",M.step]}),e.jsx("h3",{className:"text-sm sm:text-lg font-semibold mb-1.5 sm:mb-2",children:M.title}),e.jsx("p",{className:"text-white/50 text-xs sm:text-sm leading-relaxed",children:M.description})]},M.title))})]})}),e.jsxs("section",{id:"features",className:"relative py-16 sm:py-24 md:py-32 border-t border-white/5",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-blue-500/[0.02] to-violet-500/[0.02]"}),e.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6",children:[e.jsxs("div",{className:"text-center mb-10 sm:mb-16",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-white/5 border border-white/10 mb-4 sm:mb-6",children:[e.jsx(ys,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-sm text-white/70",children:"Why Choose Us"})]}),e.jsxs("h2",{className:"text-2xl sm:text-3xl md:text-5xl font-bold tracking-tight mb-3 sm:mb-4","data-testid":"text-features-title",children:["Why Hire Our"," ",e.jsx("span",{className:"bg-gradient-to-r from-blue-400 to-violet-400 bg-clip-text text-transparent",children:"AI Web Design Agency"})]}),e.jsx("p",{className:"text-white/50 text-sm sm:text-lg max-w-2xl mx-auto",children:"We don't just build things. We deliver affordable custom web development with AI-first engineering that evolves with your business."})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:nO.map(M=>e.jsxs("div",{className:"flex gap-4 sm:gap-5 p-4 sm:p-6 rounded-md border border-white/5 bg-white/[0.02] hover:border-white/10 transition-colors","data-testid":`card-feature-${M.title.toLowerCase().replace(/\s/g,"-")}`,children:[e.jsx("div",{className:"flex-shrink-0 flex items-center justify-center w-12 h-12 rounded-md bg-gradient-to-br from-blue-500/10 to-violet-600/10 border border-white/10",children:e.jsx(M.icon,{className:"w-6 h-6 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-1.5",children:M.title}),e.jsx("p",{className:"text-white/50 text-sm leading-relaxed",children:M.description})]})]},M.title))})]})]}),e.jsx("section",{id:"testimonials",className:"relative py-16 sm:py-24 md:py-32 border-t border-white/5",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:[e.jsxs("div",{className:"text-center mb-10 sm:mb-16",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-white/5 border border-white/10 mb-4 sm:mb-6",children:[e.jsx(wb,{className:"w-4 h-4 text-violet-400"}),e.jsx("span",{className:"text-sm text-white/70",children:"Client Love"})]}),e.jsxs("h2",{className:"text-2xl sm:text-3xl md:text-5xl font-bold tracking-tight mb-3 sm:mb-4","data-testid":"text-testimonials-title",children:["Trusted by"," ",e.jsx("span",{className:"bg-gradient-to-r from-blue-400 to-violet-400 bg-clip-text text-transparent",children:"Growing Businesses"})]}),e.jsx("p",{className:"text-white/50 text-sm sm:text-lg max-w-2xl mx-auto",children:"Don't just take our word for it. Here's what our clients have to say."})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 sm:gap-6",children:aO.map(M=>e.jsxs("div",{className:"relative p-4 sm:p-6 rounded-md border border-white/5 bg-white/[0.02]","data-testid":`card-testimonial-${M.name.toLowerCase().replace(/\s/g,"-")}`,children:[e.jsx(wb,{className:"w-8 h-8 text-violet-400/20 mb-4"}),e.jsx("p",{className:"text-white/60 text-sm leading-relaxed mb-6",children:M.quote}),e.jsx("div",{className:"flex items-center gap-1 mb-3",children:Array.from({length:M.rating}).map((F,ie)=>e.jsx(Hr,{className:"w-3.5 h-3.5 text-yellow-400 fill-yellow-400"},ie))}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold",children:M.name}),e.jsx("p",{className:"text-xs text-white/40",children:M.role})]})]},M.name))})]})}),e.jsxs("section",{id:"pricing",className:"relative py-16 sm:py-28 md:py-36 border-t border-white/5 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-emerald-500/[0.02] via-transparent to-blue-500/[0.03]"}),e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-[800px] h-[600px] rounded-full bg-emerald-500/[0.04] blur-[120px]"}),e.jsx("div",{className:"absolute bottom-0 left-1/4 w-[500px] h-[500px] rounded-full bg-blue-500/[0.05] blur-[100px]"}),e.jsx("div",{className:"absolute top-1/3 right-0 w-[400px] h-[400px] rounded-full bg-violet-500/[0.04] blur-[100px]"})]}),e.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6",children:[e.jsxs("div",{className:"text-center mb-14 sm:mb-20",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-5 py-2 rounded-full bg-emerald-500/[0.08] border border-emerald-500/20 mb-6 sm:mb-8",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-400 animate-pulse"}),e.jsx("span",{className:"text-sm font-medium text-emerald-300/90",children:"Simple, Honest Pricing"})]}),e.jsxs("h2",{className:"text-[1.75rem] leading-[1.2] sm:text-4xl md:text-6xl font-bold tracking-tight mb-4 sm:mb-6","data-testid":"text-pricing-title",children:["Pay As You Go."," ",e.jsx("span",{className:"bg-gradient-to-r from-emerald-400 via-teal-400 to-cyan-400 bg-clip-text text-transparent",children:"Only Pay for Results."})]}),e.jsxs("p",{className:"text-white/50 text-sm sm:text-base md:text-xl max-w-2xl mx-auto leading-relaxed px-2 sm:px-0",children:["No subscriptions. No retainers. No surprise fees.",e.jsx("br",{className:"hidden sm:block"}),"Every dollar goes toward deliverables you can see."]})]}),e.jsx("div",{className:"max-w-6xl mx-auto mb-16 sm:mb-20",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 sm:gap-10 items-stretch",children:[e.jsxs("div",{className:"relative space-y-4 sm:space-y-5","data-testid":"card-pricing-comparison",children:[e.jsxs("div",{className:"relative p-5 sm:p-8 rounded-md border border-red-500/10 bg-red-500/[0.02] opacity-50 group",children:[e.jsxs("div",{className:"flex items-start gap-3.5 sm:gap-5",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-md bg-red-500/10 border border-red-500/15 shrink-0",children:e.jsx(jT,{className:"w-5 h-5 sm:w-6 sm:h-6 text-red-400/80"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm sm:text-base font-semibold text-red-300/80 mb-1.5 sm:mb-2",children:"The Old Way"}),e.jsx("p",{className:"text-sm text-white/35 leading-relaxed",children:"Pay $3,000-$10,000+ upfront. Lock into retainers. Months of waiting. Hope it works out."}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:["Hidden fees","Long contracts","Slow delivery"].map(M=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-full bg-red-500/[0.06] border border-red-500/10 text-[11px] text-red-400/60",children:[e.jsx(zn,{className:"w-2.5 h-2.5"}),M]},M))})]})]}),e.jsx("div",{className:"absolute top-1/2 left-0 right-0 -translate-y-1/2 rotate-[-3deg] flex justify-center",children:e.jsx("div",{className:"w-[90%] h-[2px] bg-gradient-to-r from-transparent via-red-400/30 to-transparent"})})]}),e.jsxs("div",{className:"relative p-5 sm:p-8 rounded-md border border-emerald-500/25 bg-gradient-to-br from-emerald-500/[0.08] via-teal-500/[0.04] to-cyan-500/[0.06] shadow-lg shadow-emerald-500/[0.05]",children:[e.jsx("div",{className:"absolute -top-3.5 left-5 sm:left-6",children:e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 sm:px-4 py-1.5 rounded-full bg-emerald-500/20 border border-emerald-500/25 text-[11px] sm:text-xs font-semibold text-emerald-300 shadow-lg shadow-emerald-500/10",children:[e.jsx(ys,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5"})," Our Approach"]})}),e.jsxs("div",{className:"flex items-start gap-3.5 sm:gap-5 mt-3",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 rounded-md bg-gradient-to-br from-emerald-500/20 to-teal-500/20 border border-emerald-500/20 shrink-0",children:e.jsx(qw,{className:"w-5 h-5 sm:w-6 sm:h-6 text-emerald-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm sm:text-base font-semibold text-emerald-300 mb-1.5 sm:mb-2",children:"Pay As You Go"}),e.jsx("p",{className:"text-sm text-white/55 leading-relaxed",children:"You're billed per deliverable  per page designed, per feature built, per revision made. See every line item before you approve."}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:["Transparent","No lock-in","Scale anytime"].map(M=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-full bg-emerald-500/[0.08] border border-emerald-500/15 text-[11px] text-emerald-400/80",children:[e.jsx(ys,{className:"w-2.5 h-2.5"}),M]},M))})]})]})]})]}),e.jsx("div",{className:"space-y-4",children:[{icon:Wa,title:"Billed Per Deliverable",desc:"Every page, feature, and asset is itemized. You see exactly what you're paying for  no bundled mystery charges.",color:"from-emerald-500/15 to-teal-500/15",iconColor:"text-emerald-400",border:"hover:border-emerald-500/20"},{icon:kn,title:"No Contracts or Commitments",desc:"Start a project, pause it, or wrap it up. There's no minimum spend, no lock-in period, no cancellation fees.",color:"from-blue-500/15 to-cyan-500/15",iconColor:"text-blue-400",border:"hover:border-blue-500/20"},{icon:Wt,title:"Flexible Payment Plans",desc:"Bigger project? Split it into comfortable installments. We'll set up a plan that matches your cash flow.",color:"from-violet-500/15 to-purple-500/15",iconColor:"text-violet-400",border:"hover:border-violet-500/20"},{icon:Kw,title:"Full Transparency Portal",desc:"Track every deliverable, view invoices, approve work, and manage payments  all from your own dashboard.",color:"from-amber-500/15 to-orange-500/15",iconColor:"text-amber-400",border:"hover:border-amber-500/20"}].map(M=>e.jsxs("div",{className:`group flex items-start gap-4 p-5 rounded-md bg-white/[0.02] border border-white/[0.06] ${M.border} transition-all duration-300 hover:bg-white/[0.04]`,"data-testid":`card-benefit-${M.title.toLowerCase().replace(/\s+/g,"-")}`,children:[e.jsx("div",{className:`flex items-center justify-center w-11 h-11 rounded-md bg-gradient-to-br ${M.color} border border-white/[0.06] shrink-0 group-hover:scale-105 transition-transform duration-300`,children:e.jsx(M.icon,{className:`w-5 h-5 ${M.iconColor}`})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold mb-1 group-hover:text-white transition-colors",children:M.title}),e.jsx("p",{className:"text-xs text-white/40 leading-relaxed",children:M.desc})]})]},M.title))})]})}),e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"relative p-6 sm:p-8 md:p-12 rounded-md border border-violet-500/20 bg-gradient-to-br from-violet-500/[0.06] via-blue-500/[0.03] to-purple-500/[0.06] text-center overflow-hidden","data-testid":"card-pricing-cta",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_top,_rgba(139,92,246,0.08)_0%,transparent_60%)]"}),e.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-[300px] h-[1px] bg-gradient-to-r from-transparent via-violet-400/40 to-transparent"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"flex items-center justify-center w-14 h-14 sm:w-16 sm:h-16 rounded-full bg-gradient-to-br from-blue-500/20 to-violet-500/20 border border-white/10 mx-auto mb-5 sm:mb-6 shadow-lg shadow-violet-500/10",children:e.jsx(Kt,{className:"w-6 h-6 sm:w-7 sm:h-7 text-violet-400"})}),e.jsx("h3",{className:"text-xl sm:text-2xl md:text-3xl font-bold mb-3 sm:mb-4",children:"Ready to Get Started?"}),e.jsx("p",{className:"text-white/50 text-xs sm:text-sm md:text-base max-w-lg mx-auto leading-relaxed mb-6 sm:mb-8 px-2 sm:px-0",children:"Tell us what you're building. We'll send you a clear, itemized proposal within 48 hours  completely free, zero obligation."}),e.jsxs(L,{size:"lg",onClick:()=>r(!0),className:"bg-gradient-to-r from-blue-500 via-violet-500 to-purple-600 border-0 text-white text-sm sm:text-base font-semibold px-8 sm:px-12 py-5 sm:py-6 shadow-xl shadow-violet-500/25 hover:shadow-violet-500/40 transition-shadow duration-300","data-testid":"button-pricing-message",children:[e.jsx(Kt,{className:"w-5 h-5 mr-2"}),"Start a Conversation"]}),e.jsx("p",{className:"text-[11px] sm:text-xs text-white/30 mt-4 sm:mt-5",children:"Free consultation. No calls. No pressure. Just a simple conversation via email."})]})]})})]})]}),e.jsx("section",{id:"faq",className:"relative py-16 sm:py-24 md:py-32 border-t border-white/5",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6",children:[e.jsxs("div",{className:"text-center mb-10 sm:mb-16",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-white/5 border border-white/10 mb-4 sm:mb-6",children:[e.jsx(Kt,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-sm text-white/70",children:"Common Questions"})]}),e.jsxs("h2",{className:"text-2xl sm:text-3xl md:text-5xl font-bold tracking-tight mb-3 sm:mb-4","data-testid":"text-faq-title",children:["Frequently Asked"," ",e.jsx("span",{className:"bg-gradient-to-r from-blue-400 to-violet-400 bg-clip-text text-transparent",children:"Questions"})]}),e.jsx("p",{className:"text-white/50 text-sm sm:text-lg max-w-2xl mx-auto",children:"Everything you need to know about our AI web design and custom web development services."})]}),e.jsx("div",{className:"space-y-4","data-testid":"faq-list",children:[{q:"How long does it take to build a custom website?",a:"Most projects are delivered within 48 hours to 2 weeks depending on complexity. Our AI-accelerated workflow cuts development time dramatically compared to traditional web design agencies."},{q:"What technologies do you use for web development?",a:"We use cutting-edge technologies including React, Node.js, PostgreSQL, Docker, and the latest AI models. Our custom React development services and Node.js web development ensure modern, scalable, responsive solutions."},{q:"Do you offer affordable web development for small businesses?",a:"Absolutely. We bill per deliverable  per page designed, per feature built  so you only pay for what we create. No retainers, no subscriptions. Our pricing works for startups and small businesses of any size."},{q:"How does your AI-powered web design process work?",a:"It's simple: contact us with your project details, we design a custom architecture, our AI-accelerated development brings it to life, then we deploy and hand over your polished product with full documentation and support."},{q:"Do you offer ongoing support and maintenance?",a:"Yes, we provide 24/7 support with real humans and AI assistants. Every client gets access to a dedicated support portal with ticket tracking, real-time communication, and project progress updates."},{q:"Can you build custom web applications and APIs?",a:"Yes. We build custom web applications, REST APIs, billing dashboards, support portals, community forums, and more. We also offer Docker deployment services for self-hosted infrastructure."}].map((M,F)=>e.jsxs("div",{className:"p-5 sm:p-6 rounded-md border border-white/5 bg-white/[0.02]","data-testid":`faq-item-${F}`,children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold mb-2 text-white/90",children:M.q}),e.jsx("p",{className:"text-sm text-white/50 leading-relaxed",children:M.a})]},F))})]})}),e.jsxs("section",{className:"relative py-16 sm:py-24 md:py-32 border-t border-white/5",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-blue-500/[0.03] to-transparent"}),e.jsxs("div",{className:"relative max-w-4xl mx-auto px-4 sm:px-6 text-center",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl md:text-5xl font-bold tracking-tight mb-4 sm:mb-6","data-testid":"text-cta-title",children:["Ready to Build Something"," ",e.jsx("span",{className:"bg-gradient-to-r from-blue-400 via-violet-400 to-purple-400 bg-clip-text text-transparent",children:"Extraordinary?"})]}),e.jsx("p",{className:"text-white/50 text-sm sm:text-lg max-w-2xl mx-auto mb-8 sm:mb-10",children:"Tell us about your project and we'll craft a custom AI-powered web development solution tailored to your specific business needs. No templates, no compromises."}),e.jsx("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-center gap-3 sm:gap-4",children:e.jsxs(L,{size:"lg",onClick:()=>r(!0),className:"bg-gradient-to-r from-blue-500 to-violet-600 border-0 text-white text-base font-medium px-10","data-testid":"button-cta-message",children:[e.jsx(Kt,{className:"w-4 h-4 mr-2"}),"Send Us a Message"]})})]})]})]}),e.jsx("footer",{"aria-label":"Site footer",className:"border-t border-white/5 pt-10 sm:pt-16 pb-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 sm:gap-10 mb-8 sm:mb-12",children:[e.jsxs("div",{className:"col-span-2 md:col-span-1",children:[e.jsxs("div",{className:"flex items-center gap-2.5 mb-4",children:[e.jsx("img",{src:"/images/logo.png",alt:"AI Powered Sites",className:"w-9 h-9 rounded-md object-cover"}),e.jsx("span",{className:"text-lg font-semibold",children:"AI Powered Sites"})]}),e.jsx("p",{className:"text-sm text-white/40 leading-relaxed mb-6",children:"AI web design agency crafting custom websites, web applications, and digital experiences for startups and growing businesses."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold mb-4 text-white/80",children:"Services"}),e.jsxs("ul",{className:"space-y-2.5",children:[e.jsx("li",{children:e.jsx("a",{href:"#services",className:"text-sm text-white/40 transition-colors","data-testid":"link-footer-websites",children:"Custom Websites"})}),e.jsx("li",{children:e.jsx("a",{href:"#services",className:"text-sm text-white/40 transition-colors","data-testid":"link-footer-forums",children:"Community Forums"})}),e.jsx("li",{children:e.jsx("a",{href:"#services",className:"text-sm text-white/40 transition-colors","data-testid":"link-footer-backends",children:"Backend Systems"})}),e.jsx("li",{children:e.jsx("a",{href:"#services",className:"text-sm text-white/40 transition-colors","data-testid":"link-footer-docker",children:"Docker Solutions"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold mb-4 text-white/80",children:"Company"}),e.jsxs("ul",{className:"space-y-2.5",children:[e.jsx("li",{children:e.jsx("a",{href:"#features",className:"text-sm text-white/40 transition-colors","data-testid":"link-footer-features",children:"Why Choose Us"})}),e.jsx("li",{children:e.jsx("a",{href:"#process",className:"text-sm text-white/40 transition-colors","data-testid":"link-footer-process",children:"Our Process"})}),e.jsx("li",{children:e.jsx("a",{href:"#pricing",className:"text-sm text-white/40 transition-colors","data-testid":"link-footer-pricing",children:"Pricing"})}),e.jsx("li",{children:e.jsx("a",{href:"#testimonials",className:"text-sm text-white/40 transition-colors","data-testid":"link-footer-testimonials",children:"Testimonials"})}),e.jsx("li",{children:e.jsx("a",{href:"#stats",className:"text-sm text-white/40 transition-colors","data-testid":"link-footer-results",children:"Results"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold mb-4 text-white/80",children:"Get In Touch"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex items-center gap-2.5",children:[e.jsx(hs,{className:"w-4 h-4 text-white/30 shrink-0"}),e.jsx("a",{href:"mailto:hello@aipoweredsites.com",className:"text-sm text-white/40 transition-colors","data-testid":"link-footer-email",children:"hello@aipoweredsites.com"})]}),e.jsxs("li",{className:"flex items-center gap-2.5",children:[e.jsx(wl,{className:"w-4 h-4 text-white/30 shrink-0"}),e.jsx("span",{className:"text-sm text-white/40",children:"Remote-First Team"})]})]}),e.jsx("div",{className:"mt-6",children:e.jsxs(L,{size:"sm",onClick:()=>r(!0),className:"bg-gradient-to-r from-blue-500 to-violet-600 border-0 text-white font-medium","data-testid":"button-footer-message",children:[e.jsx(Kt,{className:"w-3.5 h-3.5 mr-1.5"}),"Message Us"]})})]})]}),e.jsx("div",{className:"border-t border-white/5 pt-8 pb-6",children:e.jsxs("div",{className:"max-w-xl mx-auto text-center mb-6",children:[e.jsx("h4",{className:"text-sm font-semibold mb-1.5","data-testid":"text-newsletter-title",children:"Stay in the Loop"}),e.jsx("p",{className:"text-xs text-white/40 mb-4",children:"Get tips on AI, web design, and business growth. No spam, ever."}),e.jsx(iO,{})]})}),e.jsxs("div",{className:"border-t border-white/5 pt-6 flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("p",{className:"text-xs text-white/20",children:[" ",new Date().getFullYear()," AI Powered Sites. All rights reserved."]}),e.jsx("p",{className:"text-xs text-white/20",children:"Built with AI. Powered by passion."})]})]})}),e.jsx(yt,{open:ue,onOpenChange:_,children:e.jsxs(xt,{className:"sm:max-w-md bg-[#12121a] border-white/10 text-white",children:[e.jsxs(gt,{children:[e.jsxs(vt,{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(hs,{className:"w-5 h-5 text-violet-400"}),"Get Your Full Report"]}),e.jsx($i,{className:"text-white/50",children:"Enter your email to receive the detailed PDF report with all recommendations."})]}),e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"inline-flex items-center gap-3 px-4 py-2 rounded-xl bg-white/5 border border-white/10",children:[e.jsx("span",{className:"text-2xl font-bold",style:{color:k?.overallScore>=75?"#22c55e":k?.overallScore>=50?"#eab308":"#ef4444"},children:k?.grade}),e.jsxs("span",{className:"text-white/50 text-sm",children:[k?.overallScore,"/100"]})]})}),e.jsxs("div",{className:"relative",children:[e.jsx(hs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-violet-400"}),e.jsx("input",{type:"email",placeholder:"your@email.com",value:N,onChange:M=>b(M.target.value),onKeyDown:M=>{M.key==="Enter"&&N.trim()&&W()},className:"w-full bg-white/5 border border-white/10 rounded-lg pl-10 pr-4 py-3 text-white text-sm placeholder:text-white/25 outline-none focus:border-violet-500/50 transition-colors","data-testid":"input-audit-email-dialog"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:W,disabled:!N.trim()||Y,className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-blue-500 to-violet-500 disabled:from-blue-600 disabled:to-violet-600 disabled:cursor-not-allowed text-white text-sm font-semibold rounded-lg transition-all","data-testid":"button-send-report",children:[Y?e.jsx(We,{className:"w-4 h-4 animate-spin"}):e.jsx(os,{className:"w-4 h-4"}),Y?"Sending...":"Email My Report"]}),e.jsxs("button",{onClick:()=>{Z(),_(!1)},className:"flex items-center justify-center gap-2 px-4 py-3 bg-white/5 border border-white/10 text-white text-sm rounded-lg hover:bg-white/10 transition-colors","data-testid":"button-download-report-dialog",children:[e.jsx(pb,{className:"w-4 h-4"}),"Download"]})]}),e.jsx("p",{className:"text-[11px] text-white/30 text-center",children:"We'll include actionable tips to improve your score"})]})]})}),e.jsx(yt,{open:n,onOpenChange:r,children:e.jsxs(xt,{className:"sm:max-w-lg bg-[#12121a] border-white/10 text-white",children:[e.jsxs(gt,{children:[e.jsxs(vt,{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(Kt,{className:"w-5 h-5 text-blue-400"}),"Start a Conversation"]}),e.jsx($i,{className:"text-white/50",children:"Have a question or want to discuss a project? Send us a message and we'll reply directly to your secure conversation."})]}),e.jsxs("div",{className:"space-y-4 mt-2",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70 mb-1.5 block",children:"Name"}),e.jsx(Oe,{placeholder:"Your name",value:o,onChange:M=>l(M.target.value),className:"bg-white/5 border-white/10 text-white placeholder:text-white/30","data-testid":"input-chat-name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70 mb-1.5 block",children:"Email"}),e.jsx(Oe,{placeholder:"you@example.com",value:d,onChange:M=>u(M.target.value),className:"bg-white/5 border-white/10 text-white placeholder:text-white/30","data-testid":"input-chat-email"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70 mb-1.5 block",children:"Subject"}),e.jsx(Oe,{placeholder:"What would you like to discuss?",value:h,onChange:M=>f(M.target.value),className:"bg-white/5 border-white/10 text-white placeholder:text-white/30","data-testid":"input-chat-subject"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-white/70 mb-1.5 block",children:"Message"}),e.jsx(fs,{placeholder:"Share any details, ideas, examples, or links you'd like us to see...",value:v,onChange:M=>x(M.target.value),className:"bg-white/5 border-white/10 text-white placeholder:text-white/30 min-h-[100px] resize-none","data-testid":"input-chat-message"})]}),e.jsx(L,{onClick:()=>U.mutate(),disabled:!o.trim()||!d.trim()||!h.trim()||!v.trim()||U.isPending,className:"w-full bg-gradient-to-r from-blue-500 to-violet-600 border-0 text-white font-medium","data-testid":"button-start-conversation",children:U.isPending?"Starting...":e.jsxs(e.Fragment,{children:[e.jsx(os,{className:"w-4 h-4 mr-2"}),"Start Conversation"]})}),e.jsx("p",{className:"text-xs text-white/30 text-center",children:"Your conversation is private and secure. You'll get a unique link to continue the discussion."})]})]})})]})}const lO={"under-1k":"Under $1,000","1k-5k":"$1,000 - $5,000","5k-10k":"$5,000 - $10,000","10k-25k":"$10,000 - $25,000","25k+":"$25,000+","not-sure":"Not Sure Yet"},cO={website:"Website",forum:"Forum / Community",blog:"Blog Platform",backend:"Backend / API","support-portal":"Support Portal",ecommerce:"E-Commerce",other:"Other"};function dO(){const{data:s,isLoading:t}=_e({queryKey:["/api/quote-requests"]});return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 flex-wrap mb-6",children:[e.jsx(yb,{className:"w-6 h-6 text-primary"}),e.jsx("h1",{className:"text-2xl font-bold tracking-tight","data-testid":"text-quotes-title",children:"Quote Requests"}),s&&e.jsx(Ce,{variant:"secondary","data-testid":"badge-quotes-count",children:s.length})]}),t?e.jsx("div",{className:"text-muted-foreground","data-testid":"text-quotes-loading",children:"Loading quote requests..."}):!s||s.length===0?e.jsx(ce,{children:e.jsxs(tn,{className:"py-12 text-center",children:[e.jsx(yb,{className:"w-10 h-10 text-muted-foreground mx-auto mb-3"}),e.jsx("p",{className:"text-muted-foreground","data-testid":"text-quotes-empty",children:"No quote requests yet. They'll appear here when visitors submit the form on your landing page."})]})}):e.jsx("div",{className:"grid gap-4",children:s.map(n=>e.jsxs(ce,{"data-testid":`card-quote-${n.id}`,children:[e.jsx(ed,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:[e.jsxs("div",{children:[e.jsx(td,{className:"text-lg",children:n.name}),e.jsxs("div",{className:"flex items-center gap-4 flex-wrap mt-1 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(hs,{className:"w-3.5 h-3.5"}),n.email]}),n.phone&&e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(ld,{className:"w-3.5 h-3.5"}),n.phone]}),n.company&&e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(Sl,{className:"w-3.5 h-3.5"}),n.company]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(Ce,{variant:"secondary",children:cO[n.projectType]||n.projectType}),n.budget&&e.jsxs(Ce,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(rr,{className:"w-3 h-3"}),lO[n.budget]||n.budget]}),e.jsx(Ce,{variant:n.status==="new"?"default":"secondary",children:n.status})]})]})}),e.jsxs(tn,{children:[e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:n.message}),n.createdAt&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-3 flex items-center gap-1.5",children:[e.jsx(Um,{className:"w-3 h-3"}),new Date(n.createdAt).toLocaleString()]})]})]},n.id))})]})}function Lk(s){switch(s){case"open":return e.jsx(Ii,{className:"w-4 h-4"});case"in_progress":return e.jsx(Wt,{className:"w-4 h-4"});case"resolved":return e.jsx(wn,{className:"w-4 h-4"});case"closed":return e.jsx(fo,{className:"w-4 h-4"});default:return e.jsx(Ii,{className:"w-4 h-4"})}}function kx(s){switch(s){case"open":return"bg-blue-500/10 text-blue-600 dark:text-blue-400 border-blue-500/20";case"in_progress":return"bg-amber-500/10 text-amber-600 dark:text-amber-400 border-amber-500/20";case"resolved":return"bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 border-emerald-500/20";case"closed":return"bg-muted text-muted-foreground border-muted";default:return"bg-muted text-muted-foreground border-muted"}}function Mk(s){switch(s){case"urgent":return"bg-red-500/10 text-red-600 dark:text-red-400 border-red-500/20";case"high":return"bg-orange-500/10 text-orange-600 dark:text-orange-400 border-orange-500/20";case"medium":return"bg-sky-500/10 text-sky-600 dark:text-sky-400 border-sky-500/20";case"low":return"bg-muted text-muted-foreground border-muted";default:return"bg-muted text-muted-foreground border-muted"}}function Em(s){switch(s){case"urgent":return e.jsx(Fn,{className:"w-3 h-3"});case"high":return e.jsx(ug,{className:"w-3 h-3"});default:return null}}function Cx(s){if(!s)return"";const t=new Date,n=new Date(s),r=t.getTime()-n.getTime(),o=Math.floor(r/6e4);if(o<1)return"just now";if(o<60)return`${o}m ago`;const l=Math.floor(o/60);if(l<24)return`${l}h ago`;const d=Math.floor(l/24);return d<7?`${d}d ago`:qs(s)}function uO(){return e.jsxs("div",{className:"space-y-5",children:[e.jsx("div",{className:"flex items-center justify-between gap-3",children:e.jsxs("div",{children:[e.jsx(ye,{className:"h-7 w-44 mb-1.5"}),e.jsx(ye,{className:"h-4 w-56"})]})}),e.jsx("div",{className:"flex gap-2",children:Array.from({length:4}).map((s,t)=>e.jsx(ye,{className:"h-9 w-24 rounded-md"},t))}),e.jsx(ce,{className:"overflow-hidden",children:Array.from({length:6}).map((s,t)=>e.jsxs("div",{className:"flex items-center gap-4 p-4 border-b last:border-b-0",children:[e.jsx(ye,{className:"h-9 w-9 rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-1.5",children:[e.jsx(ye,{className:"h-4 w-48"}),e.jsx(ye,{className:"h-3 w-32"})]}),e.jsx(ye,{className:"h-5 w-20 rounded-full"})]},t))})]})}function mO({tickets:s,active:t,onChange:n}){const r={all:s.length,open:s.filter(l=>l.status==="open").length,in_progress:s.filter(l=>l.status==="in_progress").length,resolved:s.filter(l=>l.status==="resolved").length,closed:s.filter(l=>l.status==="closed").length},o=[{key:"all",label:"All",icon:oT},{key:"open",label:"Open",icon:Ii},{key:"in_progress",label:"In Progress",icon:Wt},{key:"resolved",label:"Resolved",icon:wn},{key:"closed",label:"Closed",icon:fo}];return e.jsx("div",{className:"flex items-center gap-1.5 overflow-x-auto pb-1",children:o.map(l=>{const d=r[l.key],u=t===l.key;return e.jsxs(L,{variant:u?"default":"ghost",size:"sm",onClick:()=>n(l.key),className:"shrink-0","data-testid":`button-filter-${l.key}`,children:[e.jsx(l.icon,{className:"w-3.5 h-3.5 mr-1.5"}),l.label,d>0&&e.jsx("span",{className:`ml-1.5 text-xs tabular-nums ${u?"opacity-80":"text-muted-foreground"}`,children:d})]},l.key)})})}function hO({onSelect:s}){const[t,n]=p.useState(""),[r,o]=p.useState("all"),[l,d]=p.useState("all"),{data:u,isLoading:h}=_e({queryKey:["/api/support/tickets"]});if(h)return e.jsx(uO,{});const f=u||[],v=f.filter(N=>{const b=!t||N.subject.toLowerCase().includes(t.toLowerCase())||N.ticketNumber.toLowerCase().includes(t.toLowerCase())||N.customerName.toLowerCase().includes(t.toLowerCase()),k=r==="all"||N.status===r,E=l==="all"||N.priority===l;return b&&k&&E}),x=f.filter(N=>N.status==="open").length,g=f.filter(N=>N.status==="in_progress").length,j=f.filter(N=>N.priority==="urgent"&&N.status!=="closed"&&N.status!=="resolved").length;return e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight","data-testid":"text-support-title",children:"Support Center"}),e.jsxs("div",{className:"flex items-center gap-3 mt-1.5 flex-wrap",children:[j>0&&e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs font-medium text-red-600 dark:text-red-400 bg-red-500/10 px-2 py-0.5 rounded-full",children:[e.jsx(Fn,{className:"w-3 h-3"}),j," urgent"]}),x>0&&e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs font-medium text-blue-600 dark:text-blue-400 bg-blue-500/10 px-2 py-0.5 rounded-full",children:[e.jsx(Ii,{className:"w-3 h-3"}),x," open"]}),g>0&&e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs font-medium text-amber-600 dark:text-amber-400 bg-amber-500/10 px-2 py-0.5 rounded-full",children:[e.jsx(Wt,{className:"w-3 h-3"}),g," in progress"]}),x===0&&g===0&&j===0&&e.jsx("span",{className:"text-sm text-muted-foreground",children:"All caught up"})]})]}),e.jsx(mO,{tickets:f,active:r,onChange:o}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("div",{className:"relative flex-1 min-w-[220px]",children:[e.jsx(sn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(Oe,{placeholder:"Search by subject, ticket number, or customer...",className:"pl-9",value:t,onChange:N=>n(N.target.value),"data-testid":"input-search-tickets"})]}),e.jsxs(Dt,{value:l,onValueChange:d,children:[e.jsxs(It,{className:"w-[140px]","data-testid":"select-priority-filter",children:[e.jsx(sT,{className:"w-3.5 h-3.5 mr-1.5"}),e.jsx($t,{placeholder:"Priority"})]}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"all",children:"All Priority"}),e.jsx(Ie,{value:"urgent",children:"Urgent"}),e.jsx(Ie,{value:"high",children:"High"}),e.jsx(Ie,{value:"medium",children:"Medium"}),e.jsx(Ie,{value:"low",children:"Low"})]})]})]}),e.jsx(ce,{className:"overflow-hidden",children:v.length>0?e.jsx("div",{className:"divide-y",children:v.map(N=>e.jsxs("button",{className:"w-full p-4 text-left flex items-start gap-3.5 hover-elevate transition-colors",onClick:()=>s(N.id),"data-testid":`button-ticket-${N.id}`,children:[e.jsx("div",{className:`flex items-center justify-center w-9 h-9 rounded-full shrink-0 border ${kx(N.status)}`,children:Lk(N.status)}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[e.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:e.jsx("span",{className:"text-sm font-semibold truncate",children:N.subject})}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground flex-wrap",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Mw,{className:"w-3 h-3"}),N.ticketNumber]}),e.jsx("span",{className:"opacity-30",children:"|"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Gm,{className:"w-3 h-3"}),N.customerName]}),e.jsx("span",{className:"opacity-30",children:"|"}),e.jsx("span",{children:Cx(N.updatedAt)})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[e.jsxs(Ce,{variant:"secondary",className:`text-xs border ${Mk(N.priority)}`,children:[Em(N.priority),e.jsx("span",{className:Em(N.priority)?"ml-1":"",children:N.priority})]}),e.jsx(Ce,{variant:"secondary",className:`text-xs border ${kx(N.status)}`,children:N.status.replace("_"," ")})]})]},N.id))}):e.jsxs("div",{className:"p-16 text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-full bg-muted mb-4",children:e.jsx(ho,{className:"w-7 h-7 text-muted-foreground"})}),e.jsx("p",{className:"text-sm font-medium mb-1",children:t||r!=="all"||l!=="all"?"No tickets match your filters":"No support tickets yet"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t||r!=="all"||l!=="all"?"Try adjusting your search or filters":"Tickets will appear here when customers reach out"})]})})]})}function fO({ticketId:s,onBack:t}){const{toast:n}=mt(),[r,o]=p.useState(""),{data:l,isLoading:d}=_e({queryKey:["/api/support/tickets",s]}),u=we({mutationFn:async v=>(await je("POST",`/api/support/tickets/${s}/messages`,{message:v})).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/support/tickets",s]}),xe.invalidateQueries({queryKey:["/api/support/tickets"]}),n({title:"Reply sent",description:"Your reply has been sent and the customer has been notified."}),o("")},onError:v=>{n({title:"Failed to send reply",description:v.message,variant:"destructive"})}}),h=we({mutationFn:async v=>(await je("PATCH",`/api/support/tickets/${s}`,v)).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/support/tickets",s]}),xe.invalidateQueries({queryKey:["/api/support/tickets"]}),n({title:"Ticket updated"})}}),f=we({mutationFn:async()=>{await je("DELETE",`/api/support/tickets/${s}`)},onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/support/tickets"]}),n({title:"Ticket deleted",description:"The support ticket has been permanently removed."}),t()},onError:v=>{n({title:"Failed to delete ticket",description:v.message,variant:"destructive"})}});return d?e.jsxs("div",{className:"space-y-5",children:[e.jsx(ye,{className:"h-8 w-32"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr_280px] gap-5",children:[e.jsxs(ce,{className:"p-6",children:[e.jsx(ye,{className:"h-6 w-64 mb-4"}),e.jsx(ye,{className:"h-40 w-full"})]}),e.jsxs(ce,{className:"p-5",children:[e.jsx(ye,{className:"h-5 w-32 mb-4"}),e.jsx(ye,{className:"h-4 w-full mb-2"}),e.jsx(ye,{className:"h-4 w-3/4"})]})]})]}):l?e.jsxs("div",{className:"space-y-5",children:[e.jsxs(L,{variant:"ghost",size:"sm",onClick:t,"data-testid":"button-back-to-list",children:[e.jsx(va,{className:"w-4 h-4 mr-2"}),"Back to tickets"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr_280px] gap-5",children:[e.jsxs("div",{className:"space-y-4 min-w-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold leading-tight mb-1","data-testid":"text-ticket-subject",children:l.subject}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs(Ce,{variant:"secondary",className:`text-xs border ${kx(l.status)}`,children:[Lk(l.status),e.jsx("span",{className:"ml-1",children:l.status.replace("_"," ")})]}),e.jsxs(Ce,{variant:"secondary",className:`text-xs border ${Mk(l.priority)}`,children:[Em(l.priority),e.jsx("span",{className:Em(l.priority)?"ml-1":"",children:l.priority})]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:l.ticketNumber})]})]}),e.jsx(ce,{className:"overflow-hidden",children:e.jsx("div",{className:"divide-y",children:l.messages.map((v,x)=>{const g=v.senderType==="admin";return e.jsx("div",{className:`p-5 ${g?"bg-primary/[0.03] dark:bg-primary/[0.06]":""}`,"data-testid":`message-${v.id}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-semibold shrink-0 ${g?"bg-primary text-primary-foreground":"bg-gradient-to-br from-blue-500 to-violet-500 text-white"}`,children:v.senderName.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1.5 flex-wrap",children:[e.jsx("span",{className:"text-sm font-semibold",children:v.senderName}),e.jsx(Ce,{variant:"secondary",className:`text-[10px] px-1.5 py-0 ${g?"bg-primary/10 text-primary border-primary/20":"bg-muted"}`,children:g?"Staff":"Customer"}),e.jsx("span",{className:"text-xs text-muted-foreground ml-auto shrink-0",children:Cx(v.createdAt)})]}),e.jsx("p",{className:"text-sm whitespace-pre-wrap leading-relaxed text-foreground/90","data-testid":`text-message-body-${v.id}`,children:v.message})]})]})},v.id)})})}),l.status!=="closed"&&e.jsxs(ce,{className:"overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b bg-muted/30",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Kt,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Reply"})]})}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsx(fs,{placeholder:"Type your reply to the customer...",value:r,onChange:v=>o(v.target.value),className:"resize-none min-h-[120px] text-sm","data-testid":"textarea-reply"}),e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1.5",children:[e.jsx(hs,{className:"w-3 h-3"}),"The customer will be notified by email"]}),e.jsxs(L,{onClick:()=>u.mutate(r),disabled:!r.trim()||u.isPending,"data-testid":"button-send-reply",children:[u.isPending?e.jsx(We,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(os,{className:"w-4 h-4 mr-2"}),"Send Reply"]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(ce,{className:"p-4",children:[e.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-3",children:"Ticket Details"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs text-muted-foreground",children:"Status"}),e.jsxs(Dt,{value:l.status,onValueChange:v=>h.mutate({status:v}),children:[e.jsx(It,{"data-testid":"select-ticket-status",children:e.jsx($t,{})}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"open",children:"Open"}),e.jsx(Ie,{value:"in_progress",children:"In Progress"}),e.jsx(Ie,{value:"resolved",children:"Resolved"}),e.jsx(Ie,{value:"closed",children:"Closed"})]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs text-muted-foreground",children:"Priority"}),e.jsxs(Dt,{value:l.priority,onValueChange:v=>h.mutate({priority:v}),children:[e.jsx(It,{"data-testid":"select-ticket-priority",children:e.jsx($t,{})}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"low",children:"Low"}),e.jsx(Ie,{value:"medium",children:"Medium"}),e.jsx(Ie,{value:"high",children:"High"}),e.jsx(Ie,{value:"urgent",children:"Urgent"})]})]})]})]})]}),e.jsxs(ce,{className:"p-4",children:[e.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-3",children:"Customer"}),e.jsxs("div",{className:"space-y-2.5",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-violet-500 flex items-center justify-center text-white text-xs font-semibold shrink-0",children:l.customerName.charAt(0).toUpperCase()}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:l.customerName}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:l.customerEmail})]})]}),l.projectName&&e.jsxs("div",{className:"flex items-start gap-2 text-xs text-muted-foreground pt-1 border-t",children:[e.jsx($l,{className:"w-3 h-3 mt-0.5 shrink-0"}),e.jsxs("span",{children:["Project: ",l.projectName]})]})]})]}),e.jsxs(ce,{className:"p-4",children:[e.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-3",children:"Info"}),e.jsxs("div",{className:"space-y-2 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Mw,{className:"w-3 h-3 shrink-0"}),e.jsx("span",{children:l.ticketNumber})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($l,{className:"w-3 h-3 shrink-0"}),e.jsx("span",{className:"capitalize",children:l.category})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Um,{className:"w-3 h-3 shrink-0"}),e.jsxs("span",{children:["Opened ",qs(l.createdAt)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Wt,{className:"w-3 h-3 shrink-0"}),e.jsxs("span",{children:["Updated ",Cx(l.updatedAt)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Kt,{className:"w-3 h-3 shrink-0"}),e.jsxs("span",{children:[l.messages.length," message",l.messages.length!==1?"s":""]})]})]})]}),e.jsxs(ce,{className:"p-4",children:[e.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-3",children:"Actions"}),e.jsxs(L,{variant:"outline",size:"sm",className:"w-full text-destructive",onClick:()=>{confirm("Are you sure you want to permanently delete this ticket and all its messages? This cannot be undone.")&&f.mutate()},disabled:f.isPending,"data-testid":"button-delete-ticket",children:[f.isPending?e.jsx(We,{className:"w-4 h-4 mr-1.5 animate-spin"}):e.jsx(ls,{className:"w-4 h-4 mr-1.5"}),"Delete Ticket"]})]})]})]})]}):e.jsxs("div",{className:"space-y-5",children:[e.jsxs(L,{variant:"ghost",size:"sm",onClick:t,"data-testid":"button-back-to-list",children:[e.jsx(va,{className:"w-4 h-4 mr-2"}),"Back to tickets"]}),e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-muted mb-3",children:e.jsx(ho,{className:"w-6 h-6 text-muted-foreground"})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ticket not found"})]})]})}function pO(){Un("Support Center");const[s,t]=p.useState(null);return s?e.jsx(fO,{ticketId:s,onBack:()=>t(null)}):e.jsx(hO,{onSelect:t})}var Dk=typeof global=="object"&&global&&global.Object===Object&&global,xO=typeof self=="object"&&self&&self.Object===Object&&self,ka=Dk||xO||Function("return this")(),qi=ka.Symbol,$k=Object.prototype,gO=$k.hasOwnProperty,vO=$k.toString,$c=qi?qi.toStringTag:void 0;function yO(s){var t=gO.call(s,$c),n=s[$c];try{s[$c]=void 0;var r=!0}catch{}var o=vO.call(s);return r&&(t?s[$c]=n:delete s[$c]),o}var bO=Object.prototype,jO=bO.toString;function wO(s){return jO.call(s)}var NO="[object Null]",kO="[object Undefined]",h1=qi?qi.toStringTag:void 0;function ec(s){return s==null?s===void 0?kO:NO:h1&&h1 in Object(s)?yO(s):wO(s)}function Qa(s){return s!=null&&typeof s=="object"}var So=Array.isArray;function Bi(s){var t=typeof s;return s!=null&&(t=="object"||t=="function")}function qk(s){return s}var CO="[object AsyncFunction]",SO="[object Function]",EO="[object GeneratorFunction]",TO="[object Proxy]";function Gg(s){if(!Bi(s))return!1;var t=ec(s);return t==SO||t==EO||t==CO||t==TO}var Sp=ka["__core-js_shared__"],f1=(function(){var s=/[^.]+$/.exec(Sp&&Sp.keys&&Sp.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""})();function AO(s){return!!f1&&f1 in s}var PO=Function.prototype,RO=PO.toString;function Lo(s){if(s!=null){try{return RO.call(s)}catch{}try{return s+""}catch{}}return""}var _O=/[\\^$.*+?()[\]{}|]/g,IO=/^\[object .+?Constructor\]$/,OO=Function.prototype,LO=Object.prototype,MO=OO.toString,DO=LO.hasOwnProperty,$O=RegExp("^"+MO.call(DO).replace(_O,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function qO(s){if(!Bi(s)||AO(s))return!1;var t=Gg(s)?$O:IO;return t.test(Lo(s))}function FO(s,t){return s?.[t]}function Mo(s,t){var n=FO(s,t);return qO(n)?n:void 0}var Sx=Mo(ka,"WeakMap"),p1=Object.create,zO=(function(){function s(){}return function(t){if(!Bi(t))return{};if(p1)return p1(t);s.prototype=t;var n=new s;return s.prototype=void 0,n}})();function UO(s,t,n){switch(n.length){case 0:return s.call(t);case 1:return s.call(t,n[0]);case 2:return s.call(t,n[0],n[1]);case 3:return s.call(t,n[0],n[1],n[2])}return s.apply(t,n)}function BO(s,t){var n=-1,r=s.length;for(t||(t=Array(r));++n<r;)t[n]=s[n];return t}var HO=800,KO=16,WO=Date.now;function VO(s){var t=0,n=0;return function(){var r=WO(),o=KO-(r-n);if(n=r,o>0){if(++t>=HO)return arguments[0]}else t=0;return s.apply(void 0,arguments)}}function GO(s){return function(){return s}}var Tm=(function(){try{var s=Mo(Object,"defineProperty");return s({},"",{}),s}catch{}})(),QO=Tm?function(s,t){return Tm(s,"toString",{configurable:!0,enumerable:!1,value:GO(t),writable:!0})}:qk,YO=VO(QO);function XO(s,t){for(var n=-1,r=s==null?0:s.length;++n<r&&t(s[n],n,s)!==!1;);return s}var ZO=9007199254740991,JO=/^(?:0|[1-9]\d*)$/;function Fk(s,t){var n=typeof s;return t=t??ZO,!!t&&(n=="number"||n!="symbol"&&JO.test(s))&&s>-1&&s%1==0&&s<t}function Qg(s,t,n){t=="__proto__"&&Tm?Tm(s,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):s[t]=n}function Sd(s,t){return s===t||s!==s&&t!==t}var eL=Object.prototype,tL=eL.hasOwnProperty;function zk(s,t,n){var r=s[t];(!(tL.call(s,t)&&Sd(r,n))||n===void 0&&!(t in s))&&Qg(s,t,n)}function sL(s,t,n,r){var o=!n;n||(n={});for(var l=-1,d=t.length;++l<d;){var u=t[l],h=void 0;h===void 0&&(h=s[u]),o?Qg(n,u,h):zk(n,u,h)}return n}var x1=Math.max;function nL(s,t,n){return t=x1(t===void 0?s.length-1:t,0),function(){for(var r=arguments,o=-1,l=x1(r.length-t,0),d=Array(l);++o<l;)d[o]=r[t+o];o=-1;for(var u=Array(t+1);++o<t;)u[o]=r[o];return u[t]=n(d),UO(s,this,u)}}function rL(s,t){return YO(nL(s,t,qk),s+"")}var aL=9007199254740991;function Uk(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=aL}function fh(s){return s!=null&&Uk(s.length)&&!Gg(s)}function iL(s,t,n){if(!Bi(n))return!1;var r=typeof t;return(r=="number"?fh(n)&&Fk(t,n.length):r=="string"&&t in n)?Sd(n[t],s):!1}function oL(s){return rL(function(t,n){var r=-1,o=n.length,l=o>1?n[o-1]:void 0,d=o>2?n[2]:void 0;for(l=s.length>3&&typeof l=="function"?(o--,l):void 0,d&&iL(n[0],n[1],d)&&(l=o<3?void 0:l,o=1),t=Object(t);++r<o;){var u=n[r];u&&s(t,u,r,l)}return t})}var lL=Object.prototype;function Yg(s){var t=s&&s.constructor,n=typeof t=="function"&&t.prototype||lL;return s===n}function cL(s,t){for(var n=-1,r=Array(s);++n<s;)r[n]=t(n);return r}var dL="[object Arguments]";function g1(s){return Qa(s)&&ec(s)==dL}var Bk=Object.prototype,uL=Bk.hasOwnProperty,mL=Bk.propertyIsEnumerable,Ex=g1((function(){return arguments})())?g1:function(s){return Qa(s)&&uL.call(s,"callee")&&!mL.call(s,"callee")};function hL(){return!1}var Hk=typeof tr=="object"&&tr&&!tr.nodeType&&tr,v1=Hk&&typeof sr=="object"&&sr&&!sr.nodeType&&sr,fL=v1&&v1.exports===Hk,y1=fL?ka.Buffer:void 0,pL=y1?y1.isBuffer:void 0,ud=pL||hL,xL="[object Arguments]",gL="[object Array]",vL="[object Boolean]",yL="[object Date]",bL="[object Error]",jL="[object Function]",wL="[object Map]",NL="[object Number]",kL="[object Object]",CL="[object RegExp]",SL="[object Set]",EL="[object String]",TL="[object WeakMap]",AL="[object ArrayBuffer]",PL="[object DataView]",RL="[object Float32Array]",_L="[object Float64Array]",IL="[object Int8Array]",OL="[object Int16Array]",LL="[object Int32Array]",ML="[object Uint8Array]",DL="[object Uint8ClampedArray]",$L="[object Uint16Array]",qL="[object Uint32Array]",as={};as[RL]=as[_L]=as[IL]=as[OL]=as[LL]=as[ML]=as[DL]=as[$L]=as[qL]=!0;as[xL]=as[gL]=as[AL]=as[vL]=as[PL]=as[yL]=as[bL]=as[jL]=as[wL]=as[NL]=as[kL]=as[CL]=as[SL]=as[EL]=as[TL]=!1;function FL(s){return Qa(s)&&Uk(s.length)&&!!as[ec(s)]}function Xg(s){return function(t){return s(t)}}var Kk=typeof tr=="object"&&tr&&!tr.nodeType&&tr,nd=Kk&&typeof sr=="object"&&sr&&!sr.nodeType&&sr,zL=nd&&nd.exports===Kk,Ep=zL&&Dk.process,Ul=(function(){try{var s=nd&&nd.require&&nd.require("util").types;return s||Ep&&Ep.binding&&Ep.binding("util")}catch{}})(),b1=Ul&&Ul.isTypedArray,Zg=b1?Xg(b1):FL,UL=Object.prototype,BL=UL.hasOwnProperty;function Wk(s,t){var n=So(s),r=!n&&Ex(s),o=!n&&!r&&ud(s),l=!n&&!r&&!o&&Zg(s),d=n||r||o||l,u=d?cL(s.length,String):[],h=u.length;for(var f in s)(t||BL.call(s,f))&&!(d&&(f=="length"||o&&(f=="offset"||f=="parent")||l&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||Fk(f,h)))&&u.push(f);return u}function Vk(s,t){return function(n){return s(t(n))}}var HL=Vk(Object.keys,Object),KL=Object.prototype,WL=KL.hasOwnProperty;function VL(s){if(!Yg(s))return HL(s);var t=[];for(var n in Object(s))WL.call(s,n)&&n!="constructor"&&t.push(n);return t}function GL(s){return fh(s)?Wk(s):VL(s)}function QL(s){var t=[];if(s!=null)for(var n in Object(s))t.push(n);return t}var YL=Object.prototype,XL=YL.hasOwnProperty;function ZL(s){if(!Bi(s))return QL(s);var t=Yg(s),n=[];for(var r in s)r=="constructor"&&(t||!XL.call(s,r))||n.push(r);return n}function Gk(s){return fh(s)?Wk(s,!0):ZL(s)}var md=Mo(Object,"create");function JL(){this.__data__=md?md(null):{},this.size=0}function eM(s){var t=this.has(s)&&delete this.__data__[s];return this.size-=t?1:0,t}var tM="__lodash_hash_undefined__",sM=Object.prototype,nM=sM.hasOwnProperty;function rM(s){var t=this.__data__;if(md){var n=t[s];return n===tM?void 0:n}return nM.call(t,s)?t[s]:void 0}var aM=Object.prototype,iM=aM.hasOwnProperty;function oM(s){var t=this.__data__;return md?t[s]!==void 0:iM.call(t,s)}var lM="__lodash_hash_undefined__";function cM(s,t){var n=this.__data__;return this.size+=this.has(s)?0:1,n[s]=md&&t===void 0?lM:t,this}function Eo(s){var t=-1,n=s==null?0:s.length;for(this.clear();++t<n;){var r=s[t];this.set(r[0],r[1])}}Eo.prototype.clear=JL;Eo.prototype.delete=eM;Eo.prototype.get=rM;Eo.prototype.has=oM;Eo.prototype.set=cM;function dM(){this.__data__=[],this.size=0}function ph(s,t){for(var n=s.length;n--;)if(Sd(s[n][0],t))return n;return-1}var uM=Array.prototype,mM=uM.splice;function hM(s){var t=this.__data__,n=ph(t,s);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():mM.call(t,n,1),--this.size,!0}function fM(s){var t=this.__data__,n=ph(t,s);return n<0?void 0:t[n][1]}function pM(s){return ph(this.__data__,s)>-1}function xM(s,t){var n=this.__data__,r=ph(n,s);return r<0?(++this.size,n.push([s,t])):n[r][1]=t,this}function Xa(s){var t=-1,n=s==null?0:s.length;for(this.clear();++t<n;){var r=s[t];this.set(r[0],r[1])}}Xa.prototype.clear=dM;Xa.prototype.delete=hM;Xa.prototype.get=fM;Xa.prototype.has=pM;Xa.prototype.set=xM;var hd=Mo(ka,"Map");function gM(){this.size=0,this.__data__={hash:new Eo,map:new(hd||Xa),string:new Eo}}function vM(s){var t=typeof s;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?s!=="__proto__":s===null}function xh(s,t){var n=s.__data__;return vM(t)?n[typeof t=="string"?"string":"hash"]:n.map}function yM(s){var t=xh(this,s).delete(s);return this.size-=t?1:0,t}function bM(s){return xh(this,s).get(s)}function jM(s){return xh(this,s).has(s)}function wM(s,t){var n=xh(this,s),r=n.size;return n.set(s,t),this.size+=n.size==r?0:1,this}function Do(s){var t=-1,n=s==null?0:s.length;for(this.clear();++t<n;){var r=s[t];this.set(r[0],r[1])}}Do.prototype.clear=gM;Do.prototype.delete=yM;Do.prototype.get=bM;Do.prototype.has=jM;Do.prototype.set=wM;function NM(s,t){for(var n=-1,r=t.length,o=s.length;++n<r;)s[o+n]=t[n];return s}var Qk=Vk(Object.getPrototypeOf,Object),kM="[object Object]",CM=Function.prototype,SM=Object.prototype,Yk=CM.toString,EM=SM.hasOwnProperty,TM=Yk.call(Object);function AM(s){if(!Qa(s)||ec(s)!=kM)return!1;var t=Qk(s);if(t===null)return!0;var n=EM.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Yk.call(n)==TM}function PM(){this.__data__=new Xa,this.size=0}function RM(s){var t=this.__data__,n=t.delete(s);return this.size=t.size,n}function _M(s){return this.__data__.get(s)}function IM(s){return this.__data__.has(s)}var OM=200;function LM(s,t){var n=this.__data__;if(n instanceof Xa){var r=n.__data__;if(!hd||r.length<OM-1)return r.push([s,t]),this.size=++n.size,this;n=this.__data__=new Do(r)}return n.set(s,t),this.size=n.size,this}function ga(s){var t=this.__data__=new Xa(s);this.size=t.size}ga.prototype.clear=PM;ga.prototype.delete=RM;ga.prototype.get=_M;ga.prototype.has=IM;ga.prototype.set=LM;var Xk=typeof tr=="object"&&tr&&!tr.nodeType&&tr,j1=Xk&&typeof sr=="object"&&sr&&!sr.nodeType&&sr,MM=j1&&j1.exports===Xk,w1=MM?ka.Buffer:void 0,N1=w1?w1.allocUnsafe:void 0;function Zk(s,t){if(t)return s.slice();var n=s.length,r=N1?N1(n):new s.constructor(n);return s.copy(r),r}function DM(s,t){for(var n=-1,r=s==null?0:s.length,o=0,l=[];++n<r;){var d=s[n];t(d,n,s)&&(l[o++]=d)}return l}function $M(){return[]}var qM=Object.prototype,FM=qM.propertyIsEnumerable,k1=Object.getOwnPropertySymbols,zM=k1?function(s){return s==null?[]:(s=Object(s),DM(k1(s),function(t){return FM.call(s,t)}))}:$M;function UM(s,t,n){var r=t(s);return So(s)?r:NM(r,n(s))}function Tx(s){return UM(s,GL,zM)}var Ax=Mo(ka,"DataView"),Px=Mo(ka,"Promise"),Rx=Mo(ka,"Set"),C1="[object Map]",BM="[object Object]",S1="[object Promise]",E1="[object Set]",T1="[object WeakMap]",A1="[object DataView]",HM=Lo(Ax),KM=Lo(hd),WM=Lo(Px),VM=Lo(Rx),GM=Lo(Sx),zr=ec;(Ax&&zr(new Ax(new ArrayBuffer(1)))!=A1||hd&&zr(new hd)!=C1||Px&&zr(Px.resolve())!=S1||Rx&&zr(new Rx)!=E1||Sx&&zr(new Sx)!=T1)&&(zr=function(s){var t=ec(s),n=t==BM?s.constructor:void 0,r=n?Lo(n):"";if(r)switch(r){case HM:return A1;case KM:return C1;case WM:return S1;case VM:return E1;case GM:return T1}return t});var QM=Object.prototype,YM=QM.hasOwnProperty;function XM(s){var t=s.length,n=new s.constructor(t);return t&&typeof s[0]=="string"&&YM.call(s,"index")&&(n.index=s.index,n.input=s.input),n}var Am=ka.Uint8Array;function Jg(s){var t=new s.constructor(s.byteLength);return new Am(t).set(new Am(s)),t}function ZM(s,t){var n=Jg(s.buffer);return new s.constructor(n,s.byteOffset,s.byteLength)}var JM=/\w*$/;function e8(s){var t=new s.constructor(s.source,JM.exec(s));return t.lastIndex=s.lastIndex,t}var P1=qi?qi.prototype:void 0,R1=P1?P1.valueOf:void 0;function t8(s){return R1?Object(R1.call(s)):{}}function Jk(s,t){var n=t?Jg(s.buffer):s.buffer;return new s.constructor(n,s.byteOffset,s.length)}var s8="[object Boolean]",n8="[object Date]",r8="[object Map]",a8="[object Number]",i8="[object RegExp]",o8="[object Set]",l8="[object String]",c8="[object Symbol]",d8="[object ArrayBuffer]",u8="[object DataView]",m8="[object Float32Array]",h8="[object Float64Array]",f8="[object Int8Array]",p8="[object Int16Array]",x8="[object Int32Array]",g8="[object Uint8Array]",v8="[object Uint8ClampedArray]",y8="[object Uint16Array]",b8="[object Uint32Array]";function j8(s,t,n){var r=s.constructor;switch(t){case d8:return Jg(s);case s8:case n8:return new r(+s);case u8:return ZM(s);case m8:case h8:case f8:case p8:case x8:case g8:case v8:case y8:case b8:return Jk(s,n);case r8:return new r;case a8:case l8:return new r(s);case i8:return e8(s);case o8:return new r;case c8:return t8(s)}}function e5(s){return typeof s.constructor=="function"&&!Yg(s)?zO(Qk(s)):{}}var w8="[object Map]";function N8(s){return Qa(s)&&zr(s)==w8}var _1=Ul&&Ul.isMap,k8=_1?Xg(_1):N8,C8="[object Set]";function S8(s){return Qa(s)&&zr(s)==C8}var I1=Ul&&Ul.isSet,E8=I1?Xg(I1):S8,T8=1,t5="[object Arguments]",A8="[object Array]",P8="[object Boolean]",R8="[object Date]",_8="[object Error]",s5="[object Function]",I8="[object GeneratorFunction]",O8="[object Map]",L8="[object Number]",n5="[object Object]",M8="[object RegExp]",D8="[object Set]",$8="[object String]",q8="[object Symbol]",F8="[object WeakMap]",z8="[object ArrayBuffer]",U8="[object DataView]",B8="[object Float32Array]",H8="[object Float64Array]",K8="[object Int8Array]",W8="[object Int16Array]",V8="[object Int32Array]",G8="[object Uint8Array]",Q8="[object Uint8ClampedArray]",Y8="[object Uint16Array]",X8="[object Uint32Array]",es={};es[t5]=es[A8]=es[z8]=es[U8]=es[P8]=es[R8]=es[B8]=es[H8]=es[K8]=es[W8]=es[V8]=es[O8]=es[L8]=es[n5]=es[M8]=es[D8]=es[$8]=es[q8]=es[G8]=es[Q8]=es[Y8]=es[X8]=!0;es[_8]=es[s5]=es[F8]=!1;function om(s,t,n,r,o,l){var d,u=t&T8;if(d!==void 0)return d;if(!Bi(s))return s;var h=So(s);if(h)d=XM(s);else{var f=zr(s),v=f==s5||f==I8;if(ud(s))return Zk(s,u);if(f==n5||f==t5||v&&!o)d=v?{}:e5(s);else{if(!es[f])return o?s:{};d=j8(s,f,u)}}l||(l=new ga);var x=l.get(s);if(x)return x;l.set(s,d),E8(s)?s.forEach(function(N){d.add(om(N,t,n,N,s,l))}):k8(s)&&s.forEach(function(N,b){d.set(b,om(N,t,n,b,s,l))});var g=Tx,j=h?void 0:g(s);return XO(j||s,function(N,b){j&&(b=N,N=s[b]),zk(d,b,om(N,t,n,b,s,l))}),d}var Z8=1,J8=4;function Rl(s){return om(s,Z8|J8)}var eD="__lodash_hash_undefined__";function tD(s){return this.__data__.set(s,eD),this}function sD(s){return this.__data__.has(s)}function Pm(s){var t=-1,n=s==null?0:s.length;for(this.__data__=new Do;++t<n;)this.add(s[t])}Pm.prototype.add=Pm.prototype.push=tD;Pm.prototype.has=sD;function nD(s,t){for(var n=-1,r=s==null?0:s.length;++n<r;)if(t(s[n],n,s))return!0;return!1}function rD(s,t){return s.has(t)}var aD=1,iD=2;function r5(s,t,n,r,o,l){var d=n&aD,u=s.length,h=t.length;if(u!=h&&!(d&&h>u))return!1;var f=l.get(s),v=l.get(t);if(f&&v)return f==t&&v==s;var x=-1,g=!0,j=n&iD?new Pm:void 0;for(l.set(s,t),l.set(t,s);++x<u;){var N=s[x],b=t[x];if(r)var k=d?r(b,N,x,t,s,l):r(N,b,x,s,t,l);if(k!==void 0){if(k)continue;g=!1;break}if(j){if(!nD(t,function(E,S){if(!rD(j,S)&&(N===E||o(N,E,n,r,l)))return j.push(S)})){g=!1;break}}else if(!(N===b||o(N,b,n,r,l))){g=!1;break}}return l.delete(s),l.delete(t),g}function oD(s){var t=-1,n=Array(s.size);return s.forEach(function(r,o){n[++t]=[o,r]}),n}function lD(s){var t=-1,n=Array(s.size);return s.forEach(function(r){n[++t]=r}),n}var cD=1,dD=2,uD="[object Boolean]",mD="[object Date]",hD="[object Error]",fD="[object Map]",pD="[object Number]",xD="[object RegExp]",gD="[object Set]",vD="[object String]",yD="[object Symbol]",bD="[object ArrayBuffer]",jD="[object DataView]",O1=qi?qi.prototype:void 0,Tp=O1?O1.valueOf:void 0;function wD(s,t,n,r,o,l,d){switch(n){case jD:if(s.byteLength!=t.byteLength||s.byteOffset!=t.byteOffset)return!1;s=s.buffer,t=t.buffer;case bD:return!(s.byteLength!=t.byteLength||!l(new Am(s),new Am(t)));case uD:case mD:case pD:return Sd(+s,+t);case hD:return s.name==t.name&&s.message==t.message;case xD:case vD:return s==t+"";case fD:var u=oD;case gD:var h=r&cD;if(u||(u=lD),s.size!=t.size&&!h)return!1;var f=d.get(s);if(f)return f==t;r|=dD,d.set(s,t);var v=r5(u(s),u(t),r,o,l,d);return d.delete(s),v;case yD:if(Tp)return Tp.call(s)==Tp.call(t)}return!1}var ND=1,kD=Object.prototype,CD=kD.hasOwnProperty;function SD(s,t,n,r,o,l){var d=n&ND,u=Tx(s),h=u.length,f=Tx(t),v=f.length;if(h!=v&&!d)return!1;for(var x=h;x--;){var g=u[x];if(!(d?g in t:CD.call(t,g)))return!1}var j=l.get(s),N=l.get(t);if(j&&N)return j==t&&N==s;var b=!0;l.set(s,t),l.set(t,s);for(var k=d;++x<h;){g=u[x];var E=s[g],S=t[g];if(r)var T=d?r(S,E,g,t,s,l):r(E,S,g,s,t,l);if(!(T===void 0?E===S||o(E,S,n,r,l):T)){b=!1;break}k||(k=g=="constructor")}if(b&&!k){var P=s.constructor,H=t.constructor;P!=H&&"constructor"in s&&"constructor"in t&&!(typeof P=="function"&&P instanceof P&&typeof H=="function"&&H instanceof H)&&(b=!1)}return l.delete(s),l.delete(t),b}var ED=1,L1="[object Arguments]",M1="[object Array]",qu="[object Object]",TD=Object.prototype,D1=TD.hasOwnProperty;function AD(s,t,n,r,o,l){var d=So(s),u=So(t),h=d?M1:zr(s),f=u?M1:zr(t);h=h==L1?qu:h,f=f==L1?qu:f;var v=h==qu,x=f==qu,g=h==f;if(g&&ud(s)){if(!ud(t))return!1;d=!0,v=!1}if(g&&!v)return l||(l=new ga),d||Zg(s)?r5(s,t,n,r,o,l):wD(s,t,h,n,r,o,l);if(!(n&ED)){var j=v&&D1.call(s,"__wrapped__"),N=x&&D1.call(t,"__wrapped__");if(j||N){var b=j?s.value():s,k=N?t.value():t;return l||(l=new ga),o(b,k,n,r,l)}}return g?(l||(l=new ga),SD(s,t,n,r,o,l)):!1}function a5(s,t,n,r,o){return s===t?!0:s==null||t==null||!Qa(s)&&!Qa(t)?s!==s&&t!==t:AD(s,t,n,r,a5,o)}function PD(s){return function(t,n,r){for(var o=-1,l=Object(t),d=r(t),u=d.length;u--;){var h=d[++o];if(n(l[h],h,l)===!1)break}return t}}var RD=PD();function _x(s,t,n){(n!==void 0&&!Sd(s[t],n)||n===void 0&&!(t in s))&&Qg(s,t,n)}function _D(s){return Qa(s)&&fh(s)}function Ix(s,t){if(!(t==="constructor"&&typeof s[t]=="function")&&t!="__proto__")return s[t]}function ID(s){return sL(s,Gk(s))}function OD(s,t,n,r,o,l,d){var u=Ix(s,n),h=Ix(t,n),f=d.get(h);if(f){_x(s,n,f);return}var v=l?l(u,h,n+"",s,t,d):void 0,x=v===void 0;if(x){var g=So(h),j=!g&&ud(h),N=!g&&!j&&Zg(h);v=h,g||j||N?So(u)?v=u:_D(u)?v=BO(u):j?(x=!1,v=Zk(h,!0)):N?(x=!1,v=Jk(h,!0)):v=[]:AM(h)||Ex(h)?(v=u,Ex(u)?v=ID(u):(!Bi(u)||Gg(u))&&(v=e5(h))):x=!1}x&&(d.set(h,v),o(v,h,r,l,d),d.delete(h)),_x(s,n,v)}function i5(s,t,n,r,o){s!==t&&RD(t,function(l,d){if(o||(o=new ga),Bi(l))OD(s,t,d,n,i5,r,o);else{var u=r?r(Ix(s,d),l,d+"",s,t,o):void 0;u===void 0&&(u=l),_x(s,d,u)}},Gk)}function Si(s,t){return a5(s,t)}var Pi=oL(function(s,t,n){i5(s,t,n)}),st=(s=>(s[s.TYPE=3]="TYPE",s[s.LEVEL=12]="LEVEL",s[s.ATTRIBUTE=13]="ATTRIBUTE",s[s.BLOT=14]="BLOT",s[s.INLINE=7]="INLINE",s[s.BLOCK=11]="BLOCK",s[s.BLOCK_BLOT=10]="BLOCK_BLOT",s[s.INLINE_BLOT=6]="INLINE_BLOT",s[s.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",s[s.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",s[s.ANY=15]="ANY",s))(st||{});class wa{constructor(t,n,r={}){this.attrName=t,this.keyName=n;const o=st.TYPE&st.ATTRIBUTE;this.scope=r.scope!=null?r.scope&st.LEVEL|o:st.ATTRIBUTE,r.whitelist!=null&&(this.whitelist=r.whitelist)}static keys(t){return Array.from(t.attributes).map(n=>n.name)}add(t,n){return this.canAdd(t,n)?(t.setAttribute(this.keyName,n),!0):!1}canAdd(t,n){return this.whitelist==null?!0:typeof n=="string"?this.whitelist.indexOf(n.replace(/["']/g,""))>-1:this.whitelist.indexOf(n)>-1}remove(t){t.removeAttribute(this.keyName)}value(t){const n=t.getAttribute(this.keyName);return this.canAdd(t,n)&&n?n:""}}class _l extends Error{constructor(t){t="[Parchment] "+t,super(t),this.message=t,this.name=this.constructor.name}}const o5=class Ox{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(t,n=!1){if(t==null)return null;if(this.blots.has(t))return this.blots.get(t)||null;if(n){let r=null;try{r=t.parentNode}catch{return null}return this.find(r,n)}return null}create(t,n,r){const o=this.query(n);if(o==null)throw new _l(`Unable to create ${n} blot`);const l=o,d=n instanceof Node||n.nodeType===Node.TEXT_NODE?n:l.create(r),u=new l(t,d,r);return Ox.blots.set(u.domNode,u),u}find(t,n=!1){return Ox.find(t,n)}query(t,n=st.ANY){let r;return typeof t=="string"?r=this.types[t]||this.attributes[t]:t instanceof Text||t.nodeType===Node.TEXT_NODE?r=this.types.text:typeof t=="number"?t&st.LEVEL&st.BLOCK?r=this.types.block:t&st.LEVEL&st.INLINE&&(r=this.types.inline):t instanceof Element&&((t.getAttribute("class")||"").split(/\s+/).some(o=>(r=this.classes[o],!!r)),r=r||this.tags[t.tagName]),r==null?null:"scope"in r&&n&st.LEVEL&r.scope&&n&st.TYPE&r.scope?r:null}register(...t){return t.map(n=>{const r="blotName"in n,o="attrName"in n;if(!r&&!o)throw new _l("Invalid definition");if(r&&n.blotName==="abstract")throw new _l("Cannot register abstract class");const l=r?n.blotName:o?n.attrName:void 0;return this.types[l]=n,o?typeof n.keyName=="string"&&(this.attributes[n.keyName]=n):r&&(n.className&&(this.classes[n.className]=n),n.tagName&&(Array.isArray(n.tagName)?n.tagName=n.tagName.map(d=>d.toUpperCase()):n.tagName=n.tagName.toUpperCase(),(Array.isArray(n.tagName)?n.tagName:[n.tagName]).forEach(d=>{(this.tags[d]==null||n.className==null)&&(this.tags[d]=n)}))),n})}};o5.blots=new WeakMap;let Bl=o5;function $1(s,t){return(s.getAttribute("class")||"").split(/\s+/).filter(n=>n.indexOf(`${t}-`)===0)}class LD extends wa{static keys(t){return(t.getAttribute("class")||"").split(/\s+/).map(n=>n.split("-").slice(0,-1).join("-"))}add(t,n){return this.canAdd(t,n)?(this.remove(t),t.classList.add(`${this.keyName}-${n}`),!0):!1}remove(t){$1(t,this.keyName).forEach(n=>{t.classList.remove(n)}),t.classList.length===0&&t.removeAttribute("class")}value(t){const n=($1(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,n)?n:""}}const sa=LD;function Ap(s){const t=s.split("-"),n=t.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("");return t[0]+n}class MD extends wa{static keys(t){return(t.getAttribute("style")||"").split(";").map(n=>n.split(":")[0].trim())}add(t,n){return this.canAdd(t,n)?(t.style[Ap(this.keyName)]=n,!0):!1}remove(t){t.style[Ap(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")}value(t){const n=t.style[Ap(this.keyName)];return this.canAdd(t,n)?n:""}}const Hi=MD;class DD{constructor(t){this.attributes={},this.domNode=t,this.build()}attribute(t,n){n?t.add(this.domNode,n)&&(t.value(this.domNode)!=null?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])}build(){this.attributes={};const t=Bl.find(this.domNode);if(t==null)return;const n=wa.keys(this.domNode),r=sa.keys(this.domNode),o=Hi.keys(this.domNode);n.concat(r).concat(o).forEach(l=>{const d=t.scroll.query(l,st.ATTRIBUTE);d instanceof wa&&(this.attributes[d.attrName]=d)})}copy(t){Object.keys(this.attributes).forEach(n=>{const r=this.attributes[n].value(this.domNode);t.format(n,r)})}move(t){this.copy(t),Object.keys(this.attributes).forEach(n=>{this.attributes[n].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((t,n)=>(t[n]=this.attributes[n].value(this.domNode),t),{})}}const gh=DD,l5=class{constructor(t,n){this.scroll=t,this.domNode=n,Bl.blots.set(n,this),this.prev=null,this.next=null}static create(t){if(this.tagName==null)throw new _l("Blot definition missing tagName");let n,r;return Array.isArray(this.tagName)?(typeof t=="string"?(r=t.toUpperCase(),parseInt(r,10).toString()===r&&(r=parseInt(r,10))):typeof t=="number"&&(r=t),typeof r=="number"?n=document.createElement(this.tagName[r-1]):r&&this.tagName.indexOf(r)>-1?n=document.createElement(r):n=document.createElement(this.tagName[0])):n=document.createElement(this.tagName),this.className&&n.classList.add(this.className),n}get statics(){return this.constructor}attach(){}clone(){const t=this.domNode.cloneNode(!1);return this.scroll.create(t)}detach(){this.parent!=null&&this.parent.removeChild(this),Bl.blots.delete(this.domNode)}deleteAt(t,n){this.isolate(t,n).remove()}formatAt(t,n,r,o){const l=this.isolate(t,n);if(this.scroll.query(r,st.BLOT)!=null&&o)l.wrap(r,o);else if(this.scroll.query(r,st.ATTRIBUTE)!=null){const d=this.scroll.create(this.statics.scope);l.wrap(d),d.format(r,o)}}insertAt(t,n,r){const o=r==null?this.scroll.create("text",n):this.scroll.create(n,r),l=this.split(t);this.parent.insertBefore(o,l||void 0)}isolate(t,n){const r=this.split(t);if(r==null)throw new Error("Attempt to isolate at end");return r.split(n),r}length(){return 1}offset(t=this.parent){return this.parent==null||this===t?0:this.parent.children.offset(this)+this.parent.offset(t)}optimize(t){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(t,n){const r=typeof t=="string"?this.scroll.create(t,n):t;return this.parent!=null&&(this.parent.insertBefore(r,this.next||void 0),this.remove()),r}split(t,n){return t===0?this:this.next}update(t,n){}wrap(t,n){const r=typeof t=="string"?this.scroll.create(t,n):t;if(this.parent!=null&&this.parent.insertBefore(r,this.next||void 0),typeof r.appendChild!="function")throw new _l(`Cannot wrap ${t}`);return r.appendChild(this),r}};l5.blotName="abstract";let c5=l5;const d5=class extends c5{static value(t){return!0}index(t,n){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(n,1):-1}position(t,n){let r=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return t>0&&(r+=1),[this.parent.domNode,r]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};d5.scope=st.INLINE_BLOT;let $D=d5;const hn=$D;class qD{constructor(){this.head=null,this.tail=null,this.length=0}append(...t){if(this.insertBefore(t[0],null),t.length>1){const n=t.slice(1);this.append(...n)}}at(t){const n=this.iterator();let r=n();for(;r&&t>0;)t-=1,r=n();return r}contains(t){const n=this.iterator();let r=n();for(;r;){if(r===t)return!0;r=n()}return!1}indexOf(t){const n=this.iterator();let r=n(),o=0;for(;r;){if(r===t)return o;o+=1,r=n()}return-1}insertBefore(t,n){t!=null&&(this.remove(t),t.next=n,n!=null?(t.prev=n.prev,n.prev!=null&&(n.prev.next=t),n.prev=t,n===this.head&&(this.head=t)):this.tail!=null?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)}offset(t){let n=0,r=this.head;for(;r!=null;){if(r===t)return n;n+=r.length(),r=r.next}return-1}remove(t){this.contains(t)&&(t.prev!=null&&(t.prev.next=t.next),t.next!=null&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)}iterator(t=this.head){return()=>{const n=t;return t!=null&&(t=t.next),n}}find(t,n=!1){const r=this.iterator();let o=r();for(;o;){const l=o.length();if(t<l||n&&t===l&&(o.next==null||o.next.length()!==0))return[o,t];t-=l,o=r()}return[null,0]}forEach(t){const n=this.iterator();let r=n();for(;r;)t(r),r=n()}forEachAt(t,n,r){if(n<=0)return;const[o,l]=this.find(t);let d=t-l;const u=this.iterator(o);let h=u();for(;h&&d<t+n;){const f=h.length();t>d?r(h,t-d,Math.min(n,d+f-t)):r(h,0,Math.min(f,t+n-d)),d+=f,h=u()}}map(t){return this.reduce((n,r)=>(n.push(t(r)),n),[])}reduce(t,n){const r=this.iterator();let o=r();for(;o;)n=t(n,o),o=r();return n}}function q1(s,t){const n=t.find(s);if(n)return n;try{return t.create(s)}catch{const r=t.create(st.INLINE);return Array.from(s.childNodes).forEach(o=>{r.domNode.appendChild(o)}),s.parentNode&&s.parentNode.replaceChild(r.domNode,s),r.attach(),r}}const u5=class Ci extends c5{constructor(t,n){super(t,n),this.uiNode=null,this.build()}appendChild(t){this.insertBefore(t)}attach(){super.attach(),this.children.forEach(t=>{t.attach()})}attachUI(t){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=t,Ci.uiClass&&this.uiNode.classList.add(Ci.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new qD,Array.from(this.domNode.childNodes).filter(t=>t!==this.uiNode).reverse().forEach(t=>{try{const n=q1(t,this.scroll);this.insertBefore(n,this.children.head||void 0)}catch(n){if(n instanceof _l)return;throw n}})}deleteAt(t,n){if(t===0&&n===this.length())return this.remove();this.children.forEachAt(t,n,(r,o,l)=>{r.deleteAt(o,l)})}descendant(t,n=0){const[r,o]=this.children.find(n);return t.blotName==null&&t(r)||t.blotName!=null&&r instanceof t?[r,o]:r instanceof Ci?r.descendant(t,o):[null,-1]}descendants(t,n=0,r=Number.MAX_VALUE){let o=[],l=r;return this.children.forEachAt(n,r,(d,u,h)=>{(t.blotName==null&&t(d)||t.blotName!=null&&d instanceof t)&&o.push(d),d instanceof Ci&&(o=o.concat(d.descendants(t,u,l))),l-=h}),o}detach(){this.children.forEach(t=>{t.detach()}),super.detach()}enforceAllowedChildren(){let t=!1;this.children.forEach(n=>{t||this.statics.allowedChildren.some(r=>n instanceof r)||(n.statics.scope===st.BLOCK_BLOT?(n.next!=null&&this.splitAfter(n),n.prev!=null&&this.splitAfter(n.prev),n.parent.unwrap(),t=!0):n instanceof Ci?n.unwrap():n.remove())})}formatAt(t,n,r,o){this.children.forEachAt(t,n,(l,d,u)=>{l.formatAt(d,u,r,o)})}insertAt(t,n,r){const[o,l]=this.children.find(t);if(o)o.insertAt(l,n,r);else{const d=r==null?this.scroll.create("text",n):this.scroll.create(n,r);this.appendChild(d)}}insertBefore(t,n){t.parent!=null&&t.parent.children.remove(t);let r=null;this.children.insertBefore(t,n||null),t.parent=this,n!=null&&(r=n.domNode),(this.domNode.parentNode!==t.domNode||this.domNode.nextSibling!==r)&&this.domNode.insertBefore(t.domNode,r),t.attach()}length(){return this.children.reduce((t,n)=>t+n.length(),0)}moveChildren(t,n){this.children.forEach(r=>{t.insertBefore(r,n)})}optimize(t){if(super.optimize(t),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const n=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(n)}else this.remove()}path(t,n=!1){const[r,o]=this.children.find(t,n),l=[[this,t]];return r instanceof Ci?l.concat(r.path(o,n)):(r!=null&&l.push([r,o]),l)}removeChild(t){this.children.remove(t)}replaceWith(t,n){const r=typeof t=="string"?this.scroll.create(t,n):t;return r instanceof Ci&&this.moveChildren(r),super.replaceWith(r)}split(t,n=!1){if(!n){if(t===0)return this;if(t===this.length())return this.next}const r=this.clone();return this.parent&&this.parent.insertBefore(r,this.next||void 0),this.children.forEachAt(t,this.length(),(o,l,d)=>{const u=o.split(l,n);u!=null&&r.appendChild(u)}),r}splitAfter(t){const n=this.clone();for(;t.next!=null;)n.appendChild(t.next);return this.parent&&this.parent.insertBefore(n,this.next||void 0),n}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(t,n){const r=[],o=[];t.forEach(l=>{l.target===this.domNode&&l.type==="childList"&&(r.push(...l.addedNodes),o.push(...l.removedNodes))}),o.forEach(l=>{if(l.parentNode!=null&&l.tagName!=="IFRAME"&&document.body.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const d=this.scroll.find(l);d!=null&&(d.domNode.parentNode==null||d.domNode.parentNode===this.domNode)&&d.detach()}),r.filter(l=>l.parentNode===this.domNode&&l!==this.uiNode).sort((l,d)=>l===d?0:l.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(l=>{let d=null;l.nextSibling!=null&&(d=this.scroll.find(l.nextSibling));const u=q1(l,this.scroll);(u.next!==d||u.next==null)&&(u.parent!=null&&u.parent.removeChild(this),this.insertBefore(u,d||void 0))}),this.enforceAllowedChildren()}};u5.uiClass="";let FD=u5;const Wr=FD;function zD(s,t){if(Object.keys(s).length!==Object.keys(t).length)return!1;for(const n in s)if(s[n]!==t[n])return!1;return!0}const gl=class vl extends Wr{static create(t){return super.create(t)}static formats(t,n){const r=n.query(vl.blotName);if(!(r!=null&&t.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(t,n){super(t,n),this.attributes=new gh(this.domNode)}format(t,n){if(t===this.statics.blotName&&!n)this.children.forEach(r=>{r instanceof vl||(r=r.wrap(vl.blotName,!0)),this.attributes.copy(r)}),this.unwrap();else{const r=this.scroll.query(t,st.INLINE);if(r==null)return;r instanceof wa?this.attributes.attribute(r,n):n&&(t!==this.statics.blotName||this.formats()[t]!==n)&&this.replaceWith(t,n)}}formats(){const t=this.attributes.values(),n=this.statics.formats(this.domNode,this.scroll);return n!=null&&(t[this.statics.blotName]=n),t}formatAt(t,n,r,o){this.formats()[r]!=null||this.scroll.query(r,st.ATTRIBUTE)?this.isolate(t,n).format(r,o):super.formatAt(t,n,r,o)}optimize(t){super.optimize(t);const n=this.formats();if(Object.keys(n).length===0)return this.unwrap();const r=this.next;r instanceof vl&&r.prev===this&&zD(n,r.formats())&&(r.moveChildren(this),r.remove())}replaceWith(t,n){const r=super.replaceWith(t,n);return this.attributes.copy(r),r}update(t,n){super.update(t,n),t.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}wrap(t,n){const r=super.wrap(t,n);return r instanceof vl&&this.attributes.move(r),r}};gl.allowedChildren=[gl,hn],gl.blotName="inline",gl.scope=st.INLINE_BLOT,gl.tagName="SPAN";let UD=gl;const e0=UD,yl=class Lx extends Wr{static create(t){return super.create(t)}static formats(t,n){const r=n.query(Lx.blotName);if(!(r!=null&&t.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(t,n){super(t,n),this.attributes=new gh(this.domNode)}format(t,n){const r=this.scroll.query(t,st.BLOCK);r!=null&&(r instanceof wa?this.attributes.attribute(r,n):t===this.statics.blotName&&!n?this.replaceWith(Lx.blotName):n&&(t!==this.statics.blotName||this.formats()[t]!==n)&&this.replaceWith(t,n))}formats(){const t=this.attributes.values(),n=this.statics.formats(this.domNode,this.scroll);return n!=null&&(t[this.statics.blotName]=n),t}formatAt(t,n,r,o){this.scroll.query(r,st.BLOCK)!=null?this.format(r,o):super.formatAt(t,n,r,o)}insertAt(t,n,r){if(r==null||this.scroll.query(n,st.INLINE)!=null)super.insertAt(t,n,r);else{const o=this.split(t);if(o!=null){const l=this.scroll.create(n,r);o.parent.insertBefore(l,o)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(t,n){const r=super.replaceWith(t,n);return this.attributes.copy(r),r}update(t,n){super.update(t,n),t.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}};yl.blotName="block",yl.scope=st.BLOCK_BLOT,yl.tagName="P",yl.allowedChildren=[e0,yl,hn];let BD=yl;const fd=BD,Mx=class extends Wr{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(t,n){super.deleteAt(t,n),this.enforceAllowedChildren()}formatAt(t,n,r,o){super.formatAt(t,n,r,o),this.enforceAllowedChildren()}insertAt(t,n,r){super.insertAt(t,n,r),this.enforceAllowedChildren()}optimize(t){super.optimize(t),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};Mx.blotName="container",Mx.scope=st.BLOCK_BLOT;let HD=Mx;const vh=HD;class KD extends hn{static formats(t,n){}format(t,n){super.formatAt(0,this.length(),t,n)}formatAt(t,n,r,o){t===0&&n===this.length()?this.format(r,o):super.formatAt(t,n,r,o)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const ar=KD,WD={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},VD=100,bl=class extends Wr{constructor(t,n){super(null,n),this.registry=t,this.scroll=this,this.build(),this.observer=new MutationObserver(r=>{this.update(r)}),this.observer.observe(this.domNode,WD),this.attach()}create(t,n){return this.registry.create(this,t,n)}find(t,n=!1){const r=this.registry.find(t,n);return r?r.scroll===this?r:n?this.find(r.scroll.domNode.parentNode,!0):null:null}query(t,n=st.ANY){return this.registry.query(t,n)}register(...t){return this.registry.register(...t)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(t,n){this.update(),t===0&&n===this.length()?this.children.forEach(r=>{r.remove()}):super.deleteAt(t,n)}formatAt(t,n,r,o){this.update(),super.formatAt(t,n,r,o)}insertAt(t,n,r){this.update(),super.insertAt(t,n,r)}optimize(t=[],n={}){super.optimize(n);const r=n.mutationsMap||new WeakMap;let o=Array.from(this.observer.takeRecords());for(;o.length>0;)t.push(o.pop());const l=(h,f=!0)=>{h==null||h===this||h.domNode.parentNode!=null&&(r.has(h.domNode)||r.set(h.domNode,[]),f&&l(h.parent))},d=h=>{r.has(h.domNode)&&(h instanceof Wr&&h.children.forEach(d),r.delete(h.domNode),h.optimize(n))};let u=t;for(let h=0;u.length>0;h+=1){if(h>=VD)throw new Error("[Parchment] Maximum optimize iterations reached");for(u.forEach(f=>{const v=this.find(f.target,!0);v!=null&&(v.domNode===f.target&&(f.type==="childList"?(l(this.find(f.previousSibling,!1)),Array.from(f.addedNodes).forEach(x=>{const g=this.find(x,!1);l(g,!1),g instanceof Wr&&g.children.forEach(j=>{l(j,!1)})})):f.type==="attributes"&&l(v.prev)),l(v))}),this.children.forEach(d),u=Array.from(this.observer.takeRecords()),o=u.slice();o.length>0;)t.push(o.pop())}}update(t,n={}){t=t||this.observer.takeRecords();const r=new WeakMap;t.map(o=>{const l=this.find(o.target,!0);return l==null?null:r.has(l.domNode)?(r.get(l.domNode).push(o),null):(r.set(l.domNode,[o]),l)}).forEach(o=>{o!=null&&o!==this&&r.has(o.domNode)&&o.update(r.get(o.domNode)||[],n)}),n.mutationsMap=r,r.has(this.domNode)&&super.update(r.get(this.domNode),n),this.optimize(t,n)}};bl.blotName="scroll",bl.defaultChild=fd,bl.allowedChildren=[fd,vh],bl.scope=st.BLOCK_BLOT,bl.tagName="DIV";let GD=bl;const t0=GD,Dx=class m5 extends hn{static create(t){return document.createTextNode(t)}static value(t){return t.data}constructor(t,n){super(t,n),this.text=this.statics.value(this.domNode)}deleteAt(t,n){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+n)}index(t,n){return this.domNode===t?n:-1}insertAt(t,n,r){r==null?(this.text=this.text.slice(0,t)+n+this.text.slice(t),this.domNode.data=this.text):super.insertAt(t,n,r)}length(){return this.text.length}optimize(t){super.optimize(t),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof m5&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(t,n=!1){return[this.domNode,t]}split(t,n=!1){if(!n){if(t===0)return this;if(t===this.length())return this.next}const r=this.scroll.create(this.domNode.splitText(t));return this.parent.insertBefore(r,this.next||void 0),this.text=this.statics.value(this.domNode),r}update(t,n){t.some(r=>r.type==="characterData"&&r.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};Dx.blotName="text",Dx.scope=st.INLINE_BLOT;let QD=Dx;const Rm=QD,YD=Object.freeze(Object.defineProperty({__proto__:null,Attributor:wa,AttributorStore:gh,BlockBlot:fd,ClassAttributor:sa,ContainerBlot:vh,EmbedBlot:ar,InlineBlot:e0,LeafBlot:hn,ParentBlot:Wr,Registry:Bl,Scope:st,ScrollBlot:t0,StyleAttributor:Hi,TextBlot:Rm},Symbol.toStringTag,{value:"Module"}));var Fu={exports:{}},Pp,F1;function XD(){if(F1)return Pp;F1=1;var s=-1,t=1,n=0;function r(_,Y,z,J,X){if(_===Y)return _?[[n,_]]:[];if(z!=null){var $=G(_,Y,z);if($)return $}var I=u(_,Y),A=_.substring(0,I);_=_.substring(I),Y=Y.substring(I),I=f(_,Y);var W=_.substring(_.length-I);_=_.substring(0,_.length-I),Y=Y.substring(0,Y.length-I);var Z=o(_,Y);return A&&Z.unshift([n,A]),W&&Z.push([n,W]),S(Z,X),J&&x(Z),Z}function o(_,Y){var z;if(!_)return[[t,Y]];if(!Y)return[[s,_]];var J=_.length>Y.length?_:Y,X=_.length>Y.length?Y:_,$=J.indexOf(X);if($!==-1)return z=[[t,J.substring(0,$)],[n,X],[t,J.substring($+X.length)]],_.length>Y.length&&(z[0][0]=z[2][0]=s),z;if(X.length===1)return[[s,_],[t,Y]];var I=v(_,Y);if(I){var A=I[0],W=I[1],Z=I[2],q=I[3],ne=I[4],K=r(A,Z),U=r(W,q);return K.concat([[n,ne]],U)}return l(_,Y)}function l(_,Y){for(var z=_.length,J=Y.length,X=Math.ceil((z+J)/2),$=X,I=2*X,A=new Array(I),W=new Array(I),Z=0;Z<I;Z++)A[Z]=-1,W[Z]=-1;A[$+1]=0,W[$+1]=0;for(var q=z-J,ne=q%2!==0,K=0,U=0,M=0,F=0,ie=0;ie<X;ie++){for(var fe=-ie+K;fe<=ie-U;fe+=2){var Ee=$+fe,Ne;fe===-ie||fe!==ie&&A[Ee-1]<A[Ee+1]?Ne=A[Ee+1]:Ne=A[Ee-1]+1;for(var Pe=Ne-fe;Ne<z&&Pe<J&&_.charAt(Ne)===Y.charAt(Pe);)Ne++,Pe++;if(A[Ee]=Ne,Ne>z)U+=2;else if(Pe>J)K+=2;else if(ne){var $e=$+q-fe;if($e>=0&&$e<I&&W[$e]!==-1){var Ue=z-W[$e];if(Ne>=Ue)return d(_,Y,Ne,Pe)}}}for(var et=-ie+M;et<=ie-F;et+=2){var $e=$+et,Ue;et===-ie||et!==ie&&W[$e-1]<W[$e+1]?Ue=W[$e+1]:Ue=W[$e-1]+1;for(var ct=Ue-et;Ue<z&&ct<J&&_.charAt(z-Ue-1)===Y.charAt(J-ct-1);)Ue++,ct++;if(W[$e]=Ue,Ue>z)F+=2;else if(ct>J)M+=2;else if(!ne){var Ee=$+q-et;if(Ee>=0&&Ee<I&&A[Ee]!==-1){var Ne=A[Ee],Pe=$+Ne-Ee;if(Ue=z-Ue,Ne>=Ue)return d(_,Y,Ne,Pe)}}}}return[[s,_],[t,Y]]}function d(_,Y,z,J){var X=_.substring(0,z),$=Y.substring(0,J),I=_.substring(z),A=Y.substring(J),W=r(X,$),Z=r(I,A);return W.concat(Z)}function u(_,Y){if(!_||!Y||_.charAt(0)!==Y.charAt(0))return 0;for(var z=0,J=Math.min(_.length,Y.length),X=J,$=0;z<X;)_.substring($,X)==Y.substring($,X)?(z=X,$=z):J=X,X=Math.floor((J-z)/2+z);return T(_.charCodeAt(X-1))&&X--,X}function h(_,Y){var z=_.length,J=Y.length;if(z==0||J==0)return 0;z>J?_=_.substring(z-J):z<J&&(Y=Y.substring(0,z));var X=Math.min(z,J);if(_==Y)return X;for(var $=0,I=1;;){var A=_.substring(X-I),W=Y.indexOf(A);if(W==-1)return $;I+=W,(W==0||_.substring(X-I)==Y.substring(0,I))&&($=I,I++)}}function f(_,Y){if(!_||!Y||_.slice(-1)!==Y.slice(-1))return 0;for(var z=0,J=Math.min(_.length,Y.length),X=J,$=0;z<X;)_.substring(_.length-X,_.length-$)==Y.substring(Y.length-X,Y.length-$)?(z=X,$=z):J=X,X=Math.floor((J-z)/2+z);return P(_.charCodeAt(_.length-X))&&X--,X}function v(_,Y){var z=_.length>Y.length?_:Y,J=_.length>Y.length?Y:_;if(z.length<4||J.length*2<z.length)return null;function X(U,M,F){for(var ie=U.substring(F,F+Math.floor(U.length/4)),fe=-1,Ee="",Ne,Pe,$e,Ue;(fe=M.indexOf(ie,fe+1))!==-1;){var et=u(U.substring(F),M.substring(fe)),ct=f(U.substring(0,F),M.substring(0,fe));Ee.length<ct+et&&(Ee=M.substring(fe-ct,fe)+M.substring(fe,fe+et),Ne=U.substring(0,F-ct),Pe=U.substring(F+et),$e=M.substring(0,fe-ct),Ue=M.substring(fe+et))}return Ee.length*2>=U.length?[Ne,Pe,$e,Ue,Ee]:null}var $=X(z,J,Math.ceil(z.length/4)),I=X(z,J,Math.ceil(z.length/2)),A;if(!$&&!I)return null;I?$?A=$[4].length>I[4].length?$:I:A=I:A=$;var W,Z,q,ne;_.length>Y.length?(W=A[0],Z=A[1],q=A[2],ne=A[3]):(q=A[0],ne=A[1],W=A[2],Z=A[3]);var K=A[4];return[W,Z,q,ne,K]}function x(_){for(var Y=!1,z=[],J=0,X=null,$=0,I=0,A=0,W=0,Z=0;$<_.length;)_[$][0]==n?(z[J++]=$,I=W,A=Z,W=0,Z=0,X=_[$][1]):(_[$][0]==t?W+=_[$][1].length:Z+=_[$][1].length,X&&X.length<=Math.max(I,A)&&X.length<=Math.max(W,Z)&&(_.splice(z[J-1],0,[s,X]),_[z[J-1]+1][0]=t,J--,J--,$=J>0?z[J-1]:-1,I=0,A=0,W=0,Z=0,X=null,Y=!0)),$++;for(Y&&S(_),E(_),$=1;$<_.length;){if(_[$-1][0]==s&&_[$][0]==t){var q=_[$-1][1],ne=_[$][1],K=h(q,ne),U=h(ne,q);K>=U?(K>=q.length/2||K>=ne.length/2)&&(_.splice($,0,[n,ne.substring(0,K)]),_[$-1][1]=q.substring(0,q.length-K),_[$+1][1]=ne.substring(K),$++):(U>=q.length/2||U>=ne.length/2)&&(_.splice($,0,[n,q.substring(0,U)]),_[$-1][0]=t,_[$-1][1]=ne.substring(0,ne.length-U),_[$+1][0]=s,_[$+1][1]=q.substring(U),$++),$++}$++}}var g=/[^a-zA-Z0-9]/,j=/\s/,N=/[\r\n]/,b=/\n\r?\n$/,k=/^\r?\n\r?\n/;function E(_){function Y(U,M){if(!U||!M)return 6;var F=U.charAt(U.length-1),ie=M.charAt(0),fe=F.match(g),Ee=ie.match(g),Ne=fe&&F.match(j),Pe=Ee&&ie.match(j),$e=Ne&&F.match(N),Ue=Pe&&ie.match(N),et=$e&&U.match(b),ct=Ue&&M.match(k);return et||ct?5:$e||Ue?4:fe&&!Ne&&Pe?3:Ne||Pe?2:fe||Ee?1:0}for(var z=1;z<_.length-1;){if(_[z-1][0]==n&&_[z+1][0]==n){var J=_[z-1][1],X=_[z][1],$=_[z+1][1],I=f(J,X);if(I){var A=X.substring(X.length-I);J=J.substring(0,J.length-I),X=A+X.substring(0,X.length-I),$=A+$}for(var W=J,Z=X,q=$,ne=Y(J,X)+Y(X,$);X.charAt(0)===$.charAt(0);){J+=X.charAt(0),X=X.substring(1)+$.charAt(0),$=$.substring(1);var K=Y(J,X)+Y(X,$);K>=ne&&(ne=K,W=J,Z=X,q=$)}_[z-1][1]!=W&&(W?_[z-1][1]=W:(_.splice(z-1,1),z--),_[z][1]=Z,q?_[z+1][1]=q:(_.splice(z+1,1),z--))}z++}}function S(_,Y){_.push([n,""]);for(var z=0,J=0,X=0,$="",I="",A;z<_.length;){if(z<_.length-1&&!_[z][1]){_.splice(z,1);continue}switch(_[z][0]){case t:X++,I+=_[z][1],z++;break;case s:J++,$+=_[z][1],z++;break;case n:var W=z-X-J-1;if(Y){if(W>=0&&re(_[W][1])){var Z=_[W][1].slice(-1);if(_[W][1]=_[W][1].slice(0,-1),$=Z+$,I=Z+I,!_[W][1]){_.splice(W,1),z--;var q=W-1;_[q]&&_[q][0]===t&&(X++,I=_[q][1]+I,q--),_[q]&&_[q][0]===s&&(J++,$=_[q][1]+$,q--),W=q}}if(H(_[z][1])){var Z=_[z][1].charAt(0);_[z][1]=_[z][1].slice(1),$+=Z,I+=Z}}if(z<_.length-1&&!_[z][1]){_.splice(z,1);break}if($.length>0||I.length>0){$.length>0&&I.length>0&&(A=u(I,$),A!==0&&(W>=0?_[W][1]+=I.substring(0,A):(_.splice(0,0,[n,I.substring(0,A)]),z++),I=I.substring(A),$=$.substring(A)),A=f(I,$),A!==0&&(_[z][1]=I.substring(I.length-A)+_[z][1],I=I.substring(0,I.length-A),$=$.substring(0,$.length-A)));var ne=X+J;$.length===0&&I.length===0?(_.splice(z-ne,ne),z=z-ne):$.length===0?(_.splice(z-ne,ne,[t,I]),z=z-ne+1):I.length===0?(_.splice(z-ne,ne,[s,$]),z=z-ne+1):(_.splice(z-ne,ne,[s,$],[t,I]),z=z-ne+2)}z!==0&&_[z-1][0]===n?(_[z-1][1]+=_[z][1],_.splice(z,1)):z++,X=0,J=0,$="",I="";break}}_[_.length-1][1]===""&&_.pop();var K=!1;for(z=1;z<_.length-1;)_[z-1][0]===n&&_[z+1][0]===n&&(_[z][1].substring(_[z][1].length-_[z-1][1].length)===_[z-1][1]?(_[z][1]=_[z-1][1]+_[z][1].substring(0,_[z][1].length-_[z-1][1].length),_[z+1][1]=_[z-1][1]+_[z+1][1],_.splice(z-1,1),K=!0):_[z][1].substring(0,_[z+1][1].length)==_[z+1][1]&&(_[z-1][1]+=_[z+1][1],_[z][1]=_[z][1].substring(_[z+1][1].length)+_[z+1][1],_.splice(z+1,1),K=!0)),z++;K&&S(_,Y)}function T(_){return _>=55296&&_<=56319}function P(_){return _>=56320&&_<=57343}function H(_){return P(_.charCodeAt(0))}function re(_){return T(_.charCodeAt(_.length-1))}function B(_){for(var Y=[],z=0;z<_.length;z++)_[z][1].length>0&&Y.push(_[z]);return Y}function Q(_,Y,z,J){return re(_)||H(J)?null:B([[n,_],[s,Y],[t,z],[n,J]])}function G(_,Y,z){var J=typeof z=="number"?{index:z,length:0}:z.oldRange,X=typeof z=="number"?null:z.newRange,$=_.length,I=Y.length;if(J.length===0&&(X===null||X.length===0)){var A=J.index,W=_.slice(0,A),Z=_.slice(A),q=X?X.index:null;e:{var ne=A+I-$;if(q!==null&&q!==ne||ne<0||ne>I)break e;var K=Y.slice(0,ne),U=Y.slice(ne);if(U!==Z)break e;var M=Math.min(A,ne),F=W.slice(0,M),ie=K.slice(0,M);if(F!==ie)break e;var fe=W.slice(M),Ee=K.slice(M);return Q(F,fe,Ee,Z)}e:{if(q!==null&&q!==A)break e;var Ne=A,K=Y.slice(0,Ne),U=Y.slice(Ne);if(K!==W)break e;var Pe=Math.min($-Ne,I-Ne),$e=Z.slice(Z.length-Pe),Ue=U.slice(U.length-Pe);if($e!==Ue)break e;var fe=Z.slice(0,Z.length-Pe),Ee=U.slice(0,U.length-Pe);return Q(W,fe,Ee,$e)}}if(J.length>0&&X&&X.length===0)e:{var F=_.slice(0,J.index),$e=_.slice(J.index+J.length),M=F.length,Pe=$e.length;if(I<M+Pe)break e;var ie=Y.slice(0,M),Ue=Y.slice(I-Pe);if(F!==ie||$e!==Ue)break e;var fe=_.slice(M,$-Pe),Ee=Y.slice(M,I-Pe);return Q(F,fe,Ee,$e)}return null}function ue(_,Y,z,J){return r(_,Y,z,J,!0)}return ue.INSERT=t,ue.DELETE=s,ue.EQUAL=n,Pp=ue,Pp}var Wc={exports:{}};Wc.exports;var z1;function h5(){return z1||(z1=1,(function(s,t){var n=200,r="__lodash_hash_undefined__",o=9007199254740991,l="[object Arguments]",d="[object Array]",u="[object Boolean]",h="[object Date]",f="[object Error]",v="[object Function]",x="[object GeneratorFunction]",g="[object Map]",j="[object Number]",N="[object Object]",b="[object Promise]",k="[object RegExp]",E="[object Set]",S="[object String]",T="[object Symbol]",P="[object WeakMap]",H="[object ArrayBuffer]",re="[object DataView]",B="[object Float32Array]",Q="[object Float64Array]",G="[object Int8Array]",ue="[object Int16Array]",_="[object Int32Array]",Y="[object Uint8Array]",z="[object Uint8ClampedArray]",J="[object Uint16Array]",X="[object Uint32Array]",$=/[\\^$.*+?()[\]{}|]/g,I=/\w*$/,A=/^\[object .+?Constructor\]$/,W=/^(?:0|[1-9]\d*)$/,Z={};Z[l]=Z[d]=Z[H]=Z[re]=Z[u]=Z[h]=Z[B]=Z[Q]=Z[G]=Z[ue]=Z[_]=Z[g]=Z[j]=Z[N]=Z[k]=Z[E]=Z[S]=Z[T]=Z[Y]=Z[z]=Z[J]=Z[X]=!0,Z[f]=Z[v]=Z[P]=!1;var q=typeof Ei=="object"&&Ei&&Ei.Object===Object&&Ei,ne=typeof self=="object"&&self&&self.Object===Object&&self,K=q||ne||Function("return this")(),U=t&&!t.nodeType&&t,M=U&&!0&&s&&!s.nodeType&&s,F=M&&M.exports===U;function ie(C,O){return C.set(O[0],O[1]),C}function fe(C,O){return C.add(O),C}function Ee(C,O){for(var ee=-1,ve=C?C.length:0;++ee<ve&&O(C[ee],ee,C)!==!1;);return C}function Ne(C,O){for(var ee=-1,ve=O.length,dt=C.length;++ee<ve;)C[dt+ee]=O[ee];return C}function Pe(C,O,ee,ve){for(var dt=-1,Ze=C?C.length:0;++dt<Ze;)ee=O(ee,C[dt],dt,C);return ee}function $e(C,O){for(var ee=-1,ve=Array(C);++ee<C;)ve[ee]=O(ee);return ve}function Ue(C,O){return C?.[O]}function et(C){var O=!1;if(C!=null&&typeof C.toString!="function")try{O=!!(C+"")}catch{}return O}function ct(C){var O=-1,ee=Array(C.size);return C.forEach(function(ve,dt){ee[++O]=[dt,ve]}),ee}function Bt(C,O){return function(ee){return C(O(ee))}}function Yt(C){var O=-1,ee=Array(C.size);return C.forEach(function(ve){ee[++O]=ve}),ee}var ps=Array.prototype,ks=Function.prototype,cs=Object.prototype,xs=K["__core-js_shared__"],Et=(function(){var C=/[^.]+$/.exec(xs&&xs.keys&&xs.keys.IE_PROTO||"");return C?"Symbol(src)_1."+C:""})(),Lt=ks.toString,wt=cs.hasOwnProperty,me=cs.toString,Le=RegExp("^"+Lt.call(wt).replace($,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nt=F?K.Buffer:void 0,St=K.Symbol,Xt=K.Uint8Array,Ft=Bt(Object.getPrototypeOf,Object),D=Object.create,ge=cs.propertyIsEnumerable,Ge=ps.splice,Nt=Object.getOwnPropertySymbols,rt=nt?nt.isBuffer:void 0,Pt=Bt(Object.keys,Object),Us=ft(K,"DataView"),Qs=ft(K,"Map"),Is=ft(K,"Promise"),Ys=ft(K,"Set"),Os=ft(K,"WeakMap"),Bs=ft(Object,"create"),Hs=ds(Us),An=ds(Qs),le=ds(Is),Qe=ds(Ys),Rt=ds(Os),As=St?St.prototype:void 0,ir=As?As.valueOf:void 0;function Ls(C){var O=-1,ee=C?C.length:0;for(this.clear();++O<ee;){var ve=C[O];this.set(ve[0],ve[1])}}function ra(){this.__data__=Bs?Bs(null):{}}function or(C){return this.has(C)&&delete this.__data__[C]}function Ki(C){var O=this.__data__;if(Bs){var ee=O[C];return ee===r?void 0:ee}return wt.call(O,C)?O[C]:void 0}function Cs(C){var O=this.__data__;return Bs?O[C]!==void 0:wt.call(O,C)}function Ks(C,O){var ee=this.__data__;return ee[C]=Bs&&O===void 0?r:O,this}Ls.prototype.clear=ra,Ls.prototype.delete=or,Ls.prototype.get=Ki,Ls.prototype.has=Cs,Ls.prototype.set=Ks;function ts(C){var O=-1,ee=C?C.length:0;for(this.clear();++O<ee;){var ve=C[O];this.set(ve[0],ve[1])}}function aa(){this.__data__=[]}function Sa(C){var O=this.__data__,ee=lr(O,C);if(ee<0)return!1;var ve=O.length-1;return ee==ve?O.pop():Ge.call(O,ee,1),!0}function Ja(C){var O=this.__data__,ee=lr(O,C);return ee<0?void 0:O[ee][1]}function pn(C){return lr(this.__data__,C)>-1}function Pn(C,O){var ee=this.__data__,ve=lr(ee,C);return ve<0?ee.push([C,O]):ee[ve][1]=O,this}ts.prototype.clear=aa,ts.prototype.delete=Sa,ts.prototype.get=Ja,ts.prototype.has=pn,ts.prototype.set=Pn;function bs(C){var O=-1,ee=C?C.length:0;for(this.clear();++O<ee;){var ve=C[O];this.set(ve[0],ve[1])}}function Ea(){this.__data__={hash:new Ls,map:new(Qs||ts),string:new Ls}}function ei(C){return Tr(this,C).delete(C)}function ti(C){return Tr(this,C).get(C)}function Ye(C){return Tr(this,C).has(C)}function se(C,O){return Tr(this,C).set(C,O),this}bs.prototype.clear=Ea,bs.prototype.delete=ei,bs.prototype.get=ti,bs.prototype.has=Ye,bs.prototype.set=se;function ke(C){this.__data__=new ts(C)}function Be(){this.__data__=new ts}function Ut(C){return this.__data__.delete(C)}function ht(C){return this.__data__.get(C)}function Zt(C){return this.__data__.has(C)}function js(C,O){var ee=this.__data__;if(ee instanceof ts){var ve=ee.__data__;if(!Qs||ve.length<n-1)return ve.push([C,O]),this;ee=this.__data__=new bs(ve)}return ee.set(C,O),this}ke.prototype.clear=Be,ke.prototype.delete=Ut,ke.prototype.get=ht,ke.prototype.has=Zt,ke.prototype.set=js;function Ms(C,O){var ee=Rn(C)||mr(C)?$e(C.length,String):[],ve=ee.length,dt=!!ve;for(var Ze in C)wt.call(C,Ze)&&!(dt&&(Ze=="length"||Ko(Ze,ve)))&&ee.push(Ze);return ee}function on(C,O,ee){var ve=C[O];(!(wt.call(C,O)&&la(ve,ee))||ee===void 0&&!(O in C))&&(C[O]=ee)}function lr(C,O){for(var ee=C.length;ee--;)if(la(C[ee][0],O))return ee;return-1}function zt(C,O){return C&&Aa(O,Zi(O),C)}function Kn(C,O,ee,ve,dt,Ze,kt){var Ct;if(ve&&(Ct=Ze?ve(C,dt,Ze,kt):ve(C)),Ct!==void 0)return Ct;if(!gn(C))return C;var Ht=Rn(C);if(Ht){if(Ct=Vi(C),!O)return Bo(C,Ct)}else{var Tt=ur(C),Ss=Tt==v||Tt==x;if(ca(C))return si(C,O);if(Tt==N||Tt==l||Ss&&!Ze){if(et(C))return Ze?C:{};if(Ct=Wn(Ss?{}:C),!O)return Pa(C,zt(Ct,C))}else{if(!Z[Tt])return Ze?C:{};Ct=Ho(C,Tt,Kn,O)}}kt||(kt=new ke);var Zs=kt.get(C);if(Zs)return Zs;if(kt.set(C,Ct),!Ht)var us=ee?oc(C):Zi(C);return Ee(us||C,function(Es,Ps){us&&(Ps=Es,Es=C[Ps]),on(Ct,Ps,Kn(Es,O,ee,ve,Ps,C,kt))}),Ct}function Xs(C){return gn(C)?D(C):{}}function sc(C,O,ee){var ve=O(C);return Rn(C)?ve:Ne(ve,ee(C))}function xn(C){return me.call(C)}function nc(C){if(!gn(C)||ni(C))return!1;var O=Qi(C)||et(C)?Le:A;return O.test(ds(C))}function rc(C){if(!Vn(C))return Pt(C);var O=[];for(var ee in Object(C))wt.call(C,ee)&&ee!="constructor"&&O.push(ee);return O}function si(C,O){if(O)return C.slice();var ee=new C.constructor(C.length);return C.copy(ee),ee}function ia(C){var O=new C.constructor(C.byteLength);return new Xt(O).set(new Xt(C)),O}function cr(C,O){var ee=O?ia(C.buffer):C.buffer;return new C.constructor(ee,C.byteOffset,C.byteLength)}function oa(C,O,ee){var ve=O?ee(ct(C),!0):ct(C);return Pe(ve,ie,new C.constructor)}function Ta(C){var O=new C.constructor(C.source,I.exec(C));return O.lastIndex=C.lastIndex,O}function ac(C,O,ee){var ve=O?ee(Yt(C),!0):Yt(C);return Pe(ve,fe,new C.constructor)}function ic(C){return ir?Object(ir.call(C)):{}}function Wi(C,O){var ee=O?ia(C.buffer):C.buffer;return new C.constructor(ee,C.byteOffset,C.length)}function Bo(C,O){var ee=-1,ve=C.length;for(O||(O=Array(ve));++ee<ve;)O[ee]=C[ee];return O}function Aa(C,O,ee,ve){ee||(ee={});for(var dt=-1,Ze=O.length;++dt<Ze;){var kt=O[dt],Ct=void 0;on(ee,kt,Ct===void 0?C[kt]:Ct)}return ee}function Pa(C,O){return Aa(C,dr(C),O)}function oc(C){return sc(C,Zi,dr)}function Tr(C,O){var ee=C.__data__;return Gi(O)?ee[typeof O=="string"?"string":"hash"]:ee.map}function ft(C,O){var ee=Ue(C,O);return nc(ee)?ee:void 0}var dr=Nt?Bt(Nt,Object):Ra,ur=xn;(Us&&ur(new Us(new ArrayBuffer(1)))!=re||Qs&&ur(new Qs)!=g||Is&&ur(Is.resolve())!=b||Ys&&ur(new Ys)!=E||Os&&ur(new Os)!=P)&&(ur=function(C){var O=me.call(C),ee=O==N?C.constructor:void 0,ve=ee?ds(ee):void 0;if(ve)switch(ve){case Hs:return re;case An:return g;case le:return b;case Qe:return E;case Rt:return P}return O});function Vi(C){var O=C.length,ee=C.constructor(O);return O&&typeof C[0]=="string"&&wt.call(C,"index")&&(ee.index=C.index,ee.input=C.input),ee}function Wn(C){return typeof C.constructor=="function"&&!Vn(C)?Xs(Ft(C)):{}}function Ho(C,O,ee,ve){var dt=C.constructor;switch(O){case H:return ia(C);case u:case h:return new dt(+C);case re:return cr(C,ve);case B:case Q:case G:case ue:case _:case Y:case z:case J:case X:return Wi(C,ve);case g:return oa(C,ve,ee);case j:case S:return new dt(C);case k:return Ta(C);case E:return ac(C,ve,ee);case T:return ic(C)}}function Ko(C,O){return O=O??o,!!O&&(typeof C=="number"||W.test(C))&&C>-1&&C%1==0&&C<O}function Gi(C){var O=typeof C;return O=="string"||O=="number"||O=="symbol"||O=="boolean"?C!=="__proto__":C===null}function ni(C){return!!Et&&Et in C}function Vn(C){var O=C&&C.constructor,ee=typeof O=="function"&&O.prototype||cs;return C===ee}function ds(C){if(C!=null){try{return Lt.call(C)}catch{}try{return C+""}catch{}}return""}function Gn(C){return Kn(C,!0,!0)}function la(C,O){return C===O||C!==C&&O!==O}function mr(C){return Wo(C)&&wt.call(C,"callee")&&(!ge.call(C,"callee")||me.call(C)==l)}var Rn=Array.isArray;function ri(C){return C!=null&&Yi(C.length)&&!Qi(C)}function Wo(C){return Xi(C)&&ri(C)}var ca=rt||_a;function Qi(C){var O=gn(C)?me.call(C):"";return O==v||O==x}function Yi(C){return typeof C=="number"&&C>-1&&C%1==0&&C<=o}function gn(C){var O=typeof C;return!!C&&(O=="object"||O=="function")}function Xi(C){return!!C&&typeof C=="object"}function Zi(C){return ri(C)?Ms(C):rc(C)}function Ra(){return[]}function _a(){return!1}s.exports=Gn})(Wc,Wc.exports)),Wc.exports}var Vc={exports:{}};Vc.exports;var U1;function f5(){return U1||(U1=1,(function(s,t){var n=200,r="__lodash_hash_undefined__",o=1,l=2,d=9007199254740991,u="[object Arguments]",h="[object Array]",f="[object AsyncFunction]",v="[object Boolean]",x="[object Date]",g="[object Error]",j="[object Function]",N="[object GeneratorFunction]",b="[object Map]",k="[object Number]",E="[object Null]",S="[object Object]",T="[object Promise]",P="[object Proxy]",H="[object RegExp]",re="[object Set]",B="[object String]",Q="[object Symbol]",G="[object Undefined]",ue="[object WeakMap]",_="[object ArrayBuffer]",Y="[object DataView]",z="[object Float32Array]",J="[object Float64Array]",X="[object Int8Array]",$="[object Int16Array]",I="[object Int32Array]",A="[object Uint8Array]",W="[object Uint8ClampedArray]",Z="[object Uint16Array]",q="[object Uint32Array]",ne=/[\\^$.*+?()[\]{}|]/g,K=/^\[object .+?Constructor\]$/,U=/^(?:0|[1-9]\d*)$/,M={};M[z]=M[J]=M[X]=M[$]=M[I]=M[A]=M[W]=M[Z]=M[q]=!0,M[u]=M[h]=M[_]=M[v]=M[Y]=M[x]=M[g]=M[j]=M[b]=M[k]=M[S]=M[H]=M[re]=M[B]=M[ue]=!1;var F=typeof Ei=="object"&&Ei&&Ei.Object===Object&&Ei,ie=typeof self=="object"&&self&&self.Object===Object&&self,fe=F||ie||Function("return this")(),Ee=t&&!t.nodeType&&t,Ne=Ee&&!0&&s&&!s.nodeType&&s,Pe=Ne&&Ne.exports===Ee,$e=Pe&&F.process,Ue=(function(){try{return $e&&$e.binding&&$e.binding("util")}catch{}})(),et=Ue&&Ue.isTypedArray;function ct(C,O){for(var ee=-1,ve=C==null?0:C.length,dt=0,Ze=[];++ee<ve;){var kt=C[ee];O(kt,ee,C)&&(Ze[dt++]=kt)}return Ze}function Bt(C,O){for(var ee=-1,ve=O.length,dt=C.length;++ee<ve;)C[dt+ee]=O[ee];return C}function Yt(C,O){for(var ee=-1,ve=C==null?0:C.length;++ee<ve;)if(O(C[ee],ee,C))return!0;return!1}function ps(C,O){for(var ee=-1,ve=Array(C);++ee<C;)ve[ee]=O(ee);return ve}function ks(C){return function(O){return C(O)}}function cs(C,O){return C.has(O)}function xs(C,O){return C?.[O]}function Et(C){var O=-1,ee=Array(C.size);return C.forEach(function(ve,dt){ee[++O]=[dt,ve]}),ee}function Lt(C,O){return function(ee){return C(O(ee))}}function wt(C){var O=-1,ee=Array(C.size);return C.forEach(function(ve){ee[++O]=ve}),ee}var me=Array.prototype,Le=Function.prototype,nt=Object.prototype,St=fe["__core-js_shared__"],Xt=Le.toString,Ft=nt.hasOwnProperty,D=(function(){var C=/[^.]+$/.exec(St&&St.keys&&St.keys.IE_PROTO||"");return C?"Symbol(src)_1."+C:""})(),ge=nt.toString,Ge=RegExp("^"+Xt.call(Ft).replace(ne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Nt=Pe?fe.Buffer:void 0,rt=fe.Symbol,Pt=fe.Uint8Array,Us=nt.propertyIsEnumerable,Qs=me.splice,Is=rt?rt.toStringTag:void 0,Ys=Object.getOwnPropertySymbols,Os=Nt?Nt.isBuffer:void 0,Bs=Lt(Object.keys,Object),Hs=dr(fe,"DataView"),An=dr(fe,"Map"),le=dr(fe,"Promise"),Qe=dr(fe,"Set"),Rt=dr(fe,"WeakMap"),As=dr(Object,"create"),ir=ds(Hs),Ls=ds(An),ra=ds(le),or=ds(Qe),Ki=ds(Rt),Cs=rt?rt.prototype:void 0,Ks=Cs?Cs.valueOf:void 0;function ts(C){var O=-1,ee=C==null?0:C.length;for(this.clear();++O<ee;){var ve=C[O];this.set(ve[0],ve[1])}}function aa(){this.__data__=As?As(null):{},this.size=0}function Sa(C){var O=this.has(C)&&delete this.__data__[C];return this.size-=O?1:0,O}function Ja(C){var O=this.__data__;if(As){var ee=O[C];return ee===r?void 0:ee}return Ft.call(O,C)?O[C]:void 0}function pn(C){var O=this.__data__;return As?O[C]!==void 0:Ft.call(O,C)}function Pn(C,O){var ee=this.__data__;return this.size+=this.has(C)?0:1,ee[C]=As&&O===void 0?r:O,this}ts.prototype.clear=aa,ts.prototype.delete=Sa,ts.prototype.get=Ja,ts.prototype.has=pn,ts.prototype.set=Pn;function bs(C){var O=-1,ee=C==null?0:C.length;for(this.clear();++O<ee;){var ve=C[O];this.set(ve[0],ve[1])}}function Ea(){this.__data__=[],this.size=0}function ei(C){var O=this.__data__,ee=si(O,C);if(ee<0)return!1;var ve=O.length-1;return ee==ve?O.pop():Qs.call(O,ee,1),--this.size,!0}function ti(C){var O=this.__data__,ee=si(O,C);return ee<0?void 0:O[ee][1]}function Ye(C){return si(this.__data__,C)>-1}function se(C,O){var ee=this.__data__,ve=si(ee,C);return ve<0?(++this.size,ee.push([C,O])):ee[ve][1]=O,this}bs.prototype.clear=Ea,bs.prototype.delete=ei,bs.prototype.get=ti,bs.prototype.has=Ye,bs.prototype.set=se;function ke(C){var O=-1,ee=C==null?0:C.length;for(this.clear();++O<ee;){var ve=C[O];this.set(ve[0],ve[1])}}function Be(){this.size=0,this.__data__={hash:new ts,map:new(An||bs),string:new ts}}function Ut(C){var O=ft(this,C).delete(C);return this.size-=O?1:0,O}function ht(C){return ft(this,C).get(C)}function Zt(C){return ft(this,C).has(C)}function js(C,O){var ee=ft(this,C),ve=ee.size;return ee.set(C,O),this.size+=ee.size==ve?0:1,this}ke.prototype.clear=Be,ke.prototype.delete=Ut,ke.prototype.get=ht,ke.prototype.has=Zt,ke.prototype.set=js;function Ms(C){var O=-1,ee=C==null?0:C.length;for(this.__data__=new ke;++O<ee;)this.add(C[O])}function on(C){return this.__data__.set(C,r),this}function lr(C){return this.__data__.has(C)}Ms.prototype.add=Ms.prototype.push=on,Ms.prototype.has=lr;function zt(C){var O=this.__data__=new bs(C);this.size=O.size}function Kn(){this.__data__=new bs,this.size=0}function Xs(C){var O=this.__data__,ee=O.delete(C);return this.size=O.size,ee}function sc(C){return this.__data__.get(C)}function xn(C){return this.__data__.has(C)}function nc(C,O){var ee=this.__data__;if(ee instanceof bs){var ve=ee.__data__;if(!An||ve.length<n-1)return ve.push([C,O]),this.size=++ee.size,this;ee=this.__data__=new ke(ve)}return ee.set(C,O),this.size=ee.size,this}zt.prototype.clear=Kn,zt.prototype.delete=Xs,zt.prototype.get=sc,zt.prototype.has=xn,zt.prototype.set=nc;function rc(C,O){var ee=mr(C),ve=!ee&&la(C),dt=!ee&&!ve&&ri(C),Ze=!ee&&!ve&&!dt&&Xi(C),kt=ee||ve||dt||Ze,Ct=kt?ps(C.length,String):[],Ht=Ct.length;for(var Tt in C)Ft.call(C,Tt)&&!(kt&&(Tt=="length"||dt&&(Tt=="offset"||Tt=="parent")||Ze&&(Tt=="buffer"||Tt=="byteLength"||Tt=="byteOffset")||Ho(Tt,Ht)))&&Ct.push(Tt);return Ct}function si(C,O){for(var ee=C.length;ee--;)if(Gn(C[ee][0],O))return ee;return-1}function ia(C,O,ee){var ve=O(C);return mr(C)?ve:Bt(ve,ee(C))}function cr(C){return C==null?C===void 0?G:E:Is&&Is in Object(C)?ur(C):Vn(C)}function oa(C){return gn(C)&&cr(C)==u}function Ta(C,O,ee,ve,dt){return C===O?!0:C==null||O==null||!gn(C)&&!gn(O)?C!==C&&O!==O:ac(C,O,ee,ve,Ta,dt)}function ac(C,O,ee,ve,dt,Ze){var kt=mr(C),Ct=mr(O),Ht=kt?h:Wn(C),Tt=Ct?h:Wn(O);Ht=Ht==u?S:Ht,Tt=Tt==u?S:Tt;var Ss=Ht==S,Zs=Tt==S,us=Ht==Tt;if(us&&ri(C)){if(!ri(O))return!1;kt=!0,Ss=!1}if(us&&!Ss)return Ze||(Ze=new zt),kt||Xi(C)?Aa(C,O,ee,ve,dt,Ze):Pa(C,O,Ht,ee,ve,dt,Ze);if(!(ee&o)){var Es=Ss&&Ft.call(C,"__wrapped__"),Ps=Zs&&Ft.call(O,"__wrapped__");if(Es||Ps){var ws=Es?C.value():C,ln=Ps?O.value():O;return Ze||(Ze=new zt),dt(ws,ln,ee,ve,Ze)}}return us?(Ze||(Ze=new zt),oc(C,O,ee,ve,dt,Ze)):!1}function ic(C){if(!Yi(C)||Gi(C))return!1;var O=ca(C)?Ge:K;return O.test(ds(C))}function Wi(C){return gn(C)&&Qi(C.length)&&!!M[cr(C)]}function Bo(C){if(!ni(C))return Bs(C);var O=[];for(var ee in Object(C))Ft.call(C,ee)&&ee!="constructor"&&O.push(ee);return O}function Aa(C,O,ee,ve,dt,Ze){var kt=ee&o,Ct=C.length,Ht=O.length;if(Ct!=Ht&&!(kt&&Ht>Ct))return!1;var Tt=Ze.get(C);if(Tt&&Ze.get(O))return Tt==O;var Ss=-1,Zs=!0,us=ee&l?new Ms:void 0;for(Ze.set(C,O),Ze.set(O,C);++Ss<Ct;){var Es=C[Ss],Ps=O[Ss];if(ve)var ws=kt?ve(Ps,Es,Ss,O,C,Ze):ve(Es,Ps,Ss,C,O,Ze);if(ws!==void 0){if(ws)continue;Zs=!1;break}if(us){if(!Yt(O,function(ln,Ar){if(!cs(us,Ar)&&(Es===ln||dt(Es,ln,ee,ve,Ze)))return us.push(Ar)})){Zs=!1;break}}else if(!(Es===Ps||dt(Es,Ps,ee,ve,Ze))){Zs=!1;break}}return Ze.delete(C),Ze.delete(O),Zs}function Pa(C,O,ee,ve,dt,Ze,kt){switch(ee){case Y:if(C.byteLength!=O.byteLength||C.byteOffset!=O.byteOffset)return!1;C=C.buffer,O=O.buffer;case _:return!(C.byteLength!=O.byteLength||!Ze(new Pt(C),new Pt(O)));case v:case x:case k:return Gn(+C,+O);case g:return C.name==O.name&&C.message==O.message;case H:case B:return C==O+"";case b:var Ct=Et;case re:var Ht=ve&o;if(Ct||(Ct=wt),C.size!=O.size&&!Ht)return!1;var Tt=kt.get(C);if(Tt)return Tt==O;ve|=l,kt.set(C,O);var Ss=Aa(Ct(C),Ct(O),ve,dt,Ze,kt);return kt.delete(C),Ss;case Q:if(Ks)return Ks.call(C)==Ks.call(O)}return!1}function oc(C,O,ee,ve,dt,Ze){var kt=ee&o,Ct=Tr(C),Ht=Ct.length,Tt=Tr(O),Ss=Tt.length;if(Ht!=Ss&&!kt)return!1;for(var Zs=Ht;Zs--;){var us=Ct[Zs];if(!(kt?us in O:Ft.call(O,us)))return!1}var Es=Ze.get(C);if(Es&&Ze.get(O))return Es==O;var Ps=!0;Ze.set(C,O),Ze.set(O,C);for(var ws=kt;++Zs<Ht;){us=Ct[Zs];var ln=C[us],Ar=O[us];if(ve)var ai=kt?ve(Ar,ln,us,O,C,Ze):ve(ln,Ar,us,C,O,Ze);if(!(ai===void 0?ln===Ar||dt(ln,Ar,ee,ve,Ze):ai)){Ps=!1;break}ws||(ws=us=="constructor")}if(Ps&&!ws){var Vo=C.constructor,ii=O.constructor;Vo!=ii&&"constructor"in C&&"constructor"in O&&!(typeof Vo=="function"&&Vo instanceof Vo&&typeof ii=="function"&&ii instanceof ii)&&(Ps=!1)}return Ze.delete(C),Ze.delete(O),Ps}function Tr(C){return ia(C,Zi,Vi)}function ft(C,O){var ee=C.__data__;return Ko(O)?ee[typeof O=="string"?"string":"hash"]:ee.map}function dr(C,O){var ee=xs(C,O);return ic(ee)?ee:void 0}function ur(C){var O=Ft.call(C,Is),ee=C[Is];try{C[Is]=void 0;var ve=!0}catch{}var dt=ge.call(C);return ve&&(O?C[Is]=ee:delete C[Is]),dt}var Vi=Ys?function(C){return C==null?[]:(C=Object(C),ct(Ys(C),function(O){return Us.call(C,O)}))}:Ra,Wn=cr;(Hs&&Wn(new Hs(new ArrayBuffer(1)))!=Y||An&&Wn(new An)!=b||le&&Wn(le.resolve())!=T||Qe&&Wn(new Qe)!=re||Rt&&Wn(new Rt)!=ue)&&(Wn=function(C){var O=cr(C),ee=O==S?C.constructor:void 0,ve=ee?ds(ee):"";if(ve)switch(ve){case ir:return Y;case Ls:return b;case ra:return T;case or:return re;case Ki:return ue}return O});function Ho(C,O){return O=O??d,!!O&&(typeof C=="number"||U.test(C))&&C>-1&&C%1==0&&C<O}function Ko(C){var O=typeof C;return O=="string"||O=="number"||O=="symbol"||O=="boolean"?C!=="__proto__":C===null}function Gi(C){return!!D&&D in C}function ni(C){var O=C&&C.constructor,ee=typeof O=="function"&&O.prototype||nt;return C===ee}function Vn(C){return ge.call(C)}function ds(C){if(C!=null){try{return Xt.call(C)}catch{}try{return C+""}catch{}}return""}function Gn(C,O){return C===O||C!==C&&O!==O}var la=oa((function(){return arguments})())?oa:function(C){return gn(C)&&Ft.call(C,"callee")&&!Us.call(C,"callee")},mr=Array.isArray;function Rn(C){return C!=null&&Qi(C.length)&&!ca(C)}var ri=Os||_a;function Wo(C,O){return Ta(C,O)}function ca(C){if(!Yi(C))return!1;var O=cr(C);return O==j||O==N||O==f||O==P}function Qi(C){return typeof C=="number"&&C>-1&&C%1==0&&C<=d}function Yi(C){var O=typeof C;return C!=null&&(O=="object"||O=="function")}function gn(C){return C!=null&&typeof C=="object"}var Xi=et?ks(et):Wi;function Zi(C){return Rn(C)?rc(C):Bo(C)}function Ra(){return[]}function _a(){return!1}s.exports=Wo})(Vc,Vc.exports)),Vc.exports}var zu={},B1;function ZD(){if(B1)return zu;B1=1,Object.defineProperty(zu,"__esModule",{value:!0});const s=h5(),t=f5();var n;return(function(r){function o(h={},f={},v=!1){typeof h!="object"&&(h={}),typeof f!="object"&&(f={});let x=s(f);v||(x=Object.keys(x).reduce((g,j)=>(x[j]!=null&&(g[j]=x[j]),g),{}));for(const g in h)h[g]!==void 0&&f[g]===void 0&&(x[g]=h[g]);return Object.keys(x).length>0?x:void 0}r.compose=o;function l(h={},f={}){typeof h!="object"&&(h={}),typeof f!="object"&&(f={});const v=Object.keys(h).concat(Object.keys(f)).reduce((x,g)=>(t(h[g],f[g])||(x[g]=f[g]===void 0?null:f[g]),x),{});return Object.keys(v).length>0?v:void 0}r.diff=l;function d(h={},f={}){h=h||{};const v=Object.keys(f).reduce((x,g)=>(f[g]!==h[g]&&h[g]!==void 0&&(x[g]=f[g]),x),{});return Object.keys(h).reduce((x,g)=>(h[g]!==f[g]&&f[g]===void 0&&(x[g]=null),x),v)}r.invert=d;function u(h,f,v=!1){if(typeof h!="object")return f;if(typeof f!="object")return;if(!v)return f;const x=Object.keys(f).reduce((g,j)=>(h[j]===void 0&&(g[j]=f[j]),g),{});return Object.keys(x).length>0?x:void 0}r.transform=u})(n||(n={})),zu.default=n,zu}var Uu={},H1;function p5(){if(H1)return Uu;H1=1,Object.defineProperty(Uu,"__esModule",{value:!0});var s;return(function(t){function n(r){return typeof r.delete=="number"?r.delete:typeof r.retain=="number"?r.retain:typeof r.retain=="object"&&r.retain!==null?1:typeof r.insert=="string"?r.insert.length:1}t.length=n})(s||(s={})),Uu.default=s,Uu}var Bu={},K1;function JD(){if(K1)return Bu;K1=1,Object.defineProperty(Bu,"__esModule",{value:!0});const s=p5();class t{constructor(r){this.ops=r,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(r){r||(r=1/0);const o=this.ops[this.index];if(o){const l=this.offset,d=s.default.length(o);if(r>=d-l?(r=d-l,this.index+=1,this.offset=0):this.offset+=r,typeof o.delete=="number")return{delete:r};{const u={};return o.attributes&&(u.attributes=o.attributes),typeof o.retain=="number"?u.retain=r:typeof o.retain=="object"&&o.retain!==null?u.retain=o.retain:typeof o.insert=="string"?u.insert=o.insert.substr(l,r):u.insert=o.insert,u}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?s.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const r=this.ops[this.index];return r?typeof r.delete=="number"?"delete":typeof r.retain=="number"||typeof r.retain=="object"&&r.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const r=this.offset,o=this.index,l=this.next(),d=this.ops.slice(this.index);return this.offset=r,this.index=o,[l].concat(d)}}else return[]}}return Bu.default=t,Bu}var W1;function e7(){return W1||(W1=1,(function(s,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeMap=t.OpIterator=t.Op=void 0;const n=XD(),r=h5(),o=f5(),l=ZD();t.AttributeMap=l.default;const d=p5();t.Op=d.default;const u=JD();t.OpIterator=u.default;const h="\0",f=(x,g)=>{if(typeof x!="object"||x===null)throw new Error(`cannot retain a ${typeof x}`);if(typeof g!="object"||g===null)throw new Error(`cannot retain a ${typeof g}`);const j=Object.keys(x)[0];if(!j||j!==Object.keys(g)[0])throw new Error(`embed types not matched: ${j} != ${Object.keys(g)[0]}`);return[j,x[j],g[j]]};class v{constructor(g){Array.isArray(g)?this.ops=g:g!=null&&Array.isArray(g.ops)?this.ops=g.ops:this.ops=[]}static registerEmbed(g,j){this.handlers[g]=j}static unregisterEmbed(g){delete this.handlers[g]}static getHandler(g){const j=this.handlers[g];if(!j)throw new Error(`no handlers for embed type "${g}"`);return j}insert(g,j){const N={};return typeof g=="string"&&g.length===0?this:(N.insert=g,j!=null&&typeof j=="object"&&Object.keys(j).length>0&&(N.attributes=j),this.push(N))}delete(g){return g<=0?this:this.push({delete:g})}retain(g,j){if(typeof g=="number"&&g<=0)return this;const N={retain:g};return j!=null&&typeof j=="object"&&Object.keys(j).length>0&&(N.attributes=j),this.push(N)}push(g){let j=this.ops.length,N=this.ops[j-1];if(g=r(g),typeof N=="object"){if(typeof g.delete=="number"&&typeof N.delete=="number")return this.ops[j-1]={delete:N.delete+g.delete},this;if(typeof N.delete=="number"&&g.insert!=null&&(j-=1,N=this.ops[j-1],typeof N!="object"))return this.ops.unshift(g),this;if(o(g.attributes,N.attributes)){if(typeof g.insert=="string"&&typeof N.insert=="string")return this.ops[j-1]={insert:N.insert+g.insert},typeof g.attributes=="object"&&(this.ops[j-1].attributes=g.attributes),this;if(typeof g.retain=="number"&&typeof N.retain=="number")return this.ops[j-1]={retain:N.retain+g.retain},typeof g.attributes=="object"&&(this.ops[j-1].attributes=g.attributes),this}}return j===this.ops.length?this.ops.push(g):this.ops.splice(j,0,g),this}chop(){const g=this.ops[this.ops.length-1];return g&&typeof g.retain=="number"&&!g.attributes&&this.ops.pop(),this}filter(g){return this.ops.filter(g)}forEach(g){this.ops.forEach(g)}map(g){return this.ops.map(g)}partition(g){const j=[],N=[];return this.forEach(b=>{(g(b)?j:N).push(b)}),[j,N]}reduce(g,j){return this.ops.reduce(g,j)}changeLength(){return this.reduce((g,j)=>j.insert?g+d.default.length(j):j.delete?g-j.delete:g,0)}length(){return this.reduce((g,j)=>g+d.default.length(j),0)}slice(g=0,j=1/0){const N=[],b=new u.default(this.ops);let k=0;for(;k<j&&b.hasNext();){let E;k<g?E=b.next(g-k):(E=b.next(j-k),N.push(E)),k+=d.default.length(E)}return new v(N)}compose(g){const j=new u.default(this.ops),N=new u.default(g.ops),b=[],k=N.peek();if(k!=null&&typeof k.retain=="number"&&k.attributes==null){let S=k.retain;for(;j.peekType()==="insert"&&j.peekLength()<=S;)S-=j.peekLength(),b.push(j.next());k.retain-S>0&&N.next(k.retain-S)}const E=new v(b);for(;j.hasNext()||N.hasNext();)if(N.peekType()==="insert")E.push(N.next());else if(j.peekType()==="delete")E.push(j.next());else{const S=Math.min(j.peekLength(),N.peekLength()),T=j.next(S),P=N.next(S);if(P.retain){const H={};if(typeof T.retain=="number")H.retain=typeof P.retain=="number"?S:P.retain;else if(typeof P.retain=="number")T.retain==null?H.insert=T.insert:H.retain=T.retain;else{const B=T.retain==null?"insert":"retain",[Q,G,ue]=f(T[B],P.retain),_=v.getHandler(Q);H[B]={[Q]:_.compose(G,ue,B==="retain")}}const re=l.default.compose(T.attributes,P.attributes,typeof T.retain=="number");if(re&&(H.attributes=re),E.push(H),!N.hasNext()&&o(E.ops[E.ops.length-1],H)){const B=new v(j.rest());return E.concat(B).chop()}}else typeof P.delete=="number"&&(typeof T.retain=="number"||typeof T.retain=="object"&&T.retain!==null)&&E.push(P)}return E.chop()}concat(g){const j=new v(this.ops.slice());return g.ops.length>0&&(j.push(g.ops[0]),j.ops=j.ops.concat(g.ops.slice(1))),j}diff(g,j){if(this.ops===g.ops)return new v;const N=[this,g].map(T=>T.map(P=>{if(P.insert!=null)return typeof P.insert=="string"?P.insert:h;const H=T===g?"on":"with";throw new Error("diff() called "+H+" non-document")}).join("")),b=new v,k=n(N[0],N[1],j,!0),E=new u.default(this.ops),S=new u.default(g.ops);return k.forEach(T=>{let P=T[1].length;for(;P>0;){let H=0;switch(T[0]){case n.INSERT:H=Math.min(S.peekLength(),P),b.push(S.next(H));break;case n.DELETE:H=Math.min(P,E.peekLength()),E.next(H),b.delete(H);break;case n.EQUAL:H=Math.min(E.peekLength(),S.peekLength(),P);const re=E.next(H),B=S.next(H);o(re.insert,B.insert)?b.retain(H,l.default.diff(re.attributes,B.attributes)):b.push(B).delete(H);break}P-=H}}),b.chop()}eachLine(g,j=`
`){const N=new u.default(this.ops);let b=new v,k=0;for(;N.hasNext();){if(N.peekType()!=="insert")return;const E=N.peek(),S=d.default.length(E)-N.peekLength(),T=typeof E.insert=="string"?E.insert.indexOf(j,S)-S:-1;if(T<0)b.push(N.next());else if(T>0)b.push(N.next(T));else{if(g(b,N.next(1).attributes||{},k)===!1)return;k+=1,b=new v}}b.length()>0&&g(b,{},k)}invert(g){const j=new v;return this.reduce((N,b)=>{if(b.insert)j.delete(d.default.length(b));else{if(typeof b.retain=="number"&&b.attributes==null)return j.retain(b.retain),N+b.retain;if(b.delete||typeof b.retain=="number"){const k=b.delete||b.retain;return g.slice(N,N+k).forEach(S=>{b.delete?j.push(S):b.retain&&b.attributes&&j.retain(d.default.length(S),l.default.invert(b.attributes,S.attributes))}),N+k}else if(typeof b.retain=="object"&&b.retain!==null){const k=g.slice(N,N+1),E=new u.default(k.ops).next(),[S,T,P]=f(b.retain,E.insert),H=v.getHandler(S);return j.retain({[S]:H.invert(T,P)},l.default.invert(b.attributes,E.attributes)),N+1}}return N},0),j.chop()}transform(g,j=!1){if(j=!!j,typeof g=="number")return this.transformPosition(g,j);const N=g,b=new u.default(this.ops),k=new u.default(N.ops),E=new v;for(;b.hasNext()||k.hasNext();)if(b.peekType()==="insert"&&(j||k.peekType()!=="insert"))E.retain(d.default.length(b.next()));else if(k.peekType()==="insert")E.push(k.next());else{const S=Math.min(b.peekLength(),k.peekLength()),T=b.next(S),P=k.next(S);if(T.delete)continue;if(P.delete)E.push(P);else{const H=T.retain,re=P.retain;let B=typeof re=="object"&&re!==null?re:S;if(typeof H=="object"&&H!==null&&typeof re=="object"&&re!==null){const Q=Object.keys(H)[0];if(Q===Object.keys(re)[0]){const G=v.getHandler(Q);G&&(B={[Q]:G.transform(H[Q],re[Q],j)})}}E.retain(B,l.default.transform(T.attributes,P.attributes,j))}}return E.chop()}transformPosition(g,j=!1){j=!!j;const N=new u.default(this.ops);let b=0;for(;N.hasNext()&&b<=g;){const k=N.peekLength(),E=N.peekType();if(N.next(),E==="delete"){g-=Math.min(k,g-b);continue}else E==="insert"&&(b<g||!j)&&(g+=k);b+=k}return g}}v.Op=d.default,v.OpIterator=u.default,v.AttributeMap=l.default,v.handlers={},t.default=v,s.exports=v,s.exports.default=v})(Fu,Fu.exports)),Fu.exports}var Nr=e7();const Je=yd(Nr);class na extends ar{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}na.blotName="break";na.tagName="BR";let Zr=class extends Rm{};const t7={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function yh(s){return s.replace(/[&<>"']/g,t=>t7[t])}class Nn extends e0{static allowedChildren=[Nn,na,ar,Zr];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(t,n){const r=Nn.order.indexOf(t),o=Nn.order.indexOf(n);return r>=0||o>=0?r-o:t===n?0:t<n?-1:1}formatAt(t,n,r,o){if(Nn.compare(this.statics.blotName,r)<0&&this.scroll.query(r,st.BLOT)){const l=this.isolate(t,n);o&&l.wrap(r,o)}else super.formatAt(t,n,r,o)}optimize(t){if(super.optimize(t),this.parent instanceof Nn&&Nn.compare(this.statics.blotName,this.parent.statics.blotName)>0){const n=this.parent.isolate(this.offset(),this.length());this.moveChildren(n),n.wrap(this)}}}const V1=1;class rn extends fd{cache={};delta(){return this.cache.delta==null&&(this.cache.delta=x5(this)),this.cache.delta}deleteAt(t,n){super.deleteAt(t,n),this.cache={}}formatAt(t,n,r,o){n<=0||(this.scroll.query(r,st.BLOCK)?t+n===this.length()&&this.format(r,o):super.formatAt(t,Math.min(n,this.length()-t-1),r,o),this.cache={})}insertAt(t,n,r){if(r!=null){super.insertAt(t,n,r),this.cache={};return}if(n.length===0)return;const o=n.split(`
`),l=o.shift();l.length>0&&(t<this.length()-1||this.children.tail==null?super.insertAt(Math.min(t,this.length()-1),l):this.children.tail.insertAt(this.children.tail.length(),l),this.cache={});let d=this;o.reduce((u,h)=>(d=d.split(u,!0),d.insertAt(0,h),h.length),t+l.length)}insertBefore(t,n){const{head:r}=this.children;super.insertBefore(t,n),r instanceof na&&r.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+V1),this.cache.length}moveChildren(t,n){super.moveChildren(t,n),this.cache={}}optimize(t){super.optimize(t),this.cache={}}path(t){return super.path(t,!0)}removeChild(t){super.removeChild(t),this.cache={}}split(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(n&&(t===0||t>=this.length()-V1)){const o=this.clone();return t===0?(this.parent.insertBefore(o,this),this):(this.parent.insertBefore(o,this.next),o)}const r=super.split(t,n);return this.cache={},r}}rn.blotName="block";rn.tagName="P";rn.defaultChild=na;rn.allowedChildren=[na,Nn,ar,Zr];class wr extends ar{attach(){super.attach(),this.attributes=new gh(this.domNode)}delta(){return new Je().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(t,n){const r=this.scroll.query(t,st.BLOCK_ATTRIBUTE);r!=null&&this.attributes.attribute(r,n)}formatAt(t,n,r,o){this.format(r,o)}insertAt(t,n,r){if(r!=null){super.insertAt(t,n,r);return}const o=n.split(`
`),l=o.pop(),d=o.map(h=>{const f=this.scroll.create(rn.blotName);return f.insertAt(0,h),f}),u=this.split(t);d.forEach(h=>{this.parent.insertBefore(h,u)}),l&&this.parent.insertBefore(this.scroll.create("text",l),u)}}wr.scope=st.BLOCK_BLOT;function x5(s){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return s.descendants(hn).reduce((n,r)=>r.length()===0?n:n.insert(r.value(),br(r,{},t)),new Je).insert(`
`,br(s))}function br(s){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return s==null||("formats"in s&&typeof s.formats=="function"&&(t={...t,...s.formats()},n&&delete t["code-token"]),s.parent==null||s.parent.statics.blotName==="scroll"||s.parent.statics.scope!==s.statics.scope)?t:br(s.parent,t,n)}class Ur extends ar{static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\uFEFF";static value(){}constructor(t,n,r){super(t,n),this.selection=r,this.textNode=document.createTextNode(Ur.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(t,n){if(this.savedLength!==0){super.format(t,n);return}let r=this,o=0;for(;r!=null&&r.statics.scope!==st.BLOCK_BLOT;)o+=r.offset(r.parent),r=r.parent;r!=null&&(this.savedLength=Ur.CONTENTS.length,r.optimize(),r.formatAt(o,Ur.CONTENTS.length,t,n),this.savedLength=0)}index(t,n){return t===this.textNode?0:super.index(t,n)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const t=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const n=this.prev instanceof Zr?this.prev:null,r=n?n.length():0,o=this.next instanceof Zr?this.next:null,l=o?o.text:"",{textNode:d}=this,u=d.data.split(Ur.CONTENTS).join("");d.data=Ur.CONTENTS;let h;if(n)h=n,(u||o)&&(n.insertAt(n.length(),u+l),o&&o.remove());else if(o)h=o,o.insertAt(0,u);else{const f=document.createTextNode(u);h=this.scroll.create(f),this.parent.insertBefore(h,this)}if(this.remove(),t){const f=(g,j)=>n&&g===n.domNode?j:g===d?r+j-1:o&&g===o.domNode?r+u.length+j:null,v=f(t.start.node,t.start.offset),x=f(t.end.node,t.end.offset);if(v!==null&&x!==null)return{startNode:h.domNode,startOffset:v,endNode:h.domNode,endOffset:x}}return null}update(t,n){if(t.some(r=>r.type==="characterData"&&r.target===this.textNode)){const r=this.restore();r&&(n.range=r)}}optimize(t){super.optimize(t);let{parent:n}=this;for(;n;){if(n.domNode.tagName==="A"){this.savedLength=Ur.CONTENTS.length,n.isolate(this.offset(n),this.length()).unwrap(),this.savedLength=0;break}n=n.parent}}value(){return""}}var Rp={exports:{}},G1;function s7(){return G1||(G1=1,(function(s){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function o(h,f,v){this.fn=h,this.context=f,this.once=v||!1}function l(h,f,v,x,g){if(typeof v!="function")throw new TypeError("The listener must be a function");var j=new o(v,x||h,g),N=n?n+f:f;return h._events[N]?h._events[N].fn?h._events[N]=[h._events[N],j]:h._events[N].push(j):(h._events[N]=j,h._eventsCount++),h}function d(h,f){--h._eventsCount===0?h._events=new r:delete h._events[f]}function u(){this._events=new r,this._eventsCount=0}u.prototype.eventNames=function(){var f=[],v,x;if(this._eventsCount===0)return f;for(x in v=this._events)t.call(v,x)&&f.push(n?x.slice(1):x);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(v)):f},u.prototype.listeners=function(f){var v=n?n+f:f,x=this._events[v];if(!x)return[];if(x.fn)return[x.fn];for(var g=0,j=x.length,N=new Array(j);g<j;g++)N[g]=x[g].fn;return N},u.prototype.listenerCount=function(f){var v=n?n+f:f,x=this._events[v];return x?x.fn?1:x.length:0},u.prototype.emit=function(f,v,x,g,j,N){var b=n?n+f:f;if(!this._events[b])return!1;var k=this._events[b],E=arguments.length,S,T;if(k.fn){switch(k.once&&this.removeListener(f,k.fn,void 0,!0),E){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,v),!0;case 3:return k.fn.call(k.context,v,x),!0;case 4:return k.fn.call(k.context,v,x,g),!0;case 5:return k.fn.call(k.context,v,x,g,j),!0;case 6:return k.fn.call(k.context,v,x,g,j,N),!0}for(T=1,S=new Array(E-1);T<E;T++)S[T-1]=arguments[T];k.fn.apply(k.context,S)}else{var P=k.length,H;for(T=0;T<P;T++)switch(k[T].once&&this.removeListener(f,k[T].fn,void 0,!0),E){case 1:k[T].fn.call(k[T].context);break;case 2:k[T].fn.call(k[T].context,v);break;case 3:k[T].fn.call(k[T].context,v,x);break;case 4:k[T].fn.call(k[T].context,v,x,g);break;default:if(!S)for(H=1,S=new Array(E-1);H<E;H++)S[H-1]=arguments[H];k[T].fn.apply(k[T].context,S)}}return!0},u.prototype.on=function(f,v,x){return l(this,f,v,x,!1)},u.prototype.once=function(f,v,x){return l(this,f,v,x,!0)},u.prototype.removeListener=function(f,v,x,g){var j=n?n+f:f;if(!this._events[j])return this;if(!v)return d(this,j),this;var N=this._events[j];if(N.fn)N.fn===v&&(!g||N.once)&&(!x||N.context===x)&&d(this,j);else{for(var b=0,k=[],E=N.length;b<E;b++)(N[b].fn!==v||g&&!N[b].once||x&&N[b].context!==x)&&k.push(N[b]);k.length?this._events[j]=k.length===1?k[0]:k:d(this,j)}return this},u.prototype.removeAllListeners=function(f){var v;return f?(v=n?n+f:f,this._events[v]&&d(this,v)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,s.exports=u})(Rp)),Rp.exports}var n7=s7();const r7=yd(n7),$x=new WeakMap,qx=["error","warn","log","info"];let Fx="warn";function g5(s){if(Fx&&qx.indexOf(s)<=qx.indexOf(Fx)){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];console[s](...n)}}function Za(s){return qx.reduce((t,n)=>(t[n]=g5.bind(console,n,s),t),{})}Za.level=s=>{Fx=s};g5.level=Za.level;const _p=Za("quill:events"),a7=["selectionchange","mousedown","mouseup","click"];a7.forEach(s=>{document.addEventListener(s,function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Array.from(document.querySelectorAll(".ql-container")).forEach(o=>{const l=$x.get(o);l&&l.emitter&&l.emitter.handleDOM(...n)})})});class Ve extends r7{static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",_p.error)}emit(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return _p.log.call(_p,...n),super.emit(...n)}handleDOM(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(this.domListeners[t.type]||[]).forEach(l=>{let{node:d,handler:u}=l;(t.target===d||d.contains(t.target))&&u(t,...r)})}listenDOM(t,n,r){this.domListeners[t]||(this.domListeners[t]=[]),this.domListeners[t].push({node:n,handler:r})}}const Ip=Za("quill:selection");class To{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=t,this.length=n}}class i7{constructor(t,n){this.emitter=n,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new To(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,Ve.sources.USER),1)}),this.emitter.on(Ve.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const r=this.getNativeRange();r!=null&&r.start.node!==this.cursor.textNode&&this.emitter.once(Ve.events.SCROLL_UPDATE,(o,l)=>{try{this.root.contains(r.start.node)&&this.root.contains(r.end.node)&&this.setNativeRange(r.start.node,r.start.offset,r.end.node,r.end.offset);const d=l.some(u=>u.type==="characterData"||u.type==="childList"||u.type==="attributes"&&u.target===this.root);this.update(d?Ve.sources.SILENT:o)}catch{}})}),this.emitter.on(Ve.events.SCROLL_OPTIMIZE,(r,o)=>{if(o.range){const{startNode:l,startOffset:d,endNode:u,endOffset:h}=o.range;this.setNativeRange(l,d,u,h),this.update(Ve.sources.SILENT)}}),this.update(Ve.sources.SILENT)}handleComposition(){this.emitter.on(Ve.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(Ve.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const t=this.cursor.restore();if(!t)return;setTimeout(()=>{this.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(Ve.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(t,n){this.scroll.update();const r=this.getNativeRange();if(!(r==null||!r.native.collapsed||this.scroll.query(t,st.BLOCK))){if(r.start.node!==this.cursor.textNode){const o=this.scroll.find(r.start.node,!1);if(o==null)return;if(o instanceof hn){const l=o.split(r.start.offset);o.parent.insertBefore(this.cursor,l)}else o.insertBefore(this.cursor,r.start.node);this.cursor.attach()}this.cursor.format(t,n),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const r=this.scroll.length();t=Math.min(t,r-1),n=Math.min(t+n,r-1)-t;let o,[l,d]=this.scroll.leaf(t);if(l==null)return null;if(n>0&&d===l.length()){const[v]=this.scroll.leaf(t+1);if(v){const[x]=this.scroll.line(t),[g]=this.scroll.line(t+1);x===g&&(l=v,d=0)}}[o,d]=l.position(d,!0);const u=document.createRange();if(n>0)return u.setStart(o,d),[l,d]=this.scroll.leaf(t+n),l==null?null:([o,d]=l.position(d,!0),u.setEnd(o,d),u.getBoundingClientRect());let h="left",f;if(o instanceof Text){if(!o.data.length)return null;d<o.data.length?(u.setStart(o,d),u.setEnd(o,d+1)):(u.setStart(o,d-1),u.setEnd(o,d),h="right"),f=u.getBoundingClientRect()}else{if(!(l.domNode instanceof Element))return null;f=l.domNode.getBoundingClientRect(),d>0&&(h="right")}return{bottom:f.top+f.height,height:f.height,left:f[h],right:f[h],top:f.top,width:0}}getNativeRange(){const t=document.getSelection();if(t==null||t.rangeCount<=0)return null;const n=t.getRangeAt(0);if(n==null)return null;const r=this.normalizeNative(n);return Ip.info("getNativeRange",r),r}getRange(){const t=this.scroll.domNode;if("isConnected"in t&&!t.isConnected)return[null,null];const n=this.getNativeRange();return n==null?[null,null]:[this.normalizedToRange(n),n]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&Op(this.root,document.activeElement)}normalizedToRange(t){const n=[[t.start.node,t.start.offset]];t.native.collapsed||n.push([t.end.node,t.end.offset]);const r=n.map(d=>{const[u,h]=d,f=this.scroll.find(u,!0),v=f.offset(this.scroll);return h===0?v:f instanceof hn?v+f.index(u,h):v+f.length()}),o=Math.min(Math.max(...r),this.scroll.length()-1),l=Math.min(o,...r);return new To(l,o-l)}normalizeNative(t){if(!Op(this.root,t.startContainer)||!t.collapsed&&!Op(this.root,t.endContainer))return null;const n={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[n.start,n.end].forEach(r=>{let{node:o,offset:l}=r;for(;!(o instanceof Text)&&o.childNodes.length>0;)if(o.childNodes.length>l)o=o.childNodes[l],l=0;else if(o.childNodes.length===l)o=o.lastChild,o instanceof Text?l=o.data.length:o.childNodes.length>0?l=o.childNodes.length:l=o.childNodes.length+1;else break;r.node=o,r.offset=l}),n}rangeToNative(t){const n=this.scroll.length(),r=(o,l)=>{o=Math.min(n-1,o);const[d,u]=this.scroll.leaf(o);return d?d.position(u,l):[null,-1]};return[...r(t.index,!1),...r(t.index+t.length,!0)]}setNativeRange(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(Ip.info("setNativeRange",t,n,r,o),t!=null&&(this.root.parentNode==null||t.parentNode==null||r.parentNode==null))return;const d=document.getSelection();if(d!=null)if(t!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:u}=this.getNativeRange()||{};if(u==null||l||t!==u.startContainer||n!==u.startOffset||r!==u.endContainer||o!==u.endOffset){t instanceof Element&&t.tagName==="BR"&&(n=Array.from(t.parentNode.childNodes).indexOf(t),t=t.parentNode),r instanceof Element&&r.tagName==="BR"&&(o=Array.from(r.parentNode.childNodes).indexOf(r),r=r.parentNode);const h=document.createRange();h.setStart(t,n),h.setEnd(r,o),d.removeAllRanges(),d.addRange(h)}}else d.removeAllRanges(),this.root.blur()}setRange(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ve.sources.API;if(typeof n=="string"&&(r=n,n=!1),Ip.info("setRange",t),t!=null){const o=this.rangeToNative(t);this.setNativeRange(...o,n)}else this.setNativeRange(null);this.update(r)}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ve.sources.USER;const n=this.lastRange,[r,o]=this.getRange();if(this.lastRange=r,this.lastNative=o,this.lastRange!=null&&(this.savedRange=this.lastRange),!Si(n,this.lastRange)){if(!this.composing&&o!=null&&o.native.collapsed&&o.start.node!==this.cursor.textNode){const d=this.cursor.restore();d&&this.setNativeRange(d.startNode,d.startOffset,d.endNode,d.endOffset)}const l=[Ve.events.SELECTION_CHANGE,Rl(this.lastRange),Rl(n),t];this.emitter.emit(Ve.events.EDITOR_CHANGE,...l),t!==Ve.sources.SILENT&&this.emitter.emit(...l)}}}function Op(s,t){try{t.parentNode}catch{return!1}return s.contains(t)}const o7=/^[ -~]*$/;class l7{constructor(t){this.scroll=t,this.delta=this.getDelta()}applyDelta(t){this.scroll.update();let n=this.scroll.length();this.scroll.batchStart();const r=Q1(t),o=new Je;return d7(r.ops.slice()).reduce((d,u)=>{const h=Nr.Op.length(u);let f=u.attributes||{},v=!1,x=!1;if(u.insert!=null){if(o.retain(h),typeof u.insert=="string"){const N=u.insert;x=!N.endsWith(`
`)&&(n<=d||!!this.scroll.descendant(wr,d)[0]),this.scroll.insertAt(d,N);const[b,k]=this.scroll.line(d);let E=Pi({},br(b));if(b instanceof rn){const[S]=b.descendant(hn,k);S&&(E=Pi(E,br(S)))}f=Nr.AttributeMap.diff(E,f)||{}}else if(typeof u.insert=="object"){const N=Object.keys(u.insert)[0];if(N==null)return d;const b=this.scroll.query(N,st.INLINE)!=null;if(b)(n<=d||this.scroll.descendant(wr,d)[0])&&(x=!0);else if(d>0){const[k,E]=this.scroll.descendant(hn,d-1);k instanceof Zr?k.value()[E]!==`
`&&(v=!0):k instanceof ar&&k.statics.scope===st.INLINE_BLOT&&(v=!0)}if(this.scroll.insertAt(d,N,u.insert[N]),b){const[k]=this.scroll.descendant(hn,d);if(k){const E=Pi({},br(k));f=Nr.AttributeMap.diff(E,f)||{}}}}n+=h}else if(o.push(u),u.retain!==null&&typeof u.retain=="object"){const N=Object.keys(u.retain)[0];if(N==null)return d;this.scroll.updateEmbedAt(d,N,u.retain[N])}Object.keys(f).forEach(N=>{this.scroll.formatAt(d,h,N,f[N])});const g=v?1:0,j=x?1:0;return n+=g+j,o.retain(g),o.delete(j),d+h+g+j},0),o.reduce((d,u)=>typeof u.delete=="number"?(this.scroll.deleteAt(d,u.delete),d):d+Nr.Op.length(u),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(r)}deleteText(t,n){return this.scroll.deleteAt(t,n),this.update(new Je().retain(t).delete(n))}formatLine(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(r).forEach(l=>{this.scroll.lines(t,Math.max(n,1)).forEach(d=>{d.format(l,r[l])})}),this.scroll.optimize();const o=new Je().retain(t).retain(n,Rl(r));return this.update(o)}formatText(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(r).forEach(l=>{this.scroll.formatAt(t,n,l,r[l])});const o=new Je().retain(t).retain(n,Rl(r));return this.update(o)}getContents(t,n){return this.delta.slice(t,t+n)}getDelta(){return this.scroll.lines().reduce((t,n)=>t.concat(n.delta()),new Je)}getFormat(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=[],o=[];n===0?this.scroll.path(t).forEach(u=>{const[h]=u;h instanceof rn?r.push(h):h instanceof hn&&o.push(h)}):(r=this.scroll.lines(t,n),o=this.scroll.descendants(hn,t,n));const[l,d]=[r,o].map(u=>{const h=u.shift();if(h==null)return{};let f=br(h);for(;Object.keys(f).length>0;){const v=u.shift();if(v==null)return f;f=c7(br(v),f)}return f});return{...l,...d}}getHTML(t,n){const[r,o]=this.scroll.line(t);if(r){const l=r.length();return r.length()>=o+n&&!(o===0&&n===l)?pd(r,o,n,!0):pd(this.scroll,t,n,!0)}return""}getText(t,n){return this.getContents(t,n).filter(r=>typeof r.insert=="string").map(r=>r.insert).join("")}insertContents(t,n){const r=Q1(n),o=new Je().retain(t).concat(r);return this.scroll.insertContents(t,r),this.update(o)}insertEmbed(t,n,r){return this.scroll.insertAt(t,n,r),this.update(new Je().retain(t).insert({[n]:r}))}insertText(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return n=n.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(t,n),Object.keys(r).forEach(o=>{this.scroll.formatAt(t,n.length,o,r[o])}),this.update(new Je().retain(t).insert(n,Rl(r)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const t=this.scroll.children.head;if(t?.statics.blotName!==rn.blotName)return!1;const n=t;return n.children.length>1?!1:n.children.head instanceof na}removeFormat(t,n){const r=this.getText(t,n),[o,l]=this.scroll.line(t+n);let d=0,u=new Je;o!=null&&(d=o.length()-l,u=o.delta().slice(l,l+d-1).insert(`
`));const f=this.getContents(t,n+d).diff(new Je().insert(r).concat(u)),v=new Je().retain(t).concat(f);return this.applyDelta(v)}update(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const o=this.delta;if(n.length===1&&n[0].type==="characterData"&&n[0].target.data.match(o7)&&this.scroll.find(n[0].target)){const l=this.scroll.find(n[0].target),d=br(l),u=l.offset(this.scroll),h=n[0].oldValue.replace(Ur.CONTENTS,""),f=new Je().insert(h),v=new Je().insert(l.value()),x=r&&{oldRange:Y1(r.oldRange,-u),newRange:Y1(r.newRange,-u)};t=new Je().retain(u).concat(f.diff(v,x)).reduce((j,N)=>N.insert?j.insert(N.insert,d):j.push(N),new Je),this.delta=o.compose(t)}else this.delta=this.getDelta(),(!t||!Si(o.compose(t),this.delta))&&(t=o.diff(this.delta,r));return t}}function jl(s,t,n){if(s.length===0){const[j]=Lp(n.pop());return t<=0?`</li></${j}>`:`</li></${j}>${jl([],t-1,n)}`}const[{child:r,offset:o,length:l,indent:d,type:u},...h]=s,[f,v]=Lp(u);if(d>t)return n.push(u),d===t+1?`<${f}><li${v}>${pd(r,o,l)}${jl(h,d,n)}`:`<${f}><li>${jl(s,t+1,n)}`;const x=n[n.length-1];if(d===t&&u===x)return`</li><li${v}>${pd(r,o,l)}${jl(h,d,n)}`;const[g]=Lp(n.pop());return`</li></${g}>${jl(s,t-1,n)}`}function pd(s,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in s&&typeof s.html=="function")return s.html(t,n);if(s instanceof Zr)return yh(s.value().slice(t,t+n)).replaceAll(" ","&nbsp;");if(s instanceof Wr){if(s.statics.blotName==="list-container"){const f=[];return s.children.forEachAt(t,n,(v,x,g)=>{const j="formats"in v&&typeof v.formats=="function"?v.formats():{};f.push({child:v,offset:x,length:g,indent:j.indent||0,type:j.list})}),jl(f,-1,[])}const o=[];if(s.children.forEachAt(t,n,(f,v,x)=>{o.push(pd(f,v,x))}),r||s.statics.blotName==="list")return o.join("");const{outerHTML:l,innerHTML:d}=s.domNode,[u,h]=l.split(`>${d}<`);return u==="<table"?`<table style="border: 1px solid #000;">${o.join("")}<${h}`:`${u}>${o.join("")}<${h}`}return s.domNode instanceof Element?s.domNode.outerHTML:""}function c7(s,t){return Object.keys(t).reduce((n,r)=>{if(s[r]==null)return n;const o=t[r];return o===s[r]?n[r]=o:Array.isArray(o)?o.indexOf(s[r])<0?n[r]=o.concat([s[r]]):n[r]=o:n[r]=[o,s[r]],n},{})}function Lp(s){const t=s==="ordered"?"ol":"ul";switch(s){case"checked":return[t,' data-list="checked"'];case"unchecked":return[t,' data-list="unchecked"'];default:return[t,""]}}function Q1(s){return s.reduce((t,n)=>{if(typeof n.insert=="string"){const r=n.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return t.insert(r,n.attributes)}return t.push(n)},new Je)}function Y1(s,t){let{index:n,length:r}=s;return new To(n+t,r)}function d7(s){const t=[];return s.forEach(n=>{typeof n.insert=="string"?n.insert.split(`
`).forEach((o,l)=>{l&&t.push({insert:`
`,attributes:n.attributes}),o&&t.push({insert:o,attributes:n.attributes})}):t.push(n)}),t}class Ca{static DEFAULTS={};constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=t,this.options=n}}const Hu="\uFEFF";class s0 extends ar{constructor(t,n){super(t,n),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(r=>{this.contentNode.appendChild(r)}),this.leftGuard=document.createTextNode(Hu),this.rightGuard=document.createTextNode(Hu),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(t,n){return t===this.leftGuard?0:t===this.rightGuard?1:super.index(t,n)}restore(t){let n=null,r;const o=t.data.split(Hu).join("");if(t===this.leftGuard)if(this.prev instanceof Zr){const l=this.prev.length();this.prev.insertAt(l,o),n={startNode:this.prev.domNode,startOffset:l+o.length}}else r=document.createTextNode(o),this.parent.insertBefore(this.scroll.create(r),this),n={startNode:r,startOffset:o.length};else t===this.rightGuard&&(this.next instanceof Zr?(this.next.insertAt(0,o),n={startNode:this.next.domNode,startOffset:o.length}):(r=document.createTextNode(o),this.parent.insertBefore(this.scroll.create(r),this.next),n={startNode:r,startOffset:o.length}));return t.data=Hu,n}update(t,n){t.forEach(r=>{if(r.type==="characterData"&&(r.target===this.leftGuard||r.target===this.rightGuard)){const o=this.restore(r.target);o&&(n.range=o)}})}}class u7{isComposing=!1;constructor(t,n){this.scroll=t,this.emitter=n,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",t=>{this.isComposing||this.handleCompositionStart(t)}),this.scroll.domNode.addEventListener("compositionend",t=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(t)})})}handleCompositionStart(t){const n=t.target instanceof Node?this.scroll.find(t.target,!0):null;n&&!(n instanceof s0)&&(this.emitter.emit(Ve.events.COMPOSITION_BEFORE_START,t),this.scroll.batchStart(),this.emitter.emit(Ve.events.COMPOSITION_START,t),this.isComposing=!0)}handleCompositionEnd(t){this.emitter.emit(Ve.events.COMPOSITION_BEFORE_END,t),this.scroll.batchEnd(),this.emitter.emit(Ve.events.COMPOSITION_END,t),this.isComposing=!1}}class tc{static DEFAULTS={modules:{}};static themes={default:tc};modules={};constructor(t,n){this.quill=t,this.options=n}init(){Object.keys(this.options.modules).forEach(t=>{this.modules[t]==null&&this.addModule(t)})}addModule(t){const n=this.quill.constructor.import(`modules/${t}`);return this.modules[t]=new n(this.quill,this.options.modules[t]||{}),this.modules[t]}}const m7=s=>s.parentElement||s.getRootNode().host||null,h7=s=>{const t=s.getBoundingClientRect(),n="offsetWidth"in s&&Math.abs(t.width)/s.offsetWidth||1,r="offsetHeight"in s&&Math.abs(t.height)/s.offsetHeight||1;return{top:t.top,right:t.left+s.clientWidth*n,bottom:t.top+s.clientHeight*r,left:t.left}},Ku=s=>{const t=parseInt(s,10);return Number.isNaN(t)?0:t},X1=(s,t,n,r,o,l)=>s<n&&t>r?0:s<n?-(n-s+o):t>r?t-s>r-n?s+o-n:t-r+l:0,f7=(s,t)=>{const n=s.ownerDocument;let r=t,o=s;for(;o;){const l=o===n.body,d=l?{top:0,right:window.visualViewport?.width??n.documentElement.clientWidth,bottom:window.visualViewport?.height??n.documentElement.clientHeight,left:0}:h7(o),u=getComputedStyle(o),h=X1(r.left,r.right,d.left,d.right,Ku(u.scrollPaddingLeft),Ku(u.scrollPaddingRight)),f=X1(r.top,r.bottom,d.top,d.bottom,Ku(u.scrollPaddingTop),Ku(u.scrollPaddingBottom));if(h||f)if(l)n.defaultView?.scrollBy(h,f);else{const{scrollLeft:v,scrollTop:x}=o;f&&(o.scrollTop+=f),h&&(o.scrollLeft+=h);const g=o.scrollLeft-v,j=o.scrollTop-x;r={left:r.left-g,top:r.top-j,right:r.right-g,bottom:r.bottom-j}}o=l||u.position==="fixed"?null:m7(o)}},p7=100,x7=["block","break","cursor","inline","scroll","text"],g7=(s,t,n)=>{const r=new Bl;return x7.forEach(o=>{const l=t.query(o);l&&r.register(l)}),s.forEach(o=>{let l=t.query(o);l||n.error(`Cannot register "${o}" specified in "formats" config. Are you sure it was registered?`);let d=0;for(;l;)if(r.register(l),l="blotName"in l?l.requiredContainer??null:null,d+=1,d>p7){n.error(`Cycle detected in registering blot requiredContainer: "${o}"`);break}}),r},Il=Za("quill"),Wu=new Bl;Wr.uiClass="ql-ui";class be{static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:Wu,theme:"default"};static events=Ve.events;static sources=Ve.sources;static version="2.0.3";static imports={delta:Je,parchment:YD,"core/module":Ca,"core/theme":tc};static debug(t){t===!0&&(t="log"),Za.level(t)}static find(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return $x.get(t)||Wu.find(t,n)}static import(t){return this.imports[t]==null&&Il.error(`Cannot import ${t}. Are you sure it was registered?`),this.imports[t]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const t=arguments.length<=0?void 0:arguments[0],n=!!(!(arguments.length<=1)&&arguments[1]),r="attrName"in t?t.attrName:t.blotName;typeof r=="string"?this.register(`formats/${r}`,t,n):Object.keys(t).forEach(o=>{this.register(o,t[o],n)})}else{const t=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],r=!!(!(arguments.length<=2)&&arguments[2]);this.imports[t]!=null&&!r&&Il.warn(`Overwriting ${t} with`,n),this.imports[t]=n,(t.startsWith("blots/")||t.startsWith("formats/"))&&n&&typeof n!="boolean"&&n.blotName!=="abstract"&&Wu.register(n),typeof n.register=="function"&&n.register(Wu)}}constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=v7(t,n),this.container=this.options.container,this.container==null){Il.error("Invalid Quill container",t);return}this.options.debug&&be.debug(this.options.debug);const r=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",$x.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new Ve;const o=t0.blotName,l=this.options.registry.query(o);if(!l||!("blotName"in l))throw new Error(`Cannot initialize Quill without "${o}" blot`);if(this.scroll=new l(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new l7(this.scroll),this.selection=new i7(this.scroll,this.emitter),this.composition=new u7(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(Ve.events.EDITOR_CHANGE,d=>{d===Ve.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(Ve.events.SCROLL_UPDATE,(d,u)=>{const h=this.selection.lastRange,[f]=this.selection.getRange(),v=h&&f?{oldRange:h,newRange:f}:void 0;Mr.call(this,()=>this.editor.update(null,u,v),d)}),this.emitter.on(Ve.events.SCROLL_EMBED_UPDATE,(d,u)=>{const h=this.selection.lastRange,[f]=this.selection.getRange(),v=h&&f?{oldRange:h,newRange:f}:void 0;Mr.call(this,()=>{const x=new Je().retain(d.offset(this)).retain({[d.statics.blotName]:u});return this.editor.update(x,[],v)},be.sources.USER)}),r){const d=this.clipboard.convert({html:`${r}<p><br></p>`,text:`
`});this.setContents(d)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof t=="string"){const r=t;t=document.createElement("div"),t.classList.add(r)}return this.container.insertBefore(t,n),t}blur(){this.selection.setRange(null)}deleteText(t,n,r){return[t,n,,r]=Ua(t,n,r),Mr.call(this,()=>this.editor.deleteText(t,n),r,t,-1*n)}disable(){this.enable(!1)}editReadOnly(t){this.allowReadOnlyEdits=!0;const n=t();return this.allowReadOnlyEdits=!1,n}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}focus(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),t.preventScroll||this.scrollSelectionIntoView()}format(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ve.sources.API;return Mr.call(this,()=>{const o=this.getSelection(!0);let l=new Je;if(o==null)return l;if(this.scroll.query(t,st.BLOCK))l=this.editor.formatLine(o.index,o.length,{[t]:n});else{if(o.length===0)return this.selection.format(t,n),l;l=this.editor.formatText(o.index,o.length,{[t]:n})}return this.setSelection(o,Ve.sources.SILENT),l},r)}formatLine(t,n,r,o,l){let d;return[t,n,d,l]=Ua(t,n,r,o,l),Mr.call(this,()=>this.editor.formatLine(t,n,d),l,t,0)}formatText(t,n,r,o,l){let d;return[t,n,d,l]=Ua(t,n,r,o,l),Mr.call(this,()=>this.editor.formatText(t,n,d),l,t,0)}getBounds(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=null;if(typeof t=="number"?r=this.selection.getBounds(t,n):r=this.selection.getBounds(t.index,t.length),!r)return null;const o=this.container.getBoundingClientRect();return{bottom:r.bottom-o.top,height:r.height,left:r.left-o.left,right:r.right-o.left,top:r.top-o.top,width:r.width}}getContents(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-t;return[t,n]=Ua(t,n),this.editor.getContents(t,n)}getFormat(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof t=="number"?this.editor.getFormat(t,n):this.editor.getFormat(t.index,t.length)}getIndex(t){return t.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(t){return this.scroll.leaf(t)}getLine(t){return this.scroll.line(t)}getLines(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof t!="number"?this.scroll.lines(t.index,t.length):this.scroll.lines(t,n)}getModule(t){return this.theme.modules[t]}getSelection(){return arguments.length>0&&arguments[0]!==void 0&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return typeof t=="number"&&(n=n??this.getLength()-t),[t,n]=Ua(t,n),this.editor.getHTML(t,n)}getText(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return typeof t=="number"&&(n=n??this.getLength()-t),[t,n]=Ua(t,n),this.editor.getText(t,n)}hasFocus(){return this.selection.hasFocus()}insertEmbed(t,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:be.sources.API;return Mr.call(this,()=>this.editor.insertEmbed(t,n,r),o,t)}insertText(t,n,r,o,l){let d;return[t,,d,l]=Ua(t,0,r,o,l),Mr.call(this,()=>this.editor.insertText(t,n,d),l,t,n.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(t,n,r){return[t,n,,r]=Ua(t,n,r),Mr.call(this,()=>this.editor.removeFormat(t,n),r,t)}scrollRectIntoView(t){f7(this.root,t)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const t=this.selection.lastRange,n=t&&this.selection.getBounds(t.index,t.length);n&&this.scrollRectIntoView(n)}setContents(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ve.sources.API;return Mr.call(this,()=>{t=new Je(t);const r=this.getLength(),o=this.editor.deleteText(0,r),l=this.editor.insertContents(0,t),d=this.editor.deleteText(this.getLength()-1,1);return o.compose(l).compose(d)},n)}setSelection(t,n,r){t==null?this.selection.setRange(null,n||be.sources.API):([t,n,,r]=Ua(t,n,r),this.selection.setRange(new To(Math.max(0,t),n),r),r!==Ve.sources.SILENT&&this.scrollSelectionIntoView())}setText(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ve.sources.API;const r=new Je().insert(t);return this.setContents(r,n)}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ve.sources.USER;const n=this.scroll.update(t);return this.selection.update(t),n}updateContents(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ve.sources.API;return Mr.call(this,()=>(t=new Je(t),this.editor.applyDelta(t)),n,!0)}}function Z1(s){return typeof s=="string"?document.querySelector(s):s}function Mp(s){return Object.entries(s??{}).reduce((t,n)=>{let[r,o]=n;return{...t,[r]:o===!0?{}:o}},{})}function J1(s){return Object.fromEntries(Object.entries(s).filter(t=>t[1]!==void 0))}function v7(s,t){const n=Z1(s);if(!n)throw new Error("Invalid Quill container");const o=!t.theme||t.theme===be.DEFAULTS.theme?tc:be.import(`themes/${t.theme}`);if(!o)throw new Error(`Invalid theme ${t.theme}. Did you register it?`);const{modules:l,...d}=be.DEFAULTS,{modules:u,...h}=o.DEFAULTS;let f=Mp(t.modules);f!=null&&f.toolbar&&f.toolbar.constructor!==Object&&(f={...f,toolbar:{container:f.toolbar}});const v=Pi({},Mp(l),Mp(u),f),x={...d,...J1(h),...J1(t)};let g=t.registry;return g?t.formats&&Il.warn('Ignoring "formats" option because "registry" is specified'):g=t.formats?g7(t.formats,x.registry,Il):x.registry,{...x,registry:g,container:n,theme:o,modules:Object.entries(v).reduce((j,N)=>{let[b,k]=N;if(!k)return j;const E=be.import(`modules/${b}`);return E==null?(Il.error(`Cannot load ${b} module. Are you sure you registered it?`),j):{...j,[b]:Pi({},E.DEFAULTS||{},k)}},{}),bounds:Z1(x.bounds)}}function Mr(s,t,n,r){if(!this.isEnabled()&&t===Ve.sources.USER&&!this.allowReadOnlyEdits)return new Je;let o=n==null?null:this.getSelection();const l=this.editor.delta,d=s();if(o!=null&&(n===!0&&(n=o.index),r==null?o=ej(o,d,t):r!==0&&(o=ej(o,n,r,t)),this.setSelection(o,Ve.sources.SILENT)),d.length()>0){const u=[Ve.events.TEXT_CHANGE,d,l,t];this.emitter.emit(Ve.events.EDITOR_CHANGE,...u),t!==Ve.sources.SILENT&&this.emitter.emit(...u)}return d}function Ua(s,t,n,r,o){let l={};return typeof s.index=="number"&&typeof s.length=="number"?typeof t!="number"?(o=r,r=n,n=t,t=s.length,s=s.index):(t=s.length,s=s.index):typeof t!="number"&&(o=r,r=n,n=t,t=0),typeof n=="object"?(l=n,o=r):typeof n=="string"&&(r!=null?l[n]=r:o=n),o=o||Ve.sources.API,[s,t,l,o]}function ej(s,t,n,r){const o=typeof n=="number"?n:0;if(s==null)return null;let l,d;return t&&typeof t.transformPosition=="function"?[l,d]=[s.index,s.index+s.length].map(u=>t.transformPosition(u,r!==Ve.sources.USER)):[l,d]=[s.index,s.index+s.length].map(u=>u<t||u===t&&r===Ve.sources.USER?u:o>=0?u+o:Math.max(t,u+o)),new To(l,d-l)}class $o extends vh{}function tj(s){return s instanceof rn||s instanceof wr}function sj(s){return typeof s.updateContent=="function"}class y7 extends t0{static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=rn;static allowedChildren=[rn,wr,$o];constructor(t,n,r){let{emitter:o}=r;super(t,n),this.emitter=o,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",l=>this.handleDragStart(l))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const t=this.batch;this.batch=!1,this.update(t)}emitMount(t){this.emitter.emit(Ve.events.SCROLL_BLOT_MOUNT,t)}emitUnmount(t){this.emitter.emit(Ve.events.SCROLL_BLOT_UNMOUNT,t)}emitEmbedUpdate(t,n){this.emitter.emit(Ve.events.SCROLL_EMBED_UPDATE,t,n)}deleteAt(t,n){const[r,o]=this.line(t),[l]=this.line(t+n);if(super.deleteAt(t,n),l!=null&&r!==l&&o>0){if(r instanceof wr||l instanceof wr){this.optimize();return}const d=l.children.head instanceof na?null:l.children.head;r.moveChildren(l,d),r.remove()}this.optimize()}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",t?"true":"false")}formatAt(t,n,r,o){super.formatAt(t,n,r,o),this.optimize()}insertAt(t,n,r){if(t>=this.length())if(r==null||this.scroll.query(n,st.BLOCK)==null){const o=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(o),r==null&&n.endsWith(`
`)?o.insertAt(0,n.slice(0,-1),r):o.insertAt(0,n,r)}else{const o=this.scroll.create(n,r);this.appendChild(o)}else super.insertAt(t,n,r);this.optimize()}insertBefore(t,n){if(t.statics.scope===st.INLINE_BLOT){const r=this.scroll.create(this.statics.defaultChild.blotName);r.appendChild(t),super.insertBefore(r,n)}else super.insertBefore(t,n)}insertContents(t,n){const r=this.deltaToRenderBlocks(n.concat(new Je().insert(`
`))),o=r.pop();if(o==null)return;this.batchStart();const l=r.shift();if(l){const h=l.type==="block"&&(l.delta.length()===0||!this.descendant(wr,t)[0]&&t<this.length()),f=l.type==="block"?l.delta:new Je().insert({[l.key]:l.value});Dp(this,t,f);const v=l.type==="block"?1:0,x=t+f.length()+v;h&&this.insertAt(x-1,`
`);const g=br(this.line(t)[0]),j=Nr.AttributeMap.diff(g,l.attributes)||{};Object.keys(j).forEach(N=>{this.formatAt(x-1,1,N,j[N])}),t=x}let[d,u]=this.children.find(t);if(r.length&&(d&&(d=d.split(u),u=0),r.forEach(h=>{if(h.type==="block"){const f=this.createBlock(h.attributes,d||void 0);Dp(f,0,h.delta)}else{const f=this.create(h.key,h.value);this.insertBefore(f,d||void 0),Object.keys(h.attributes).forEach(v=>{f.format(v,h.attributes[v])})}})),o.type==="block"&&o.delta.length()){const h=d?d.offset(d.scroll)+u:this.length();Dp(this,h,o.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(t){const n=this.path(t).pop();if(!n)return[null,-1];const[r,o]=n;return r instanceof hn?[r,o]:[null,-1]}line(t){return t===this.length()?this.line(t-1):this.descendant(tj,t)}lines(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const r=(o,l,d)=>{let u=[],h=d;return o.children.forEachAt(l,d,(f,v,x)=>{tj(f)?u.push(f):f instanceof vh&&(u=u.concat(r(f,v,h))),h-=x}),u};return r(this,t,n)}optimize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(t,n),t.length>0&&this.emitter.emit(Ve.events.SCROLL_OPTIMIZE,t,n))}path(t){return super.path(t).slice(1)}remove(){}update(t){if(this.batch){Array.isArray(t)&&(this.batch=this.batch.concat(t));return}let n=Ve.sources.USER;typeof t=="string"&&(n=t),Array.isArray(t)||(t=this.observer.takeRecords()),t=t.filter(r=>{let{target:o}=r;const l=this.find(o,!0);return l&&!sj(l)}),t.length>0&&this.emitter.emit(Ve.events.SCROLL_BEFORE_UPDATE,n,t),super.update(t.concat([])),t.length>0&&this.emitter.emit(Ve.events.SCROLL_UPDATE,n,t)}updateEmbedAt(t,n,r){const[o]=this.descendant(l=>l instanceof wr,t);o&&o.statics.blotName===n&&sj(o)&&o.updateContent(r)}handleDragStart(t){t.preventDefault()}deltaToRenderBlocks(t){const n=[];let r=new Je;return t.forEach(o=>{const l=o?.insert;if(l)if(typeof l=="string"){const d=l.split(`
`);d.slice(0,-1).forEach(h=>{r.insert(h,o.attributes),n.push({type:"block",delta:r,attributes:o.attributes??{}}),r=new Je});const u=d[d.length-1];u&&r.insert(u,o.attributes)}else{const d=Object.keys(l)[0];if(!d)return;this.query(d,st.INLINE)?r.push(o):(r.length()&&n.push({type:"block",delta:r,attributes:{}}),r=new Je,n.push({type:"blockEmbed",key:d,value:l[d],attributes:o.attributes??{}}))}}),r.length()&&n.push({type:"block",delta:r,attributes:{}}),n}createBlock(t,n){let r;const o={};Object.entries(t).forEach(u=>{let[h,f]=u;this.query(h,st.BLOCK&st.BLOT)!=null?r=h:o[h]=f});const l=this.create(r||this.statics.defaultChild.blotName,r?t[r]:void 0);this.insertBefore(l,n||void 0);const d=l.length();return Object.entries(o).forEach(u=>{let[h,f]=u;l.formatAt(0,d,h,f)}),l}}function Dp(s,t,n){n.reduce((r,o)=>{const l=Nr.Op.length(o);let d=o.attributes||{};if(o.insert!=null){if(typeof o.insert=="string"){const u=o.insert;s.insertAt(r,u);const[h]=s.descendant(hn,r),f=br(h);d=Nr.AttributeMap.diff(f,d)||{}}else if(typeof o.insert=="object"){const u=Object.keys(o.insert)[0];if(u==null)return r;if(s.insertAt(r,u,o.insert[u]),s.scroll.query(u,st.INLINE)!=null){const[f]=s.descendant(hn,r),v=br(f);d=Nr.AttributeMap.diff(v,d)||{}}}}return Object.keys(d).forEach(u=>{s.formatAt(r,l,u,d[u])}),r+l},t)}const n0={scope:st.BLOCK,whitelist:["right","center","justify"]},b7=new wa("align","align",n0),v5=new sa("align","ql-align",n0),y5=new Hi("align","text-align",n0);class b5 extends Hi{value(t){let n=super.value(t);return n.startsWith("rgb(")?(n=n.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${n.split(",").map(o=>`00${parseInt(o,10).toString(16)}`.slice(-2)).join("")}`):n}}const j7=new sa("color","ql-color",{scope:st.INLINE}),r0=new b5("color","color",{scope:st.INLINE}),w7=new sa("background","ql-bg",{scope:st.INLINE}),a0=new b5("background","background-color",{scope:st.INLINE});class qo extends $o{static create(t){const n=super.create(t);return n.setAttribute("spellcheck","false"),n}code(t,n){return this.children.map(r=>r.length()<=1?"":r.domNode.innerText).join(`
`).slice(t,t+n)}html(t,n){return`<pre>
${yh(this.code(t,n))}
</pre>`}}class Cn extends rn{static TAB="  ";static register(){be.register(qo)}}class i0 extends Nn{}i0.blotName="code";i0.tagName="CODE";Cn.blotName="code-block";Cn.className="ql-code-block";Cn.tagName="DIV";qo.blotName="code-block-container";qo.className="ql-code-block-container";qo.tagName="DIV";qo.allowedChildren=[Cn];Cn.allowedChildren=[Zr,na,Ur];Cn.requiredContainer=qo;const o0={scope:st.BLOCK,whitelist:["rtl"]},j5=new wa("direction","dir",o0),w5=new sa("direction","ql-direction",o0),N5=new Hi("direction","direction",o0),k5={scope:st.INLINE,whitelist:["serif","monospace"]},C5=new sa("font","ql-font",k5);class N7 extends Hi{value(t){return super.value(t).replace(/["']/g,"")}}const S5=new N7("font","font-family",k5),E5=new sa("size","ql-size",{scope:st.INLINE,whitelist:["small","large","huge"]}),T5=new Hi("size","font-size",{scope:st.INLINE,whitelist:["10px","18px","32px"]}),k7=Za("quill:keyboard"),C7=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class bh extends Ca{static match(t,n){return["altKey","ctrlKey","metaKey","shiftKey"].some(r=>!!n[r]!==t[r]&&n[r]!==null)?!1:n.key===t.key||n.key===t.which}constructor(t,n){super(t,n),this.bindings={},Object.keys(this.options.bindings).forEach(r=>{this.options.bindings[r]&&this.addBinding(this.options.bindings[r])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const o=E7(t);if(o==null){k7.warn("Attempted to add invalid keyboard binding",o);return}typeof n=="function"&&(n={handler:n}),typeof r=="function"&&(r={handler:r}),(Array.isArray(o.key)?o.key:[o.key]).forEach(d=>{const u={...o,key:d,...n,...r};this.bindings[u.key]=this.bindings[u.key]||[],this.bindings[u.key].push(u)})}listen(){this.quill.root.addEventListener("keydown",t=>{if(t.defaultPrevented||t.isComposing||t.keyCode===229&&(t.key==="Enter"||t.key==="Backspace"))return;const o=(this.bindings[t.key]||[]).concat(this.bindings[t.which]||[]).filter(E=>bh.match(t,E));if(o.length===0)return;const l=be.find(t.target,!0);if(l&&l.scroll!==this.quill.scroll)return;const d=this.quill.getSelection();if(d==null||!this.quill.hasFocus())return;const[u,h]=this.quill.getLine(d.index),[f,v]=this.quill.getLeaf(d.index),[x,g]=d.length===0?[f,v]:this.quill.getLeaf(d.index+d.length),j=f instanceof Rm?f.value().slice(0,v):"",N=x instanceof Rm?x.value().slice(g):"",b={collapsed:d.length===0,empty:d.length===0&&u.length()<=1,format:this.quill.getFormat(d),line:u,offset:h,prefix:j,suffix:N,event:t};o.some(E=>{if(E.collapsed!=null&&E.collapsed!==b.collapsed||E.empty!=null&&E.empty!==b.empty||E.offset!=null&&E.offset!==b.offset)return!1;if(Array.isArray(E.format)){if(E.format.every(S=>b.format[S]==null))return!1}else if(typeof E.format=="object"&&!Object.keys(E.format).every(S=>E.format[S]===!0?b.format[S]!=null:E.format[S]===!1?b.format[S]==null:Si(E.format[S],b.format[S])))return!1;return E.prefix!=null&&!E.prefix.test(b.prefix)||E.suffix!=null&&!E.suffix.test(b.suffix)?!1:E.handler.call(this,d,b,E)!==!0})&&t.preventDefault()})}handleBackspace(t,n){const r=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(n.prefix)?2:1;if(t.index===0||this.quill.getLength()<=1)return;let o={};const[l]=this.quill.getLine(t.index);let d=new Je().retain(t.index-r).delete(r);if(n.offset===0){const[u]=this.quill.getLine(t.index-1);if(u&&!(u.statics.blotName==="block"&&u.length()<=1)){const f=l.formats(),v=this.quill.getFormat(t.index-1,1);if(o=Nr.AttributeMap.diff(f,v)||{},Object.keys(o).length>0){const x=new Je().retain(t.index+l.length()-2).retain(1,o);d=d.compose(x)}}}this.quill.updateContents(d,be.sources.USER),this.quill.focus()}handleDelete(t,n){const r=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(n.suffix)?2:1;if(t.index>=this.quill.getLength()-r)return;let o={};const[l]=this.quill.getLine(t.index);let d=new Je().retain(t.index).delete(r);if(n.offset>=l.length()-1){const[u]=this.quill.getLine(t.index+1);if(u){const h=l.formats(),f=this.quill.getFormat(t.index,1);o=Nr.AttributeMap.diff(h,f)||{},Object.keys(o).length>0&&(d=d.retain(u.length()-1).retain(1,o))}}this.quill.updateContents(d,be.sources.USER),this.quill.focus()}handleDeleteRange(t){l0({range:t,quill:this.quill}),this.quill.focus()}handleEnter(t,n){const r=Object.keys(n.format).reduce((l,d)=>(this.quill.scroll.query(d,st.BLOCK)&&!Array.isArray(n.format[d])&&(l[d]=n.format[d]),l),{}),o=new Je().retain(t.index).delete(t.length).insert(`
`,r);this.quill.updateContents(o,be.sources.USER),this.quill.setSelection(t.index+1,be.sources.SILENT),this.quill.focus()}}const S7={bindings:{bold:$p("bold"),italic:$p("italic"),underline:$p("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(s,t){return t.collapsed&&t.offset!==0?!0:(this.quill.format("indent","+1",be.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(s,t){return t.collapsed&&t.offset!==0?!0:(this.quill.format("indent","-1",be.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(s,t){t.format.indent!=null?this.quill.format("indent","-1",be.sources.USER):t.format.list!=null&&this.quill.format("list",!1,be.sources.USER)}},"indent code-block":nj(!0),"outdent code-block":nj(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(s){this.quill.deleteText(s.index-1,1,be.sources.USER)}},tab:{key:"Tab",handler(s,t){if(t.format.table)return!0;this.quill.history.cutoff();const n=new Je().retain(s.index).delete(s.length).insert("	");return this.quill.updateContents(n,be.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(s.index+1,be.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,be.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(s,t){const n={list:!1};t.format.indent&&(n.indent=!1),this.quill.formatLine(s.index,s.length,n,be.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(s){const[t,n]=this.quill.getLine(s.index),r={...t.formats(),list:"checked"},o=new Je().retain(s.index).insert(`
`,r).retain(t.length()-n-1).retain(1,{list:"unchecked"});this.quill.updateContents(o,be.sources.USER),this.quill.setSelection(s.index+1,be.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(s,t){const[n,r]=this.quill.getLine(s.index),o=new Je().retain(s.index).insert(`
`,t.format).retain(n.length()-r-1).retain(1,{header:null});this.quill.updateContents(o,be.sources.USER),this.quill.setSelection(s.index+1,be.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(s){const t=this.quill.getModule("table");if(t){const[n,r,o,l]=t.getTable(s),d=T7(n,r,o,l);if(d==null)return;let u=n.offset();if(d<0){const h=new Je().retain(u).insert(`
`);this.quill.updateContents(h,be.sources.USER),this.quill.setSelection(s.index+1,s.length,be.sources.SILENT)}else if(d>0){u+=n.length();const h=new Je().retain(u).insert(`
`);this.quill.updateContents(h,be.sources.USER),this.quill.setSelection(u,be.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(s,t){const{event:n,line:r}=t,o=r.offset(this.quill.scroll);n.shiftKey?this.quill.setSelection(o-1,be.sources.USER):this.quill.setSelection(o+r.length(),be.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(s,t){if(this.quill.scroll.query("list")==null)return!0;const{length:n}=t.prefix,[r,o]=this.quill.getLine(s.index);if(o>n)return!0;let l;switch(t.prefix.trim()){case"[]":case"[ ]":l="unchecked";break;case"[x]":l="checked";break;case"-":case"*":l="bullet";break;default:l="ordered"}this.quill.insertText(s.index," ",be.sources.USER),this.quill.history.cutoff();const d=new Je().retain(s.index-o).delete(n+1).retain(r.length()-2-o).retain(1,{list:l});return this.quill.updateContents(d,be.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(s.index-n,be.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(s){const[t,n]=this.quill.getLine(s.index);let r=2,o=t;for(;o!=null&&o.length()<=1&&o.formats()["code-block"];)if(o=o.prev,r-=1,r<=0){const l=new Je().retain(s.index+t.length()-n-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(l,be.sources.USER),this.quill.setSelection(s.index-1,be.sources.SILENT),!1}return!0}},"embed left":Vu("ArrowLeft",!1),"embed left shift":Vu("ArrowLeft",!0),"embed right":Vu("ArrowRight",!1),"embed right shift":Vu("ArrowRight",!0),"table down":rj(!1),"table up":rj(!0)}};bh.DEFAULTS=S7;function nj(s){return{key:"Tab",shiftKey:!s,format:{"code-block":!0},handler(t,n){let{event:r}=n;const o=this.quill.scroll.query("code-block"),{TAB:l}=o;if(t.length===0&&!r.shiftKey){this.quill.insertText(t.index,l,be.sources.USER),this.quill.setSelection(t.index+l.length,be.sources.SILENT);return}const d=t.length===0?this.quill.getLines(t.index,1):this.quill.getLines(t);let{index:u,length:h}=t;d.forEach((f,v)=>{s?(f.insertAt(0,l),v===0?u+=l.length:h+=l.length):f.domNode.textContent.startsWith(l)&&(f.deleteAt(0,l.length),v===0?u-=l.length:h-=l.length)}),this.quill.update(be.sources.USER),this.quill.setSelection(u,h,be.sources.SILENT)}}}function Vu(s,t){return{key:s,shiftKey:t,altKey:null,[s==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(r){let{index:o}=r;s==="ArrowRight"&&(o+=r.length+1);const[l]=this.quill.getLeaf(o);return l instanceof ar?(s==="ArrowLeft"?t?this.quill.setSelection(r.index-1,r.length+1,be.sources.USER):this.quill.setSelection(r.index-1,be.sources.USER):t?this.quill.setSelection(r.index,r.length+1,be.sources.USER):this.quill.setSelection(r.index+r.length+1,be.sources.USER),!1):!0}}}function $p(s){return{key:s[0],shortKey:!0,handler(t,n){this.quill.format(s,!n.format[s],be.sources.USER)}}}function rj(s){return{key:s?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(t,n){const r=s?"prev":"next",o=n.line,l=o.parent[r];if(l!=null){if(l.statics.blotName==="table-row"){let d=l.children.head,u=o;for(;u.prev!=null;)u=u.prev,d=d.next;const h=d.offset(this.quill.scroll)+Math.min(n.offset,d.length()-1);this.quill.setSelection(h,0,be.sources.USER)}}else{const d=o.table()[r];d!=null&&(s?this.quill.setSelection(d.offset(this.quill.scroll)+d.length()-1,0,be.sources.USER):this.quill.setSelection(d.offset(this.quill.scroll),0,be.sources.USER))}return!1}}}function E7(s){if(typeof s=="string"||typeof s=="number")s={key:s};else if(typeof s=="object")s=Rl(s);else return null;return s.shortKey&&(s[C7]=s.shortKey,delete s.shortKey),s}function l0(s){let{quill:t,range:n}=s;const r=t.getLines(n);let o={};if(r.length>1){const l=r[0].formats(),d=r[r.length-1].formats();o=Nr.AttributeMap.diff(d,l)||{}}t.deleteText(n,be.sources.USER),Object.keys(o).length>0&&t.formatLine(n.index,1,o,be.sources.USER),t.setSelection(n.index,be.sources.SILENT)}function T7(s,t,n,r){return t.prev==null&&t.next==null?n.prev==null&&n.next==null?r===0?-1:1:n.prev==null?-1:1:t.prev==null?-1:t.next==null?1:null}const A7=/font-weight:\s*normal/,P7=["P","OL","UL"],aj=s=>s&&P7.includes(s.tagName),R7=s=>{Array.from(s.querySelectorAll("br")).filter(t=>aj(t.previousElementSibling)&&aj(t.nextElementSibling)).forEach(t=>{t.parentNode?.removeChild(t)})},_7=s=>{Array.from(s.querySelectorAll('b[style*="font-weight"]')).filter(t=>t.getAttribute("style")?.match(A7)).forEach(t=>{const n=s.createDocumentFragment();n.append(...t.childNodes),t.parentNode?.replaceChild(n,t)})};function I7(s){s.querySelector('[id^="docs-internal-guid-"]')&&(_7(s),R7(s))}const O7=/\bmso-list:[^;]*ignore/i,L7=/\bmso-list:[^;]*\bl(\d+)/i,M7=/\bmso-list:[^;]*\blevel(\d+)/i,D7=(s,t)=>{const n=s.getAttribute("style"),r=n?.match(L7);if(!r)return null;const o=Number(r[1]),l=n?.match(M7),d=l?Number(l[1]):1,u=new RegExp(`@list l${o}:level${d}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),h=t.match(u),f=h&&h[1]==="bullet"?"bullet":"ordered";return{id:o,indent:d,type:f,element:s}},$7=s=>{const t=Array.from(s.querySelectorAll("[style*=mso-list]")),n=[],r=[];t.forEach(d=>{(d.getAttribute("style")||"").match(O7)?n.push(d):r.push(d)}),n.forEach(d=>d.parentNode?.removeChild(d));const o=s.documentElement.innerHTML,l=r.map(d=>D7(d,o)).filter(d=>d);for(;l.length;){const d=[];let u=l.shift();for(;u;)d.push(u),u=l.length&&l[0]?.element===u.element.nextElementSibling&&l[0].id===u.id?l.shift():null;const h=document.createElement("ul");d.forEach(x=>{const g=document.createElement("li");g.setAttribute("data-list",x.type),x.indent>1&&g.setAttribute("class",`ql-indent-${x.indent-1}`),g.innerHTML=x.element.innerHTML,h.appendChild(g)});const f=d[0]?.element,{parentNode:v}=f??{};f&&v?.replaceChild(h,f),d.slice(1).forEach(x=>{let{element:g}=x;v?.removeChild(g)})}};function q7(s){s.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&$7(s)}const F7=[q7,I7],z7=s=>{s.documentElement&&F7.forEach(t=>{t(s)})},U7=Za("quill:clipboard"),B7=[[Node.TEXT_NODE,s$],[Node.TEXT_NODE,oj],["br",Q7],[Node.ELEMENT_NODE,oj],[Node.ELEMENT_NODE,G7],[Node.ELEMENT_NODE,V7],[Node.ELEMENT_NODE,e$],["li",Z7],["ol, ul",J7],["pre",Y7],["tr",t$],["b",qp("bold")],["i",qp("italic")],["strike",qp("strike")],["style",X7]],H7=[b7,j5].reduce((s,t)=>(s[t.keyName]=t,s),{}),ij=[y5,a0,r0,N5,S5,T5].reduce((s,t)=>(s[t.keyName]=t,s),{});class K7 extends Ca{static DEFAULTS={matchers:[]};constructor(t,n){super(t,n),this.quill.root.addEventListener("copy",r=>this.onCaptureCopy(r,!1)),this.quill.root.addEventListener("cut",r=>this.onCaptureCopy(r,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],B7.concat(this.options.matchers??[]).forEach(r=>{let[o,l]=r;this.addMatcher(o,l)})}addMatcher(t,n){this.matchers.push([t,n])}convert(t){let{html:n,text:r}=t,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(o[Cn.blotName])return new Je().insert(r||"",{[Cn.blotName]:o[Cn.blotName]});if(!n)return new Je().insert(r||"",o);const l=this.convertHTML(n);return Ed(l,`
`)&&(l.ops[l.ops.length-1].attributes==null||o.table)?l.compose(new Je().retain(l.length()-1).delete(1)):l}normalizeHTML(t){z7(t)}convertHTML(t){const n=new DOMParser().parseFromString(t,"text/html");this.normalizeHTML(n);const r=n.body,o=new WeakMap,[l,d]=this.prepareMatching(r,o);return c0(this.quill.scroll,r,l,d,o)}dangerouslyPasteHTML(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:be.sources.API;if(typeof t=="string"){const o=this.convert({html:t,text:""});this.quill.setContents(o,n),this.quill.setSelection(0,be.sources.SILENT)}else{const o=this.convert({html:n,text:""});this.quill.updateContents(new Je().retain(t).concat(o),r),this.quill.setSelection(t+o.length(),be.sources.SILENT)}}onCaptureCopy(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(t.defaultPrevented)return;t.preventDefault();const[r]=this.quill.selection.getRange();if(r==null)return;const{html:o,text:l}=this.onCopy(r,n);t.clipboardData?.setData("text/plain",l),t.clipboardData?.setData("text/html",o),n&&l0({range:r,quill:this.quill})}normalizeURIList(t){return t.split(/\r?\n/).filter(n=>n[0]!=="#").join(`
`)}onCapturePaste(t){if(t.defaultPrevented||!this.quill.isEnabled())return;t.preventDefault();const n=this.quill.getSelection(!0);if(n==null)return;const r=t.clipboardData?.getData("text/html");let o=t.clipboardData?.getData("text/plain");if(!r&&!o){const d=t.clipboardData?.getData("text/uri-list");d&&(o=this.normalizeURIList(d))}const l=Array.from(t.clipboardData?.files||[]);if(!r&&l.length>0){this.quill.uploader.upload(n,l);return}if(r&&l.length>0){const d=new DOMParser().parseFromString(r,"text/html");if(d.body.childElementCount===1&&d.body.firstElementChild?.tagName==="IMG"){this.quill.uploader.upload(n,l);return}}this.onPaste(n,{html:r,text:o})}onCopy(t){const n=this.quill.getText(t);return{html:this.quill.getSemanticHTML(t),text:n}}onPaste(t,n){let{text:r,html:o}=n;const l=this.quill.getFormat(t.index),d=this.convert({text:r,html:o},l);U7.log("onPaste",d,{text:r,html:o});const u=new Je().retain(t.index).delete(t.length).concat(d);this.quill.updateContents(u,be.sources.USER),this.quill.setSelection(u.length()-t.length,be.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(t,n){const r=[],o=[];return this.matchers.forEach(l=>{const[d,u]=l;switch(d){case Node.TEXT_NODE:o.push(u);break;case Node.ELEMENT_NODE:r.push(u);break;default:Array.from(t.querySelectorAll(d)).forEach(h=>{n.has(h)?n.get(h)?.push(u):n.set(h,[u])});break}}),[r,o]}}function Fo(s,t,n,r){return r.query(t)?s.reduce((o,l)=>{if(!l.insert)return o;if(l.attributes&&l.attributes[t])return o.push(l);const d=n?{[t]:n}:{};return o.insert(l.insert,{...d,...l.attributes})},new Je):s}function Ed(s,t){let n="";for(let r=s.ops.length-1;r>=0&&n.length<t.length;--r){const o=s.ops[r];if(typeof o.insert!="string")break;n=o.insert+n}return n.slice(-1*t.length)===t}function Ai(s,t){if(!(s instanceof Element))return!1;const n=t.query(s);return n&&n.prototype instanceof ar?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(s.tagName.toLowerCase())}function W7(s,t){return s.previousElementSibling&&s.nextElementSibling&&!Ai(s.previousElementSibling,t)&&!Ai(s.nextElementSibling,t)}const Gu=new WeakMap;function A5(s){return s==null?!1:(Gu.has(s)||(s.tagName==="PRE"?Gu.set(s,!0):Gu.set(s,A5(s.parentNode))),Gu.get(s))}function c0(s,t,n,r,o){return t.nodeType===t.TEXT_NODE?r.reduce((l,d)=>d(t,l,s),new Je):t.nodeType===t.ELEMENT_NODE?Array.from(t.childNodes||[]).reduce((l,d)=>{let u=c0(s,d,n,r,o);return d.nodeType===t.ELEMENT_NODE&&(u=n.reduce((h,f)=>f(d,h,s),u),u=(o.get(d)||[]).reduce((h,f)=>f(d,h,s),u)),l.concat(u)},new Je):new Je}function qp(s){return(t,n,r)=>Fo(n,s,!0,r)}function V7(s,t,n){const r=wa.keys(s),o=sa.keys(s),l=Hi.keys(s),d={};return r.concat(o).concat(l).forEach(u=>{let h=n.query(u,st.ATTRIBUTE);h!=null&&(d[h.attrName]=h.value(s),d[h.attrName])||(h=H7[u],h!=null&&(h.attrName===u||h.keyName===u)&&(d[h.attrName]=h.value(s)||void 0),h=ij[u],h!=null&&(h.attrName===u||h.keyName===u)&&(h=ij[u],d[h.attrName]=h.value(s)||void 0))}),Object.entries(d).reduce((u,h)=>{let[f,v]=h;return Fo(u,f,v,n)},t)}function G7(s,t,n){const r=n.query(s);if(r==null)return t;if(r.prototype instanceof ar){const o={},l=r.value(s);if(l!=null)return o[r.blotName]=l,new Je().insert(o,r.formats(s,n))}else if(r.prototype instanceof fd&&!Ed(t,`
`)&&t.insert(`
`),"blotName"in r&&"formats"in r&&typeof r.formats=="function")return Fo(t,r.blotName,r.formats(s,n),n);return t}function Q7(s,t){return Ed(t,`
`)||t.insert(`
`),t}function Y7(s,t,n){const r=n.query("code-block"),o=r&&"formats"in r&&typeof r.formats=="function"?r.formats(s,n):!0;return Fo(t,"code-block",o,n)}function X7(){return new Je}function Z7(s,t,n){const r=n.query(s);if(r==null||r.blotName!=="list"||!Ed(t,`
`))return t;let o=-1,l=s.parentNode;for(;l!=null;)["OL","UL"].includes(l.tagName)&&(o+=1),l=l.parentNode;return o<=0?t:t.reduce((d,u)=>u.insert?u.attributes&&typeof u.attributes.indent=="number"?d.push(u):d.insert(u.insert,{indent:o,...u.attributes||{}}):d,new Je)}function J7(s,t,n){const r=s;let o=r.tagName==="OL"?"ordered":"bullet";const l=r.getAttribute("data-checked");return l&&(o=l==="true"?"checked":"unchecked"),Fo(t,"list",o,n)}function oj(s,t,n){if(!Ed(t,`
`)){if(Ai(s,n)&&(s.childNodes.length>0||s instanceof HTMLParagraphElement))return t.insert(`
`);if(t.length()>0&&s.nextSibling){let r=s.nextSibling;for(;r!=null;){if(Ai(r,n))return t.insert(`
`);const o=n.query(r);if(o&&o.prototype instanceof wr)return t.insert(`
`);r=r.firstChild}}}return t}function e$(s,t,n){const r={},o=s.style||{};return o.fontStyle==="italic"&&(r.italic=!0),o.textDecoration==="underline"&&(r.underline=!0),o.textDecoration==="line-through"&&(r.strike=!0),(o.fontWeight?.startsWith("bold")||parseInt(o.fontWeight,10)>=700)&&(r.bold=!0),t=Object.entries(r).reduce((l,d)=>{let[u,h]=d;return Fo(l,u,h,n)},t),parseFloat(o.textIndent||0)>0?new Je().insert("	").concat(t):t}function t$(s,t,n){const r=s.parentElement?.tagName==="TABLE"?s.parentElement:s.parentElement?.parentElement;if(r!=null){const l=Array.from(r.querySelectorAll("tr")).indexOf(s)+1;return Fo(t,"table",l,n)}return t}function s$(s,t,n){let r=s.data;if(s.parentElement?.tagName==="O:P")return t.insert(r.trim());if(!A5(s)){if(r.trim().length===0&&r.includes(`
`)&&!W7(s,n))return t;r=r.replace(/[^\S\u00a0]/g," "),r=r.replace(/ {2,}/g," "),(s.previousSibling==null&&s.parentElement!=null&&Ai(s.parentElement,n)||s.previousSibling instanceof Element&&Ai(s.previousSibling,n))&&(r=r.replace(/^ /,"")),(s.nextSibling==null&&s.parentElement!=null&&Ai(s.parentElement,n)||s.nextSibling instanceof Element&&Ai(s.nextSibling,n))&&(r=r.replace(/ $/,"")),r=r.replaceAll(""," ")}return t.insert(r)}class n$ extends Ca{static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(t,n){super(t,n),this.quill.on(be.events.EDITOR_CHANGE,(r,o,l,d)=>{r===be.events.SELECTION_CHANGE?o&&d!==be.sources.SILENT&&(this.currentRange=o):r===be.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||d===be.sources.USER?this.record(o,l):this.transform(o)),this.currentRange=zx(this.currentRange,o))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",r=>{r.inputType==="historyUndo"?(this.undo(),r.preventDefault()):r.inputType==="historyRedo"&&(this.redo(),r.preventDefault())})}change(t,n){if(this.stack[t].length===0)return;const r=this.stack[t].pop();if(!r)return;const o=this.quill.getContents(),l=r.delta.invert(o);this.stack[n].push({delta:l,range:zx(r.range,l)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(r.delta,be.sources.USER),this.ignoreChange=!1,this.restoreSelection(r)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(t,n){if(t.ops.length===0)return;this.stack.redo=[];let r=t.invert(n),o=this.currentRange;const l=Date.now();if(this.lastRecorded+this.options.delay>l&&this.stack.undo.length>0){const d=this.stack.undo.pop();d&&(r=r.compose(d.delta),o=d.range)}else this.lastRecorded=l;r.length()!==0&&(this.stack.undo.push({delta:r,range:o}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(t){lj(this.stack.undo,t),lj(this.stack.redo,t)}undo(){this.change("undo","redo")}restoreSelection(t){if(t.range)this.quill.setSelection(t.range,be.sources.USER);else{const n=a$(this.quill.scroll,t.delta);this.quill.setSelection(n,be.sources.USER)}}}function lj(s,t){let n=t;for(let r=s.length-1;r>=0;r-=1){const o=s[r];s[r]={delta:n.transform(o.delta,!0),range:o.range&&zx(o.range,n)},n=o.delta.transform(n),s[r].delta.length()===0&&s.splice(r,1)}}function r$(s,t){const n=t.ops[t.ops.length-1];return n==null?!1:n.insert!=null?typeof n.insert=="string"&&n.insert.endsWith(`
`):n.attributes!=null?Object.keys(n.attributes).some(r=>s.query(r,st.BLOCK)!=null):!1}function a$(s,t){const n=t.reduce((o,l)=>o+(l.delete||0),0);let r=t.length()-n;return r$(s,t)&&(r-=1),r}function zx(s,t){if(!s)return s;const n=t.transformPosition(s.index),r=t.transformPosition(s.index+s.length);return{index:n,length:r-n}}class P5 extends Ca{constructor(t,n){super(t,n),t.root.addEventListener("drop",r=>{r.preventDefault();let o=null;if(document.caretRangeFromPoint)o=document.caretRangeFromPoint(r.clientX,r.clientY);else if(document.caretPositionFromPoint){const d=document.caretPositionFromPoint(r.clientX,r.clientY);o=document.createRange(),o.setStart(d.offsetNode,d.offset),o.setEnd(d.offsetNode,d.offset)}const l=o&&t.selection.normalizeNative(o);if(l){const d=t.selection.normalizedToRange(l);r.dataTransfer?.files&&this.upload(d,r.dataTransfer.files)}})}upload(t,n){const r=[];Array.from(n).forEach(o=>{o&&this.options.mimetypes?.includes(o.type)&&r.push(o)}),r.length>0&&this.options.handler.call(this,t,r)}}P5.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(s,t){if(!this.quill.scroll.query("image"))return;const n=t.map(r=>new Promise(o=>{const l=new FileReader;l.onload=()=>{o(l.result)},l.readAsDataURL(r)}));Promise.all(n).then(r=>{const o=r.reduce((l,d)=>l.insert({image:d}),new Je().retain(s.index).delete(s.length));this.quill.updateContents(o,Ve.sources.USER),this.quill.setSelection(s.index+r.length,Ve.sources.SILENT)})}};const i$=["insertText","insertReplacementText"];class o$ extends Ca{constructor(t,n){super(t,n),t.root.addEventListener("beforeinput",r=>{this.handleBeforeInput(r)}),/Android/i.test(navigator.userAgent)||t.on(be.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(t){l0({range:t,quill:this.quill})}replaceText(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(t.length===0)return!1;if(n){const r=this.quill.getFormat(t.index,1);this.deleteRange(t),this.quill.updateContents(new Je().retain(t.index).insert(n,r),be.sources.USER)}else this.deleteRange(t);return this.quill.setSelection(t.index+n.length,0,be.sources.SILENT),!0}handleBeforeInput(t){if(this.quill.composition.isComposing||t.defaultPrevented||!i$.includes(t.inputType))return;const n=t.getTargetRanges?t.getTargetRanges()[0]:null;if(!n||n.collapsed===!0)return;const r=l$(t);if(r==null)return;const o=this.quill.selection.normalizeNative(n),l=o?this.quill.selection.normalizedToRange(o):null;l&&this.replaceText(l,r)&&t.preventDefault()}handleCompositionStart(){const t=this.quill.getSelection();t&&this.replaceText(t)}}function l$(s){return typeof s.data=="string"?s.data:s.dataTransfer?.types.includes("text/plain")?s.dataTransfer.getData("text/plain"):null}const c$=/Mac/i.test(navigator.platform),d$=100,u$=s=>!!(s.key==="ArrowLeft"||s.key==="ArrowRight"||s.key==="ArrowUp"||s.key==="ArrowDown"||s.key==="Home"||c$&&s.key==="a"&&s.ctrlKey===!0);class m$ extends Ca{isListening=!1;selectionChangeDeadline=0;constructor(t,n){super(t,n),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(t,n){let{line:r,event:o}=n;if(!(r instanceof Wr)||!r.uiNode)return!0;const l=getComputedStyle(r.domNode).direction==="rtl";return l&&o.key!=="ArrowRight"||!l&&o.key!=="ArrowLeft"?!0:(this.quill.setSelection(t.index-1,t.length+(o.shiftKey?1:0),be.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",t=>{!t.defaultPrevented&&u$(t)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+d$,this.isListening)return;this.isListening=!0;const t=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",t,{once:!0})}handleSelectionChange(){const t=document.getSelection();if(!t)return;const n=t.getRangeAt(0);if(n.collapsed!==!0||n.startOffset!==0)return;const r=this.quill.scroll.find(n.startContainer);if(!(r instanceof Wr)||!r.uiNode)return;const o=document.createRange();o.setStartAfter(r.uiNode),o.setEndAfter(r.uiNode),t.removeAllRanges(),t.addRange(o)}}be.register({"blots/block":rn,"blots/block/embed":wr,"blots/break":na,"blots/container":$o,"blots/cursor":Ur,"blots/embed":s0,"blots/inline":Nn,"blots/scroll":y7,"blots/text":Zr,"modules/clipboard":K7,"modules/history":n$,"modules/keyboard":bh,"modules/uploader":P5,"modules/input":o$,"modules/uiNode":m$});class h$ extends sa{add(t,n){let r=0;if(n==="+1"||n==="-1"){const o=this.value(t)||0;r=n==="+1"?o+1:o-1}else typeof n=="number"&&(r=n);return r===0?(this.remove(t),!0):super.add(t,r.toString())}canAdd(t,n){return super.canAdd(t,n)||super.canAdd(t,parseInt(n,10))}value(t){return parseInt(super.value(t),10)||void 0}}const f$=new h$("indent","ql-indent",{scope:st.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class p$ extends rn{static blotName="blockquote";static tagName="blockquote"}class x$ extends rn{static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(t){return this.tagName.indexOf(t.tagName)+1}}class Td extends $o{}Td.blotName="list-container";Td.tagName="OL";class Ad extends rn{static create(t){const n=super.create();return n.setAttribute("data-list",t),n}static formats(t){return t.getAttribute("data-list")||void 0}static register(){be.register(Td)}constructor(t,n){super(t,n);const r=n.ownerDocument.createElement("span"),o=l=>{if(!t.isEnabled())return;const d=this.statics.formats(n,t);d==="checked"?(this.format("list","unchecked"),l.preventDefault()):d==="unchecked"&&(this.format("list","checked"),l.preventDefault())};r.addEventListener("mousedown",o),r.addEventListener("touchstart",o),this.attachUI(r)}format(t,n){t===this.statics.blotName&&n?this.domNode.setAttribute("data-list",n):super.format(t,n)}}Ad.blotName="list";Ad.tagName="LI";Td.allowedChildren=[Ad];Ad.requiredContainer=Td;class d0 extends Nn{static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(t){super.optimize(t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}class g$ extends d0{static blotName="italic";static tagName=["EM","I"]}class _m extends Nn{static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(t){const n=super.create(t);return n.setAttribute("href",this.sanitize(t)),n.setAttribute("rel","noopener noreferrer"),n.setAttribute("target","_blank"),n}static formats(t){return t.getAttribute("href")}static sanitize(t){return R5(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}format(t,n){t!==this.statics.blotName||!n?super.format(t,n):this.domNode.setAttribute("href",this.constructor.sanitize(n))}}function R5(s,t){const n=document.createElement("a");n.href=s;const r=n.href.slice(0,n.href.indexOf(":"));return t.indexOf(r)>-1}class v$ extends Nn{static blotName="script";static tagName=["SUB","SUP"];static create(t){return t==="super"?document.createElement("sup"):t==="sub"?document.createElement("sub"):super.create(t)}static formats(t){if(t.tagName==="SUB")return"sub";if(t.tagName==="SUP")return"super"}}class y$ extends d0{static blotName="strike";static tagName=["S","STRIKE"]}class b$ extends Nn{static blotName="underline";static tagName="U"}class j$ extends s0{static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(t){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const n=super.create(t);return typeof t=="string"&&(window.katex.render(t,n,{throwOnError:!1,errorColor:"#f00"}),n.setAttribute("data-value",t)),n}static value(t){return t.getAttribute("data-value")}html(){const{formula:t}=this.value();return`<span>${t}</span>`}}const cj=["alt","height","width"];class w$ extends ar{static blotName="image";static tagName="IMG";static create(t){const n=super.create(t);return typeof t=="string"&&n.setAttribute("src",this.sanitize(t)),n}static formats(t){return cj.reduce((n,r)=>(t.hasAttribute(r)&&(n[r]=t.getAttribute(r)),n),{})}static match(t){return/\.(jpe?g|gif|png)$/.test(t)||/^data:image\/.+;base64/.test(t)}static sanitize(t){return R5(t,["http","https","data"])?t:"//:0"}static value(t){return t.getAttribute("src")}format(t,n){cj.indexOf(t)>-1?n?this.domNode.setAttribute(t,n):this.domNode.removeAttribute(t):super.format(t,n)}}const dj=["height","width"];class N$ extends wr{static blotName="video";static className="ql-video";static tagName="IFRAME";static create(t){const n=super.create(t);return n.setAttribute("frameborder","0"),n.setAttribute("allowfullscreen","true"),n.setAttribute("src",this.sanitize(t)),n}static formats(t){return dj.reduce((n,r)=>(t.hasAttribute(r)&&(n[r]=t.getAttribute(r)),n),{})}static sanitize(t){return _m.sanitize(t)}static value(t){return t.getAttribute("src")}format(t,n){dj.indexOf(t)>-1?n?this.domNode.setAttribute(t,n):this.domNode.removeAttribute(t):super.format(t,n)}html(){const{video:t}=this.value();return`<a href="${t}">${t}</a>`}}const Gc=new sa("code-token","hljs",{scope:st.INLINE});class Ya extends Nn{static formats(t,n){for(;t!=null&&t!==n.domNode;){if(t.classList&&t.classList.contains(Cn.className))return super.formats(t,n);t=t.parentNode}}constructor(t,n,r){super(t,n,r),Gc.add(this.domNode,r)}format(t,n){t!==Ya.blotName?super.format(t,n):n?Gc.add(this.domNode,n):(Gc.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Gc.value(this.domNode)||this.unwrap()}}Ya.blotName="code-token";Ya.className="ql-token";class jr extends Cn{static create(t){const n=super.create(t);return typeof t=="string"&&n.setAttribute("data-language",t),n}static formats(t){return t.getAttribute("data-language")||"plain"}static register(){}format(t,n){t===this.statics.blotName&&n?this.domNode.setAttribute("data-language",n):super.format(t,n)}replaceWith(t,n){return this.formatAt(0,this.length(),Ya.blotName,!1),super.replaceWith(t,n)}}class rd extends qo{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(t,n){t===jr.blotName&&(this.forceNext=!0,this.children.forEach(r=>{r.format(t,n)}))}formatAt(t,n,r,o){r===jr.blotName&&(this.forceNext=!0),super.formatAt(t,n,r,o)}highlight(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const o=`${Array.from(this.domNode.childNodes).filter(d=>d!==this.uiNode).map(d=>d.textContent).join(`
`)}
`,l=jr.formats(this.children.head.domNode);if(n||this.forceNext||this.cachedText!==o){if(o.trim().length>0||this.cachedText==null){const d=this.children.reduce((h,f)=>h.concat(x5(f,!1)),new Je),u=t(o,l);d.diff(u).reduce((h,f)=>{let{retain:v,attributes:x}=f;return v?(x&&Object.keys(x).forEach(g=>{[jr.blotName,Ya.blotName].includes(g)&&this.formatAt(h,v,g,x[g])}),h+v):h},0)}this.cachedText=o,this.forceNext=!1}}html(t,n){const[r]=this.children.find(t);return`<pre data-language="${r?jr.formats(r.domNode):"plain"}">
${yh(this.code(t,n))}
</pre>`}optimize(t){if(super.optimize(t),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const n=jr.formats(this.children.head.domNode);n!==this.uiNode.value&&(this.uiNode.value=n)}}}rd.allowedChildren=[jr];jr.requiredContainer=rd;jr.allowedChildren=[Ya,Ur,Zr,na];const k$=(s,t,n)=>{if(typeof s.versionString=="string"){const r=s.versionString.split(".")[0];if(parseInt(r,10)>=11)return s.highlight(n,{language:t}).value}return s.highlight(t,n).value};class _5 extends Ca{static register(){be.register(Ya,!0),be.register(jr,!0),be.register(rd,!0)}constructor(t,n){if(super(t,n),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((r,o)=>{let{key:l}=o;return r[l]=!0,r},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(be.events.SCROLL_BLOT_MOUNT,t=>{if(!(t instanceof rd))return;const n=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(r=>{let{key:o,label:l}=r;const d=n.ownerDocument.createElement("option");d.textContent=l,d.setAttribute("value",o),n.appendChild(d)}),n.addEventListener("change",()=>{t.format(jr.blotName,n.value),this.quill.root.focus(),this.highlight(t,!0)}),t.uiNode==null&&(t.attachUI(n),t.children.head&&(n.value=jr.formats(t.children.head.domNode)))})}initTimer(){let t=null;this.quill.on(be.events.SCROLL_OPTIMIZE,()=>{t&&clearTimeout(t),t=setTimeout(()=>{this.highlight(),t=null},this.options.interval)})}highlight(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(be.sources.USER);const r=this.quill.getSelection();(t==null?this.quill.scroll.descendants(rd):[t]).forEach(l=>{l.highlight(this.highlightBlot,n)}),this.quill.update(be.sources.SILENT),r!=null&&this.quill.setSelection(r,be.sources.SILENT)}highlightBlot(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(n=this.languages[n]?n:"plain",n==="plain")return yh(t).split(`
`).reduce((o,l,d)=>(d!==0&&o.insert(`
`,{[Cn.blotName]:n}),o.insert(l)),new Je);const r=this.quill.root.ownerDocument.createElement("div");return r.classList.add(Cn.className),r.innerHTML=k$(this.options.hljs,n,t),c0(this.quill.scroll,r,[(o,l)=>{const d=Gc.value(o);return d?l.compose(new Je().retain(l.length(),{[Ya.blotName]:d})):l}],[(o,l)=>o.data.split(`
`).reduce((d,u,h)=>(h!==0&&d.insert(`
`,{[Cn.blotName]:n}),d.insert(u)),l)],new WeakMap)}}_5.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};class Br extends rn{static blotName="table";static tagName="TD";static create(t){const n=super.create();return t?n.setAttribute("data-row",t):n.setAttribute("data-row",u0()),n}static formats(t){if(t.hasAttribute("data-row"))return t.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(t,n){t===Br.blotName&&n?this.domNode.setAttribute("data-row",n):super.format(t,n)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}class Ao extends $o{static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const t=this.children.head.formats(),n=this.children.tail.formats(),r=this.next.children.head.formats(),o=this.next.children.tail.formats();return t.table===n.table&&t.table===r.table&&t.table===o.table}return!1}optimize(t){super.optimize(t),this.children.forEach(n=>{if(n.next==null)return;const r=n.formats(),o=n.next.formats();if(r.table!==o.table){const l=this.splitAfter(n);l&&l.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}class Ri extends $o{static blotName="table-body";static tagName="TBODY"}class Im extends $o{static blotName="table-container";static tagName="TABLE";balanceCells(){const t=this.descendants(Ao),n=t.reduce((r,o)=>Math.max(o.children.length,r),0);t.forEach(r=>{new Array(n-r.children.length).fill(0).forEach(()=>{let o;r.children.head!=null&&(o=Br.formats(r.children.head.domNode));const l=this.scroll.create(Br.blotName,o);r.appendChild(l),l.optimize()})})}cells(t){return this.rows().map(n=>n.children.at(t))}deleteColumn(t){const[n]=this.descendant(Ri);n==null||n.children.head==null||n.children.forEach(r=>{const o=r.children.at(t);o?.remove()})}insertColumn(t){const[n]=this.descendant(Ri);n==null||n.children.head==null||n.children.forEach(r=>{const o=r.children.at(t),l=Br.formats(r.children.head.domNode),d=this.scroll.create(Br.blotName,l);r.insertBefore(d,o)})}insertRow(t){const[n]=this.descendant(Ri);if(n==null||n.children.head==null)return;const r=u0(),o=this.scroll.create(Ao.blotName);n.children.head.children.forEach(()=>{const d=this.scroll.create(Br.blotName,r);o.appendChild(d)});const l=n.children.at(t);n.insertBefore(o,l)}rows(){const t=this.children.head;return t==null?[]:t.children.map(n=>n)}}Im.allowedChildren=[Ri];Ri.requiredContainer=Im;Ri.allowedChildren=[Ao];Ao.requiredContainer=Ri;Ao.allowedChildren=[Br];Br.requiredContainer=Ao;function u0(){return`row-${Math.random().toString(36).slice(2,6)}`}class C$ extends Ca{static register(){be.register(Br),be.register(Ao),be.register(Ri),be.register(Im)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(Im).forEach(t=>{t.balanceCells()})}deleteColumn(){const[t,,n]=this.getTable();n!=null&&(t.deleteColumn(n.cellOffset()),this.quill.update(be.sources.USER))}deleteRow(){const[,t]=this.getTable();t!=null&&(t.remove(),this.quill.update(be.sources.USER))}deleteTable(){const[t]=this.getTable();if(t==null)return;const n=t.offset();t.remove(),this.quill.update(be.sources.USER),this.quill.setSelection(n,be.sources.SILENT)}getTable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(t==null)return[null,null,null,-1];const[n,r]=this.quill.getLine(t.index);if(n==null||n.statics.blotName!==Br.blotName)return[null,null,null,-1];const o=n.parent;return[o.parent.parent,o,n,r]}insertColumn(t){const n=this.quill.getSelection();if(!n)return;const[r,o,l]=this.getTable(n);if(l==null)return;const d=l.cellOffset();r.insertColumn(d+t),this.quill.update(be.sources.USER);let u=o.rowOffset();t===0&&(u+=1),this.quill.setSelection(n.index+u,n.length,be.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(t){const n=this.quill.getSelection();if(!n)return;const[r,o,l]=this.getTable(n);if(l==null)return;const d=o.rowOffset();r.insertRow(d+t),this.quill.update(be.sources.USER),t>0?this.quill.setSelection(n,be.sources.SILENT):this.quill.setSelection(n.index+o.children.length,n.length,be.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(t,n){const r=this.quill.getSelection();if(r==null)return;const o=new Array(t).fill(0).reduce(l=>{const d=new Array(n).fill(`
`).join("");return l.insert(d,{table:u0()})},new Je().retain(r.index));this.quill.updateContents(o,be.sources.USER),this.quill.setSelection(r.index,be.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(be.events.SCROLL_OPTIMIZE,t=>{t.some(n=>["TD","TR","TBODY","TABLE"].includes(n.target.tagName)?(this.quill.once(be.events.TEXT_CHANGE,(r,o,l)=>{l===be.sources.USER&&this.balanceTables()}),!0):!1)})}}const uj=Za("quill:toolbar");class m0 extends Ca{constructor(t,n){if(super(t,n),Array.isArray(this.options.container)){const r=document.createElement("div");r.setAttribute("role","toolbar"),S$(r,this.options.container),t.container?.parentNode?.insertBefore(r,t.container),this.container=r}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){uj.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(r=>{const o=this.options.handlers?.[r];o&&this.addHandler(r,o)}),Array.from(this.container.querySelectorAll("button, select")).forEach(r=>{this.attach(r)}),this.quill.on(be.events.EDITOR_CHANGE,()=>{const[r]=this.quill.selection.getRange();this.update(r)})}addHandler(t,n){this.handlers[t]=n}attach(t){let n=Array.from(t.classList).find(o=>o.indexOf("ql-")===0);if(!n)return;if(n=n.slice(3),t.tagName==="BUTTON"&&t.setAttribute("type","button"),this.handlers[n]==null&&this.quill.scroll.query(n)==null){uj.warn("ignoring attaching to nonexistent format",n,t);return}const r=t.tagName==="SELECT"?"change":"click";t.addEventListener(r,o=>{let l;if(t.tagName==="SELECT"){if(t.selectedIndex<0)return;const u=t.options[t.selectedIndex];u.hasAttribute("selected")?l=!1:l=u.value||!1}else t.classList.contains("ql-active")?l=!1:l=t.value||!t.hasAttribute("value"),o.preventDefault();this.quill.focus();const[d]=this.quill.selection.getRange();if(this.handlers[n]!=null)this.handlers[n].call(this,l);else if(this.quill.scroll.query(n).prototype instanceof ar){if(l=prompt(`Enter ${n}`),!l)return;this.quill.updateContents(new Je().retain(d.index).delete(d.length).insert({[n]:l}),be.sources.USER)}else this.quill.format(n,l,be.sources.USER);this.update(d)}),this.controls.push([n,t])}update(t){const n=t==null?{}:this.quill.getFormat(t);this.controls.forEach(r=>{const[o,l]=r;if(l.tagName==="SELECT"){let d=null;if(t==null)d=null;else if(n[o]==null)d=l.querySelector("option[selected]");else if(!Array.isArray(n[o])){let u=n[o];typeof u=="string"&&(u=u.replace(/"/g,'\\"')),d=l.querySelector(`option[value="${u}"]`)}d==null?(l.value="",l.selectedIndex=-1):d.selected=!0}else if(t==null)l.classList.remove("ql-active"),l.setAttribute("aria-pressed","false");else if(l.hasAttribute("value")){const d=n[o],u=d===l.getAttribute("value")||d!=null&&d.toString()===l.getAttribute("value")||d==null&&!l.getAttribute("value");l.classList.toggle("ql-active",u),l.setAttribute("aria-pressed",u.toString())}else{const d=n[o]!=null;l.classList.toggle("ql-active",d),l.setAttribute("aria-pressed",d.toString())}})}}m0.DEFAULTS={};function mj(s,t,n){const r=document.createElement("button");r.setAttribute("type","button"),r.classList.add(`ql-${t}`),r.setAttribute("aria-pressed","false"),n!=null?(r.value=n,r.setAttribute("aria-label",`${t}: ${n}`)):r.setAttribute("aria-label",t),s.appendChild(r)}function S$(s,t){Array.isArray(t[0])||(t=[t]),t.forEach(n=>{const r=document.createElement("span");r.classList.add("ql-formats"),n.forEach(o=>{if(typeof o=="string")mj(r,o);else{const l=Object.keys(o)[0],d=o[l];Array.isArray(d)?E$(r,l,d):mj(r,l,d)}}),s.appendChild(r)})}function E$(s,t,n){const r=document.createElement("select");r.classList.add(`ql-${t}`),n.forEach(o=>{const l=document.createElement("option");o!==!1?l.setAttribute("value",String(o)):l.setAttribute("selected","selected"),r.appendChild(l)}),s.appendChild(r)}m0.DEFAULTS={container:null,handlers:{clean(){const s=this.quill.getSelection();if(s!=null)if(s.length===0){const t=this.quill.getFormat();Object.keys(t).forEach(n=>{this.quill.scroll.query(n,st.INLINE)!=null&&this.quill.format(n,!1,be.sources.USER)})}else this.quill.removeFormat(s.index,s.length,be.sources.USER)},direction(s){const{align:t}=this.quill.getFormat();s==="rtl"&&t==null?this.quill.format("align","right",be.sources.USER):!s&&t==="right"&&this.quill.format("align",!1,be.sources.USER),this.quill.format("direction",s,be.sources.USER)},indent(s){const t=this.quill.getSelection(),n=this.quill.getFormat(t),r=parseInt(n.indent||0,10);if(s==="+1"||s==="-1"){let o=s==="+1"?1:-1;n.direction==="rtl"&&(o*=-1),this.quill.format("indent",r+o,be.sources.USER)}},link(s){s===!0&&(s=prompt("Enter link URL:")),this.quill.format("link",s,be.sources.USER)},list(s){const t=this.quill.getSelection(),n=this.quill.getFormat(t);s==="check"?n.list==="checked"||n.list==="unchecked"?this.quill.format("list",!1,be.sources.USER):this.quill.format("list","unchecked",be.sources.USER):this.quill.format("list",s,be.sources.USER)}}};const T$='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',A$='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',P$='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',R$='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',_$='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',I$='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',O$='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',L$='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',hj='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',M$='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',D$='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',$$='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',q$='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',F$='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',z$='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',U$='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',B$='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',H$='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',K$='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',W$='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',V$='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',G$='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',Q$='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',Y$='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',X$='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',Z$='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',J$='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',e9='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',t9='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',s9='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',n9='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',r9='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',a9='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',xd={align:{"":T$,center:A$,right:P$,justify:R$},background:_$,blockquote:I$,bold:O$,clean:L$,code:hj,"code-block":hj,color:M$,direction:{"":D$,rtl:$$},formula:q$,header:{1:F$,2:z$,3:U$,4:B$,5:H$,6:K$},italic:W$,image:V$,indent:{"+1":G$,"-1":Q$},link:Y$,list:{bullet:X$,check:Z$,ordered:J$},script:{sub:e9,super:t9},strike:s9,table:n9,underline:r9,video:a9},i9='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let fj=0;function pj(s,t){s.setAttribute(t,`${s.getAttribute(t)!=="true"}`)}class jh{constructor(t){this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",n=>{switch(n.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),n.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),pj(this.label,"aria-expanded"),pj(this.options,"aria-hidden")}buildItem(t){const n=document.createElement("span");n.tabIndex="0",n.setAttribute("role","button"),n.classList.add("ql-picker-item");const r=t.getAttribute("value");return r&&n.setAttribute("data-value",r),t.textContent&&n.setAttribute("data-label",t.textContent),n.addEventListener("click",()=>{this.selectItem(n,!0)}),n.addEventListener("keydown",o=>{switch(o.key){case"Enter":this.selectItem(n,!0),o.preventDefault();break;case"Escape":this.escape(),o.preventDefault();break}}),n}buildLabel(){const t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML=i9,t.tabIndex="0",t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),this.container.appendChild(t),t}buildOptions(){const t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id=`ql-picker-options-${fj}`,fj+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,Array.from(this.select.options).forEach(n=>{const r=this.buildItem(n);t.appendChild(r),n.selected===!0&&this.selectItem(r)}),this.container.appendChild(t)}buildPicker(){Array.from(this.select.attributes).forEach(t=>{this.container.setAttribute(t.name,t.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const r=this.container.querySelector(".ql-selected");t!==r&&(r?.classList.remove("ql-selected"),t!=null&&(t.classList.add("ql-selected"),this.select.selectedIndex=Array.from(t.parentNode.children).indexOf(t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),n&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let t;if(this.select.selectedIndex>-1){const r=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex],this.selectItem(r)}else this.selectItem(null);const n=t!=null&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",n)}}class I5 extends jh{constructor(t,n){super(t),this.label.innerHTML=n,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(r=>{r.classList.add("ql-primary")})}buildItem(t){const n=super.buildItem(t);return n.style.backgroundColor=t.getAttribute("value")||"",n}selectItem(t,n){super.selectItem(t,n);const r=this.label.querySelector(".ql-color-label"),o=t&&t.getAttribute("data-value")||"";r&&(r.tagName==="line"?r.style.stroke=o:r.style.fill=o)}}let O5=class extends jh{constructor(t,n){super(t),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(r=>{r.innerHTML=n[r.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(t,n){super.selectItem(t,n);const r=t||this.defaultItem;if(r!=null){if(this.label.innerHTML===r.innerHTML)return;this.label.innerHTML=r.innerHTML}}};const o9=s=>{const{overflowY:t}=getComputedStyle(s,null);return t!=="visible"&&t!=="clip"};class L5{constructor(t,n){this.quill=t,this.boundsContainer=n||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,o9(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(t){const n=t.left+t.width/2-this.root.offsetWidth/2,r=t.bottom+this.quill.root.scrollTop;this.root.style.left=`${n}px`,this.root.style.top=`${r}px`,this.root.classList.remove("ql-flip");const o=this.boundsContainer.getBoundingClientRect(),l=this.root.getBoundingClientRect();let d=0;if(l.right>o.right&&(d=o.right-l.right,this.root.style.left=`${n+d}px`),l.left<o.left&&(d=o.left-l.left,this.root.style.left=`${n+d}px`),l.bottom>o.bottom){const u=l.bottom-l.top,h=t.bottom-t.top+u;this.root.style.top=`${r-h}px`,this.root.classList.add("ql-flip")}return d}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const l9=[!1,"center","right","justify"],c9=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],d9=[!1,"serif","monospace"],u9=["1","2","3",!1],m9=["small",!1,"large","huge"];class Pd extends tc{constructor(t,n){super(t,n);const r=o=>{if(!document.body.contains(t.root)){document.body.removeEventListener("click",r);return}this.tooltip!=null&&!this.tooltip.root.contains(o.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(l=>{l.container.contains(o.target)||l.close()})};t.emitter.listenDOM("click",document.body,r)}addModule(t){const n=super.addModule(t);return t==="toolbar"&&this.extendToolbar(n),n}buildButtons(t,n){Array.from(t).forEach(r=>{(r.getAttribute("class")||"").split(/\s+/).forEach(l=>{if(l.startsWith("ql-")&&(l=l.slice(3),n[l]!=null))if(l==="direction")r.innerHTML=n[l][""]+n[l].rtl;else if(typeof n[l]=="string")r.innerHTML=n[l];else{const d=r.value||"";d!=null&&n[l][d]&&(r.innerHTML=n[l][d])}})})}buildPickers(t,n){this.pickers=Array.from(t).map(o=>{if(o.classList.contains("ql-align")&&(o.querySelector("option")==null&&qc(o,l9),typeof n.align=="object"))return new O5(o,n.align);if(o.classList.contains("ql-background")||o.classList.contains("ql-color")){const l=o.classList.contains("ql-background")?"background":"color";return o.querySelector("option")==null&&qc(o,c9,l==="background"?"#ffffff":"#000000"),new I5(o,n[l])}return o.querySelector("option")==null&&(o.classList.contains("ql-font")?qc(o,d9):o.classList.contains("ql-header")?qc(o,u9):o.classList.contains("ql-size")&&qc(o,m9)),new jh(o)});const r=()=>{this.pickers.forEach(o=>{o.update()})};this.quill.on(Ve.events.EDITOR_CHANGE,r)}}Pd.DEFAULTS=Pi({},tc.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let s=this.container.querySelector("input.ql-image[type=file]");s==null&&(s=document.createElement("input"),s.setAttribute("type","file"),s.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),s.classList.add("ql-image"),s.addEventListener("change",()=>{const t=this.quill.getSelection(!0);this.quill.uploader.upload(t,s.files),s.value=""}),this.container.appendChild(s)),s.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class M5 extends L5{constructor(t,n){super(t,n),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",t=>{t.key==="Enter"?(this.save(),t.preventDefault()):t.key==="Escape"&&(this.cancel(),t.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;n!=null?this.textbox.value=n:t!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const r=this.quill.getBounds(this.quill.selection.savedRange);r!=null&&this.position(r),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${t}`)||""),this.root.setAttribute("data-mode",t)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:t}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:n}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",t,Ve.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",t,Ve.sources.USER)),this.quill.root.scrollTop=n;break}case"video":t=h9(t);case"formula":{if(!t)break;const n=this.quill.getSelection(!0);if(n!=null){const r=n.index+n.length;this.quill.insertEmbed(r,this.root.getAttribute("data-mode"),t,Ve.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(r+1," ",Ve.sources.USER),this.quill.setSelection(r+2,Ve.sources.USER)}break}}this.textbox.value="",this.hide()}}function h9(s){let t=s.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||s.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return t?`${t[1]||"https"}://www.youtube.com/embed/${t[2]}?showinfo=0`:(t=s.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${t[1]||"https"}://player.vimeo.com/video/${t[2]}/`:s}function qc(s,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;t.forEach(r=>{const o=document.createElement("option");r===n?o.setAttribute("selected","selected"):o.setAttribute("value",String(r)),s.appendChild(o)})}const f9=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class p9 extends M5{static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(t,n){super(t,n),this.quill.on(Ve.events.EDITOR_CHANGE,(r,o,l,d)=>{if(r===Ve.events.SELECTION_CHANGE)if(o!=null&&o.length>0&&d===Ve.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const u=this.quill.getLines(o.index,o.length);if(u.length===1){const h=this.quill.getBounds(o);h!=null&&this.position(h)}else{const h=u[u.length-1],f=this.quill.getIndex(h),v=Math.min(h.length()-1,o.index+o.length-f),x=this.quill.getBounds(new To(f,v));x!=null&&this.position(x)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(Ve.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const t=this.quill.getSelection();if(t!=null){const n=this.quill.getBounds(t);n!=null&&this.position(n)}},1)})}cancel(){this.show()}position(t){const n=super.position(t),r=this.root.querySelector(".ql-tooltip-arrow");return r.style.marginLeft="",n!==0&&(r.style.marginLeft=`${-1*n-r.offsetWidth/2}px`),n}}class D5 extends Pd{constructor(t,n){n.modules.toolbar!=null&&n.modules.toolbar.container==null&&(n.modules.toolbar.container=f9),super(t,n),this.quill.container.classList.add("ql-bubble")}extendToolbar(t){this.tooltip=new p9(this.quill,this.options.bounds),t.container!=null&&(this.tooltip.root.appendChild(t.container),this.buildButtons(t.container.querySelectorAll("button"),xd),this.buildPickers(t.container.querySelectorAll("select"),xd))}}D5.DEFAULTS=Pi({},Pd.DEFAULTS,{modules:{toolbar:{handlers:{link(s){s?this.quill.theme.tooltip.edit():this.quill.format("link",!1,be.sources.USER)}}}}});const x9=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class g9 extends M5{static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",t=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),t.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",t=>{if(this.linkRange!=null){const n=this.linkRange;this.restoreFocus(),this.quill.formatText(n,"link",!1,Ve.sources.USER),delete this.linkRange}t.preventDefault(),this.hide()}),this.quill.on(Ve.events.SELECTION_CHANGE,(t,n,r)=>{if(t!=null){if(t.length===0&&r===Ve.sources.USER){const[o,l]=this.quill.scroll.descendant(_m,t.index);if(o!=null){this.linkRange=new To(t.index-l,o.length());const d=_m.formats(o.domNode);this.preview.textContent=d,this.preview.setAttribute("href",d),this.show();const u=this.quill.getBounds(this.linkRange);u!=null&&this.position(u);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}class $5 extends Pd{constructor(t,n){n.modules.toolbar!=null&&n.modules.toolbar.container==null&&(n.modules.toolbar.container=x9),super(t,n),this.quill.container.classList.add("ql-snow")}extendToolbar(t){t.container!=null&&(t.container.classList.add("ql-snow"),this.buildButtons(t.container.querySelectorAll("button"),xd),this.buildPickers(t.container.querySelectorAll("select"),xd),this.tooltip=new g9(this.quill,this.options.bounds),t.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(n,r)=>{t.handlers.link.call(t,!r.format.link)}))}}$5.DEFAULTS=Pi({},Pd.DEFAULTS,{modules:{toolbar:{handlers:{link(s){if(s){const t=this.quill.getSelection();if(t==null||t.length===0)return;let n=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(n)&&n.indexOf("mailto:")!==0&&(n=`mailto:${n}`);const{tooltip:r}=this.quill.theme;r.edit("link",n)}else this.quill.format("link",!1,be.sources.USER)}}}}});be.register({"attributors/attribute/direction":j5,"attributors/class/align":v5,"attributors/class/background":w7,"attributors/class/color":j7,"attributors/class/direction":w5,"attributors/class/font":C5,"attributors/class/size":E5,"attributors/style/align":y5,"attributors/style/background":a0,"attributors/style/color":r0,"attributors/style/direction":N5,"attributors/style/font":S5,"attributors/style/size":T5},!0);be.register({"formats/align":v5,"formats/direction":w5,"formats/indent":f$,"formats/background":a0,"formats/color":r0,"formats/font":C5,"formats/size":E5,"formats/blockquote":p$,"formats/code-block":Cn,"formats/header":x$,"formats/list":Ad,"formats/bold":d0,"formats/code":i0,"formats/italic":g$,"formats/link":_m,"formats/script":v$,"formats/strike":y$,"formats/underline":b$,"formats/formula":j$,"formats/image":w$,"formats/video":N$,"modules/syntax":_5,"modules/table":C$,"modules/toolbar":m0,"themes/bubble":D5,"themes/snow":$5,"ui/icons":xd,"ui/picker":jh,"ui/icon-picker":O5,"ui/color-picker":I5,"ui/tooltip":L5},!0);var wh=class extends ot.Component{constructor(s){super(s),this.editingAreaRef=p.createRef(),this.containerRef=p.createRef(),this.dirtyProps=["modules","formats","bounds","theme","children"],this.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp","useSemanticHTML"],this.state={generation:0},this.selection=null,this.onEditorChange=(n,r,o,l)=>{n==="text-change"?this.onEditorChangeText?.(this.props.useSemanticHTML!==!1?this.editor.getSemanticHTML():this.editor.root.innerHTML,r,l,this.unprivilegedEditor):n==="selection-change"&&this.onEditorChangeSelection?.(r,l,this.unprivilegedEditor)};const t=this.isControlled()?s.value:s.defaultValue;this.value=t??""}validateProps(s){if(ot.Children.count(s.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(ot.Children.count(s.children)&&ot.Children.only(s.children)?.type==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.");if(this.lastDeltaChangeSet&&s.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")}shouldComponentUpdate(s,t){if(this.validateProps(s),!this.editor||this.state.generation!==t.generation)return!0;if("value"in s){const n=this.getEditorContents(),r=s.value??"";this.isEqualValue(r,n)||this.setEditorContents(this.editor,r)}return s.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,s.readOnly),[...this.cleanProps,...this.dirtyProps].some(n=>!Si(s[n],this.props[n]))}shouldComponentRegenerate(s){return this.dirtyProps.some(t=>!Si(s[t],this.props[t]))}componentDidMount(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())}componentWillUnmount(){this.destroyEditor()}componentDidUpdate(s,t){if(this.editor&&this.shouldComponentRegenerate(s)){const n=this.editor.getContents(),r=this.editor.getSelection();this.regenerationSnapshot={delta:n,selection:r},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.editor&&s.placeholder!==this.props.placeholder&&(this.editor.root.dataset.placeholder=this.props.placeholder||""),this.state.generation!==t.generation){const{delta:n,selection:r}=this.regenerationSnapshot;delete this.regenerationSnapshot,this.instantiateEditor();const o=this.editor;o.setContents(n),xj(()=>this.setEditorSelection(o,r))}}instantiateEditor(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())}destroyEditor(){if(!this.editor)return;this.unhookEditor(this.editor);const s=this.props.modules?.toolbar;if(!(typeof s=="object"&&s&&"container"in s&&typeof s.container=="string"||typeof s=="string")){const n=this.containerRef.current?.querySelector(".ql-toolbar");n&&n.remove()}delete this.editor}isControlled(){return"value"in this.props}getEditorConfig(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,tabIndex:this.props.tabIndex,theme:this.props.theme}}getEditor(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor}createEditor(s,t){const n=new be(s,t);return t.tabIndex!=null&&this.setEditorTabIndex(n,t.tabIndex),this.hookEditor(n),n}hookEditor(s){this.unprivilegedEditor=this.makeUnprivilegedEditor(s),s.on("editor-change",this.onEditorChange)}unhookEditor(s){s.off("editor-change",this.onEditorChange)}getEditorContents(){return this.value}getEditorSelection(){return this.selection}isDelta(s){return s&&s.ops}isEqualValue(s,t){return this.isDelta(s)&&this.isDelta(t)?Si(s.ops,t.ops):Si(s,t)}setEditorContents(s,t){this.value=t;const n=this.getEditorSelection();typeof t=="string"?s.setContents(s.clipboard.convert({html:t})):s.setContents(t),xj(()=>this.setEditorSelection(s,n))}setEditorSelection(s,t){if(this.selection=t,t){const n=s.getLength();t.index=Math.max(0,Math.min(t.index,n-1)),t.length=Math.max(0,Math.min(t.length,n-1-t.index)),s.setSelection(t)}}setEditorTabIndex(s,t){s?.scroll?.domNode&&(s.scroll.domNode.tabIndex=t)}setEditorReadOnly(s,t){t?s.disable():s.enable()}makeUnprivilegedEditor(s){const t=s;return{getHTML:()=>t.root.innerHTML,getSemanticHTML:t.getSemanticHTML.bind(t),getLength:t.getLength.bind(t),getText:t.getText.bind(t),getContents:t.getContents.bind(t),getSelection:t.getSelection.bind(t),getBounds:t.getBounds.bind(t)}}getEditingArea(){const s=this.editingAreaRef.current;if(!s)throw new Error("Cannot find element for editing area");if(s.nodeType===3)throw new Error("Editing area cannot be a text node");return s}renderEditingArea(){const{children:s,preserveWhitespace:t}=this.props,{generation:n}=this.state;return ot.Children.count(s)?ot.cloneElement(ot.Children.only(s),{key:n,ref:this.editingAreaRef}):t?e.jsx("pre",{ref:this.editingAreaRef},n):e.jsx("div",{ref:this.editingAreaRef},n)}render(){return e.jsx("div",{ref:this.containerRef,id:this.props.id,style:this.props.style,className:`quill ${this.props.className??""}`,onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp,children:this.renderEditingArea()},this.state.generation)}onEditorChangeText(s,t,n,r){if(!this.editor)return;const o=this.isDelta(this.value)?r.getContents():this.props.useSemanticHTML!==!1?r.getSemanticHTML():r.getHTML();o!==this.getEditorContents()&&(this.lastDeltaChangeSet=t,this.value=o,this.props.onChange?.(s,t,n,r))}onEditorChangeSelection(s,t,n){if(!this.editor)return;const r=this.getEditorSelection(),o=!r&&s,l=r&&!s;Si(s,r)||(this.selection=s,this.props.onChangeSelection?.(s,t,n),o?this.props.onFocus?.(s,t,n):l&&this.props.onBlur?.(r,t,n))}focus(){this.editor&&this.editor.focus()}blur(){this.editor&&(this.selection=null,this.editor.blur())}};wh.displayName="React Quill";wh.Quill=be;wh.defaultProps={theme:"snow",modules:{},readOnly:!1};function xj(s){Promise.resolve().then(s)}var q5=wh;const{entries:F5,setPrototypeOf:gj,isFrozen:v9,getPrototypeOf:y9,getOwnPropertyDescriptor:b9}=Object;let{freeze:Sn,seal:Er,create:Ux}=Object,{apply:Bx,construct:Hx}=typeof Reflect<"u"&&Reflect;Sn||(Sn=function(t){return t});Er||(Er=function(t){return t});Bx||(Bx=function(t,n){for(var r=arguments.length,o=new Array(r>2?r-2:0),l=2;l<r;l++)o[l-2]=arguments[l];return t.apply(n,o)});Hx||(Hx=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return new t(...r)});const Qu=En(Array.prototype.forEach),j9=En(Array.prototype.lastIndexOf),vj=En(Array.prototype.pop),Fc=En(Array.prototype.push),w9=En(Array.prototype.splice),lm=En(String.prototype.toLowerCase),Fp=En(String.prototype.toString),zp=En(String.prototype.match),zc=En(String.prototype.replace),N9=En(String.prototype.indexOf),k9=En(String.prototype.trim),$r=En(Object.prototype.hasOwnProperty),jn=En(RegExp.prototype.test),Uc=C9(TypeError);function En(s){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return Bx(s,t,r)}}function C9(s){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Hx(s,n)}}function jt(s,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:lm;gj&&gj(s,null);let r=t.length;for(;r--;){let o=t[r];if(typeof o=="string"){const l=n(o);l!==o&&(v9(t)||(t[r]=l),o=l)}s[o]=!0}return s}function S9(s){for(let t=0;t<s.length;t++)$r(s,t)||(s[t]=null);return s}function fa(s){const t=Ux(null);for(const[n,r]of F5(s))$r(s,n)&&(Array.isArray(r)?t[n]=S9(r):r&&typeof r=="object"&&r.constructor===Object?t[n]=fa(r):t[n]=r);return t}function Bc(s,t){for(;s!==null;){const r=b9(s,t);if(r){if(r.get)return En(r.get);if(typeof r.value=="function")return En(r.value)}s=y9(s)}function n(){return null}return n}const yj=Sn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Up=Sn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Bp=Sn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),E9=Sn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Hp=Sn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),T9=Sn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),bj=Sn(["#text"]),jj=Sn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Kp=Sn(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),wj=Sn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Yu=Sn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),A9=Er(/\{\{[\w\W]*|[\w\W]*\}\}/gm),P9=Er(/<%[\w\W]*|[\w\W]*%>/gm),R9=Er(/\$\{[\w\W]*/gm),_9=Er(/^data-[\-\w.\u00B7-\uFFFF]+$/),I9=Er(/^aria-[\-\w]+$/),z5=Er(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),O9=Er(/^(?:\w+script|data):/i),L9=Er(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),U5=Er(/^html$/i),M9=Er(/^[a-z][.\w]*(-[.\w]+)+$/i);var Nj=Object.freeze({__proto__:null,ARIA_ATTR:I9,ATTR_WHITESPACE:L9,CUSTOM_ELEMENT:M9,DATA_ATTR:_9,DOCTYPE_NAME:U5,ERB_EXPR:P9,IS_ALLOWED_URI:z5,IS_SCRIPT_OR_DATA:O9,MUSTACHE_EXPR:A9,TMPLIT_EXPR:R9});const Hc={element:1,text:3,progressingInstruction:7,comment:8,document:9},D9=function(){return typeof window>"u"?null:window},$9=function(t,n){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let r=null;const o="data-tt-policy-suffix";n&&n.hasAttribute(o)&&(r=n.getAttribute(o));const l="dompurify"+(r?"#"+r:"");try{return t.createPolicy(l,{createHTML(d){return d},createScriptURL(d){return d}})}catch{return console.warn("TrustedTypes policy "+l+" could not be created."),null}},kj=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function B5(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:D9();const t=Ye=>B5(Ye);if(t.version="3.3.1",t.removed=[],!s||!s.document||s.document.nodeType!==Hc.document||!s.Element)return t.isSupported=!1,t;let{document:n}=s;const r=n,o=r.currentScript,{DocumentFragment:l,HTMLTemplateElement:d,Node:u,Element:h,NodeFilter:f,NamedNodeMap:v=s.NamedNodeMap||s.MozNamedAttrMap,HTMLFormElement:x,DOMParser:g,trustedTypes:j}=s,N=h.prototype,b=Bc(N,"cloneNode"),k=Bc(N,"remove"),E=Bc(N,"nextSibling"),S=Bc(N,"childNodes"),T=Bc(N,"parentNode");if(typeof d=="function"){const Ye=n.createElement("template");Ye.content&&Ye.content.ownerDocument&&(n=Ye.content.ownerDocument)}let P,H="";const{implementation:re,createNodeIterator:B,createDocumentFragment:Q,getElementsByTagName:G}=n,{importNode:ue}=r;let _=kj();t.isSupported=typeof F5=="function"&&typeof T=="function"&&re&&re.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Y,ERB_EXPR:z,TMPLIT_EXPR:J,DATA_ATTR:X,ARIA_ATTR:$,IS_SCRIPT_OR_DATA:I,ATTR_WHITESPACE:A,CUSTOM_ELEMENT:W}=Nj;let{IS_ALLOWED_URI:Z}=Nj,q=null;const ne=jt({},[...yj,...Up,...Bp,...Hp,...bj]);let K=null;const U=jt({},[...jj,...Kp,...wj,...Yu]);let M=Object.seal(Ux(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),F=null,ie=null;const fe=Object.seal(Ux(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let Ee=!0,Ne=!0,Pe=!1,$e=!0,Ue=!1,et=!0,ct=!1,Bt=!1,Yt=!1,ps=!1,ks=!1,cs=!1,xs=!0,Et=!1;const Lt="user-content-";let wt=!0,me=!1,Le={},nt=null;const St=jt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Xt=null;const Ft=jt({},["audio","video","img","source","image","track"]);let D=null;const ge=jt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ge="http://www.w3.org/1998/Math/MathML",Nt="http://www.w3.org/2000/svg",rt="http://www.w3.org/1999/xhtml";let Pt=rt,Us=!1,Qs=null;const Is=jt({},[Ge,Nt,rt],Fp);let Ys=jt({},["mi","mo","mn","ms","mtext"]),Os=jt({},["annotation-xml"]);const Bs=jt({},["title","style","font","a","script"]);let Hs=null;const An=["application/xhtml+xml","text/html"],le="text/html";let Qe=null,Rt=null;const As=n.createElement("form"),ir=function(se){return se instanceof RegExp||se instanceof Function},Ls=function(){let se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Rt&&Rt===se)){if((!se||typeof se!="object")&&(se={}),se=fa(se),Hs=An.indexOf(se.PARSER_MEDIA_TYPE)===-1?le:se.PARSER_MEDIA_TYPE,Qe=Hs==="application/xhtml+xml"?Fp:lm,q=$r(se,"ALLOWED_TAGS")?jt({},se.ALLOWED_TAGS,Qe):ne,K=$r(se,"ALLOWED_ATTR")?jt({},se.ALLOWED_ATTR,Qe):U,Qs=$r(se,"ALLOWED_NAMESPACES")?jt({},se.ALLOWED_NAMESPACES,Fp):Is,D=$r(se,"ADD_URI_SAFE_ATTR")?jt(fa(ge),se.ADD_URI_SAFE_ATTR,Qe):ge,Xt=$r(se,"ADD_DATA_URI_TAGS")?jt(fa(Ft),se.ADD_DATA_URI_TAGS,Qe):Ft,nt=$r(se,"FORBID_CONTENTS")?jt({},se.FORBID_CONTENTS,Qe):St,F=$r(se,"FORBID_TAGS")?jt({},se.FORBID_TAGS,Qe):fa({}),ie=$r(se,"FORBID_ATTR")?jt({},se.FORBID_ATTR,Qe):fa({}),Le=$r(se,"USE_PROFILES")?se.USE_PROFILES:!1,Ee=se.ALLOW_ARIA_ATTR!==!1,Ne=se.ALLOW_DATA_ATTR!==!1,Pe=se.ALLOW_UNKNOWN_PROTOCOLS||!1,$e=se.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ue=se.SAFE_FOR_TEMPLATES||!1,et=se.SAFE_FOR_XML!==!1,ct=se.WHOLE_DOCUMENT||!1,ps=se.RETURN_DOM||!1,ks=se.RETURN_DOM_FRAGMENT||!1,cs=se.RETURN_TRUSTED_TYPE||!1,Yt=se.FORCE_BODY||!1,xs=se.SANITIZE_DOM!==!1,Et=se.SANITIZE_NAMED_PROPS||!1,wt=se.KEEP_CONTENT!==!1,me=se.IN_PLACE||!1,Z=se.ALLOWED_URI_REGEXP||z5,Pt=se.NAMESPACE||rt,Ys=se.MATHML_TEXT_INTEGRATION_POINTS||Ys,Os=se.HTML_INTEGRATION_POINTS||Os,M=se.CUSTOM_ELEMENT_HANDLING||{},se.CUSTOM_ELEMENT_HANDLING&&ir(se.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(M.tagNameCheck=se.CUSTOM_ELEMENT_HANDLING.tagNameCheck),se.CUSTOM_ELEMENT_HANDLING&&ir(se.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(M.attributeNameCheck=se.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),se.CUSTOM_ELEMENT_HANDLING&&typeof se.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(M.allowCustomizedBuiltInElements=se.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ue&&(Ne=!1),ks&&(ps=!0),Le&&(q=jt({},bj),K=[],Le.html===!0&&(jt(q,yj),jt(K,jj)),Le.svg===!0&&(jt(q,Up),jt(K,Kp),jt(K,Yu)),Le.svgFilters===!0&&(jt(q,Bp),jt(K,Kp),jt(K,Yu)),Le.mathMl===!0&&(jt(q,Hp),jt(K,wj),jt(K,Yu))),se.ADD_TAGS&&(typeof se.ADD_TAGS=="function"?fe.tagCheck=se.ADD_TAGS:(q===ne&&(q=fa(q)),jt(q,se.ADD_TAGS,Qe))),se.ADD_ATTR&&(typeof se.ADD_ATTR=="function"?fe.attributeCheck=se.ADD_ATTR:(K===U&&(K=fa(K)),jt(K,se.ADD_ATTR,Qe))),se.ADD_URI_SAFE_ATTR&&jt(D,se.ADD_URI_SAFE_ATTR,Qe),se.FORBID_CONTENTS&&(nt===St&&(nt=fa(nt)),jt(nt,se.FORBID_CONTENTS,Qe)),se.ADD_FORBID_CONTENTS&&(nt===St&&(nt=fa(nt)),jt(nt,se.ADD_FORBID_CONTENTS,Qe)),wt&&(q["#text"]=!0),ct&&jt(q,["html","head","body"]),q.table&&(jt(q,["tbody"]),delete F.tbody),se.TRUSTED_TYPES_POLICY){if(typeof se.TRUSTED_TYPES_POLICY.createHTML!="function")throw Uc('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof se.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Uc('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');P=se.TRUSTED_TYPES_POLICY,H=P.createHTML("")}else P===void 0&&(P=$9(j,o)),P!==null&&typeof H=="string"&&(H=P.createHTML(""));Sn&&Sn(se),Rt=se}},ra=jt({},[...Up,...Bp,...E9]),or=jt({},[...Hp,...T9]),Ki=function(se){let ke=T(se);(!ke||!ke.tagName)&&(ke={namespaceURI:Pt,tagName:"template"});const Be=lm(se.tagName),Ut=lm(ke.tagName);return Qs[se.namespaceURI]?se.namespaceURI===Nt?ke.namespaceURI===rt?Be==="svg":ke.namespaceURI===Ge?Be==="svg"&&(Ut==="annotation-xml"||Ys[Ut]):!!ra[Be]:se.namespaceURI===Ge?ke.namespaceURI===rt?Be==="math":ke.namespaceURI===Nt?Be==="math"&&Os[Ut]:!!or[Be]:se.namespaceURI===rt?ke.namespaceURI===Nt&&!Os[Ut]||ke.namespaceURI===Ge&&!Ys[Ut]?!1:!or[Be]&&(Bs[Be]||!ra[Be]):!!(Hs==="application/xhtml+xml"&&Qs[se.namespaceURI]):!1},Cs=function(se){Fc(t.removed,{element:se});try{T(se).removeChild(se)}catch{k(se)}},Ks=function(se,ke){try{Fc(t.removed,{attribute:ke.getAttributeNode(se),from:ke})}catch{Fc(t.removed,{attribute:null,from:ke})}if(ke.removeAttribute(se),se==="is")if(ps||ks)try{Cs(ke)}catch{}else try{ke.setAttribute(se,"")}catch{}},ts=function(se){let ke=null,Be=null;if(Yt)se="<remove></remove>"+se;else{const Zt=zp(se,/^[\r\n\t ]+/);Be=Zt&&Zt[0]}Hs==="application/xhtml+xml"&&Pt===rt&&(se='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+se+"</body></html>");const Ut=P?P.createHTML(se):se;if(Pt===rt)try{ke=new g().parseFromString(Ut,Hs)}catch{}if(!ke||!ke.documentElement){ke=re.createDocument(Pt,"template",null);try{ke.documentElement.innerHTML=Us?H:Ut}catch{}}const ht=ke.body||ke.documentElement;return se&&Be&&ht.insertBefore(n.createTextNode(Be),ht.childNodes[0]||null),Pt===rt?G.call(ke,ct?"html":"body")[0]:ct?ke.documentElement:ht},aa=function(se){return B.call(se.ownerDocument||se,se,f.SHOW_ELEMENT|f.SHOW_COMMENT|f.SHOW_TEXT|f.SHOW_PROCESSING_INSTRUCTION|f.SHOW_CDATA_SECTION,null)},Sa=function(se){return se instanceof x&&(typeof se.nodeName!="string"||typeof se.textContent!="string"||typeof se.removeChild!="function"||!(se.attributes instanceof v)||typeof se.removeAttribute!="function"||typeof se.setAttribute!="function"||typeof se.namespaceURI!="string"||typeof se.insertBefore!="function"||typeof se.hasChildNodes!="function")},Ja=function(se){return typeof u=="function"&&se instanceof u};function pn(Ye,se,ke){Qu(Ye,Be=>{Be.call(t,se,ke,Rt)})}const Pn=function(se){let ke=null;if(pn(_.beforeSanitizeElements,se,null),Sa(se))return Cs(se),!0;const Be=Qe(se.nodeName);if(pn(_.uponSanitizeElement,se,{tagName:Be,allowedTags:q}),et&&se.hasChildNodes()&&!Ja(se.firstElementChild)&&jn(/<[/\w!]/g,se.innerHTML)&&jn(/<[/\w!]/g,se.textContent)||se.nodeType===Hc.progressingInstruction||et&&se.nodeType===Hc.comment&&jn(/<[/\w]/g,se.data))return Cs(se),!0;if(!(fe.tagCheck instanceof Function&&fe.tagCheck(Be))&&(!q[Be]||F[Be])){if(!F[Be]&&Ea(Be)&&(M.tagNameCheck instanceof RegExp&&jn(M.tagNameCheck,Be)||M.tagNameCheck instanceof Function&&M.tagNameCheck(Be)))return!1;if(wt&&!nt[Be]){const Ut=T(se)||se.parentNode,ht=S(se)||se.childNodes;if(ht&&Ut){const Zt=ht.length;for(let js=Zt-1;js>=0;--js){const Ms=b(ht[js],!0);Ms.__removalCount=(se.__removalCount||0)+1,Ut.insertBefore(Ms,E(se))}}}return Cs(se),!0}return se instanceof h&&!Ki(se)||(Be==="noscript"||Be==="noembed"||Be==="noframes")&&jn(/<\/no(script|embed|frames)/i,se.innerHTML)?(Cs(se),!0):(Ue&&se.nodeType===Hc.text&&(ke=se.textContent,Qu([Y,z,J],Ut=>{ke=zc(ke,Ut," ")}),se.textContent!==ke&&(Fc(t.removed,{element:se.cloneNode()}),se.textContent=ke)),pn(_.afterSanitizeElements,se,null),!1)},bs=function(se,ke,Be){if(xs&&(ke==="id"||ke==="name")&&(Be in n||Be in As))return!1;if(!(Ne&&!ie[ke]&&jn(X,ke))){if(!(Ee&&jn($,ke))){if(!(fe.attributeCheck instanceof Function&&fe.attributeCheck(ke,se))){if(!K[ke]||ie[ke]){if(!(Ea(se)&&(M.tagNameCheck instanceof RegExp&&jn(M.tagNameCheck,se)||M.tagNameCheck instanceof Function&&M.tagNameCheck(se))&&(M.attributeNameCheck instanceof RegExp&&jn(M.attributeNameCheck,ke)||M.attributeNameCheck instanceof Function&&M.attributeNameCheck(ke,se))||ke==="is"&&M.allowCustomizedBuiltInElements&&(M.tagNameCheck instanceof RegExp&&jn(M.tagNameCheck,Be)||M.tagNameCheck instanceof Function&&M.tagNameCheck(Be))))return!1}else if(!D[ke]){if(!jn(Z,zc(Be,A,""))){if(!((ke==="src"||ke==="xlink:href"||ke==="href")&&se!=="script"&&N9(Be,"data:")===0&&Xt[se])){if(!(Pe&&!jn(I,zc(Be,A,"")))){if(Be)return!1}}}}}}}return!0},Ea=function(se){return se!=="annotation-xml"&&zp(se,W)},ei=function(se){pn(_.beforeSanitizeAttributes,se,null);const{attributes:ke}=se;if(!ke||Sa(se))return;const Be={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:K,forceKeepAttr:void 0};let Ut=ke.length;for(;Ut--;){const ht=ke[Ut],{name:Zt,namespaceURI:js,value:Ms}=ht,on=Qe(Zt),lr=Ms;let zt=Zt==="value"?lr:k9(lr);if(Be.attrName=on,Be.attrValue=zt,Be.keepAttr=!0,Be.forceKeepAttr=void 0,pn(_.uponSanitizeAttribute,se,Be),zt=Be.attrValue,Et&&(on==="id"||on==="name")&&(Ks(Zt,se),zt=Lt+zt),et&&jn(/((--!?|])>)|<\/(style|title|textarea)/i,zt)){Ks(Zt,se);continue}if(on==="attributename"&&zp(zt,"href")){Ks(Zt,se);continue}if(Be.forceKeepAttr)continue;if(!Be.keepAttr){Ks(Zt,se);continue}if(!$e&&jn(/\/>/i,zt)){Ks(Zt,se);continue}Ue&&Qu([Y,z,J],Xs=>{zt=zc(zt,Xs," ")});const Kn=Qe(se.nodeName);if(!bs(Kn,on,zt)){Ks(Zt,se);continue}if(P&&typeof j=="object"&&typeof j.getAttributeType=="function"&&!js)switch(j.getAttributeType(Kn,on)){case"TrustedHTML":{zt=P.createHTML(zt);break}case"TrustedScriptURL":{zt=P.createScriptURL(zt);break}}if(zt!==lr)try{js?se.setAttributeNS(js,Zt,zt):se.setAttribute(Zt,zt),Sa(se)?Cs(se):vj(t.removed)}catch{Ks(Zt,se)}}pn(_.afterSanitizeAttributes,se,null)},ti=function Ye(se){let ke=null;const Be=aa(se);for(pn(_.beforeSanitizeShadowDOM,se,null);ke=Be.nextNode();)pn(_.uponSanitizeShadowNode,ke,null),Pn(ke),ei(ke),ke.content instanceof l&&Ye(ke.content);pn(_.afterSanitizeShadowDOM,se,null)};return t.sanitize=function(Ye){let se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ke=null,Be=null,Ut=null,ht=null;if(Us=!Ye,Us&&(Ye="<!-->"),typeof Ye!="string"&&!Ja(Ye))if(typeof Ye.toString=="function"){if(Ye=Ye.toString(),typeof Ye!="string")throw Uc("dirty is not a string, aborting")}else throw Uc("toString is not a function");if(!t.isSupported)return Ye;if(Bt||Ls(se),t.removed=[],typeof Ye=="string"&&(me=!1),me){if(Ye.nodeName){const Ms=Qe(Ye.nodeName);if(!q[Ms]||F[Ms])throw Uc("root node is forbidden and cannot be sanitized in-place")}}else if(Ye instanceof u)ke=ts("<!---->"),Be=ke.ownerDocument.importNode(Ye,!0),Be.nodeType===Hc.element&&Be.nodeName==="BODY"||Be.nodeName==="HTML"?ke=Be:ke.appendChild(Be);else{if(!ps&&!Ue&&!ct&&Ye.indexOf("<")===-1)return P&&cs?P.createHTML(Ye):Ye;if(ke=ts(Ye),!ke)return ps?null:cs?H:""}ke&&Yt&&Cs(ke.firstChild);const Zt=aa(me?Ye:ke);for(;Ut=Zt.nextNode();)Pn(Ut),ei(Ut),Ut.content instanceof l&&ti(Ut.content);if(me)return Ye;if(ps){if(ks)for(ht=Q.call(ke.ownerDocument);ke.firstChild;)ht.appendChild(ke.firstChild);else ht=ke;return(K.shadowroot||K.shadowrootmode)&&(ht=ue.call(r,ht,!0)),ht}let js=ct?ke.outerHTML:ke.innerHTML;return ct&&q["!doctype"]&&ke.ownerDocument&&ke.ownerDocument.doctype&&ke.ownerDocument.doctype.name&&jn(U5,ke.ownerDocument.doctype.name)&&(js="<!DOCTYPE "+ke.ownerDocument.doctype.name+`>
`+js),Ue&&Qu([Y,z,J],Ms=>{js=zc(js,Ms," ")}),P&&cs?P.createHTML(js):js},t.setConfig=function(){let Ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ls(Ye),Bt=!0},t.clearConfig=function(){Rt=null,Bt=!1},t.isValidAttribute=function(Ye,se,ke){Rt||Ls({});const Be=Qe(Ye),Ut=Qe(se);return bs(Be,Ut,ke)},t.addHook=function(Ye,se){typeof se=="function"&&Fc(_[Ye],se)},t.removeHook=function(Ye,se){if(se!==void 0){const ke=j9(_[Ye],se);return ke===-1?void 0:w9(_[Ye],ke,1)[0]}return vj(_[Ye])},t.removeHooks=function(Ye){_[Ye]=[]},t.removeAllHooks=function(){_=kj()},t}var q9=B5();function F9({value:s,onChange:t,placeholder:n,className:r}){const o=p.useRef(null),l=p.useMemo(()=>({toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],["link"],["clean"]]}),[]),d=["header","bold","italic","underline","strike","color","background","blockquote","code-block","list","indent","link"];return e.jsx("div",{className:`quill-wrapper ${r||""}`,"data-testid":"quill-editor",children:e.jsx(q5,{ref:o,theme:"snow",value:s,onChange:t,modules:l,formats:d,placeholder:n||"Start typing..."})})}function H5(s){return s?new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):""}function z9({question:s,onClose:t}){const{toast:n}=mt(),[r,o]=p.useState(s.answer||""),[l,d]=p.useState(s.isPublic??!0),u=we({mutationFn:f=>je("PATCH",`/api/qa/questions/${s.id}`,f),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/qa/questions"]}),n({title:"Answer saved"}),t()},onError:()=>n({title:"Failed to save answer",variant:"destructive"})});function h(){const f=r.trim()?"answered":"unanswered";u.mutate({answer:r.trim(),status:f,isPublic:l})}return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx(L,{variant:"ghost",size:"icon",onClick:t,"data-testid":"button-back-questions",children:e.jsx(va,{className:"w-4 h-4"})}),e.jsx("h2",{className:"text-lg font-semibold","data-testid":"text-answer-editor-title",children:"Answer Question"}),e.jsxs("div",{className:"ml-auto flex items-center gap-2 flex-wrap",children:[e.jsxs(L,{variant:"outline",size:"sm",onClick:()=>d(!l),"data-testid":"button-toggle-visibility",children:[l?e.jsx(Oo,{className:"w-4 h-4 mr-1.5"}):e.jsx(Hm,{className:"w-4 h-4 mr-1.5"}),l?"Public":"Hidden"]}),e.jsxs(L,{onClick:h,disabled:u.isPending,"data-testid":"button-save-answer",children:[u.isPending?e.jsx(We,{className:"w-4 h-4 animate-spin"}):e.jsx(Vm,{className:"w-4 h-4"}),e.jsx("span",{className:"ml-2",children:"Save"})]})]})]}),e.jsxs(ce,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-sm text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:s.authorName}),e.jsx("span",{children:""}),e.jsx("span",{children:s.authorEmail}),e.jsx("span",{children:""}),e.jsx(Wt,{className:"w-3 h-3"}),e.jsx("span",{children:H5(s.createdAt)})]}),e.jsx("p",{className:"text-foreground whitespace-pre-wrap","data-testid":"text-question-content",children:s.question})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Your Answer"}),e.jsx(F9,{value:r,onChange:o,placeholder:"Write your answer here... Use the toolbar to format text, add headings, code blocks, callouts (blockquotes), and more."})]})]})}function U9(){Un("Q&A");const{toast:s}=mt(),[t,n]=p.useState(""),[r,o]=p.useState("all"),[l,d]=p.useState(null),[u,h]=p.useState(null),{data:f,isLoading:v}=_e({queryKey:["/api/qa/questions"]}),x=we({mutationFn:b=>je("DELETE",`/api/qa/questions/${b}`),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/qa/questions"]}),s({title:"Question deleted"}),h(null)},onError:()=>s({title:"Failed to delete question",variant:"destructive"})});if(l)return e.jsx("div",{className:"p-4 sm:p-6 max-w-4xl mx-auto",children:e.jsx(z9,{question:l,onClose:()=>d(null)})});const g=(f||[]).filter(b=>{const k=!t||b.question.toLowerCase().includes(t.toLowerCase())||b.authorName.toLowerCase().includes(t.toLowerCase()),E=r==="all"||b.status===r;return k&&E}),j=(f||[]).filter(b=>b.status==="unanswered").length,N=(f||[]).filter(b=>b.status==="answered").length;return e.jsxs("div",{className:"p-4 sm:p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Kt,{className:"w-6 h-6 text-primary"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold","data-testid":"text-page-title",children:"Q&A"}),e.jsxs("p",{className:"text-sm text-muted-foreground","data-testid":"text-question-count",children:[j," unanswered, ",N," answered"]})]})]})}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[e.jsx(sn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(Oe,{value:t,onChange:b=>n(b.target.value),placeholder:"Search questions...",className:"pl-9","data-testid":"input-search-questions"})]}),e.jsxs(Dt,{value:r,onValueChange:o,children:[e.jsx(It,{className:"w-[160px]","data-testid":"select-filter-status",children:e.jsx($t,{})}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"all",children:"All Questions"}),e.jsx(Ie,{value:"unanswered",children:"Unanswered"}),e.jsx(Ie,{value:"answered",children:"Answered"})]})]})]}),v?e.jsx("div",{className:"space-y-3",children:[1,2,3].map(b=>e.jsxs(ce,{className:"p-4",children:[e.jsx(ye,{className:"h-5 w-2/3 mb-2"}),e.jsx(ye,{className:"h-4 w-full mb-1"}),e.jsx(ye,{className:"h-4 w-1/3"})]},b))}):g.length===0?e.jsxs(ce,{className:"p-8 text-center",children:[e.jsx(Kt,{className:"w-10 h-10 mx-auto mb-3 text-muted-foreground/50"}),e.jsx("p",{className:"text-muted-foreground font-medium","data-testid":"text-empty-state",children:t||r!=="all"?"No questions match your filters":"No questions yet"}),e.jsx("p",{className:"text-sm text-muted-foreground/70 mt-1",children:"Questions submitted by visitors will appear here for you to answer."})]}):e.jsx("div",{className:"space-y-3",children:g.map(b=>e.jsx(ce,{className:"p-4 hover-elevate cursor-pointer",onClick:()=>d(b),"data-testid":`card-question-${b.id}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-1",children:[e.jsx(Ce,{variant:b.status==="answered"?"default":"secondary",className:"text-xs no-default-active-elevate","data-testid":`badge-status-${b.id}`,children:b.status==="answered"?e.jsxs(e.Fragment,{children:[e.jsx(ys,{className:"w-3 h-3 mr-1"})," Answered"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ii,{className:"w-3 h-3 mr-1"})," Unanswered"]})}),!b.isPublic&&e.jsxs(Ce,{variant:"outline",className:"text-xs no-default-active-elevate",children:[e.jsx(Hm,{className:"w-3 h-3 mr-1"})," Hidden"]})]}),e.jsx("p",{className:"text-foreground line-clamp-2 mb-1","data-testid":`text-question-${b.id}`,children:b.question}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-muted-foreground/70 flex-wrap",children:[e.jsx("span",{children:b.authorName}),e.jsx("span",{children:""}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Wt,{className:"w-3 h-3"}),H5(b.createdAt)]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",onClick:k=>k.stopPropagation(),children:[e.jsx(L,{variant:"ghost",size:"icon",onClick:()=>d(b),"data-testid":`button-answer-${b.id}`,children:e.jsx(os,{className:"w-4 h-4"})}),e.jsx(L,{variant:"ghost",size:"icon",onClick:()=>h(b.id),"data-testid":`button-delete-${b.id}`,children:e.jsx(ls,{className:"w-4 h-4"})})]})]})},b.id))}),e.jsx(yt,{open:!!u,onOpenChange:()=>h(null),children:e.jsxs(xt,{children:[e.jsxs(gt,{children:[e.jsx(vt,{children:"Delete Question"}),e.jsx($i,{children:"Are you sure you want to delete this question? This action cannot be undone."})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[e.jsx(L,{variant:"outline",onClick:()=>h(null),"data-testid":"button-cancel-delete",children:"Cancel"}),e.jsxs(L,{variant:"destructive",onClick:()=>u&&x.mutate(u),disabled:x.isPending,"data-testid":"button-confirm-delete",children:[x.isPending?e.jsx(We,{className:"w-4 h-4 animate-spin mr-2"}):null,"Delete"]})]})]})})]})}function Cj(s){return s?new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):""}function B9({question:s}){const[t,n]=p.useState(!1),r=s.status==="answered"&&s.answer;return e.jsxs("div",{className:"border border-white/5 rounded-md bg-white/[0.02] overflow-hidden","data-testid":`qa-item-${s.id}`,children:[e.jsxs("button",{onClick:()=>n(!t),className:"w-full text-left p-4 sm:p-5 flex items-start gap-3","data-testid":`button-toggle-${s.id}`,children:[e.jsx("div",{className:"mt-0.5 flex-shrink-0",children:r?e.jsx(ys,{className:"w-5 h-5 text-emerald-400"}):e.jsx(Ii,{className:"w-5 h-5 text-white/30"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-white font-medium text-sm sm:text-base leading-relaxed","data-testid":`text-question-${s.id}`,children:s.question}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-white/30 flex-wrap",children:[e.jsx("span",{children:s.authorName}),e.jsx("span",{children:""}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Wt,{className:"w-3 h-3"}),Cj(s.createdAt)]}),r&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:""}),e.jsx("span",{className:"text-emerald-400/70",children:"Answered"})]})]})]}),e.jsx("div",{className:"flex-shrink-0 mt-1",children:t?e.jsx(Io,{className:"w-5 h-5 text-white/30"}):e.jsx(Sr,{className:"w-5 h-5 text-white/30"})})]}),t&&e.jsx("div",{className:"border-t border-white/5 p-4 sm:p-5 bg-white/[0.01]",children:r?e.jsxs("div",{"data-testid":`text-answer-${s.id}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 text-xs text-white/30",children:[e.jsx(ys,{className:"w-3.5 h-3.5 text-emerald-400"}),e.jsxs("span",{children:["Answered ",s.answeredAt?Cj(s.answeredAt):""]})]}),e.jsx("div",{className:"rich-content rich-content-dark text-white/70 text-sm leading-relaxed",dangerouslySetInnerHTML:{__html:q9.sanitize(s.answer||"",{ALLOWED_TAGS:["h1","h2","h3","p","br","strong","em","u","s","a","ul","ol","li","blockquote","pre","code","span"],ALLOWED_ATTR:["href","target","rel","class","style"]})}})]}):e.jsx("p",{className:"text-white/40 text-sm italic","data-testid":`text-pending-${s.id}`,children:"This question hasn't been answered yet. Check back soon!"})})]})}function H9(){const{toast:s}=mt(),[t,n]=p.useState(!1),[r,o]=p.useState(""),[l,d]=p.useState("all"),[u,h]=p.useState(""),[f,v]=p.useState(""),[x,g]=p.useState(""),{data:j,isLoading:N}=_e({queryKey:["/api/public/qa/questions"]}),b=we({mutationFn:async P=>(await je("POST","/api/public/qa/questions",P)).json(),onSuccess:()=>{s({title:"Question submitted!",description:"We'll answer your question soon."}),n(!1),h(""),v(""),g(""),xe.invalidateQueries({queryKey:["/api/public/qa/questions"]})},onError:()=>{s({title:"Something went wrong",description:"Please try again.",variant:"destructive"})}});function k(){if(!u.trim()||!f.trim()||!x.trim()){s({title:"All fields are required",variant:"destructive"});return}b.mutate({authorName:u.trim(),authorEmail:f.trim(),question:x.trim()})}const E=(j||[]).filter(P=>{const H=!r||P.question.toLowerCase().includes(r.toLowerCase())||P.answer&&P.answer.toLowerCase().includes(r.toLowerCase()),re=l==="all"||l==="answered"&&P.status==="answered"||l==="unanswered"&&P.status==="unanswered";return H&&re}),S=(j||[]).filter(P=>P.status==="answered").length,T=(j||[]).length;return e.jsxs("div",{className:"min-h-screen bg-[#0a0a0f] text-white",style:{backgroundImage:"radial-gradient(circle, rgba(255,255,255,0.12) 1px, transparent 1px)",backgroundSize:"24px 24px"},children:[e.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 border-b border-white/5",style:{backdropFilter:"blur(20px)",backgroundColor:"rgba(10,10,15,0.8)"},children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 h-14 flex items-center justify-between gap-3",children:[e.jsx(Ha,{href:"/",children:e.jsxs("div",{className:"flex items-center gap-2.5 cursor-pointer",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-md bg-gradient-to-br from-blue-500 to-violet-600",children:e.jsx($n,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"text-base font-semibold tracking-tight","data-testid":"text-brand-name",children:"AI Powered Sites"})]})}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs(L,{onClick:()=>n(!0),className:"bg-gradient-to-r from-blue-500 to-violet-600 border-0 text-white font-medium","data-testid":"button-ask-question",children:[e.jsx(os,{className:"w-4 h-4 mr-1.5"}),"Ask a Question"]})})]})}),e.jsxs("div",{className:"pt-14",children:[e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 py-12 sm:py-16",children:[e.jsxs("div",{className:"text-center mb-10 sm:mb-14",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-white/5 border border-white/10 mb-4 sm:mb-6",children:[e.jsx(Kt,{className:"w-4 h-4 text-violet-400"}),e.jsx("span",{className:"text-sm text-white/70",children:"Community Q&A"})]}),e.jsxs("h1",{className:"text-2xl sm:text-3xl md:text-5xl font-bold tracking-tight mb-3 sm:mb-4","data-testid":"text-qa-title",children:["Questions &"," ",e.jsx("span",{className:"bg-gradient-to-r from-blue-400 to-violet-400 bg-clip-text text-transparent",children:"Answers"})]}),e.jsx("p",{className:"text-white/50 text-sm sm:text-lg max-w-2xl mx-auto",children:"Got a question? Browse existing answers or ask your own. We're here to help."}),T>0&&e.jsxs("p",{className:"text-white/30 text-sm mt-3","data-testid":"text-qa-stats",children:[T," question",T!==1?"s":"","  ",S," answered"]})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap mb-6",children:[e.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[e.jsx(sn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-white/30"}),e.jsx("input",{value:r,onChange:P=>o(P.target.value),placeholder:"Search questions...",className:"w-full pl-9 pr-4 py-2.5 rounded-md bg-white/5 border border-white/10 text-sm text-white placeholder:text-white/30 focus:outline-none focus:border-white/20","data-testid":"input-search-qa"})]}),e.jsx("div",{className:"flex items-center gap-1.5",children:["all","answered","unanswered"].map(P=>e.jsx("button",{onClick:()=>d(P),className:`px-3 py-2 rounded-md text-xs font-medium transition-colors ${l===P?"bg-white/10 text-white":"text-white/40 hover:text-white/60"}`,"data-testid":`button-filter-${P}`,children:P==="all"?"All":P==="answered"?"Answered":"Unanswered"},P))})]}),N?e.jsx("div",{className:"space-y-3",children:[1,2,3].map(P=>e.jsxs("div",{className:"border border-white/5 rounded-md p-5 bg-white/[0.02]",children:[e.jsx("div",{className:"h-5 w-3/4 bg-white/5 rounded animate-pulse mb-2"}),e.jsx("div",{className:"h-4 w-1/3 bg-white/5 rounded animate-pulse"})]},P))}):E.length===0?e.jsxs("div",{className:"text-center py-16 border border-white/5 rounded-md bg-white/[0.02]",children:[e.jsx(Kt,{className:"w-10 h-10 mx-auto mb-3 text-white/10"}),e.jsx("p",{className:"text-white/40 font-medium","data-testid":"text-empty-state",children:r||l!=="all"?"No questions match your search":"No questions yet"}),e.jsx("p",{className:"text-white/20 text-sm mt-1 mb-4",children:"Be the first to ask a question!"}),e.jsxs(L,{onClick:()=>n(!0),className:"bg-gradient-to-r from-blue-500 to-violet-600 border-0 text-white","data-testid":"button-ask-first",children:[e.jsx(os,{className:"w-4 h-4 mr-1.5"}),"Ask a Question"]})]}):e.jsx("div",{className:"space-y-3",children:E.map(P=>e.jsx(B9,{question:P},P.id))})]}),e.jsx("footer",{className:"border-t border-white/5 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsx(Ha,{href:"/",children:e.jsxs("span",{className:"text-sm text-white/30 hover:text-white/50 transition-colors cursor-pointer","data-testid":"link-back-home",children:[e.jsx(va,{className:"w-3.5 h-3.5 inline mr-1.5"}),"Back to AI Powered Sites"]})}),e.jsxs("p",{className:"text-xs text-white/20",children:[" ",new Date().getFullYear()," AI Powered Sites"]})]})})]}),e.jsx(yt,{open:t,onOpenChange:n,children:e.jsxs(xt,{className:"bg-[#12121a] border-white/10 text-white max-w-lg",children:[e.jsxs(gt,{children:[e.jsxs(vt,{className:"text-white flex items-center gap-2",children:[e.jsx(Kt,{className:"w-5 h-5 text-violet-400"}),"Ask a Question"]}),e.jsx($i,{className:"text-white/50",children:"Your question will be visible to everyone once submitted."})]}),e.jsxs("div",{className:"space-y-4 mt-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-white/60",children:"Your Name"}),e.jsx("input",{value:u,onChange:P=>h(P.target.value),placeholder:"John Doe",className:"w-full px-3 py-2.5 rounded-md bg-white/5 border border-white/10 text-sm text-white placeholder:text-white/30 focus:outline-none focus:border-white/20","data-testid":"input-qa-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-white/60",children:"Email"}),e.jsx("input",{value:f,onChange:P=>v(P.target.value),placeholder:"john@example.com",type:"email",className:"w-full px-3 py-2.5 rounded-md bg-white/5 border border-white/10 text-sm text-white placeholder:text-white/30 focus:outline-none focus:border-white/20","data-testid":"input-qa-email"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-white/60",children:"Your Question"}),e.jsx("textarea",{value:x,onChange:P=>g(P.target.value),placeholder:"What would you like to know?",rows:4,className:"w-full px-3 py-2.5 rounded-md bg-white/5 border border-white/10 text-sm text-white placeholder:text-white/30 focus:outline-none focus:border-white/20 resize-none","data-testid":"input-qa-question"})]}),e.jsxs(L,{onClick:k,disabled:b.isPending,className:"w-full bg-gradient-to-r from-blue-500 to-violet-600 border-0 text-white font-medium","data-testid":"button-submit-question",children:[b.isPending?e.jsx(We,{className:"w-4 h-4 animate-spin mr-2"}):e.jsx(os,{className:"w-4 h-4 mr-2"}),"Submit Question"]})]})]})})]})}const Sj={milestone:{icon:hT,label:"Milestone",color:"text-amber-500"},update:{icon:Ml,label:"Update",color:"text-blue-500"},launch:{icon:$n,label:"Launch",color:"text-green-500"},deliverable:{icon:Gt,label:"Deliverable",color:"text-purple-500"}},Ej={completed:{icon:ys,label:"Completed",color:"text-green-500"},in_progress:{icon:Wt,label:"In Progress",color:"text-amber-500"},upcoming:{icon:mg,label:"Upcoming",color:"text-muted-foreground"}};function K9(){return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-12",children:[e.jsx(ye,{className:"h-10 w-64 mb-2"}),e.jsx(ye,{className:"h-5 w-48 mb-8"}),e.jsx("div",{className:"space-y-4",children:Array.from({length:4}).map((s,t)=>e.jsx(ye,{className:"h-24 w-full"},t))})]})})}function W9(){const s=Dm(),{data:t,isLoading:n,error:r}=_e({queryKey:["/api/public/progress",s.projectId],queryFn:async()=>{const f=await fetch(`/api/public/progress/${s.projectId}`);if(!f.ok)throw new Error("Project not found");return f.json()},refetchInterval:3e4});if(n)return e.jsx(K9,{});if(r||!t)return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs(ce,{className:"p-8 text-center max-w-md",children:[e.jsx(mg,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h1",{className:"text-xl font-semibold mb-2",children:"Project Not Found"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This progress link may be invalid or the project may have been removed."})]})});const{project:o,customerName:l,updates:d,completedWork:u}=t,h=o.status==="completed"?"Completed":o.status==="active"?"In Progress":o.status;return e.jsxs("div",{className:"min-h-screen bg-background","data-testid":"progress-page",children:[e.jsx("header",{className:"border-b sticky top-0 z-50 bg-background",children:e.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-3 flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("div",{className:"w-8 h-8 rounded-md bg-primary flex items-center justify-center shrink-0",children:e.jsx(Ml,{className:"w-4 h-4 text-primary-foreground"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate","data-testid":"text-project-name",children:o.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Project Progress"})]})]}),e.jsx(x2,{})]})}),e.jsxs("main",{className:"max-w-3xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 flex-wrap mb-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold tracking-tight","data-testid":"text-progress-heading",children:o.name}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Prepared for ",l]})]}),e.jsx(Ce,{variant:"secondary","data-testid":"badge-project-status",children:h})]}),o.description&&e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:o.description})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 mb-8",children:[e.jsxs(ce,{className:"p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-semibold","data-testid":"text-update-count",children:d.length}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Updates"})]}),e.jsxs(ce,{className:"p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-semibold","data-testid":"text-deliverable-count",children:u}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Deliverables"})]}),e.jsxs(ce,{className:"p-4 text-center col-span-2 sm:col-span-1",children:[e.jsx("p",{className:"text-2xl font-semibold","data-testid":"text-started-date",children:o.createdAt?qs(o.createdAt):"N/A"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Started"})]})]}),o.previewUrl&&e.jsx(ce,{className:"p-4 mb-8",children:e.jsxs("a",{href:o.previewUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-between gap-3","data-testid":"link-preview-site",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx(_s,{className:"w-5 h-5 text-muted-foreground shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium",children:"View Live Preview"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:o.previewUrl})]})]}),e.jsx(ug,{className:"w-4 h-4 text-muted-foreground shrink-0"})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold tracking-tight",children:"Timeline"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Real-time updates on your project"})]}),d.length>0?e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-[19px] top-6 bottom-6 w-px bg-border"}),e.jsx("div",{className:"space-y-0",children:d.map((f,v)=>{const x=Sj[f.type]||Sj.update,g=Ej[f.status]||Ej.completed,j=g.icon;return e.jsxs("div",{className:"relative flex gap-4 pb-6","data-testid":`update-item-${f.id}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-full border-2 border-background bg-muted flex items-center justify-center shrink-0 z-10 ${g.color}`,children:e.jsx(j,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 pt-1.5",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 flex-wrap mb-1",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium","data-testid":`text-update-title-${f.id}`,children:f.title}),f.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1 leading-relaxed",children:f.description})]}),e.jsx(Ce,{variant:"outline",className:"text-xs shrink-0",children:x.label})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:f.createdAt?qs(f.createdAt):""})]})]},f.id)})})]}):e.jsxs(ce,{className:"p-8 text-center",children:[e.jsx(Wt,{className:"w-10 h-10 text-muted-foreground mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No updates yet. Check back soon for progress on your project."})]}),e.jsx("div",{className:"mt-12 pt-6 border-t text-center",children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"This page refreshes automatically every 30 seconds."})})]})]})}const Tj=[{name:"Simple Landing Page",description:"Single page website with contact form",icon:Km,lines:[{rateCode:"page_design",suggestedQty:1,note:"1 page layout"},{rateCode:"image_asset",suggestedQty:3,note:"Hero + 2 section images"},{rateCode:"revision",suggestedQty:2,note:"2 rounds of changes"}]},{name:"Business Website",description:"Multi-page site (Home, About, Services, Contact)",icon:GE,lines:[{rateCode:"page_design",suggestedQty:5,note:"Home, About, Services, Contact, FAQ"},{rateCode:"image_asset",suggestedQty:10,note:"Hero images + section graphics"},{rateCode:"revision",suggestedQty:3,note:"3 rounds of changes"}]},{name:"E-Commerce Store",description:"Online store with product pages and checkout",icon:yT,lines:[{rateCode:"page_design",suggestedQty:8,note:"Home, Shop, Product, Cart, Checkout, About, Contact, FAQ"},{rateCode:"image_asset",suggestedQty:15,note:"Product photos + banners"},{rateCode:"revision",suggestedQty:4,note:"4 rounds of changes"}]},{name:"Portfolio / Creative",description:"Showcase work with gallery and case studies",icon:pg,lines:[{rateCode:"page_design",suggestedQty:4,note:"Home, Portfolio, About, Contact"},{rateCode:"image_asset",suggestedQty:8,note:"Gallery images + hero"},{rateCode:"revision",suggestedQty:2,note:"2 rounds of changes"}]}];let Aj=0;function V9(){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(ye,{className:"h-8 w-48 mb-1"}),e.jsx(ye,{className:"h-4 w-72"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:Array.from({length:4}).map((s,t)=>e.jsxs(ce,{className:"p-4",children:[e.jsx(ye,{className:"h-6 w-32 mb-2"}),e.jsx(ye,{className:"h-4 w-48"})]},t))}),e.jsxs(ce,{className:"p-6",children:[e.jsx(ye,{className:"h-6 w-40 mb-4"}),Array.from({length:3}).map((s,t)=>e.jsx(ye,{className:"h-12 w-full mb-3"},t))]})]})}function G9(){Un("Quote Builder");const{toast:s}=mt(),[t,n]=p.useState([]),[r,o]=p.useState([]),[l,d]=p.useState(""),[u,h]=p.useState(""),[f,v]=p.useState(""),[x,g]=p.useState(!1),[j,N]=p.useState(null),[b,k]=p.useState(null),[E,S]=p.useState(!1),{data:T,isLoading:P}=_e({queryKey:["/api/billing-rates"]}),H=we({mutationFn:async()=>{const U=[...t.filter(F=>F.quantity>0).map(F=>{const ie=Q(F.rateId);return{description:ie?.name||"Unknown",quantity:F.quantity,unitPriceCents:ie?.rateCents||0}}),...r.filter(F=>F.name&&F.quantity>0&&F.price>0).map(F=>({description:F.name,quantity:F.quantity,unitPriceCents:F.price}))];return(await je("POST","/api/quotes",{customerName:l,customerEmail:u,lineItems:U,notes:f||null})).json()},onSuccess:U=>{N(U.id),k(U.viewToken),xe.invalidateQueries({queryKey:["/api/quotes"]}),s({title:"Quote saved",description:`${U.quoteNumber} is ready to send.`})},onError:()=>{s({title:"Failed to save quote",variant:"destructive"})}}),re=we({mutationFn:async()=>(await je("POST",`/api/quotes/${j}/send`,{})).json(),onSuccess:()=>{S(!0),xe.invalidateQueries({queryKey:["/api/quotes"]}),s({title:"Quote sent",description:`Email sent to ${u}`})},onError:()=>{s({title:"Failed to send quote",description:"Check your email configuration.",variant:"destructive"})}}),B=p.useMemo(()=>T?.filter(U=>U.isActive)||[],[T]),Q=U=>B.find(M=>M.id===U),G=U=>B.find(M=>M.code===U),ue=(U,M)=>{M<=0?n(F=>F.filter(ie=>ie.rateId!==U)):n(F=>F.find(fe=>fe.rateId===U)?F.map(fe=>fe.rateId===U?{...fe,quantity:M}:fe):[...F,{rateId:U,quantity:M}])},_=U=>t.find(M=>M.rateId===U)?.quantity||0,Y=U=>{const M=Q(U),F=_(U);return M?M.rateCents*F:0},z=()=>{Aj++,o(U=>[...U,{id:`custom-${Aj}`,name:"",price:0,quantity:1}])},J=(U,M,F)=>{o(ie=>ie.map(fe=>fe.id===U?{...fe,[M]:F}:fe))},X=U=>{o(M=>M.filter(F=>F.id!==U))},$=p.useMemo(()=>r.reduce((U,M)=>U+M.price*M.quantity,0),[r]),A=p.useMemo(()=>t.reduce((U,M)=>{const F=Q(M.rateId);return U+(F?F.rateCents*M.quantity:0)},0),[t,B])+$,W=t.length>0||r.some(U=>U.name&&U.quantity>0),Z=U=>{const M=[];U.lines.forEach(F=>{const ie=G(F.rateCode);ie&&M.push({rateId:ie.id,quantity:F.suggestedQty})}),n(M),s({title:`"${U.name}" template applied`,description:"Adjust quantities as needed."})},q=()=>{n([]),o([]),d(""),h(""),v(""),N(null),k(null),S(!1)},ne=()=>{const U=l?`Quote for: ${l}
`:`Quote Estimate
`,M=t.filter(Ne=>Ne.quantity>0).map(Ne=>{const Pe=Q(Ne.rateId);return Pe?`${Pe.name}: ${Ne.quantity} ${Pe.unitLabel}${Ne.quantity>1?"s":""} x ${Fe(Pe.rateCents)} = ${Fe(Pe.rateCents*Ne.quantity)}`:""}).filter(Boolean),F=r.filter(Ne=>Ne.name&&Ne.quantity>0).map(Ne=>`${Ne.name}: ${Ne.quantity} x ${Fe(Ne.price)} = ${Fe(Ne.price*Ne.quantity)}`),ie=[...M,...F].join(`
`),fe=`
Total: ${Fe(A)}`,Ee=U+`---
`+ie+`
---`+fe;navigator.clipboard.writeText(Ee),g(!0),setTimeout(()=>g(!1),2e3),s({title:"Quote copied to clipboard"})};if(P)return e.jsx(V9,{});if(B.length===0)return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight","data-testid":"text-page-title",children:"Quote Builder"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Set up your billing rates first to start building quotes."})]}),e.jsxs(ce,{className:"p-8 text-center",children:[e.jsx(em,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"You need billing rates before you can build quotes."}),e.jsx("a",{href:"/admin/billing-rates",children:e.jsx(L,{"data-testid":"button-go-to-rates",children:"Set Up Billing Rates"})})]})]});const K=Tj.some(U=>U.lines.some(M=>G(M.rateCode)));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight","data-testid":"text-page-title",children:"Quote Builder"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Quickly estimate project costs using your billing rates"})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs(L,{variant:"outline",onClick:q,"data-testid":"button-reset-quote",children:[e.jsx(Wm,{className:"w-4 h-4 mr-1.5"}),"Reset"]}),W&&e.jsxs(L,{onClick:ne,"data-testid":"button-copy-quote",children:[x?e.jsx(is,{className:"w-4 h-4 mr-1.5"}):e.jsx(fn,{className:"w-4 h-4 mr-1.5"}),x?"Copied":"Copy Quote"]})]})]}),K&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ya,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Quick Start Templates"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:Tj.map(U=>{if(U.lines.filter(ie=>G(ie.rateCode)).length===0)return null;const F=U.lines.reduce((ie,fe)=>{const Ee=G(fe.rateCode);return ie+(Ee?Ee.rateCents*fe.suggestedQty:0)},0);return e.jsx(ce,{className:"p-4 cursor-pointer hover-elevate",onClick:()=>Z(U),"data-testid":`template-${U.name.toLowerCase().replace(/\s+/g,"-")}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-9 h-9 rounded-md bg-primary/10 shrink-0",children:e.jsx(U.icon,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-semibold leading-tight",children:U.name}),e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5 line-clamp-1",children:U.description}),e.jsxs("p",{className:"text-sm font-semibold text-primary mt-2","data-testid":`text-template-estimate-${U.name.toLowerCase().replace(/\s+/g,"-")}`,children:["~",Fe(F)]})]})]})},U.name)})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs(ce,{className:"p-5 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Gm,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-semibold",children:"Customer Details"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(De,{htmlFor:"customer-name",className:"text-xs text-muted-foreground mb-1.5 block",children:"Customer Name *"}),e.jsx(Oe,{id:"customer-name",value:l,onChange:U=>d(U.target.value),placeholder:"e.g. John's Bakery","data-testid":"input-customer-name",disabled:!!j})]}),e.jsxs("div",{children:[e.jsx(De,{htmlFor:"customer-email",className:"text-xs text-muted-foreground mb-1.5 block",children:"Customer Email *"}),e.jsx(Oe,{id:"customer-email",type:"email",value:u,onChange:U=>h(U.target.value),placeholder:"e.g. john@bakery.com","data-testid":"input-customer-email",disabled:!!j})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx(De,{htmlFor:"quote-notes",className:"text-xs text-muted-foreground mb-1.5 block",children:"Notes (optional)"}),e.jsx(fs,{id:"quote-notes",value:f,onChange:U=>v(U.target.value),placeholder:"Any additional details, timelines, or special terms...",rows:2,"data-testid":"textarea-quote-notes",disabled:!!j})]})]}),e.jsxs(ce,{className:"p-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Gt,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-semibold",children:"Line Items"})]}),e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider mb-3",children:"Your Services"}),e.jsx("div",{className:"space-y-3",children:B.map(U=>{const M=_(U.id),F=Y(U.id);return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-md border transition-colors ${M>0?"bg-primary/5 border-primary/20":"bg-muted/30"}`,"data-testid":`quote-line-${U.id}`,children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("p",{className:"text-sm font-medium",children:U.name}),e.jsxs(Ce,{variant:"secondary",className:"text-[10px]",children:[Fe(U.rateCents)," / ",U.unitLabel]})]}),U.description&&e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5 line-clamp-1",children:U.description})]}),e.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[e.jsx(L,{size:"icon",variant:"outline",onClick:()=>ue(U.id,M-1),disabled:M===0,"data-testid":`button-decrease-${U.id}`,children:e.jsx(bb,{className:"w-3.5 h-3.5"})}),e.jsx(Oe,{type:"number",min:"0",value:M,onChange:ie=>ue(U.id,parseInt(ie.target.value)||0),className:"w-16 text-center","data-testid":`input-quantity-${U.id}`}),e.jsx(L,{size:"icon",variant:"outline",onClick:()=>ue(U.id,M+1),"data-testid":`button-increase-${U.id}`,children:e.jsx(Qt,{className:"w-3.5 h-3.5"})})]}),e.jsx("div",{className:"w-24 text-right shrink-0",children:e.jsx("p",{className:`text-sm font-semibold ${M>0?"":"text-muted-foreground"}`,"data-testid":`text-line-total-${U.id}`,children:M>0?Fe(F):"-"})})]},U.id)})}),e.jsx(Di,{className:"my-5"}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-3",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Custom Items"}),e.jsxs(L,{variant:"outline",size:"sm",onClick:z,"data-testid":"button-add-custom-item",children:[e.jsx(QE,{className:"w-3.5 h-3.5 mr-1.5"}),"Add Item"]})]}),r.length===0?e.jsx("p",{className:"text-xs text-muted-foreground text-center py-4",children:`Add one-off items that aren't in your standard rates (e.g. "Domain Registration", "Premium Plugin")`}):e.jsx("div",{className:"space-y-3",children:r.map(U=>e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-md border transition-colors ${U.name&&U.quantity>0?"bg-primary/5 border-primary/20":"bg-muted/30"}`,"data-testid":`custom-line-${U.id}`,children:[e.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-2 flex-wrap",children:[e.jsx(Oe,{placeholder:"Item name",value:U.name,onChange:M=>J(U.id,"name",M.target.value),className:"flex-1 min-w-[120px]","data-testid":`input-custom-name-${U.id}`}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"$"}),e.jsx(Oe,{type:"number",min:"0",step:"0.01",placeholder:"Price",value:U.price>0?(U.price/100).toFixed(2):"",onChange:M=>J(U.id,"price",Math.round(parseFloat(M.target.value||"0")*100)),className:"w-24","data-testid":`input-custom-price-${U.id}`})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[e.jsx(L,{size:"icon",variant:"outline",onClick:()=>J(U.id,"quantity",Math.max(0,U.quantity-1)),disabled:U.quantity===0,"data-testid":`button-custom-decrease-${U.id}`,children:e.jsx(bb,{className:"w-3.5 h-3.5"})}),e.jsx(Oe,{type:"number",min:"0",value:U.quantity,onChange:M=>J(U.id,"quantity",parseInt(M.target.value)||0),className:"w-16 text-center","data-testid":`input-custom-quantity-${U.id}`}),e.jsx(L,{size:"icon",variant:"outline",onClick:()=>J(U.id,"quantity",U.quantity+1),"data-testid":`button-custom-increase-${U.id}`,children:e.jsx(Qt,{className:"w-3.5 h-3.5"})})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsx("div",{className:"w-24 text-right",children:e.jsx("p",{className:`text-sm font-semibold ${U.price>0&&U.quantity>0?"":"text-muted-foreground"}`,"data-testid":`text-custom-total-${U.id}`,children:U.price>0&&U.quantity>0?Fe(U.price*U.quantity):"-"})}),e.jsx(L,{size:"icon",variant:"ghost",onClick:()=>X(U.id),"data-testid":`button-remove-custom-${U.id}`,children:e.jsx(ls,{className:"w-3.5 h-3.5"})})]})]},U.id))})]})]}),e.jsxs("div",{children:[e.jsxs(ce,{className:"p-5 sticky top-20 z-[999]",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(em,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-semibold",children:"Quote Summary"})]}),l&&e.jsxs("p",{className:"text-xs text-muted-foreground mb-3",children:["For: ",e.jsx("span",{className:"font-medium text-foreground",children:l})]}),W?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2 mb-4",children:[t.filter(U=>U.quantity>0).map(U=>{const M=Q(U.rateId);return M?e.jsxs("div",{className:"flex items-center justify-between gap-2 text-xs","data-testid":`summary-line-${U.rateId}`,children:[e.jsxs("span",{className:"text-muted-foreground truncate",children:[M.name," x ",U.quantity]}),e.jsx("span",{className:"font-medium shrink-0",children:Fe(M.rateCents*U.quantity)})]},U.rateId):null}),r.filter(U=>U.name&&U.quantity>0&&U.price>0).map(U=>e.jsxs("div",{className:"flex items-center justify-between gap-2 text-xs","data-testid":`summary-custom-${U.id}`,children:[e.jsxs("span",{className:"text-muted-foreground truncate",children:[U.name," x ",U.quantity]}),e.jsx("span",{className:"font-medium shrink-0",children:Fe(U.price*U.quantity)})]},U.id))]}),e.jsx(Di,{className:"mb-3"}),e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{className:"text-sm font-semibold",children:"Total"}),e.jsx("span",{className:"text-lg font-bold text-primary","data-testid":"text-grand-total",children:Fe(A)})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[j?E?e.jsxs("div",{className:"text-center space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-emerald-600",children:[e.jsx(is,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Quote Sent"})]}),e.jsxs(L,{variant:"outline",size:"sm",className:"w-full",onClick:()=>window.open(`/quote/${b}`,"_blank"),"data-testid":"button-view-quote",children:[e.jsx(_s,{className:"w-4 h-4 mr-1.5"}),"Preview Quote Page"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(L,{className:"w-full",onClick:()=>re.mutate(),disabled:re.isPending,"data-testid":"button-send-quote",children:[re.isPending?e.jsx(We,{className:"w-4 h-4 mr-1.5 animate-spin"}):e.jsx(hs,{className:"w-4 h-4 mr-1.5"}),re.isPending?"Sending...":"Send Quote to Customer"]}),e.jsxs(L,{variant:"outline",className:"w-full",onClick:()=>{const U=`${window.location.origin}/quote/${b}`;navigator.clipboard.writeText(U),s({title:"Quote link copied"})},"data-testid":"button-copy-quote-link",children:[e.jsx(_s,{className:"w-4 h-4 mr-1.5"}),"Copy Quote Link"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(L,{className:"w-full",onClick:()=>H.mutate(),disabled:!l||!u||H.isPending,"data-testid":"button-save-quote",children:[H.isPending?e.jsx(We,{className:"w-4 h-4 mr-1.5 animate-spin"}):e.jsx(Vm,{className:"w-4 h-4 mr-1.5"}),H.isPending?"Saving...":"Save & Prepare Quote"]}),(!l||!u)&&e.jsx("p",{className:"text-[10px] text-muted-foreground text-center",children:"Enter customer name & email to save"})]}),e.jsxs(L,{variant:"outline",className:"w-full",onClick:ne,"data-testid":"button-copy-summary",children:[x?e.jsx(is,{className:"w-4 h-4 mr-1.5"}):e.jsx(fn,{className:"w-4 h-4 mr-1.5"}),x?"Copied":"Copy as Text"]})]})]}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx(em,{className:"w-8 h-8 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Add items or pick a template to get started"})]})]}),e.jsxs(ce,{className:"p-5 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ya,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-semibold",children:"Estimation Tips"})]}),e.jsxs("div",{className:"space-y-3 text-xs text-muted-foreground",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground mb-0.5",children:"Pages"}),e.jsx("p",{children:"Count each unique layout. Home, About, Contact, Services = 4 pages. Blog listing + blog post = 2 more."})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground mb-0.5",children:"Images / Assets"}),e.jsx("p",{children:"Each hero banner, custom graphic, or edited photo counts as 1. Stock photos that need editing count too."})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground mb-0.5",children:"Revisions"}),e.jsx("p",{children:"Include 2-3 rounds for most clients. Larger or pickier projects may need 4-5."})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground mb-0.5",children:"E-Commerce"}),e.jsx("p",{children:"Product page, cart, checkout, account pages = ~4 extra pages minimum. Add more for complex catalogs."})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground mb-0.5",children:"Custom Items"}),e.jsx("p",{children:'Use "Add Item" for one-off costs like domain registration ($15), premium plugins ($50-200), or third-party subscriptions.'})]})]})]})]})]})]})}function Q9(){return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-950 dark:to-slate-900 p-4 sm:p-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[e.jsx(ye,{className:"h-10 w-48"}),e.jsxs(ce,{className:"p-8",children:[e.jsx(ye,{className:"h-8 w-64 mb-4"}),e.jsx("div",{className:"space-y-3",children:Array.from({length:4}).map((s,t)=>e.jsx(ye,{className:"h-12 w-full"},t))})]})]})})}function Y9(s){const n={draft:{label:"Draft",variant:"secondary"},sent:{label:"Awaiting Response",variant:"outline"},approved:{label:"Approved",variant:"default"},declined:{label:"Declined",variant:"destructive"}}[s]||{label:s,variant:"secondary"};return e.jsx(Ce,{variant:n.variant,"data-testid":"badge-quote-status",children:n.label})}function X9(){const[,s]=m3("/quote/:token"),t=s?.token,{toast:n}=mt(),[r,o]=p.useState(""),[l,d]=p.useState(""),[u,h]=p.useState(!1),[f,v]=p.useState(""),{data:x,isLoading:g,error:j}=_e({queryKey:["/api/public/quotes",t],queryFn:()=>fetch(`/api/public/quotes/${t}`).then(T=>{if(!T.ok)throw new Error("Quote not found");return T.json()}),enabled:!!t}),N=we({mutationFn:async({action:T,comment:P})=>(await je("POST",`/api/public/quotes/${t}/respond`,{action:T,comment:P})).json(),onSuccess:(T,P)=>{xe.invalidateQueries({queryKey:["/api/public/quotes",t]}),n({title:P.action==="approve"?"Quote Approved":"Quote Declined",description:P.action==="approve"?"Thank you! We'll get started on your project soon.":"We've noted your response. Feel free to leave any feedback below."}),h(!1),d("")},onError:()=>{n({title:"Something went wrong",description:"Please try again.",variant:"destructive"})}}),b=we({mutationFn:async T=>(await je("POST",`/api/public/quotes/${t}/comments`,{message:T})).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/public/quotes",t]}),o(""),n({title:"Comment sent",description:"We'll review your message and get back to you."})},onError:()=>{n({title:"Failed to send comment",variant:"destructive"})}}),k=we({mutationFn:async T=>(await je("POST",`/api/public/quotes/${t}/requirements`,{requirements:T})).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/public/quotes",t]}),v(""),n({title:"Requirements submitted",description:"We've received your project details and will be in touch soon."})},onError:()=>{n({title:"Failed to submit requirements",variant:"destructive"})}});if(g)return e.jsx(Q9,{});if(j||!x)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-950 dark:to-slate-900 flex items-center justify-center p-4",children:e.jsxs(ce,{className:"p-8 text-center max-w-md",children:[e.jsx(Jc,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Quote Not Found"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This quote link may have expired or doesn't exist."})]})});const E=x.status==="sent",S=x.status==="approved"||x.status==="declined";return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-950 dark:to-slate-900",children:e.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8 sm:py-12",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-md bg-emerald-500/10",children:e.jsx(Gt,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold tracking-tight","data-testid":"text-quote-title",children:"Project Quote"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:x.quoteNumber})]})]}),e.jsxs(ce,{className:"mt-6 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-slate-900 to-slate-800 dark:from-slate-800 dark:to-slate-700 px-6 py-5",children:e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white text-sm font-semibold",children:"AI Powered Sites"}),e.jsx("p",{className:"text-slate-400 text-xs mt-0.5",children:"hello@aipoweredsites.com"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-emerald-400 text-lg font-extrabold tracking-tight","data-testid":"text-quote-number",children:x.quoteNumber}),Y9(x.status)]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap mb-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wider font-medium",children:"Prepared For"}),e.jsx("p",{className:"text-sm font-semibold mt-1","data-testid":"text-customer-name",children:x.customerName}),e.jsx("p",{className:"text-xs text-muted-foreground",children:x.customerEmail})]}),x.createdAt&&e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wider font-medium",children:"Date"}),e.jsx("p",{className:"text-sm font-medium mt-1",children:new Date(x.createdAt).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]})]}),e.jsxs("div",{className:"rounded-md border overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-12 bg-muted/50 px-4 py-2.5 text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:[e.jsx("div",{className:"col-span-6",children:"Description"}),e.jsx("div",{className:"col-span-2 text-center",children:"Qty"}),e.jsx("div",{className:"col-span-2 text-right",children:"Rate"}),e.jsx("div",{className:"col-span-2 text-right",children:"Amount"})]}),x.lineItems.map((T,P)=>e.jsxs("div",{className:`grid grid-cols-12 px-4 py-3 text-sm items-center ${P%2===0?"":"bg-muted/20"}`,"data-testid":`quote-line-item-${P}`,children:[e.jsx("div",{className:"col-span-6 font-medium",children:T.description}),e.jsx("div",{className:"col-span-2 text-center text-muted-foreground",children:T.quantity}),e.jsx("div",{className:"col-span-2 text-right text-muted-foreground",children:Fe(T.unitPriceCents)}),e.jsx("div",{className:"col-span-2 text-right font-semibold",children:Fe(T.totalCents)})]},T.id))]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("div",{className:"bg-slate-900 dark:bg-slate-800 text-white rounded-md px-6 py-4 min-w-[200px]",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx("span",{className:"text-sm font-medium",children:"Total"}),e.jsx("span",{className:"text-xl font-extrabold tracking-tight","data-testid":"text-quote-total",children:Fe(x.totalAmountCents)})]})})}),x.notes&&e.jsxs("div",{className:"mt-6 p-4 bg-muted/30 rounded-md",children:[e.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wider font-medium mb-1.5",children:"Notes"}),e.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:x.notes})]})]})]}),E&&!u&&e.jsxs(ce,{className:"mt-6 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ya,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-semibold",children:"Your Response"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-5",children:"Review the quote above and let us know how you'd like to proceed. You can also leave comments below."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs(L,{className:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>N.mutate({action:"approve"}),disabled:N.isPending,"data-testid":"button-approve-quote",children:[e.jsx(ys,{className:"w-4 h-4 mr-2"}),"Approve Quote"]}),e.jsxs(L,{variant:"outline",className:"flex-1",onClick:()=>h(!0),disabled:N.isPending,"data-testid":"button-decline-quote",children:[e.jsx(fo,{className:"w-4 h-4 mr-2"}),"Request Changes"]})]})]}),E&&u&&e.jsxs(ce,{className:"mt-6 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Kt,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-semibold",children:"Let Us Know What to Change"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Tell us what you'd like adjusted - pricing, scope, timeline, or anything else."}),e.jsx(fs,{value:l,onChange:T=>d(T.target.value),placeholder:"e.g. Can we work on pricing for the image assets? Also wondering if we could add an extra revision round...",className:"mb-4",rows:4,"data-testid":"textarea-decline-comment"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(L,{variant:"outline",onClick:()=>{h(!1),d("")},"data-testid":"button-cancel-decline",children:"Cancel"}),e.jsxs(L,{variant:"destructive",onClick:()=>N.mutate({action:"deny",comment:l}),disabled:N.isPending,"data-testid":"button-submit-decline",children:[e.jsx(fo,{className:"w-4 h-4 mr-2"}),"Submit Feedback"]})]})]}),S&&e.jsx(ce,{className:"mt-6 p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[x.status==="approved"?e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-emerald-500/10",children:e.jsx(ys,{className:"w-5 h-5 text-emerald-600"})}):e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-red-500/10",children:e.jsx(fo,{className:"w-5 h-5 text-red-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold",children:x.status==="approved"?"Quote Approved":"Changes Requested"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:x.status==="approved"?"Thank you! Please share your project requirements below so we can get started.":"We've received your feedback and will follow up shortly."})]})]})}),x.status==="approved"&&e.jsxs(ce,{className:"mt-6 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(YE,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-semibold",children:"Project Requirements"})]}),x.projectRequirements?e.jsxs("div",{children:[e.jsxs("div",{className:"p-4 bg-emerald-500/5 border border-emerald-500/20 rounded-md",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ys,{className:"w-3.5 h-3.5 text-emerald-600"}),e.jsx("span",{className:"text-xs font-medium text-emerald-600",children:"Requirements Submitted"})]}),e.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap","data-testid":"text-requirements",children:x.projectRequirements})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-3",children:"Need to add more details? Use the comments section below to share additional information."})]}):e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Help us understand your vision. Tell us about your project goals, brand preferences, content you'll provide, and any specific features or pages you need."}),e.jsx(fs,{value:f,onChange:T=>v(T.target.value),placeholder:`Share your project details here...

- What is the purpose of your website?
- Who is your target audience?
- Do you have brand colors, logos, or style preferences?
- What pages or features do you need?
- Do you have content ready (text, images)?
- Any websites you like for inspiration?
- What's your ideal timeline?`,className:"mb-4",rows:8,"data-testid":"textarea-requirements"}),e.jsxs(L,{className:"w-full",onClick:()=>f.trim()&&k.mutate(f.trim()),disabled:!f.trim()||k.isPending,"data-testid":"button-submit-requirements",children:[k.isPending?e.jsx(We,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(os,{className:"w-4 h-4 mr-2"}),k.isPending?"Submitting...":"Submit Project Requirements"]})]})]}),e.jsxs(ce,{className:"mt-6 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Kt,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-semibold",children:"Comments & Discussion"})]}),x.comments.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No comments yet. Have a question about this quote? Start the conversation below."}),x.comments.length>0&&e.jsx("div",{className:"space-y-4 mb-6",children:x.comments.map(T=>e.jsxs("div",{className:`flex gap-3 ${T.senderType==="admin"?"":"flex-row-reverse"}`,"data-testid":`comment-${T.id}`,children:[e.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full shrink-0 text-xs font-bold ${T.senderType==="admin"?"bg-primary/10 text-primary":"bg-emerald-500/10 text-emerald-600"}`,children:T.senderName.charAt(0).toUpperCase()}),e.jsxs("div",{className:`max-w-[80%] ${T.senderType==="admin"?"":"text-right"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[e.jsx("span",{className:"text-xs font-semibold",children:T.senderName}),e.jsx("span",{className:"text-[10px] text-muted-foreground",children:T.createdAt&&new Date(T.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]}),e.jsx("div",{className:`rounded-md p-3 text-sm ${T.senderType==="admin"?"bg-muted/50":"bg-emerald-500/5 border border-emerald-500/20"}`,children:T.message})]})]},T.id))}),e.jsx(Di,{className:"mb-4"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(fs,{value:r,onChange:T=>o(T.target.value),placeholder:"Ask a question or leave a comment...",className:"flex-1",rows:2,"data-testid":"textarea-comment"}),e.jsx(L,{size:"icon",onClick:()=>r.trim()&&b.mutate(r.trim()),disabled:!r.trim()||b.isPending,"data-testid":"button-send-comment",children:e.jsx(os,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"text-center mt-8 pb-8",children:e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:"AI Powered Sites"}),"  hello@aipoweredsites.com"]})})]})})}function Z9(){const{token:s}=Dm(),{toast:t}=mt(),[n,r]=p.useState(""),[o,l]=p.useState([]),[d,u]=p.useState(!1),[h,f]=p.useState(!1),[v,x]=p.useState(""),g=p.useRef(null),j=p.useRef(null),{data:N,isLoading:b}=_e({queryKey:["/api/public/conversations",s],queryFn:async()=>{const Q=await fetch(`/api/public/conversations/${s}`);if(!Q.ok)throw new Error("Failed to load conversation");return Q.json()},refetchInterval:1e4}),k=we({mutationFn:async({message:Q,attachments:G})=>{const ue=await fetch(`/api/public/conversations/${s}/messages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:Q,attachments:G.length>0?JSON.stringify(G):null})});if(!ue.ok)throw new Error("Failed to send message");return ue.json()},onSuccess:()=>{r(""),l([]),xe.invalidateQueries({queryKey:["/api/public/conversations",s]})},onError:()=>{t({title:"Failed to send message",variant:"destructive"})}});p.useEffect(()=>{j.current?.scrollIntoView({behavior:"smooth"})},[N?.messages?.length]);const E=()=>{const Q=n.trim();!Q&&o.length===0||k.mutate({message:Q||(o.length>0?"Shared attachments":""),attachments:o})},S=Q=>{Q.key==="Enter"&&!Q.shiftKey&&(Q.preventDefault(),E())},T=async Q=>{const G=Q.target.files;if(!(!G||G.length===0)){u(!0);try{for(const ue of Array.from(G)){const _=ue.type.startsWith("image/"),Y=await fetch("/api/uploads/request-url",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:ue.name,size:ue.size,contentType:ue.type})});if(!Y.ok)throw new Error("Failed to get upload URL");const{uploadURL:z,objectPath:J}=await Y.json();await fetch(z,{method:"PUT",headers:{"Content-Type":ue.type},body:ue});const X=`/objects${J}`;l($=>[...$,{name:ue.name,url:X,type:_?"image":"file",contentType:ue.type}])}t({title:"Files uploaded",description:`${G.length} file${G.length>1?"s":""} ready to send`})}catch{t({title:"Upload failed",description:"Please try again.",variant:"destructive"})}finally{u(!1),g.current&&(g.current.value="")}}},P=()=>{const Q=v.trim();if(!Q)return;let G=Q;!G.startsWith("http://")&&!G.startsWith("https://")&&(G="https://"+G),l(ue=>[...ue,{name:G,url:G,type:"url"}]),x(""),f(!1)},H=Q=>{l(G=>G.filter((ue,_)=>_!==Q))};if(b)return e.jsx("div",{className:"min-h-screen bg-[#0a0a14] flex items-center justify-center",children:e.jsx(We,{className:"w-6 h-6 animate-spin text-violet-400"})});if(!N)return e.jsx("div",{className:"min-h-screen bg-[#0a0a14] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(fo,{className:"w-10 h-10 text-red-400 mx-auto mb-3"}),e.jsx("h2",{className:"text-lg font-semibold text-white mb-1",children:"Conversation Not Found"}),e.jsx("p",{className:"text-white/50 text-sm mb-4",children:"This link may be invalid or expired."}),e.jsx(Ha,{href:"/",children:e.jsxs(L,{variant:"outline",className:"border-white/10 text-white","data-testid":"button-back-home",children:[e.jsx(va,{className:"w-4 h-4 mr-2"}),"Back to Home"]})})]})});const re=Q=>{const G=new Date(Q),_=new Date().getTime()-G.getTime(),Y=Math.floor(_/6e4);if(Y<1)return"Just now";if(Y<60)return`${Y}m ago`;const z=Math.floor(Y/60);return z<24?`${z}h ago`:G.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})},B=Q=>{if(!Q)return null;try{const G=JSON.parse(Q);if(!Array.isArray(G)||G.length===0)return null;const ue=G.filter(z=>z.type==="image"),_=G.filter(z=>z.type==="file"),Y=G.filter(z=>z.type==="url");return e.jsxs("div",{className:"mt-3 space-y-2",children:[ue.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:ue.map((z,J)=>e.jsx("a",{href:z.url,target:"_blank",rel:"noopener noreferrer",className:"block rounded-md overflow-hidden border border-white/10 hover:border-violet-500/40 transition-colors","data-testid":`link-image-attachment-${J}`,children:e.jsx("img",{src:z.url,alt:z.name,className:"max-w-[240px] max-h-[180px] object-cover",loading:"lazy"})},J))}),_.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:_.map((z,J)=>e.jsxs("a",{href:z.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1.5 px-2.5 py-1.5 rounded-md bg-white/5 border border-white/10 text-xs text-blue-400 hover:text-blue-300 transition-colors","data-testid":`link-file-attachment-${J}`,children:[e.jsx(Gt,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"max-w-[160px] truncate",children:z.name}),e.jsx(_s,{className:"w-3 h-3 shrink-0"})]},J))}),Y.length>0&&e.jsx("div",{className:"flex flex-col gap-1.5",children:Y.map((z,J)=>e.jsxs("a",{href:z.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1.5 text-xs text-blue-400 hover:text-blue-300 transition-colors break-all","data-testid":`link-url-attachment-${J}`,children:[e.jsx(El,{className:"w-3.5 h-3.5 shrink-0"}),z.url]},J))})]})}catch{return null}};return e.jsxs("div",{className:"min-h-screen bg-[#0a0a14] text-white",style:{fontFamily:"Poppins, sans-serif"},children:[e.jsx("header",{className:"sticky top-0 z-50 border-b border-white/5 bg-[#0a0a14]/95 backdrop-blur-sm",children:e.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-3 flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx(Ha,{href:"/",children:e.jsx(L,{variant:"ghost",size:"icon",className:"text-white/60 shrink-0","data-testid":"button-back",children:e.jsx(va,{className:"w-4 h-4"})})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-sm font-semibold truncate","data-testid":"text-conversation-subject",children:N.subject}),e.jsx("p",{className:"text-xs text-white/40",children:"Secure conversation with AI Powered Sites"})]})]}),e.jsx(Ce,{variant:N.status==="active"?"default":"secondary",className:N.status==="active"?"bg-emerald-500/20 text-emerald-400 border-emerald-500/30":"","data-testid":"badge-conversation-status",children:N.status==="active"?"Active":"Closed"})]})}),e.jsx("main",{className:"max-w-3xl mx-auto px-4 py-6 pb-40",children:e.jsxs("div",{className:"flex flex-col gap-4","data-testid":"messages-list",children:[N.messages.map(Q=>{const G=Q.senderType==="visitor";return e.jsx("div",{className:`flex ${G?"justify-end":"justify-start"}`,"data-testid":`message-${Q.id}`,children:e.jsxs("div",{className:`max-w-[85%] sm:max-w-[75%] ${G?"order-1":""}`,children:[e.jsxs("div",{className:`rounded-md p-3 sm:p-4 ${G?"bg-violet-500/20 border border-violet-500/20":"bg-white/[0.04] border border-white/5"}`,children:[Q.message&&e.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap","data-testid":`text-message-content-${Q.id}`,children:Q.message}),B(Q.attachments)]}),e.jsxs("div",{className:`flex items-center gap-2 mt-1 ${G?"justify-end":"justify-start"}`,children:[e.jsx("span",{className:"text-[10px] text-white/30",children:Q.senderName}),e.jsx("span",{className:"text-[10px] text-white/20",children:re(Q.createdAt)})]})]})},Q.id)}),e.jsx("div",{ref:j})]})}),N.status==="active"&&e.jsx("div",{className:"fixed bottom-0 left-0 right-0 border-t border-white/5 bg-[#0a0a14]/95 backdrop-blur-sm",children:e.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-3",children:[o.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-2 pb-2 border-b border-white/5",children:o.map((Q,G)=>e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-md bg-white/5 border border-white/10 text-xs","data-testid":`pending-attachment-${G}`,children:[Q.type==="image"?e.jsx(Fi,{className:"w-3.5 h-3.5 text-emerald-400"}):Q.type==="url"?e.jsx(El,{className:"w-3.5 h-3.5 text-blue-400"}):e.jsx(Gt,{className:"w-3.5 h-3.5 text-orange-400"}),e.jsx("span",{className:"max-w-[120px] truncate text-white/70",children:Q.name}),e.jsx("button",{onClick:()=>H(G),className:"text-white/30 hover:text-white/60 transition-colors","data-testid":`button-remove-attachment-${G}`,children:e.jsx(zn,{className:"w-3 h-3"})})]},G))}),h&&e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx(Oe,{value:v,onChange:Q=>x(Q.target.value),onKeyDown:Q=>{Q.key==="Enter"&&(Q.preventDefault(),P())},placeholder:"Paste a URL (website, design inspiration, etc.)",className:"flex-1 bg-white/[0.04] border-white/10 text-white text-sm placeholder:text-white/30",autoFocus:!0,"data-testid":"input-url"}),e.jsxs(L,{onClick:P,disabled:!v.trim(),size:"sm",className:"bg-blue-500/20 text-blue-400 border border-blue-500/30","data-testid":"button-add-url",children:[e.jsx(Qt,{className:"w-3.5 h-3.5 mr-1"}),"Add"]}),e.jsx(L,{onClick:()=>{f(!1),x("")},size:"sm",variant:"ghost",className:"text-white/40","data-testid":"button-cancel-url",children:e.jsx(zn,{className:"w-3.5 h-3.5"})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex gap-1 shrink-0",children:[e.jsx("input",{ref:g,type:"file",multiple:!0,accept:"image/*,.pdf,.doc,.docx,.txt,.zip,.psd,.ai,.fig,.sketch,.xd",onChange:T,className:"hidden","data-testid":"input-file-upload"}),e.jsx(L,{variant:"ghost",size:"icon",onClick:()=>g.current?.click(),disabled:d,className:"text-white/40 hover:text-white/70",title:"Attach files or images","data-testid":"button-attach-file",children:d?e.jsx(We,{className:"w-4 h-4 animate-spin"}):e.jsx(Fw,{className:"w-4 h-4"})}),e.jsx(L,{variant:"ghost",size:"icon",onClick:()=>f(!h),className:"text-white/40 hover:text-white/70",title:"Add a URL","data-testid":"button-add-link",children:e.jsx(El,{className:"w-4 h-4"})})]}),e.jsx(fs,{value:n,onChange:Q=>r(Q.target.value),onKeyDown:S,placeholder:"Type your message...",className:"flex-1 min-h-[44px] max-h-32 bg-white/[0.04] border-white/10 text-white placeholder:text-white/30 resize-none text-sm","data-testid":"input-message"}),e.jsx(L,{onClick:E,disabled:!n.trim()&&o.length===0||k.isPending,className:"bg-gradient-to-r from-blue-500 to-violet-600 border-0 text-white shrink-0","data-testid":"button-send-message",children:k.isPending?e.jsx(We,{className:"w-4 h-4 animate-spin"}):e.jsx(os,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-[10px] text-white/20 mt-1.5 text-center",children:"Attach files, images, or URLs. Press Enter to send, Shift+Enter for new line."})]})})]})}function J9(){const{toast:s}=mt(),[t,n]=p.useState(""),[r,o]=p.useState(null),[l,d]=p.useState(""),[u,h]=p.useState(null),[f,v]=p.useState([]),[x,g]=p.useState(!1),[j,N]=p.useState(!1),[b,k]=p.useState(""),E=p.useRef(null),{data:S=[],isLoading:T}=_e({queryKey:["/api/conversations"]}),{data:P,isLoading:H}=_e({queryKey:["/api/conversations",r],enabled:!!r}),re=we({mutationFn:async({id:$,message:I,attachments:A})=>je("POST",`/api/conversations/${$}/messages`,{message:I,attachments:A.length>0?JSON.stringify(A):null}),onSuccess:()=>{d(""),v([]),xe.invalidateQueries({queryKey:["/api/conversations",r]}),xe.invalidateQueries({queryKey:["/api/conversations"]}),s({title:"Reply sent",description:"The visitor will receive an email notification."})},onError:()=>{s({title:"Failed to send reply",variant:"destructive"})}}),B=we({mutationFn:async({id:$,status:I})=>je("PATCH",`/api/conversations/${$}`,{status:I}),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/conversations"]}),xe.invalidateQueries({queryKey:["/api/conversations",r]})}}),Q=S.filter($=>!t||$.visitorName.toLowerCase().includes(t.toLowerCase())||$.visitorEmail.toLowerCase().includes(t.toLowerCase())||$.subject.toLowerCase().includes(t.toLowerCase())),G=$=>{if(!$)return"";const I=new Date($),W=new Date().getTime()-I.getTime(),Z=Math.floor(W/6e4);if(Z<1)return"Just now";if(Z<60)return`${Z}m ago`;const q=Math.floor(Z/60);if(q<24)return`${q}h ago`;const ne=Math.floor(q/24);return ne<7?`${ne}d ago`:I.toLocaleDateString("en-US",{month:"short",day:"numeric"})},ue=()=>{const $=l.trim();!$&&f.length===0||!r||re.mutate({id:r,message:$||(f.length>0?"Shared attachments":""),attachments:f})},_=$=>{$.key==="Enter"&&!$.shiftKey&&($.preventDefault(),ue())},Y=async $=>{const I=$.target.files;if(!(!I||I.length===0)){g(!0);try{for(const A of Array.from(I)){const W=A.type.startsWith("image/"),Z=await fetch("/api/uploads/request-url",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:A.name,size:A.size,contentType:A.type})});if(!Z.ok)throw new Error("Failed to get upload URL");const{uploadURL:q,objectPath:ne}=await Z.json();await fetch(q,{method:"PUT",headers:{"Content-Type":A.type},body:A}),v(K=>[...K,{name:A.name,url:`/objects${ne}`,type:W?"image":"file",contentType:A.type}])}}catch{s({title:"Upload failed",variant:"destructive"})}finally{g(!1),E.current&&(E.current.value="")}}},z=()=>{const $=b.trim();if(!$)return;let I=$;!I.startsWith("http://")&&!I.startsWith("https://")&&(I="https://"+I),v(A=>[...A,{name:I,url:I,type:"url"}]),k(""),N(!1)},J=$=>{if(!$)return null;try{const I=JSON.parse($);if(!Array.isArray(I)||I.length===0)return null;const A=I.filter(q=>q.type==="image"),W=I.filter(q=>q.type==="file"),Z=I.filter(q=>q.type==="url");return e.jsxs("div",{className:"mt-2 space-y-1.5",children:[A.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:A.map((q,ne)=>e.jsx("a",{href:q.url,target:"_blank",rel:"noopener noreferrer",className:"block rounded-md overflow-hidden border border-border hover:border-primary/40 transition-colors",children:e.jsx("img",{src:q.url,alt:q.name,className:"max-w-[200px] max-h-[140px] object-cover",loading:"lazy"})},ne))}),W.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1.5",children:W.map((q,ne)=>e.jsxs("a",{href:q.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-md bg-muted text-xs hover:underline",children:[e.jsx(Gt,{className:"w-3 h-3"}),e.jsx("span",{className:"max-w-[120px] truncate",children:q.name}),e.jsx(_s,{className:"w-3 h-3"})]},ne))}),Z.length>0&&e.jsx("div",{className:"flex flex-col gap-1",children:Z.map((q,ne)=>e.jsxs("a",{href:q.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs text-blue-500 hover:underline break-all",children:[e.jsx(El,{className:"w-3 h-3 shrink-0"}),q.url]},ne))})]})}catch{return null}},X=$=>{if(!$)return;const I=window.location.origin;navigator.clipboard.writeText(`${I}/conversation/${$}`),h($),setTimeout(()=>h(null),2e3),s({title:"Link copied",description:"Conversation link copied to clipboard."})};return e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight","data-testid":"text-page-title",children:"Conversations"}),e.jsx("p",{className:"text-muted-foreground text-sm mt-1",children:"Manage client onboarding conversations"})]}),e.jsxs(Ce,{variant:"secondary","data-testid":"badge-conversation-count",children:[S.length," total"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(sn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(Oe,{placeholder:"Search by name, email, or subject...",value:t,onChange:$=>n($.target.value),className:"pl-9","data-testid":"input-search-conversations"})]}),T?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx(We,{className:"w-6 h-6 animate-spin text-muted-foreground"})}):Q.length===0?e.jsxs(ce,{className:"p-8 text-center",children:[e.jsx(Kt,{className:"w-10 h-10 text-muted-foreground mx-auto mb-3"}),e.jsx("h3",{className:"font-medium mb-1","data-testid":"text-empty-state",children:"No conversations yet"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"When visitors start conversations from your landing page, they'll appear here."})]}):e.jsx("div",{className:"grid gap-3","data-testid":"conversations-list",children:Q.map($=>{const I=$.lastMessage?.createdAt||$.updatedAt,A=$.lastMessage?.senderType==="visitor"&&$.status==="active";return e.jsx(ce,{className:`p-4 cursor-pointer transition-colors hover-elevate ${A?"border-violet-500/30":""}`,onClick:()=>o($.id),"data-testid":`card-conversation-${$.id}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-1",children:[e.jsx("span",{className:"font-medium text-sm","data-testid":`text-visitor-name-${$.id}`,children:$.visitorName}),A&&e.jsx(Ce,{className:"bg-violet-500/20 text-violet-400 border-violet-500/30","data-testid":`badge-needs-reply-${$.id}`,children:"Needs Reply"}),e.jsx(Ce,{variant:$.status==="active"?"default":"secondary",className:$.status==="active"?"bg-emerald-500/20 text-emerald-400 border-emerald-500/30":"",children:$.status})]}),e.jsx("p",{className:"text-sm font-medium truncate","data-testid":`text-subject-${$.id}`,children:$.subject}),$.lastMessage&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1 truncate",children:[e.jsxs("span",{className:"font-medium",children:[$.lastMessage.senderName,":"]})," ",$.lastMessage.message]}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(hs,{className:"w-3 h-3"}),$.visitorEmail]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Kt,{className:"w-3 h-3"}),$.messageCount," messages"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Wt,{className:"w-3 h-3"}),G(I)]})]})]}),e.jsx(L,{variant:"ghost",size:"icon",onClick:W=>{W.stopPropagation(),X($.accessToken)},"data-testid":`button-copy-link-${$.id}`,children:u===$.accessToken?e.jsx(is,{className:"w-4 h-4 text-emerald-400"}):e.jsx(fn,{className:"w-4 h-4"})})]})},$.id)})}),e.jsx(yt,{open:!!r,onOpenChange:$=>{$||o(null)},children:e.jsxs(xt,{className:"max-w-2xl max-h-[85vh] flex flex-col",children:[e.jsx(gt,{children:e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx(vt,{className:"text-base truncate","data-testid":"text-dialog-subject",children:P?.subject||"Loading..."}),P&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5",children:[P.visitorName," (",P.visitorEmail,")"]})]}),P&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{variant:"ghost",size:"icon",onClick:()=>X(P.accessToken),"data-testid":"button-copy-conversation-link",children:u===P.accessToken?e.jsx(is,{className:"w-4 h-4 text-emerald-400"}):e.jsx(fn,{className:"w-4 h-4"})}),P.status==="active"?e.jsxs(L,{variant:"outline",size:"sm",onClick:()=>B.mutate({id:P.id,status:"closed"}),"data-testid":"button-close-conversation",children:[e.jsx(BE,{className:"w-3.5 h-3.5 mr-1.5"}),"Close"]}):e.jsxs(L,{variant:"outline",size:"sm",onClick:()=>B.mutate({id:P.id,status:"active"}),"data-testid":"button-reopen-conversation",children:[e.jsx(Wm,{className:"w-3.5 h-3.5 mr-1.5"}),"Reopen"]})]})]})}),e.jsx("div",{className:"flex-1 overflow-auto min-h-0 py-4 space-y-3","data-testid":"dialog-messages-list",children:H?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(We,{className:"w-5 h-5 animate-spin text-muted-foreground"})}):P?.messages?.map($=>{const I=$.senderType==="admin";return e.jsx("div",{className:`flex ${I?"justify-end":"justify-start"}`,"data-testid":`dialog-message-${$.id}`,children:e.jsxs("div",{className:"max-w-[80%]",children:[e.jsxs(ce,{className:`p-3 ${I?"bg-primary/10 border-primary/20":""}`,children:[$.message&&e.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:$.message}),J($.attachments)]}),e.jsxs("div",{className:`flex items-center gap-2 mt-1 ${I?"justify-end":"justify-start"}`,children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:$.senderName}),e.jsx("span",{className:"text-[10px] text-muted-foreground/50",children:G($.createdAt)})]})]})},$.id)})}),P?.status==="active"&&e.jsxs("div",{className:"border-t pt-3 space-y-2",children:[f.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1.5",children:f.map(($,I)=>e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded-md bg-muted text-xs","data-testid":`admin-pending-attachment-${I}`,children:[$.type==="image"?e.jsx(Fi,{className:"w-3 h-3 text-emerald-500"}):$.type==="url"?e.jsx(El,{className:"w-3 h-3 text-blue-500"}):e.jsx(Gt,{className:"w-3 h-3 text-orange-500"}),e.jsx("span",{className:"max-w-[100px] truncate",children:$.name}),e.jsx("button",{onClick:()=>v(A=>A.filter((W,Z)=>Z!==I)),className:"text-muted-foreground hover:text-foreground","data-testid":`button-remove-admin-attachment-${I}`,children:e.jsx(zn,{className:"w-3 h-3"})})]},I))}),j&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Oe,{value:b,onChange:$=>k($.target.value),onKeyDown:$=>{$.key==="Enter"&&($.preventDefault(),z())},placeholder:"Paste a URL...",className:"flex-1 text-sm",autoFocus:!0,"data-testid":"input-admin-url"}),e.jsxs(L,{onClick:z,disabled:!b.trim(),size:"sm","data-testid":"button-admin-add-url",children:[e.jsx(Qt,{className:"w-3.5 h-3.5 mr-1"}),"Add"]}),e.jsx(L,{onClick:()=>{N(!1),k("")},size:"sm",variant:"ghost","data-testid":"button-admin-cancel-url",children:e.jsx(zn,{className:"w-3.5 h-3.5"})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{ref:E,type:"file",multiple:!0,accept:"image/*,.pdf,.doc,.docx,.txt,.zip,.psd,.ai,.fig",onChange:Y,className:"hidden","data-testid":"input-admin-file-upload"}),e.jsxs("div",{className:"flex gap-1 shrink-0",children:[e.jsx(L,{variant:"ghost",size:"icon",onClick:()=>E.current?.click(),disabled:x,title:"Attach files","data-testid":"button-admin-attach-file",children:x?e.jsx(We,{className:"w-4 h-4 animate-spin"}):e.jsx(Fw,{className:"w-4 h-4"})}),e.jsx(L,{variant:"ghost",size:"icon",onClick:()=>N(!j),title:"Add URL","data-testid":"button-admin-add-link",children:e.jsx(El,{className:"w-4 h-4"})})]}),e.jsx(fs,{value:l,onChange:$=>d($.target.value),onKeyDown:_,placeholder:"Type your reply...",className:"flex-1 min-h-[44px] max-h-28 resize-none text-sm","data-testid":"input-admin-reply"}),e.jsx(L,{onClick:ue,disabled:!l.trim()&&f.length===0||re.isPending,"data-testid":"button-send-admin-reply",children:re.isPending?e.jsx(We,{className:"w-4 h-4 animate-spin"}):e.jsx(os,{className:"w-4 h-4"})})]})]})]})})]})}function eq(){Un("API Keys");const{toast:s}=mt(),[t,n]=p.useState(!1),[r,o]=p.useState(""),[l,d]=p.useState("read"),[u,h]=p.useState(""),[f,v]=p.useState(null),[x,g]=p.useState(null),{data:j,isLoading:N}=_e({queryKey:["/api/api-keys"]}),{data:b}=_e({queryKey:["/api/customers"]}),k=we({mutationFn:async T=>(await je("POST","/api/api-keys",T)).json(),onSuccess:T=>{xe.invalidateQueries({queryKey:["/api/api-keys"]}),g(T.key),n(!1),o(""),d("read"),h(""),s({title:"API key created",description:"Copy the key now - you won't be able to see it again."})}}),E=we({mutationFn:async({id:T,isActive:P})=>{await je("PATCH",`/api/api-keys/${T}`,{isActive:P})},onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/api-keys"]})}}),S=we({mutationFn:async T=>{await je("DELETE",`/api/api-keys/${T}`)},onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/api-keys"]}),s({title:"API key deleted"})}});return N?e.jsxs("div",{className:"space-y-6",children:[e.jsx(ye,{className:"h-8 w-32"}),e.jsx("div",{className:"grid gap-4",children:[1,2,3].map(T=>e.jsx(ce,{className:"p-5",children:e.jsx(ye,{className:"h-20 w-full"})},T))})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2","data-testid":"text-page-title",children:[e.jsx(Dl,{className:"w-6 h-6 text-primary"}),"API Keys"]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage API keys for programmatic access to your data"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{variant:"outline",asChild:!0,"data-testid":"link-api-docs",children:e.jsxs("a",{href:"/api/docs",target:"_blank",rel:"noopener noreferrer",children:[e.jsx(_s,{className:"w-4 h-4 mr-1"}),"API Docs"]})}),e.jsxs(L,{onClick:()=>n(!0),"data-testid":"button-create-key",children:[e.jsx(Qt,{className:"w-4 h-4 mr-1"}),"Create API Key"]})]})]}),x&&e.jsx(ce,{className:"p-4 border-yellow-500/50 bg-yellow-500/5",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(kn,{className:"w-5 h-5 text-yellow-500 mt-0.5 shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm",children:"New API Key Created"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Copy this key now. You won't be able to see the full key again."}),e.jsxs("div",{className:"flex items-center gap-2 bg-muted/50 rounded-md px-3 py-2",children:[e.jsx("code",{className:"text-xs font-mono break-all flex-1","data-testid":"text-new-key",children:x}),e.jsx(L,{size:"sm",variant:"ghost",onClick:()=>{navigator.clipboard.writeText(x),s({title:"Copied!"})},"data-testid":"button-copy-new-key",children:e.jsx(fn,{className:"w-4 h-4"})})]})]}),e.jsx(L,{size:"sm",variant:"ghost",onClick:()=>g(null),className:"shrink-0",children:"Dismiss"})]})}),!j||j.length===0?e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(Dl,{className:"w-12 h-12 text-muted-foreground/30 mx-auto mb-4"}),e.jsx("h3",{className:"font-semibold text-lg mb-1",children:"No API Keys"}),e.jsx("p",{className:"text-muted-foreground text-sm mb-4",children:"Create an API key to start integrating with your billing data programmatically."}),e.jsxs(L,{onClick:()=>n(!0),"data-testid":"button-create-key-empty",children:[e.jsx(Qt,{className:"w-4 h-4 mr-1"})," Create Your First API Key"]})]}):e.jsx("div",{className:"space-y-3",children:j.map(T=>e.jsx(ce,{className:"p-4","data-testid":`card-api-key-${T.id}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold","data-testid":`text-key-name-${T.id}`,children:T.name}),e.jsx(Ce,{variant:T.isActive?"default":"secondary",className:"text-xs",children:T.isActive?"Active":"Disabled"}),e.jsx(Ce,{variant:"outline",className:"text-xs",children:T.scopes==="all"?"Full Access":T.scopes})]}),e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("code",{className:"text-xs font-mono text-muted-foreground","data-testid":`text-key-value-${T.id}`,children:T.key})}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Wt,{className:"w-3 h-3"}),"Created ",new Date(T.createdAt).toLocaleDateString()]}),T.lastUsedAt&&e.jsxs("span",{children:["Last used ",new Date(T.lastUsedAt).toLocaleDateString()]}),T.customerId&&b&&e.jsxs("span",{children:["Scoped to: ",b.find(P=>P.id===T.customerId)?.name||"Unknown"]}),T.expiresAt&&e.jsx("span",{className:new Date(T.expiresAt)<new Date?"text-red-500":"",children:new Date(T.expiresAt)<new Date?"Expired":`Expires ${new Date(T.expiresAt).toLocaleDateString()}`})]})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsx(sd,{checked:T.isActive,onCheckedChange:P=>E.mutate({id:T.id,isActive:P}),"data-testid":`switch-toggle-key-${T.id}`}),e.jsx(L,{size:"sm",variant:"ghost",className:"text-destructive hover:text-destructive",onClick:()=>S.mutate(T.id),"data-testid":`button-delete-key-${T.id}`,children:e.jsx(ls,{className:"w-4 h-4"})})]})]})},T.id))}),e.jsx(yt,{open:t,onOpenChange:n,children:e.jsxs(xt,{children:[e.jsx(gt,{children:e.jsx(vt,{children:"Create API Key"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(De,{children:"Name"}),e.jsx(Oe,{placeholder:"e.g., My Integration",value:r,onChange:T=>o(T.target.value),"data-testid":"input-key-name"})]}),e.jsxs("div",{children:[e.jsx(De,{children:"Permissions"}),e.jsxs(Dt,{value:l,onValueChange:d,children:[e.jsx(It,{"data-testid":"select-key-scopes",children:e.jsx($t,{})}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"read",children:"Read Only"}),e.jsx(Ie,{value:"read,write",children:"Read & Write"}),e.jsx(Ie,{value:"all",children:"Full Access"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Read = view data, Write = create entries, Full = everything"})]}),e.jsxs("div",{children:[e.jsx(De,{children:"Restrict to Customer (Optional)"}),e.jsxs(Dt,{value:u||"none",onValueChange:T=>h(T==="none"?"":T),children:[e.jsx(It,{"data-testid":"select-key-customer",children:e.jsx($t,{placeholder:"All customers"})}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"none",children:"All customers"}),b?.map(T=>e.jsx(Ie,{value:T.id,children:T.name},T.id))]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Limit this key to only access one customer's data"})]}),e.jsx(L,{className:"w-full",disabled:!r||k.isPending,onClick:()=>k.mutate({name:r,scopes:l,customerId:u||void 0}),"data-testid":"button-submit-create-key",children:k.isPending?"Creating...":"Create API Key"})]})]})})]})}function Nl({code:s,language:t="bash"}){const[n,r]=p.useState(!1);return e.jsxs("div",{className:"relative group",children:[e.jsx("pre",{className:"bg-[#0d1117] text-zinc-200 rounded-md p-5 text-[13px] font-mono overflow-x-auto border border-white/[0.06] leading-relaxed shadow-inner",children:e.jsx("code",{children:s})}),e.jsx(L,{size:"sm",variant:"ghost",className:"absolute top-3 right-3 h-8 w-8 p-0 opacity-0 group-hover:opacity-100 transition-all text-zinc-400 hover:text-white hover:bg-white/10 rounded-md",onClick:()=>{navigator.clipboard.writeText(s),r(!0),setTimeout(()=>r(!1),2e3)},children:n?e.jsx(is,{className:"w-3.5 h-3.5 text-emerald-400"}):e.jsx(fn,{className:"w-3.5 h-3.5"})})]})}function Ni({method:s,path:t,description:n,scopes:r,example:o,response:l,children:d}){const[u,h]=p.useState(!1),f={GET:{bg:"bg-emerald-500/10",text:"text-emerald-400",glow:"shadow-emerald-500/5"},POST:{bg:"bg-blue-500/10",text:"text-blue-400",glow:"shadow-blue-500/5"},PATCH:{bg:"bg-amber-500/10",text:"text-amber-400",glow:"shadow-amber-500/5"},DELETE:{bg:"bg-red-500/10",text:"text-red-400",glow:"shadow-red-500/5"}},v=f[s]||f.GET;return e.jsxs("div",{className:`rounded-md border border-white/[0.06] bg-white/[0.01] overflow-hidden transition-all duration-200 hover:border-white/[0.1] ${u?"shadow-lg "+v.glow:""}`,"data-testid":`endpoint-${s.toLowerCase()}-${t.replace(/[/:]/g,"-")}`,children:[e.jsxs("button",{className:"w-full flex items-center gap-3 p-4 sm:p-5 text-left hover:bg-white/[0.02] transition-colors",onClick:()=>h(!u),children:[e.jsx("span",{className:`inline-flex items-center justify-center px-2.5 py-1 rounded-md ${v.bg} ${v.text} font-mono text-xs font-bold tracking-wider min-w-[52px]`,children:s}),e.jsx("code",{className:"text-sm font-mono font-medium flex-1 text-white/80",children:t}),e.jsx("span",{className:"hidden sm:inline-flex items-center px-2.5 py-1 rounded-full bg-white/[0.04] border border-white/[0.06] text-[11px] text-white/40 font-medium",children:r}),e.jsx("div",{className:`w-6 h-6 rounded-md flex items-center justify-center transition-colors ${u?"bg-white/[0.06]":""}`,children:u?e.jsx(Sr,{className:"w-4 h-4 text-white/40"}):e.jsx(Bm,{className:"w-4 h-4 text-white/30"})})]}),u&&e.jsxs("div",{className:"border-t border-white/[0.06] px-5 pb-5 pt-4 space-y-4 bg-white/[0.01]",children:[e.jsx("p",{className:"text-sm text-white/50 leading-relaxed",children:n}),d,o&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2.5",children:[e.jsx("div",{className:"w-1 h-4 rounded-full bg-blue-500/50"}),e.jsx("p",{className:"text-xs font-semibold text-white/60 uppercase tracking-wider",children:"Example Request"})]}),e.jsx(Nl,{code:o})]}),l&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2.5",children:[e.jsx("div",{className:"w-1 h-4 rounded-full bg-emerald-500/50"}),e.jsx("p",{className:"text-xs font-semibold text-white/60 uppercase tracking-wider",children:"Example Response"})]}),e.jsx(Nl,{code:l,language:"json"})]})]})]})}function Wp({number:s,title:t,description:n,children:r}){const o=["from-blue-500 to-cyan-500","from-violet-500 to-purple-500","from-emerald-500 to-teal-500"],l=o[(s-1)%o.length];return e.jsxs("div",{className:"flex gap-5",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full bg-gradient-to-br ${l} flex items-center justify-center text-sm font-bold text-white shrink-0 shadow-lg`,children:s}),e.jsx("div",{className:"w-px flex-1 bg-gradient-to-b from-white/10 to-transparent mt-3"})]}),e.jsxs("div",{className:"pb-10",children:[e.jsx("h3",{className:"font-semibold text-base text-white/90 mb-1.5",children:t}),e.jsx("p",{className:"text-sm text-white/45 mb-4 leading-relaxed",children:n}),r]})]})}function tq(){const[s,t]=p.useState("getting-started"),n=window.location.origin,r=[{id:"getting-started",label:"Getting Started",icon:$n},{id:"authentication",label:"Authentication",icon:od},{id:"customers",label:"Customers",icon:Vr},{id:"projects",label:"Projects",icon:qn},{id:"invoices",label:"Invoices",icon:Gt},{id:"work-entries",label:"Work Entries",icon:pm},{id:"errors",label:"Error Handling",icon:Jc}];return e.jsxs("div",{className:"min-h-screen bg-[#0a0a0f] text-white",style:{fontFamily:"Poppins, sans-serif"},children:[e.jsx("div",{className:"border-b border-white/[0.06] bg-[#0a0a0f]/80 sticky top-0 z-10",style:{backdropFilter:"blur(20px)"},children:e.jsx("div",{className:"max-w-6xl mx-auto px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-md bg-gradient-to-br from-blue-500/20 to-cyan-500/20 border border-white/[0.06] flex items-center justify-center",children:e.jsx(VE,{className:"w-5 h-5 text-blue-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-lg font-bold text-white/90","data-testid":"text-api-docs-title",children:"AI Powered Sites API"}),e.jsx("p",{className:"text-xs text-white/40",children:"Simple, powerful API for your integrations"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ce,{className:"bg-emerald-500/10 text-emerald-400 border-emerald-500/20 text-[11px] font-semibold",children:"v1"}),e.jsxs("div",{className:"hidden sm:flex items-center gap-2 px-3 py-1.5 rounded-full bg-emerald-500/[0.06] border border-emerald-500/15",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-400 animate-pulse"}),e.jsx("span",{className:"text-[11px] text-emerald-400/80 font-medium",children:"Live"})]})]})]})})}),e.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-10 flex gap-10",children:[e.jsxs("nav",{className:"w-52 shrink-0 hidden lg:block sticky top-24 self-start",children:[e.jsx("div",{className:"space-y-1",children:r.map(o=>e.jsxs("button",{onClick:()=>{t(o.id),document.getElementById(o.id)?.scrollIntoView({behavior:"smooth"})},className:`w-full flex items-center gap-2.5 px-3.5 py-2.5 rounded-md text-sm transition-all duration-200 text-left ${s===o.id?"bg-blue-500/10 text-blue-400 font-medium border border-blue-500/15":"text-white/40 hover:text-white/70 hover:bg-white/[0.03] border border-transparent"}`,"data-testid":`nav-${o.id}`,children:[e.jsx(o.icon,{className:"w-4 h-4"}),o.label]},o.id))}),e.jsxs("div",{className:"mt-6 p-4 rounded-md bg-white/[0.02] border border-white/[0.06]",children:[e.jsx("p",{className:"text-[11px] text-white/30 mb-2 font-medium uppercase tracking-wider",children:"Base URL"}),e.jsxs("code",{className:"text-[11px] text-cyan-400/70 font-mono break-all",children:[n,"/api/v1"]})]})]}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-16",children:[e.jsxs("section",{id:"getting-started",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:"w-9 h-9 rounded-md bg-gradient-to-br from-blue-500/20 to-cyan-500/20 border border-white/[0.06] flex items-center justify-center",children:e.jsx($n,{className:"w-5 h-5 text-blue-400"})}),e.jsx("h2",{className:"text-2xl font-bold text-white/90",children:"Getting Started"})]}),e.jsxs("div",{className:"relative p-6 sm:p-8 mb-8 rounded-md border border-blue-500/15 bg-gradient-to-br from-blue-500/[0.05] via-cyan-500/[0.02] to-transparent overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-blue-400/30 to-transparent"}),e.jsxs("div",{className:"flex items-start gap-5",children:[e.jsx("div",{className:"w-14 h-14 rounded-md bg-gradient-to-br from-blue-500/20 to-cyan-500/20 border border-white/[0.06] flex items-center justify-center shrink-0 shadow-lg shadow-blue-500/10",children:e.jsx(nn,{className:"w-7 h-7 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg text-white/90 mb-2",children:"Welcome to the API"}),e.jsx("p",{className:"text-sm text-white/45 leading-relaxed",children:"The AI Powered Sites API lets you read your customers, projects, and invoices, and log work entries  all with simple HTTP requests. No complex setup needed."})]})]})]}),e.jsxs("div",{className:"space-y-0",children:[e.jsx(Wp,{number:1,title:"Get Your API Key",description:"Go to your admin dashboard and create an API key. You'll need it for all requests.",children:e.jsxs("div",{className:"flex items-center gap-2.5 p-4 rounded-md bg-white/[0.02] border border-white/[0.06] text-sm",children:[e.jsx(Dl,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-white/50",children:"Dashboard"}),e.jsx(Cl,{className:"w-3 h-3 text-white/20"}),e.jsx("span",{className:"text-white/50",children:"API Keys"}),e.jsx(Cl,{className:"w-3 h-3 text-white/20"}),e.jsx("span",{className:"font-medium text-white/70",children:"Create API Key"})]})}),e.jsx(Wp,{number:2,title:"Make Your First Request",description:"Try fetching your customers. Replace YOUR_API_KEY with your actual key.",children:e.jsx(Nl,{code:`curl ${n}/api/v1/customers \\
  -H "Authorization: Bearer YOUR_API_KEY"`})}),e.jsx(Wp,{number:3,title:"Check the Response",description:"You'll get back a JSON response with your data. All responses follow the same format.",children:e.jsx(Nl,{code:`{
  "data": [
    {
      "id": "abc123",
      "name": "Acme Corp",
      "email": "contact@acme.com",
      "company": "Acme Corp",
      "createdAt": "2025-01-15T10:30:00Z"
    }
  ]
}`,language:"json"})})]}),e.jsxs("div",{className:"flex items-start gap-4 p-5 rounded-md border border-blue-500/15 bg-blue-500/[0.04]",children:[e.jsx($w,{className:"w-5 h-5 text-blue-400 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm text-white/80",children:"Base URL"}),e.jsxs("code",{className:"text-sm bg-white/[0.04] px-3 py-1.5 rounded-md mt-2 inline-block font-mono text-cyan-400/80 border border-white/[0.06]",children:[n,"/api/v1"]}),e.jsx("p",{className:"text-xs text-white/35 mt-2",children:"All endpoints start with this URL. Include your API key in every request."})]})]})]}),e.jsxs("section",{id:"authentication",className:"scroll-mt-20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:"w-9 h-9 rounded-md bg-gradient-to-br from-violet-500/20 to-purple-500/20 border border-white/[0.06] flex items-center justify-center",children:e.jsx(od,{className:"w-5 h-5 text-violet-400"})}),e.jsx("h2",{className:"text-2xl font-bold text-white/90",children:"Authentication"})]}),e.jsxs("p",{className:"text-white/45 mb-5 text-sm leading-relaxed",children:["Every request needs your API key in the ",e.jsx("code",{className:"bg-white/[0.06] px-2 py-0.5 rounded-md text-xs font-mono text-cyan-400/70",children:"Authorization"})," header."]}),e.jsx(Nl,{code:"Authorization: Bearer aips_your_api_key_here"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-8",children:[{icon:kn,title:"Read Only",desc:"View customers, projects, invoices. Can't make changes.",color:"from-emerald-500/15 to-teal-500/15",iconColor:"text-emerald-400",border:"border-emerald-500/10"},{icon:Ow,title:"Read & Write",desc:"View data plus create work entries and log time.",color:"from-blue-500/15 to-cyan-500/15",iconColor:"text-blue-400",border:"border-blue-500/10"},{icon:Dl,title:"Full Access",desc:"Complete access to all API features.",color:"from-violet-500/15 to-purple-500/15",iconColor:"text-violet-400",border:"border-violet-500/10"}].map(o=>e.jsxs("div",{className:`group p-5 rounded-md bg-white/[0.02] border border-white/[0.06] hover:${o.border} hover:bg-white/[0.03] transition-all duration-300`,children:[e.jsx("div",{className:`w-10 h-10 rounded-md bg-gradient-to-br ${o.color} border border-white/[0.06] flex items-center justify-center mb-3 group-hover:scale-105 transition-transform duration-300`,children:e.jsx(o.icon,{className:`w-5 h-5 ${o.iconColor}`})}),e.jsx("h4",{className:"font-semibold text-sm text-white/80 mb-1",children:o.title}),e.jsx("p",{className:"text-xs text-white/35 leading-relaxed",children:o.desc})]},o.title))}),e.jsxs("div",{className:"flex items-start gap-4 p-5 mt-6 rounded-md border border-amber-500/15 bg-amber-500/[0.04]",children:[e.jsx(Jc,{className:"w-5 h-5 text-amber-400 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm text-white/80",children:"Keep Your Key Safe"}),e.jsx("p",{className:"text-xs text-white/35 mt-1 leading-relaxed",children:"Never share your API key publicly or put it in frontend code. Store it in environment variables or a secrets manager."})]})]})]}),e.jsxs("section",{id:"customers",className:"scroll-mt-20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:"w-9 h-9 rounded-md bg-gradient-to-br from-cyan-500/20 to-blue-500/20 border border-white/[0.06] flex items-center justify-center",children:e.jsx(Vr,{className:"w-5 h-5 text-cyan-400"})}),e.jsx("h2",{className:"text-2xl font-bold text-white/90",children:"Customers"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Ni,{method:"GET",path:"/api/v1/customers",description:"Get a list of all your customers. If your API key is scoped to a specific customer, only that customer will be returned.",scopes:"read",example:`curl ${n}/api/v1/customers \\
  -H "Authorization: Bearer YOUR_API_KEY"`,response:`{
  "data": [
    {
      "id": "abc123",
      "name": "Acme Corp",
      "email": "contact@acme.com",
      "company": "Acme Corp",
      "createdAt": "2025-01-15T10:30:00Z"
    }
  ]
}`}),e.jsx(Ni,{method:"GET",path:"/api/v1/customers/:id",description:"Get details for a specific customer by their ID.",scopes:"read",example:`curl ${n}/api/v1/customers/abc123 \\
  -H "Authorization: Bearer YOUR_API_KEY"`,response:`{
  "data": {
    "id": "abc123",
    "name": "Acme Corp",
    "email": "contact@acme.com",
    "company": "Acme Corp",
    "createdAt": "2025-01-15T10:30:00Z"
  }
}`})]})]}),e.jsxs("section",{id:"projects",className:"scroll-mt-20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:"w-9 h-9 rounded-md bg-gradient-to-br from-amber-500/20 to-orange-500/20 border border-white/[0.06] flex items-center justify-center",children:e.jsx(qn,{className:"w-5 h-5 text-amber-400"})}),e.jsx("h2",{className:"text-2xl font-bold text-white/90",children:"Projects"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Ni,{method:"GET",path:"/api/v1/projects",description:"Get all projects. Filter by customer using the customerId query parameter.",scopes:"read",example:`curl "${n}/api/v1/projects?customerId=abc123" \\
  -H "Authorization: Bearer YOUR_API_KEY"`,response:`{
  "data": [
    {
      "id": "proj_1",
      "name": "Website Redesign",
      "description": "Complete redesign of corporate site",
      "status": "active",
      "customerId": "abc123",
      "previewUrl": "https://preview.example.com",
      "createdAt": "2025-02-01T09:00:00Z"
    }
  ]
}`}),e.jsx(Ni,{method:"GET",path:"/api/v1/projects/:id",description:"Get a specific project by its ID.",scopes:"read",example:`curl ${n}/api/v1/projects/proj_1 \\
  -H "Authorization: Bearer YOUR_API_KEY"`}),e.jsx(Ni,{method:"GET",path:"/api/v1/projects/:id/updates",description:"Get all progress updates for a project. Returns milestones, deliverables, and status updates in chronological order.",scopes:"read",example:`curl ${n}/api/v1/projects/proj_1/updates \\
  -H "Authorization: Bearer YOUR_API_KEY"`,response:`{
  "data": [
    {
      "id": "upd_1",
      "projectId": "proj_1",
      "type": "milestone",
      "title": "Design Approved",
      "description": "Homepage design has been approved",
      "createdAt": "2025-02-10T14:00:00Z"
    }
  ]
}`})]})]}),e.jsxs("section",{id:"invoices",className:"scroll-mt-20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:"w-9 h-9 rounded-md bg-gradient-to-br from-emerald-500/20 to-green-500/20 border border-white/[0.06] flex items-center justify-center",children:e.jsx(Gt,{className:"w-5 h-5 text-emerald-400"})}),e.jsx("h2",{className:"text-2xl font-bold text-white/90",children:"Invoices"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Ni,{method:"GET",path:"/api/v1/invoices",description:"Get all invoices. Filter by status using the status query parameter (draft, pending, paid, overdue).",scopes:"read",example:`curl "${n}/api/v1/invoices?status=pending" \\
  -H "Authorization: Bearer YOUR_API_KEY"`,response:`{
  "data": [
    {
      "id": "inv_1",
      "invoiceNumber": "INV-001",
      "customerId": "abc123",
      "projectId": "proj_1",
      "status": "pending",
      "totalCents": 250000,
      "dueDate": "2025-03-01",
      "createdAt": "2025-02-15T10:00:00Z"
    }
  ]
}`,children:e.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-md bg-white/[0.02] border border-white/[0.06]",children:[e.jsx(ya,{className:"w-4 h-4 text-amber-400 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-white/60 mb-1",children:"Understanding Amounts"}),e.jsxs("p",{className:"text-xs text-white/35 leading-relaxed",children:["All money amounts are in ",e.jsx("strong",{className:"text-white/50",children:"cents"}),". So 250000 = $2,500.00. Divide by 100 to get dollars."]})]})]})}),e.jsx(Ni,{method:"GET",path:"/api/v1/invoices/:id",description:"Get a single invoice with its line items. Shows exactly what was billed and the breakdown.",scopes:"read",example:`curl ${n}/api/v1/invoices/inv_1 \\
  -H "Authorization: Bearer YOUR_API_KEY"`,response:`{
  "data": {
    "id": "inv_1",
    "invoiceNumber": "INV-001",
    "status": "pending",
    "totalCents": 250000,
    "dueDate": "2025-03-01",
    "lineItems": [
      {
        "description": "Homepage Design",
        "quantity": 1,
        "unitPriceCents": 150000,
        "totalCents": 150000
      },
      {
        "description": "Custom Images",
        "quantity": 5,
        "unitPriceCents": 20000,
        "totalCents": 100000
      }
    ]
  }
}`})]})]}),e.jsxs("section",{id:"work-entries",className:"scroll-mt-20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:"w-9 h-9 rounded-md bg-gradient-to-br from-pink-500/20 to-rose-500/20 border border-white/[0.06] flex items-center justify-center",children:e.jsx(pm,{className:"w-5 h-5 text-pink-400"})}),e.jsx("h2",{className:"text-2xl font-bold text-white/90",children:"Work Entries"})]}),e.jsx("div",{className:"space-y-3",children:e.jsx(Ni,{method:"POST",path:"/api/v1/work-entries",description:"Log a new work entry against a project. This requires the 'write' scope. The entry will be available for invoicing later.",scopes:"write",example:`curl -X POST ${n}/api/v1/work-entries \\
  -H "Authorization: Bearer YOUR_API_KEY" \\
  -H "Content-Type: application/json" \\
  -d '{
    "projectId": "proj_1",
    "billingRateId": "rate_1",
    "quantity": 3,
    "description": "Designed 3 inner pages"
  }'`,response:`{
  "data": {
    "id": "we_1",
    "projectId": "proj_1",
    "billingRateId": "rate_1",
    "quantity": 3,
    "description": "Designed 3 inner pages",
    "createdAt": "2025-02-20T15:00:00Z"
  }
}`,children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"w-1 h-4 rounded-full bg-violet-500/50"}),e.jsx("p",{className:"text-xs font-semibold text-white/60 uppercase tracking-wider",children:"Required Fields"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2.5",children:[{field:"projectId",label:"Project ID"},{field:"billingRateId",label:"Rate to apply"},{field:"quantity",label:"Number of units"},{field:"description",label:"What was done"}].map(o=>e.jsxs("div",{className:"flex items-center gap-2.5 p-2.5 rounded-md bg-white/[0.02] border border-white/[0.04]",children:[e.jsx(ys,{className:"w-3.5 h-3.5 text-emerald-400 shrink-0"}),e.jsx("code",{className:"text-xs bg-white/[0.04] px-2 py-0.5 rounded font-mono text-cyan-400/70",children:o.field}),e.jsx("span",{className:"text-xs text-white/35",children:o.label})]},o.field))})]})})})]}),e.jsxs("section",{id:"errors",className:"scroll-mt-20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:"w-9 h-9 rounded-md bg-gradient-to-br from-red-500/20 to-orange-500/20 border border-white/[0.06] flex items-center justify-center",children:e.jsx(Jc,{className:"w-5 h-5 text-red-400"})}),e.jsx("h2",{className:"text-2xl font-bold text-white/90",children:"Error Handling"})]}),e.jsx("p",{className:"text-white/45 mb-6 text-sm leading-relaxed",children:"When something goes wrong, the API returns a clear error message with an appropriate HTTP status code."}),e.jsx("div",{className:"space-y-3",children:[{code:"401",label:"Unauthorized",desc:"Your API key is missing, invalid, or not included in the Authorization header.",color:"text-red-400",bg:"bg-red-500/10",border:"border-red-500/10"},{code:"403",label:"Forbidden",desc:"Your key doesn't have the required scope, is disabled, or has expired.",color:"text-amber-400",bg:"bg-amber-500/10",border:"border-amber-500/10"},{code:"404",label:"Not Found",desc:"The resource you requested doesn't exist.",color:"text-yellow-400",bg:"bg-yellow-500/10",border:"border-yellow-500/10"},{code:"500",label:"Server Error",desc:"Something went wrong on our end. Try again in a moment.",color:"text-red-400",bg:"bg-red-500/10",border:"border-red-500/10"}].map(o=>e.jsxs("div",{className:"flex items-start gap-4 p-5 rounded-md bg-white/[0.02] border border-white/[0.06] hover:border-white/[0.1] transition-colors",children:[e.jsx("span",{className:`inline-flex items-center justify-center px-3 py-1.5 rounded-md ${o.bg} ${o.color} ${o.border} border font-mono text-xs font-bold min-w-[52px]`,children:o.code}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm text-white/80",children:o.label}),e.jsx("p",{className:"text-xs text-white/35 mt-0.5 leading-relaxed",children:o.desc})]})]},o.code))}),e.jsx("div",{className:"mt-6",children:e.jsx(Nl,{code:`{
  "error": "Missing required scope: 'write'. Your key has: read"
}`,language:"json"})}),e.jsxs("div",{className:"relative p-8 mt-10 text-center rounded-md border border-blue-500/15 bg-gradient-to-br from-blue-500/[0.04] via-violet-500/[0.02] to-transparent overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-blue-400/20 to-transparent"}),e.jsx("div",{className:"w-14 h-14 rounded-full bg-gradient-to-br from-blue-500/20 to-violet-500/20 border border-white/[0.06] flex items-center justify-center mx-auto mb-5 shadow-lg shadow-blue-500/10",children:e.jsx(ya,{className:"w-6 h-6 text-blue-400"})}),e.jsx("h3",{className:"font-bold text-xl text-white/90 mb-3",children:"Need Help?"}),e.jsx("p",{className:"text-sm text-white/40 mb-6 max-w-md mx-auto",children:"Start a conversation with us or check out the Q&A section for common questions."}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx(L,{className:"bg-gradient-to-r from-blue-500 to-violet-500 border-0 text-white font-medium shadow-lg shadow-blue-500/20",asChild:!0,children:e.jsx("a",{href:"/#contact",children:"Contact Us"})}),e.jsx(L,{className:"bg-white/[0.04] border border-white/[0.08] text-white/70 hover:bg-white/[0.08] hover:text-white transition-colors",asChild:!0,children:e.jsx("a",{href:"/questions",children:"Q&A"})})]})]})]})]})]})]})}function sq({status:s}){switch(s){case"success":return e.jsxs(Ce,{className:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400","data-testid":`badge-status-${s}`,children:[e.jsx(wn,{className:"w-3 h-3 mr-1"}),"Success"]});case"failed":return e.jsxs(Ce,{variant:"destructive","data-testid":`badge-status-${s}`,children:[e.jsx(fo,{className:"w-3 h-3 mr-1"}),"Failed"]});case"pending":return e.jsxs(Ce,{className:"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400","data-testid":`badge-status-${s}`,children:[e.jsx(We,{className:"w-3 h-3 mr-1 animate-spin"}),"Running"]});default:return e.jsx(Ce,{variant:"secondary","data-testid":`badge-status-${s}`,children:s})}}function nq({project:s,customers:t,backupRate:n}){const{toast:r}=mt(),[o,l]=p.useState(!1),[d,u]=p.useState(!1),[h,f]=p.useState(""),[v,x]=p.useState("main"),[g,j]=p.useState(""),N=t.find(B=>B.id===s.customerId),{data:b,isLoading:k}=_e({queryKey:["/api/git-backups/project",s.id],queryFn:async()=>{const B=await fetch(`/api/git-backups/project/${s.id}`,{credentials:"include"});if(!B.ok)throw new Error("Failed to fetch");return B.json()}}),{data:E}=_e({queryKey:["/api/git-backups/logs",s.id],queryFn:async()=>{const B=await fetch(`/api/git-backups/logs/${s.id}`,{credentials:"include"});if(!B.ok)throw new Error("Failed to fetch");return B.json()},enabled:o}),{data:S}=_e({queryKey:["/api/git-backups/repos",b?.id],queryFn:async()=>{const B=await fetch(`/api/git-backups/${b.id}/repos`,{credentials:"include"});if(!B.ok)throw new Error("Failed to fetch");return B.json()},enabled:!!b?.isConnected&&d}),T=we({mutationFn:async()=>(await je("POST","/api/git-backups",{projectId:s.id,customerId:s.customerId})).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/git-backups/project",s.id]}),r({title:"Backup initialized",description:"GitHub connection is ready. Customer needs to connect their GitHub account from their portal."})}}),P=we({mutationFn:async B=>(await je("PATCH",`/api/git-backups/${b.id}`,B)).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/git-backups/project",s.id]}),r({title:"Config updated"})}}),H=we({mutationFn:async()=>(await je("POST",`/api/git-backups/${b.id}/push`,{message:g||void 0})).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/git-backups/logs",s.id]}),r({title:"Backup started",description:"Pushing project data to GitHub..."}),j("")}}),re=we({mutationFn:async()=>(await je("DELETE",`/api/git-backups/${b.id}`)).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/git-backups/project",s.id]}),r({title:"Backup config removed"})}});return k?e.jsx(ce,{className:"p-4",children:e.jsx(ye,{className:"h-20 w-full"})}):e.jsxs(ce,{className:"overflow-hidden","data-testid":`card-backup-${s.id}`,children:[e.jsx("div",{className:"p-4 border-b bg-muted/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg bg-gradient-to-br from-violet-500 to-purple-600 flex items-center justify-center",children:e.jsx(po,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-sm","data-testid":`text-project-name-${s.id}`,children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:N?.name||"Unknown client"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:b?.isConnected?e.jsxs(Ce,{className:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400","data-testid":`badge-connected-${s.id}`,children:[e.jsx(mo,{className:"w-3 h-3 mr-1"}),b.githubUsername||"Connected"]}):b?e.jsxs(Ce,{variant:"outline",className:"text-amber-600 border-amber-300","data-testid":`badge-pending-${s.id}`,children:[e.jsx(Fn,{className:"w-3 h-3 mr-1"}),"Awaiting GitHub"]}):null})]})}),e.jsxs("div",{className:"p-4",children:[b?e.jsx("div",{className:"space-y-4",children:b.isConnected?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[b.githubRepo?e.jsx(Ce,{variant:"outline",className:"font-mono text-xs","data-testid":`badge-repo-${s.id}`,children:b.githubRepo}):e.jsx("span",{className:"text-xs text-muted-foreground",children:"No repo selected"}),b.githubBranch&&e.jsxs(Ce,{variant:"secondary",className:"text-xs",children:[e.jsx(mm,{className:"w-3 h-3 mr-1"}),b.githubBranch]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(L,{variant:"outline",size:"sm",onClick:()=>u(!d),"data-testid":`button-settings-${s.id}`,children:[e.jsx(kb,{className:"w-4 h-4 mr-1"}),"Settings"]}),e.jsxs(L,{variant:"outline",size:"sm",onClick:()=>l(!o),"data-testid":`button-history-${s.id}`,children:[e.jsx(gb,{className:"w-4 h-4 mr-1"}),"History",o?e.jsx(Io,{className:"w-3 h-3 ml-1"}):e.jsx(Sr,{className:"w-3 h-3 ml-1"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>P.mutate({autopilotEnabled:!b.autopilotEnabled}),className:"text-muted-foreground hover:text-foreground transition-colors","data-testid":`button-autopilot-toggle-${s.id}`,children:b.autopilotEnabled?e.jsx(Hw,{className:"w-8 h-8 text-emerald-500"}):e.jsx(Bw,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium",children:["Autopilot ",b.autopilotEnabled?"On":"Off"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:b.autopilotEnabled?`Auto-backup ${b.autopilotFrequency||"daily"}`:"Enable for automatic backups"})]})]}),b.autopilotEnabled&&e.jsxs(Dt,{value:b.autopilotFrequency||"daily",onValueChange:B=>P.mutate({autopilotFrequency:B}),children:[e.jsx(It,{className:"w-28","data-testid":`select-frequency-${s.id}`,children:e.jsx($t,{})}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"hourly",children:"Hourly"}),e.jsx(Ie,{value:"daily",children:"Daily"}),e.jsx(Ie,{value:"weekly",children:"Weekly"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{placeholder:"Commit message (optional)",value:g,onChange:B=>j(B.target.value),className:"flex-1 text-sm","data-testid":`input-commit-message-${s.id}`}),e.jsxs(L,{onClick:()=>H.mutate(),disabled:H.isPending||!b.githubRepo,className:"bg-gradient-to-r from-violet-600 to-purple-600 hover:from-violet-700 hover:to-purple-700","data-testid":`button-push-now-${s.id}`,children:[H.isPending?e.jsx(We,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(gT,{className:"w-4 h-4 mr-2"}),"Push Now",n?.isActive&&n.rateCents>0&&e.jsxs("span",{className:"ml-1.5 inline-flex items-center gap-0.5 bg-white/20 rounded-full px-2 py-0.5 text-xs font-medium",children:[e.jsx(rr,{className:"w-3 h-3"}),(n.rateCents/100).toFixed(2)]})]})]}),b.lastPushAt&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last backup: ",new Date(b.lastPushAt).toLocaleString()]})]}):e.jsxs("div",{className:"text-center py-4 space-y-3",children:[e.jsx("div",{className:"w-12 h-12 mx-auto rounded-full bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center",children:e.jsx(mo,{className:"w-6 h-6 text-amber-600 dark:text-amber-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Waiting for customer to connect GitHub"}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[N?.name||"Customer"," needs to connect their GitHub account from their portal."]}),N?.portalToken&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Portal link: ",e.jsxs("code",{className:"bg-muted px-1 rounded",children:["/portal/",N.portalToken]})]})]}),e.jsxs(L,{variant:"outline",size:"sm",onClick:()=>re.mutate(),disabled:re.isPending,className:"text-destructive","data-testid":`button-remove-config-${s.id}`,children:[e.jsx(ls,{className:"w-3 h-3 mr-1"}),"Remove"]})]})}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx(mo,{className:"w-10 h-10 mx-auto text-muted-foreground mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"No backup configured for this project"}),e.jsxs(L,{onClick:()=>T.mutate(),disabled:T.isPending,"data-testid":`button-enable-backup-${s.id}`,children:[T.isPending?e.jsx(We,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(mm,{className:"w-4 h-4 mr-2"}),"Enable Code Backups"]})]}),d&&b?.isConnected&&e.jsxs("div",{className:"mt-4 p-4 border rounded-lg space-y-3 bg-muted/20",children:[e.jsxs("h4",{className:"text-sm font-semibold flex items-center gap-2",children:[e.jsx(kb,{className:"w-4 h-4"}),"Repository Settings"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{className:"text-xs",children:"Repository"}),e.jsxs(Dt,{value:h||b.githubRepo||"",onValueChange:B=>{f(B);const Q=S?.find(G=>G.fullName===B);Q&&x(Q.defaultBranch),P.mutate({githubRepo:B,githubBranch:Q?.defaultBranch||"main"})},children:[e.jsx(It,{"data-testid":`select-repo-${s.id}`,children:e.jsx($t,{placeholder:"Select a repository"})}),e.jsx(Ot,{children:S?.map(B=>e.jsx(Ie,{value:B.fullName,children:e.jsxs("span",{className:"flex items-center gap-2",children:[B.fullName,B.private&&e.jsx(Ce,{variant:"secondary",className:"text-[10px] py-0 px-1",children:"private"})]})},B.fullName))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{className:"text-xs",children:"Branch"}),e.jsx(Oe,{value:v||b.githubBranch||"main",onChange:B=>{x(B.target.value),P.mutate({githubBranch:B.target.value})},className:"text-sm","data-testid":`input-branch-${s.id}`})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2",children:[e.jsxs(L,{variant:"ghost",size:"sm",className:"text-destructive",onClick:()=>{confirm("Remove Git backup configuration for this project?")&&re.mutate()},"data-testid":`button-delete-config-${s.id}`,children:[e.jsx(ls,{className:"w-3 h-3 mr-1"}),"Remove Backup"]}),e.jsx(L,{size:"sm",variant:"outline",onClick:()=>u(!1),children:"Done"})]})]}),o&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"text-sm font-semibold flex items-center gap-2",children:[e.jsx(gb,{className:"w-4 h-4"}),"Backup History"]}),e.jsx(L,{variant:"ghost",size:"sm",onClick:()=>xe.invalidateQueries({queryKey:["/api/git-backups/logs",s.id]}),"data-testid":`button-refresh-logs-${s.id}`,children:e.jsx(Gl,{className:"w-3 h-3"})})]}),!E||E.length===0?e.jsx("p",{className:"text-xs text-muted-foreground text-center py-4",children:"No backups yet"}):e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:E.map(B=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-md border text-xs","data-testid":`log-entry-${B.id}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(sq,{status:B.status}),e.jsx("span",{className:"text-muted-foreground",children:B.commitMessage||"Backup"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[B.triggeredBy==="autopilot"&&e.jsx("span",{title:"Autopilot",children:e.jsx($n,{className:"w-3 h-3 text-amber-500"})}),e.jsx("span",{children:new Date(B.createdAt).toLocaleString()}),B.commitSha&&e.jsx("code",{className:"bg-muted px-1 rounded font-mono",children:B.commitSha.substring(0,7)})]})]},B.id))})]})]})]})}function rq(){const{toast:s}=mt(),[t,n]=p.useState(!1),[r,o]=p.useState(""),{data:l,isLoading:d}=_e({queryKey:["/api/projects"]}),{data:u}=_e({queryKey:["/api/customers"]}),{data:h}=_e({queryKey:["/api/git-backups/billing-rate"],queryFn:async()=>{const x=await fetch("/api/git-backups/billing-rate",{credentials:"include"});if(!x.ok)throw new Error("Failed to fetch");return x.json()}}),f=we({mutationFn:async x=>(await je("PATCH","/api/git-backups/billing-rate",x)).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/git-backups/billing-rate"]}),n(!1),s({title:"Rate updated",description:"Backup billing rate has been updated."})}}),v=l?.filter(x=>x.status==="active")||[];return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold tracking-tight flex items-center gap-3","data-testid":"text-page-title",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-violet-500 to-purple-600 flex items-center justify-center",children:e.jsx(po,{className:"w-6 h-6 text-white"})}),"Code Backups"]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Push project backups to your customers' GitHub repositories. Customers connect their GitHub from their portal, and you control when backups happen."})]}),e.jsx(ce,{className:"p-4 bg-gradient-to-r from-violet-50 to-purple-50 dark:from-violet-950/20 dark:to-purple-950/20 border-violet-200 dark:border-violet-800",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx($n,{className:"w-5 h-5 text-violet-600 dark:text-violet-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-violet-900 dark:text-violet-200",children:"How it works"}),e.jsxs("ol",{className:"text-xs text-violet-700 dark:text-violet-300 mt-1 space-y-0.5 list-decimal pl-4",children:[e.jsx("li",{children:'Click "Enable Code Backups" on any project below'}),e.jsx("li",{children:"Your customer connects their GitHub account from their portal"}),e.jsx("li",{children:"Select which repository and branch to push backups to"}),e.jsx("li",{children:"Push manually anytime, or turn on Autopilot for automatic daily/weekly backups"}),e.jsx("li",{children:"Each successful backup automatically adds a billable work entry to the project"})]})]})]})}),h&&e.jsx(ce,{className:"p-4 border-emerald-200 dark:border-emerald-800","data-testid":"card-backup-billing",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center",children:e.jsx(rr,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Backup Billing Rate"}),t?e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"$"}),e.jsx(Oe,{type:"number",step:"0.01",min:"0",value:r,onChange:x=>o(x.target.value),className:"w-24 h-7 text-xs","data-testid":"input-backup-rate"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"per backup"}),e.jsx(L,{size:"sm",variant:"outline",className:"h-7 text-xs",onClick:()=>{const x=parseFloat(r);if(isNaN(x)||x<0)return;const g=Math.round(x*100);f.mutate({rateCents:g})},disabled:!r||isNaN(parseFloat(r))||parseFloat(r)<0,"data-testid":"button-save-rate",children:"Save"}),e.jsx(L,{size:"sm",variant:"ghost",className:"h-7 text-xs",onClick:()=>n(!1),children:"Cancel"})]}):e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsxs("span",{className:"font-semibold text-foreground",children:["$",(h.rateCents/100).toFixed(2)]})," per backup  auto-added to project billing"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!t&&e.jsx(L,{size:"sm",variant:"ghost",onClick:()=>{o((h.rateCents/100).toFixed(2)),n(!0)},"data-testid":"button-edit-rate",children:e.jsx(kr,{className:"w-3.5 h-3.5"})}),e.jsx(L,{size:"sm",variant:h.isActive?"outline":"secondary",onClick:()=>f.mutate({isActive:!h.isActive}),className:"text-xs","data-testid":"button-toggle-billing",children:h.isActive?e.jsxs(e.Fragment,{children:[e.jsx(Hw,{className:"w-4 h-4 mr-1 text-emerald-500"})," Billing On"]}):e.jsxs(e.Fragment,{children:[e.jsx(Bw,{className:"w-4 h-4 mr-1 text-muted-foreground"})," Billing Off"]})})]})]})}),d?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(x=>e.jsx(ye,{className:"h-32 w-full"},x))}):v.length===0?e.jsxs(ce,{className:"p-8 text-center",children:[e.jsx(po,{className:"w-12 h-12 mx-auto text-muted-foreground mb-3"}),e.jsx("p",{className:"text-muted-foreground",children:"No active projects found"})]}):e.jsx("div",{className:"space-y-4",children:v.map(x=>e.jsx(nq,{project:x,customers:u||[],backupRate:h},x.id))})]})}const aq=[{value:"restaurant",label:"Restaurants"},{value:"plumber",label:"Plumbers"},{value:"dentist",label:"Dentists"},{value:"lawyer",label:"Lawyers"},{value:"real estate agent",label:"Real Estate"},{value:"auto repair",label:"Auto Repair"},{value:"salon",label:"Hair Salons"},{value:"gym fitness",label:"Gyms & Fitness"},{value:"accountant",label:"Accountants"},{value:"contractor",label:"Contractors"},{value:"veterinarian",label:"Veterinarians"},{value:"chiropractor",label:"Chiropractors"},{value:"florist",label:"Florists"},{value:"bakery",label:"Bakeries"},{value:"insurance agent",label:"Insurance"},{value:"photographer",label:"Photographers"},{value:"cleaning service",label:"Cleaning Services"},{value:"landscaping",label:"Landscaping"}],iq={new:"bg-blue-500/10 text-blue-500 border-blue-500/20",contacted:"bg-amber-500/10 text-amber-500 border-amber-500/20",interested:"bg-emerald-500/10 text-emerald-500 border-emerald-500/20",not_interested:"bg-red-500/10 text-red-400 border-red-500/20",converted:"bg-violet-500/10 text-violet-500 border-violet-500/20"},Pj={new:"New",contacted:"Contacted",interested:"Interested",not_interested:"Not Interested",converted:"Converted"};function oq(){Un("Lead Generator");const{toast:s}=mt(),[t,n]=p.useState(""),[r,o]=p.useState("restaurant"),[l,d]=p.useState(""),[u,h]=p.useState([]),[f,v]=p.useState(!1),[x,g]=p.useState(null),[j,N]=p.useState(null),[b,k]=p.useState(null),[E,S]=p.useState("search"),[T,P]=p.useState("all"),[H,re]=p.useState(null),[B,Q]=p.useState(""),[G,ue]=p.useState(""),[_,Y]=p.useState(null),{data:z=[],isLoading:J}=_e({queryKey:["/api/leads"]}),X=we({mutationFn:async({zip:F,query:ie})=>{const fe=new URLSearchParams({zipCode:F,query:ie});return(await je("GET",`/api/leads/search?${fe}`)).json()},onSuccess:F=>{h(F.results||[]),v(!0),F.results?.length===0&&s({title:"No results",description:"Try a different search or zip code."})},onError:()=>{s({title:"Search failed",description:"Could not search businesses. Check your API key.",variant:"destructive"})}}),$=we({mutationFn:async F=>(await je("POST","/api/leads",F)).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/leads"]}),s({title:"Lead saved",description:"Business added to your leads."})}}),I=we({mutationFn:async({id:F,updates:ie})=>(await je("PATCH",`/api/leads/${F}`,ie)).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/leads"]}),re(null),s({title:"Lead updated"})}}),A=we({mutationFn:async F=>{await je("DELETE",`/api/leads/${F}`)},onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/leads"]}),s({title:"Lead removed"})}}),W=()=>{if(!t.trim()){s({title:"Enter a zip code",description:"A zip code is required to search.",variant:"destructive"});return}const F=l.trim()||r;X.mutate({zip:t.trim(),query:F})},Z=async F=>{k(F);try{const fe=await(await je("GET",`/api/leads/place-details/${F}`)).json();N(fe),g(F)}catch{s({title:"Failed to get details",variant:"destructive"})}finally{k(null)}},q=F=>{$.mutate({businessName:F.name,address:F.address,phone:F.phone,website:F.website,domain:F.domain,emailGuess:F.emailGuess,googlePlaceId:F.placeId,googleRating:F.rating?String(F.rating):null,googleReviewCount:F.reviewCount,category:F.category,zipCode:t,status:"new"})},ne=F=>{window.open(`/?audit=${encodeURIComponent(F)}`,"_blank")},K=async F=>{if(F.website){Y(F.id);try{const fe=await(await je("POST","/api/leads/scrape-email",{website:F.website})).json(),Ee=[...fe.scrapedEmails||[],...fe.guessedEmails||[]].join(", ");await je("PATCH",`/api/leads/${F.id}`,{emailGuess:Ee||F.emailGuess}),xe.invalidateQueries({queryKey:["/api/leads"]}),fe.scrapedEmails?.length>0?s({title:"Emails found!",description:`Found ${fe.scrapedEmails.length} email(s) on ${F.domain||F.website}`}):s({title:"No emails found on website",description:"Guessed emails have been saved instead."})}catch{s({title:"Scrape failed",variant:"destructive"})}finally{Y(null)}}},U=T==="all"?z:z.filter(F=>F.status===T),M={total:z.length,new:z.filter(F=>F.status==="new").length,contacted:z.filter(F=>F.status==="contacted").length,interested:z.filter(F=>F.status==="interested").length,converted:z.filter(F=>F.status==="converted").length};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-violet-500/20 to-blue-500/20",children:e.jsx(cx,{className:"w-5 h-5 text-violet-500"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight","data-testid":"text-page-title",children:"Lead Generator"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Find local businesses that need a website or upgrade"})]})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(L,{variant:E==="search"?"default":"outline",onClick:()=>S("search"),className:"gap-2","data-testid":"button-tab-search",children:[e.jsx(sn,{className:"w-4 h-4"}),"Search"]}),e.jsxs(L,{variant:E==="leads"?"default":"outline",onClick:()=>S("leads"),className:"gap-2","data-testid":"button-tab-leads",children:[e.jsx(Vr,{className:"w-4 h-4"}),"My Leads",z.length>0&&e.jsx(Ce,{variant:"secondary",className:"ml-1",children:z.length})]})]}),E==="search"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(ce,{className:"p-6 border-0 shadow-lg bg-gradient-to-br from-background to-muted/30",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ya,{className:"w-4 h-4 text-violet-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Find Businesses Near You"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"relative flex-shrink-0 sm:w-44",children:[e.jsx(wl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(Oe,{placeholder:"Zip Code",value:t,onChange:F=>n(F.target.value),className:"pl-9 h-12 text-base rounded-xl border-2 focus:border-violet-500 transition-colors",onKeyDown:F=>F.key==="Enter"&&W(),"data-testid":"input-zip-code"})]}),e.jsxs(Dt,{value:r,onValueChange:o,children:[e.jsxs(It,{className:"h-12 rounded-xl border-2 sm:w-48","data-testid":"select-business-type",children:[e.jsx(Sl,{className:"w-4 h-4 mr-2 text-muted-foreground"}),e.jsx($t,{})]}),e.jsx(Ot,{children:aq.map(F=>e.jsx(Ie,{value:F.value,children:F.label},F.value))})]}),e.jsxs("div",{className:"relative flex-1",children:[e.jsx(sn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(Oe,{placeholder:"Or type a custom search...",value:l,onChange:F=>d(F.target.value),className:"pl-9 h-12 text-base rounded-xl border-2 focus:border-violet-500 transition-colors",onKeyDown:F=>F.key==="Enter"&&W(),"data-testid":"input-custom-query"})]}),e.jsxs(L,{onClick:W,disabled:X.isPending,className:"h-12 px-6 rounded-xl bg-gradient-to-r from-violet-600 to-blue-600 hover:from-violet-700 hover:to-blue-700 text-white shadow-lg shadow-violet-500/25 transition-all","data-testid":"button-search",children:[X.isPending?e.jsx(We,{className:"w-4 h-4 animate-spin mr-2"}):e.jsx(sn,{className:"w-4 h-4 mr-2"}),"Search"]})]})]})}),X.isPending&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Array.from({length:6}).map((F,ie)=>e.jsxs(ce,{className:"p-5",children:[e.jsx(ye,{className:"h-5 w-3/4 mb-3"}),e.jsx(ye,{className:"h-4 w-full mb-2"}),e.jsx(ye,{className:"h-4 w-1/2 mb-4"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ye,{className:"h-9 w-24"}),e.jsx(ye,{className:"h-9 w-24"})]})]},ie))}),f&&!X.isPending&&u.length===0&&e.jsxs(ce,{className:"p-12 text-center border-dashed",children:[e.jsx(Sl,{className:"w-12 h-12 text-muted-foreground/50 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-1",children:"No businesses found"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Try a different zip code or business type"})]}),u.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h2",{className:"text-lg font-semibold",children:[u.length," businesses found"]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.map(F=>{const ie=z.some(fe=>fe.googlePlaceId===F.placeId);return e.jsxs(ce,{className:"p-5 hover:shadow-lg transition-all duration-200 border-2 hover:border-violet-500/30 group","data-testid":`card-result-${F.placeId}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-base truncate group-hover:text-violet-600 dark:group-hover:text-violet-400 transition-colors",children:F.name}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground mt-1",children:[e.jsx(wl,{className:"w-3.5 h-3.5 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:F.address})]})]}),ie&&e.jsx(Ce,{variant:"secondary",className:"ml-2 text-xs bg-emerald-500/10 text-emerald-500 border-emerald-500/20",children:"Saved"})]}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[F.rating&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Hr,{className:"w-3.5 h-3.5 fill-amber-400 text-amber-400"}),e.jsx("span",{className:"text-sm font-medium",children:F.rating}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",F.reviewCount,")"]})]}),F.category&&e.jsx(Ce,{variant:"outline",className:"text-xs capitalize",children:F.category})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(L,{size:"sm",variant:"outline",onClick:()=>Z(F.placeId),disabled:b===F.placeId,className:"gap-1.5","data-testid":`button-details-${F.placeId}`,children:[b===F.placeId?e.jsx(We,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(Oo,{className:"w-3.5 h-3.5"}),"Details"]}),!ie&&x!==F.placeId&&e.jsxs(L,{size:"sm",variant:"outline",className:"gap-1.5 hover:bg-violet-50 hover:text-violet-600 hover:border-violet-300 dark:hover:bg-violet-500/10",onClick:()=>Z(F.placeId),"data-testid":`button-save-${F.placeId}`,children:[e.jsx(Qt,{className:"w-3.5 h-3.5"}),"View & Save"]})]})]},F.placeId)})})]})]}),E==="leads"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-3",children:[e.jsxs(ce,{className:"p-4 text-center cursor-pointer hover:shadow-md transition-all",onClick:()=>P("all"),"data-testid":"stat-total",children:[e.jsx("div",{className:"text-2xl font-bold",children:M.total}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Total"})]}),e.jsxs(ce,{className:"p-4 text-center cursor-pointer hover:shadow-md transition-all",onClick:()=>P("new"),"data-testid":"stat-new",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-500",children:M.new}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"New"})]}),e.jsxs(ce,{className:"p-4 text-center cursor-pointer hover:shadow-md transition-all",onClick:()=>P("contacted"),"data-testid":"stat-contacted",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-500",children:M.contacted}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Contacted"})]}),e.jsxs(ce,{className:"p-4 text-center cursor-pointer hover:shadow-md transition-all",onClick:()=>P("interested"),"data-testid":"stat-interested",children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-500",children:M.interested}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Interested"})]}),e.jsxs(ce,{className:"p-4 text-center cursor-pointer hover:shadow-md transition-all",onClick:()=>P("converted"),"data-testid":"stat-converted",children:[e.jsx("div",{className:"text-2xl font-bold text-violet-500",children:M.converted}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Converted"})]})]}),J?e.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((F,ie)=>e.jsxs(ce,{className:"p-5",children:[e.jsx(ye,{className:"h-5 w-48 mb-3"}),e.jsx(ye,{className:"h-4 w-full mb-2"}),e.jsx(ye,{className:"h-4 w-2/3"})]},ie))}):U.length===0?e.jsxs(ce,{className:"p-12 text-center border-dashed",children:[e.jsx(cx,{className:"w-12 h-12 text-muted-foreground/50 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-1",children:T==="all"?"No leads yet":`No ${Pj[T]?.toLowerCase()} leads`}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:T==="all"?"Search for businesses and save them as leads":"Change the filter to see other leads"}),T==="all"&&e.jsxs(L,{onClick:()=>S("search"),className:"gap-2","data-testid":"button-go-search",children:[e.jsx(sn,{className:"w-4 h-4"}),"Find Businesses"]})]}):e.jsx("div",{className:"space-y-3",children:U.map(F=>e.jsx(ce,{className:"p-5 hover:shadow-md transition-all duration-200 border-l-4",style:{borderLeftColor:F.status==="new"?"#3b82f6":F.status==="contacted"?"#f59e0b":F.status==="interested"?"#10b981":F.status==="converted"?"#8b5cf6":"#ef4444"},"data-testid":`card-lead-${F.id}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[e.jsx("h3",{className:"font-semibold text-base",children:F.businessName}),e.jsx(Ce,{className:`text-xs ${iq[F.status]||""}`,children:Pj[F.status]||F.status}),F.googleRating&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Hr,{className:"w-3 h-3 fill-amber-400 text-amber-400"}),e.jsx("span",{className:"text-xs",children:F.googleRating})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-1.5 text-sm",children:[F.address&&e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(wl,{className:"w-3.5 h-3.5 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:F.address})]}),F.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(ld,{className:"w-3.5 h-3.5 flex-shrink-0"}),e.jsx("a",{href:`tel:${F.phone}`,className:"hover:text-foreground transition-colors",children:F.phone})]}),F.website&&e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(nn,{className:"w-3.5 h-3.5 flex-shrink-0"}),e.jsxs("a",{href:F.website,target:"_blank",rel:"noopener noreferrer",className:"hover:text-violet-500 transition-colors truncate","data-testid":`link-website-${F.id}`,children:[F.domain||F.website,e.jsx(_s,{className:"w-3 h-3 inline ml-1"})]})]}),F.emailGuess&&e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(hs,{className:"w-3.5 h-3.5 flex-shrink-0"}),e.jsx("span",{className:"text-xs truncate",title:F.emailGuess,children:F.emailGuess.split(",")[0]})]})]}),F.notes&&e.jsxs("div",{className:"mt-2 text-sm text-muted-foreground bg-muted/50 rounded-lg p-2.5",children:[e.jsx(Kt,{className:"w-3 h-3 inline mr-1"}),F.notes]}),F.lastContactedAt&&e.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs text-muted-foreground",children:[e.jsx(Wt,{className:"w-3 h-3"}),"Last contacted: ",new Date(F.lastContactedAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs(L,{size:"sm",variant:"outline",onClick:()=>{re(F),Q(F.notes||""),ue(F.status)},className:"gap-1.5","data-testid":`button-edit-${F.id}`,children:[e.jsx(Kt,{className:"w-3.5 h-3.5"}),"Edit"]}),F.website&&e.jsxs(e.Fragment,{children:[e.jsxs(L,{size:"sm",variant:"outline",onClick:()=>K(F),disabled:_===F.id,className:"gap-1.5 hover:bg-green-50 hover:text-green-600 dark:hover:bg-green-500/10","data-testid":`button-scrape-${F.id}`,children:[_===F.id?e.jsx(We,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(Gl,{className:"w-3.5 h-3.5"}),_===F.id?"Scraping...":"Find Emails"]}),e.jsxs(L,{size:"sm",variant:"outline",onClick:()=>ne(F.website),className:"gap-1.5 hover:bg-violet-50 hover:text-violet-600 dark:hover:bg-violet-500/10","data-testid":`button-audit-${F.id}`,children:[e.jsx(Nb,{className:"w-3.5 h-3.5"}),"Audit"]})]}),e.jsx(L,{size:"sm",variant:"ghost",onClick:()=>A.mutate(F.id),className:"gap-1.5 text-red-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10","data-testid":`button-delete-${F.id}`,children:e.jsx(ls,{className:"w-3.5 h-3.5"})})]})]})},F.id))})]}),e.jsx(yt,{open:!!x&&!!j,onOpenChange:()=>{g(null),N(null)},children:e.jsxs(xt,{className:"sm:max-w-lg",children:[e.jsx(gt,{children:e.jsxs(vt,{className:"flex items-center gap-2",children:[e.jsx(Sl,{className:"w-5 h-5 text-violet-500"}),j?.name]})}),j&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[j.address&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(wl,{className:"w-4 h-4 text-muted-foreground mt-0.5"}),e.jsx("span",{className:"text-sm",children:j.address})]}),j.phone&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ld,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("a",{href:`tel:${j.phone}`,className:"text-sm hover:text-violet-500 transition-colors",children:j.phone})]}),j.website&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(nn,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("a",{href:j.website,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-violet-500 hover:underline flex items-center gap-1","data-testid":"link-detail-website",children:[j.domain||j.website,e.jsx(_s,{className:"w-3 h-3"})]})]}),!j.website&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(nn,{className:"w-4 h-4 text-red-400"}),e.jsx("span",{className:"text-sm text-red-400 font-medium",children:"No website found  great opportunity!"})]}),j.scrapedEmails?.length>0&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(hs,{className:"w-4 h-4 text-green-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-green-600 dark:text-green-400 font-medium block mb-1",children:"Found on website:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:j.scrapedEmails.map(F=>e.jsx(Ce,{className:"text-xs font-mono bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 border-green-300 dark:border-green-700",children:F},F))})]})]}),j.guessedEmails?.length>0&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(hs,{className:"w-4 h-4 text-muted-foreground mt-0.5"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-muted-foreground block mb-1",children:j.scrapedEmails?.length>0?"Other possible emails:":"Best guesses (not found on site):"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:j.guessedEmails.map(F=>e.jsx(Ce,{variant:"outline",className:"text-xs font-mono",children:F},F))})]})]}),j.emailSource==="none"&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(hs,{className:"w-4 h-4 text-red-400"}),e.jsx("span",{className:"text-sm text-red-400",children:"No email found  no website to scrape"})]}),j.rating&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Hr,{className:"w-4 h-4 fill-amber-400 text-amber-400"}),e.jsxs("span",{className:"text-sm",children:[j.rating," stars (",j.reviewCount," reviews)"]})]}),j.googleMapsUrl&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_s,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("a",{href:j.googleMapsUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-500 hover:underline",children:"View on Google Maps"})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2 border-t",children:[e.jsx(L,{onClick:()=>q(j),disabled:$.isPending||z.some(F=>F.googlePlaceId===j.placeId),className:"flex-1 gap-2 bg-gradient-to-r from-violet-600 to-blue-600 hover:from-violet-700 hover:to-blue-700 text-white","data-testid":"button-save-lead",children:z.some(F=>F.googlePlaceId===j.placeId)?e.jsx(e.Fragment,{children:"Already Saved"}):$.isPending?e.jsx(We,{className:"w-4 h-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(Qt,{className:"w-4 h-4"}),"Save Lead"]})}),j.website&&e.jsxs(L,{variant:"outline",onClick:()=>ne(j.website),className:"gap-2","data-testid":"button-audit-site",children:[e.jsx(Nb,{className:"w-4 h-4"}),"Audit Site"]})]})]})]})}),e.jsx(yt,{open:!!H,onOpenChange:()=>re(null),children:e.jsxs(xt,{className:"sm:max-w-md",children:[e.jsx(gt,{children:e.jsxs(vt,{children:["Edit Lead  ",H?.businessName]})}),H&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1.5 block",children:"Status"}),e.jsxs(Dt,{value:G,onValueChange:ue,children:[e.jsx(It,{"data-testid":"select-lead-status",children:e.jsx($t,{})}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"new",children:"New"}),e.jsx(Ie,{value:"contacted",children:"Contacted"}),e.jsx(Ie,{value:"interested",children:"Interested"}),e.jsx(Ie,{value:"not_interested",children:"Not Interested"}),e.jsx(Ie,{value:"converted",children:"Converted"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1.5 block",children:"Notes"}),e.jsx(fs,{value:B,onChange:F=>Q(F.target.value),placeholder:"Add notes about this lead...",rows:4,"data-testid":"textarea-lead-notes"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{onClick:()=>I.mutate({id:H.id,updates:{status:G,notes:B,lastContactedAt:G==="contacted"?new Date:void 0}}),disabled:I.isPending,className:"flex-1 bg-gradient-to-r from-violet-600 to-blue-600 text-white","data-testid":"button-save-edit",children:I.isPending?e.jsx(We,{className:"w-4 h-4 animate-spin"}):"Save Changes"}),e.jsx(L,{variant:"outline",onClick:()=>re(null),children:"Cancel"})]})]})]})})]})}const lq={"us-central":"us","us-west":"us","us-east":"us","us-southeast":"us","us-iad":"us","us-ord":"us","us-lax":"us","us-mia":"us","us-den":"us","us-sea":"us","ca-central":"ca","eu-west":"gb","eu-central":"de","ap-west":"in","ap-south":"sg","ap-southeast":"au","ap-northeast":"jp","gb-lon":"gb","de-fra":"de","fr-par":"fr","nl-ams":"nl","se-sto":"se","es-mad":"es","it-mil":"it","in-maa":"in","in-bom":"in","sg-sin":"sg","au-mel":"au","jp-osa":"jp","jp-tyo":"jp","id-cgk":"id","br-gru":"br","cl-scl":"cl","co-bog":"co","mx-qro":"mx"};function cq(s){const t=lq[s]||s.split("-")[0];return t.length===2?String.fromCodePoint(...[...t.toUpperCase()].map(n=>n.charCodeAt(0)+127397)):""}function dq({serverId:s,status:t}){const n=t!=="provisioning",r=t==="running",{data:o,refetch:l}=_e({queryKey:["/api/linode/servers",s,"pricing"],queryFn:async()=>{const j=await fetch(`/api/linode/servers/${s}/pricing`,{credentials:"include"});if(!j.ok)throw new Error("Failed");return j.json()},enabled:n,refetchInterval:r?3e4:6e4}),[d,u]=p.useState(t);p.useEffect(()=>{d!==t&&l(),u(t)},[t,d,l]);const[h,f]=p.useState(0),v=p.useRef(o);if(v.current=o,p.useEffect(()=>{if(!o)return;f(o.costWithMarkup);const j=setInterval(()=>{f(N=>{const k=(v.current?.hourlyWithMarkup??0)/3600;return+(N+k).toFixed(6)})},1e3);return()=>clearInterval(j)},[o]),!o)return n?null:e.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 bg-muted/40 rounded-lg text-xs","data-testid":`usage-counter-${s}`,children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-500 animate-pulse"}),e.jsx("span",{className:"text-muted-foreground",children:"Provisioning..."})]}),e.jsx("span",{className:"text-muted-foreground",children:"Billing starts once provisioned"})]});const x=r?"Live":t==="booting"?"Booting":t==="rebooting"?"Rebooting":t==="shutting_down"?"Stopping":t==="offline"?"Offline":t,g=r?"bg-green-500 animate-pulse":t==="booting"||t==="rebooting"?"bg-yellow-500 animate-pulse":"bg-gray-400";return e.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 bg-muted/40 rounded-lg text-xs","data-testid":`usage-counter-${s}`,children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${g}`}),e.jsx("span",{className:"text-muted-foreground",children:x})]}),e.jsxs("div",{className:"flex items-center gap-1 font-mono font-bold text-sm text-green-600 dark:text-green-400",children:[e.jsx(rr,{className:"w-3.5 h-3.5"}),h.toFixed(4)]}),e.jsxs("span",{className:"text-muted-foreground",children:["accrued (",o.markupPercent,"% markup)"]}),e.jsxs("div",{className:"ml-auto flex items-center gap-3 text-muted-foreground flex-wrap justify-end",children:[e.jsxs("span",{children:["$",o.hourlyWithMarkup.toFixed(4),"/hr"]}),e.jsxs("span",{children:[o.hoursRunning.toFixed(1)," hrs"]}),o.monthlyWithMarkup>0&&e.jsxs("span",{className:"text-xs opacity-70",children:["(~$",o.monthlyWithMarkup,"/mo)"]}),o.backupMonthly>0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(kn,{className:"w-3 h-3"}),"Backup: $",o.backupWithMarkup.toFixed(2),"/mo"]})]})]})}function uq({serverId:s,currentLabel:t}){const{toast:n}=mt(),[r,o]=p.useState(!1),[l,d]=p.useState(t),u=we({mutationFn:async f=>(await je("PATCH",`/api/linode/servers/${s}`,{label:f})).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/linode/servers"]}),o(!1),n({title:"Server renamed",description:"Label updated on Linode."})},onError:f=>{n({title:"Rename failed",description:f.message,variant:"destructive"}),d(t)}}),h=()=>{if(u.isPending)return;const f=l.trim();if(!f||f===t){o(!1),d(t);return}u.mutate(f)};return r?e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(er,{className:"w-3.5 h-3.5 text-violet-500 flex-shrink-0"}),e.jsx(Oe,{value:l,onChange:f=>d(f.target.value),onKeyDown:f=>{f.key==="Enter"&&h(),f.key==="Escape"&&(o(!1),d(t))},onBlur:h,className:"h-7 text-sm font-semibold w-48 px-1.5",autoFocus:!0,"data-testid":`input-rename-${s}`}),u.isPending&&e.jsx(We,{className:"w-3.5 h-3.5 animate-spin"})]}):e.jsxs("h3",{className:"font-semibold flex items-center gap-1.5 group cursor-pointer",onClick:()=>o(!0),"data-testid":`label-${s}`,children:[e.jsx(er,{className:"w-3.5 h-3.5 text-violet-500"}),t,e.jsx(kr,{className:"w-3 h-3 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity"})]})}function mq({updated:s,status:t}){const[n,r]=p.useState(Date.now());if(p.useEffect(()=>{if(t!=="running"||!s)return;const v=setInterval(()=>r(Date.now()),6e4);return()=>clearInterval(v)},[t,s]),t!=="running"||!s)return null;const o=new Date(s).getTime(),l=n-o;if(l<0)return null;const d=Math.floor(l/6e4),u=Math.floor(d/60),h=Math.floor(u/24);let f="";return h>0?f=`${h}d ${u%24}h`:u>0?f=`${u}h ${d%60}m`:f=`${d}m`,e.jsxs("span",{className:"flex items-center gap-1 text-xs text-muted-foreground","data-testid":"uptime-display",children:[e.jsx(Wt,{className:"w-3 h-3"}),"Up ",f]})}function hq({serverId:s,currentCustomerId:t,customers:n}){const{toast:r}=mt(),[o,l]=p.useState(!1),[d,u]=p.useState(t||"none"),h=we({mutationFn:async f=>(await je("PATCH",`/api/linode/servers/${s}`,{customerId:f==="none"?null:f})).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/linode/servers"]}),l(!1),r({title:"Customer updated"})},onError:f=>{r({title:"Failed to assign customer",description:f.message,variant:"destructive"})}});return t?null:e.jsxs(e.Fragment,{children:[e.jsxs(L,{size:"sm",variant:"outline",onClick:()=>l(!0),className:"gap-1.5","data-testid":`button-assign-customer-${s}`,children:[e.jsx(gm,{className:"w-3.5 h-3.5"}),"Assign Customer"]}),e.jsx(yt,{open:o,onOpenChange:l,children:e.jsxs(xt,{className:"max-w-sm",children:[e.jsx(gt,{children:e.jsxs(vt,{className:"flex items-center gap-2",children:[e.jsx(gm,{className:"w-5 h-5 text-violet-500"}),"Assign Customer"]})}),e.jsxs("div",{className:"space-y-4 mt-2",children:[e.jsxs(Dt,{value:d,onValueChange:u,children:[e.jsx(It,{"data-testid":"select-assign-customer",children:e.jsx($t,{placeholder:"Select customer"})}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"none",children:"No customer"}),n.map(f=>e.jsx(Ie,{value:f.id,children:f.name},f.id))]})]}),e.jsxs(L,{className:"w-full",onClick:()=>h.mutate(d),disabled:h.isPending||d==="none","data-testid":"button-confirm-assign",children:[h.isPending?e.jsx(We,{className:"w-4 h-4 animate-spin mr-2"}):null,"Assign"]})]})]})})]})}function fq({serverId:s,planType:t}){const{toast:n}=mt(),{data:r,isLoading:o}=_e({queryKey:["/api/linode/servers",s,"backups"],queryFn:async()=>{const f=await fetch(`/api/linode/servers/${s}/backups`,{credentials:"include"});if(!f.ok)throw new Error("Failed");return f.json()}}),{data:l}=_e({queryKey:["/api/linode/types",t],queryFn:async()=>{const f=await fetch("/api/linode/types",{credentials:"include"});return f.ok?(await f.json()).find(x=>x.id===t)||{}:{}}}),d=we({mutationFn:async()=>(await je("POST",`/api/linode/servers/${s}/backups/enable`)).json(),onSuccess:f=>{xe.invalidateQueries({queryKey:["/api/linode/servers",s,"backups"]});const v=(f.backupPriceCents/100).toFixed(2),x=(f.totalCents/100).toFixed(2);n({title:"Backups enabled!",description:`Linode: $${v}/mo + 50% markup = $${x}/mo`})},onError:f=>{n({title:"Failed to enable backups",description:f.message,variant:"destructive"})}}),u=we({mutationFn:async()=>{await je("POST",`/api/linode/servers/${s}/backups/cancel`)},onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/linode/servers",s,"backups"]}),n({title:"Backups disabled"})},onError:f=>{n({title:"Failed to cancel backups",description:f.message,variant:"destructive"})}});return o?null:r?.enabled??!1?e.jsxs(L,{size:"sm",variant:"outline",onClick:()=>{confirm("Cancel backups for this server? Existing backups will be deleted.")&&u.mutate()},disabled:u.isPending,className:"gap-1.5 text-green-600 border-green-200 hover:bg-green-50","data-testid":`button-backups-enabled-${s}`,children:[u.isPending?e.jsx(We,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(kn,{className:"w-3.5 h-3.5"}),"Backups On"]}):e.jsxs(L,{size:"sm",variant:"outline",onClick:()=>{confirm("Enable automatic backups for this server? Pricing includes a 50% markup on Linode's backup cost.")&&d.mutate()},disabled:d.isPending,className:"gap-1.5","data-testid":`button-enable-backups-${s}`,children:[d.isPending?e.jsx(We,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(vT,{className:"w-3.5 h-3.5"}),"Backups"]})}function pq({ip:s}){const[t,n]=p.useState(!1),r=`ssh root@${s}`,o=()=>{navigator.clipboard.writeText(r),n(!0),setTimeout(()=>n(!1),2e3)};return e.jsxs("div",{className:"flex items-center gap-2 mb-3 px-2.5 py-2 bg-muted/50 rounded-lg","data-testid":`ssh-command-${s}`,children:[e.jsx(pm,{className:"w-3.5 h-3.5 text-muted-foreground flex-shrink-0"}),e.jsx("code",{className:"text-xs font-mono flex-1 select-all",children:r}),e.jsx("button",{onClick:o,className:"p-1 rounded hover:bg-muted transition-colors",title:"Copy SSH command","data-testid":`button-copy-ssh-${s}`,children:t?e.jsx(is,{className:"w-3.5 h-3.5 text-green-500"}):e.jsx(fn,{className:"w-3.5 h-3.5 text-muted-foreground"})})]})}function xq({serverId:s,customerId:t,serverSetupComplete:n}){return t?n?e.jsx("div",{className:"mt-2",children:e.jsxs("div",{className:"flex items-center gap-2 px-2.5 py-2 bg-gradient-to-r from-emerald-50 to-teal-50 dark:from-emerald-950/20 dark:to-teal-950/20 border border-emerald-200 dark:border-emerald-800 rounded-lg","data-testid":`setup-complete-${s}`,children:[e.jsx(Uw,{className:"w-3.5 h-3.5 text-emerald-600 dark:text-emerald-400 flex-shrink-0"}),e.jsx("span",{className:"text-xs font-medium text-emerald-700 dark:text-emerald-300",children:"Server secured & setup complete"})]})}):e.jsx("div",{className:"mt-2",children:e.jsxs("div",{className:"flex items-center gap-2 px-2.5 py-1.5 bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-950/20 dark:to-orange-950/20 border border-amber-200 dark:border-amber-800 rounded-lg","data-testid":`auto-setup-status-${s}`,children:[e.jsx(We,{className:"w-3.5 h-3.5 text-amber-600 dark:text-amber-400 animate-spin flex-shrink-0"}),e.jsx("span",{className:"text-xs font-medium text-amber-700 dark:text-amber-300",children:"Auto-setup in progress  server will secure itself on boot"})]})}):null}function gq(){Un("Server Provisioning");const{toast:s}=mt(),[t,n]=p.useState(!1),[r,o]=p.useState(""),[l,d]=p.useState("us-central"),[u,h]=p.useState(""),[f,v]=p.useState(""),[x,g]=p.useState("all"),[j,N]=p.useState(""),[b,k]=p.useState(!1),[E,S]=p.useState(""),[T,P]=p.useState(null),[H,re]=p.useState(null),{data:B=[],isLoading:Q}=_e({queryKey:["/api/linode/servers"],refetchInterval:K=>K.state.data?.some(M=>M.status==="provisioning"||M.status==="booting"||M.status==="rebooting")?5e3:3e4}),{data:G=[],isLoading:ue}=_e({queryKey:["/api/linode/types"],enabled:t}),{data:_=[]}=_e({queryKey:["/api/linode/regions"],enabled:t}),{data:Y=[]}=_e({queryKey:["/api/customers"]}),z=we({mutationFn:async K=>(await je("POST","/api/linode/provision",K)).json(),onSuccess:K=>{xe.invalidateQueries({queryKey:["/api/linode/servers"]}),n(!1),o(""),h(""),v(""),N(""),S(""),s({title:"Server provisioned!",description:`${K.label} is being created.${K.rootPassword?" Root password has been set.":""}`})},onError:K=>{s({title:"Provisioning failed",description:K.message,variant:"destructive"})}}),J=we({mutationFn:async K=>{await je("DELETE",`/api/linode/servers/${K}`)},onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/linode/servers"]}),s({title:"Server deleted"})},onError:()=>{s({title:"Failed to delete server",variant:"destructive"})}}),X=we({mutationFn:async K=>(await je("GET",`/api/linode/servers/${K}/stats`)).json(),onError:K=>{const U=K.message||"";U.includes("Linode")||U.includes("stats")?s({title:"Stats not available yet",description:"Server usage data takes a few hours to become available after provisioning."}):s({title:"Failed to fetch stats",description:U,variant:"destructive"})}}),$=we({mutationFn:async K=>(await je("POST",`/api/linode/servers/${K}/reboot`),K),onSuccess:K=>{xe.invalidateQueries({queryKey:["/api/linode/servers"]}),xe.invalidateQueries({queryKey:["/api/linode/servers",K,"pricing"]}),s({title:"Server rebooting",description:"The server is restarting now."})},onError:K=>{s({title:"Reboot failed",description:K.message,variant:"destructive"})}});we({mutationFn:async K=>(await je("POST",`/api/linode/servers/${K}/backups/enable`)).json(),onSuccess:K=>{xe.invalidateQueries({queryKey:["/api/linode/servers"]});const U=(K.backupPriceCents/100).toFixed(2),M=(K.totalCents/100).toFixed(2);s({title:"Backups enabled!",description:`Linode: $${U}/mo + 50% markup = $${M}/mo billed to customer`})},onError:K=>{s({title:"Failed to enable backups",description:K.message,variant:"destructive"})}}),we({mutationFn:async K=>{await je("POST",`/api/linode/servers/${K}/backups/cancel`)},onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/linode/servers"]}),s({title:"Backups disabled"})},onError:K=>{s({title:"Failed to cancel backups",description:K.message,variant:"destructive"})}});const I=we({mutationFn:async K=>(await je("POST",`/api/linode/servers/${K}/invoice`)).json(),onSuccess:(K,U)=>{re(K.html),xe.invalidateQueries({queryKey:["/api/linode/servers",U,"pricing"]}),xe.invalidateQueries({queryKey:["/api/linode/servers"]}),K.emailSent?s({title:"Invoice sent!",description:`Emailed to ${K.customerEmail}  $${(K.totalCents/100).toFixed(2)} total`}):s({title:"Invoice generated",description:`$${(K.totalCents/100).toFixed(2)}  No customer email linked, preview only.`})},onError:K=>{s({title:"Invoice failed",description:K.message||"Could not generate invoice",variant:"destructive"})}}),A=x==="all"?G:G.filter(K=>x==="shared"?K.typeClass==="standard"||K.typeClass==="nanode":K.typeClass==="dedicated"),W=G.find(K=>K.id===r),Z=()=>{!r||!u||z.mutate({typeId:r,region:l,label:u,customerId:f&&f!=="none"?f:void 0,rootPassword:j||void 0,authorizedKeys:E||void 0})},q=async K=>{P(K),X.mutate(K)},ne=K=>{const U={running:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",provisioning:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400",booting:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",rebooting:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400",offline:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400",shutting_down:"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400"};return e.jsx(Ce,{className:U[K]||"bg-gray-100 text-gray-700","data-testid":`status-${K}`,children:K})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight","data-testid":"text-page-title",children:"Server Provisioning"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Provision and manage Linode servers for your clients"})]}),e.jsxs(L,{onClick:()=>n(!0),className:"gap-2 bg-gradient-to-r from-violet-600 to-blue-600 text-white","data-testid":"button-new-server",children:[e.jsx(Qt,{className:"w-4 h-4"}),"New Server"]})]})}),Q?e.jsx("div",{className:"space-y-3",children:[1,2].map(K=>e.jsx(ye,{className:"h-32 rounded-xl"},K))}):B.length===0?e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(er,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No servers yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Provision your first Linode server for a client"}),e.jsxs(L,{onClick:()=>n(!0),className:"gap-2","data-testid":"button-first-server",children:[e.jsx(Qt,{className:"w-4 h-4"})," Provision Server"]})]}):e.jsx("div",{className:"space-y-3",children:B.map(K=>{const U=Y.find(M=>M.id===K.customerId);return e.jsxs(ce,{className:"p-4","data-testid":`card-server-${K.id}`,children:[e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-[200px]",children:[e.jsx("span",{className:"text-xl",children:cq(K.region)}),e.jsxs("div",{children:[e.jsx(uq,{serverId:K.id,currentLabel:K.label}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx("span",{children:K.region}),U&&e.jsxs("span",{children:[" ",U.name]})]})]})]}),ne(K.status),e.jsx(mq,{updated:K.updated,status:K.status}),K.ipv4&&e.jsxs("div",{className:"flex items-center gap-1.5 text-muted-foreground",children:[e.jsx(nn,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"font-mono text-xs",children:K.ipv4})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-3 text-xs text-muted-foreground",children:[K.vcpus&&e.jsxs("span",{children:[K.vcpus," vCPU"]}),K.memory&&e.jsxs("span",{children:[Math.round(K.memory/1024)," GB RAM"]}),K.disk&&e.jsxs("span",{children:[Math.round(K.disk/1024)," GB Disk"]})]})]}),e.jsx("div",{className:"mt-3",children:e.jsx(dq,{serverId:K.id,status:K.status})}),K.ipv4&&e.jsx("div",{className:"mt-2",children:e.jsx(pq,{ip:K.ipv4})}),e.jsx(xq,{serverId:K.id,customerId:K.customerId,serverSetupComplete:K.serverSetupComplete}),e.jsxs("div",{className:"flex gap-2 pt-3 mt-1 border-t flex-wrap",children:[e.jsxs(L,{size:"sm",variant:"outline",onClick:()=>{confirm("Reboot this server? It will be briefly unavailable.")&&$.mutate(K.id)},disabled:$.isPending||K.status==="rebooting",className:"gap-1.5","data-testid":`button-reboot-${K.id}`,children:[$.isPending?e.jsx(We,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(Wm,{className:"w-3.5 h-3.5"}),"Reboot"]}),e.jsx(hq,{serverId:K.id,currentCustomerId:K.customerId,customers:Y}),e.jsx(fq,{serverId:K.id,planType:K.planType}),e.jsxs(L,{size:"sm",variant:"outline",onClick:()=>q(K.id),disabled:X.isPending&&T===K.id,className:"gap-1.5","data-testid":`button-stats-${K.id}`,children:[X.isPending&&T===K.id?e.jsx(We,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(Ml,{className:"w-3.5 h-3.5"}),"Stats"]}),e.jsxs(L,{size:"sm",variant:"outline",onClick:()=>I.mutate(K.id),disabled:I.isPending,className:"gap-1.5","data-testid":`button-invoice-${K.id}`,children:[I.isPending?e.jsx(We,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(Gt,{className:"w-3.5 h-3.5"}),"Invoice"]}),e.jsx(L,{size:"sm",variant:"outline",onClick:()=>{xe.invalidateQueries({queryKey:["/api/linode/servers"]})},className:"gap-1.5","data-testid":`button-refresh-${K.id}`,children:e.jsx(Gl,{className:"w-3.5 h-3.5"})}),e.jsx(L,{size:"sm",variant:"ghost",onClick:()=>{confirm("Are you sure? This will permanently delete this server from Linode.")&&J.mutate(K.id)},className:"gap-1.5 text-red-500 ml-auto","data-testid":`button-delete-${K.id}`,children:e.jsx(ls,{className:"w-3.5 h-3.5"})})]})]},K.id)})}),e.jsx(yt,{open:t,onOpenChange:n,children:e.jsxs(xt,{className:"max-w-lg",children:[e.jsx(gt,{children:e.jsxs(vt,{className:"flex items-center gap-2",children:[e.jsx(er,{className:"w-5 h-5 text-violet-500"}),"Provision New Server"]})}),e.jsxs("div",{className:"space-y-4 mt-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1.5 block",children:"Server Label"}),e.jsx(Oe,{placeholder:"e.g., client-website-prod",value:u,onChange:K=>h(K.target.value),"data-testid":"input-server-label"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1.5 block",children:"Assign to Customer (optional)"}),e.jsxs(Dt,{value:f,onValueChange:v,children:[e.jsx(It,{"data-testid":"select-customer",children:e.jsx($t,{placeholder:"No customer"})}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"none",children:"No customer"}),Y.map(K=>e.jsx(Ie,{value:K.id,children:K.name},K.id))]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium mb-1.5 block flex items-center gap-1.5",children:[e.jsx(od,{className:"w-3.5 h-3.5"}),"Root Password ",e.jsx("span",{className:"text-xs text-muted-foreground font-normal",children:"(optional)"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Oe,{type:b?"text":"password",placeholder:"Leave blank to auto-generate",value:j,onChange:K=>N(K.target.value),"data-testid":"input-root-password"}),e.jsx("button",{type:"button",className:"absolute right-2.5 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",onClick:()=>k(!b),tabIndex:-1,children:b?e.jsx(Hm,{className:"w-4 h-4"}):e.jsx(Oo,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"If left blank, a secure password will be generated automatically."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium mb-1.5 block flex items-center gap-1.5",children:[e.jsx(lT,{className:"w-3.5 h-3.5"}),"SSH Public Key ",e.jsx("span",{className:"text-xs text-muted-foreground font-normal",children:"(optional)"})]}),e.jsx(fs,{placeholder:"ssh-rsa AAAA... or ssh-ed25519 AAAA...",value:E,onChange:K=>S(K.target.value),rows:3,className:"font-mono text-xs","data-testid":"input-ssh-key"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Paste your public SSH key to enable key-based login from the start."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-1.5 block",children:"Region"}),e.jsxs(Dt,{value:l,onValueChange:d,children:[e.jsx(It,{"data-testid":"select-region",children:e.jsx($t,{placeholder:"Select region"})}),e.jsx(Ot,{children:_.map(K=>e.jsxs(Ie,{value:K.id,children:[K.label," (",K.country.toUpperCase(),")"]},K.id))})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("label",{className:"text-sm font-medium",children:"Server Plan"}),e.jsx("div",{className:"flex gap-1",children:["all","shared","dedicated"].map(K=>e.jsx(L,{size:"sm",variant:x===K?"default":"outline",onClick:()=>g(K),className:"text-xs h-7 px-2.5","data-testid":`button-filter-${K}`,children:K.charAt(0).toUpperCase()+K.slice(1)},K))})]}),ue?e.jsx(ye,{className:"h-32 rounded-lg"}):e.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2 border rounded-lg p-2",children:A.map(K=>e.jsxs("button",{onClick:()=>o(K.id),className:`w-full text-left p-3 rounded-lg border transition-colors ${r===K.id?"border-violet-500 bg-violet-50 dark:bg-violet-500/10":"border-transparent hover:bg-muted/50"}`,"data-testid":`plan-${K.id}`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-sm",children:K.label}),e.jsxs("span",{className:"text-sm font-semibold text-violet-600 dark:text-violet-400",children:["$",K.monthlyPrice,"/mo"]})]}),e.jsxs("div",{className:"flex gap-3 mt-1 text-xs text-muted-foreground",children:[e.jsxs("span",{children:[K.vcpus," vCPU"]}),e.jsxs("span",{children:[Math.round(K.memory/1024)," GB RAM"]}),e.jsxs("span",{children:[Math.round(K.disk/1024)," GB Disk"]}),e.jsxs("span",{children:[K.transfer/1e3," TB Transfer"]})]})]},K.id))}),W&&e.jsxs("div",{className:"mt-3 p-3 bg-violet-50 dark:bg-violet-500/10 rounded-lg text-sm",children:[e.jsxs("div",{className:"font-medium text-violet-700 dark:text-violet-300",children:["Selected: ",W.label]}),e.jsxs("div",{className:"text-muted-foreground mt-1",children:["$",W.monthlyPrice,"/mo  ",W.vcpus," vCPU  ",Math.round(W.memory/1024)," GB RAM  Ubuntu 24.04"]})]})]}),e.jsxs(L,{onClick:Z,disabled:!r||!u||z.isPending,className:"w-full gap-2 bg-gradient-to-r from-violet-600 to-blue-600 text-white","data-testid":"button-provision",children:[z.isPending?e.jsx(We,{className:"w-4 h-4 animate-spin"}):e.jsx(er,{className:"w-4 h-4"}),z.isPending?"Provisioning...":"Provision Server"]})]})]})}),e.jsx(yt,{open:!!T&&!!X.data,onOpenChange:K=>{K||P(null)},children:e.jsxs(xt,{className:"max-w-md",children:[e.jsx(gt,{children:e.jsxs(vt,{className:"flex items-center gap-2",children:[e.jsx(Ml,{className:"w-5 h-5 text-violet-500"}),"Server Statistics"]})}),X.data&&e.jsxs("div",{className:"space-y-4 mt-2",children:[X.data.message&&e.jsx("div",{className:"p-3 bg-amber-50 dark:bg-amber-900/20 text-amber-700 dark:text-amber-400 rounded-lg text-sm","data-testid":"stats-message",children:X.data.message}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs(ce,{className:"p-3 text-center",children:[e.jsx(ox,{className:"w-5 h-5 mx-auto text-blue-500 mb-1"}),e.jsxs("div",{className:"text-lg font-bold",children:[X.data.cpu,"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"CPU Usage"})]}),e.jsxs(ce,{className:"p-3 text-center",children:[e.jsx(jb,{className:"w-5 h-5 mx-auto text-green-500 mb-1"}),e.jsx("div",{className:"text-lg font-bold",children:X.data.networkInGB}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"GB In"})]}),e.jsxs(ce,{className:"p-3 text-center",children:[e.jsx(jb,{className:"w-5 h-5 mx-auto text-orange-500 mb-1"}),e.jsx("div",{className:"text-lg font-bold",children:X.data.networkOutGB}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"GB Out"})]})]}),X.data.cpuTimeline?.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"CPU Timeline (last 24 points)"}),e.jsx("div",{className:"flex items-end gap-0.5 h-16 bg-muted/30 rounded-lg p-1",children:X.data.cpuTimeline.map((K,U)=>e.jsx("div",{className:"flex-1 bg-violet-500 rounded-sm min-h-[2px]",style:{height:`${Math.max(2,parseFloat(K.value))}%`},title:`${K.value}%`},U))})]})]})]})}),e.jsx(yt,{open:!!H,onOpenChange:K=>{K||re(null)},children:e.jsxs(xt,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[e.jsx(gt,{children:e.jsxs(vt,{className:"flex items-center gap-2",children:[e.jsx(Gt,{className:"w-5 h-5 text-violet-500"}),"Server Invoice"]})}),H&&e.jsx("div",{className:"mt-2",dangerouslySetInnerHTML:{__html:H},"data-testid":"invoice-preview"})]})})]})}var Vp="rovingFocusGroup.onEntryFocus",vq={bubbles:!1,cancelable:!0},Nh="RovingFocusGroup",[Kx,K5,yq]=qm(Nh),[bq,kh]=Jr(Nh,[yq]),[jq,wq]=bq(Nh),W5=p.forwardRef((s,t)=>e.jsx(Kx.Provider,{scope:s.__scopeRovingFocusGroup,children:e.jsx(Kx.Slot,{scope:s.__scopeRovingFocusGroup,children:e.jsx(Nq,{...s,ref:t})})}));W5.displayName=Nh;var Nq=p.forwardRef((s,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:l,currentTabStopId:d,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:h,onEntryFocus:f,preventScrollOnEntryFocus:v=!1,...x}=s,g=p.useRef(null),j=qt(t,g),N=ch(l),[b=null,k]=Ka({prop:d,defaultProp:u,onChange:h}),[E,S]=p.useState(!1),T=an(f),P=K5(n),H=p.useRef(!1),[re,B]=p.useState(0);return p.useEffect(()=>{const Q=g.current;if(Q)return Q.addEventListener(Vp,T),()=>Q.removeEventListener(Vp,T)},[T]),e.jsx(jq,{scope:n,orientation:r,dir:N,loop:o,currentTabStopId:b,onItemFocus:p.useCallback(Q=>k(Q),[k]),onItemShiftTab:p.useCallback(()=>S(!0),[]),onFocusableItemAdd:p.useCallback(()=>B(Q=>Q+1),[]),onFocusableItemRemove:p.useCallback(()=>B(Q=>Q-1),[]),children:e.jsx(lt.div,{tabIndex:E||re===0?-1:0,"data-orientation":r,...x,ref:j,style:{outline:"none",...s.style},onMouseDown:Me(s.onMouseDown,()=>{H.current=!0}),onFocus:Me(s.onFocus,Q=>{const G=!H.current;if(Q.target===Q.currentTarget&&G&&!E){const ue=new CustomEvent(Vp,vq);if(Q.currentTarget.dispatchEvent(ue),!ue.defaultPrevented){const _=P().filter($=>$.focusable),Y=_.find($=>$.active),z=_.find($=>$.id===b),X=[Y,z,..._].filter(Boolean).map($=>$.ref.current);Q5(X,v)}}H.current=!1}),onBlur:Me(s.onBlur,()=>S(!1))})})}),V5="RovingFocusGroupItem",G5=p.forwardRef((s,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:l,...d}=s,u=Kr(),h=l||u,f=wq(V5,n),v=f.currentTabStopId===h,x=K5(n),{onFocusableItemAdd:g,onFocusableItemRemove:j}=f;return p.useEffect(()=>{if(r)return g(),()=>j()},[r,g,j]),e.jsx(Kx.ItemSlot,{scope:n,id:h,focusable:r,active:o,children:e.jsx(lt.span,{tabIndex:v?0:-1,"data-orientation":f.orientation,...d,ref:t,onMouseDown:Me(s.onMouseDown,N=>{r?f.onItemFocus(h):N.preventDefault()}),onFocus:Me(s.onFocus,()=>f.onItemFocus(h)),onKeyDown:Me(s.onKeyDown,N=>{if(N.key==="Tab"&&N.shiftKey){f.onItemShiftTab();return}if(N.target!==N.currentTarget)return;const b=Sq(N,f.orientation,f.dir);if(b!==void 0){if(N.metaKey||N.ctrlKey||N.altKey||N.shiftKey)return;N.preventDefault();let E=x().filter(S=>S.focusable).map(S=>S.ref.current);if(b==="last")E.reverse();else if(b==="prev"||b==="next"){b==="prev"&&E.reverse();const S=E.indexOf(N.currentTarget);E=f.loop?Eq(E,S+1):E.slice(S+1)}setTimeout(()=>Q5(E))}})})})});G5.displayName=V5;var kq={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Cq(s,t){return t!=="rtl"?s:s==="ArrowLeft"?"ArrowRight":s==="ArrowRight"?"ArrowLeft":s}function Sq(s,t,n){const r=Cq(s.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return kq[r]}function Q5(s,t=!1){const n=document.activeElement;for(const r of s)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function Eq(s,t){return s.map((n,r)=>s[(t+r)%s.length])}var Y5=W5,X5=G5,h0="Tabs",[Tq]=Jr(h0,[kh]),Z5=kh(),[Aq,f0]=Tq(h0),J5=p.forwardRef((s,t)=>{const{__scopeTabs:n,value:r,onValueChange:o,defaultValue:l,orientation:d="horizontal",dir:u,activationMode:h="automatic",...f}=s,v=ch(u),[x,g]=Ka({prop:r,onChange:o,defaultProp:l});return e.jsx(Aq,{scope:n,baseId:Kr(),value:x,onValueChange:g,orientation:d,dir:v,activationMode:h,children:e.jsx(lt.div,{dir:v,"data-orientation":d,...f,ref:t})})});J5.displayName=h0;var e4="TabsList",t4=p.forwardRef((s,t)=>{const{__scopeTabs:n,loop:r=!0,...o}=s,l=f0(e4,n),d=Z5(n);return e.jsx(Y5,{asChild:!0,...d,orientation:l.orientation,dir:l.dir,loop:r,children:e.jsx(lt.div,{role:"tablist","aria-orientation":l.orientation,...o,ref:t})})});t4.displayName=e4;var s4="TabsTrigger",n4=p.forwardRef((s,t)=>{const{__scopeTabs:n,value:r,disabled:o=!1,...l}=s,d=f0(s4,n),u=Z5(n),h=i4(d.baseId,r),f=o4(d.baseId,r),v=r===d.value;return e.jsx(X5,{asChild:!0,...u,focusable:!o,active:v,children:e.jsx(lt.button,{type:"button",role:"tab","aria-selected":v,"aria-controls":f,"data-state":v?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:h,...l,ref:t,onMouseDown:Me(s.onMouseDown,x=>{!o&&x.button===0&&x.ctrlKey===!1?d.onValueChange(r):x.preventDefault()}),onKeyDown:Me(s.onKeyDown,x=>{[" ","Enter"].includes(x.key)&&d.onValueChange(r)}),onFocus:Me(s.onFocus,()=>{const x=d.activationMode!=="manual";!v&&!o&&x&&d.onValueChange(r)})})})});n4.displayName=s4;var r4="TabsContent",a4=p.forwardRef((s,t)=>{const{__scopeTabs:n,value:r,forceMount:o,children:l,...d}=s,u=f0(r4,n),h=i4(u.baseId,r),f=o4(u.baseId,r),v=r===u.value,x=p.useRef(v);return p.useEffect(()=>{const g=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(g)},[]),e.jsx(ea,{present:o||v,children:({present:g})=>e.jsx(lt.div,{"data-state":v?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":h,hidden:!g,id:f,tabIndex:0,...d,ref:t,style:{...s.style,animationDuration:x.current?"0s":void 0},children:g&&l})})});a4.displayName=r4;function i4(s,t){return`${s}-trigger-${t}`}function o4(s,t){return`${s}-content-${t}`}var Pq=J5,l4=t4,c4=n4,d4=a4;const u4=Pq,p0=p.forwardRef(({className:s,...t},n)=>e.jsx(l4,{ref:n,className:ze("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...t}));p0.displayName=l4.displayName;const Ol=p.forwardRef(({className:s,...t},n)=>e.jsx(c4,{ref:n,className:ze("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...t}));Ol.displayName=c4.displayName;const Ll=p.forwardRef(({className:s,...t},n)=>e.jsx(d4,{ref:n,className:ze("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...t}));Ll.displayName=d4.displayName;const m4={Folder:um,Rocket:wo,CreditCard:Ti,Settings:zw,HelpCircle:Iw,GraduationCap:rT,Wrench:Ww,Tag:$l,Heart:Dw,Star:Hr,Zap:$n,Shield:kn,Globe:nn,Code:XE,Lightbulb:cT,MessageCircle:Nd,Users:Vr,Clock:Wt,CheckCircle:wn,AlertTriangle:Fn,Info:$w,Database:JE,Layout:Km,Smartphone:gg,Monitor:fm,Palette:pg,BookOpen:_i,FileText:Gt,Search:sn},Rq=Object.keys(m4),Wx=[{name:"gray",bg:"bg-gray-100 dark:bg-gray-800",text:"text-gray-700 dark:text-gray-300",border:"border-gray-300 dark:border-gray-600"},{name:"blue",bg:"bg-blue-100 dark:bg-blue-900/30",text:"text-blue-700 dark:text-blue-300",border:"border-blue-300 dark:border-blue-600"},{name:"green",bg:"bg-green-100 dark:bg-green-900/30",text:"text-green-700 dark:text-green-300",border:"border-green-300 dark:border-green-600"},{name:"red",bg:"bg-red-100 dark:bg-red-900/30",text:"text-red-700 dark:text-red-300",border:"border-red-300 dark:border-red-600"},{name:"purple",bg:"bg-purple-100 dark:bg-purple-900/30",text:"text-purple-700 dark:text-purple-300",border:"border-purple-300 dark:border-purple-600"},{name:"yellow",bg:"bg-yellow-100 dark:bg-yellow-900/30",text:"text-yellow-700 dark:text-yellow-300",border:"border-yellow-300 dark:border-yellow-600"},{name:"pink",bg:"bg-pink-100 dark:bg-pink-900/30",text:"text-pink-700 dark:text-pink-300",border:"border-pink-300 dark:border-pink-600"},{name:"indigo",bg:"bg-indigo-100 dark:bg-indigo-900/30",text:"text-indigo-700 dark:text-indigo-300",border:"border-indigo-300 dark:border-indigo-600"},{name:"teal",bg:"bg-teal-100 dark:bg-teal-900/30",text:"text-teal-700 dark:text-teal-300",border:"border-teal-300 dark:border-teal-600"},{name:"orange",bg:"bg-orange-100 dark:bg-orange-900/30",text:"text-orange-700 dark:text-orange-300",border:"border-orange-300 dark:border-orange-600"}];function Xu(s){return Wx.find(t=>t.name===s)||Wx[0]}function qr({name:s,className:t}){const n=m4[s];return n?e.jsx(n,{className:t}):e.jsx(um,{className:t})}function Rj({value:s,onChange:t}){const[n,r]=p.useState(!1);return e.jsxs("div",{className:"relative",children:[e.jsxs(L,{type:"button",variant:"outline",size:"sm",className:"gap-2",onClick:()=>r(!n),"data-testid":"button-icon-picker",children:[e.jsx(qr,{name:s,className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:s})]}),n&&e.jsx("div",{className:"absolute z-50 top-full mt-1 left-0 bg-background border rounded-lg shadow-lg p-2 grid grid-cols-6 gap-1 w-[240px]","data-testid":"icon-picker-grid",children:Rq.map(o=>e.jsx("button",{type:"button",className:`p-2 rounded hover:bg-accent flex items-center justify-center ${s===o?"bg-accent ring-2 ring-primary":""}`,onClick:()=>{t(o),r(!1)},title:o,"data-testid":`icon-option-${o}`,children:e.jsx(qr,{name:o,className:"w-4 h-4"})},o))})]})}const _q={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{color:[]},{background:[]}],["blockquote","code-block"],["link","image"],["clean"]]};function _j(s){const t=document.createElement("div");return t.innerHTML=s,t.textContent||t.innerText||""}function Iq(){const{toast:s}=mt(),[t,n]=p.useState("articles"),[r,o]=p.useState(!1),[l,d]=p.useState(null),[u,h]=p.useState(null),[f,v]=p.useState("all"),[x,g]=p.useState("all"),[j,N]=p.useState(""),[b,k]=p.useState(""),[E,S]=p.useState(""),[T,P]=p.useState("General"),[H,re]=p.useState(0),[B,Q]=p.useState([]),[G,ue]=p.useState(!1),[_,Y]=p.useState(null),[z,J]=p.useState(""),[X,$]=p.useState("Folder"),[I,A]=p.useState(0),[W,Z]=p.useState(null),[q,ne]=p.useState(!1),[K,U]=p.useState(null),[M,F]=p.useState(""),[ie,fe]=p.useState("Tag"),[Ee,Ne]=p.useState("gray"),[Pe,$e]=p.useState(null),{data:Ue=[],isLoading:et}=_e({queryKey:["/api/knowledge-base"]}),{data:ct=[]}=_e({queryKey:["/api/knowledge-base/categories/list"]}),{data:Bt=[]}=_e({queryKey:["/api/knowledge-base/tags/list"]}),Yt=p.useMemo(()=>ct.map(le=>le.name),[ct]),ps=we({mutationFn:async le=>(await je("POST","/api/knowledge-base",le)).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/knowledge-base"]}),s({title:"Article created"}),Xt()},onError:()=>s({title:"Failed to create article",variant:"destructive"})}),ks=we({mutationFn:async({id:le,...Qe})=>(await je("PATCH",`/api/knowledge-base/${le}`,Qe)).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/knowledge-base"]}),s({title:"Article updated"}),Xt()},onError:()=>s({title:"Failed to update article",variant:"destructive"})}),cs=we({mutationFn:async le=>{await je("DELETE",`/api/knowledge-base/${le}`)},onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/knowledge-base"]}),s({title:"Article deleted"}),h(null)}}),xs=we({mutationFn:async le=>(await je("POST","/api/knowledge-base/categories",le)).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/knowledge-base/categories/list"]}),s({title:"Category created"}),ue(!1)},onError:()=>s({title:"Failed to create category",variant:"destructive"})}),Et=we({mutationFn:async({id:le,...Qe})=>(await je("PATCH",`/api/knowledge-base/categories/${le}`,Qe)).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/knowledge-base/categories/list"]}),s({title:"Category updated"}),ue(!1)},onError:()=>s({title:"Failed to update category",variant:"destructive"})}),Lt=we({mutationFn:async le=>{await je("DELETE",`/api/knowledge-base/categories/${le}`)},onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/knowledge-base/categories/list"]}),s({title:"Category deleted"}),Z(null)}}),wt=we({mutationFn:async le=>(await je("POST","/api/knowledge-base/tags",le)).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/knowledge-base/tags/list"]}),s({title:"Tag created"}),ne(!1)},onError:()=>s({title:"Failed to create tag",variant:"destructive"})}),me=we({mutationFn:async({id:le,...Qe})=>(await je("PATCH",`/api/knowledge-base/tags/${le}`,Qe)).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/knowledge-base/tags/list"]}),s({title:"Tag updated"}),ne(!1)},onError:()=>s({title:"Failed to update tag",variant:"destructive"})}),Le=we({mutationFn:async le=>{await je("DELETE",`/api/knowledge-base/tags/${le}`)},onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/knowledge-base/tags/list"]}),s({title:"Tag deleted"}),$e(null)}}),nt=()=>{d(null),k(""),S(""),P(Yt[0]||"General"),re(0),Q([]),o(!0)},St=le=>{d(le),k(le.title),S(le.content),P(le.category),re(le.sortOrder||0),Q(le.tags||[]),o(!0)},Xt=()=>{o(!1),d(null)},Ft=()=>{if(!b.trim())return s({title:"Title is required",variant:"destructive"});l?ks.mutate({id:l.id,title:b,content:E,category:T,status:"draft",sortOrder:H,tags:B}):ps.mutate({title:b,content:E,category:T,status:"draft",sortOrder:H,tags:B})},D=()=>{if(!b.trim())return s({title:"Title is required",variant:"destructive"});l?ks.mutate({id:l.id,title:b,content:E,category:T,status:"published",sortOrder:H,tags:B}):ps.mutate({title:b,content:E,category:T,status:"published",sortOrder:H,tags:B})},ge=le=>{const Qe=le.status==="published"?"draft":"published";ks.mutate({id:le.id,status:Qe})},Ge=Ue.filter(le=>!(f!=="all"&&le.status!==f||x!=="all"&&le.category!==x||j&&!le.title.toLowerCase().includes(j.toLowerCase()))),Nt=Ue.filter(le=>le.status==="draft").length,rt=Ue.filter(le=>le.status==="published").length,Pt=ps.isPending||ks.isPending,Us=()=>{Y(null),J(""),$("Folder"),A(ct.length),ue(!0)},Qs=le=>{Y(le),J(le.name),$(le.icon),A(le.sortOrder||0),ue(!0)},Is=()=>{if(!z.trim())return s({title:"Category name is required",variant:"destructive"});_?Et.mutate({id:_.id,name:z.trim(),icon:X,sortOrder:I}):xs.mutate({name:z.trim(),icon:X,sortOrder:I})},Ys=()=>{U(null),F(""),fe("Tag"),Ne("gray"),ne(!0)},Os=le=>{U(le),F(le.name),fe(le.icon),Ne(le.color),ne(!0)},Bs=()=>{if(!M.trim())return s({title:"Tag name is required",variant:"destructive"});K?me.mutate({id:K.id,name:M.trim(),icon:ie,color:Ee}):wt.mutate({name:M.trim(),icon:ie,color:Ee})},Hs=le=>ct.find(Rt=>Rt.name===le)?.icon||"Folder",An=le=>{Q(Qe=>Qe.includes(le)?Qe.filter(Rt=>Rt!==le):[...Qe,le])};return e.jsxs("div",{className:"space-y-6","data-testid":"page-knowledge-base",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2","data-testid":"text-kb-title",children:[e.jsx(_i,{className:"w-6 h-6"})," Knowledge Base"]}),e.jsx("p",{className:"text-muted-foreground text-sm mt-1",children:"Create and manage help articles, categories, and tags."})]})}),e.jsxs(u4,{value:t,onValueChange:n,children:[e.jsxs(p0,{"data-testid":"tabs-kb",children:[e.jsxs(Ol,{value:"articles","data-testid":"tab-articles",children:[e.jsx(Gt,{className:"w-4 h-4 mr-1"})," Articles (",Ue.length,")"]}),e.jsxs(Ol,{value:"categories","data-testid":"tab-categories",children:[e.jsx(um,{className:"w-4 h-4 mr-1"})," Categories (",ct.length,")"]}),e.jsxs(Ol,{value:"tags","data-testid":"tab-tags",children:[e.jsx($l,{className:"w-4 h-4 mr-1"})," Tags (",Bt.length,")"]})]}),e.jsxs(Ll,{value:"articles",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(Ce,{variant:f==="all"?"default":"outline",className:"cursor-pointer",onClick:()=>v("all"),"data-testid":"filter-all",children:["All (",Ue.length,")"]}),e.jsxs(Ce,{variant:f==="draft"?"default":"outline",className:"cursor-pointer",onClick:()=>v("draft"),"data-testid":"filter-draft",children:["Drafts (",Nt,")"]}),e.jsxs(Ce,{variant:f==="published"?"default":"outline",className:"cursor-pointer",onClick:()=>v("published"),"data-testid":"filter-published",children:["Published (",rt,")"]})]}),e.jsxs(L,{onClick:nt,"data-testid":"button-new-article",children:[e.jsx(Qt,{className:"w-4 h-4 mr-2"})," New Article"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(sn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(Oe,{placeholder:"Search articles...",value:j,onChange:le=>N(le.target.value),className:"pl-9","data-testid":"input-search-articles"})]}),e.jsxs(Dt,{value:x,onValueChange:g,children:[e.jsx(It,{className:"w-[200px]","data-testid":"select-filter-category",children:e.jsx($t,{placeholder:"Category"})}),e.jsxs(Ot,{children:[e.jsx(Ie,{value:"all",children:"All Categories"}),Yt.map(le=>e.jsx(Ie,{value:le,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(qr,{name:Hs(le),className:"w-3.5 h-3.5"}),le]})},le))]})]})]}),et?e.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"Loading articles..."}):Ge.length===0?e.jsx(ce,{children:e.jsxs(tn,{className:"py-12 text-center",children:[e.jsx(Gt,{className:"w-12 h-12 mx-auto text-muted-foreground/50 mb-3"}),e.jsx("p",{className:"text-muted-foreground",children:"No articles found. Create your first knowledge base article!"})]})}):e.jsx("div",{className:"grid gap-3",children:Ge.map(le=>e.jsx(ce,{className:"hover:shadow-md transition-shadow","data-testid":`card-article-${le.id}`,children:e.jsx(tn,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3 min-w-0",children:[e.jsx(aT,{className:"w-4 h-4 text-muted-foreground/40 mt-1 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h3",{className:"font-semibold truncate","data-testid":`text-article-title-${le.id}`,children:le.title}),e.jsx(Ce,{variant:le.status==="published"?"default":"secondary",className:"text-xs","data-testid":`badge-status-${le.id}`,children:le.status==="published"?"Published":"Draft"}),e.jsxs(Ce,{variant:"outline",className:"text-xs flex items-center gap-1",children:[e.jsx(qr,{name:Hs(le.category),className:"w-3 h-3"}),le.category]}),le.notionPageId&&e.jsx(Ce,{variant:"outline",className:"text-xs text-blue-600 border-blue-200",children:"Notion"})]}),(le.tags||[]).length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-1.5",children:le.tags.map(Qe=>{const Rt=Bt.find(ir=>ir.name===Qe),As=Xu(Rt?.color||"gray");return e.jsxs("span",{className:`inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-[10px] font-medium border ${As.bg} ${As.text} ${As.border}`,children:[e.jsx(qr,{name:Rt?.icon||"Tag",className:"w-2.5 h-2.5"}),Qe]},Qe)})}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:le.content?_j(le.content).substring(0,150)+(_j(le.content).length>150?"...":""):"No content yet"}),e.jsxs("p",{className:"text-xs text-muted-foreground/60 mt-1",children:["Updated ",le.updatedAt?new Date(le.updatedAt).toLocaleDateString():"","  /",le.slug]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[e.jsx(L,{variant:"ghost",size:"icon",onClick:()=>ge(le),title:le.status==="published"?"Unpublish":"Publish","data-testid":`button-toggle-publish-${le.id}`,children:le.status==="published"?e.jsx(Hm,{className:"w-4 h-4"}):e.jsx(Oo,{className:"w-4 h-4"})}),e.jsx(L,{variant:"ghost",size:"icon",onClick:()=>St(le),"data-testid":`button-edit-article-${le.id}`,children:e.jsx(kr,{className:"w-4 h-4"})}),e.jsx(L,{variant:"ghost",size:"icon",className:"text-destructive",onClick:()=>h(le.id),"data-testid":`button-delete-article-${le.id}`,children:e.jsx(ls,{className:"w-4 h-4"})})]})]})})},le.id))})]}),e.jsxs(Ll,{value:"categories",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage categories to organize your knowledge base articles."}),e.jsxs(L,{onClick:Us,"data-testid":"button-new-category",children:[e.jsx(Qt,{className:"w-4 h-4 mr-2"})," New Category"]})]}),ct.length===0?e.jsx(ce,{children:e.jsxs(tn,{className:"py-12 text-center",children:[e.jsx(um,{className:"w-12 h-12 mx-auto text-muted-foreground/50 mb-3"}),e.jsx("p",{className:"text-muted-foreground",children:"No categories yet. Create your first category!"})]})}):e.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:ct.map(le=>{const Qe=Ue.filter(Rt=>Rt.category===le.name).length;return e.jsx(ce,{className:"hover:shadow-md transition-shadow","data-testid":`card-category-${le.id}`,children:e.jsx(tn,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:e.jsx(qr,{name:le.icon,className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold","data-testid":`text-cat-name-${le.id}`,children:le.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Qe," article",Qe!==1?"s":"","  Order: ",le.sortOrder]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(L,{variant:"ghost",size:"icon",onClick:()=>Qs(le),"data-testid":`button-edit-cat-${le.id}`,children:e.jsx(kr,{className:"w-4 h-4"})}),e.jsx(L,{variant:"ghost",size:"icon",className:"text-destructive",onClick:()=>Z(le.id),"data-testid":`button-delete-cat-${le.id}`,children:e.jsx(ls,{className:"w-4 h-4"})})]})]})})},le.id)})})]}),e.jsxs(Ll,{value:"tags",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage tags for fine-grained article classification."}),e.jsxs(L,{onClick:Ys,"data-testid":"button-new-tag",children:[e.jsx(Qt,{className:"w-4 h-4 mr-2"})," New Tag"]})]}),Bt.length===0?e.jsx(ce,{children:e.jsxs(tn,{className:"py-12 text-center",children:[e.jsx($l,{className:"w-12 h-12 mx-auto text-muted-foreground/50 mb-3"}),e.jsx("p",{className:"text-muted-foreground",children:"No tags yet. Create your first tag!"})]})}):e.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:Bt.map(le=>{const Qe=Xu(le.color),Rt=Ue.filter(As=>(As.tags||[]).includes(le.name)).length;return e.jsx(ce,{className:"hover:shadow-md transition-shadow","data-testid":`card-tag-${le.id}`,children:e.jsx(tn,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center border ${Qe.bg} ${Qe.border}`,children:e.jsx(qr,{name:le.icon,className:`w-5 h-5 ${Qe.text}`})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold","data-testid":`text-tag-name-${le.id}`,children:le.name}),e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-medium border ${Qe.bg} ${Qe.text} ${Qe.border}`,children:le.color})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Rt," article",Rt!==1?"s":""]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(L,{variant:"ghost",size:"icon",onClick:()=>Os(le),"data-testid":`button-edit-tag-${le.id}`,children:e.jsx(kr,{className:"w-4 h-4"})}),e.jsx(L,{variant:"ghost",size:"icon",className:"text-destructive",onClick:()=>$e(le.id),"data-testid":`button-delete-tag-${le.id}`,children:e.jsx(ls,{className:"w-4 h-4"})})]})]})})},le.id)})})]})]}),e.jsx(yt,{open:r,onOpenChange:o,children:e.jsxs(xt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(gt,{children:e.jsx(vt,{"data-testid":"text-editor-title",children:l?"Edit Article":"New Article"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(De,{children:"Title"}),e.jsx(Oe,{value:b,onChange:le=>k(le.target.value),placeholder:"Article title...","data-testid":"input-article-title"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(De,{children:"Category"}),e.jsxs(Dt,{value:T,onValueChange:P,children:[e.jsx(It,{"data-testid":"select-article-category",children:e.jsx($t,{})}),e.jsx(Ot,{children:Yt.map(le=>e.jsx(Ie,{value:le,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(qr,{name:Hs(le),className:"w-3.5 h-3.5"}),le]})},le))})]})]}),e.jsxs("div",{className:"w-24",children:[e.jsx(De,{children:"Sort Order"}),e.jsx(Oe,{type:"number",value:H,onChange:le=>re(parseInt(le.target.value)||0),"data-testid":"input-sort-order"})]})]}),Bt.length>0&&e.jsxs("div",{children:[e.jsx(De,{children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-1.5 p-3 border rounded-md bg-muted/30","data-testid":"article-tags-picker",children:Bt.map(le=>{const Qe=Xu(le.color),Rt=B.includes(le.name);return e.jsxs("button",{type:"button",onClick:()=>An(le.name),className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium border transition-all ${Rt?`${Qe.bg} ${Qe.text} ${Qe.border} ring-2 ring-primary/30`:"bg-background text-muted-foreground border-border hover:bg-accent"}`,"data-testid":`toggle-tag-${le.id}`,children:[e.jsx(qr,{name:le.icon,className:"w-3 h-3"}),le.name,Rt&&e.jsx(zn,{className:"w-3 h-3"})]},le.id)})})]}),e.jsxs("div",{children:[e.jsx(De,{children:"Content"}),e.jsx("div",{className:"mt-1 rounded-md border bg-background","data-testid":"editor-quill-wrapper",children:e.jsx(q5,{theme:"snow",value:E,onChange:S,modules:_q,placeholder:"Write your article content here...",style:{minHeight:"300px"}})})]})]}),e.jsxs(Ba,{className:"flex gap-2 sm:gap-2",children:[e.jsx(L,{variant:"outline",onClick:Xt,"data-testid":"button-cancel-editor",children:"Cancel"}),e.jsxs(L,{variant:"secondary",onClick:Ft,disabled:Pt,"data-testid":"button-save-draft",children:[e.jsx(Gt,{className:"w-4 h-4 mr-2"})," Save as Draft"]}),e.jsxs(L,{onClick:D,disabled:Pt,"data-testid":"button-publish",children:[e.jsx(os,{className:"w-4 h-4 mr-2"})," ",l?.status==="published"?"Update & Publish":"Publish"]})]})]})}),e.jsx(yt,{open:!!u,onOpenChange:()=>h(null),children:e.jsxs(xt,{children:[e.jsx(gt,{children:e.jsx(vt,{children:"Delete Article"})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Are you sure you want to delete this article? This action cannot be undone."}),e.jsxs(Ba,{children:[e.jsx(L,{variant:"outline",onClick:()=>h(null),children:"Cancel"}),e.jsx(L,{variant:"destructive",onClick:()=>u&&cs.mutate(u),disabled:cs.isPending,"data-testid":"button-confirm-delete",children:"Delete"})]})]})}),e.jsx(yt,{open:G,onOpenChange:ue,children:e.jsxs(xt,{className:"sm:max-w-md",children:[e.jsx(gt,{children:e.jsx(vt,{children:_?"Edit Category":"New Category"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(De,{children:"Name"}),e.jsx(Oe,{value:z,onChange:le=>J(le.target.value),placeholder:"Category name...","data-testid":"input-cat-name"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{children:[e.jsx(De,{children:"Icon"}),e.jsx("div",{className:"mt-1",children:e.jsx(Rj,{value:X,onChange:$})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(De,{children:"Sort Order"}),e.jsx(Oe,{type:"number",value:I,onChange:le=>A(parseInt(le.target.value)||0),"data-testid":"input-cat-sort-order"})]})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-muted/50 border",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Preview"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center",children:e.jsx(qr,{name:X,className:"w-4 h-4 text-primary"})}),e.jsx("span",{className:"font-medium",children:z||"Category Name"})]})]})]}),e.jsxs(Ba,{children:[e.jsx(L,{variant:"outline",onClick:()=>ue(!1),children:"Cancel"}),e.jsxs(L,{onClick:Is,disabled:xs.isPending||Et.isPending,"data-testid":"button-save-cat",children:[_?"Update":"Create"," Category"]})]})]})}),e.jsx(yt,{open:!!W,onOpenChange:()=>Z(null),children:e.jsxs(xt,{children:[e.jsx(gt,{children:e.jsx(vt,{children:"Delete Category"})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Are you sure? Articles using this category will keep their current category but it won't appear in the list."}),e.jsxs(Ba,{children:[e.jsx(L,{variant:"outline",onClick:()=>Z(null),children:"Cancel"}),e.jsx(L,{variant:"destructive",onClick:()=>W&&Lt.mutate(W),disabled:Lt.isPending,"data-testid":"button-confirm-delete-cat",children:"Delete"})]})]})}),e.jsx(yt,{open:q,onOpenChange:ne,children:e.jsxs(xt,{className:"sm:max-w-md",children:[e.jsx(gt,{children:e.jsx(vt,{children:K?"Edit Tag":"New Tag"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(De,{children:"Name"}),e.jsx(Oe,{value:M,onChange:le=>F(le.target.value),placeholder:"Tag name...","data-testid":"input-tag-name"})]}),e.jsxs("div",{children:[e.jsx(De,{children:"Icon"}),e.jsx("div",{className:"mt-1",children:e.jsx(Rj,{value:ie,onChange:fe})})]}),e.jsxs("div",{children:[e.jsx(De,{children:"Color"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-1.5","data-testid":"tag-color-picker",children:Wx.map(le=>e.jsx("button",{type:"button",onClick:()=>Ne(le.name),className:`w-8 h-8 rounded-full border-2 transition-all ${le.bg} ${Ee===le.name?"ring-2 ring-primary ring-offset-2 border-primary":`${le.border}`}`,title:le.name,"data-testid":`color-option-${le.name}`},le.name))})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-muted/50 border",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Preview"}),e.jsx("div",{className:"flex items-center gap-2",children:(()=>{const le=Xu(Ee);return e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium border ${le.bg} ${le.text} ${le.border}`,children:[e.jsx(qr,{name:ie,className:"w-3.5 h-3.5"}),M||"Tag Name"]})})()})]})]}),e.jsxs(Ba,{children:[e.jsx(L,{variant:"outline",onClick:()=>ne(!1),children:"Cancel"}),e.jsxs(L,{onClick:Bs,disabled:wt.isPending||me.isPending,"data-testid":"button-save-tag",children:[K?"Update":"Create"," Tag"]})]})]})}),e.jsx(yt,{open:!!Pe,onOpenChange:()=>$e(null),children:e.jsxs(xt,{children:[e.jsx(gt,{children:e.jsx(vt,{children:"Delete Tag"})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Are you sure? This tag will be removed from the list but articles that use it will keep the tag name."}),e.jsxs(Ba,{children:[e.jsx(L,{variant:"outline",onClick:()=>$e(null),children:"Cancel"}),e.jsx(L,{variant:"destructive",onClick:()=>Pe&&Le.mutate(Pe),disabled:Le.isPending,"data-testid":"button-confirm-delete-tag",children:"Delete"})]})]})})]})}function Oq(){Un("Licenses");const{toast:s}=mt(),[t,n]=p.useState(!1),[r,o]=p.useState(""),[l,d]=p.useState("0"),[u,h]=p.useState(""),[f,v]=p.useState(null),[x,g]=p.useState(null),{data:j,isLoading:N}=_e({queryKey:["/api/licenses"]}),{data:b}=_e({queryKey:["/api/customers"]}),k=we({mutationFn:async B=>(await je("POST","/api/licenses",B)).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/licenses"]}),n(!1),o(""),d("0"),h(""),s({title:"License created",description:"A new license key has been generated."})},onError:B=>{s({title:"Failed to create license",description:B.message||"An error occurred",variant:"destructive"})}}),E=we({mutationFn:async B=>(await je("POST",`/api/licenses/${B}/reissue`)).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/licenses"]}),s({title:"License reissued",description:"A new key has been generated. The old key is now invalid."})}}),S=we({mutationFn:async({id:B,status:Q})=>{await je("PATCH",`/api/licenses/${B}`,{status:Q})},onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/licenses"]})}}),T=we({mutationFn:async B=>{await je("DELETE",`/api/licenses/${B}`)},onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/licenses"]}),s({title:"License deleted"})}}),P=(B,Q)=>{navigator.clipboard.writeText(B),v(Q),setTimeout(()=>v(null),2e3)},H=B=>b?.find(Q=>Q.id===B)?.name||"Unknown",re=B=>b?.find(Q=>Q.id===B)?.portalToken||"";return N?e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx(ye,{className:"h-8 w-48"}),e.jsx(ye,{className:"h-32 w-full"}),e.jsx(ye,{className:"h-32 w-full"})]}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2","data-testid":"page-title-licenses",children:[e.jsx(kn,{className:"h-6 w-6"}),"License Management"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Issue, reissue, and manage script licenses for your customers"})]}),e.jsxs(L,{onClick:()=>n(!0),"data-testid":"btn-create-license",children:[e.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Issue License"]})]}),j?.length?e.jsx("div",{className:"space-y-4",children:j.map(B=>e.jsx(Lq,{license:B,customerName:H(B.customerId),portalToken:re(B.customerId),copiedId:f,expanded:x===B.id,onToggleExpand:()=>g(x===B.id?null:B.id),onCopy:Q=>P(Q,B.id),onReissue:()=>{confirm("This will generate a new license key. The old key will stop working immediately. Continue?")&&E.mutate(B.id)},onToggleStatus:Q=>S.mutate({id:B.id,status:Q}),onDelete:()=>{confirm("Delete this license permanently?")&&T.mutate(B.id)}},B.id))}):e.jsxs(ce,{className:"p-12 text-center",children:[e.jsx(kn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Licenses Yet"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Issue a license key to a customer to let them run the server setup script."}),e.jsxs(L,{onClick:()=>n(!0),children:[e.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Issue First License"]})]}),e.jsx(yt,{open:t,onOpenChange:n,children:e.jsxs(xt,{children:[e.jsx(gt,{children:e.jsx(vt,{children:"Issue New License"})}),e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsxs("div",{children:[e.jsx(De,{children:"Customer"}),e.jsxs(Dt,{value:r,onValueChange:o,children:[e.jsx(It,{"data-testid":"select-license-customer",children:e.jsx($t,{placeholder:"Select a customer"})}),e.jsx(Ot,{children:b?.map(B=>e.jsx(Ie,{value:B.id,children:B.name},B.id))})]})]}),e.jsxs("div",{children:[e.jsx(De,{children:"Max Activations"}),e.jsx(Oe,{type:"number",value:l,onChange:B=>d(B.target.value),placeholder:"0 = unlimited","data-testid":"input-max-activations"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Set to 0 for unlimited activations"})]}),e.jsxs("div",{children:[e.jsx(De,{children:"Notes"}),e.jsx(Oe,{value:u,onChange:B=>h(B.target.value),placeholder:"Optional internal notes","data-testid":"input-license-notes"})]}),e.jsx(L,{className:"w-full",onClick:()=>k.mutate({customerId:r,maxActivations:parseInt(l)||0,notes:u}),disabled:!r||k.isPending,"data-testid":"btn-submit-license",children:k.isPending?"Creating...":"Issue License Key"})]})]})})]})}function Lq({license:s,customerName:t,portalToken:n,copiedId:r,expanded:o,onToggleExpand:l,onCopy:d,onReissue:u,onToggleStatus:h,onDelete:f}){const{toast:v}=mt(),{data:x}=_e({queryKey:["/api/licenses",s.id,"activations"],queryFn:async()=>(await fetch(`/api/licenses/${s.id}/activations`)).json()}),g=we({mutationFn:async b=>{await je("POST",`/api/licenses/${s.id}/activations/${b}/release`)},onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/licenses",s.id,"activations"]}),xe.invalidateQueries({queryKey:["/api/licenses"]}),v({title:"IP released",description:"This IP slot is now free for a new server."})}}),j=x?.filter(b=>b.status==="active").length||0,N=s.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":s.status==="suspended"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";return e.jsxs(ce,{className:"p-5","data-testid":`license-card-${s.id}`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Dl,{className:"h-5 w-5 text-primary"}),e.jsx("span",{className:"font-semibold text-lg",children:t}),e.jsx(Ce,{className:N,children:s.status}),(s.activationCount??0)>0&&e.jsxs(Ce,{className:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400 gap-1",children:[e.jsx(Uw,{className:"h-3.5 w-3.5"}),"Validated"]})]}),n&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(nn,{className:"h-3 w-3"}),e.jsx("span",{children:"Portal Token:"}),e.jsx("code",{className:"bg-muted/50 px-1.5 py-0.5 rounded font-mono text-xs","data-testid":`portal-token-${s.id}`,children:n})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-muted/50 rounded-lg px-3 py-2 font-mono text-sm",children:[e.jsx("span",{"data-testid":`license-key-${s.id}`,children:s.licenseKey}),e.jsx(L,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>d(s.licenseKey),"data-testid":`btn-copy-key-${s.id}`,children:r===s.id?e.jsx(is,{className:"h-3.5 w-3.5 text-green-500"}):e.jsx(fn,{className:"h-3.5 w-3.5"})})]}),j>0&&e.jsx("div",{className:"flex flex-wrap items-center gap-1.5",children:x?.filter(b=>b.status==="active").map(b=>e.jsxs(Ce,{variant:"outline",className:"text-xs font-mono gap-1 py-0.5 border-green-300 dark:border-green-700 text-green-700 dark:text-green-400",children:[e.jsx(Eb,{className:"h-3 w-3"}),b.serverIp,b.hostname&&b.hostname!=="unknown"&&e.jsxs("span",{className:"text-muted-foreground font-sans",children:["(",b.hostname,")"]})]},b.id))}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(er,{className:"h-3.5 w-3.5"}),j," active / ",s.maxActivations&&s.maxActivations>0?`${s.maxActivations} max`:"unlimited"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Wt,{className:"h-3.5 w-3.5"}),s.createdAt?new Date(s.createdAt).toLocaleDateString():"N/A"]}),s.lastActivatedAt&&e.jsxs("span",{className:"flex items-center gap-1",children:["Last used: ",new Date(s.lastActivatedAt).toLocaleDateString()]})]}),s.notes&&e.jsx("p",{className:"text-sm text-muted-foreground italic",children:s.notes})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(L,{variant:"ghost",size:"icon",onClick:l,title:"View activations","data-testid":`btn-expand-${s.id}`,children:o?e.jsx(Io,{className:"h-4 w-4"}):e.jsx(Sr,{className:"h-4 w-4"})}),e.jsx(L,{variant:"ghost",size:"icon",onClick:u,title:"Reissue license key","data-testid":`btn-reissue-${s.id}`,children:e.jsx(Gl,{className:"h-4 w-4"})}),e.jsx(L,{variant:"ghost",size:"icon",onClick:()=>h(s.status==="active"?"suspended":"active"),title:s.status==="active"?"Suspend license":"Activate license","data-testid":`btn-toggle-status-${s.id}`,children:e.jsx(kn,{className:"h-4 w-4"})}),e.jsx(L,{variant:"ghost",size:"icon",onClick:f,title:"Delete license","data-testid":`btn-delete-${s.id}`,children:e.jsx(ls,{className:"h-4 w-4 text-red-500"})})]})]}),o&&e.jsxs("div",{className:"mt-4 border-t pt-4",children:[e.jsxs("h4",{className:"text-sm font-semibold mb-3 flex items-center gap-2",children:[e.jsx(nn,{className:"h-4 w-4"}),"IP Activations",j>0&&e.jsxs(Ce,{variant:"outline",className:"ml-1",children:[j," active"]})]}),x?.length?e.jsx("div",{className:"space-y-2",children:x.map(b=>e.jsxs("div",{className:"flex items-center gap-3 text-sm bg-muted/30 rounded-lg px-3 py-2",children:[b.status==="active"?e.jsx(Eb,{className:"h-4 w-4 text-green-500 shrink-0"}):e.jsx(Sb,{className:"h-4 w-4 text-muted-foreground shrink-0"}),e.jsx("span",{className:"font-mono font-medium",children:b.serverIp||"N/A"}),e.jsx("span",{className:"text-muted-foreground",children:b.hostname||"N/A"}),e.jsx(Ce,{variant:b.status==="active"?"default":"secondary",className:"text-xs",children:b.status}),e.jsxs("span",{className:"text-muted-foreground ml-auto text-xs",children:[b.activatedAt?new Date(b.activatedAt).toLocaleDateString():"N/A",b.status==="released"&&b.releasedAt&&e.jsxs(e.Fragment,{children:["  released ",new Date(b.releasedAt).toLocaleDateString()]})]}),b.status==="active"&&e.jsxs(L,{variant:"ghost",size:"sm",className:"h-7 text-xs text-red-500 hover:text-red-700",onClick:()=>{confirm(`Release IP ${b.serverIp}? This will free up an activation slot.`)&&g.mutate(b.id)},"data-testid":`btn-release-ip-${b.id}`,children:[e.jsx(Sb,{className:"h-3 w-3 mr-1"}),"Release"]})]},b.id))}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No IP activations yet. The license will activate when a server runs the setup script."})]})]})}function Gp(s){const t=document.createElement("div");return t.innerHTML=s,t.textContent||t.innerText||""}function Mq(){const[s,t]=p.useState(""),[n,r]=p.useState(null),[o,l]=p.useState(null),{data:d=[],isLoading:u}=_e({queryKey:["/api/public/knowledge-base"]}),h=Array.from(new Set(d.map(x=>x.category))),f=d.filter(x=>{if(o&&x.category!==o)return!1;if(s){const g=s.toLowerCase(),j=Gp(x.content).toLowerCase();return x.title.toLowerCase().includes(g)||j.includes(g)}return!0}),v=d.find(x=>x.slug===n);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-background to-muted/30",children:[e.jsx("header",{className:"border-b bg-background/95 backdrop-blur sticky top-0 z-10",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-4 flex items-center justify-between",children:[e.jsxs("a",{href:"/",className:"flex items-center gap-2 hover:opacity-80 transition-opacity","data-testid":"link-home",children:[e.jsx(_i,{className:"w-6 h-6 text-primary"}),e.jsx("span",{className:"text-lg font-bold",children:"Help Center"})]}),e.jsx("a",{href:"/questions",className:"text-sm text-muted-foreground hover:text-foreground transition-colors","data-testid":"link-qa",children:"Q&A"})]})}),e.jsx("main",{className:"max-w-5xl mx-auto px-6 py-8",children:v?e.jsxs("div",{"data-testid":"article-detail-view",children:[e.jsxs(L,{variant:"ghost",className:"mb-4 -ml-2",onClick:()=>r(null),"data-testid":"button-back-to-list",children:[e.jsx(va,{className:"w-4 h-4 mr-2"})," Back to articles"]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(Ce,{variant:"outline",className:"mb-2",children:v.category}),e.jsx("h1",{className:"text-3xl font-bold","data-testid":"text-article-detail-title",children:v.title}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Last updated ",v.updatedAt?new Date(v.updatedAt).toLocaleDateString():""]})]}),e.jsx(ce,{children:e.jsx(tn,{className:"p-6 sm:p-8 prose dark:prose-invert max-w-none article-content","data-testid":"article-content",dangerouslySetInnerHTML:{__html:v.content}})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"How can we help?"}),e.jsx("p",{className:"text-muted-foreground",children:"Browse our knowledge base for guides, tutorials, and answers."})]}),e.jsxs("div",{className:"relative max-w-xl mx-auto mb-8",children:[e.jsx(sn,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),e.jsx(Oe,{placeholder:"Search for articles...",value:s,onChange:x=>t(x.target.value),className:"pl-12 h-12 text-base rounded-xl","data-testid":"input-search-help"})]}),h.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-2 justify-center mb-8",children:[e.jsx(Ce,{variant:o===null?"default":"outline",className:"cursor-pointer px-3 py-1",onClick:()=>l(null),"data-testid":"badge-category-all",children:"All"}),h.map(x=>e.jsxs(Ce,{variant:o===x?"default":"outline",className:"cursor-pointer px-3 py-1",onClick:()=>l(x),"data-testid":`badge-category-${x.toLowerCase().replace(/\s+/g,"-")}`,children:[x," (",d.filter(g=>g.category===x).length,")"]},x))]}),u?e.jsx("div",{className:"text-center py-16 text-muted-foreground",children:"Loading articles..."}):f.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(Gt,{className:"w-16 h-16 mx-auto text-muted-foreground/30 mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No articles found."})]}):e.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:f.map(x=>e.jsx(ce,{className:"cursor-pointer hover:shadow-md hover:border-primary/30 transition-all group",onClick:()=>r(x.slug),"data-testid":`card-help-article-${x.id}`,children:e.jsx(tn,{className:"p-5",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx(Ce,{variant:"outline",className:"text-xs mb-2",children:x.category}),e.jsx("h3",{className:"font-semibold group-hover:text-primary transition-colors","data-testid":`text-help-title-${x.id}`,children:x.title}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:x.content?Gp(x.content).substring(0,120)+(Gp(x.content).length>120?"...":""):""})]}),e.jsx(Bm,{className:"w-5 h-5 text-muted-foreground/40 group-hover:text-primary transition-colors flex-shrink-0 mt-1"})]})})},x.id))})]})}),e.jsx("footer",{className:"border-t mt-16 py-6 text-center text-xs text-muted-foreground",children:e.jsxs("p",{children:["AI Powered Sites  ",e.jsx("a",{href:"/",className:"hover:underline",children:"Home"}),"  ",e.jsx("a",{href:"/questions",className:"hover:underline",children:"Q&A"})]})})]})}var Vx=["Enter"," "],Dq=["ArrowDown","PageUp","Home"],h4=["ArrowUp","PageDown","End"],$q=[...Dq,...h4],qq={ltr:[...Vx,"ArrowRight"],rtl:[...Vx,"ArrowLeft"]},Fq={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Rd="Menu",[gd,zq,Uq]=qm(Rd),[zo,f4]=Jr(Rd,[Uq,Zl,kh]),Ch=Zl(),p4=kh(),[Bq,Uo]=zo(Rd),[Hq,_d]=zo(Rd),x4=s=>{const{__scopeMenu:t,open:n=!1,children:r,dir:o,onOpenChange:l,modal:d=!0}=s,u=Ch(t),[h,f]=p.useState(null),v=p.useRef(!1),x=an(l),g=ch(o);return p.useEffect(()=>{const j=()=>{v.current=!0,document.addEventListener("pointerdown",N,{capture:!0,once:!0}),document.addEventListener("pointermove",N,{capture:!0,once:!0})},N=()=>v.current=!1;return document.addEventListener("keydown",j,{capture:!0}),()=>{document.removeEventListener("keydown",j,{capture:!0}),document.removeEventListener("pointerdown",N,{capture:!0}),document.removeEventListener("pointermove",N,{capture:!0})}},[]),e.jsx(Rg,{...u,children:e.jsx(Bq,{scope:t,open:n,onOpenChange:x,content:h,onContentChange:f,children:e.jsx(Hq,{scope:t,onClose:p.useCallback(()=>x(!1),[x]),isUsingKeyboardRef:v,dir:g,modal:d,children:r})})})};x4.displayName=Rd;var Kq="MenuAnchor",x0=p.forwardRef((s,t)=>{const{__scopeMenu:n,...r}=s,o=Ch(n);return e.jsx(_g,{...o,...r,ref:t})});x0.displayName=Kq;var g0="MenuPortal",[Wq,g4]=zo(g0,{forceMount:void 0}),v4=s=>{const{__scopeMenu:t,forceMount:n,children:r,container:o}=s,l=Uo(g0,t);return e.jsx(Wq,{scope:t,forceMount:n,children:e.jsx(ea,{present:n||l.open,children:e.jsx(jd,{asChild:!0,container:o,children:r})})})};v4.displayName=g0;var Cr="MenuContent",[Vq,v0]=zo(Cr),y4=p.forwardRef((s,t)=>{const n=g4(Cr,s.__scopeMenu),{forceMount:r=n.forceMount,...o}=s,l=Uo(Cr,s.__scopeMenu),d=_d(Cr,s.__scopeMenu);return e.jsx(gd.Provider,{scope:s.__scopeMenu,children:e.jsx(ea,{present:r||l.open,children:e.jsx(gd.Slot,{scope:s.__scopeMenu,children:d.modal?e.jsx(Gq,{...o,ref:t}):e.jsx(Qq,{...o,ref:t})})})})}),Gq=p.forwardRef((s,t)=>{const n=Uo(Cr,s.__scopeMenu),r=p.useRef(null),o=qt(t,r);return p.useEffect(()=>{const l=r.current;if(l)return Dg(l)},[]),e.jsx(y0,{...s,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Me(s.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Qq=p.forwardRef((s,t)=>{const n=Uo(Cr,s.__scopeMenu);return e.jsx(y0,{...s,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Yq=yo("MenuContent.ScrollLock"),y0=p.forwardRef((s,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:l,onCloseAutoFocus:d,disableOutsidePointerEvents:u,onEntryFocus:h,onEscapeKeyDown:f,onPointerDownOutside:v,onFocusOutside:x,onInteractOutside:g,onDismiss:j,disableOutsideScroll:N,...b}=s,k=Uo(Cr,n),E=_d(Cr,n),S=Ch(n),T=p4(n),P=zq(n),[H,re]=p.useState(null),B=p.useRef(null),Q=qt(t,B,k.onContentChange),G=p.useRef(0),ue=p.useRef(""),_=p.useRef(0),Y=p.useRef(null),z=p.useRef("right"),J=p.useRef(0),X=N?rh:p.Fragment,$=N?{as:Yq,allowPinchZoom:!0}:void 0,I=W=>{const Z=ue.current+W,q=P().filter(ie=>!ie.disabled),ne=document.activeElement,K=q.find(ie=>ie.ref.current===ne)?.textValue,U=q.map(ie=>ie.textValue),M=lF(U,Z,K),F=q.find(ie=>ie.textValue===M)?.ref.current;(function ie(fe){ue.current=fe,window.clearTimeout(G.current),fe!==""&&(G.current=window.setTimeout(()=>ie(""),1e3))})(Z),F&&setTimeout(()=>F.focus())};p.useEffect(()=>()=>window.clearTimeout(G.current),[]),Mg();const A=p.useCallback(W=>z.current===Y.current?.side&&dF(W,Y.current?.area),[]);return e.jsx(Vq,{scope:n,searchRef:ue,onItemEnter:p.useCallback(W=>{A(W)&&W.preventDefault()},[A]),onItemLeave:p.useCallback(W=>{A(W)||(B.current?.focus(),re(null))},[A]),onTriggerLeave:p.useCallback(W=>{A(W)&&W.preventDefault()},[A]),pointerGraceTimerRef:_,onPointerGraceIntentChange:p.useCallback(W=>{Y.current=W},[]),children:e.jsx(X,{...$,children:e.jsx(sh,{asChild:!0,trapped:o,onMountAutoFocus:Me(l,W=>{W.preventDefault(),B.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:d,children:e.jsx(Wl,{asChild:!0,disableOutsidePointerEvents:u,onEscapeKeyDown:f,onPointerDownOutside:v,onFocusOutside:x,onInteractOutside:g,onDismiss:j,children:e.jsx(Y5,{asChild:!0,...T,dir:E.dir,orientation:"vertical",loop:r,currentTabStopId:H,onCurrentTabStopIdChange:re,onEntryFocus:Me(h,W=>{E.isUsingKeyboardRef.current||W.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(Ig,{role:"menu","aria-orientation":"vertical","data-state":L4(k.open),"data-radix-menu-content":"",dir:E.dir,...S,...b,ref:Q,style:{outline:"none",...b.style},onKeyDown:Me(b.onKeyDown,W=>{const q=W.target.closest("[data-radix-menu-content]")===W.currentTarget,ne=W.ctrlKey||W.altKey||W.metaKey,K=W.key.length===1;q&&(W.key==="Tab"&&W.preventDefault(),!ne&&K&&I(W.key));const U=B.current;if(W.target!==U||!$q.includes(W.key))return;W.preventDefault();const F=P().filter(ie=>!ie.disabled).map(ie=>ie.ref.current);h4.includes(W.key)&&F.reverse(),iF(F)}),onBlur:Me(s.onBlur,W=>{W.currentTarget.contains(W.target)||(window.clearTimeout(G.current),ue.current="")}),onPointerMove:Me(s.onPointerMove,vd(W=>{const Z=W.target,q=J.current!==W.clientX;if(W.currentTarget.contains(Z)&&q){const ne=W.clientX>J.current?"right":"left";z.current=ne,J.current=W.clientX}}))})})})})})})});y4.displayName=Cr;var Xq="MenuGroup",b0=p.forwardRef((s,t)=>{const{__scopeMenu:n,...r}=s;return e.jsx(lt.div,{role:"group",...r,ref:t})});b0.displayName=Xq;var Zq="MenuLabel",b4=p.forwardRef((s,t)=>{const{__scopeMenu:n,...r}=s;return e.jsx(lt.div,{...r,ref:t})});b4.displayName=Zq;var Om="MenuItem",Ij="menu.itemSelect",Sh=p.forwardRef((s,t)=>{const{disabled:n=!1,onSelect:r,...o}=s,l=p.useRef(null),d=_d(Om,s.__scopeMenu),u=v0(Om,s.__scopeMenu),h=qt(t,l),f=p.useRef(!1),v=()=>{const x=l.current;if(!n&&x){const g=new CustomEvent(Ij,{bubbles:!0,cancelable:!0});x.addEventListener(Ij,j=>r?.(j),{once:!0}),og(x,g),g.defaultPrevented?f.current=!1:d.onClose()}};return e.jsx(j4,{...o,ref:h,disabled:n,onClick:Me(s.onClick,v),onPointerDown:x=>{s.onPointerDown?.(x),f.current=!0},onPointerUp:Me(s.onPointerUp,x=>{f.current||x.currentTarget?.click()}),onKeyDown:Me(s.onKeyDown,x=>{const g=u.searchRef.current!=="";n||g&&x.key===" "||Vx.includes(x.key)&&(x.currentTarget.click(),x.preventDefault())})})});Sh.displayName=Om;var j4=p.forwardRef((s,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...l}=s,d=v0(Om,n),u=p4(n),h=p.useRef(null),f=qt(t,h),[v,x]=p.useState(!1),[g,j]=p.useState("");return p.useEffect(()=>{const N=h.current;N&&j((N.textContent??"").trim())},[l.children]),e.jsx(gd.ItemSlot,{scope:n,disabled:r,textValue:o??g,children:e.jsx(X5,{asChild:!0,...u,focusable:!r,children:e.jsx(lt.div,{role:"menuitem","data-highlighted":v?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...l,ref:f,onPointerMove:Me(s.onPointerMove,vd(N=>{r?d.onItemLeave(N):(d.onItemEnter(N),N.defaultPrevented||N.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Me(s.onPointerLeave,vd(N=>d.onItemLeave(N))),onFocus:Me(s.onFocus,()=>x(!0)),onBlur:Me(s.onBlur,()=>x(!1))})})})}),Jq="MenuCheckboxItem",w4=p.forwardRef((s,t)=>{const{checked:n=!1,onCheckedChange:r,...o}=s;return e.jsx(E4,{scope:s.__scopeMenu,checked:n,children:e.jsx(Sh,{role:"menuitemcheckbox","aria-checked":Lm(n)?"mixed":n,...o,ref:t,"data-state":w0(n),onSelect:Me(o.onSelect,()=>r?.(Lm(n)?!0:!n),{checkForDefaultPrevented:!1})})})});w4.displayName=Jq;var N4="MenuRadioGroup",[eF,tF]=zo(N4,{value:void 0,onValueChange:()=>{}}),k4=p.forwardRef((s,t)=>{const{value:n,onValueChange:r,...o}=s,l=an(r);return e.jsx(eF,{scope:s.__scopeMenu,value:n,onValueChange:l,children:e.jsx(b0,{...o,ref:t})})});k4.displayName=N4;var C4="MenuRadioItem",S4=p.forwardRef((s,t)=>{const{value:n,...r}=s,o=tF(C4,s.__scopeMenu),l=n===o.value;return e.jsx(E4,{scope:s.__scopeMenu,checked:l,children:e.jsx(Sh,{role:"menuitemradio","aria-checked":l,...r,ref:t,"data-state":w0(l),onSelect:Me(r.onSelect,()=>o.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});S4.displayName=C4;var j0="MenuItemIndicator",[E4,sF]=zo(j0,{checked:!1}),T4=p.forwardRef((s,t)=>{const{__scopeMenu:n,forceMount:r,...o}=s,l=sF(j0,n);return e.jsx(ea,{present:r||Lm(l.checked)||l.checked===!0,children:e.jsx(lt.span,{...o,ref:t,"data-state":w0(l.checked)})})});T4.displayName=j0;var nF="MenuSeparator",A4=p.forwardRef((s,t)=>{const{__scopeMenu:n,...r}=s;return e.jsx(lt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});A4.displayName=nF;var rF="MenuArrow",P4=p.forwardRef((s,t)=>{const{__scopeMenu:n,...r}=s,o=Ch(n);return e.jsx(Og,{...o,...r,ref:t})});P4.displayName=rF;var aF="MenuSub",[Oz,R4]=zo(aF),Qc="MenuSubTrigger",_4=p.forwardRef((s,t)=>{const n=Uo(Qc,s.__scopeMenu),r=_d(Qc,s.__scopeMenu),o=R4(Qc,s.__scopeMenu),l=v0(Qc,s.__scopeMenu),d=p.useRef(null),{pointerGraceTimerRef:u,onPointerGraceIntentChange:h}=l,f={__scopeMenu:s.__scopeMenu},v=p.useCallback(()=>{d.current&&window.clearTimeout(d.current),d.current=null},[]);return p.useEffect(()=>v,[v]),p.useEffect(()=>{const x=u.current;return()=>{window.clearTimeout(x),h(null)}},[u,h]),e.jsx(x0,{asChild:!0,...f,children:e.jsx(j4,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":L4(n.open),...s,ref:bd(t,o.onTriggerChange),onClick:x=>{s.onClick?.(x),!(s.disabled||x.defaultPrevented)&&(x.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Me(s.onPointerMove,vd(x=>{l.onItemEnter(x),!x.defaultPrevented&&!s.disabled&&!n.open&&!d.current&&(l.onPointerGraceIntentChange(null),d.current=window.setTimeout(()=>{n.onOpenChange(!0),v()},100))})),onPointerLeave:Me(s.onPointerLeave,vd(x=>{v();const g=n.content?.getBoundingClientRect();if(g){const j=n.content?.dataset.side,N=j==="right",b=N?-5:5,k=g[N?"left":"right"],E=g[N?"right":"left"];l.onPointerGraceIntentChange({area:[{x:x.clientX+b,y:x.clientY},{x:k,y:g.top},{x:E,y:g.top},{x:E,y:g.bottom},{x:k,y:g.bottom}],side:j}),window.clearTimeout(u.current),u.current=window.setTimeout(()=>l.onPointerGraceIntentChange(null),300)}else{if(l.onTriggerLeave(x),x.defaultPrevented)return;l.onPointerGraceIntentChange(null)}})),onKeyDown:Me(s.onKeyDown,x=>{const g=l.searchRef.current!=="";s.disabled||g&&x.key===" "||qq[r.dir].includes(x.key)&&(n.onOpenChange(!0),n.content?.focus(),x.preventDefault())})})})});_4.displayName=Qc;var I4="MenuSubContent",O4=p.forwardRef((s,t)=>{const n=g4(Cr,s.__scopeMenu),{forceMount:r=n.forceMount,...o}=s,l=Uo(Cr,s.__scopeMenu),d=_d(Cr,s.__scopeMenu),u=R4(I4,s.__scopeMenu),h=p.useRef(null),f=qt(t,h);return e.jsx(gd.Provider,{scope:s.__scopeMenu,children:e.jsx(ea,{present:r||l.open,children:e.jsx(gd.Slot,{scope:s.__scopeMenu,children:e.jsx(y0,{id:u.contentId,"aria-labelledby":u.triggerId,...o,ref:f,align:"start",side:d.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:v=>{d.isUsingKeyboardRef.current&&h.current?.focus(),v.preventDefault()},onCloseAutoFocus:v=>v.preventDefault(),onFocusOutside:Me(s.onFocusOutside,v=>{v.target!==u.trigger&&l.onOpenChange(!1)}),onEscapeKeyDown:Me(s.onEscapeKeyDown,v=>{d.onClose(),v.preventDefault()}),onKeyDown:Me(s.onKeyDown,v=>{const x=v.currentTarget.contains(v.target),g=Fq[d.dir].includes(v.key);x&&g&&(l.onOpenChange(!1),u.trigger?.focus(),v.preventDefault())})})})})})});O4.displayName=I4;function L4(s){return s?"open":"closed"}function Lm(s){return s==="indeterminate"}function w0(s){return Lm(s)?"indeterminate":s?"checked":"unchecked"}function iF(s){const t=document.activeElement;for(const n of s)if(n===t||(n.focus(),document.activeElement!==t))return}function oF(s,t){return s.map((n,r)=>s[(t+r)%s.length])}function lF(s,t,n){const o=t.length>1&&Array.from(t).every(f=>f===t[0])?t[0]:t,l=n?s.indexOf(n):-1;let d=oF(s,Math.max(l,0));o.length===1&&(d=d.filter(f=>f!==n));const h=d.find(f=>f.toLowerCase().startsWith(o.toLowerCase()));return h!==n?h:void 0}function cF(s,t){const{x:n,y:r}=s;let o=!1;for(let l=0,d=t.length-1;l<t.length;d=l++){const u=t[l].x,h=t[l].y,f=t[d].x,v=t[d].y;h>r!=v>r&&n<(f-u)*(r-h)/(v-h)+u&&(o=!o)}return o}function dF(s,t){if(!t)return!1;const n={x:s.clientX,y:s.clientY};return cF(n,t)}function vd(s){return t=>t.pointerType==="mouse"?s(t):void 0}var uF=x4,mF=x0,hF=v4,fF=y4,pF=b0,xF=b4,gF=Sh,vF=w4,yF=k4,bF=S4,jF=T4,wF=A4,NF=P4,kF=_4,CF=O4,N0="DropdownMenu",[SF]=Jr(N0,[f4]),Tn=f4(),[EF,M4]=SF(N0),D4=s=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:o,defaultOpen:l,onOpenChange:d,modal:u=!0}=s,h=Tn(t),f=p.useRef(null),[v=!1,x]=Ka({prop:o,defaultProp:l,onChange:d});return e.jsx(EF,{scope:t,triggerId:Kr(),triggerRef:f,contentId:Kr(),open:v,onOpenChange:x,onOpenToggle:p.useCallback(()=>x(g=>!g),[x]),modal:u,children:e.jsx(uF,{...h,open:v,onOpenChange:x,dir:r,modal:u,children:n})})};D4.displayName=N0;var $4="DropdownMenuTrigger",q4=p.forwardRef((s,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...o}=s,l=M4($4,n),d=Tn(n);return e.jsx(mF,{asChild:!0,...d,children:e.jsx(lt.button,{type:"button",id:l.triggerId,"aria-haspopup":"menu","aria-expanded":l.open,"aria-controls":l.open?l.contentId:void 0,"data-state":l.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:bd(t,l.triggerRef),onPointerDown:Me(s.onPointerDown,u=>{!r&&u.button===0&&u.ctrlKey===!1&&(l.onOpenToggle(),l.open||u.preventDefault())}),onKeyDown:Me(s.onKeyDown,u=>{r||(["Enter"," "].includes(u.key)&&l.onOpenToggle(),u.key==="ArrowDown"&&l.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(u.key)&&u.preventDefault())})})})});q4.displayName=$4;var TF="DropdownMenuPortal",F4=s=>{const{__scopeDropdownMenu:t,...n}=s,r=Tn(t);return e.jsx(hF,{...r,...n})};F4.displayName=TF;var z4="DropdownMenuContent",U4=p.forwardRef((s,t)=>{const{__scopeDropdownMenu:n,...r}=s,o=M4(z4,n),l=Tn(n),d=p.useRef(!1);return e.jsx(fF,{id:o.contentId,"aria-labelledby":o.triggerId,...l,...r,ref:t,onCloseAutoFocus:Me(s.onCloseAutoFocus,u=>{d.current||o.triggerRef.current?.focus(),d.current=!1,u.preventDefault()}),onInteractOutside:Me(s.onInteractOutside,u=>{const h=u.detail.originalEvent,f=h.button===0&&h.ctrlKey===!0,v=h.button===2||f;(!o.modal||v)&&(d.current=!0)}),style:{...s.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});U4.displayName=z4;var AF="DropdownMenuGroup",PF=p.forwardRef((s,t)=>{const{__scopeDropdownMenu:n,...r}=s,o=Tn(n);return e.jsx(pF,{...o,...r,ref:t})});PF.displayName=AF;var RF="DropdownMenuLabel",B4=p.forwardRef((s,t)=>{const{__scopeDropdownMenu:n,...r}=s,o=Tn(n);return e.jsx(xF,{...o,...r,ref:t})});B4.displayName=RF;var _F="DropdownMenuItem",H4=p.forwardRef((s,t)=>{const{__scopeDropdownMenu:n,...r}=s,o=Tn(n);return e.jsx(gF,{...o,...r,ref:t})});H4.displayName=_F;var IF="DropdownMenuCheckboxItem",K4=p.forwardRef((s,t)=>{const{__scopeDropdownMenu:n,...r}=s,o=Tn(n);return e.jsx(vF,{...o,...r,ref:t})});K4.displayName=IF;var OF="DropdownMenuRadioGroup",LF=p.forwardRef((s,t)=>{const{__scopeDropdownMenu:n,...r}=s,o=Tn(n);return e.jsx(yF,{...o,...r,ref:t})});LF.displayName=OF;var MF="DropdownMenuRadioItem",W4=p.forwardRef((s,t)=>{const{__scopeDropdownMenu:n,...r}=s,o=Tn(n);return e.jsx(bF,{...o,...r,ref:t})});W4.displayName=MF;var DF="DropdownMenuItemIndicator",V4=p.forwardRef((s,t)=>{const{__scopeDropdownMenu:n,...r}=s,o=Tn(n);return e.jsx(jF,{...o,...r,ref:t})});V4.displayName=DF;var $F="DropdownMenuSeparator",G4=p.forwardRef((s,t)=>{const{__scopeDropdownMenu:n,...r}=s,o=Tn(n);return e.jsx(wF,{...o,...r,ref:t})});G4.displayName=$F;var qF="DropdownMenuArrow",FF=p.forwardRef((s,t)=>{const{__scopeDropdownMenu:n,...r}=s,o=Tn(n);return e.jsx(NF,{...o,...r,ref:t})});FF.displayName=qF;var zF="DropdownMenuSubTrigger",Q4=p.forwardRef((s,t)=>{const{__scopeDropdownMenu:n,...r}=s,o=Tn(n);return e.jsx(kF,{...o,...r,ref:t})});Q4.displayName=zF;var UF="DropdownMenuSubContent",Y4=p.forwardRef((s,t)=>{const{__scopeDropdownMenu:n,...r}=s,o=Tn(n);return e.jsx(CF,{...o,...r,ref:t,style:{...s.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Y4.displayName=UF;var BF=D4,HF=q4,KF=F4,X4=U4,Z4=B4,J4=H4,eC=K4,tC=W4,sC=V4,nC=G4,rC=Q4,aC=Y4;const k0=BF,C0=HF,WF=p.forwardRef(({className:s,inset:t,children:n,...r},o)=>e.jsxs(rC,{ref:o,className:ze("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",s),...r,children:[n,e.jsx(Bm,{className:"ml-auto"})]}));WF.displayName=rC.displayName;const VF=p.forwardRef(({className:s,...t},n)=>e.jsx(aC,{ref:n,className:ze("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",s),...t}));VF.displayName=aC.displayName;const Eh=p.forwardRef(({className:s,sideOffset:t=4,...n},r)=>e.jsx(KF,{children:e.jsx(X4,{ref:r,sideOffset:t,className:ze("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",s),...n})}));Eh.displayName=X4.displayName;const xo=p.forwardRef(({className:s,inset:t,...n},r)=>e.jsx(J4,{ref:r,className:ze("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",s),...n}));xo.displayName=J4.displayName;const GF=p.forwardRef(({className:s,children:t,checked:n,...r},o)=>e.jsxs(eC,{ref:o,className:ze("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:n,...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(sC,{children:e.jsx(is,{className:"h-4 w-4"})})}),t]}));GF.displayName=eC.displayName;const QF=p.forwardRef(({className:s,children:t,...n},r)=>e.jsxs(tC,{ref:r,className:ze("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...n,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(sC,{children:e.jsx(mg,{className:"h-2 w-2 fill-current"})})}),t]}));QF.displayName=tC.displayName;const YF=p.forwardRef(({className:s,inset:t,...n},r)=>e.jsx(Z4,{ref:r,className:ze("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",s),...n}));YF.displayName=Z4.displayName;const XF=p.forwardRef(({className:s,...t},n)=>e.jsx(nC,{ref:n,className:ze("-mx-1 my-1 h-px bg-muted",s),...t}));XF.displayName=nC.displayName;function ZF(s){const{data:t,isLoading:n,refetch:r}=_e({queryKey:["/api/community/auth/me"],queryFn:ag({on401:"returnNull"}),enabled:!s,staleTime:6e4}),o=!!t,l=we({mutationFn:async h=>(await je("POST","/api/community/auth/login",h)).json(),onSuccess:()=>{r()}}),d=we({mutationFn:async h=>(await je("POST","/api/community/auth/signup",h)).json(),onSuccess:()=>{r()}}),u=we({mutationFn:async()=>{await je("POST","/api/community/auth/logout")},onSuccess:()=>{xe.setQueryData(["/api/community/auth/me"],null),xe.invalidateQueries({queryKey:["/api/community/user"]})}});return{user:s?null:t??null,isLoading:s?!1:n,isLoggedIn:s?!1:o,login:l,signup:d,logout:u,refetch:r}}function Id(s){const t=new Date,n=new Date(s),r=t.getTime()-n.getTime(),o=Math.floor(r/1e3),l=Math.floor(o/60),d=Math.floor(l/60),u=Math.floor(d/24),h=Math.floor(u/7),f=Math.floor(u/30),v=Math.floor(u/365);return o<60?"just now":l<60?`${l}m ago`:d<24?`${d}h ago`:u<7?`${u}d ago`:h<5?`${h}w ago`:f<12?`${f}mo ago`:`${v}y ago`}function Po(s){return s.split(" ").map(t=>t[0]).join("").toUpperCase().slice(0,2)}const Oj=["from-blue-500 to-indigo-600","from-emerald-500 to-teal-600","from-purple-500 to-violet-600","from-orange-500 to-red-500","from-pink-500 to-rose-600","from-cyan-500 to-blue-500","from-amber-500 to-orange-600","from-indigo-500 to-purple-600"];function Ro(s){let t=0;for(let n=0;n<s.length;n++)t=s.charCodeAt(n)+((t<<5)-t);return Oj[Math.abs(t)%Oj.length]}const JF=/\.(jpg|jpeg|png|gif|webp|svg|bmp)(\?.*)?$/i;function ez(s){const t=/(?<url>https?:\/\/[^\s<]+)|@(?<handle>\w+)/g,n=[];let r=0,o;for(;(o=t.exec(s))!==null;){if(o.index>r&&n.push({type:"text",value:s.slice(r,o.index)}),o.groups?.url){const l=o.groups.url.replace(/[.,;:!?)]+$/,"");JF.test(l)?n.push({type:"image",value:l}):n.push({type:"link",value:l}),t.lastIndex=o.index+l.length}else o.groups?.handle&&n.push({type:"mention",value:o.groups.handle});r=t.lastIndex}return r<s.length&&n.push({type:"text",value:s.slice(r)}),n.length===0?s:e.jsx("span",{children:n.map((l,d)=>l.type==="mention"?e.jsxs("span",{className:"text-primary font-semibold cursor-pointer hover:underline","data-testid":`mention-${l.value}`,children:["@",l.value]},d):l.type==="link"?e.jsxs("a",{href:l.value,target:"_blank",rel:"noopener noreferrer",className:"text-primary underline underline-offset-2 hover:text-primary/80 inline-flex items-center gap-1 break-all","data-testid":`link-${d}`,children:[l.value,e.jsx(_s,{className:"w-3 h-3 inline shrink-0"})]},d):l.type==="image"?e.jsx("span",{className:"block my-2",children:e.jsx("img",{src:l.value,alt:"Shared image",className:"rounded-lg max-h-[400px] max-w-full object-contain border",loading:"lazy",onError:u=>{const h=u.currentTarget;h.style.display="none";const f=document.createElement("a");f.href=l.value,f.target="_blank",f.rel="noopener noreferrer",f.textContent=l.value,f.className="text-primary underline",h.parentNode?.appendChild(f)},"data-testid":`inline-image-${d}`})},d):e.jsx("span",{children:l.value},d))})}function iC(s){return ez(s)}function oC({value:s,onChange:t,placeholder:n,className:r,onKeyDown:o,textareaRef:l,onFocus:d,onBlur:u,"data-testid":h}){const[f,v]=p.useState(""),[x,g]=p.useState(!1),[j,N]=p.useState({top:0,left:0}),[b,k]=p.useState(0),E=p.useRef(null),S=p.useRef(null),T=l||S,{data:P=[]}=_e({queryKey:["/api/community/users/search",f],queryFn:async()=>{if(!f||f.length<1)return[];const Q=await fetch(`/api/community/users/search?q=${encodeURIComponent(f)}`,{credentials:"include"});return Q.ok?Q.json():[]},enabled:x&&f.length>=1,staleTime:5e3}),H=Q=>{const G=Q.target.value;t(G);const ue=Q.target.selectionStart,Y=G.slice(0,ue).match(/@(\w*)$/);if(Y){g(!0),v(Y[1]),k(0);const z=T.current;z&&N({top:z.offsetHeight+4,left:0})}else g(!1),v("")},re=Q=>{const G=T.current;if(!G)return;const ue=G.selectionStart,Y=s.slice(0,ue).match(/@(\w*)$/);if(Y){const z=Q.replace(/\s+/g,""),J=ue-Y[0].length,X=s.slice(0,J)+`@${z} `+s.slice(ue);t(X)}g(!1),v(""),setTimeout(()=>G.focus(),0)},B=Q=>{if(x&&P.length>0){if(Q.key==="ArrowDown"){Q.preventDefault(),k(G=>(G+1)%P.length);return}if(Q.key==="ArrowUp"){Q.preventDefault(),k(G=>(G-1+P.length)%P.length);return}if(Q.key==="Enter"||Q.key==="Tab"){Q.preventDefault(),re(P[b].displayName);return}if(Q.key==="Escape"){g(!1);return}}o?.(Q)};return e.jsxs("div",{ref:E,className:"relative",children:[e.jsx(fs,{ref:T,value:s,onChange:H,onKeyDown:B,onFocus:d,onBlur:Q=>{setTimeout(()=>g(!1),200),u?.()},placeholder:n,className:r,"data-testid":h}),x&&P.length>0&&e.jsx("div",{className:"absolute z-50 w-64 bg-card border rounded-lg shadow-lg overflow-hidden",style:{top:j.top,left:j.left},"data-testid":"mention-dropdown",children:P.map((Q,G)=>e.jsxs("button",{className:`w-full flex items-center gap-2 px-3 py-2 text-sm text-left hover:bg-muted/50 transition-colors ${G===b?"bg-muted/50":""}`,onMouseDown:ue=>{ue.preventDefault(),re(Q.displayName)},"data-testid":`mention-option-${Q.id}`,children:[e.jsxs(Yr,{className:"h-6 w-6",children:[Q.avatarUrl&&e.jsx(ja,{src:Q.avatarUrl}),e.jsx(Xr,{className:`bg-gradient-to-br ${Ro(Q.displayName)} text-white text-[8px] font-bold`,children:Po(Q.displayName)})]}),e.jsx("span",{className:"font-medium truncate",children:Q.displayName})]},Q.id))})]})}function tz(){return e.jsx("div",{className:"space-y-5",children:Array.from({length:3}).map((s,t)=>e.jsxs("div",{className:"bg-card rounded-xl border p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[e.jsx(ye,{className:"h-11 w-11 rounded-full"}),e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx(ye,{className:"h-4 w-36"}),e.jsx(ye,{className:"h-3 w-20"})]})]}),e.jsx(ye,{className:"h-4 w-full mb-2"}),e.jsx(ye,{className:"h-4 w-4/5 mb-2"}),e.jsx(ye,{className:"h-4 w-2/3 mb-5"}),e.jsx(Di,{className:"mb-4"}),e.jsxs("div",{className:"flex gap-6",children:[e.jsx(ye,{className:"h-8 w-20"}),e.jsx(ye,{className:"h-8 w-20"}),e.jsx(ye,{className:"h-8 w-24"}),e.jsx(ye,{className:"h-8 w-20"})]})]},t))})}function sz({onPost:s,isPending:t,displayName:n,avatarUrl:r}){const[o,l]=p.useState(""),[d,u]=p.useState(""),[h,f]=p.useState(""),[v,x]=p.useState(!1),[g,j]=p.useState(!1),[N,b]=p.useState(!1),k=p.useRef(null),E=p.useRef(null),S=()=>{o.trim()&&(s({title:d.trim()||void 0,body:o.trim(),imageUrl:h.trim()||void 0}),l(""),u(""),f(""),x(!1),j(!1),b(!1))};return e.jsx("div",{ref:E,className:"bg-card rounded-xl border p-5","data-testid":"card-post-composer",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(Yr,{className:"h-11 w-11 shrink-0 ring-2 ring-background shadow-sm",children:[r&&e.jsx(ja,{src:r,alt:n}),e.jsx(Xr,{className:`bg-gradient-to-br ${Ro(n)} text-white text-sm font-bold`,children:Po(n)})]}),e.jsxs("div",{className:"flex-1 space-y-3",children:[v&&e.jsx(Oe,{placeholder:"Add a title for your post...",value:d,onChange:T=>u(T.target.value),className:"text-base font-medium border-0 bg-muted/40 dark:bg-muted/20 focus-visible:ring-1 focus-visible:ring-primary/30","data-testid":"input-post-title"}),e.jsx("div",{className:`relative rounded-lg transition-all duration-200 ${N?"bg-muted/30 dark:bg-muted/15 ring-1 ring-primary/20":"bg-muted/40 dark:bg-muted/20"}`,children:e.jsx(oC,{textareaRef:k,placeholder:"Share something with the community... Use @ to mention someone",value:o,onChange:l,onFocus:()=>b(!0),onBlur:()=>{setTimeout(()=>{!o&&!E.current?.contains(document.activeElement)&&b(!1)},150)},className:`resize-none border-0 bg-transparent text-base focus-visible:ring-0 transition-all duration-200 ${N?"min-h-[120px]":"min-h-[52px]"}`,"data-testid":"textarea-post-body"})}),g&&e.jsx(Oe,{placeholder:"Paste an image URL...",value:h,onChange:T=>f(T.target.value),className:"border-0 bg-muted/40 dark:bg-muted/20 focus-visible:ring-1 focus-visible:ring-primary/30","data-testid":"input-post-image"}),(N||o)&&e.jsxs("div",{className:"flex items-center justify-between gap-2 pt-1",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsxs(L,{variant:"ghost",size:"sm",onClick:()=>x(!v),className:`gap-1.5 text-xs toggle-elevate ${v?"toggle-elevated text-primary":"text-muted-foreground"}`,"data-testid":"button-toggle-title",children:[e.jsx(wT,{className:"w-4 h-4"}),"Title"]}),e.jsxs(L,{variant:"ghost",size:"sm",onClick:()=>j(!g),className:`gap-1.5 text-xs toggle-elevate ${g?"toggle-elevated text-primary":"text-muted-foreground"}`,"data-testid":"button-toggle-image",children:[e.jsx(Fi,{className:"w-4 h-4"}),"Image"]})]}),e.jsxs(L,{onClick:S,disabled:!o.trim()||t,size:"sm",className:"gap-1.5 px-5","data-testid":"button-submit-post",children:[e.jsx(os,{className:"w-3.5 h-3.5"}),"Post"]})]})]})]})})}function nz({postId:s,isAdmin:t,displayName:n,authorType:r,authorAvatar:o}){const[l,d]=p.useState(""),{data:u=[],isLoading:h}=_e({queryKey:["/api/community/posts",s,"comments"]}),f=we({mutationFn:async g=>(await je("POST",`/api/community/posts/${s}/comments`,g)).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/community/posts",s,"comments"]}),xe.invalidateQueries({queryKey:["/api/community/posts"]}),d("")}}),v=we({mutationFn:async g=>{await je("DELETE",`/api/community/comments/${g}`)},onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/community/posts",s,"comments"]}),xe.invalidateQueries({queryKey:["/api/community/posts"]})}}),x=()=>{!l.trim()||!n||f.mutate({authorName:n,authorAvatar:o||void 0,authorType:r,body:l.trim()})};return e.jsxs("div",{className:"bg-muted/20 dark:bg-muted/10 rounded-lg mx-5 mb-5 p-4 space-y-3","data-testid":`comment-section-${s}`,children:[h?e.jsxs("div",{className:"space-y-2",children:[e.jsx(ye,{className:"h-10 w-full"}),e.jsx(ye,{className:"h-10 w-full"})]}):u.length>0?e.jsx("div",{className:"space-y-3 max-h-[320px] overflow-y-auto pr-1",children:u.map(g=>e.jsxs("div",{className:"flex gap-2.5 group","data-testid":`comment-${g.id}`,children:[e.jsxs(Yr,{className:"h-8 w-8 shrink-0 ring-1 ring-background",children:[g.authorAvatar&&e.jsx(ja,{src:g.authorAvatar,alt:g.authorName}),e.jsx(Xr,{className:`bg-gradient-to-br ${Ro(g.authorName)} text-white text-[10px] font-bold`,children:Po(g.authorName)})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"bg-card rounded-xl px-3.5 py-2.5 border border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-sm font-semibold","data-testid":`text-comment-author-${g.id}`,children:g.authorName}),g.authorType==="admin"&&e.jsx(Ce,{variant:"secondary",className:"text-[10px] py-0 h-4 bg-primary/10 text-primary border-0 font-semibold",children:"Admin"})]}),e.jsx("p",{className:"text-sm mt-0.5 text-foreground/90","data-testid":`text-comment-body-${g.id}`,children:iC(g.body)})]}),e.jsx("span",{className:"text-[11px] text-muted-foreground ml-3.5 mt-0.5 inline-block",children:Id(g.createdAt)})]}),t&&e.jsx(L,{variant:"ghost",size:"icon",className:"invisible group-hover:visible shrink-0 h-7 w-7 text-destructive/60",onClick:()=>v.mutate(g.id),"data-testid":`button-delete-comment-${g.id}`,children:e.jsx(ls,{className:"w-3.5 h-3.5"})})]},g.id))}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-3",children:"Be the first to comment"}),e.jsxs("div",{className:"flex gap-2.5 items-center pt-1",children:[e.jsxs(Yr,{className:"h-8 w-8 shrink-0 ring-1 ring-background",children:[o&&e.jsx(ja,{src:o,alt:n||"User"}),e.jsx(Xr,{className:`bg-gradient-to-br ${n?Ro(n):"from-gray-400 to-gray-500"} text-white text-[10px] font-bold`,children:n?Po(n):"?"})]}),e.jsxs("div",{className:"flex-1 flex gap-2 items-center bg-card rounded-full border border-border/50 pl-4 pr-1 py-1",children:[e.jsx(oC,{placeholder:"Write a comment... Use @ to mention",value:l,onChange:d,onKeyDown:g=>{g.key==="Enter"&&!g.shiftKey&&(g.preventDefault(),x())},className:"flex-1 border-0 bg-transparent h-8 min-h-[32px] text-sm focus-visible:ring-0 px-0 resize-none py-1","data-testid":`input-comment-${s}`}),e.jsx(L,{variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0 rounded-full",onClick:x,disabled:!l.trim()||f.isPending,"data-testid":`button-send-comment-${s}`,children:e.jsx(os,{className:"w-3.5 h-3.5"})})]})]})]})}const Gx=[{type:"like",emoji:"",label:"Like",color:"text-blue-600 dark:text-blue-400",bg:"bg-blue-500"},{type:"heart",emoji:"",label:"Love",color:"text-red-500 dark:text-red-400",bg:"bg-red-500"},{type:"haha",emoji:"",label:"Haha",color:"text-amber-500 dark:text-amber-400",bg:"bg-amber-500"},{type:"angry",emoji:"",label:"Angry",color:"text-orange-600 dark:text-orange-400",bg:"bg-orange-500"}];function rz({counts:s,commentsCount:t}){const n=s.like+s.heart+s.haha+s.angry;if(n===0&&t===0)return null;const r=Gx.filter(o=>s[o.type]>0);return e.jsxs("div",{className:"flex items-center justify-between px-5 py-2 text-xs text-muted-foreground","data-testid":"reaction-summary",children:[e.jsx("div",{className:"flex items-center gap-1.5",children:n>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex -space-x-0.5",children:r.map(o=>e.jsx("span",{className:"text-base leading-none",title:`${s[o.type]} ${o.label}`,children:o.emoji},o.type))}),e.jsx("span",{children:n})]})}),t>0&&e.jsxs("span",{children:[t," comment",t!==1?"s":""]})]})}function az({post:s,isAdmin:t,displayName:n,authorType:r,userAvatar:o,onNeedName:l,onDelete:d,onPin:u,onEdit:h}){const{toast:f}=mt(),[v,x]=p.useState(!1),[g,j]=p.useState(!1),[N,b]=p.useState(s.userReactions?.like?"like":s.userReactions?.heart?"heart":s.userReactions?.haha?"haha":s.userReactions?.angry?"angry":null),[k,E]=p.useState({like:s.likesCount,heart:s.heartsCount,haha:s.hahaCount||0,angry:s.angryCount||0}),S=p.useRef(null),T=p.useRef(null);p.useEffect(()=>{const _=s.userReactions?.like?"like":s.userReactions?.heart?"heart":s.userReactions?.haha?"haha":s.userReactions?.angry?"angry":null;b(_),E({like:s.likesCount,heart:s.heartsCount,haha:s.hahaCount||0,angry:s.angryCount||0})},[s]);const P=we({mutationFn:async _=>{await je("POST",`/api/community/posts/${s.id}/reactions`,{reactionType:_,actorName:n,actorType:r})},onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/community/posts"]})}}),H=_=>{if(!n){l();return}j(!1),N===_?(E(Y=>({...Y,[_]:Math.max(0,Y[_]-1)})),b(null)):(N&&(E(Y=>({...Y,[N]:Math.max(0,Y[N]-1)})),P.mutate(N)),E(Y=>({...Y,[_]:Y[_]+1})),b(_)),P.mutate(_)},re=()=>{H(N||"like")},B=()=>{S.current&&clearTimeout(S.current),S.current=setTimeout(()=>j(!0),400)},Q=()=>{S.current&&clearTimeout(S.current),S.current=setTimeout(()=>j(!1),500)},G=()=>{const _=`${window.location.origin}/community#post-${s.id}`;navigator.clipboard.writeText(_),f({title:"Link copied to clipboard"})},ue=()=>{if(!n&&!v){l();return}x(!v)};return e.jsxs("div",{className:"bg-card rounded-xl border overflow-visible",id:`post-${s.id}`,"data-testid":`card-post-${s.id}`,children:[s.isPinned&&e.jsxs("div",{className:"flex items-center gap-1.5 text-primary px-5 pt-3 pb-0","data-testid":`pin-indicator-${s.id}`,children:[e.jsx(lx,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"text-xs font-semibold",children:"Pinned Post"})]}),e.jsxs("div",{className:"p-5 pb-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(Yr,{className:"h-11 w-11 ring-2 ring-background shadow-sm",children:[s.authorAvatar&&e.jsx(ja,{src:s.authorAvatar,alt:s.authorName}),e.jsx(Xr,{className:`bg-gradient-to-br ${Ro(s.authorName)} text-white text-sm font-bold`,children:Po(s.authorName)})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"font-semibold text-[15px]","data-testid":`text-post-author-${s.id}`,children:s.authorName}),(s.authorRole==="admin"||s.authorType==="admin")&&e.jsx(Ce,{variant:"secondary",className:"text-[10px] py-0 h-4 bg-primary/10 text-primary border-0 font-semibold",children:"Admin"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Wt,{className:"w-3 h-3 text-muted-foreground"}),e.jsx("span",{className:"text-xs text-muted-foreground","data-testid":`text-post-time-${s.id}`,children:Id(s.createdAt)}),e.jsx(nn,{className:"w-3 h-3 text-muted-foreground ml-1"})]})]})]}),(t||s.authorName===n)&&e.jsxs(k0,{children:[e.jsx(C0,{asChild:!0,children:e.jsx(L,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground","data-testid":`button-post-menu-${s.id}`,children:e.jsx(tT,{className:"w-4 h-4"})})}),e.jsxs(Eh,{align:"end",className:"w-40",children:[(t||s.authorName===n)&&e.jsxs(xo,{onClick:()=>h(s),"data-testid":`menu-edit-post-${s.id}`,children:[e.jsx(kr,{className:"w-4 h-4 mr-2"}),"Edit"]}),t&&e.jsxs(xo,{onClick:()=>u(s.id,!s.isPinned),"data-testid":`menu-pin-post-${s.id}`,children:[e.jsx(lx,{className:"w-4 h-4 mr-2"}),s.isPinned?"Unpin":"Pin"]}),(t||s.authorName===n)&&e.jsxs(xo,{onClick:()=>d(s.id),className:"text-destructive focus:text-destructive","data-testid":`menu-delete-post-${s.id}`,children:[e.jsx(ls,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]}),e.jsxs("div",{className:"mt-4",children:[s.title&&e.jsx("h3",{className:"font-semibold text-lg leading-snug mb-1.5","data-testid":`text-post-title-${s.id}`,children:s.title}),e.jsx("p",{className:"text-[15px] leading-relaxed whitespace-pre-wrap text-foreground/90","data-testid":`text-post-body-${s.id}`,children:iC(s.body)})]}),s.imageUrl&&e.jsx("div",{className:"mt-4 -mx-5",children:e.jsx("img",{src:s.imageUrl,alt:s.title||"Post image",className:"w-full object-cover max-h-[420px]","data-testid":`img-post-${s.id}`})})]}),e.jsx(rz,{counts:k,commentsCount:s.commentsCount}),e.jsx("div",{className:"border-t mx-5"}),e.jsxs("div",{className:"flex items-center justify-around px-2 py-1",children:[e.jsxs("div",{className:"relative flex-1",onMouseEnter:B,onMouseLeave:Q,ref:T,children:[g&&e.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 bg-card rounded-full shadow-xl border px-2 py-1.5 flex items-center gap-0.5 z-50 animate-in fade-in slide-in-from-bottom-2 duration-200","data-testid":`reaction-picker-${s.id}`,children:Gx.map(_=>e.jsxs("button",{onClick:()=>H(_.type),className:`group relative text-2xl hover:scale-125 transition-transform duration-150 px-1.5 py-0.5 rounded-full ${N===_.type?"bg-muted scale-110":""}`,"data-testid":`reaction-emoji-${_.type}-${s.id}`,title:_.label,children:[_.emoji,e.jsx("span",{className:"absolute -top-8 left-1/2 -translate-x-1/2 bg-foreground text-background text-[10px] font-semibold px-2 py-0.5 rounded-md opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:_.label})]},_.type))}),(()=>{const _=N?Gx.find(Y=>Y.type===N):null;return e.jsxs(L,{variant:"ghost",size:"sm",onClick:re,className:`w-full justify-center gap-2 ${_?_.color:"text-muted-foreground"}`,"data-testid":`button-like-${s.id}`,children:[_?e.jsx("span",{className:"text-lg leading-none",children:_.emoji}):e.jsx(vg,{className:"w-[18px] h-[18px]"}),e.jsx("span",{className:"font-medium",children:_?_.label:"Like"})]})})()]}),e.jsxs(L,{variant:"ghost",size:"sm",onClick:ue,className:"flex-1 justify-center gap-2 text-muted-foreground","data-testid":`button-comment-${s.id}`,children:[e.jsx(Nd,{className:"w-[18px] h-[18px]"}),e.jsx("span",{children:"Comment"})]}),e.jsxs(L,{variant:"ghost",size:"sm",onClick:G,className:"flex-1 justify-center gap-2 text-muted-foreground","data-testid":`button-share-${s.id}`,children:[e.jsx(xg,{className:"w-[18px] h-[18px]"}),e.jsx("span",{children:"Share"})]})]}),v&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-t mx-5"}),e.jsx("div",{className:"pt-3",children:e.jsx(nz,{postId:s.id,isAdmin:t,displayName:n,authorType:r,authorAvatar:o})})]})]})}function iz({open:s,onOpenChange:t,auth:n}){const{toast:r}=mt(),[o,l]=p.useState("signin"),[d,u]=p.useState(""),[h,f]=p.useState(""),[v,x]=p.useState(""),[g,j]=p.useState(""),N=()=>{u(""),f(""),x(""),j("")},b=async()=>{j("");try{await n.login.mutateAsync({email:d,password:h}),N(),t(!1),r({title:"Signed in successfully"})}catch(E){const S=E instanceof Error?E.message:"Sign in failed";j(S.replace(/^\d+:\s*/,""))}},k=async()=>{if(j(""),h.length<6){j("Password must be at least 6 characters");return}if(!v.trim()){j("Display name is required");return}try{await n.signup.mutateAsync({email:d,password:h,displayName:v.trim()}),N(),t(!1),r({title:"Account created successfully"})}catch(E){const S=E instanceof Error?E.message:"Sign up failed";j(S.replace(/^\d+:\s*/,""))}};return e.jsx(yt,{open:s,onOpenChange:E=>{t(E),E||N()},children:e.jsxs(xt,{className:"sm:max-w-[420px]","data-testid":"dialog-auth",children:[e.jsxs(gt,{children:[e.jsx(vt,{className:"text-xl",children:"Join the Community"}),e.jsx($i,{className:"text-sm text-muted-foreground",children:"Sign in or create an account to interact with the community."})]}),e.jsxs(u4,{value:o,onValueChange:E=>{l(E),j("")},className:"mt-2",children:[e.jsxs(p0,{className:"grid w-full grid-cols-2",children:[e.jsx(Ol,{value:"signin","data-testid":"tab-signin",children:"Sign In"}),e.jsx(Ol,{value:"signup","data-testid":"tab-signup",children:"Sign Up"})]}),e.jsxs(Ll,{value:"signin",className:"space-y-3 mt-4",children:[e.jsx(Oe,{type:"email",placeholder:"Email address",value:d,onChange:E=>u(E.target.value),"data-testid":"input-signin-email"}),e.jsx(Oe,{type:"password",placeholder:"Password",value:h,onChange:E=>f(E.target.value),onKeyDown:E=>{E.key==="Enter"&&b()},"data-testid":"input-signin-password"}),g&&e.jsx("p",{className:"text-sm text-destructive","data-testid":"text-auth-error",children:g}),e.jsxs(L,{onClick:b,disabled:!d||!h||n.login.isPending,className:"w-full gap-2","data-testid":"button-signin",children:[e.jsx(hg,{className:"w-4 h-4"}),n.login.isPending?"Signing in...":"Sign In"]})]}),e.jsxs(Ll,{value:"signup",className:"space-y-3 mt-4",children:[e.jsx(Oe,{placeholder:"Display name",value:v,onChange:E=>x(E.target.value),"data-testid":"input-signup-name"}),e.jsx(Oe,{type:"email",placeholder:"Email address",value:d,onChange:E=>u(E.target.value),"data-testid":"input-signup-email"}),e.jsx(Oe,{type:"password",placeholder:"Password (min 6 characters)",value:h,onChange:E=>f(E.target.value),onKeyDown:E=>{E.key==="Enter"&&k()},"data-testid":"input-signup-password"}),g&&e.jsx("p",{className:"text-sm text-destructive","data-testid":"text-auth-error",children:g}),e.jsxs(L,{onClick:k,disabled:!d||!h||!v.trim()||n.signup.isPending,className:"w-full gap-2","data-testid":"button-signup",children:[e.jsx(gm,{className:"w-4 h-4"}),n.signup.isPending?"Creating account...":"Create Account"]})]})]})]})})}function oz(){const[s,t]=p.useState(!1),{data:n}=_e({queryKey:["/api/community/user/notifications/unread-count"],refetchInterval:15e3}),{data:r=[]}=_e({queryKey:["/api/community/user/notifications"],enabled:s}),o=we({mutationFn:async()=>{await je("POST","/api/community/user/notifications/read-all")},onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/community/user/notifications"]}),xe.invalidateQueries({queryKey:["/api/community/user/notifications/unread-count"]})}}),l=we({mutationFn:async u=>{await je("POST",`/api/community/user/notifications/${u}/read`)},onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/community/user/notifications"]}),xe.invalidateQueries({queryKey:["/api/community/user/notifications/unread-count"]})}}),d=n?.count??0;return e.jsxs(k0,{open:s,onOpenChange:t,children:[e.jsx(C0,{asChild:!0,children:e.jsxs(L,{variant:"ghost",size:"icon",className:"relative text-white/80 hover:text-white","data-testid":"button-notification-bell",children:[e.jsx(bo,{className:"w-5 h-5"}),d>0&&e.jsx("span",{className:"absolute -top-0.5 -right-0.5 min-w-[18px] h-[18px] flex items-center justify-center rounded-full bg-red-500 text-white text-[10px] font-bold px-1","data-testid":"badge-unread-count",children:d>99?"99+":d})]})}),e.jsxs(Eh,{align:"end",className:"w-80 max-h-[400px] overflow-y-auto","data-testid":"dropdown-notifications",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 px-3 py-2 border-b",children:[e.jsx("span",{className:"font-semibold text-sm",children:"Notifications"}),d>0&&e.jsx(L,{variant:"ghost",size:"sm",onClick:()=>o.mutate(),className:"text-xs h-7","data-testid":"button-mark-all-read",children:"Mark all read"})]}),r.length===0?e.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground","data-testid":"text-no-notifications",children:"No notifications yet"}):r.slice(0,20).map(u=>{const h=u.type==="mention"?WE:u.type==="comment"?Nd:u.type==="reaction"?Dw:u.type==="share"?xg:bo,f=u.type==="mention"?"text-blue-500":u.type==="comment"?"text-green-500":u.type==="reaction"?"text-pink-500":u.type==="share"?"text-purple-500":"text-muted-foreground";return e.jsxs(xo,{className:`flex items-start gap-2.5 px-3 py-2.5 cursor-pointer ${u.isRead?"":"bg-primary/5"}`,onClick:()=>{u.isRead||l.mutate(u.id)},"data-testid":`notification-${u.id}`,children:[e.jsx(h,{className:`w-4 h-4 mt-0.5 shrink-0 ${f}`}),e.jsxs("div",{className:"flex flex-col gap-0.5 min-w-0",children:[e.jsx("span",{className:`text-sm leading-tight ${u.isRead?"":"font-semibold"}`,children:u.message||u.title}),e.jsx("span",{className:"text-[11px] text-muted-foreground",children:Id(u.createdAt)})]})]},u.id)})]})]})}function lz({open:s,onOpenChange:t,prefillName:n,prefillEmail:r}){const{toast:o}=mt(),[l,d]=p.useState(n||""),[u,h]=p.useState(r||""),[f,v]=p.useState(""),[x,g]=p.useState("");p.useEffect(()=>{s&&(d(n||""),h(r||""))},[s,n,r]);const j=we({mutationFn:async()=>{await je("POST","/api/community/messages",{name:l,email:u,subject:f,body:x})},onSuccess:()=>{o({title:"Message sent successfully"}),v(""),g(""),t(!1)},onError:()=>{o({title:"Failed to send message",variant:"destructive"})}});return e.jsx(yt,{open:s,onOpenChange:t,children:e.jsxs(xt,{className:"sm:max-w-[460px]","data-testid":"dialog-contact",children:[e.jsxs(gt,{children:[e.jsxs(vt,{className:"text-xl flex items-center gap-2",children:[e.jsx(hs,{className:"w-5 h-5"}),"Get in Touch"]}),e.jsx($i,{className:"text-sm text-muted-foreground",children:"Send us a message and we'll get back to you."})]}),e.jsxs("div",{className:"space-y-3 py-2",children:[e.jsx(Oe,{placeholder:"Your name",value:l,onChange:N=>d(N.target.value),"data-testid":"input-contact-name"}),e.jsx(Oe,{type:"email",placeholder:"Your email",value:u,onChange:N=>h(N.target.value),"data-testid":"input-contact-email"}),e.jsx(Oe,{placeholder:"Subject",value:f,onChange:N=>v(N.target.value),"data-testid":"input-contact-subject"}),e.jsx(fs,{placeholder:"Your message...",value:x,onChange:N=>g(N.target.value),className:"min-h-[100px] resize-none","data-testid":"textarea-contact-body"})]}),e.jsx(Ba,{children:e.jsxs(L,{onClick:()=>j.mutate(),disabled:!l.trim()||!u.trim()||!f.trim()||!x.trim()||j.isPending,className:"w-full gap-2","data-testid":"button-send-message",children:[e.jsx(os,{className:"w-4 h-4"}),j.isPending?"Sending...":"Send Message"]})})]})})}function cz({postCount:s,isLoggedIn:t}){const{data:n=[]}=_e({queryKey:["/api/community/members"]});return e.jsxs("div",{className:"space-y-4 sticky top-6 z-40",children:[e.jsxs("div",{className:"bg-card rounded-xl border p-5",children:[e.jsxs("div",{className:"flex items-center gap-2.5 mb-4",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-primary to-primary/70 flex items-center justify-center",children:e.jsx(Vr,{className:"w-5 h-5 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-sm",children:"Community Members"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.length," member",n.length!==1?"s":""]})]})]}),e.jsx(Di,{className:"mb-4"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3","data-testid":"stat-members",children:[e.jsx("div",{className:"h-8 w-8 rounded-lg bg-muted/60 dark:bg-muted/30 flex items-center justify-center",children:e.jsx(Vr,{className:"w-4 h-4 text-foreground/60"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium","data-testid":"text-member-count",children:n.length}),e.jsx("p",{className:"text-[11px] text-muted-foreground",children:"Members"})]})]}),e.jsxs("div",{className:"flex items-center gap-3","data-testid":"stat-posts",children:[e.jsx("div",{className:"h-8 w-8 rounded-lg bg-muted/60 dark:bg-muted/30 flex items-center justify-center",children:e.jsx(Nd,{className:"w-4 h-4 text-foreground/60"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium","data-testid":"text-post-count",children:s}),e.jsx("p",{className:"text-[11px] text-muted-foreground",children:"Posts"})]})]})]})]}),n.length>0&&e.jsxs("div",{className:"bg-card rounded-xl border p-5",children:[e.jsx("h4",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-3",children:"Members"}),e.jsx("div",{className:"space-y-2.5 max-h-[300px] overflow-y-auto",children:n.slice(0,20).map(r=>e.jsxs("div",{className:"flex items-center gap-2.5","data-testid":`member-${r.id}`,children:[e.jsxs(Yr,{className:"h-8 w-8 shrink-0 ring-1 ring-background",children:[r.avatarUrl&&e.jsx(ja,{src:r.avatarUrl,alt:r.displayName}),e.jsx(Xr,{className:`bg-gradient-to-br ${Ro(r.displayName)} text-white text-[10px] font-bold`,children:Po(r.displayName)})]}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-medium truncate","data-testid":`text-member-name-${r.id}`,children:r.displayName}),e.jsxs("p",{className:"text-[11px] text-muted-foreground",children:["Joined ",Id(r.createdAt)]})]})]},r.id))})]})]})}function dz({posts:s,isLoggedIn:t,onContactOpen:n,portalUrl:r}){const o=s.filter(d=>d.isPinned),l=[...s].sort((d,u)=>u.likesCount+u.heartsCount+(u.hahaCount||0)+(u.angryCount||0)-(d.likesCount+d.heartsCount+(d.hahaCount||0)+(d.angryCount||0))).slice(0,3);return e.jsxs("div",{className:"space-y-4 sticky top-6 z-40",children:[r&&e.jsxs("div",{className:"bg-card rounded-xl border p-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(_s,{className:"w-4 h-4 text-primary"}),e.jsx("h4",{className:"text-sm font-semibold","data-testid":"text-portal-title",children:"Your Portal"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Access your project portal to manage your services."}),e.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer","data-testid":"link-portal",children:e.jsxs(L,{variant:"outline",size:"sm",className:"w-full gap-1.5 text-xs",children:[e.jsx(_s,{className:"w-3 h-3"}),"Open Portal"]})})]}),o.length>0&&e.jsxs("div",{className:"bg-card rounded-xl border p-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(lx,{className:"w-4 h-4 text-primary"}),e.jsx("h4",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"Pinned"})]}),e.jsx("div",{className:"space-y-2",children:o.slice(0,3).map(d=>e.jsxs("a",{href:`#post-${d.id}`,className:"block p-3 rounded-lg bg-muted/30 dark:bg-muted/15 transition-colors hover-elevate","data-testid":`link-pinned-${d.id}`,children:[e.jsx("p",{className:"text-sm font-medium line-clamp-2","data-testid":`text-pinned-title-${d.id}`,children:d.title||d.body}),e.jsx("p",{className:"text-[11px] text-muted-foreground mt-1",children:Id(d.createdAt)})]},d.id))})]}),e.jsxs("div",{className:"bg-card rounded-xl border p-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(yg,{className:"w-4 h-4 text-emerald-500"}),e.jsx("h4",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"Trending"})]}),l.length>0?e.jsx("div",{className:"space-y-2",children:l.map((d,u)=>e.jsxs("a",{href:`#post-${d.id}`,className:"flex items-start gap-3 p-2 rounded-lg hover-elevate","data-testid":`link-trending-${d.id}`,children:[e.jsx("span",{className:"text-lg font-bold text-muted-foreground/50 mt-0.5 min-w-[20px]",children:u+1}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium line-clamp-2","data-testid":`text-trending-title-${d.id}`,children:d.title||d.body}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[e.jsxs("span",{className:"text-[11px] text-muted-foreground",children:[d.likesCount+d.heartsCount+(d.hahaCount||0)+(d.angryCount||0)," reactions"]}),e.jsxs("span",{className:"text-[11px] text-muted-foreground",children:[d.commentsCount," comments"]})]})]})]},d.id))}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-3",children:"No trending posts yet"})]}),e.jsxs("div",{className:"bg-card rounded-xl border p-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(hs,{className:"w-4 h-4 text-primary"}),e.jsx("h4",{className:"text-sm font-semibold","data-testid":"text-contact-title",children:"Get in Touch"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Have a question or feedback? Send us a message."}),e.jsxs(L,{variant:"outline",size:"sm",onClick:n,className:"w-full gap-1.5 text-xs","data-testid":"button-open-contact",children:[e.jsx(hs,{className:"w-3 h-3"}),"Send Message"]})]}),e.jsxs("div",{className:"bg-muted/30 dark:bg-muted/15 rounded-xl border p-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx($n,{className:"w-4 h-4 text-primary"}),e.jsx("h4",{className:"text-sm font-semibold","data-testid":"text-promo-title",children:"AI Powered Sites"})]}),e.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed","data-testid":"text-promo-description",children:"Premium web solutions powered by AI. Get a free website audit and discover how we can transform your online presence."}),e.jsx("a",{href:"/",className:"inline-block mt-3","data-testid":"link-learn-more",children:e.jsxs(L,{variant:"outline",size:"sm",className:"text-xs gap-1.5",children:[e.jsx(KE,{className:"w-3 h-3 rotate-45"}),"Learn More"]})})]})]})}function lC({isAdmin:s=!1,portalToken:t}){const{toast:n}=mt(),[r,o]=p.useState(!1),[l,d]=p.useState(!1),u=s||!!t,h=ZF(u),{data:f}=_e({queryKey:["/api/portal",t],enabled:!!t}),{data:v}=_e({queryKey:["/api/community/user/portal-link"],enabled:h.isLoggedIn}),x=s?"Admin":t&&f?.customer?.name?f.customer.name:h.user?.displayName||"",g=s?"admin":t?"client":"member",{data:j=[],isLoading:N}=_e({queryKey:["/api/community/posts"],refetchInterval:3e4}),[b,k]=p.useState(null),[E,S]=p.useState(""),[T,P]=p.useState(""),[H,re]=p.useState(""),B=h.user?.avatarUrl||"",Q=we({mutationFn:async X=>(await je("POST","/api/community/posts",{...X,authorName:x,authorAvatar:B||void 0,authorType:g,authorRole:s?"admin":"member"})).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/community/posts"]}),n({title:"Post published"})},onError:()=>{n({title:"Failed to create post",variant:"destructive"})}}),G=we({mutationFn:async X=>{const{id:$,...I}=X;return(await je("PATCH",`/api/community/posts/${$}`,{...I,authorName:x})).json()},onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/community/posts"]}),n({title:"Post updated"}),k(null)},onError:()=>{n({title:"Failed to update post",variant:"destructive"})}}),ue=we({mutationFn:async X=>{await je("DELETE",`/api/community/posts/${X}?authorName=${encodeURIComponent(x)}`)},onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/community/posts"]}),n({title:"Post deleted"})}}),_=we({mutationFn:async({id:X,isPinned:$})=>{await je("PATCH",`/api/community/posts/${X}`,{isPinned:$,authorName:x})},onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/community/posts"]})}}),Y=()=>{x||o(!0)},z=[...j].sort((X,$)=>X.isPinned&&!$.isPinned?-1:!X.isPinned&&$.isPinned?1:new Date($.createdAt).getTime()-new Date(X.createdAt).getTime()),J=v?.hasPortal?v.portalUrl:null;return e.jsxs("div",{className:`min-h-screen ${s?"":"bg-muted/30 dark:bg-muted/10"}`,"data-testid":"page-community",children:[!s&&e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 pt-8 pb-6",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsx("div",{className:"h-12 w-12 rounded-xl bg-muted/60 dark:bg-muted/30 flex items-center justify-center border",children:e.jsx(ya,{className:"w-6 h-6 text-foreground/60"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight","data-testid":"text-community-title",children:"Community"}),e.jsx("p",{className:"text-sm text-muted-foreground","data-testid":"text-community-subtitle",children:"Updates, announcements, and conversations"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[h.isLoggedIn&&!u&&e.jsx(oz,{}),!u&&h.isLoggedIn&&h.user?e.jsxs(k0,{children:[e.jsx(C0,{asChild:!0,children:e.jsxs(L,{variant:"ghost",className:"gap-2","data-testid":"button-user-menu",children:[e.jsxs(Yr,{className:"h-7 w-7 ring-1 ring-border",children:[h.user.avatarUrl&&e.jsx(ja,{src:h.user.avatarUrl}),e.jsx(Xr,{className:`bg-gradient-to-br ${Ro(h.user.displayName)} text-white text-[10px] font-bold`,children:Po(h.user.displayName)})]}),e.jsx("span",{className:"text-sm font-medium hidden sm:inline","data-testid":"text-user-name",children:h.user.displayName}),e.jsx(Sr,{className:"w-3.5 h-3.5"})]})}),e.jsxs(Eh,{align:"end",className:"w-48","data-testid":"dropdown-user-menu",children:[e.jsxs(xo,{onClick:()=>{window.location.href="/community/account"},"data-testid":"menu-my-account",children:[e.jsx(Gm,{className:"w-4 h-4 mr-2"}),"My Account"]}),e.jsxs(xo,{onClick:()=>h.logout.mutate(),"data-testid":"menu-signout",children:[e.jsx(fg,{className:"w-4 h-4 mr-2"}),"Sign Out"]})]})]}):u?null:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(L,{variant:"ghost",size:"sm",className:"gap-1.5",onClick:()=>o(!0),"data-testid":"button-hero-login",children:[e.jsx(hg,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Sign In"})]}),e.jsxs(L,{variant:"outline",size:"sm",className:"gap-1.5",onClick:()=>o(!0),"data-testid":"button-hero-signup",children:[e.jsx(gm,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Sign Up"})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1.5 bg-muted/40 dark:bg-muted/20 px-3 py-1.5 rounded-full border",children:[e.jsx(ys,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:[j.length," posts"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 bg-muted/40 dark:bg-muted/20 px-3 py-1.5 rounded-full border",children:[e.jsx(nn,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"Public"})]})]})]})}),s&&e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-primary to-primary/70 flex items-center justify-center",children:e.jsx(Vr,{className:"w-5 h-5 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight","data-testid":"text-community-title",children:"Community"}),e.jsx("p",{className:"text-sm text-muted-foreground","data-testid":"text-community-subtitle",children:"Manage posts and engage with your community"})]})]})}),e.jsx("div",{className:`max-w-7xl mx-auto ${s?"":"px-4 py-6"}`,children:e.jsxs("div",{className:"flex gap-6",children:[!s&&e.jsx("div",{className:"hidden lg:block w-[260px] shrink-0",children:e.jsx(cz,{postCount:j.length,isLoggedIn:h.isLoggedIn})}),e.jsxs("div",{className:`flex-1 min-w-0 ${s?"max-w-[680px]":""} space-y-5`,children:[x?e.jsx(sz,{onPost:X=>Q.mutate(X),isPending:Q.isPending,displayName:x,avatarUrl:B}):e.jsx("div",{className:"bg-card rounded-xl border p-5 cursor-pointer",onClick:Y,"data-testid":"card-post-composer-prompt",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Yr,{className:"h-11 w-11 ring-2 ring-background shadow-sm",children:e.jsx(Xr,{className:"bg-muted text-muted-foreground text-sm font-bold",children:"?"})}),e.jsx("div",{className:"flex-1 rounded-lg bg-muted/40 dark:bg-muted/20 px-4 py-3 text-muted-foreground text-sm",children:"Sign in to join the conversation..."})]})}),N?e.jsx(tz,{}):z.length===0?e.jsxs("div",{className:"bg-card rounded-xl border p-12 text-center","data-testid":"empty-state",children:[e.jsx("div",{className:"h-16 w-16 rounded-2xl bg-muted/50 flex items-center justify-center mx-auto mb-4",children:e.jsx(Nd,{className:"w-8 h-8 text-muted-foreground/40"})}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No posts yet"}),e.jsx("p",{className:"text-sm text-muted-foreground max-w-sm mx-auto",children:"Be the first to share something with the community!"})]}):e.jsx("div",{className:"space-y-5",children:z.map(X=>e.jsx(az,{post:X,isAdmin:s,displayName:x,authorType:g,userAvatar:B,onNeedName:Y,onDelete:$=>ue.mutate($),onPin:($,I)=>_.mutate({id:$,isPinned:I}),onEdit:$=>{k($),S($.title||""),P($.body),re($.imageUrl||"")}},X.id))})]}),!s&&e.jsx("div",{className:"hidden xl:block w-[300px] shrink-0",children:e.jsx(dz,{posts:j,isLoggedIn:h.isLoggedIn,onContactOpen:()=>d(!0),portalUrl:J})})]})}),e.jsx(iz,{open:r,onOpenChange:o,auth:h}),e.jsx(lz,{open:l,onOpenChange:d,prefillName:h.user?.displayName,prefillEmail:h.user?.email}),e.jsx(yt,{open:!!b,onOpenChange:X=>!X&&k(null),children:e.jsxs(xt,{className:"sm:max-w-[520px]","data-testid":"dialog-edit-post",children:[e.jsxs(gt,{children:[e.jsxs(vt,{className:"text-xl flex items-center gap-2",children:[e.jsx(kr,{className:"w-5 h-5"}),"Edit Post"]}),e.jsx($i,{className:"text-sm text-muted-foreground",children:"Make changes to your post below."})]}),e.jsxs("div",{className:"space-y-3 py-2",children:[e.jsx(Oe,{placeholder:"Post title (optional)",value:E,onChange:X=>S(X.target.value),className:"h-11 text-base font-medium","data-testid":"input-edit-title"}),e.jsx(fs,{placeholder:"What's on your mind?",value:T,onChange:X=>P(X.target.value),className:"min-h-[120px] text-base resize-none","data-testid":"textarea-edit-body"}),e.jsx(Oe,{placeholder:"Image URL (optional)",value:H,onChange:X=>re(X.target.value),"data-testid":"input-edit-image"})]}),e.jsxs(Ba,{className:"gap-2 sm:gap-0",children:[e.jsx(L,{variant:"outline",onClick:()=>k(null),"data-testid":"button-cancel-edit",children:"Cancel"}),e.jsxs(L,{onClick:()=>{b&&T.trim()&&G.mutate({id:b.id,title:E.trim()||void 0,body:T.trim(),imageUrl:H.trim()||void 0})},disabled:!T.trim()||G.isPending,className:"gap-1.5","data-testid":"button-save-edit",children:[e.jsx(ys,{className:"w-4 h-4"}),G.isPending?"Saving...":"Save Changes"]})]})]})})]})}const Lj=["from-blue-500 to-indigo-600","from-emerald-500 to-teal-600","from-purple-500 to-violet-600","from-orange-500 to-red-500","from-pink-500 to-rose-600","from-cyan-500 to-blue-500","from-amber-500 to-orange-600","from-indigo-500 to-purple-600"];function uz(s){let t=0;for(let n=0;n<s.length;n++)t=s.charCodeAt(n)+((t<<5)-t);return Lj[Math.abs(t)%Lj.length]}function mz(s){return s.split(" ").map(t=>t[0]).join("").toUpperCase().slice(0,2)}function hz(s){const t=new Date,n=new Date(s),r=t.getTime()-n.getTime(),o=Math.floor(r/1e3),l=Math.floor(o/60),d=Math.floor(l/60),u=Math.floor(d/24);return o<60?"just now":l<60?`${l}m ago`:d<24?`${d}h ago`:u<7?`${u}d ago`:n.toLocaleDateString()}function fz(s){if(!s)return"Unknown Browser";let t="Unknown Browser",n="";return s.includes("Firefox/")?t="Firefox":s.includes("Edg/")?t="Edge":s.includes("Chrome/")&&!s.includes("Edg/")?t="Chrome":s.includes("Safari/")&&!s.includes("Chrome/")?t="Safari":(s.includes("Opera/")||s.includes("OPR/"))&&(t="Opera"),s.includes("Windows")?n="Windows":s.includes("Macintosh")||s.includes("Mac OS")?n="macOS":s.includes("Linux")&&!s.includes("Android")?n="Linux":s.includes("Android")?n="Android":(s.includes("iPhone")||s.includes("iPad"))&&(n="iOS"),n?`${t} on ${n}`:t}function pz(s){return s&&(s.includes("Mobile")||s.includes("Android")||s.includes("iPhone"))?gg:fm}function xz(s){return new Date(s).toLocaleDateString("en-US",{month:"long",year:"numeric"})}function gz(){const{toast:s}=mt(),[,t]=Zx(),n=p.useRef(null),[r,o]=p.useState(""),[l,d]=p.useState(""),[u,h]=p.useState(!1),{data:f,isLoading:v}=_e({queryKey:["/api/community/auth/me"],queryFn:ag({on401:"returnNull"}),staleTime:6e4}),{data:x=[],isLoading:g}=_e({queryKey:["/api/community/auth/sessions"],enabled:!!f});p.useEffect(()=>{f&&(o(f.displayName||""),d(f.bio||""))},[f]),p.useEffect(()=>{!v&&!f&&t("/community")},[v,f,t]);const j=f&&(r!==(f.displayName||"")||l!==(f.bio||"")),N=we({mutationFn:async S=>(await je("PATCH","/api/community/auth/profile",S)).json(),onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/community/auth/me"]}),s({title:"Profile updated successfully"})},onError:()=>{s({title:"Failed to update profile",variant:"destructive"})}}),b=we({mutationFn:async S=>{await je("DELETE",`/api/community/auth/sessions/${S}`)},onSuccess:()=>{xe.invalidateQueries({queryKey:["/api/community/auth/sessions"]}),s({title:"Session revoked"})},onError:()=>{s({title:"Failed to revoke session",variant:"destructive"})}}),k=()=>{N.mutate({displayName:r.trim(),bio:l.trim()})},E=async S=>{const T=S.target.files?.[0];if(T){h(!0);try{const P=await fetch("/api/uploads/request-url",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:T.name,size:T.size,contentType:T.type})});if(!P.ok)throw new Error("Failed to get upload URL");const{uploadURL:H,objectPath:re}=await P.json();if(!(await fetch(H,{method:"PUT",headers:{"Content-Type":T.type},body:T})).ok)throw new Error("Failed to upload file");await je("PATCH","/api/community/auth/profile",{avatarUrl:re}),xe.invalidateQueries({queryKey:["/api/community/auth/me"]}),s({title:"Avatar updated"})}catch{s({title:"Failed to upload avatar",variant:"destructive"})}finally{h(!1),n.current&&(n.current.value="")}}};return v?e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8 space-y-6",children:[e.jsx(ye,{className:"h-8 w-48"}),e.jsx(ce,{children:e.jsx(tn,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx(ye,{className:"h-24 w-24 rounded-full"}),e.jsxs("div",{className:"space-y-3 flex-1",children:[e.jsx(ye,{className:"h-5 w-40"}),e.jsx(ye,{className:"h-4 w-56"}),e.jsx(ye,{className:"h-4 w-32"})]})]})})}),e.jsx(ce,{children:e.jsxs(tn,{className:"p-6 space-y-4",children:[e.jsx(ye,{className:"h-5 w-32"}),e.jsx(ye,{className:"h-10 w-full"}),e.jsx(ye,{className:"h-10 w-full"}),e.jsx(ye,{className:"h-20 w-full"})]})})]})}):f?e.jsx("div",{className:"min-h-screen bg-background","data-testid":"page-community-account",children:e.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx(L,{variant:"ghost",size:"icon",onClick:()=>t("/community"),"data-testid":"button-back-community",children:e.jsx(va,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight","data-testid":"text-page-title",children:"My Account"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your profile and account settings"})]})]}),e.jsxs(ce,{"data-testid":"card-profile",children:[e.jsxs(ed,{children:[e.jsxs(td,{className:"flex items-center gap-2 text-lg",children:[e.jsx(Gm,{className:"w-5 h-5"}),"Profile"]}),e.jsx(rm,{children:"Your public profile information"})]}),e.jsxs(tn,{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-6",children:[e.jsxs("div",{className:"relative group shrink-0",children:[e.jsxs(Yr,{className:"h-24 w-24 ring-4 ring-background shadow-md cursor-pointer",onClick:()=>n.current?.click(),"data-testid":"avatar-profile",children:[e.jsx(ja,{src:f.avatarUrl||void 0,alt:f.displayName}),e.jsx(Xr,{className:`bg-gradient-to-br ${uz(f.displayName)} text-white text-2xl font-bold`,children:mz(f.displayName)})]}),e.jsx("button",{onClick:()=>n.current?.click(),className:"absolute inset-0 flex items-center justify-center rounded-full bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",disabled:u,"data-testid":"button-upload-avatar",children:u?e.jsx(We,{className:"w-6 h-6 text-white animate-spin"}):e.jsx(ix,{className:"w-6 h-6 text-white"})}),e.jsx("input",{ref:n,type:"file",accept:"image/*",onChange:E,className:"hidden","data-testid":"input-avatar-file"})]}),e.jsxs("div",{className:"flex-1 w-full space-y-1 text-center sm:text-left",children:[e.jsx("h2",{className:"text-xl font-semibold","data-testid":"text-display-name",children:f.displayName}),e.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-muted-foreground justify-center sm:justify-start flex-wrap",children:[e.jsx(hs,{className:"w-3.5 h-3.5"}),e.jsx("span",{"data-testid":"text-email",children:f.email})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-muted-foreground justify-center sm:justify-start flex-wrap",children:[e.jsx(Um,{className:"w-3.5 h-3.5"}),e.jsxs("span",{"data-testid":"text-member-since",children:["Member since ",xz(f.createdAt)]})]})]})]}),e.jsx(Di,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",htmlFor:"displayName",children:"Display Name"}),e.jsx(Oe,{id:"displayName",value:r,onChange:S=>o(S.target.value),placeholder:"Your display name","data-testid":"input-display-name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",htmlFor:"email",children:"Email"}),e.jsx(Oe,{id:"email",value:f.email,disabled:!0,className:"opacity-60","data-testid":"input-email-readonly"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",htmlFor:"bio",children:"Bio"}),e.jsx(fs,{id:"bio",value:l,onChange:S=>d(S.target.value),placeholder:"Tell us about yourself...",className:"resize-none min-h-[100px]","data-testid":"textarea-bio"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(L,{onClick:k,disabled:!j||N.isPending,className:"gap-2","data-testid":"button-save-profile",children:[N.isPending?e.jsx(We,{className:"w-4 h-4 animate-spin"}):e.jsx(Vm,{className:"w-4 h-4"}),"Save Changes"]})})]})]})]}),e.jsxs(ce,{"data-testid":"card-sessions",children:[e.jsxs(ed,{children:[e.jsxs(td,{className:"flex items-center gap-2 text-lg",children:[e.jsx(kn,{className:"w-5 h-5"}),"Login Sessions"]}),e.jsx(rm,{children:"Devices where your account is currently logged in"})]}),e.jsx(tn,{children:g?e.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((S,T)=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ye,{className:"h-10 w-10 rounded-md"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(ye,{className:"h-4 w-40"}),e.jsx(ye,{className:"h-3 w-24"})]}),e.jsx(ye,{className:"h-8 w-20"})]},T))}):x.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-6",children:"No active sessions found"}):e.jsx("div",{className:"space-y-3",children:x.map(S=>{const T=pz(S.userAgent);return e.jsxs("div",{className:`flex items-center gap-4 rounded-lg p-3 transition-colors flex-wrap ${S.isCurrent?"bg-primary/5 dark:bg-primary/10 border border-primary/20":"bg-muted/30 dark:bg-muted/15 border border-transparent"}`,"data-testid":`session-${S.id}`,children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-md bg-muted/50 dark:bg-muted/30 shrink-0",children:e.jsx(T,{className:"w-5 h-5 text-muted-foreground"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-sm font-medium","data-testid":`text-session-device-${S.id}`,children:fz(S.userAgent)}),S.isCurrent&&e.jsx(Ce,{variant:"secondary",className:"text-[10px] py-0 h-4 bg-primary/10 text-primary border-0 font-semibold",children:"Current Session"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground mt-0.5 flex-wrap",children:[S.ipAddress&&e.jsxs("span",{className:"flex items-center gap-1","data-testid":`text-session-ip-${S.id}`,children:[e.jsx(nn,{className:"w-3 h-3"}),S.ipAddress]}),S.lastSeenAt&&e.jsx("span",{"data-testid":`text-session-lastseen-${S.id}`,children:hz(S.lastSeenAt)})]})]}),!S.isCurrent&&e.jsxs(L,{variant:"outline",size:"sm",onClick:()=>b.mutate(S.id),disabled:b.isPending,className:"shrink-0 text-destructive","data-testid":`button-revoke-session-${S.id}`,children:[b.isPending?e.jsx(We,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(zn,{className:"w-3.5 h-3.5 mr-1"}),"Revoke"]})]},S.id)})})})]}),e.jsxs(ce,{"data-testid":"card-account-settings",children:[e.jsxs(ed,{children:[e.jsxs(td,{className:"flex items-center gap-2 text-lg",children:[e.jsx(od,{className:"w-5 h-5"}),"Account Settings"]}),e.jsx(rm,{children:"Security and account preferences"})]}),e.jsxs(tn,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Account Email"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(hs,{className:"w-4 h-4"}),e.jsx("span",{"data-testid":"text-account-email",children:f.email})]})]}),e.jsx(Di,{}),e.jsxs("div",{className:"rounded-lg border border-dashed p-4 bg-muted/20 dark:bg-muted/10",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-muted-foreground",children:[e.jsx(od,{className:"w-4 h-4"}),"Change Password"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1","data-testid":"text-password-placeholder",children:"Password change coming soon"})]})]})]})]})}):null}const vz="/images/logo.png";function yz(){const{toast:s}=mt(),[t,n]=p.useState(""),[r,o]=p.useState(""),[l,d]=p.useState(!1),u=async h=>{h.preventDefault(),d(!0);try{const f=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:r})}),v=await f.json();if(!f.ok){s({title:"Login failed",description:v.message||"Invalid credentials",variant:"destructive"}),d(!1);return}window.location.href=v.redirect||"/admin"}catch{s({title:"Error",description:"Something went wrong. Please try again.",variant:"destructive"}),d(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4",children:e.jsxs(ce,{className:"w-full max-w-sm p-8 bg-card/95 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex flex-col items-center mb-6",children:[e.jsx("img",{src:vz,alt:"AI Powered Sites",className:"w-14 h-14 rounded-md object-cover mb-4"}),e.jsx("h1",{className:"text-xl font-semibold",children:"Admin Login"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Sign in to your dashboard"})]}),e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"email",children:"Email"}),e.jsx(Oe,{id:"email",type:"email",placeholder:"you@example.com",value:t,onChange:h=>n(h.target.value),required:!0,"data-testid":"input-login-email"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(De,{htmlFor:"password",children:"Password"}),e.jsx(Oe,{id:"password",type:"password",placeholder:"Your password",value:r,onChange:h=>o(h.target.value),required:!0,"data-testid":"input-login-password"})]}),e.jsxs(L,{type:"submit",className:"w-full",disabled:l,"data-testid":"button-login-submit",children:[l?e.jsx(We,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(hg,{className:"w-4 h-4 mr-2"}),"Sign In"]})]})]})})}function bz(){return e.jsxs(Vj,{children:[e.jsx(At,{path:"/admin",component:qR}),e.jsx(At,{path:"/admin/customers",component:HR}),e.jsx(At,{path:"/admin/projects",component:S_}),e.jsx(At,{path:"/admin/invoices",component:T_}),e.jsx(At,{path:"/admin/billing-rates",component:R_}),e.jsx(At,{path:"/admin/payment-methods",component:H_}),e.jsx(At,{path:"/admin/quotes",component:dO}),e.jsx(At,{path:"/admin/support",component:pO}),e.jsx(At,{path:"/admin/qa",component:U9}),e.jsx(At,{path:"/admin/quote-builder",component:G9}),e.jsx(At,{path:"/admin/conversations",component:J9}),e.jsx(At,{path:"/admin/api-keys",component:eq}),e.jsx(At,{path:"/admin/code-backups",component:rq}),e.jsx(At,{path:"/admin/lead-generator",component:oq}),e.jsx(At,{path:"/admin/servers",component:gq}),e.jsx(At,{path:"/admin/knowledge-base",component:Iq}),e.jsx(At,{path:"/admin/licenses",component:Oq}),e.jsx(At,{path:"/admin/community",children:()=>e.jsx(lC,{isAdmin:!0})}),e.jsx(At,{path:"/admin/settings",component:Y_}),e.jsx(At,{component:T2})]})}function Mj(){const s={"--sidebar-width":"16rem","--sidebar-width-icon":"3rem"},{user:t,isLoading:n,isAuthenticated:r}=E2(),{toast:o}=mt();if(p.useEffect(()=>{!n&&!r&&(o({title:"Unauthorized",description:"Please sign in to access the dashboard.",variant:"destructive"}),setTimeout(()=>{window.location.href="/api/login"},500))},[n,r]),n)return e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"text-muted-foreground",children:"Loading..."})});if(!r)return null;const l=[t?.firstName?.[0],t?.lastName?.[0]].filter(Boolean).join("").toUpperCase()||"U",{data:d}=_e({queryKey:["/api/community/notifications/unread-count"],refetchInterval:15e3}),u=d?.count||0;return e.jsx(Z6,{style:s,children:e.jsxs("div",{className:"flex h-screen w-full",children:[e.jsx(pR,{}),e.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[e.jsxs("header",{className:"flex items-center justify-between gap-3 flex-wrap px-4 py-2 border-b sticky top-0 z-50 bg-background",children:[e.jsx(eR,{"data-testid":"button-sidebar-toggle"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("a",{href:"/admin/community",className:"relative","data-testid":"link-community-notifications",children:e.jsxs(L,{variant:"ghost",size:"icon",className:"relative",children:[e.jsx(bo,{className:"w-4 h-4"}),u>0&&e.jsx("span",{className:"absolute -top-0.5 -right-0.5 min-w-[18px] h-[18px] px-1 flex items-center justify-center rounded-full bg-red-500 text-white text-[10px] font-bold leading-none","data-testid":"badge-notification-count",children:u>99?"99+":u})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Yr,{className:"w-7 h-7","data-testid":"img-user-avatar",children:[e.jsx(ja,{src:t?.profileImageUrl||void 0,alt:t?.firstName||"User"}),e.jsx(Xr,{className:"text-xs",children:l})]}),e.jsx("span",{className:"text-sm text-muted-foreground hidden sm:inline","data-testid":"text-user-name",children:[t?.firstName,t?.lastName].filter(Boolean).join(" ")||"Admin"})]}),e.jsx("a",{href:"/api/logout",children:e.jsx(L,{variant:"ghost",size:"icon","data-testid":"button-logout",children:e.jsx(fg,{className:"w-4 h-4"})})}),e.jsx(x2,{})]})]}),e.jsx("main",{className:"flex-1 overflow-auto p-6 bg-dot-pattern",children:e.jsx(bz,{})})]})]})})}function jz(){return e.jsxs(Vj,{children:[e.jsx(At,{path:"/",component:oO}),e.jsx(At,{path:"/questions",component:H9}),e.jsx(At,{path:"/portal/:token",component:KI}),e.jsx(At,{path:"/progress/:projectId",component:W9}),e.jsx(At,{path:"/quote/:token",component:X9}),e.jsx(At,{path:"/conversation/:token",component:Z9}),e.jsx(At,{path:"/api/docs",component:tq}),e.jsx(At,{path:"/help",component:Mq}),e.jsx(At,{path:"/community",children:()=>e.jsx(lC,{})}),e.jsx(At,{path:"/community/account",component:gz}),e.jsx(At,{path:"/login",component:yz}),e.jsx(At,{path:"/admin/:rest*",children:e.jsx(Mj,{})}),e.jsx(At,{path:"/admin",children:e.jsx(Mj,{})}),e.jsx(At,{component:T2})]})}function wz(){return e.jsx(O3,{client:xe,children:e.jsx(xR,{children:e.jsxs(_N,{children:[e.jsx(jz,{}),e.jsx(oA,{})]})})})}HS.createRoot(document.getElementById("root")).render(e.jsx(wz,{}))});export default Nz();
